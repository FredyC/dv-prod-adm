(window.webpackJsonpspeedlo=window.webpackJsonpspeedlo||[]).push([[185],{1449:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var a=n(59),r=n(0),c=n.n(r),i=n(1447),u=n(1455),l=Object(a.observer)(function(e){var t=e.mutationName,n=e.children;return Object(i.b)(t)?c.a.createElement(c.a.Fragment,null,n):c.a.createElement(u.a,null,"No access to mutation ".concat(t))})},1460:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var a=n(4);function r(){var e=Object(a.a)(["\n  flex: ",";\n  padding: ",";\n  margin: ",";\n"]);return r=function(){return e},e}var c=n(24).default.div(r(),function(e){var t=e.fixedWidth,n=void 0!==t&&t,a=e.width,r=e.widthGrowIndex,c=void 0===r?0:r;return n?a?"0 0 ".concat(a):"0 0":"".concat(c," 0")},function(e){var t=e.padding;return void 0===t?"0.25rem":t},function(e){var t=e.margin;return void 0===t?"":t})},1502:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var a=n(59),r=n(0),c=n.n(r),i=n(1447),u=n(1455),l=Object(a.observer)(function(e){var t=e.queryName,n=e.children;return Object(i.c)(t)?c.a.createElement(c.a.Fragment,null,n):c.a.createElement(u.a,null,"No access to query ".concat(t))})},1514:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var a=n(80),r=n(62),c=n(1446),i=n(59),u=n(0),l=n.n(u),o=n(1451),s=l.a.forwardRef(function(e,t){var n=e.fieldName,u=e.fullWidth,s=e.addHiddenLabelWithPlaceholderText,m=void 0===s||s,d=Object(r.a)(e,["fieldName","fullWidth","addHiddenLabelWithPlaceholderText"]),f=Object(c.e)(n),b=Object(a.a)(f,2),h=b[0],v=b[1];return Object(i.useObserver)(function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(o.b,Object.assign({},v(),{invalid:h.touched&&Boolean(h.error),inputFullWidth:u,ref:t},d)),m&&d.placeholder&&l.a.createElement("label",{hidden:!0,htmlFor:h.name},d.placeholder))})})},1516:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var a=n(62),r=n(1803),c=n(0),i=n.n(c),u=n(319),l=n(19),o=n(132),s=function(e){var t=e.onDelete,n=e.confirmText,c=Object(a.a)(e,["onDelete","confirmText"]);return i.a.createElement(u.a,null,i.a.createElement(o.a,Object.assign({icon:r.a,color:l.a.greyMiddle,onClick:function(e){e.preventDefault(),n&&!window.confirm(n)||t()}},c)))}},1529:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var a=n(1634),r=n(1518),c=n(0),i=n.n(c),u=function(e){var t=e.children;return i.a.createElement(r.c,{utils:a.a},t)}},1610:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var a=n(62),r=n(1820),c=n(1446),i=n(59),u=n(0),l=n.n(u),o=n(132),s=n(19),m=function(e){var t=e.children,n=e.id,u=void 0===n?"form-submit":n,m=Object(a.a)(e,["children","id"]),d=Object(c.h)();return Object(i.useObserver)(function(){return l.a.createElement(o.a,Object.assign({type:"submit",color:s.a.green,disabled:d.isSubmitting&&d.isDirty,id:u,icon:d.isValid?void 0:r.a,iconSize:1.1,iconColor:s.a.red},m),l.a.createElement(l.a.Fragment,null,t))})}},1611:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a=n(24).default.div.withConfig({displayName:"FlexDiv",componentId:"dwel3j-0"})(["display:flex;"])},1631:function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(43);t.a=Object(c.a)(r.a.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"}),"AddCircle")},1773:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var a=n(4),r=n(24),c=n(19),i=n(1611);function u(){var e=Object(a.a)(["\n  flex-direction: row;\n  justify-content: space-between;\n  border-bottom: 1px solid ",";\n  padding: 0.1rem 0 0.1rem 0;\n"]);return u=function(){return e},e}var l=Object(r.default)(i.a)(u(),c.a.greyMiddle)},1774:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n(55);function r(){return Object(a.b)().settings}},1781:function(e,t,n){"use strict";var a=n(80),r=n(62),c=n(1446),i=n(59),u=n(0),l=n.n(u),o=n(244),s=n(1518),m=n(1529),d=function(e){return l.a.createElement(m.a,null,l.a.createElement(s.a,Object.assign({variant:"inline",format:"ll",maxDateMessage:o.i18n._("Date is too much in the future"),minDateMessage:o.i18n._("Date is too much in the past")},e)))};n.d(t,"a",function(){return f});var f=function(e){var t=e.fieldName,n=Object(r.a)(e,["fieldName"]),u=Object(c.e)(t),o=Object(a.a)(u,2),s=o[0],m=o[1];return Object(i.useObserver)(function(){return l.a.createElement(d,Object.assign({},m(),{onChange:s.setValue,onOpen:s.setTouched},n))})}},1803:function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(43);t.a=Object(c.a)(r.a.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete")},1820:function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(43);t.a=Object(c.a)(r.a.createElement(r.a.Fragment,null,r.a.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"}),r.a.createElement("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),"ErrorOutline")},2841:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(72),i=n(197),u=n(112),l=n(320),o=n(95),s=n(1449),m=n(1502),d=n(193),f=n(1456),b=n(321),h=n(41),v=n(194),E=n(1517),p=n(33),O=n.n(p),g=n(134),j=n(74),w=n(80),D=n(51),y=n(20),A=n(59),k=n(325),T=n(55),x=n(133),N=n(65),H=n(172),M=n(195),C=n(132),S=n(19),F=n(4),I=n(1803),W=n(1631),z=n(24),R=n(319),L=n(1518),P=n(1529),_=function(e){return r.a.createElement(P.a,null,r.a.createElement(L.d,Object.assign({format:"LT",variant:"inline"},e)))};function B(){var e=Object(F.a)(["\n  & input {\n    width: 5rem;\n  }\n"]);return B=function(){return e},e}var V=z.default.div(B()),q=r.a.memo(function(e){var t=e.hour;return Object(A.useObserver)(function(){return r.a.createElement(V,null,r.a.createElement(_,{value:t.openAt,onChange:function(e){return t.openAt=e},label:r.a.createElement(o.Trans,{id:"input.timespan.from"}),fullWidth:!1}),r.a.createElement(_,{value:t.closeAt,onChange:function(e){return t.closeAt=e},label:r.a.createElement(o.Trans,{id:"input.timespan.to"}),fullWidth:!1}))})});function G(){var e=Object(F.a)(["\n  display: flex;\n  align-items: baseline;\n  margin: 0 0 0.3rem 0;\n  h5 {\n    width: 5rem;\n  }\n  & .range {\n    display: flex;\n    margin: 0 2rem 0 0;\n    padding-right: 1rem;\n    background: ",";\n    border-radius: ",";\n  }\n  .remove-btn {\n    margin-right: 1rem;\n  }\n"]);return G=function(){return e},e}var J=z.default.article(G(),S.a.white,S.c.Button),U=r.a.memo(function(e){var t=e.weekday,n=e.hours,a=e.onAdd,c=e.onRemove,i=function(e){return r.a.createElement("div",{key:e.id,"data-testid":"bh-range",className:"range"},r.a.createElement(R.a,{className:"remove-btn"},r.a.createElement(C.a,{title:h.b._("Remove business hour"),role:"button",onClick:function(){return c(e.id)}},r.a.createElement(I.a,null))),r.a.createElement(q,{hour:e}))};return Object(A.useObserver)(function(){return r.a.createElement(J,null,r.a.createElement("h5",null,t.code),0===n.length?r.a.createElement("em",null,r.a.createElement(o.Trans,{id:"Closed"})):n.map(i),r.a.createElement(R.a,null,r.a.createElement(C.a,{title:h.b._("Add business hour"),role:"button",onClick:a},r.a.createElement(W.a,null))))})}),Y=D.DFP.parse(new Date,"H:mm"),K=Object(A.observer)(function(){var e=Object(T.b)().settings,t=Object(N.Pb)({branchId:e.branchId}),n=t.data,a=t.loading,c=r.a.useState(function(){return Object(y.observable)(new Map)}),i=Object(w.a)(c,1)[0],u=Object(N.B)(),l=Object(w.a)(u,1)[0];r.a.useEffect(function(){if(!a)return 0===i.size&&n.weekDays.forEach(function(e){i.set(e.enum,y.observable.array([]))}),n.businessHours.forEach(function(e){var t=e.id,n=e.openAt,a=e.closeAt,r=e.weekDay;r&&i.get(r.enum).push({id:t,openAt:Y(n),closeAt:Y(a),weekDay:r.enum})}),function(){i.forEach(function(e){e.clear()})}},[n.businessHours,n.weekDays,a,e.branchId]);var o=r.a.useRef(0),s=function(e){return function(t){var n=i.get(e),a=n.findIndex(D.RM.propEq("id",t));a>=0&&n.splice(a,1)}},m=Object(M.a)().enqueueSuccess,d=r.a.useCallback(Object(j.a)(O.a.mark(function t(){var n;return O.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=[],i.forEach(function(e,t){n.push.apply(n,Object(g.a)(e.map(function(e){return{openAt:Object(H.f)(e.openAt),closeAt:Object(H.f)(e.closeAt),weekDay:t}})))}),t.next=4,l({branchId:e.branchId,hours:n});case 4:t.sent&&m(h.b._("Regular business hours has been updated"));case 6:case"end":return t.stop()}},t)})),[i,m,e.branchId,l]);return a||0===i.size?r.a.createElement(k.a,null):r.a.createElement("div",null,n.weekDays.map(function(e){return r.a.createElement(U,{key:e.enum,weekday:e,hours:i.get(e.enum),onAdd:(t=e.enum,function(){i.get(t).push({weekDay:t,id:"L".concat(o.current++),openAt:D.DFP.startOfDay(new Date),closeAt:D.DFP.endOfDay(new Date)})}),onRemove:s(e.enum)});var t}),r.a.createElement(x.a,{width:20},r.a.createElement(b.a,{margin:"1rem"},r.a.createElement(C.a,{text:h.b._("Save regular hours"),color:S.a.green,onClick:d}))))}),Q=n(1446),X=n(89),Z=n(1514),$=n(1781),ee=n(62),te=r.a.memo(function(e){var t=e.fieldName,n=Object(ee.a)(e,["fieldName"]),a=Object(Q.e)(t),c=Object(w.a)(a,2),i=c[0],u=c[1];return Object(A.useObserver)(function(){return r.a.createElement(_,Object.assign({},u(),{onChange:i.setValue,onOpen:i.setTouched},n))})});function ne(){var e=Object(F.a)(["\n  width: 5rem;\n  display: inline-block;\n"]);return ne=function(){return e},e}var ae,re=z.default.div(ne()),ce=function(e){var t=e.fieldFrom,n=e.fieldTo;return r.a.createElement(r.a.Fragment,null,r.a.createElement(re,null,r.a.createElement(te,{fieldName:t,label:r.a.createElement(o.Trans,{id:"input.timespan.from"}),fullWidth:!1})),r.a.createElement(re,null,r.a.createElement(te,{fieldName:n,label:r.a.createElement(o.Trans,{id:"input.timespan.to"}),fullWidth:!1})))},ie=n(1610),ue=n(348),le=n(196),oe=n(244),se=n(1461),me=n(1774),de=(ae={},Object(le.a)(ae,ue.b.TIMESPAN,Object(oe.i18nMark)("Open between")),Object(le.a)(ae,ue.b.FULLDAY,Object(oe.i18nMark)("Closed")),ae),fe=r.a.memo(function(){var e=Object(me.a)().businessHours;return Object(A.useObserver)(function(){return r.a.createElement(se.a,{items:[ue.b.TIMESPAN,ue.b.FULLDAY],selectedItem:e.specificMode,formatItem:function(e){return h.b._(de[e])},onSingleSelection:function(t){return e.changeSpecificMode(t)}})})});function be(){var e=Object(F.a)(["\n  display: inline-block;\n  width: 16rem;\n  min-height: 6rem;\n  margin: 0rem 0 0 1rem;\n  vertical-align: top;\n"]);return be=function(){return e},e}function he(){var e=Object(F.a)(["\n  display: inline-block;\n  width: 13rem;\n  margin-left: 1rem;\n  margin-top: 2rem;\n"]);return he=function(){return e},e}var ve=z.default.div(he()),Ee=z.default.div(be()),pe=function(e){var t=Object(T.b)().settings.businessHours;return r.a.createElement(Q.a,{onSubmit:t.submitSpecificHour,initialValues:Oe()},r.a.createElement(ve,null,r.a.createElement($.a,{fieldName:"date",format:H.h,minDate:new Date,fullWidth:!0,label:r.a.createElement(o.Trans,{id:"Date"})})),r.a.createElement(Ee,null,r.a.createElement(fe,null),r.a.createElement(A.Observer,null,function(){return t.specificMode===ue.b.TIMESPAN?r.a.createElement(ce,{fieldFrom:"openAt",fieldTo:"closeAt"}):r.a.createElement(x.a,{width:13},r.a.createElement(Z.a,{fieldName:"note",fullWidth:!0,placeholder:h.b._("Closing reason")}))})),r.a.createElement(ie.a,{width:"9rem"},r.a.createElement(o.Trans,{id:"Add"})))};function Oe(){var e=new Date;return{date:e,openAt:Object(X.setHours)(Object(X.setMinutes)(e,0),9),closeAt:Object(X.setHours)(Object(X.setMinutes)(e,0),20)}}var ge=n(38),je=n(1460),we=n(1773),De=n(1516),ye=function(e){var t=e.bsHour,n=e.onDelete;return r.a.createElement(we.a,null,r.a.createElement(je.a,{fixedWidth:!0},r.a.createElement(s.a,{mutationName:"destroyBusinessHour"},r.a.createElement(De.a,{onDelete:n,confirmText:"".concat(h.b._("Really remove specific business hour {0}?",{0:t.specificDateLocalized}))}))),r.a.createElement(je.a,{fixedWidth:!0,width:"14rem"},t.specificDateLocalized),r.a.createElement(je.a,{fixedWidth:!0,width:"10rem"},function(e){return"".concat(e.openAt," - ").concat(e.closeAt)}(t)),r.a.createElement(je.a,{fixedWidth:!0,width:"10rem"},t.closed?r.a.createElement(o.Trans,{id:"Closed"}):r.a.createElement(o.Trans,{id:"Open"})),r.a.createElement(je.a,{widthGrowIndex:1},t.closedNote))};var Ae=n(490),ke=ge.a.sort(ge.a.ascend(ge.a.or(ge.a.prop("specificDate"),ge.a.not))),Te=function(){var e=Object(T.b)().settings;return Object(A.useObserver)(function(){return r.a.createElement(Ae.a,{variables:{branchId:e.branchId},fetchPolicy:"cache-and-network",renderFragment:function(t){var n=t.businessHours;return ke(n).map(function(t){return r.a.createElement(ye,{key:t.id,bsHour:t,onDelete:function(){return e.businessHours.deleteSpecificHour(t.id)}})})}})})},xe=function(){return r.a.createElement(v.a,{pageTitle:h.b._("Business hours"),useBackButton:!0},r.a.createElement(d.a,null,r.a.createElement(E.a,null),r.a.createElement(m.a,{queryName:"businessHours"},r.a.createElement(f.a,null,r.a.createElement(b.a,{margin:"1rem 0"},r.a.createElement(o.Trans,{id:"Regular business hours"}))),r.a.createElement(K,null)),r.a.createElement(f.a,null,r.a.createElement(b.a,{margin:"1rem 0"},r.a.createElement(o.Trans,{id:"Specific business hours"}))),r.a.createElement(Te,null),r.a.createElement(s.a,{mutationName:"addSpecialBusinessHour"},r.a.createElement(f.a,null,r.a.createElement(b.a,{margin:"1rem 0"},r.a.createElement(o.Trans,{id:"Add specific business hour"}))),r.a.createElement(pe,null))))};n.d(t,"BusinessHoursRouting",function(){return Ne});var Ne=function(){return r.a.createElement(c.Switch,null,r.a.createElement(u.a,{exact:!0,path:l.b,component:xe}),r.a.createElement(c.Route,{component:i.a}))};t.default=Ne}}]);
//# sourceMappingURL=185.8cd5b5cf.chunk.js.map