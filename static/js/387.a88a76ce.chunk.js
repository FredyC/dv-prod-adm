(this.webpackJsonpspeedlo=this.webpackJsonpspeedlo||[]).push([[387],{1404:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(4);function r(){var e=Object(n.a)(["\n  height: ",";\n"]);return r=function(){return e},e}var i=a(18).c.div(r(),(function(e){var t=e.size,a=void 0===t?1:t,n=e.sizeUnit,r=void 0===n?"rem":n;return"".concat(a).concat(r)}));i.displayName="VerticalGap"},1408:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return m}));var n=a(89),r=a(46),i=a(65),c=a(1370),l=a(61),o=a(0),u=a.n(o),d=a(1377),s=u.a.forwardRef((function(e,t){var a=e.fieldName,n=e.fullWidth,r=e.validate,c=e.addHiddenLabelWithPlaceholderText,o=void 0===c||c,s=Object(i.a)(e,["fieldName","fullWidth","validate","addHiddenLabelWithPlaceholderText"]),b=m({fieldName:a,validate:r});return Object(l.g)((function(){return u.a.createElement(u.a.Fragment,null,u.a.createElement(d.b,Object.assign({},b(),{inputFullWidth:n,ref:t},s)),o&&s.placeholder&&u.a.createElement("label",{hidden:!0,htmlFor:b().id},s.placeholder))}))}));function m(e){var t=e.fieldName,a=e.validate,i=Object(c.i)(),l=Object(c.e)(t,{validate:a}),o=Object(r.a)(l,2),u=o[0],d=o[1];return function(){return Object(n.a)({},d(),{disabled:i.isSubmitting,invalid:u.touched&&Boolean(u.error)})}}},1442:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var n=a(65),r=a(1587),i=a(1375),c=a(1370),l=a(61),o=a(0),u=a.n(o),d=a(131),s=a(14),m=function(e){var t=e.children,a=e.id,o=void 0===a?"form-submit":a,m=Object(n.a)(e,["children","id"]),b=Object(c.i)();return Object(l.g)((function(){return u.a.createElement(d.a,Object.assign({id:o,type:"submit",color:s.a.green,disabled:b.isSubmitting,icon:b.isValid?void 0:r.a,iconSize:1.1,iconColor:s.a.red},m,{className:Object(i.b)(m.className,"animated","infinite",{heartBeat:b.isSubmitting})}),u.a.createElement(u.a.Fragment,null,t))}))}},1447:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a(65),r=a(1673),i=a(0),c=a.n(i),l=a(439),o=a(14),u=a(131),d=function(e){var t=e.onDelete,a=e.confirmText,i=Object(n.a)(e,["onDelete","confirmText"]);return c.a.createElement(l.a,null,c.a.createElement(u.a,Object.assign({className:"delete-button",icon:r.a,color:o.a.greyMiddle,onClick:function(e){e.preventDefault(),a&&!window.confirm(a)||t()}},i)))}},1450:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(0),r=a.n(n);function i(e){var t=e.options,a=e.selected,n=e.onSelectionChange,i=e.getOptionValue;return{value:r.a.useMemo((function(){return null===a?null:null===t?null:t.find((function(e){return i(e)===a}))||null}),[a,t,i]),onChange:function(e){n(e?i(e):null)},getOptionValue:i}}},1451:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(0),r=a.n(n),i=a(1371);function c(e){var t=e.options,a=e.selected,n=e.onSelectionChange,c=e.getOptionValue;return{value:r.a.useMemo((function(){return Array.isArray(a)?null===t?i.a:t.filter((function(e){return a.includes(c(e))})):null}),[a,t,c]),onChange:function(e){n(e?e.map(c):i.a)},isMulti:!0}}},1452:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));var n=a(89),r=a(65),i=a(1370),c=a(61),l=a(0),o=a.n(l),u=a(1374),d=a(1397),s=a(1451),m=a(20),b=function(e){var t=e.fieldName,a=e.getOptionValue,l=void 0===a?m.b:a,b=e.getOptionFilter,f=Object(r.a)(e,["fieldName","getOptionValue","getOptionFilter"]),g=Object(i.i)(),p=Object(i.d)(t);return Object(c.g)((function(){var e=Object(d.a)({getOptionFilter:b}),t=Object(s.a)(Object(n.a)({},f,{onSelectionChange:p.setValue,selected:p.value,getOptionValue:l}));return o.a.createElement(u.a,Object.assign({},t,e,f,{onFocus:function(){return p.setTouched()},invalid:p.touched&&p.hasError,isDisabled:g.isSubmitting,getOptionValue:l}))}))}},1498:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));var n=a(89),r=a(65),i=a(1370),c=a(61),l=a(0),o=a.n(l),u=a(1374),d=a(1397),s=a(1450),m=a(20),b=function(e){var t=e.fieldName,a=e.getOptionValue,l=void 0===a?m.b:a,b=e.getOptionFilter,f=Object(r.a)(e,["fieldName","getOptionValue","getOptionFilter"]),g=Object(i.i)(),p=Object(i.d)(t);return Object(c.g)((function(){var e=Object(s.a)(Object(n.a)({},f,{onSelectionChange:p.setValue,selected:p.value,getOptionValue:l})),t=Object(d.a)({getOptionFilter:b});return o.a.createElement(u.a,Object.assign({},e,t,f,{onFocus:function(){return p.setTouched()},invalid:p.touched&&p.hasError,isDisabled:g.isSubmitting}))}))}},1523:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n=a(18).c.div.withConfig({displayName:"FlexDiv",componentId:"dwel3j-0"})(["display:flex;"])},1550:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(1370),r=a(61),i=a(0),c=a.n(i),l=function(e){var t=e.fieldName,a=e.className,i=Object(n.f)(t);return Object(r.g)((function(){return c.a.createElement("span",{className:a},i.value)}))}},1551:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var n=a(4),r=a(2818),i=a(0),c=a.n(i),l=a(1499),o=a(18),u=a(240);function d(){var e=Object(n.a)(["\n  padding: 1rem 0.4rem;\n  cursor: grab;\n"]);return d=function(){return e},e}var s=o.c.div(d()),m=Object(l.c)((function(){return c.a.createElement(s,null,c.a.createElement(u.a,{icon:r.a}))}))},1581:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return l}));var n=a(18),r=(a(1582),a(14)),i=function(e){var t=e.fontSize,a=void 0===t?2:t,n=e.fontSizeUnit,i=void 0===n?r.d.DefaultSizeUnit:n;return"".concat(a).concat(i)},c=n.c.div.attrs((function(e){return{className:l(e.pictogramId)}})).withConfig({displayName:"PictogramDisplay",componentId:"sc-6st3s9-0"})(["&:before{font-size:"," !important;margin-left:0.5rem !important;}"],i);function l(e){return"flaticon-".concat(e)}},1598:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(54),r=a.n(n),i=a(47),c=a(1370),l=a(0),o=a.n(l),u=(a(42),a(255)),d=void 0;function s(e){var t=e.onSubmit,a=e.initialValues,n=e.loadValues,l=e.validationSchema,s=e.submitMessage,m=e.submitRedirectPath,b=Object(i.l)().history,f=Object(u.a)(),g=f.enqueueSuccess,p=f.enqueueWarning,h=o.a.useCallback((function(e){return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.a.awrap(t(e));case 2:s&&g(s),m&&b.push(m);case 4:case"end":return a.stop()}}))}),[g,b,t,s,m]),v=o.a.useCallback((function(e,t){var a=!0,n=!1,r=void 0;try{for(var i,c=t.values()[Symbol.iterator]();!(a=(i=c.next()).done);a=!0){var l=i.value;l&&p(l)}}catch(o){n=!0,r=o}finally{try{a||null==c.return||c.return()}finally{if(n)throw r}}}),[p]),E=o.a.useRef(!1),y=o.a.useCallback((function(){E.current=!1}),[]),O=Object(c.g)({onSubmit:h,onSubmitFailed:v,onReset:y,validationSchema:l,initialValues:a,initialValidationEnabled:void 0===n,ignoreUnknownFieldsInValidation:!0,onFormChanges:d});return o.a.useEffect((function(){E.current||(n&&Promise.resolve(n(O.state.initialValues)).then((function(e){e&&(O.api.mergeValues(e),O.state.pristineValues=O.state.values),O.api.enableValidation()})),E.current=!0)}),[n,O]),O}},1599:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var n=a(89),r=a(4),i=a(0),c=a.n(i),l=a(18),o=a(36),u=a(14),d=a(20),s=a(1498);function m(){var e=Object(r.a)(["\n  background-color: ",";\n  color: ",";\n  width: 6rem;\n  padding: 0.4rem 1rem;\n  margin: 0;\n  height: 100%;\n"]);return m=function(){return e},e}var b=l.c.div(m(),(function(e){return e.color}),u.a.white),f=function(e){var t=e.fieldName,a=e.colors,r=e.isLoading,i=e.isClearable;return c.a.createElement(s.a,{fieldName:t,options:a,isLoading:r,isClearable:i,clearLabel:o.b._("Clear"),styles:{option:function(e){return Object(n.a)({},e,{padding:0,margin:0})},menu:function(e){return Object(n.a)({},e,{width:"8rem",maxWidth:"8rem"})},container:function(e){return Object(n.a)({},e,{width:"100%"})}},defaultValue:d.a.head(a),getOptionValue:d.b,formatOptionLabel:function(e){var t=e.color,a=e.code;return c.a.createElement(b,{color:t},a)}})}},2823:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(59),c=a(260),l=a(114),o=a(1453),u=a(4),d=a(18),s=a(254),m=a(1393),b=a(1392),f=a(1404),g=a(78),p=a(36),h=a(257),v=a(1388),E=a(1463),y=a(443),O=a(79),j=a(61),C=a(40),w=a(131),x=a(14);function T(){var e=Object(u.a)(["\n  white-space: nowrap;\n  margin-left: 2rem;\n  & a {\n    text-decoration: none;\n    color: ",";\n    padding: 1rem;\n  }\n"]);return T=function(){return e},e}var k=Object(d.c)(w.a)(T(),x.a.black),L=Object(j.b)((function(){var e=Object(C.b)().settings,t=Object(g.Pb)({branchId:e.branchId},{fetchPolicy:"cache-first"}),a=t.loading,n=t.data;return!a&&n&&n.companyBranch.foodMenuUrl?r.a.createElement(k,{color:x.a.greyMiddle},r.a.createElement("a",{href:n.companyBranch.foodMenuUrl,target:"_blank",rel:"noopener noreferrer"},r.a.createElement(O.Trans,{id:"Menu codes manual"}))):null})),R=a(54),I=a.n(R),N=a(46),S=a(1432),W=a(1391),D=a(1593),P=a(1431),_=a(89),M=a(1551),B=a(65),V=a(160),F=a(76),U=a(87),q=a(95),A=a(94),K=a(96),z=a(1499),H=Object(z.b)((function(e){var t=e.columns,a=e.style,n=e.className;return r.a.createElement("div",{style:a,className:n},t)})),G=Object(z.a)(S.f),Q=function(e){function t(){var e,a;Object(F.a)(this,t);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(a=Object(q.a)(this,(e=Object(A.a)(t)).call.apply(e,[this].concat(i)))).state={sortedItems:a.props.items},a.rowRenderer=function(e){return r.a.createElement(H,e)},a.onHandleSorting=function(e){var t,n,r,i,c;return I.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(t=e.newIndex,n=e.oldIndex,t!==n){l.next=3;break}return l.abrupt("return");case 3:if(r=Object(V.a)(a.state.sortedItems),i=Object(z.d)(a.state.sortedItems,n,t),a.setState({sortedItems:i}),!a.props.onSort){l.next=15;break}if(c=a.props.onSort({item:r[n],items:i,offset:t-n,newIndex:t,oldIndex:n}),l.t0=c,!l.t0){l.next=13;break}return l.next=12,I.a.awrap(c);case 12:l.t0=!l.sent;case 13:if(!l.t0){l.next=15;break}a.setState({sortedItems:r});case 15:case"end":return l.stop()}}))},a}return Object(K.a)(t,e),Object(U.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.items,Object(B.a)(e,["items"]));return r.a.createElement(G,Object.assign({lockAxis:"y",useDragHandle:!0,onSortEnd:this.onHandleSorting,rowRenderer:this.rowRenderer},t,{items:this.state.sortedItems}))}}]),t}(r.a.PureComponent);Q.getDerivedStateFromProps=function(e){return{sortedItems:e.items}};var J=d.c.div.withConfig({displayName:"ColorBadgeMenu",componentId:"sc-1evjty8-0"})(["position:absolute;top:0.3rem;bottom:0.3rem;width:5px;background-color:",";"],(function(e){return e.color})),X=function(e){var t=e.categories,a=e.children,n=e.onToggle,i=e.onRemove,c=e.onSort,l=e.showEditColumn,o=void 0===l||l,u=e.showRemoveColumn,d=void 0!==u&&u,s=e.showVisibilityColumn,m=void 0!==s&&s,b=e.showColor,f=void 0!==b&&b,g=e.showHeader,h=void 0===g||g,v=e.isSortable,E=void 0!==v&&v,y=e.isLoading,O=void 0!==y&&y,j=e.heightStretch,C=void 0!==j&&j,w=e.fullHeight,T=void 0!==w&&w,k=e.noRowsDisplay,L=void 0===k?r.a.createElement(S.g,{text:p.b._("No recipes in category")}):k,R={isLoading:O,items:t,disableHeader:!h,heightStretch:C,fullHeight:T,noRowsRenderer:function(){return L}},I=Object(P.a)().getCategoryEditRoute,N=[o&&r.a.createElement(S.a,{dataKey:"id",width:x.d.ButtonColumnWidthPx,minWidth:x.d.ButtonColumnWidthPx,cellRenderer:Object(S.h)({canQuery:"wareCategory"},S.b),cellDataGetter:function(e){var t=e.rowData;return I(t.id,t.categoryType.enum)}}),d&&r.a.createElement(S.a,{dataKey:"id",width:x.d.ButtonColumnWidthPx,minWidth:x.d.ButtonColumnWidthPx,cellRenderer:S.c,columnData:{onRemove:i}}),m&&r.a.createElement(S.a,{dataKey:"visible",width:x.d.ButtonColumnWidthPx,minWidth:x.d.ButtonColumnWidthPx,cellRenderer:Object(S.h)({canMutate:"updateWareCategory"},S.d),columnData:{onToggle:n}}),f&&r.a.createElement(S.a,{dataKey:"color",width:5,cellRenderer:function(e){var t,a=e.rowData;return r.a.createElement(J,{color:null===(t=a.color)||void 0===t?void 0:t.color})}}),r.a.createElement(S.a,{dataKey:"nameLabel",width:300,label:p.b._("Name"),cellRenderer:S.e,columnData:{noteKey:"internalNote"}}),r.a.createElement(S.a,{dataKey:"countRecipes",label:p.b._("Recipe count"),width:100,cellRenderer:function(e){var t=e.cellData;return"".concat(t," ").concat(p.b._("Recipes").toLocaleLowerCase())}}),a,E&&r.a.createElement(S.a,{dataKey:"id",width:50,cellRenderer:function(){return r.a.createElement(M.a,null)}})];return E?r.a.createElement.apply(r.a,[Q,Object(_.a)({onSort:c},R)].concat(N)):r.a.createElement.apply(r.a,[S.f,R].concat(N))};function Y(){var e=Object(u.a)(["\n  .origins span {\n    display: inline-block;\n    margin: 0.2rem;\n    padding: 0.2rem;\n    background-color: ",";\n  }\n"]);return Y=function(){return e},e}var Z=d.c.div(Y(),x.a.greyLight),$=Object(j.b)((function(e){var t=e.headline,a=e.subHeadline,n=void 0!==a&&a,i=e.categoryType,c=Object(C.b)().settings,l=Object(g.Nb)({branchId:c.branchId,categoryType:i}),o=l.getStash,u=l.loading,d=l.updateQuery,s=l.refetch,f=Object(g.Ob)({},{fetchPolicy:"cache-first"}).data,p=r.a.useMemo((function(){return f&&f.origins?f.origins.reduce((function(e,t){return e[t.enum]=t.code,e}),{}):{}}),[f]),h=r.a.useCallback((function(e){var t=e.cellData;return t.sort(),t.map((function(e){return r.a.createElement("span",{key:e},p[e])}))}),[p]),v=Object(g.U)(),E=Object(N.a)(v,1)[0],y=r.a.useCallback((function(e,t){E({categoryId:e,visible:t},{optimisticResponse:{updateWareCategory:{__typename:"WareCategory",id:e,visible:t}}})}),[E]),O=Object(g.S)(),j=Object(N.a)(O,1)[0],w=r.a.useCallback((function(e){var t,a,n,r;return I.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.item,a=e.items,n=e.offset,d((function(){return{categories:a}})),i.next=4,I.a.awrap(j({categoryId:t.id,offset:n}));case 4:if(!(r=i.sent)){i.next=9;break}return i.next=8,I.a.awrap(s());case 8:return i.abrupt("return",r.success);case 9:return i.abrupt("return",!1);case 10:case"end":return i.stop()}}))}),[s,j,d]),x=o((function(e){return e.categories})),T=Object(P.a)().getCategoryCreateRoute;return r.a.createElement(Z,null,r.a.createElement(b.a,null,r.a.createElement(m.a,{widthGrowIndex:1},r.a.createElement(W.a,null,t),n&&r.a.createElement(W.a,{size:"smaller"},n)),r.a.createElement(m.a,{fixedWidth:!0},r.a.createElement(D.a,{routeTo:T(i)}))),r.a.createElement(X,{isLoading:u,categories:x||[],onToggle:y,isSortable:!0,showHeader:!1,showColor:!0,fullHeight:!0,showVisibilityColumn:!0,onSort:w},r.a.createElement(S.a,{dataKey:"origins",width:300,className:"origins",cellRenderer:h,style:{fontSize:"0.8rem"}})))}));function ee(){var e=Object(u.a)(["\n  height: calc(100% - 3.5rem);\n  padding-top: 1rem;\n  overflow-y: scroll;\n  overflow-x: hidden;\n  -webkit-overflow-scrolling: touch;\n"]);return ee=function(){return e},e}var te=d.c.div(ee()),ae=function(){return r.a.createElement(h.a,{pageTitle:p.b._("Category overview"),useBackButton:!0,backRoute:y.a},r.a.createElement(v.a,{forcePercentHeightInMobile:100},r.a.createElement(s.a,{stretchToParent:!0},r.a.createElement(b.a,{justify:"start"},r.a.createElement(m.a,null,r.a.createElement(E.a,{width:20})),r.a.createElement(m.a,null,r.a.createElement(L,null))),r.a.createElement(te,null,r.a.createElement($,{categoryType:g.n.Main,headline:p.b._("Category of recipes")}),r.a.createElement(f.a,{size:1.5}),r.a.createElement($,{categoryType:g.n.SideDish,headline:p.b._("Category of sidedish")}),r.a.createElement(f.a,{size:1.5}),r.a.createElement($,{categoryType:g.n.Cover,headline:p.b._("Category of covers")})))))};function ne(){var e=Object(u.a)(["\n  position: fixed;\n  z-index: 500;\n  right: 0.5rem;\n  top: 0.5rem;\n  width: 10rem;\n  opacity: 0.96;\n  background: ",";\n  border-radius: ",";\n"]);return ne=function(){return e},e}var re=d.c.div(ne(),x.a.black,x.c.Button),ie=a(1370);function ce(){return Object(ie.f)("itemType").value}var le=function(e){var t=e.isMain,a=e.isSideDish,n=e.isCover,i=e.children,c=ce();return!0===t&&c===g.n.Main||!0===a&&c===g.n.SideDish||!0===n&&c===g.n.Cover?r.a.createElement(r.a.Fragment,null,i):null},oe=a(1442),ue=a(1373),de=function(e){var t=e.isCreate,a=e.createMutation,n=e.updateMutation;return Object(ue.b)(t?a:n)?r.a.createElement(oe.a,null,t?r.a.createElement(O.Trans,{id:"Create"}):r.a.createElement(O.Trans,{id:"Save"})):null},se=a(1549),me=a(20),be=a(1412),fe=me.a.propEq("language");function ge(){var e=Object(be.a)(),t=Object(ie.f)("translations").value,a=r.a.useCallback((function(e){return t&&t.find(fe(e))}),[t]),n=r.a.useCallback((function(e){return a(e)}),[a]),i=r.a.useCallback((function(e,r){var i=a(e);return i||(t.push(Object(_.a)({language:e},r)),n(e))}),[a,n,t]),c=r.a.useCallback((function(e){return!!a(e)}),[a]);return{shouldLoadTranslation:r.a.useCallback((function(){return!(e.isDefaultLanguageSelected||c(e.currentLanguage))}),[c,e]),findTranslation:a,hasTranslation:c,getTranslation:n,initTranslation:i}}var pe=Object(j.b)((function(e){var t=e.categoryId,a=e.isCreate,n=Object(be.a)(),i=ge(),c=i.shouldLoadTranslation,l=i.initTranslation,o=n.currentLanguage,u=(0,Object(g.Mb)({language:o,categoryId:t},{fetchPolicy:"no-cache",skip:a||!c()}).getStash)((function(e){var t=e.category;return{nameLabel:t.nameLabel,internalNoteLabel:t.internalNoteLabel}}));return r.a.useEffect((function(){u&&l(o,u)}),[l,o,u]),null})),he=a(1598);function ve(e){var t=e.isCreate,a=e.initialValues,n=e.loadCreateDefaults,i=e.loadUpdateValues,c=e.onCreate,l=e.onUpdate,o=e.createSuccessMessage,u=e.updateSuccessMessage,d=e.successRedirectPath,s=e.validationSchema,m=e.children,b=Object(he.a)({initialValues:a,validationSchema:s,onSubmit:t?c:l,loadValues:t?n:i,submitMessage:t?o:u,submitRedirectPath:d});return r.a.createElement(ie.b,{xform:b},m)}var Ee=function(e){var t=e.isCreate,a=e.categoryId,n=e.categoryType,i=e.children,c=Object(be.a)(),l=Object(P.a)().redirectToCategoryList,u=Object(ie.c)((function(e){return{nameLabel:e.string().required(p.b._("Category name in default language must be entered."))}})),d=Object(g.r)(),s=Object(N.a)(d,1)[0],m=r.a.useCallback((function(e){var t,r;return I.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,I.a.awrap(s({categoryId:a,language:c.defaultLanguage},{fetchPolicy:"no-cache"}));case 2:if(null!==(r=i.sent)){i.next=6;break}return l(),i.abrupt("return",e);case 6:return i.abrupt("return",Object(_.a)({},r.category,{itemType:n,origins:Object(V.a)(r.category.origins),color:null===(t=r.category.color)||void 0===t?void 0:t.id}));case 7:case"end":return i.stop()}}))}),[a,n,c.defaultLanguage,s,l]),b=Object(g.T)(),f=Object(N.a)(b,1)[0],h=r.a.useCallback((function(e,t){return f({categoryId:e,category:Object(_.a)({},Oe(t),{translations:t.translations})})}),[f]),v=r.a.useCallback((function(e){return h(a,e)}),[a,h]),E=Object(g.Q)(),y=Object(N.a)(E,1)[0],O=r.a.useCallback((function(e){var t,a;return I.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,I.a.awrap(y({category:Object(_.a)({companyBranch:c.branchId,wareCategoryType:n},Oe(e))}));case 2:(t=r.sent)&&e.translations&&e.translations.length>0&&(a=t.createCategory.id,h(a,e));case 4:case"end":return r.stop()}}))}),[n,y,h,c]);return r.a.createElement(ve,{isCreate:t,onCreate:O,onUpdate:v,initialValues:ye(n),loadUpdateValues:m,validationSchema:u,successRedirectPath:o.b},r.a.createElement(r.a.Fragment,null,r.a.createElement(pe,{categoryId:a,isCreate:t}),i))};function ye(e){return{id:"NEW",itemType:e,visible:!0,internalNoteLabel:"",pictogram:"",nameLabel:"",minCount:0,maxCount:0,recipes:[],origins:[],translations:[],color:null}}function Oe(e){return{nameLabel:e.nameLabel,internalNoteLabel:e.internalNoteLabel,enabled:e.visible,pictogram:e.pictogram,recipes:e.recipes.map(me.b),minCount:e.minCount,maxCount:e.maxCount,orderOriginCategories:e.origins,wareCategoryColor:e.color}}var je=a(1410),Ce=a(1372),we=a(47),xe=a(1447),Te=Object(j.b)((function(e){var t=e.fieldName,a=void 0===t?"id":t,n=e.mutationName,i=e.confirmText,c=e.onDelete,l=Object(ie.d)(a),o=Object(ue.a)([],n?[n]:[]),u=Object(we.l)().history,d=Object(ie.i)().isSubmitting;return o&&"NEW"!==l.value?r.a.createElement(xe.a,{type:"button",disabled:d,confirmText:i,onDelete:function(){return I.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.a.awrap(c(l.value));case 2:u.goBack();case 3:case"end":return e.stop()}}))}}):null})),ke=a(1545),Le=a(45);function Re(){var e=Object(u.a)(["\n    grid-template-columns: "," 1fr ",";\n    grid-template-rows: auto auto auto auto;\n    grid-row-gap: ",";\n    grid-template-areas:\n      '. contentTopRight    contentTopRight'\n      '. contentPrimary     .'\n      '. contentSecondary   .'\n      '. contentBottomRight contentBottomRight'\n  "]);return Re=function(){return e},e}var Ie=d.c.div.withConfig({displayName:"StyledFormLayoutGrid",componentId:"sc-1lamm5d-0"})(["display:grid;margin:-",";grid-column-gap:",";grid-template-columns:"," "," "," auto;grid-template-rows:"," auto 1fr auto ",";grid-template-areas:'. .              .                contentTopRight' '. contentPrimary contentSecondary contentTopRight' '. contentPrimary contentSecondary .' '. contentPrimary contentSecondary contentBottomRight' '. .              .                contentBottomRight';.contentPrimary{grid-area:contentPrimary;}.contentSecondary{grid-area:contentSecondary;}.contentTopRight{grid-area:contentTopRight;justify-self:end;align-self:start;}.contentBottomRight{grid-area:contentBottomRight;justify-self:end;align-self:end;}",";"],x.d.Middle,x.d.Middle,x.d.Middle,(function(e){return e.primaryColumnWidth}),(function(e){return e.secondaryColumnWidth}),x.d.Middle,x.d.Middle,Object(Le.d)(Re(),x.d.Middle,x.d.Middle,x.d.Middle)),Ne=function(e){var t=e.contentPrimary,a=e.contentSecondary,n=e.contentTopRight,i=e.contentBottomRight,c=e.primaryColumnWidth,l=void 0===c?"1fr":c,o=e.secondaryColumnWidth,u=void 0===o?"0":o;return r.a.createElement(Ie,{primaryColumnWidth:l,secondaryColumnWidth:u},r.a.createElement("div",{className:"contentPrimary"},t),r.a.createElement("div",{className:"contentSecondary"},a),r.a.createElement("div",{className:"contentTopRight"},n),r.a.createElement("div",{className:"contentBottomRight"},i))},Se=a(1599),We=a(1371),De=function(){var e,t=Object(g.Kb)(),a=t.getStash,n=t.loading;return r.a.createElement(Se.a,{fieldName:"color",isLoading:n,isClearable:!0,colors:null!==(e=a((function(e){return e.colors})))&&void 0!==e?e:We.a})},Pe=a(1452),_e=function(){var e=Object(g.Ob)(),t=e.data,a=e.loading;return r.a.createElement(Ce.a,{label:p.b._("cat. origins"),labelWidth:7},r.a.createElement(Pe.a,{fieldName:"origins",isLoading:a,options:t?t.origins:We.a,getOptionLabel:me.a.prop("code"),getOptionValue:me.a.prop("enum")}))},Me=a(1474),Be=a(1581),Ve=a(1374),Fe=function(){var e=Object(ie.d)("pictogram");return Object(j.g)((function(){return r.a.createElement(Ve.a,{value:e.value?{pictogram:e.value}:null,onChange:function(t){t&&e.setValue(t.pictogram)},options:Me.pictograms.map((function(e){return{pictogram:e}})),getOptionValue:me.a.prop("pictogram"),formatOptionLabel:function(e){var t=e.pictogram;return r.a.createElement(Be.a,{pictogramId:t,fontSize:2})},components:{SingleValue:function(e){var t=e.data;return r.a.createElement(Be.a,{pictogramId:t.pictogram,fontSize:4})}},styles:{container:function(e){return Object(_.a)({},e,{width:"100%",margin:0})},menuList:function(e){return Object(_.a)({},e,{maxHeight:"35rem"})}},isClearable:!1,isSearchable:!1,minWidth:8})}))},Ue=a(1408),qe=a(1377),Ae=d.c.div.withConfig({displayName:"StyledMenuTranslationInput",componentId:"sc-1soh2vg-0"})(["position:relative;.original{font-size:0.9rem;padding:0.3rem 0;opacity:0.7;}.original img{width:1.5rem;margin:0 0.6rem;}.current-language{width:1.5rem;position:absolute;right:0.5rem;top:0.8rem;border:1px #aaa solid;box-sizing:content-box;}"]),Ke=Object(j.b)((function(e){var t=e.fieldName,a=e.placeholder,n=Object(ie.i)().isSubmitting,i=Object(ie.e)(t),c=Object(N.a)(i,2),l=c[0],o=c[1],u=Object(be.a)(),d=ge(),s=d.getTranslation,m=d.findTranslation,b=!u.isDefaultLanguageSelected,f=m(u.currentLanguage),g=b?f&&f[l.name]:l.value,h=o();return r.a.createElement(Ae,null,r.a.createElement(qe.b,Object.assign({},h,{disabled:n,value:g||"",onChange:b?function(e){var t=e.target.value;s(u.currentLanguage)[l.name]=t}:h.onChange,inputFullWidth:!0,invalid:!b&&l.touched&&l.hasError,placeholder:a})),r.a.createElement("img",{className:"current-language",src:Object(Me.getFlag)(u.currentLanguage),alt:"translation"}),b&&r.a.createElement("div",{className:"original",onClick:function(){return u.setLanguage(u.defaultLanguage)}},r.a.createElement("img",{src:Object(Me.getFlag)(u.defaultLanguage),alt:"original text"}),l.value||r.a.createElement("i",null,p.b._("No text is filled"))))})),ze=function(e){var t=e.fieldName,a=void 0===t?"internalNote":t,n=e.label,i=void 0===n?r.a.createElement(O.Trans,{id:"Internal note"}):n,c=e.placeholder,l=e.localized,o=void 0!==l&&l,u={fieldName:a,placeholder:c,fullWidth:!0};return r.a.createElement(Ce.a,{label:i,labelWidth:7},o?r.a.createElement(Ke,u):r.a.createElement(Ue.a,u))},He=a(1375),Ge=Object(d.c)(He.a).withConfig({displayName:"StyledLanguagePicker",componentId:"sc-1hgrqes-0"})(["transform:scale(2) translateY(0.5rem);transform-origin:right;height:2.5rem;"]),Qe=Object(j.b)((function(){var e=Object(be.a)();return r.a.createElement("div",null,r.a.createElement(Ge,{availableLanguages:e.supportedLanguages,selectedLanguage:e.currentLanguage,onChange:e.setLanguage,formatLanguage:me.a.identity,arrowColor:x.a.greyMiddle}))})),Je=a(2816),Xe=function(e){var t=e.fieldName,a=void 0===t?"nameLabel":t,n=e.localized,i=void 0!==n&&n,c=Object(B.a)(e,["fieldName","localized"]),l=Object(_.a)({fieldName:a},c);return r.a.createElement(Ce.a,{icon:Je.a,labelWidth:x.d.DefaultLabelWidth},i?r.a.createElement(Ke,l):r.a.createElement(Ue.a,l))},Ye=function(){var e=Object(g.R)(),t=Object(N.a)(e,1)[0];return r.a.createElement(Ne,{primaryColumnWidth:"minmax(10rem, 45rem)",secondaryColumnWidth:"14rem",contentPrimary:r.a.createElement(je.a,null,r.a.createElement(Xe,{placeholder:p.b._("Category name"),localized:!0}),r.a.createElement(ze,{placeholder:p.b._("Category internal note"),fieldName:"internalNoteLabel",localized:!0}),r.a.createElement(_e,null),r.a.createElement(Ce.a,null,r.a.createElement(ke.a,{fieldName:"visible",label:p.b._("To show this category")}))),contentSecondary:r.a.createElement(le,{isMain:!0},r.a.createElement(Fe,null),r.a.createElement(De,null)),contentTopRight:r.a.createElement(Qe,null),contentBottomRight:r.a.createElement(Te,{mutationName:"destroyWareCategory",confirmText:p.b._("Remove this category?"),onDelete:function(e){return t({categoryId:e})}})})},Ze=a(1692),$e=a(1548),et=a(177);function tt(){var e=Object(C.b)().settings;return Object(j.g)((function(){return e.branchId}))}var at=a(1591);function nt(e){var t=e.onAdd,a=e.addLabel,i=void 0===a?p.b._("Add"):a,c=e.addButtonText,l=void 0===c?p.b._("Add"):c,o=e.isLoading,u=void 0!==o&&o,d=Object(B.a)(e,["onAdd","addLabel","addButtonText","isLoading"]),s=Object(we.n)(null),f=Object(N.a)(s,2),g=f[0],h=f[1],v=Object(n.useCallback)((function(){var e=g();null!==e&&(t(e),h(null))}),[g,t,h]),E=Object(n.useCallback)((function(e){"Enter"===e.key&&v()}),[v]),y=Object(n.useCallback)((function(e){h(e||null)}),[h]);return r.a.createElement(b.a,{justify:"flex-start"},r.a.createElement(m.a,{fixedWidth:!0,width:"4rem",margin:"auto 0"},i),r.a.createElement(m.a,{fixedWidth:!0,width:"20rem",margin:"auto 0"},r.a.createElement(Ve.a,Object.assign({value:g(),onChange:y,onKeyDown:E,isLoading:u,isMulti:!1,isClearable:!1,getOptionValue:me.a.prop("id"),getOptionLabel:me.a.propOr("","nameLabel")},d))),r.a.createElement(m.a,{fixedWidth:!0,width:"10rem",margin:"auto 0"},r.a.createElement(w.a,{text:l,disabled:null===g(),onClick:v})))}var rt=[g.o.Delivery,g.o.Inhouse];function it(){var e=r.a.useMemo(se.b,[]);return{priceTypes:rt,priceTypeLabels:e}}function ct(){var e=Object(u.a)(["\n      cursor: move;\n    "]);return ct=function(){return e},e}var lt=d.c.div.withConfig({displayName:"StyledCategoryRecipesView",componentId:"sc-1g4q35k-0"})(["display:flex;flex-direction:column;height:calc(100% - 2rem);width:100%;& .fixed-row{flex:0 0 auto;}& .move-cell{","}"],Object(Le.c)(ct())),ot=d.c.div.withConfig({displayName:"StyledFormStretchedRow",componentId:"sc-1g4q35k-1"})(["flex:1 1 0;margin:1rem 0 0 1rem;"]),ut=Object(z.a)(ot),dt=d.c.div.withConfig({displayName:"StyledRecipeRow",componentId:"sc-1g4q35k-2"})(["display:grid;grid-gap:1rem;grid-template-columns:","px 100px 3fr 1fr 1fr 50px;"],x.d.ButtonColumnWidthPx),st=Object(z.b)((function(e){var t=e.recipe,a=e.onRemove,n=it(),i=n.priceTypes,c=n.priceTypeLabels,l=i.map((function(e){var a=t.prices.find(me.a.pathEq(["priceType","enum"],e));return r.a.createElement("div",{className:"move-cell",key:e},r.a.createElement($e.a,null,c[e]),a?Object(et.g)(a.price.value,a.price.currency.code):r.a.createElement("i",null,p.b._("Not set").toLocaleLowerCase()))}));return r.a.createElement(dt,null,r.a.createElement("div",null,r.a.createElement(at.a,{onClick:a})),r.a.createElement("div",{className:"move-cell"},t.code),r.a.createElement("div",{className:"move-cell"},t.nameLabel,r.a.createElement($e.a,null,t.internalNote||"")),l,r.a.createElement(M.a,null))})),mt=function(){var e=tt(),t=ce(),a=Object(g.Sb)({branchId:e,categoryType:t}),n=a.data,i=a.loading,c=Object(ie.d)("recipes"),l=r.a.useCallback((function(e){var t,a;return I.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=e.newIndex,a=e.oldIndex,t!==a){n.next=3;break}return n.abrupt("return");case 3:c.setValue(Object(z.d)(c.value,a,t));case 4:case"end":return n.stop()}}))}),[c]),o=me.a.differenceWith(me.a.eqProps("id")),u=Object(Le.f)().isDesktop,d=Object(ie.i)();return Object(j.g)((function(){return r.a.createElement(lt,null,r.a.createElement("div",{className:"fixed-row"},r.a.createElement(nt,{isLoading:i,isDisabled:d.isSubmitting,options:n?o(n.recipes,c.value):We.a,onAdd:function(e){return c.value.push(e)},getOptionLabel:function(e){var t=e.nameLabel,a=e.code;return"".concat(a," - ").concat(t)}})),r.a.createElement(ut,{lockAxis:"y",lockToContainerEdges:!0,onSortEnd:l,useDragHandle:!u},r.a.createElement(Ze.a,{items:c.value,heightStretch:!0,rowHeight:60,renderItem:function(e,t){return r.a.createElement(st,{recipe:e,onRemove:function(){c.setValue(me.a.reject(Object(me.c)(e.id),c.value))},index:t})}})))}))},bt=a(248),ft=a.n(bt),gt=a(1430),pt=a(158),ht=a(1546);function vt(){var e=Object(u.a)(["\n  display: flex;\n  align-items: center;\n  & > label {\n    min-width: 5rem;\n  }\n  & > * {\n    margin: 0.2rem 0.5rem;\n  }\n  input.count {\n    font-size: 1.5rem;\n    line-height: 1.5rem;\n    text-align: center;\n  }\n"]);return vt=function(){return e},e}var Et=d.c.div(vt()),yt=function(e){var t=e.count,a=e.label,n=e.enabled,i=e.onChange,c=e.id,l=r.a.useRef(t);return r.a.createElement(Et,null,r.a.createElement("label",{htmlFor:c},a),r.a.createElement(pt.a,{width:3},r.a.createElement(qe.a,{id:c,value:0===t?"":t,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){e.target.validity.valid&&i(Number.parseInt(e.target.value,10))})),onFocus:function(e){e.target.select()},disabled:0===t||!n,inputFullWidth:!0,type:"tel",pattern:"^[1-9]\\d*$",className:"count"})),r.a.createElement(pt.a,{width:4},r.a.createElement(w.a,{disabled:!n||t<=0,onClick:function(){return i(t-1)}},"\u2796")),r.a.createElement(pt.a,{width:4},r.a.createElement(w.a,{disabled:!n,onClick:function(){return i(t+1)}},"\u2795")),r.a.createElement("div",null,r.a.createElement(ht.a,null,r.a.createElement("input",{type:"checkbox",id:"".concat(c,"-nolimit"),checked:0===t,disabled:!n,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){0===t?i(l.current||1):(l.current=t,i(0))}))}),r.a.createElement("label",{htmlFor:"".concat(c,"-nolimit")},r.a.createElement(O.Trans,{id:"Unlimited"})))))},Ot=function(){return{noLimit:{label:p.b._("No limitation"),min:0,max:0},optional:{label:p.b._("One at most"),min:0,max:1},required:{label:p.b._("One at least"),min:1,max:0},onlyOne:{label:p.b._("Exactly one"),min:1,max:1},custom:{label:p.b._("Custom range")}}},jt=Object(j.b)((function(){var e=r.a.useMemo(Ot,[]),t=Object(j.e)((function(){return{currentRule:"noLimit"}})),a=function(e){t.currentRule=e},n=Object(ie.d)("minCount"),i=Object(ie.d)("maxCount");return Object(we.e)((function(){if("custom"!==t.currentRule){var r=ft.a.findKey(e,(function(e){var t=e.min,a=e.max;return t===n.value&&a===i.value}));r&&a(r)}})),r.a.createElement(r.a.Fragment,null,r.a.createElement(gt.a,{items:Object.keys(e),formatItem:function(t){return e[t].label},onSingleSelection:function(t){if(t){a(t);var r=e[t];n.setValue(r.min||0),i.setValue(r.max||0)}},selectedItem:t.currentRule}),r.a.createElement(yt,{id:"minCount",count:n.value,label:r.a.createElement(O.Trans,{id:"Minimum"}),enabled:"custom"===t.currentRule,onChange:n.setValue}),r.a.createElement(yt,{id:"maxCount",count:i.value,label:r.a.createElement(O.Trans,{id:"Maximum"}),enabled:"custom"===t.currentRule,onChange:i.setValue}))})),Ct=d.c.div.withConfig({displayName:"FormContainer",componentId:"sc-154ix5u-0"})(["display:flex;flex-direction:column;height:100%;width:100%;"]),wt=d.c.div.withConfig({displayName:"FormFixedRow",componentId:"sc-154ix5u-1"})(["flex:0 0 8rem;"]),xt=d.c.div.withConfig({displayName:"FormStretchedRow",componentId:"sc-154ix5u-2"})(["flex:1 1 0;min-height:0;position:relative;"]),Tt=function(e){var t=e.match.params.categoryId,a=Object(P.a)(t),n=a.isCreate,i=a.itemType,c=a.redirectToCategoryList;return null===i?(c(),null):r.a.createElement(Ee,{isCreate:n,categoryId:t,categoryType:i},r.a.createElement(h.a,{pageTitle:Object(se.a)(i),hideLogoutWidget:!0,useBackButton:!0},r.a.createElement(v.a,{withScrollArea:!0},r.a.createElement(Ct,null,r.a.createElement(wt,null,r.a.createElement(s.a,null,r.a.createElement(Ye,null))),r.a.createElement(le,{isSideDish:!0},r.a.createElement(wt,null,r.a.createElement(s.a,null,r.a.createElement(W.a,null,r.a.createElement(O.Trans,{id:"Required amounts of recipes to be picked"})),r.a.createElement(jt,null)))),r.a.createElement(xt,null,r.a.createElement(s.a,{stretchToParent:!0,minHeight:25},r.a.createElement(W.a,null,r.a.createElement(O.Trans,{id:"Recipes assigned to this category"})),r.a.createElement(mt,null))))),r.a.createElement(re,null,r.a.createElement(de,{isCreate:n,createMutation:"createWareCategory",updateMutation:"updateWareCategory"}))))},kt=a(1552),Lt=a(442),Rt=a(1691),It=Object(j.b)((function(e){var t=e.categoryType,a=e.currentCategories,n=e.addButtonText,i=e.onAdd,c=Object(C.b)().settings,l=Object(g.Nb)({branchId:c.branchId,categoryType:t}),o=l.data,u=l.loading,d=o&&o.categories||[],s=Object(ie.i)().isSubmitting;return r.a.createElement(nt,{isLoading:u,isDisabled:s,options:me.a.without(a,d),addButtonText:n,onAdd:i})})),Nt=function(e){var t=e.categoryType,a=e.addButtonText,n=e.noRowsText,i=e.fieldName,c=Object(ie.d)(i);return Object(j.g)((function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(X,{categories:Array.from(c.value),showRemoveColumn:!0,showEditColumn:!1,showHeader:!1,noRowsDisplay:r.a.createElement(S.g,{text:n}),onRemove:function(e){return c.value.remove(c.value.find(Object(me.c)(e)))}}),r.a.createElement(It,{addButtonText:a,categoryType:t,currentCategories:Array.from(c.value),onAdd:function(e){return c.value.push(e)}}))}))},St=a(66),Wt=a(259),Dt=Object(j.b)((function(e){var t=e.recipeId,a=e.isCreate,n=Object(be.a)(),i=ge(),c=i.shouldLoadTranslation,l=i.initTranslation,o=n.currentLanguage,u=(0,Object(g.Rb)({language:o,recipeId:t},{fetchPolicy:"no-cache",skip:a||!c()}).getStash)((function(e){var t=e.recipe;return{nameLabel:t.nameLabel,descriptionLabel:t.descriptionLabel}}));return r.a.useEffect((function(){u&&l(o,u)}),[l,o,u]),null})),Pt=function(e){var t=e.isCreate,a=e.recipeId,n=e.recipeType,i=e.children,c=Object(be.a)(),l=Object(P.a)().redirectToRecipeList,u=it().priceTypeLabels,d=Object(ie.c)((function(e){return{nameLabel:e.string().required(Object(We.c)(p.b._("Recipe name in default language"))),code:e.string().required(Object(We.c)(p.b._("Recipe code"))),prices:e.object(Bt((function(t){var a=u[t].toLocaleLowerCase(),n=p.b._("Recipe price for {priceType}",{priceType:a});return e.object({value:Object(We.e)(n)})})))}})),s=Object(g.s)(),m=Object(N.a)(s,1)[0],b=r.a.useCallback((function(){var e;return I.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I.a.awrap(m({branchId:c.branchId},{fetchPolicy:"cache-first"}));case 2:if(null===(e=t.sent)){t.next=5;break}return t.abrupt("return",Ft(e.defaults));case 5:return t.abrupt("return");case 6:case"end":return t.stop()}}))}),[c,m]),f=Object(g.t)(),h=Object(N.a)(f,1)[0],v=r.a.useCallback((function(){var e;return I.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I.a.awrap(h({recipeId:a,language:c.defaultLanguage},{fetchPolicy:"no-cache"}));case 2:if(null!==(e=t.sent)){t.next=6;break}return l(),t.abrupt("return");case 6:return t.abrupt("return",Ut(e.recipe));case 7:case"end":return t.stop()}}))}),[c.defaultLanguage,h,a,l]),E=Object(g.X)(),y=Object(N.a)(E,1)[0],O=r.a.useCallback((function(e,t){return y({recipeId:e,recipe:Object(_.a)({},_t(t),{translations:t.translations,image:Mt(t)})},St.disableBatching)}),[y]),j=r.a.useCallback((function(e){return O(a,e)}),[O,a]),C=Object(g.V)(),w=Object(N.a)(C,1)[0],x=r.a.useCallback((function(e){var t,a;return I.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,I.a.awrap(w({recipe:Object(_.a)({},_t(e),{companyBranch:c.branchId,wareCategoryType:n,image:e.image})},St.disableBatching));case 2:(t=r.sent)&&e.translations&&e.translations.length>0&&(a=t.recipe.id,O(a,e));case 4:case"end":return r.stop()}}))}),[w,O,c,n]);return r.a.createElement(ve,{isCreate:t,onCreate:x,onUpdate:j,initialValues:Vt(n),loadCreateDefaults:b,loadUpdateValues:v,validationSchema:d,successRedirectPath:o.c},r.a.createElement(r.a.Fragment,null,i,r.a.createElement(Dt,{recipeId:a,isCreate:t})))};function _t(e){return{code:e.code,nameLabel:e.nameLabel||"",internalNote:e.internalNote,descriptionLabel:e.descriptionLabel,enabled:e.visible,prices:Object.keys(e.prices).map((function(t){return{warePriceType:t,price:{value:Object(Wt.b)(e.prices[t].value)},vat:e.prices[t].vatId}})),sideDishCategories:e.sideDishes.map(me.a.prop("id")),wareCategories:e.categories.map(me.a.prop("id")),associatedRecipes:e.associatedRecipes.map(me.a.pick(["associatedRecipe","warePriceType"])),ingredients:e.ingredients.map((function(e){var t=e.stockItem,a=e.quantity;return{stockItem:t,quantity:Object(Wt.b)(a)}}))}}function Mt(e){var t=e.image;return"string"===typeof t?null:null===t?{delete:!0}:{file:t,delete:!1}}function Bt(e){return rt.reduce((function(t,a){return t[a]=e(a),t}),{})}function Vt(e){return{id:"NEW",itemType:e,visible:!0,code:"",nameLabel:"",internalNote:"",internalCode:"",descriptionLabel:"",image:null,prices:Bt((function(){return{value:"0",vatId:null,currencyCode:""}})),associatedRecipes:[],ingredients:[],sideDishes:[],categories:[],translations:[]}}function Ft(e){var t=e.vats.reduce((function(e,t){var a=t.vatId;return e[t.priceType.enum]=a,e}),{});return{prices:Bt((function(a){return{value:"0",vatId:t[a],currencyCode:e.currency.code}}))}}function Ut(e){return Object(_.a)({},e,{itemType:e.recipeType.enum,internalNote:e.internalNote||"",descriptionLabel:e.descriptionLabel||"",associatedRecipes:e.sourceAssociatedRecipes.map((function(e){var t=e.priceType,a=e.recipe;return{warePriceType:t.enum,nameLabel:a.nameLabel,associatedRecipe:a.id,formattedPrice:"?"}})),ingredients:e.sourceIngredients.map((function(e){var t=e.quantity,a=e.stockItem,n=a.id,r=a.label,i=a.allergens,c=a.wareUnit;return{stockItem:n,label:r,quantity:Object(et.f)(t),unitLabel:c.code,allergens:i.map(me.a.prop("enum"))}})),prices:Bt((function(t){var a=e.sourcePrices.find(me.a.pathEq(["priceType","enum"],t));return a?{value:Object(et.g)(a.price.value),vatId:a.vat.id,currencyCode:a.price.currency.code}:{value:"0",vatId:null,currencyCode:""}}))})}var qt=a(1523),At=a(1550),Kt=a(2819),zt=function(e){var t=e.fieldName,a=Object(B.a)(e,["fieldName"]);return r.a.createElement(Ce.a,{icon:Kt.a},r.a.createElement(pt.a,{width:5},r.a.createElement(Ue.a,Object.assign({fieldName:t,fullWidth:!0},a))))},Ht=function(e){var t=e.items,a=e.fieldName,n=e.isClearable,i=void 0!==n&&n,c=e.getItemId,l=void 0===c?me.b:c,o=Object(ie.d)(a),u=Object(ie.i)();return Object(j.g)((function(){return r.a.createElement(gt.a,Object.assign({selectedItem:o.value&&t.find((function(e){return l(e)===o.value})),onSingleSelection:function(e){o.setValue(e?l(e):null),o.setTouched()},disabled:u.isSubmitting,isInvalid:o.hasError,isClearable:i,isMulti:!1},e))}))},Gt=function(e){var t=e.fieldName,a=tt(),n=Object(g.Vb)({branchId:a},{fetchPolicy:"cache-first"}).data;return n?r.a.createElement(Ce.a,{label:"".concat(p.b._("VAT"),":")},r.a.createElement(Ht,{fieldName:t,items:n.vats,formatItem:function(e){var t=e.vat;return"".concat(t,"%")}})):null};var Qt=function(e){var t=e.recipes,a=e.onRemove;return r.a.createElement(S.f,{items:t,disableHeader:!0},r.a.createElement(S.a,{dataKey:"associatedRecipe",width:x.d.ButtonColumnWidthPx,minWidth:x.d.ButtonColumnWidthPx,cellRenderer:function(e){var t=e.cellData;return r.a.createElement(at.a,{onClick:function(){return a(t)}})}}),r.a.createElement(S.a,{dataKey:"nameLabel",width:300,label:p.b._("Name"),cellRenderer:S.e,columnData:{noteKey:"internalNote"}}),r.a.createElement(S.a,{dataKey:"formattedPrice",width:100,label:p.b._("Price")}))},Jt=Object(j.b)((function(e){var t=e.priceType,a=Object(ie.f)("associatedRecipes"),n=Object(ie.f)("id").value,i=tt(),c=Object(g.Qb)({branchId:i}),l=c.data,o=c.loading,u=me.a.propEq("warePriceType",t),d=me.a.propEq("associatedRecipe"),s=me.a.filter(u,a.value),m=r.a.useCallback((function(e){a.value.push({warePriceType:t,associatedRecipe:e.id,nameLabel:e.nameLabel,formattedPrice:"?"})}),[t,a]),b=r.a.useCallback((function(e){a.value.remove(a.value.find(me.a.both(d(e),u)))}),[d,u,a.value]),f=Object(ie.i)().isSubmitting;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Qt,{recipes:s,onRemove:b}),r.a.createElement(nt,{options:l?me.a.reject((function(e){return e.id===n||(t=e.id,s.some(d(t)));var t}),l.recipes):We.a,onAdd:m,isLoading:o,isDisabled:f}))})),Xt=Object(d.c)(At.a).withConfig({displayName:"FormPricingCurrencyCode",componentId:"sc-5x5h5x-0"})(["padding:0.5rem;"]),Yt=function(){var e=it(),t=e.priceTypes,a=e.priceTypeLabels;return r.a.createElement(r.a.Fragment,null,t.map((function(e){var t=["prices",e];return r.a.createElement(n.Fragment,{key:e},r.a.createElement(W.a,null,a[e]),r.a.createElement(qt.a,null,r.a.createElement(zt,{fieldName:[].concat(t,["value"])}),r.a.createElement(Xt,{fieldName:[].concat(t,["currencyCode"])}),r.a.createElement(Lt.a,{left:5},r.a.createElement(Gt,{fieldName:[].concat(t,["vatId"])}))),r.a.createElement(f.a,null),r.a.createElement(le,{isMain:!0},r.a.createElement(Jt,{priceType:e}),r.a.createElement(f.a,null)))})))},Zt=function(e){var t=e.placeholder;return r.a.createElement(Ce.a,{label:r.a.createElement(O.Trans,{id:"Code"}),labelWidth:x.d.DefaultLabelWidth},r.a.createElement(pt.a,{width:9},r.a.createElement(Ue.a,{fieldName:"code",fullWidth:!0,placeholder:t})))},$t=function(e){return r.a.createElement(Ce.a,{label:p.b._("External ID"),labelWidth:7},r.a.createElement(Ue.a,{fieldName:"internalCode",disabled:!0}))},ea=function(e){var t=e.label;return r.a.createElement(ke.a,{fieldName:"visible",label:t})},ta=a(1587);function aa(){var e=Object(u.a)(["\n  float: left;\n  width: 2.3rem;\n  height: 2.3rem;\n  border: 1px solid ",";\n  margin: 0.3rem 0.6rem 0.3rem ",";\n  font-size: 1.5rem;\n  text-align: center;\n  vertical-align: middle;\n  cursor: default;\n  color: ",";\n  background-color: ",";\n  &.active {\n    color: ",";\n    background-color: ",";\n  }\n"]);return aa=function(){return e},e}var na=d.c.div(aa(),x.a.greyMiddle,x.d.MarginAroundFormComponents,x.a.greyMiddle,x.a.white,x.a.black,x.a.yellow),ra=function(e){var t=e.selected,a=e.onToggle,n=Object(g.Jb)({},{fetchPolicy:"cache-first"}),i=n.data;return n.loading||!i?null:r.a.createElement(r.a.Fragment,null,i.allergens.map((function(e){return r.a.createElement(na,{key:e.enum,title:e.code,className:Object(He.b)({active:t.includes(e.enum)}),onClick:a&&function(){return a(e.enum)}},e.category)})))},ia=d.c.div.withConfig({displayName:"StyledAllergenLabel",componentId:"sc-1bpzlke-0"})(["margin:0.7rem 0 0 0.2rem;"]),ca=Object(j.b)((function(){var e=Object(ie.f)("ingredients"),t=me.a.uniq(me.a.flatten(me.a.map(me.a.prop("allergens"),e.value)));return r.a.createElement(Ce.a,{labelWidth:x.d.DefaultLabelWidth,icon:ta.a},r.a.createElement(ia,null,r.a.createElement(O.Trans,{id:"Allergens based on stock cards"})),r.a.createElement(ra,{selected:t}))})),la=function(){return r.a.createElement(Ce.a,{label:r.a.createElement(O.Trans,{id:"Public note"}),labelWidth:x.d.DefaultLabelWidth},r.a.createElement(Ke,{fieldName:"descriptionLabel",placeholder:p.b._("Public note for customers, allergens")}))},oa=a(2808),ua=a(255),da=(a(2805),a(1367)),sa=a(2813),ma=a(1355),ba=a(1356),fa=a(2806),ga=a.n(fa),pa=function(e){var t=e.image,a=e.onConfirm,n=e.onCancel,i=r.a.useState({unit:"%",width:50,aspect:1}),c=Object(N.a)(i,2),l=c[0],o=c[1],u=r.a.useCallback((function(e){o(e)}),[]),d=r.a.useRef(),s=r.a.useCallback((function(){d.current&&function(e,t){var a=document.createElement("canvas"),n=e.naturalWidth/e.width,r=e.naturalHeight/e.height;return a.width=t.width,a.height=t.height,a.getContext("2d").drawImage(e,t.x*n,t.y*r,t.width*n,t.height*r,0,0,t.width,t.height),new Promise((function(e,t){a.toBlob((function(a){a?e(a):t(new Error("Canvas is empty"))}),"image/jpeg")}))}(d.current,l).then(a)}),[l,a]),m=r.a.useCallback((function(e){d.current=e}),[]),b=r.a.useMemo((function(){return URL.createObjectURL(t)}),[t]);return r.a.useEffect((function(){return function(){URL.revokeObjectURL(b)}}),[b]),r.a.useEffect((function(){return function(){d.current=void 0}}),[]),r.a.createElement(da.a,{open:!0,fullWidth:!0},r.a.createElement(sa.a,null,r.a.createElement(O.Trans,{id:"Choose the most significant part of the image"})),r.a.createElement(ma.a,null,r.a.createElement(ga.a,{src:b,crop:l,onChange:u,onImageLoaded:m,keepSelection:!0,ruleOfThirds:!0,imageStyle:{width:"100%"}})),r.a.createElement(ba.a,null,r.a.createElement(w.a,{onClick:n},r.a.createElement(O.Trans,{id:"Cancel"})),r.a.createElement(w.a,{onClick:s,color:x.a.green},r.a.createElement(O.Trans,{id:"Confirm"}))))};var ha=d.c.div.withConfig({displayName:"StyledRecipeImageUploader",componentId:"sc-1fnjy10-0"})(["border:1px dotted ",";background:",";color:",";width:16rem;height:16rem;cursor:pointer;& section{height:100%;width:100%;}& div.container{height:100%;width:100%;padding:0.4rem;}& img{height:100%;width:100%;object-fit:contain;}& div.hint{margin:6rem 0;text-align:center;}& .delete-button{position:relative;top:",";left:12.5rem;}"],x.a.greyMiddle,x.a.white,x.a.greyMiddle,"-".concat(x.d.ButtonHeight).concat(x.d.DefaultSizeUnit)),va=Object(j.b)((function(){var e=Object(ua.a)().enqueueWarning,t=Object(ie.i)().isSubmitting,a=r.a.useState(),n=Object(N.a)(a,2),i=n[0],c=n[1],l=Object(oa.a)({disabled:t,accept:"image/*",multiple:!1,onDropAccepted:function(e){var t=Object(N.a)(e,1)[0];c(t)},onDropRejected:function(){e(p.b._("Supplied file is not recognized as image."))}}),o=l.isDragActive,u=l.getRootProps,d=l.getInputProps,s=Object(ie.d)("image"),m=r.a.useMemo((function(){var e=s.value;return null===e?null:"string"!==typeof s.value?URL.createObjectURL(e):s.value}),[s.value]);return r.a.useEffect((function(){return function(){m&&URL.revokeObjectURL(m)}}),[m]),r.a.createElement(ha,null,r.a.createElement("section",null,r.a.createElement("div",Object.assign({className:"container"},u()),r.a.createElement("input",d()),m&&r.a.createElement("img",{src:m,alt:""}),null===m&&r.a.createElement("div",{className:"hint"},o?r.a.createElement(O.Trans,{id:"Drop the image here ..."}):r.a.createElement(O.Trans,{id:"Click to select image or drop it here"})))),m&&r.a.createElement(xe.a,{type:"button",disabled:t,onDelete:function(){return I.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:s.setValue(null);case 1:case"end":return e.stop()}}))}}),i&&r.a.createElement(pa,{image:i,onConfirm:function(e){c(null),s.setValue(e)},onCancel:function(){c(null)}}))})),Ea=function(e){var t=e.isCreate,a=Object(g.W)(),n=Object(N.a)(a,1)[0];return r.a.createElement(Ne,{primaryColumnWidth:"minmax(24rem, 54rem)",secondaryColumnWidth:"minmax(12rem, 30rem)",contentPrimary:r.a.createElement(je.a,null,r.a.createElement(Zt,{placeholder:p.b._("Recipe code")}),r.a.createElement(Xe,{placeholder:p.b._("Recipe name"),localized:!0}),r.a.createElement(le,{isMain:!0},r.a.createElement(la,null)),r.a.createElement(ze,{placeholder:p.b._("Recipe internal note")}),!t&&r.a.createElement($t,null),r.a.createElement(le,{isMain:!0},r.a.createElement(ca,null)),r.a.createElement(Ce.a,{labelWidth:x.d.DefaultLabelWidth},r.a.createElement(ea,{label:p.b._("To show this recipe")}))),contentSecondary:r.a.createElement(va,null),contentTopRight:r.a.createElement(Qe,null),contentBottomRight:r.a.createElement(Te,{mutationName:"destroyRecipe",confirmText:p.b._("Remove this recipe?"),onDelete:function(e){return n({recipeId:e})}})})},ya=function(e){var t=e.ingredients,a=e.onRemove,n=e.isLoading,i=void 0!==n&&n;return r.a.createElement(S.f,{isLoading:i,items:t,disableHeader:!0,noRowsRenderer:function(){return r.a.createElement(S.g,{text:p.b._("Recipe has no ingredients")})}},r.a.createElement(S.a,{dataKey:"stockItem",width:x.d.ButtonColumnWidthPx,minWidth:x.d.ButtonColumnWidthPx,cellRenderer:S.c,columnData:{onRemove:a}}),r.a.createElement(S.a,{dataKey:"label",width:300,label:p.b._("Name")}),r.a.createElement(S.a,{dataKey:"quantity",width:60,label:p.b._("Quantity"),cellRenderer:function(e){var t=e.rowIndex;return r.a.createElement(pt.a,{width:2.5},r.a.createElement(Ue.a,{fieldName:["ingredients",String(t),"quantity"],fullWidth:!0}))}}),r.a.createElement(S.a,{dataKey:"unitLabel",width:100,label:p.b._("Ware unit")}))},Oa=me.a.differenceWith((function(e,t){return e.id===t.stockItem})),ja=Object(j.b)((function(e){var t=e.ingredients,a=e.onAdd,n=e.onRemove,i=tt(),c=Object(g.Ub)({branchId:i}),l=c.data,o=c.loading,u=Object(ie.i)().isSubmitting;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ya,{ingredients:t,onRemove:n}),r.a.createElement(nt,{isLoading:o,isDisabled:u,addButtonText:p.b._("Add ingredient"),options:l?Oa(l.stockItems,t):We.a,onAdd:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){a({stockItem:e.id,label:e.nameLabel,quantity:"1",unitLabel:e.wareUnit.code,allergens:e.allergens.map(me.a.prop("enum"))})}))}))})),Ca=function(){var e=Object(ie.d)("ingredients");return Object(j.g)((function(){return r.a.createElement(ja,{ingredients:e.value,onAdd:function(t){e.value.push(t)},onRemove:function(t){e.value.splice(e.value.findIndex(me.a.propEq("stockItem",t)),1)}})}))},wa=function(e){var t=e.match.params.recipeId,a=Object(P.a)(t),n=a.isCreate,i=a.itemType,c=a.redirectToRecipeList;return null===i?(c(),null):r.a.createElement(Pt,{isCreate:n,recipeId:t,recipeType:i},r.a.createElement(Lt.a,{right:1.25,bottom:4},r.a.createElement(h.a,{pageTitle:Object(se.c)(i),hideLogoutWidget:!0,useBackButton:!0},r.a.createElement(s.a,null,r.a.createElement(Ea,{isCreate:n})),r.a.createElement(s.a,null,r.a.createElement(Yt,null)),r.a.createElement(s.a,null,r.a.createElement(W.a,null,r.a.createElement(O.Trans,{id:"Recipe ingredients"})),r.a.createElement(f.a,null),r.a.createElement(Ca,null)),r.a.createElement(le,{isMain:!0},r.a.createElement(s.a,null,r.a.createElement(W.a,null,r.a.createElement(O.Trans,{id:"Sidedish categories"})),r.a.createElement($e.a,null,r.a.createElement(O.Trans,{id:"These sidedish are presented with recipe"})),r.a.createElement(Nt,{fieldName:"sideDishes",addButtonText:p.b._("Attach sidedish category"),noRowsText:p.b._("Recipe has no sidedish category attached")})),r.a.createElement(s.a,null,r.a.createElement(W.a,null,r.a.createElement(O.Trans,{id:"Category assignments"})),r.a.createElement($e.a,null,r.a.createElement(O.Trans,{id:"Recipe is in these categories"})),r.a.createElement(Nt,{fieldName:"categories",categoryType:Rt.a.Main,addButtonText:p.b._("Add to category"),noRowsText:p.b._("Recipe is not in any category")})))),r.a.createElement(re,null,r.a.createElement(de,{isCreate:n,createMutation:"createRecipe",updateMutation:"updateRecipe"}))))},xa=a(1382),Ta=a(1689),ka=a(1411);function La(){var e=Object(u.a)(["\n  [aria-label='grid']:focus {\n    outline: none;\n  }\n\n  [role='columnheader'] {\n    display: flex;\n    align-items: center;\n    overflow: hidden;\n  }\n"]);return La=function(){return e},e}var Ra=Object(d.c)(S.f)(La()),Ia=Object(j.b)((function(e){var t=e.stockItems,a=e.isLoading;return r.a.createElement(Ra,{items:t,heightStretch:!0,noRowsRenderer:function(){return a?r.a.createElement(ka.a,null):r.a.createElement("h3",null,r.a.createElement(O.Trans,{id:"Selected branch has no stock cards"}))}},r.a.createElement(S.a,{dataKey:"id",width:x.d.ButtonColumnWidthPx,minWidth:x.d.ButtonColumnWidthPx,cellRenderer:Object(S.h)({canQuery:"stockItem"},S.b)}),r.a.createElement(S.a,{dataKey:"code",width:100,label:p.b._("Card code")}),r.a.createElement(S.a,{dataKey:"nameLabel",width:300,minWidth:30,flexGrow:2,label:p.b._("Card name")}),r.a.createElement(S.a,{dataKey:"quantity",width:100,label:p.b._("Card stock"),cellRenderer:Na}),r.a.createElement(S.a,{dataKey:"allowNegativeValue",width:300,label:p.b._("Negative stock"),cellRenderer:Sa}),r.a.createElement(S.a,{dataKey:"note",width:300,label:p.b._("Card note")}))}));function Na(e){var t=e.cellData,a=e.rowData;return"".concat(t," ").concat(a.wareUnit.code)}function Sa(e){return!0===e.cellData?r.a.createElement(O.Trans,{id:"Permitted"}):r.a.createElement(O.Trans,{id:"Forbidden"})}var Wa=Object(j.b)((function(){var e=Object(be.a)(),t=Object(g.Ub)({branchId:e.branchId}),a=t.data,n=t.loading,i=e.filter.getPredicate({partialMatch:["code","nameLabel"],exactMatch:["plu"]}),c=a?a.stockItems.filter(i):We.a;return r.a.createElement(Ia,{stockItems:c,isLoading:n})})),Da=function(){var e=Object(P.a)().getStockCreateRoute;return r.a.createElement(h.a,{pageTitle:p.b._("Stock overview"),useBackButton:!0},r.a.createElement(v.a,{forcePercentHeightInMobile:100},r.a.createElement(s.a,{stretchToParent:!0},r.a.createElement(kt.b,null,r.a.createElement("div",{className:"filter"},r.a.createElement(b.a,{justify:"start",flexWrap:"wrap"},r.a.createElement(m.a,null,r.a.createElement(E.a,{width:20})),r.a.createElement(m.a,null,r.a.createElement(Ta.a,null))),r.a.createElement(xa.a,{mutationName:"createStockItem"},r.a.createElement(D.a,{routeTo:e()}))),r.a.createElement("div",{className:"table"},r.a.createElement(Wa,null))))))},Pa=a(1449),_a=function(e){var t=e.stockId,a=e.isCreate,n=e.children,i=Object(be.a)(),c=Object(P.a)().redirectToStockList,l=Object(ie.c)((function(e){return{code:e.string().required(),nameLabel:e.string().required(),wareUnit:e.string().required(),ingredients:e.array().of(e.object({quantity:e.string().required()}))}})),u=Object(g.u)(),d=Object(N.a)(u,1)[0],s=r.a.useCallback((function(e){var t;return I.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,I.a.awrap(d({branchId:i.branchId}));case 2:if(null!==(t=a.sent)){a.next=5;break}return a.abrupt("return",e);case 5:return a.abrupt("return",Object(_.a)({},e,{},{allowNegativeDefault:Ma(t.defaults.allowNegative)}));case 6:case"end":return a.stop()}}))}),[i,d]),m=Object(g.v)(),b=Object(N.a)(m,1)[0],f=r.a.useCallback((function(e){var a;return I.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,I.a.awrap(b({stockId:t},{fetchPolicy:"no-cache"}));case 2:if(null!==(a=n.sent)){n.next=6;break}return c(),n.abrupt("return",e);case 6:return n.abrupt("return",Object(_.a)({},{id:(r=a.stockItem).id,internalNote:"TBD",nameLabel:r.nameLabel,code:r.code,note:r.note,plu:r.plu||"",wareUnit:r.wareUnit.enum,quantity:r.quantity,allergens:r.allergens.map(me.a.prop("enum")),allowNegative:r.allowNegative,allowNegativeDefault:Ma(r.companyBranch.allowNegative)}));case 7:case"end":return n.stop()}var r}))}),[b,c,t]),p=Object(g.Z)(),h=Object(N.a)(p,1)[0],v=r.a.useCallback((function(e){return h({stockItem:Object(_.a)({companyBranch:i.branchId},Ba(e))})}),[h,i]),E=Object(g.cb)(),y=Object(N.a)(E,1)[0],O=r.a.useCallback((function(e){return y({stockId:t,stockItem:Ba(e)})}),[t,y]);return r.a.createElement(ve,{isCreate:a,onCreate:v,onUpdate:O,initialValues:{id:"NEW",internalNote:"",nameLabel:"",code:"",plu:"",note:"",wareUnit:null,quantity:0,allergens:[],allowNegative:g.c.Default,allowNegativeDefault:g.c.Default},loadCreateDefaults:s,loadUpdateValues:f,validationSchema:l,successRedirectPath:o.d},n)};function Ma(e){return e?g.c.Default:g.c.Disabled}function Ba(e){return{code:e.code,label:e.nameLabel,note:e.note,plu:e.plu,allergens:e.allergens,wareUnit:e.wareUnit,allowNegative:e.allowNegative}}var Va=function(){var e=Object(ie.d)("allergens"),t=r.a.useCallback((function(t){var a=e.value;a.includes(t)?e.setValue(me.a.without([t],a)):e.setValue([].concat(Object(V.a)(a),[t]))}),[e]);return Object(j.g)((function(){return r.a.createElement(Ce.a,{icon:ta.a,labelWidth:7},r.a.createElement(ra,{selected:e.value,onToggle:t}))}))},Fa=a(380),Ua=[{type:g.c.Enabled,label:Object(Fa.i18nMark)("Permit")},{type:g.c.Disabled,label:Object(Fa.i18nMark)("Forbid")}],qa=Object(j.b)((function(){var e=Object(ie.i)().values.allowNegativeDefault;return r.a.createElement(Ce.a,{label:p.b._("Negative stock"),labelWidth:7},r.a.createElement(Ht,{items:Ua,fieldName:"allowNegative",getItemId:me.a.prop("type"),formatItem:function(t){return t.type===e?r.a.createElement("span",null,p.b._(t.label),r.a.createElement("i",null," (".concat(p.b._("Is default setting").toLocaleLowerCase(),")"))):p.b._(t.label)}}))})),Aa=a(2820),Ka=function(){return r.a.createElement(Ce.a,{icon:Aa.a,labelWidth:7},r.a.createElement(pt.a,{width:9},r.a.createElement(Ue.a,{fieldName:"plu",fullWidth:!0,placeholder:p.b._("PLU")})))},za=a(2821),Ha=a(1498),Ga=function(){var e=Object(g.Wb)(),t=e.data,a=e.loading;return r.a.createElement(Ce.a,{icon:za.a,labelWidth:7},r.a.createElement(Ha.a,{fieldName:"wareUnit",isLoading:a,options:t?t.wareUnits:We.a,getOptionLabel:me.a.prop("code"),getOptionValue:me.a.prop("enum"),placeholder:p.b._("Choose unit"),width:12}))},Qa=function(){var e=Object(g.ab)(),t=Object(N.a)(e,1)[0];return r.a.createElement(Ne,{primaryColumnWidth:"minmax(10rem, 54rem)",contentPrimary:r.a.createElement(je.a,null,r.a.createElement(Xe,{placeholder:p.b._("Card name")}),r.a.createElement(Zt,{placeholder:p.b._("Card code")}),r.a.createElement(Ga,null),r.a.createElement(Ka,null),r.a.createElement(ze,{fieldName:"note",placeholder:p.b._("Card note"),label:p.b._("Card note")}),r.a.createElement(Va,null),r.a.createElement(qa,null)),contentBottomRight:r.a.createElement(Te,{mutationName:"destroyStockItem",confirmText:p.b._("Remove this card?"),onDelete:function(e){return t({stockId:e})}})})},Ja=a(1541),Xa=function(e){var t=e.stockId,a=Object(g.rc)({stockId:t}),n=a.getStash;if(a.loading)return r.a.createElement(Ja.a,null);var i=n((function(e){return e.stockItem.ingredients}));return i&&0!==i.length?r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,null,r.a.createElement(O.Trans,{id:"Recipes using this card"})),r.a.createElement(S.f,{items:Object(V.a)(i),disableHeader:!0,fullHeight:!0},r.a.createElement(S.a,{dataKey:"",cellDataGetter:function(e){var t=e.rowData;return{pathname:"".concat(o.c,"/").concat(t.recipe.id),state:{recipeType:t.recipe.recipeType.enum}}},cellRenderer:S.b,width:100}),r.a.createElement(S.a,{dataKey:"recipe",width:300,label:p.b._("Name"),cellRenderer:function(e){var t=e.rowData;return r.a.createElement(r.a.Fragment,null,t.recipe.nameLabel,r.a.createElement($e.a,null,t.recipe.descriptionLabel))}}))):r.a.createElement(W.a,null,r.a.createElement(O.Trans,{id:"No recipes are using stock card"}))},Ya=function(e){var t=e.match.params.stockId,a=Object(P.a)(t).isCreate;return r.a.createElement(h.a,{pageTitle:p.b._("Stock card"),hideLogoutWidget:!0,useBackButton:!0},r.a.createElement(_a,{isCreate:a,stockId:t},r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,null,r.a.createElement(Qa,null),!a&&r.a.createElement(Pa.a,{queryName:"recipes"},r.a.createElement(Xa,{stockId:t}))),r.a.createElement(re,null,r.a.createElement(de,{isCreate:a,createMutation:"createStockItem",updateMutation:"updateStockItem"})))))};a.d(t,"MenuRouting",(function(){return Za}));var Za=function(){return r.a.createElement(i.e,null,r.a.createElement(l.a,{path:"".concat(o.b,"/:categoryId"),component:Tt}),r.a.createElement(l.a,{path:o.b,component:ae}),r.a.createElement(l.a,{path:"".concat(o.c,"/:recipeId"),component:wa}),r.a.createElement(l.a,{path:o.c,component:kt.a}),r.a.createElement(l.a,{path:"".concat(o.d,"/:stockId"),component:Ya}),r.a.createElement(l.a,{path:o.d,component:Da}),r.a.createElement(i.b,{to:o.b,from:o.a}),r.a.createElement(i.c,{component:c.a}))};t.default=Za}}]);
//# sourceMappingURL=387.a88a76ce.chunk.js.map