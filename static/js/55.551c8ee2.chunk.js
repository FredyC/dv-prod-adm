(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{7502:function(e,t,a){"use strict";a.d(t,"a",function(){return d});var n=a(0),r=a.n(n),l=a(13),o=a(7513),i=a(10);const c=l.b.div.withConfig({displayName:"FullHeightDiv"})`
  position: fixed;
  bottom: 0.5rem;
  width: ${(()=>e=>void 0!==e.widthInColumns?"calc(("+e.widthInColumns+" * 6.22vw) - "+i.c.LayoutGridCellMargin+")":"calc(100vh - (2 * "+i.c.LayoutGridCellMargin+"))")()};
  left: ${(()=>e=>void 0!==e.column?"calc(("+e.column+" * 6.22vw) + "+i.c.LayoutGridCellMargin+")":i.c.LayoutGridCellMargin)()};
  top: ${(()=>e=>void 0!==e.row?"calc(("+e.row+" * 3.9375rem) + "+i.c.LayoutGridCellMargin+")":"calc(3.9375rem + "+i.c.LayoutGridCellMargin+")")()};
`,s=l.b.div.withConfig({displayName:"FullHeightDivStyled"})`
  height: 100%;
`,d=({children:e,row:t=1,column:a=0,widthInColumns:n=16,withScrollArea:l=!1,scrollAreaId:i})=>r.a.createElement(c,{column:a,row:t,widthInColumns:n,withScrollArea:l},l?r.a.createElement(o.a,{id:i},e):r.a.createElement(s,null,e))},7503:function(e,t,a){"use strict";a.d(t,"a",function(){return n});const n=a(13).b.div.withConfig({displayName:"FlexRowSingle"})`
  display: flex;
  flex-direction: row;
  justify-content: ${({justify:e="space-between"})=>e};
`},7507:function(e,t,a){"use strict";a.d(t,"a",function(){return n});const n=a(13).b.div.withConfig({displayName:"VerticalGap"})`
  height: ${({size:e=1,sizeUnit:t="rem"})=>`${e}${t}`};
`;n.displayName="VerticalGap"},7513:function(e,t,a){"use strict";a.d(t,"a",function(){return n});const n=a(13).b.div.withConfig({displayName:"ScrollArea"})`
  overflow-y: scroll;
  -webkit-overflow-scrolling: touch;
  height: 100%;
`},7543:function(e,t,a){"use strict";a.d(t,"a",function(){return d}),a.d(t,"b",function(){return u});var n=a(0),r=a.n(n),l=a(4),o=a(84),i=a(282);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var s=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&(a[n[r]]=e[n[r]])}return a};const d=e=>{var{to:t,from:a}=e,n=s(e,["to","from"]);return r.a.createElement(l.c,{children:({location:e})=>r.a.createElement(o.b,c({to:u(t,a||`${e.pathname}/`)},n))})};function u(e,t){if("string"===typeof e)return Object(i.a)(e,t);const a=Object(i.a)(e.pathname||"",t);return Object.assign({},e,{pathname:a})}},7547:function(e,t,a){"use strict";a.d(t,"a",function(){return u});var n=a(0),r=a.n(n),l=a(7492),o=a(16),i=a(38),c=a(7515);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var d=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&(a[n[r]]=e[n[r]])}return a};class u extends r.a.Component{constructor(){super(...arguments),this.validate=(e=>{const{isRequired:t,isMulti:a,validationName:n}=this.props;if(t){if(a&&(!Array.isArray(e)||0===e.length))return i.d._("{validationName} must have at least option selected",{validationName:n});if(!a&&null==e)return i.d._("{validationName} must have a selection",{validationName:n})}return null})}getControlProps(e){const{isMulti:t,items:a,defaultSelection:n,getItemId:r}=this.props,l=e.value||n;if(t){const t=e=>l.includes(r(e));return{selectedItems:Array.isArray(l)?a.filter(t):[],onMultiSelection:t=>{e.setValue(t.map(r)),e.setTouched(!0)}}}return{selectedItem:l&&a.find(e=>r(e)===l),onSingleSelection:t=>{e.setValue(t?r(t):null),e.setTouched(!0)}}}render(){const e=this.props,{field:t,fieldIsPure:a=!1,isRequired:n=!1,isClearable:o=!1}=e,i=d(e,["field","fieldIsPure","isRequired","isClearable"]);return r.a.createElement(l.Field,{field:t,pure:a,validate:this.validate},e=>r.a.createElement(c.a,s({},this.getControlProps(e),{isInvalid:Boolean(e.error),isClearable:o&&!n},i)))}}u.defaultProps={validationName:i.d._("Value"),getItemId:o.a.prop("id")}},7569:function(e,t,a){"use strict";a.d(t,"a",function(){return s});var n=a(0),r=a.n(n),l=a(7544),o=a(13),i=a(70);const c=o.b.div.withConfig({displayName:"DragHandleContainerStyled"})`
  padding: 1rem 0.4rem;
  cursor: grab;
`,s=Object(l.SortableHandle)(()=>r.a.createElement(c,null,r.a.createElement(i.a,{iconName:"reorder"})))},7580:function(e,t,a){"use strict";a.d(t,"a",function(){return o});var n=a(274),r=a.n(n),l=a(0);function o(e,t=300){const a=Object(l.useCallback)(e,[]),n=Object(l.useRef)(r()(a,t));return Object(l.useEffect)(()=>n.current.clear),n.current}},7596:function(e,t,a){"use strict";a.d(t,"a",function(){return u});var n=a(0),r=a.n(n),l=a(7492),o=a(16),i=a(38),c=a(7500);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var d=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&(a[n[r]]=e[n[r]])}return a};class u extends r.a.Component{constructor(){super(...arguments),this.validate=(e=>this.props.isRequired&&!e?i.d._("{0} must be selected",{0:this.props.validatioName}):null)}getControlProps(e){const{isMulti:t,options:a,getOptionValue:n,defaultValue:r}=this.props,l=e.value||r;if(t){const t=Array.isArray(l)?e=>l.includes(n(e)):o.a.F;return{value:Array.isArray(a)?a.filter(t):[],onChange:t=>{e.setValue(t.map(n))}}}return{value:l&&a.find(e=>n(e)===l),onChange:t=>{e.setValue(n(t))}}}render(){const e=this.props,{field:t,fieldIsPure:a=!1,defaultValue:n,isRequired:o=!1}=e,i=d(e,["field","fieldIsPure","defaultValue","isRequired"]);return r.a.createElement(l.Field,{field:t,validate:this.validate,pure:a},e=>r.a.createElement(c.a,s({},this.getControlProps(e),{onFocus:()=>e.setTouched(!0),styles:{control:t=>Boolean(e.error)?Object.assign({},t,{borderColor:"red"}):t}},i)))}}u.defaultProps={validatioName:"Value",getItemId:o.a.prop("id")}},7915:function(e,t,a){},7917:function(e){e.exports=["pizza","beans","cheese","hot-pepper","smoking-barbecue","meat-pie","sausage","hot-dog","fruit","fruit-1","fruit-2","strawberry","soup","noodles","ramen","rice","spaghetti","food","piece-of-cake","beer","marshmallow","cake","banana-split","ice-cream","cookie","doughnut","cupcake","kebab","steak","fish","fondue","shrimp","berry","food","food-1","food-2","food-3","food-4","food-5","food-6","food-7","food-8","food-9","food-10","food-11","food-12","food-13","food-14","food-15","food-16","food-17","food-18","food-19","food-20","food-21","food-22","food-23","food-24","food-25","food-26","food-27","food-28","food-29","food-30","drink","drink-1","drink-2","drink-3","drink-4","drink-5","cup","cup-1","cup-2","whisky"]},7925:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(4),o=a(126),i=a(71),c=a(13),s=a(263),d=a(7507),u=a(67),m=a(38),p=a(265),h=a(7502),f=a(7532),y=a(7509),g=a(7503),b=a(7499),E=a(51),v=a(288),w=(a(7915),a(7597)),O=a(7543),C=a(10),S=a(260);function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var j=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&(a[n[r]]=e[n[r]])}return a};const k=e=>{var{target:t,Link:a=O.a}=e,n=j(e,["target","Link"]);return r.a.createElement(a,{to:t},r.a.createElement(S.a,I({iconName:"mode_edit",width:C.c.ButtonHeight,height:C.c.ButtonHeight},n)))};function T(){return(T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var P=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&(a[n[r]]=e[n[r]])}return a};const R=e=>{var t=P(e,[]);return r.a.createElement(S.a,T({iconName:"remove_circle_outline",width:C.c.ButtonHeight,height:C.c.ButtonHeight},t))};function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var N=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&(a[n[r]]=e[n[r]])}return a};const L=e=>{var{isVisible:t}=e,a=N(e,["isVisible"]);return r.a.createElement(S.a,x({iconName:"remove_red_eye",width:C.c.ButtonHeight,height:C.c.ButtonHeight,iconColor:t?C.a.white:C.a.greyMiddle,color:C.a.greyMiddle},a))};var _=a(7495),D=a(7505),V=a(54);function F(){return(F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var q=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&(a[n[r]]=e[n[r]])}return a};class A extends n.Component{renderTable(e,t){const a=this.props,{items:n,children:l,isLoading:o,heightStretch:i}=a,c=q(a,["items","children","isLoading","heightStretch"]);return r.a.createElement(w.d,F({autoHeight:!i,width:e,height:t,headerHeight:50,rowHeight:60,rowCount:n?n.length:0,rowGetter:({index:e})=>n[e],noRowsRenderer:()=>o?r.a.createElement(V.a,null):null},c),l)}render(){return this.props.heightStretch?r.a.createElement(w.a,null,({width:e,height:t})=>this.renderTable(e,t)):r.a.createElement(w.e,{scrollElement:window},({height:e})=>r.a.createElement(w.a,{disableHeight:!0},({width:t})=>this.renderTable(t,e)))}}function $({canQuery:e,canMutate:t},a){return n=>{let l=a(n);return e&&(l=r.a.createElement(D.a,{queryName:e},l)),t&&(l=r.a.createElement(_.a,{mutationName:t},l)),l}}function B({cellData:e}){return r.a.createElement(k,{target:e})}function M({cellData:e,columnData:t}){return r.a.createElement(R,{onClick:()=>t.onRemove&&t.onRemove(e)})}function K({cellData:e,columnData:t,rowData:a}){return r.a.createElement(L,{isVisible:e,onClick:()=>t.onToggle(a.id,!e)})}A.defaultProps={heightStretch:!1};const W=c.b.div.withConfig({displayName:"NoteText"})`
  color: ${C.a.greyMiddle};
`;function H({cellData:e,rowData:t,columnData:a}){return r.a.createElement(r.a.Fragment,null,e,r.a.createElement(W,null,t[a.noteKey]))}const U=Object(c.b)(e=>{var{text:t=m.d._("Table is empty")}=e,a=q(e,["text"]);return r.a.createElement("div",a,t)}).withConfig({displayName:"DataTableEmptyText"})`
  padding: 1rem;
  color: ${C.a.greyMiddle};
  font-style: 'italic';
`;var G=a(7569),z=a(7544);function Q(){return(Q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var Y=function(e,t,a,n){return new(a||(a=Promise))(function(r,l){function o(e){try{c(n.next(e))}catch(t){l(t)}}function i(e){try{c(n.throw(e))}catch(t){l(t)}}function c(e){e.done?r(e.value):new a(function(t){t(e.value)}).then(o,i)}c((n=n.apply(e,t||[])).next())})},J=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&(a[n[r]]=e[n[r]])}return a};const X=Object(z.SortableElement)(e=>{var{columns:t,style:a,className:n}=e;J(e,["columns","style","className"]);return r.a.createElement("div",{style:a,className:n},t)}),Z=Object(z.SortableContainer)(A);class ee extends r.a.Component{constructor(){super(...arguments),this.state={sortedItems:this.props.items},this.onHandleSorting=(({newIndex:e,oldIndex:t})=>Y(this,void 0,void 0,function*(){const a=[...this.state.sortedItems],n=Object(z.arrayMove)(this.state.sortedItems,t,e);if(this.setState({sortedItems:n}),this.props.onSort){const r=this.props.onSort({item:a[t],items:n,offset:e-t,newIndex:e,oldIndex:t});r&&!(yield r)&&this.setState({sortedItems:a})}}))}render(){const e=this.props,{items:t,isLoading:a}=e,n=J(e,["items","isLoading"]);return r.a.createElement(Z,Q({useDragHandle:!0,lockAxis:"y",lockToContainerEdges:!0,onSortEnd:this.onHandleSorting,rowRenderer:e=>r.a.createElement(X,e),isLoading:a},n,{items:this.state.sortedItems}))}}function te(){return(te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}ee.getDerivedStateFromProps=(e=>({sortedItems:e.items}));const ae=({categories:e,onToggle:t,onRemove:a,onSort:n,showEditColumn:l=!0,showRemoveColumn:o=!1,showVisibilityColumn:i=!1,showHeader:c=!0,isSortable:s=!1,isLoading:d=!1,heightStretch:u=!1,noRowsDisplay:p=(()=>r.a.createElement(U,{text:m.d._("No recipes in category")}))})=>{const h={isLoading:d,items:e,disableHeader:!c,noRowsRenderer:()=>p};return r.a.createElement(({children:e})=>s?r.a.createElement(ee,te({heightStretch:u,onSort:n},h),e):r.a.createElement(A,te({heightStretch:u},h),e),null,l&&r.a.createElement(w.b,{dataKey:"id",width:60,cellRenderer:$({canQuery:"wareCategory"},B),cellDataGetter:({rowData:e})=>Object(v.b)(e.id,e.categoryType.enum)}),o&&r.a.createElement(w.b,{dataKey:"id",width:60,cellRenderer:M,columnData:{onRemove:a}}),i&&r.a.createElement(w.b,{dataKey:"visible",width:60,cellRenderer:$({canMutate:"updateWareCategory"},K),columnData:{onToggle:t}}),r.a.createElement(w.b,{dataKey:"nameLabel",width:300,label:m.d._("Name"),cellRenderer:H,columnData:{noteKey:"internalNoteLabel"}}),r.a.createElement(w.b,{dataKey:"countRecipes",label:m.d._("Recipe count"),width:100,cellRenderer:({cellData:e})=>`${e} ${m.d._("Recipes").toLocaleLowerCase()}`}),s&&r.a.createElement(w.b,{dataKey:"id",width:50,cellRenderer:()=>r.a.createElement(G.a,null)}))},ne=c.b.div.withConfig({displayName:"CreateButtonContainer"})`
  position: absolute;
  right: 0;
  z-index: 5;
`,re=({routeTo:e="create",onClick:t})=>r.a.createElement(ne,null,r.a.createElement(O.a,{to:e,onClick:t},r.a.createElement(S.a,{iconName:"add_circle",color:C.a.green,width:C.c.ButtonHeight,height:C.c.ButtonHeight})));var le=a(121);function oe(){return(oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}const ie=({headline:e,subHeadline:t=!1,categoryType:a,heightStretch:n=!1})=>r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,null,r.a.createElement(y.a,{widthGrowIndex:1},r.a.createElement(b.a,null,e),t&&r.a.createElement(b.a,{size:"smaller"},t)),r.a.createElement(y.a,{fixedWidth:!0},r.a.createElement(re,{routeTo:Object(v.b)("create",a)}))),r.a.createElement(E.a,{render:({settings:e})=>r.a.createElement(le.c,oe({},e.getQueryProps({categoryType:a}),{renderLoading:!0,render:({wareCategories:t})=>r.a.createElement(ae,{categories:t,onToggle:e.menu.category.changeVisibility,isSortable:!0,showHeader:!1,heightStretch:n,showVisibilityColumn:!0,onSort:({item:t,offset:a})=>{e.menu.category.sortCategory(t.id,a)}})}))})),ce=c.b.div.withConfig({displayName:"PartialDataTableContainer"})`
  height: calc(100% - 3.5rem);
  padding-top: 1rem;
  overflow-y: scroll;
  overflow-x: hidden;
  -webkit-overflow-scrolling: touch;
`,se=e=>r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{pageTitle:m.d._("Category overview"),useBackButton:!0}),r.a.createElement(h.a,null,r.a.createElement(s.a,{stretchToParent:!0},r.a.createElement(f.a,{width:20}),r.a.createElement(ce,null,r.a.createElement(ie,{categoryType:u.e.MAIN,headline:m.d._("Category of recipes"),heightStretch:!1}),r.a.createElement(d.a,{size:1.5}),r.a.createElement(ie,{categoryType:u.e.SIDE_DISH,headline:m.d._("Category of sidedish"),heightStretch:!1}),r.a.createElement(d.a,{size:1.5}),r.a.createElement(ie,{categoryType:u.e.COVER,headline:m.d._("Category of covers"),heightStretch:!1})))));var de=a(81);const ue=c.b.div.withConfig({displayName:"TopRightButtonContainer"})`
  position: fixed;
  right: 0;
  top: -4rem;
  width: 10rem;
`;ue.displayName="TopRightButtonContainer";var me=a(7492),pe=a(7518),he=a(7517);const fe=({isCreate:e=!1})=>r.a.createElement(me.FormApi,{render:t=>r.a.createElement(he.a,{id:"form-submit"},function(e,t){if(!Object(pe.a)(e))return m.d._("Fix form errors");return t?m.d._("Create"):m.d._("Save")}(t,e))});const ye=c.b.form.withConfig({displayName:"FormContainer"})`
  margin: 0.6rem;
  display: flex;
`,ge=c.b.div.withConfig({displayName:"FormColumn"})`
  flex: none;
  margin-right: 1rem;
`;var be=a(7564),Ee=a(7511),ve=a(7917);const we=c.b.div.withConfig({displayName:"PictogramDisplayStyled"})`
  &:before {
    font-size: ${function({fontSize:e=2,fontSizeUnit:t="rem"}){return`${e}${t}`}} !important;
    margin-left: 0.5rem !important;
  }
`,Oe=({pictogramId:e,fontSize:t=2,fontSizeUnit:a="rem"})=>r.a.createElement(we,{className:function(e){return`flaticon-${e}`}(e),fontSize:t,fontSizeUnit:a});var Ce=a(7500),Se=a(16);const Ie=({field:e})=>r.a.createElement(me.Field,{field:e,pure:!0},e=>r.a.createElement(Ce.a,{value:e.value?{pictogram:e.value}:null,onChange:t=>e.setValue(t),options:ve,getOptionValue:Se.a.prop("pictogram"),formatOptionLabel:e=>r.a.createElement(Oe,{pictogramId:e,fontSize:2}),components:{SingleValue:({data:e})=>r.a.createElement(Oe,{pictogramId:e.pictogram,fontSize:4})},styles:{container:e=>Object.assign({},e,{width:"8rem"}),menuList:e=>Object.assign({},e,{maxHeight:"35rem"})},isClearable:!1,isSearchable:!1,minWidth:8}));var je=a(7529),ke=function(e,t,a,n){return new(a||(a=Promise))(function(r,l){function o(e){try{c(n.next(e))}catch(t){l(t)}}function i(e){try{c(n.throw(e))}catch(t){l(t)}}function c(e){e.done?r(e.value):new a(function(t){t(e.value)}).then(o,i)}c((n=n.apply(e,t||[])).next())})};const Te=({confirmText:e,onDelete:t})=>r.a.createElement(me.Field,{field:"id"},a=>"NEW"!==a.value&&r.a.createElement(l.c,null,({history:n})=>r.a.createElement(je.a,{confirmText:e,onDelete:()=>ke(void 0,void 0,void 0,function*(){yield t(a.value),n.goBack()})})));var Pe=a(7494),Re=a(7493);function xe(){return(xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var Ne=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&(a[n[r]]=e[n[r]])}return a};const Le=e=>{var{field:t="internalNote",icon:a="label_outline",label:n=m.d._("Internal note").toLocaleLowerCase()}=e,l=Ne(e,["field","icon","label"]);return r.a.createElement(Re.a,{label:n,labelWidth:7},r.a.createElement(Pe.b,xe({field:t,inputWidth:22},l)))};function _e(){return(_e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var De=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&(a[n[r]]=e[n[r]])}return a};const Ve=e=>{var{field:t="nameLabel",icon:a="label"}=e,n=De(e,["field","icon"]);return r.a.createElement(Re.a,{icon:a,labelWidth:7},r.a.createElement(Pe.b,_e({field:t,inputWidth:22,isRequired:!0,validatioName:m.d._("Name")},n)))},Fe=({categoryType:e})=>r.a.createElement(ye,null,r.a.createElement(ge,null,r.a.createElement(Ve,{placeholder:m.d._("Category name"),inputWidth:22}),r.a.createElement(Le,{placeholder:m.d._("Category internal note"),inputWidth:22}),r.a.createElement(be.a,{field:"visible",label:m.d._("To show this category")})),e===u.e.MAIN?r.a.createElement(ge,null,r.a.createElement(Ie,{field:"pictogram"})):null,r.a.createElement(ge,null,r.a.createElement(Ee.a,{render:({menu:t})=>r.a.createElement(Te,{confirmText:m.d._("Remove this category?"),onDelete:a=>t.category.deleteCategory(a,e)})})));var qe=a(266),Ae=a(37);function $e(){return($e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var Be=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&(a[n[r]]=e[n[r]])}return a};function Me(e){var{shouldLoad:t,loader:a}=e,l=Be(e,["shouldLoad","loader"]);const[o,i]=Object(n.useState)(null);return Object(n.useEffect)(()=>{t&&a().then(i)},[t]),r.a.createElement(me.Form,$e({values:o},l))}const Ke=({render:e})=>r.a.createElement(l.c,null,({history:t})=>e?e(()=>t.goBack()):(t.goBack(),null));var We=a(18),He=function(e,t,a,n){return new(a||(a=Promise))(function(r,l){function o(e){try{c(n.next(e))}catch(t){l(t)}}function i(e){try{c(n.throw(e))}catch(t){l(t)}}function c(e){e.done?r(e.value):new a(function(t){t(e.value)}).then(o,i)}c((n=n.apply(e,t||[])).next())})};const Ue=c.b.div.withConfig({displayName:"ErrorPop"})`
  color: red;
  padding: 1rem;
  max-width: 30rem;
  overflow-wrap: break-word;
`;class Ge extends r.a.Component{constructor(){super(...arguments),this.state={submitError:null,validationErrors:null}}renderErrors(){const{submitError:e,validationErrors:t}=this.state;return e?this.renderSubmitError(e):t?this.renderValidationErrors(t):null}renderSubmitError(e){let t=[m.d._("Unexpected error while sending form. Out team was notified about the issue.")];if(Object(Ae.b)(e)){const a=Se.a.propEq("showToUser",!0),n=e.graphQLErrors.filter(a).map(Se.a.prop("message"));n.length&&(t=n)}return this.renderPopover(t)}renderValidationErrors(e){return null}renderPopover(e){return r.a.createElement(qe.f,{open:!0,anchorEl:()=>document.getElementById("submit-button"),onClose:()=>this.setState({submitError:null,validationErrors:null}),anchorOrigin:{vertical:"bottom",horizontal:"center"}},e.map((e,t)=>r.a.createElement(Ue,{key:t},e)))}render(){const{isCreate:e,onCreate:t,onUpdate:a,getDefaultValues:n,loadValues:l,loadDefaults:o,children:i}=this.props;return r.a.createElement(Ke,{render:c=>r.a.createElement(Me,{shouldLoad:!0,defaultValues:n(),loader:()=>He(this,void 0,void 0,function*(){let t=n();if(o){const e=yield o();Object.assign(t,e)}if(e)return t;const a=yield l();return Object.assign({},t,a)}),onChange:e=>Object(We.e)("new values",e.values),onSubmit:n=>He(this,void 0,void 0,function*(){e?yield t(n):yield a(n),c()}),onSubmitFailure:(e,t)=>{this.setState({validationErrors:e,submitError:t}),Object.keys(e).length&&Object(We.d)("validation errors",e),t&&Object(We.d)("submit error",t)}},i,this.renderErrors())})}}var ze=a(50);function Qe(){const{settings:{menu:e}}=Object(ze.d)();return e}var Ye=a(437),Je=function(e,t,a,n){return new(a||(a=Promise))(function(r,l){function o(e){try{c(n.next(e))}catch(t){l(t)}}function i(e){try{c(n.throw(e))}catch(t){l(t)}}function c(e){e.done?r(e.value):new a(function(t){t(e.value)}).then(o,i)}c((n=n.apply(e,t||[])).next())})};const Xe=({categoryId:e,categoryType:t,children:a})=>{const n=Qe();return r.a.createElement(Ge,{isCreate:null===e,onCreate:e=>n.category.createCategory(e,t),onUpdate:e=>n.category.updateCategory(e,t),getDefaultValues:()=>(function(e){return{id:"NEW",visible:!0,internalNoteLabel:"",nameLabel:"",categoryType:{enum:e},recipes:[]}})(t),loadValues:()=>Je(void 0,void 0,void 0,function*(){const{data:t}=yield n.client.query({query:Ye.b,variables:{categoryId:e},fetchPolicy:"no-cache"});return t.wareCategory})},a)};var Ze=a(7567),et=a(283);function tt(){return(tt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}const at=({recipes:e,onToggle:t,onRemove:a,onSortRecipe:n,showEditColumn:l=!0,showRemoveColumn:o=!1,showVisibilityColumn:i=!0,showTypeColumn:c=!1,isSortable:s=!1,isLoading:d=!1,heightStretch:p=!1})=>{const h={isLoading:d,items:e,heightStretch:p,noRowsRenderer:()=>d?r.a.createElement(Ze.a,null):r.a.createElement(b.a,null,m.d._("No recipes has been found"))};return r.a.createElement(({children:e})=>s?r.a.createElement(ee,tt({onSort:n},h),e):r.a.createElement(A,h,e),null,l&&r.a.createElement(w.b,{dataKey:"id",width:60,cellRenderer:$({canQuery:"recipe"},B),cellDataGetter:({rowData:e})=>Object(et.b)(e.id,e.recipeType.enum)}),o&&r.a.createElement(w.b,{dataKey:"id",width:60,cellRenderer:M,columnData:{onRemove:a}}),i&&r.a.createElement(w.b,{dataKey:"visible",width:60,cellRenderer:$({canMutate:"updateRecipe"},K),columnData:{onToggle:t}}),c&&r.a.createElement(w.b,{dataKey:"recipeType",width:100,label:m.d._("Type"),cellRenderer:rt}),r.a.createElement(w.b,{dataKey:"code",width:100,label:m.d._("Code")}),r.a.createElement(w.b,{dataKey:"nameLabel",width:300,label:m.d._("Name"),cellRenderer:H,columnData:{noteKey:"internalNote"}}),r.a.createElement(w.b,{dataKey:"prices",width:150,label:m.d._("Delivery sale"),cellRenderer:nt,columnData:{priceType:u.f.DELIVERY}}),r.a.createElement(w.b,{dataKey:"prices",width:150,label:m.d._("Local sale"),cellRenderer:nt,columnData:{priceType:u.f.INHOUSE}}),r.a.createElement(w.b,{dataKey:"availableAmount",label:m.d._("recipe.list.availableAmount",{},{defaults:"Stock"}),width:100}),r.a.createElement(w.b,{dataKey:"internalNote",label:m.d._("Internal note"),width:200}),s&&r.a.createElement(w.b,{dataKey:"id",width:50,cellRenderer:()=>r.a.createElement(G.a,null)}))};function nt({cellData:e,columnData:{priceType:t}}){const a=e.find(Se.a.pathEq(["priceType","enum"],t));return a?a.price.formattedValue:r.a.createElement("i",null,m.d._("Not set").toLocaleLowerCase())}function rt({rowData:e}){const t=e.recipeType.enum;return t===u.e.SIDE_DISH?m.d._("Sidedish").toLocaleLowerCase():t===u.e.COVER?m.d._("Cover").toLocaleLowerCase():m.d._("Ware").toLocaleLowerCase()}function lt(){return(lt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var ot=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&(a[n[r]]=e[n[r]])}return a};class it extends n.Component{constructor(){super(...arguments),this.state={selected:null},this.onAdd=(()=>{this.state.selected&&(this.props.onAdd(this.state.selected),this.setState({selected:null}))}),this.onSelect=(e=>{this.setState({selected:e})})}render(){const e=this.props,{addLabel:t=m.d._("Add"),onAdd:a,addButtonText:n}=e,l=ot(e,["addLabel","onAdd","addButtonText"]);return r.a.createElement(g.a,{justify:"flex-start"},r.a.createElement(y.a,{fixedWidth:!0,width:"4rem",margin:"auto 0"},t),r.a.createElement(y.a,{fixedWidth:!0,width:"20rem",margin:"auto 0"},r.a.createElement(Ce.a,lt({value:this.state.selected,onChange:this.onSelect,onKeyDown:e=>{"Enter"===e.key&&this.onAdd()},isClearable:!1,getOptionValue:Se.a.prop("id"),getOptionLabel:Se.a.prop("nameLabel")},l))),r.a.createElement(y.a,{fixedWidth:!0,width:"10rem",margin:"auto 0"},r.a.createElement(S.a,{text:n,disabled:null===this.state.selected,onClick:this.onAdd})))}}it.defaultProps={addButtonText:m.d._("Add")};var ct=a(240);function st(){return(st=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}const dt=({categoryType:e,filterRecipes:t,onAdd:a})=>r.a.createElement(Ee.a,{observe:!0,render:n=>r.a.createElement(ct.b,st({},n.getQueryProps({categoryType:e}),{fetchPolicy:"cache-and-network",render:({recipes:e})=>r.a.createElement(it,{options:t(e),onAdd:a})}))}),ut=c.b.div.withConfig({displayName:"FormContainer"})`
  display: flex;
  flex-direction: column;
  height: 96%;
  width: 100%;
`,mt=c.b.div.withConfig({displayName:"FormFixedRow"})`
  flex: 0 0 auto;
`,pt=c.b.div.withConfig({displayName:"FormStretchedRow"})`
  flex: 1 1 0;
  min-height: 0;
  position: relative;
`,ht=({categoryType:e})=>r.a.createElement(E.a,{observe:!1,render:({settings:{menu:{recipe:t}}})=>r.a.createElement(me.Field,{field:"recipes"},t=>r.a.createElement(ut,null,r.a.createElement(mt,null,r.a.createElement(dt,{categoryType:e,filterRecipes:Se.a.without(t.value),onAdd:e=>t.setValue(t.value.concat(e))})),r.a.createElement(pt,null,r.a.createElement(at,{recipes:t.value,isSortable:!0,showRemoveColumn:!0,showEditColumn:!1,showVisibilityColumn:!1,heightStretch:!0,onRemove:e=>t.setValue(Se.a.reject(Se.a.propEq("id",e),t.value)),onSortRecipe:({items:e})=>{t.setValue(e)}}))))}),ft={[u.e.MAIN]:Object(de.i18nMark)("Ware categories"),[u.e.SIDE_DISH]:Object(de.i18nMark)("Sidedish categories"),[u.e.COVER]:Object(de.i18nMark)("Cover categories")},yt=c.b.div.withConfig({displayName:"FormContainer"})`
  display: flex;
  flex-direction: column;
  height: 100%;
  width: 100%;
`,gt=c.b.div.withConfig({displayName:"FormFixedRow"})`
  flex: 0 0 8rem;
`,bt=c.b.div.withConfig({displayName:"FormStretchedRow"})`
  flex: 1 1 0;
  min-height: 0;
  position: relative;
`,Et=({categoryId:e,categoryType:t})=>r.a.createElement(Xe,{categoryId:e,categoryType:t},r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{pageTitle:m.d._(ft[t]),hideLogoutWidget:!0,useBackButton:!0},r.a.createElement(ue,null,r.a.createElement(_.a,{mutationName:null===e?"createWareCategory":"updateWareCategory"},r.a.createElement(fe,{isCreate:null===e})))),r.a.createElement(h.a,null,r.a.createElement(yt,null,r.a.createElement(gt,null,r.a.createElement(s.a,null,r.a.createElement(Fe,{categoryType:t}))),r.a.createElement(bt,null,r.a.createElement(s.a,{stretchToParent:!0},r.a.createElement(b.a,null,r.a.createElement(de.Trans,{id:"Recipes assigned to this category"})),r.a.createElement(ht,{categoryType:t}))))))),vt=c.b.div.withConfig({displayName:"DataTableContainer"})`
  height: calc(100% - 4.5rem);
  padding-top: 2rem;
`;var wt=a(125),Ot=a(7580);const Ct=({modelType:e})=>{const{settings:{menu:t}}=Object(ze.d)(),a=t[e],n=Object(Ot.a)(a.setFilterInput);return r.a.createElement(Re.a,{icon:wt.e},r.a.createElement(Pe.a,{onChange:e=>n(e.target.value),placeholder:m.d._("Filter by name or code")}))};function St(){return(St=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var It=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&(a[n[r]]=e[n[r]])}return a};const jt=e=>{var{to:t,from:a}=e,n=It(e,["to","from"]);return r.a.createElement(l.b,St({to:Object(O.b)(t,a||`${location.pathname}/`),from:a},n))};class kt extends n.Component{constructor(){super(...arguments),this.state={isOpen:!1,recipeType:null},this.onClose=(()=>{this.setState({isOpen:!1})}),this.onOpen=(()=>{this.setState({isOpen:!0})}),this.onSelect=(e=>()=>{this.setState({isOpen:!0,recipeType:e})})}render(){const{isOpen:e,recipeType:t}=this.state;return r.a.createElement(r.a.Fragment,null,null!==t&&r.a.createElement(jt,{to:Object(et.b)("create",t),push:!0}),r.a.createElement(re,{onClick:e=>{e.preventDefault(),this.onOpen()}}),r.a.createElement(qe.b,{open:e,onClose:this.onClose},r.a.createElement(qe.e,null,"Select item type"),r.a.createElement(S.a,{onClick:this.onSelect(u.e.MAIN)},r.a.createElement(de.Trans,{id:"Ware"})),r.a.createElement(S.a,{onClick:this.onSelect(u.e.SIDE_DISH)},r.a.createElement(de.Trans,{id:"Sidedish"})),r.a.createElement(S.a,{onClick:this.onSelect(u.e.COVER)},r.a.createElement(de.Trans,{id:"Cover"}))))}}var Tt=a(83),Pt=a(130);function Rt(e){const t=e.toLocaleLowerCase();return e=>e.toLocaleLowerCase().includes(t)}const xt=Object(Tt.b)(()=>{const{settings:e}=Object(ze.d)(),{data:t,loading:a}=Object(Pt.c)(ct.a,Object.assign({},e.queryProps,{suspend:!1})),n=Object(Tt.c)(()=>{if(!t.recipes||0===t.recipes.length)return[];const a=Rt(e.menu.recipe.filterInput);return t.recipes.filter(Se.a.cond([[Se.a.propSatisfies(a,"code"),Se.a.T],[Se.a.propSatisfies(a,"nameLabel"),Se.a.T]]))},[t&&t.recipes]);return r.a.createElement(at,{recipes:n,onToggle:e.menu.recipe.changeVisibility,isLoading:a,heightStretch:!0,showTypeColumn:!0})}),Nt=e=>r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{pageTitle:m.d._("Recipe overview"),useBackButton:!0}),r.a.createElement(h.a,null,r.a.createElement(s.a,{stretchToParent:!0},r.a.createElement(g.a,{justify:"start"},r.a.createElement(y.a,null,r.a.createElement(f.a,{width:20})),r.a.createElement(y.a,null,r.a.createElement(Ct,{modelType:"recipe"}))),r.a.createElement(_.a,{mutationName:"createRecipe"},r.a.createElement(kt,null)),r.a.createElement(vt,null,r.a.createElement(xt,null))))),Lt=({type:e,isMain:t,isSideDish:a,isCover:n,children:l})=>!0===t&&e===u.e.MAIN||!0===a&&e===u.e.SIDE_DISH||!0===n&&e===u.e.COVER?r.a.createElement(r.a.Fragment,null,l):null;function _t(){return(_t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}const Dt=({categoryType:e,currentCategories:t,addButtonText:a,onAdd:n})=>r.a.createElement(Ee.a,{observe:!0,render:l=>r.a.createElement(le.c,_t({},l.getQueryProps({categoryType:e}),{fetchPolicy:"cache-and-network",render:({wareCategories:e})=>r.a.createElement(it,{onAdd:n,options:Se.a.without(t,e),addButtonText:a})}))}),Vt=({categoryType:e,addButtonText:t,noRowsText:a,field:n})=>r.a.createElement(me.Field,{field:n},n=>r.a.createElement(r.a.Fragment,null,r.a.createElement(ae,{categories:n.value,showRemoveColumn:!0,showEditColumn:!1,showHeader:!1,onRemove:e=>n.setValue(Se.a.reject(Se.a.propEq("id",e),n.value)),noRowsDisplay:r.a.createElement(U,{text:a})}),r.a.createElement(Dt,{addButtonText:t,categoryType:e,currentCategories:n.value,onAdd:e=>n.setValue(n.value.concat(e))})));function Ft(){return(Ft=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var qt=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&(a[n[r]]=e[n[r]])}return a};const At=e=>{var{field:t="code",icon:a="label_outline",isRequired:n=!0}=e,l=qt(e,["field","icon","isRequired"]);return r.a.createElement(Re.a,{label:m.d._("Code").toLocaleLowerCase(),labelWidth:7},r.a.createElement(Pe.b,Ft({field:t,width:9,isRequired:!0,validatioName:m.d._("Code")},l)))};function $t(){return($t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var Bt=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&(a[n[r]]=e[n[r]])}return a};const Mt=e=>{var{field:t="descriptionLabel",icon:a="label_outline"}=e,n=Bt(e,["field","icon"]);return r.a.createElement(Re.a,{label:m.d._("Public note").toLocaleLowerCase(),labelWidth:7},r.a.createElement(Pe.b,$t({field:t,inputWidth:22},n)))};var Kt=a(3),Wt=a.n(Kt),Ht=a(35),Ut=a(285);const Gt=Wt.a`
  query GAllergens {
    allergens {
      ...GAllergen
    }
  }
  ${Ut.a}
`,zt=Object(Ht.a)(Gt);function Qt(){return(Qt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}const Yt=c.b.div.withConfig({displayName:"AllergenBox"})`
  float: left;
  width: 2rem;
  height: 2rem;
  border: 1px solid ${C.a.greyMiddle};
  margin: 0.3rem 0.6rem 0.3rem 0;
  font-size: 1.5rem;
  text-align: center;
  vertical-align: center;
  cursor: default;
  ${({active:e})=>c.a`
    color: ${e?C.a.black:C.a.greyMiddle};
    background-color: ${e?C.a.yellow:C.a.white};
  `};
`,Jt=({selected:e,onToggle:t})=>r.a.createElement(zt,{render:({allergens:a})=>r.a.createElement(r.a.Fragment,null,a.map(a=>{const n={active:e.includes(a.enum),onClick:t&&(()=>t(a.enum))};return r.a.createElement(Yt,Qt({key:a.enum,title:a.code},n),a.category)}))}),Xt=Se.a.pipe(Se.a.map(Se.a.prop("allergens")),Se.a.flatten,Se.a.uniq),Zt=()=>r.a.createElement(me.Field,{field:"ingredients"},({value:e})=>{const t=Xt(e);return r.a.createElement(Jt,{selected:t})}),ea=({recipeType:e})=>{const t=e===u.e.MAIN;return r.a.createElement(ye,null,r.a.createElement(ge,null,r.a.createElement(Ve,{placeholder:m.d._("Recipe name")}),r.a.createElement(At,{placeholder:m.d._("Recipe code")}),r.a.createElement(Le,{placeholder:m.d._("Recipe internal note")}),t&&r.a.createElement(Mt,{placeholder:m.d._("Public note for customers, allergens")}),r.a.createElement(Lt,{type:e,isMain:!0},r.a.createElement(Re.a,{labelWidth:7,icon:"error_outline"},m.d._("Allergens based on stock cards"),r.a.createElement("br",null),r.a.createElement(Zt,null))),r.a.createElement(Re.a,{labelWidth:7},r.a.createElement(be.a,{field:"visible",label:m.d._("To show this recipe")}))),r.a.createElement(ge,null,r.a.createElement(Ee.a,{render:({menu:e})=>r.a.createElement(Te,{confirmText:m.d._("Remove this recipe?"),onDelete:t=>e.recipe.deleteRecipe(t)})})))};var ta=a(284),aa=function(e,t,a,n){return new(a||(a=Promise))(function(r,l){function o(e){try{c(n.next(e))}catch(t){l(t)}}function i(e){try{c(n.throw(e))}catch(t){l(t)}}function c(e){e.done?r(e.value):new a(function(t){t(e.value)}).then(o,i)}c((n=n.apply(e,t||[])).next())})};const na=({recipeId:e,recipeType:t,children:a})=>{const n=Qe();return r.a.createElement(Ge,{isCreate:null===e,onCreate:e=>n.recipe.createRecipe(e,t),onUpdate:e=>n.recipe.updateRecipe(e),getDefaultValues:()=>la(t),loadDefaults:()=>aa(void 0,void 0,void 0,function*(){const e=yield n.recipe.getDefaultVat(),a=Object.assign({},la(t));return a.prices=ra(t=>({value:0,vatId:e[t]})),a}),loadValues:()=>aa(void 0,void 0,void 0,function*(){const{data:t}=yield n.client.query({query:ta.b,variables:{recipeId:e},fetchPolicy:"no-cache"});return a=t.recipe,Object.assign({},a,{associatedRecipes:a.sourceAssociatedRecipes.map(({priceType:e,recipe:t})=>({warePriceType:e.enum,nameLabel:t.nameLabel,associatedRecipe:t.id,formattedPrice:"?"})),ingredients:a.sourceIngredients.map(({quantity:e,stockItem:{id:t,label:a,allergens:n,wareUnit:r}})=>({stockItem:t,label:a,quantity:e,unitLabel:r.code,allergens:n.map(Se.a.prop("enum"))})),prices:ra(e=>{const t=a.sourcePrices.find(Se.a.pathEq(["priceType","enum"],e));return t?{value:t.price.value,vatId:t.vat.id}:{value:0,vatId:null}})});var a})},a)};function ra(e){return[u.f.DELIVERY,u.f.INHOUSE].reduce((t,a)=>(t[a]=e(a),t),{})}function la(e){return{id:"NEW",code:"",nameLabel:"",internalNote:"",descriptionLabel:"",visible:!0,recipeType:{enum:e},sourcePrices:[],prices:ra(()=>({value:0,vatId:null})),sourceAssociatedRecipes:[],associatedRecipes:[],sourceIngredients:[],ingredients:[],sideDishes:[],categories:[]}}var oa=a(7510),ia=a.n(oa);function ca(){return(ca=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var sa=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&(a[n[r]]=e[n[r]])}return a};const da=e=>void 0===e||Object(oa.isEmpty)(e+"")||!Object(oa.isDecimal)(e+"")?m.d._("Price must be a number"):null,ua=e=>{var{field:t="price.value",icon:a="toll"}=e,n=sa(e,["field","icon"]);return r.a.createElement(Re.a,{icon:a},r.a.createElement(Pe.b,ca({field:t,inputWidth:5,validate:da},n)),"K\u010d")};var ma=a(7528),pa=a(7547);const ha=Wt.a`
  query GVats($branchId: ID!) {
    vats(companyBranch: $branchId) {
      id
      vat
    }
  }
`,fa=Object(Ht.a)(ha);function ya(){return(ya=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}const ga=ma.css`
  margin-left: 5rem;
`,ba=({field:e="price.vat"})=>r.a.createElement(E.a,{render:({settings:t})=>r.a.createElement(fa,ya({},t.queryProps,{renderLoading:!1,render:({vats:t})=>r.a.createElement(Re.a,{className:ga,label:`${m.d._("VAT")}:`},t&&r.a.createElement(pa.a,{field:e,items:t,formatItem:({vat:e})=>`${e}%`,isRequired:!0,validationName:m.d._("VAT")}))}))}),Ea=({priceType:e,label:t})=>r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,null,t),r.a.createElement(me.NestedField,{field:["prices",e]},r.a.createElement(g.a,{justify:"flex-start"},r.a.createElement(ua,{field:"value"}),r.a.createElement(ba,{field:"vatId"})))),va=({recipes:e,onRemove:t})=>r.a.createElement(A,{items:e,disableHeader:!0},r.a.createElement(w.b,{dataKey:"associatedRecipe",width:60,cellRenderer:({cellData:e})=>r.a.createElement(R,{onClick:()=>t(e)})}),r.a.createElement(w.b,{dataKey:"nameLabel",width:300,label:m.d._("Name"),cellRenderer:H,columnData:{noteKey:"internalNote"}}),r.a.createElement(w.b,{dataKey:"formattedPrice",width:100,label:m.d._("Price")}));function wa(){return(wa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}const Oa=({priceType:e,recipeId:t})=>r.a.createElement(me.Field,{field:"associatedRecipes"},a=>{const n=Se.a.filter(Se.a.propEq("warePriceType",e),a.value),l=Se.a.reject(e=>e.id===t||(e=>n.some(Se.a.propEq("associatedRecipe",e)))(e.id)),o=t=>{a.setValue(a.value.concat({warePriceType:e,associatedRecipe:t.id,nameLabel:t.nameLabel,formattedPrice:"?"}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(va,{recipes:n,onRemove:t=>{a.setValue(Se.a.reject(({associatedRecipe:a,warePriceType:n})=>a===t&&n===e,a.value))}}),r.a.createElement(Ee.a,{render:e=>r.a.createElement(ta.c,wa({},e.queryProps,{render:({recipes:e})=>r.a.createElement(it,{options:l(e),onAdd:o})}))}),r.a.createElement(d.a,null))}),Ca=[{priceType:u.f.DELIVERY,label:Object(de.i18nMark)("Delivery sale")},{priceType:u.f.INHOUSE,label:Object(de.i18nMark)("Local sale")}],Sa=({recipeType:e,recipeId:t})=>r.a.createElement(r.a.Fragment,null,Ca.map(({priceType:a,label:l})=>r.a.createElement(n.Fragment,{key:a},r.a.createElement(Ea,{priceType:a,label:m.d._(l)}),r.a.createElement(d.a,null),e===u.e.MAIN&&r.a.createElement(Oa,{priceType:a,recipeId:t})))),Ia=({ingredients:e,onRemove:t,isLoading:a=!1})=>r.a.createElement(A,{isLoading:a,items:e,disableHeader:!0,noRowsRenderer:()=>r.a.createElement(U,{text:m.d._("Recipe has no ingredients")})},r.a.createElement(w.b,{dataKey:"stockItem",width:60,cellRenderer:M,columnData:{onRemove:t}}),r.a.createElement(w.b,{dataKey:"label",width:300,label:m.d._("Name")}),r.a.createElement(w.b,{dataKey:"quantity",width:60,label:m.d._("Quantity"),cellRenderer:({rowIndex:e})=>r.a.createElement(Pe.b,{field:["ingredients",e,"quantity"],validate:ja,width:"40px"})}),r.a.createElement(w.b,{dataKey:"unitLabel",width:100,label:m.d._("Ware unit")}));function ja(e){const t=m.d._("Quantity");return ia.a.isEmpty(e+"")?m.d._("{fieldName} must be entered",{fieldName:t}):ia.a.isFloat(e+"",{min:0})?null:m.d._("{fieldName} must be a positive number",{fieldName:t})}var ka=a(241);function Ta(){return(Ta=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}const Pa=Se.a.differenceWith(({id:e},{stockItem:t})=>e===t),Ra=()=>r.a.createElement(Ee.a,{observe:!1,render:e=>r.a.createElement(me.Field,{field:"ingredients"},t=>r.a.createElement(r.a.Fragment,null,r.a.createElement(Ia,{ingredients:t.value,onRemove:e=>{t.setValue(Se.a.reject(Se.a.propEq("stockItem",e),t.value))}}),r.a.createElement(ka.b,Ta({},e.queryProps,{render:({stockItems:e})=>r.a.createElement(it,{addButtonText:m.d._("Add ingredient"),options:Pa(e,t.value),onAdd:e=>{t.setValue([...t.value,{stockItem:e.id,label:e.nameLabel,quantity:1,unitLabel:e.wareUnit.code,allergens:e.allergens.map(Se.a.prop("enum"))}])}})}))))}),xa={[u.e.MAIN]:Object(de.i18nMark)("Ware recipe"),[u.e.SIDE_DISH]:Object(de.i18nMark)("Sidedish recipe"),[u.e.COVER]:Object(de.i18nMark)("Cover recipe")},Na=({recipeId:e,recipeType:t})=>r.a.createElement(p.a,{width:15,pageTitle:m.d._(xa[t]),hideLogoutWidget:!0,useBackButton:!0},r.a.createElement(na,{recipeId:e,recipeType:t},r.a.createElement(ue,null,r.a.createElement(_.a,{mutationName:null===e?"createRecipe":"updateRecipe"},r.a.createElement(fe,{isCreate:null===e}))),r.a.createElement(s.a,null,r.a.createElement(ea,{recipeType:t})),r.a.createElement(s.a,null,r.a.createElement(Sa,{recipeType:t,recipeId:e})),r.a.createElement(Lt,{type:t,isMain:!0},r.a.createElement(s.a,null,r.a.createElement(b.a,null,r.a.createElement(de.Trans,{id:"Recipe ingredients"})),r.a.createElement(d.a,null),r.a.createElement(Ra,null)),r.a.createElement(s.a,null,r.a.createElement(b.a,null,r.a.createElement(de.Trans,{id:"Sidedish categories"})),r.a.createElement(W,null,r.a.createElement(de.Trans,{id:"These sidedish are presented with recipe"})),r.a.createElement(Vt,{categoryType:u.e.SIDE_DISH,field:"sideDishes",addButtonText:m.d._("Attach sidedish category"),noRowsText:m.d._("Recipe has no sidedish category attached")})),r.a.createElement(s.a,null,r.a.createElement(b.a,null,r.a.createElement(de.Trans,{id:"Category assignments"})),r.a.createElement(W,null,r.a.createElement(de.Trans,{id:"Recipe is in these categories"})),r.a.createElement(Vt,{categoryType:u.e.MAIN,field:"categories",addButtonText:m.d._("Add to category"),noRowsText:m.d._("Recipe is not in any category")})))));var La=a(82),_a=a.n(La);const Da=({wareUnit:e,quantity:t,onConfirm:a})=>r.a.createElement(S.a,{disabled:null===e,onClick:a},e?r.a.createElement(de.Trans,{id:"Add {0} {1}",values:{0:_a()(t).format("0,0.[00]"),1:e.code}}):r.a.createElement(de.Trans,{id:"No stock card selected"})),Va=r.a.forwardRef(({value:e,onFilter:t,onConfirm:a},n)=>r.a.createElement(Re.a,{label:m.d._("Stock card"),labelWidth:7},r.a.createElement(Pe.a,{ref:n,autoFocus:!0,placeholder:`${m.d._("Code").toLocaleLowerCase()} / ${m.d._("PLU")} / ${m.d._("Title").toLocaleLowerCase()}`,value:e,onChange:e=>{t(e.target.value)},onKeyPressCapture:e=>{"Enter"===e.key&&(e.preventDefault(),a())}}))),Fa=r.a.forwardRef(({enabled:e,onChange:t,onConfirm:a},n)=>r.a.createElement(Pe.a,{ref:n,disabled:!e,onChange:e=>{const a=_a()(e.target.value).value();t(a)},onKeyPressCapture:e=>{"Enter"===e.key&&(e.preventDefault(),a())}})),qa=({stockItems:e,searchValue:t,onSelect:a})=>r.a.createElement(vt,null,r.a.createElement(A,{items:e,heightStretch:!1},r.a.createElement(w.b,{dataKey:"id",width:60,cellRenderer:Aa,columnData:{onSelect:a}}),r.a.createElement(w.b,{dataKey:"quantity",width:100,label:m.d._("Card stock"),cellRenderer:Ma}),r.a.createElement(w.b,{dataKey:"code",width:100,label:m.d._("Card code"),cellRenderer:Ba(t)}),r.a.createElement(w.b,{dataKey:"nameLabel",width:300,label:m.d._("Card name"),cellRenderer:Ba(t)}),r.a.createElement(w.b,{dataKey:"note",width:300,label:m.d._("Card note")})));function Aa({rowData:e,columnData:{onSelect:t}}){return r.a.createElement(S.a,{iconName:"done",width:C.c.ButtonHeight,height:C.c.ButtonHeight,onClick:()=>t(e)})}const $a=c.b.span.withConfig({displayName:"HighlightedValue"})`
  background-color: ${C.a.yellow};
`;function Ba(e){return({cellData:t})=>{const a=t.toLocaleLowerCase().indexOf(e.toLocaleLowerCase());if(-1===a)return t;const n=t.substring(0,a),l=t.substring(a,a+e.length),o=t.substring(a+e.length);return r.a.createElement(r.a.Fragment,null,n,r.a.createElement($a,null,l),o)}}function Ma({cellData:e,rowData:t}){return`${e} ${t.wareUnit.code}`}class Ka extends r.a.Component{constructor(){super(...arguments),this.state={targetStockItem:null,filteredStockItems:[],searchValue:"",inputQuantity:0},this.filterInputRef=r.a.createRef(),this.quantityInputRef=r.a.createRef(),this.onFilter=(e=>{if(""===e.trim())return void this.setState({filteredStockItems:[],searchValue:"",targetStockItem:null});const t=Rt(e),a=this.props.stockItems.filter(Se.a.cond([[Se.a.propEq("plu",e),Se.a.T],[Se.a.propSatisfies(t,"code"),Se.a.T],[Se.a.propSatisfies(t,"nameLabel"),Se.a.T]]));let n=null;1===a.length&&(n=Se.a.head(a)),this.setState({filteredStockItems:a,searchValue:e,targetStockItem:n})}),this.onConfirmFilter=(()=>{1===this.state.filteredStockItems.length&&this.quantityInputRef.current.focus()}),this.onQuantity=(e=>{this.setState({inputQuantity:e})}),this.onSelectStockItem=(e=>{this.setState({targetStockItem:e,filteredStockItems:[e]},()=>{this.quantityInputRef.current.focus()})}),this.onConfirm=(()=>{const{targetStockItem:e,inputQuantity:t}=this.state;e&&0!==t&&this.props.onDeposit(e,t),this.setState({targetStockItem:null,searchValue:"",inputQuantity:0},()=>{this.quantityInputRef.current.value="",this.filterInputRef.current.focus()})})}render(){const{searchValue:e,filteredStockItems:t,targetStockItem:a,inputQuantity:n}=this.state,l=""!==e.trim(),o=0===t.length,i=t.length>1;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ye,null,r.a.createElement(ge,null,r.a.createElement(Va,{onFilter:this.onFilter,onConfirm:this.onConfirmFilter,value:e,ref:this.filterInputRef})),r.a.createElement(ge,null,r.a.createElement(Fa,{enabled:null!==a,onChange:this.onQuantity,onConfirm:this.onConfirm,ref:this.quantityInputRef})),r.a.createElement(ge,null,r.a.createElement(Da,{cardName:a?a.nameLabel:"",quantity:n,wareUnit:a?a.wareUnit:null,onConfirm:this.onConfirm}))),r.a.createElement(b.a,null,l&&i&&r.a.createElement(de.Trans,{id:"Continue typing to find single stock card or select one from the list"}),l&&o&&r.a.createElement(de.Trans,{id:"No stock card found from entered search value"}),l&&a&&r.a.createElement(de.Trans,{id:"Stock card <0>{0}</0> is selected",values:{0:a.nameLabel},components:[r.a.createElement("b",null)]})),l&&r.a.createElement(qa,{searchValue:e,stockItems:t,onSelect:this.onSelectStockItem}))}}var Wa=a(129);function Ha(){return(Ha=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var Ua=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&(a[n[r]]=e[n[r]])}return a};var Ga=a(286);const za=Wt.a`
  query GMenuStockDeposit($branchId: ID!) {
    stockItems(companyBranch: $branchId) {
      id
      code
      plu
      nameLabel: label
      note
      quantity
      wareUnit {
        ...GWareUnit
      }
    }
  }
  ${Ga.a}
`,Qa=Wt.a`
  mutation GChangeMenuStockQuantity($stockItem: ID!, $quantityChange: Float!) {
    changeAmountStockItem(id: $stockItem, amountOffset: $quantityChange) {
      id
      quantity
    }
  }
`,Ya=(Ja=Qa,e=>{var{render:t,children:a}=e,n=Ua(e,["render","children"]);return r.a.createElement(Wa.Mutation,Ha({mutation:Ja},n),t)});var Ja;const Xa=Object(Ht.a)(za);function Za(){return(Za=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}const en=({children:e})=>r.a.createElement(Ya,{render:t=>{const a=(e,a)=>{t({variables:{stockItem:e.id,quantityChange:a}})};return r.a.createElement(Ee.a,{render:t=>r.a.createElement(Xa,Za({},t.queryProps,{render:({stockItems:t})=>e(t,a)}))})}}),tn=e=>r.a.createElement(p.a,{width:16,pageTitle:m.d._("Stock deposit"),useBackButton:!0},r.a.createElement(s.a,null,r.a.createElement(f.a,null),r.a.createElement(en,null,(e,t)=>r.a.createElement(Ka,{stockItems:e,onDeposit:t}))));var an=a(270);const nn=({stockItems:e,isLoading:t})=>r.a.createElement(A,{items:e,heightStretch:!0,noRowsRenderer:()=>t?r.a.createElement(an.a,null):r.a.createElement("h3",null,r.a.createElement(de.Trans,{id:"Selected branch has no stock cards"}))},r.a.createElement(w.b,{dataKey:"id",width:60,cellRenderer:$({canQuery:"stockItem"},B)}),r.a.createElement(w.b,{dataKey:"code",width:100,label:m.d._("Card code")}),r.a.createElement(w.b,{dataKey:"nameLabel",width:300,label:m.d._("Card name")}),r.a.createElement(w.b,{dataKey:"quantity",width:100,label:m.d._("Card stock"),cellRenderer:rn}),r.a.createElement(w.b,{dataKey:"allowNegative",width:300,label:m.d._("Negative stock"),cellRenderer:ln}),r.a.createElement(w.b,{dataKey:"note",width:300,label:m.d._("Card note")}));function rn({cellData:e,rowData:t}){return`${e} ${t.wareUnit.code}`}function ln({cellData:e}){return!0===e?r.a.createElement(de.Trans,{id:"Permitted"}):r.a.createElement(de.Trans,{id:"Forbidden"})}const on=Object(Tt.b)(()=>{const{settings:e}=Object(ze.d)(),{data:t,loading:a}=Object(Pt.c)(ka.a,Object.assign({},e.queryProps,{suspend:!1})),n=Object(Tt.c)(()=>{if(!t.stockItems||0===t.stockItems.length)return[];const a=e.menu.stock.filterInput,n=Rt(a);return t.stockItems.filter(Se.a.cond([[Se.a.propEq("plu",a),Se.a.T],[Se.a.propSatisfies(n,"code"),Se.a.T],[Se.a.propSatisfies(n,"nameLabel"),Se.a.T]]))},[t&&t.stockItems]);return r.a.createElement(nn,{stockItems:n,isLoading:a})}),cn=e=>r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{pageTitle:m.d._("Stock overview"),useBackButton:!0}),r.a.createElement(h.a,null,r.a.createElement(s.a,{stretchToParent:!0},r.a.createElement(g.a,{justify:"start"},r.a.createElement(y.a,null,r.a.createElement(f.a,{width:20})),r.a.createElement(y.a,null,r.a.createElement(Ct,{modelType:"stock"}))),r.a.createElement(_.a,{mutationName:"createStockItem"},r.a.createElement(re,{routeTo:"create"})),r.a.createElement(vt,null,r.a.createElement(on,null))))),sn=Wt.a`
  query GMenuStockForm($stockId: ID!) {
    stockItem(id: $stockId) {
      id
      code
      plu
      note
      nameLabel: label
      allowNegative
      wareUnit {
        ...GWareUnit
      }
      allergens {
        ...GAllergen
      }
      companyBranch {
        id
        allowNegative: stockItemsCanBeNegative
      }
    }
  }
  ${Ut.a}
  ${Ga.a}
`,dn=Wt.a`
  query GMenuStockDefaults($branchId: ID!) {
    companyBranch(id: $branchId) {
      id
      allowNegative: stockItemsCanBeNegative
    }
  }
`;Object(Ht.a)(sn);var un=function(e,t,a,n){return new(a||(a=Promise))(function(r,l){function o(e){try{c(n.next(e))}catch(t){l(t)}}function i(e){try{c(n.throw(e))}catch(t){l(t)}}function c(e){e.done?r(e.value):new a(function(t){t(e.value)}).then(o,i)}c((n=n.apply(e,t||[])).next())})};const mn=({stockId:e,children:t})=>{const a=Qe();return r.a.createElement(Ge,{isCreate:null===e,onCreate:e=>a.stock.createItem(e),onUpdate:e=>a.stock.updateItem(e),getDefaultValues:pn,loadDefaults:()=>un(void 0,void 0,void 0,function*(){const{data:e}=yield a.client.query({query:dn,variables:{branchId:a.stock.branchId},fetchPolicy:"no-cache"});return{allowNegativeDefault:hn(e.companyBranch.allowNegative)}}),loadValues:()=>un(void 0,void 0,void 0,function*(){const{data:t}=yield a.client.query({query:sn,variables:{stockId:e},fetchPolicy:"no-cache"});return{id:(n=t.stockItem).id,internalNote:"TBD",nameLabel:n.nameLabel,code:n.code,note:n.note,plu:n.plu||"",wareUnit:n.wareUnit.enum,allergens:n.allergens.map(Se.a.prop("enum")),allowNegative:n.allowNegative,allowNegativeDefault:hn(n.companyBranch.allowNegative)};var n})},t)};function pn(){return{id:"NEW",internalNote:"",nameLabel:"",code:"",plu:"",note:"",wareUnit:null,allergens:[],allowNegative:u.b.DEFAULT,allowNegativeDefault:u.b.DEFAULT}}function hn(e){return e?u.b.ENABLED:u.b.DISABLED}const fn=({field:e="allergens",icon:t="error_outline"})=>r.a.createElement(me.Field,{field:e},e=>{return r.a.createElement(Re.a,{icon:t,labelWidth:7},r.a.createElement(Jt,{selected:e.value,onToggle:t=>{const a=e.value;a.includes(t)?e.setValue(Se.a.without([t],a)):e.setValue([...a,t])}}))}),yn=[{type:u.b.ENABLED,label:Object(de.i18nMark)("Permit")},{type:u.b.DISABLED,label:Object(de.i18nMark)("Forbid")}],gn=({})=>{const e=Object(n.useMemo)(()=>` (${m.d._("Is default setting").toLocaleLowerCase()})`,[]);return r.a.createElement(me.FormApi,null,({values:{allowNegativeDefault:t}})=>r.a.createElement(Re.a,{label:m.d._("Negative stock"),labelWidth:7},r.a.createElement(pa.a,{field:"allowNegative",items:yn,formatItem:a=>a.type===t?r.a.createElement("span",null,m.d._(a.label),r.a.createElement("i",null,e)):m.d._(a.label),getItemId:e=>e.type})))};function bn(){return(bn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var En=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&(a[n[r]]=e[n[r]])}return a};const vn=e=>{var{field:t="plu",icon:a="fingerprint"}=e,n=En(e,["field","icon"]);return r.a.createElement(Re.a,{icon:a,labelWidth:7},r.a.createElement(Pe.b,bn({field:t,width:9},n)))};var wn=a(7596);const On=Wt.a`
  query GWareUnits {
    wareUnits {
      id
      code
      enum
    }
  }
`,Cn=Object(Ht.a)(On);function Sn(){return(Sn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var In=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&(a[n[r]]=e[n[r]])}return a};const jn=e=>{var{field:t="wareUnit",icon:a="select_all"}=e,n=In(e,["field","icon"]);return r.a.createElement(Cn,{renderLoading:!1,render:({wareUnits:e},{loading:l})=>r.a.createElement(Re.a,{icon:a,labelWidth:7},r.a.createElement(wn.a,Sn({field:t,options:e||[],isLoading:l,isRequired:!0,validatioName:m.d._("Ware unit"),getOptionLabel:Se.a.prop("code"),getOptionValue:Se.a.prop("enum"),width:12},n)))})},kn=e=>r.a.createElement(ye,null,r.a.createElement(ge,null,r.a.createElement(Ve,{placeholder:m.d._("Card name")}),r.a.createElement(At,{placeholder:m.d._("Card code")}),r.a.createElement(jn,{placeholder:m.d._("Choose unit")}),r.a.createElement(vn,{placeholder:m.d._("PLU")}),r.a.createElement(Le,{placeholder:m.d._("Card note"),field:"note",label:m.d._("Card note")}),r.a.createElement(fn,null),r.a.createElement(gn,null)),r.a.createElement(ge,null,r.a.createElement(_.a,{mutationName:"destroyStockItem"},r.a.createElement(Ee.a,{render:({menu:e})=>r.a.createElement(Te,{confirmText:m.d._("Remove this card?"),onDelete:t=>e.stock.deleteItem(t)})})))),Tn=Wt.a`
  query GStockRecipes($stockId: ID!) {
    stockItem(id: $stockId) {
      id
      ingredients {
        id
        recipe {
          id
          nameLabel
          descriptionLabel
        }
      }
    }
  }
`,Pn=Object(Ht.a)(Tn),Rn=({stockId:e})=>null===e?null:r.a.createElement(Pn,{variables:{stockId:e},render:({stockItem:{ingredients:e}})=>e.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,null,r.a.createElement(de.Trans,{id:"Recipes using this card"})),r.a.createElement(A,{items:e},r.a.createElement(w.b,{dataKey:"",cellDataGetter:({rowData:e})=>`../../recipe/${e.recipe.id}`,cellRenderer:B,width:100}),r.a.createElement(w.b,{dataKey:"recipe",width:300,label:m.d._("Name"),cellRenderer:({rowData:e})=>r.a.createElement(r.a.Fragment,null,e.recipe.nameLabel,r.a.createElement(W,null,e.recipe.descriptionLabel))}))):null}),xn=({stockId:e})=>r.a.createElement(p.a,{width:16,pageTitle:m.d._("Stock card"),hideLogoutWidget:!0,useBackButton:!0},r.a.createElement(mn,{stockId:e},r.a.createElement(r.a.Fragment,null,r.a.createElement(ue,null,r.a.createElement(_.a,{mutationName:null===e?"createStockItem":"updateStockItem"},r.a.createElement(fe,{isCreate:null===e}))),r.a.createElement(s.a,null,r.a.createElement(kn,null),r.a.createElement(D.a,{queryName:"recipes"},r.a.createElement(Rn,{stockId:e}))))));a.d(t,"MenuRoutes",function(){return Nn});const Nn=({match:e})=>r.a.createElement(l.e,null,r.a.createElement(i.a,{exact:!0,path:e.path,render:()=>r.a.createElement(l.b,{to:`${e.path}/category`})}),r.a.createElement(i.a,{exact:!0,path:`${e.path}/category`,component:se}),r.a.createElement(i.a,{path:`${e.path}/category/:categoryId`,render:({match:{params:e},location:{state:t}})=>r.a.createElement(Et,{categoryId:"create"===e.categoryId?null:e.categoryId,categoryType:t.categoryType})}),r.a.createElement(i.a,{exact:!0,path:`${e.path}/recipe`,component:Nt}),r.a.createElement(i.a,{path:`${e.path}/recipe/:recipeId`,render:({match:{params:e},location:{state:t}})=>r.a.createElement(Na,{recipeId:"create"===e.recipeId?null:e.recipeId,recipeType:t.recipeType})}),r.a.createElement(i.a,{exact:!0,path:`${e.path}/stock`,component:cn}),r.a.createElement(i.a,{path:`${e.path}/stock/deposit`,component:tn}),r.a.createElement(i.a,{path:`${e.path}/stock/:stockId`,render:({match:{params:e}})=>r.a.createElement(xn,{stockId:"create"===e.stockId?null:e.stockId})}),r.a.createElement(l.c,{component:o.a}));t.default=Nn}}]);
//# sourceMappingURL=55.551c8ee2.chunk.js.map