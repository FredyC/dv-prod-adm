(window.webpackJsonp=window.webpackJsonp||[]).push([[178],{1460:function(e,t,n){"use strict";n.d(t,"a",function(){return b});var a=n(5),r=n(26),c=n(0),i=n.n(c),l=n(55),o=n(1487),u=n(141),d=n(19);function s(){var e=Object(a.a)(["\n    margin: 0;\n    grid-row: "," ;\n    grid-column: span 16;\n    height: "," ;\n    position: relative;\n  "]);return s=function(){return e},e}function m(){var e=Object(a.a)(["\n  position: fixed;\n  bottom: 0.5rem;\n  width: ",";\n  left: ",";\n  top: ",";"]);return m=function(){return e},e}var f=r.default.div.withConfig({displayName:"PageLayoutFullHeightItem__StyledPageLayoutFullHeightItem",componentId:"sc-1mean6j-0"})([""," ",""],Object(l.c)(m(),function(e){return void 0!==e.widthInColumns?"calc(("+e.widthInColumns+" * 6.22vw) - "+d.d.LayoutGridCellMargin+")":"calc(100vh - (2 * "+d.d.LayoutGridCellMargin+"))"},function(e){return void 0!==e.column?"calc(("+e.column+" * 6.22vw) + "+d.d.LayoutGridCellMargin+")":d.d.LayoutGridCellMargin},function(e){return void 0!==e.row?"calc(("+e.row+" * 3.9375rem) + "+d.d.LayoutGridCellMargin+")":"calc(3.9375rem + "+d.d.LayoutGridCellMargin+")"}),Object(l.d)(s(),function(e){return e.rowInMobile},function(e){var t=e.forcePercentHeightInMobile;return t?"calc(".concat(t,"vh - ").concat(d.d.PageHeaderHeight+.25+d.d.DefaultSizeUnit,")"):"unset"})),b=function(e){var t=e.children,n=e.row,a=void 0===n?1:n,r=e.rowInMobile,c=void 0===r?16:r,l=e.column,d=void 0===l?0:l,s=e.widthInColumns,m=void 0===s?16:s,b=e.withScrollArea,p=void 0!==b&&b,v=e.scrollAreaId,h=e.forcePercentHeightInMobile;return i.a.createElement(f,{column:d,row:a,rowInMobile:c,widthInColumns:m,withScrollArea:p,forcePercentHeightInMobile:h},p?i.a.createElement(o.a,{id:v},t):i.a.createElement(u.a,{height:100,heightUnit:"%"},t))}},1461:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var a=n(5);function r(){var e=Object(a.a)(["\n  display: flex;\n  flex-direction: row;\n  flex-wrap: ",";\n  justify-content: ",";\n"]);return r=function(){return e},e}var c=n(26).default.div(r(),function(e){var t=e.flexWrap;return void 0===t?"unset":t},function(e){var t=e.justify;return void 0===t?"space-between":t})},1469:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var a=n(5);function r(){var e=Object(a.a)(["\n  height: ",";\n"]);return r=function(){return e},e}var c=n(26).default.div(r(),function(e){var t=e.size,n=void 0===t?1:t,a=e.sizeUnit,r=void 0===a?"rem":a;return"".concat(n).concat(r)});c.displayName="VerticalGap"},1472:function(e,t,n){"use strict";var a=n(5),r=n(58),c=(n(1534),n(0)),i=n.n(c),l=n(1495),o=n(26),u=n(45),d=n(1693),s=n(1550),m=n(330),f=n(139),b=function(e){var t=e.target,n=e.Link,a=void 0===n?s.a:n,c=Object(r.a)(e,["target","Link"]);return i.a.createElement(a,{to:t},i.a.createElement(m.a,null,i.a.createElement(f.a,Object.assign({icon:d.a},c))))},p=n(1537),v=n(49),h=Object(v.a)(i.a.createElement("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"}),"RemoveRedEye"),g=n(19),E=function(e){var t=e.isVisible,n=Object(r.a)(e,["isVisible"]);return i.a.createElement(m.a,null,i.a.createElement(f.a,Object.assign({icon:h,iconColor:t?g.a.white:g.a.greyMiddle,color:g.a.greyMiddle},n)))},y=n(1514),w=n(1457),O=n(1466),j=n(1519);function C(){var e=Object(a.a)(["\n  padding: 1rem;\n  color: ",";\n  font-style: 'italic';\n"]);return C=function(){return e},e}n.d(t,"f",function(){return k}),n.d(t,"h",function(){return I}),n.d(t,"b",function(){return R}),n.d(t,"c",function(){return x}),n.d(t,"d",function(){return T}),n.d(t,"e",function(){return S}),n.d(t,"g",function(){return L}),n.d(t,"a",function(){return l.d});var k=function(e){var t=e.items,n=e.heightStretch,a=void 0!==n&&n,c=e.fullHeight,o=void 0!==c&&c,u=e.rowHeight,d=void 0===u?60:u,s=e.isLoading,m=void 0!==s&&s,f=e.children,b=Object(r.a)(e,["items","heightStretch","fullHeight","rowHeight","isLoading","children"]),p=i.a.useCallback(function(e){var n=e.index;return t[n]},[t]),v=i.a.useCallback(function(){return m?i.a.createElement(y.a,null):null},[m]),h=function(e,n){return i.a.createElement(l.h,Object.assign({autoHeight:!a&&!o,width:e,height:n,headerHeight:50,rowCount:t?t.length:0,rowHeight:d,rowGetter:p,noRowsRenderer:v,style:{outline:"none"}},b),f)};return o?i.a.createElement(l.a,{disableHeight:!0},function(e){var n=e.width;return h(n,t.length*d)}):a?i.a.createElement(l.a,null,function(e){var t=e.width,n=e.height;return h(t,n)}):i.a.createElement(l.i,{scrollElement:window},function(e){var t=e.height;return i.a.createElement(l.a,{disableHeight:!0},function(e){var n=e.width;return h(n,t)})})};function I(e,t){var n=e.canQuery,a=e.canMutate;return function(e){var r=t(e);return n&&(r=i.a.createElement(O.a,{queryName:n},r)),a&&(r=i.a.createElement(w.a,{mutationName:a},r)),r}}function R(e){var t=e.cellData;return i.a.createElement(b,{target:t})}function x(e){var t=e.cellData,n=e.columnData;return i.a.createElement(p.a,{onClick:function(){return n.onRemove&&n.onRemove(t)}})}function T(e){var t=e.cellData,n=e.columnData,a=e.rowData;return i.a.createElement(E,{isVisible:t,onClick:function(){return n.onToggle(a.id,!t)}})}function S(e){var t=e.cellData,n=e.rowData,a=e.columnData;return i.a.createElement(i.a.Fragment,null,t,i.a.createElement(j.a,null,n[a.noteKey]))}var L=Object(o.default)(function(e){var t=e.text,n=void 0===t?u.b._("Table is empty"):t,a=Object(r.a)(e,["text"]);return i.a.createElement("div",a,n)})(C(),g.a.greyMiddle)},1473:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a=n(26).default.div.withConfig({displayName:"CardDock",componentId:"sc-1fyaqia-0"})(["position:absolute;",";",";"],function(e){var t=e.position;return"BottomRight"===t||"BottomLeft"===t?"bottom: 0":"top: 0"},function(e){var t=e.position;return"BottomLeft"===t||"TopLeft"===t?"left: 0":"right: 0"})},1474:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return d});var a=n(59),r=n(0),c=n.n(r),i="/settings/menu",l="".concat(i,"/recipe"),o="".concat(i,"/category"),u="".concat(i,"/stock");function d(){var e=Object(a.useRouterContext)().location,t=c.a.useMemo(function(){return new URLSearchParams(e.search).get("type")},[e.search]),n=function(e,t){return t?"".concat(e,"?type=").concat(t):e};return{itemType:t,getItemRoute:n,getRecipeListRoute:function(){return l},getRecipeCreateRoute:function(e){return n("".concat(l,"/create"),e)},getRecipeEditRoute:function(e,t){return n("".concat(l,"/").concat(e),t)},getCategoryListRoute:function(){return o},getCategoryCreateRoute:function(e){return n("".concat(o,"/create"),e)},getCategoryEditRoute:function(e,t){return n("".concat(o,"/").concat(e),t)},getStockListRoute:function(){return u},getStockDepositRoute:function(){return"".concat(u,"/deposit")},getStockTransferRoute:function(){return"".concat(u,"/transfer")},getStockCreateRoute:function(){return n("".concat(u,"/create"))},getStockEditRoute:function(e,t){return n("".concat(u,"/").concat(e),t)}}}},1487:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var a=n(5);function r(){var e=Object(a.a)(["\n  overflow-y: auto;\n  -webkit-overflow-scrolling: touch;\n  height: 100%;\n"]);return r=function(){return e},e}var c=n(26).default.div(r())},1492:function(e,t,n){"use strict";function a(e){var t=e.toLocaleLowerCase();return function(e){return e.toLocaleLowerCase().includes(t)}}n.d(t,"a",function(){return a})},1494:function(e,t,n){"use strict";n.d(t,"b",function(){return c}),n.d(t,"a",function(){return i});var a=n(57);function r(e,t){var n=Object(a.b)().user;return e.every(n.canQuery)&&t.every(n.canMutate)}function c(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r(t,[])}function i(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r([],t)}},1514:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var a=n(5),r=n(26),c=n(0),i=n.n(c),l=n(19);function o(){var e=Object(a.a)(["\n  0% {\n    -webkit-transform: scale(0);\n  }\n  100% {\n    -webkit-transform: scale(1);\n    opacity: 0;\n  }\n"]);return o=function(){return e},e}function u(){var e=Object(a.a)(["\n  0% {\n    -webkit-transform: scale(0);\n    transform: scale(0);\n  }\n  100% {\n    -webkit-transform: scale(1);\n    transform: scale(1);\n    opacity: 0;\n  }\n"]);return u=function(){return e},e}var d=Object(r.keyframes)(u()),s=Object(r.keyframes)(o()),m=r.default.div.withConfig({displayName:"BlockLoader__StyledBlockLoader",componentId:"sc-2zh6cb-0"})(["width:40px;height:40px;margin:100px auto;background-color:",";border-radius:100%;-webkit-animation:"," 1s infinite ease-in-out;animation:"," 1s infinite ease-in-out;"],l.a.orange,s,d),f=function(e){return i.a.createElement(m,null,i.a.createElement("div",{className:"bounce1"}),i.a.createElement("div",{className:"bounce2"}),i.a.createElement("div",{className:"bounce3"}))}},1519:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var a=n(5),r=n(26),c=n(19);function i(){var e=Object(a.a)(["\n  color: ",";\n"]);return i=function(){return e},e}var l=r.default.div(i(),c.a.greyMiddle)},1531:function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return m});var a,r,c=n(206),i=n(257),l=n(41),o=n(45),u=(a={},Object(c.a)(a,l.u.Main,Object(i.i18nMark)("Ware categories")),Object(c.a)(a,l.u.SideDish,Object(i.i18nMark)("Sidedish categories")),Object(c.a)(a,l.u.Cover,Object(i.i18nMark)("Cover categories")),a),d=(r={},Object(c.a)(r,l.u.Main,Object(i.i18nMark)("Ware recipe")),Object(c.a)(r,l.u.SideDish,Object(i.i18nMark)("Sidedish recipe")),Object(c.a)(r,l.u.Cover,Object(i.i18nMark)("Cover recipe")),r);function s(e){return o.b._(u[e])}function m(e){return o.b._(d[e])}},1532:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var a=n(2577),r=n(59),c=n(0),i=n.n(c),l=n(1459),o=n(1456),u=n(57),d=n(141),s=n(45),m=function(e){var t=e.modelType,n=Object(u.b)().settings.menu[t],c=Object(r.useDebounceCallback)(n.setFilterInput);return i.a.createElement(o.a,{icon:a.a},i.a.createElement(d.a,{width:17},i.a.createElement(l.a,{defaultValue:n.filterInput,inputFullWidth:!0,onChange:function(e){return c(e.target.value)},placeholder:s.b._("Filter by name or code")})))}},1533:function(e,t,n){"use strict";n.d(t,"a",function(){return b});var a=n(5),r=n(1689),c=n(0),i=n.n(c),l=n(81),o=n(26),u=n(330),d=n(139),s=n(19);function m(){var e=Object(a.a)(["\n  position: absolute;\n  right: 0;\n  z-index: 5;\n"]);return m=function(){return e},e}var f=o.default.div(m()),b=function(e){var t=e.routeTo,n=e.onClick,a=i.a.createElement(u.a,null,i.a.createElement(d.a,{icon:r.a,color:s.a.green,onClick:n}));return i.a.createElement(f,null,t?i.a.createElement(l.b,{to:t},a):a)}},1534:function(e,t,n){},1535:function(e,t,n){"use strict";var a=n(41);n.d(t,"b",function(){return a.u}),n.d(t,"a",function(){return a.v})},1536:function(e,t,n){"use strict";var a=n(5),r=n(0),c=n.n(r),i=n(26),l=n(1457),o=n(203),u=n(1467),d=n(1461),s=n(45),m=n(204),f=n(1460),b=n(1488),p=n(62),v=n(57),h=n(1458),g=n(141),E=n(41),y=n(31),w=n(1531),O=Object(p.observer)(function(){var e=Object(v.b)().settings.menu.recipe,t=Object(E.cb)({branchId:e.branchId}),n=t.data,a=t.loading;return c.a.createElement(g.a,{width:17},c.a.createElement(h.a,{key:e.branchId,onChange:function(t){e.setCategoryFilter(t?t.id:null)},options:function(){if(!n||!n.categories)return[];var e=y.a.groupBy(function(e){return e.categoryType.enum.toString()},n.categories);return Object.keys(e).map(function(t){return{label:Object(w.a)(t),options:e[t]}})}(),isMulti:!1,isClearable:!0,isSearchable:!0,isLoading:a,placeholder:s.b._("Filter by category"),getOptionValue:y.a.prop("id"),getOptionLabel:y.a.propOr("","nameLabel")}))}),j=n(1532),C=n(91),k=n(98),I=n(1452),R=n(2611),x=n(59),T=n(139),S=n(1474),L=n(1533),_=function(){var e=c.a.useState(!1),t=Object(C.a)(e,2),n=t[0],a=t[1],r=Object(x.useRouterContext)().history,i=Object(S.b)().getRecipeCreateRoute,l=function(e){return function(){r.push(i(e))}};return c.a.createElement(c.a.Fragment,null,c.a.createElement(L.a,{onClick:function(e){e.preventDefault(),a(!0)}}),c.a.createElement(I.a,{open:n,onClose:function(){return a(!1)}},c.a.createElement(R.a,null,"Select item type"),c.a.createElement(T.a,{onClick:l(E.u.Main)},c.a.createElement(k.Trans,{id:"Ware"})),c.a.createElement(T.a,{onClick:l(E.u.SideDish)},c.a.createElement(k.Trans,{id:"Sidedish"})),c.a.createElement(T.a,{onClick:l(E.u.Cover)},c.a.createElement(k.Trans,{id:"Cover"}))))},M=n(1492),N=n(1547),D=n(1472),F=n(1462),W=n(19),P=n(1535),B=function(e){var t=e.recipes,n=e.onToggle,a=e.onRemove,r=e.showEditColumn,i=void 0===r||r,l=e.showRemoveColumn,o=void 0!==l&&l,u=e.showVisibilityColumn,d=void 0===u||u,m=e.showTypeColumn,f=void 0!==m&&m,b=e.isLoading,p=void 0!==b&&b,v=e.heightStretch,h={isLoading:p,items:t,heightStretch:void 0!==v&&v,noRowsRenderer:function(){return p?c.a.createElement(N.a,null):c.a.createElement(F.a,null,s.b._("No recipes has been found"))}},g=Object(S.b)().getRecipeEditRoute;return c.a.createElement(D.f,h,i&&c.a.createElement(D.a,{dataKey:"id",width:W.d.ButtonColumnWidthPx,minWidth:W.d.ButtonColumnWidthPx,cellRenderer:Object(D.h)({canQuery:"recipe"},D.b),cellDataGetter:function(e){var t=e.rowData;return g(t.id,t.recipeType.enum)}}),o&&c.a.createElement(D.a,{dataKey:"id",width:W.d.ButtonColumnWidthPx,minWidth:W.d.ButtonColumnWidthPx,cellRenderer:D.c,columnData:{onRemove:a}}),d&&c.a.createElement(D.a,{dataKey:"visible",width:W.d.ButtonColumnWidthPx,minWidth:W.d.ButtonColumnWidthPx,cellRenderer:Object(D.h)({canMutate:"updateRecipe"},D.d),columnData:{onToggle:n}}),f&&c.a.createElement(D.a,{dataKey:"recipeType",width:100,label:s.b._("Type"),cellRenderer:A}),c.a.createElement(D.a,{dataKey:"code",width:100,label:s.b._("Code")}),c.a.createElement(D.a,{dataKey:"nameLabel",width:600,flexGrow:2,label:s.b._("Name"),cellRenderer:D.e,columnData:{noteKey:"internalNote"}}),c.a.createElement(D.a,{dataKey:"prices",width:150,label:s.b._("Delivery sale"),cellRenderer:V,columnData:{priceType:P.a.Delivery}}),c.a.createElement(D.a,{dataKey:"prices",width:150,label:s.b._("Local sale"),cellRenderer:V,columnData:{priceType:P.a.Inhouse}}),c.a.createElement(D.a,{dataKey:"availableAmount",label:s.b._("recipe.list.availableAmount",{},{defaults:"Stock"}),width:100}),c.a.createElement(D.a,{dataKey:"internalNote",label:s.b._("Internal note"),width:200}))};function V(e){var t=e.cellData,n=e.columnData.priceType,a=t.find(y.a.pathEq(["priceType","enum"],n));return a?a.price.formattedValue:c.a.createElement("i",null,s.b._("Not set").toLocaleLowerCase())}function A(e){var t=e.rowData.recipeType.enum;return t===E.u.SideDish?s.b._("Sidedish").toLocaleLowerCase():t===E.u.Cover?s.b._("Cover").toLocaleLowerCase():s.b._("Ware").toLocaleLowerCase()}var z=Object(p.observer)(function(){var e=Object(v.b)().settings,t=Object(E.gb)({branchId:e.branchId,categoryId:e.menu.recipe.categoryFilterId}),n=t.data,a=t.loading,r=Object(p.useComputed)(function(){if(!n||!n.recipes||0===n.recipes.length)return[];var t=Object(M.a)(e.menu.recipe.filterInput);return n.recipes.filter(y.a.cond([[y.a.propSatisfies(t,"code"),y.a.T],[y.a.propSatisfies(t,"nameLabel"),y.a.T]]))},[n&&n.recipes]);return c.a.createElement(B,{recipes:r,onToggle:e.menu.recipe.changeVisibility,isLoading:a,heightStretch:!0,showTypeColumn:!0})});function q(){var e=Object(a.a)(["\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n\n  & .filter {\n    flex: 0 0 auto;\n  }\n\n  & .table {\n    flex: 1 1 0;\n    min-height: 0;\n  }\n"]);return q=function(){return e},e}n.d(t,"b",function(){return H}),n.d(t,"a",function(){return K});var H=i.default.div(q()),K=function(e){return c.a.createElement(m.a,{pageTitle:s.b._("Recipe overview"),useBackButton:!0},c.a.createElement(f.a,{forcePercentHeightInMobile:100},c.a.createElement(o.a,{stretchToParent:!0},c.a.createElement(H,null,c.a.createElement("div",{className:"filter"},c.a.createElement(d.a,{justify:"start",flexWrap:"wrap"},c.a.createElement(u.a,null,c.a.createElement(b.a,{width:20})),c.a.createElement(u.a,null,c.a.createElement(j.a,{modelType:"recipe"})),c.a.createElement(u.a,null,c.a.createElement(O,null))),c.a.createElement(l.a,{mutationName:"createRecipe"},c.a.createElement(_,null))),c.a.createElement("div",{className:"table"},c.a.createElement(z,null))))))}},1537:function(e,t,n){"use strict";var a=n(1560),r=n(0),c=n.n(r),i=n(49),l=Object(i.a)(c.a.createElement("path",{d:"M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"RemoveCircleOutline"),o=n(330),u=n(139);n.d(t,"a",function(){return d});var d=function(e){var t=Object(a.a)({},e);return c.a.createElement(o.a,null,c.a.createElement(u.a,Object.assign({icon:l},t)))}},1541:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var a=n(107),r=n(0),c=n.n(r),i=n(1455),l=n(45),o=n(1471),u=function(e){var t=e.items,n=e.field,r=e.fieldIsPure,u=void 0!==r&&r,d=e.isClearable,s=void 0!==d&&d,m=e.isMulti,f=void 0!==m&&m,b=e.isRequired,p=void 0!==b&&b,v=e.validationName,h=void 0===v?l.b._("Value"):v,g=e.getItemId,E=void 0===g?a.idProp:g;return c.a.createElement(i.Field,{field:n,pure:u,validate:function(e){if(p){if(f&&(!Array.isArray(e)||0===e.length))return l.b._("{validationName} must have at least option selected",{validationName:h});if(!f&&(null===e||void 0===e))return l.b._("{validationName} must have a selection",{validationName:h})}return null}},function(n){return c.a.createElement(o.a,Object.assign({},function(e){var n=e.value;if(f)return{selectedItems:Array.isArray(n)?t.filter(function(e){return n.includes(E(e))}):[],onMultiSelection:function(t){e.setValue(t.map(E)),e.setTouched(!0)}};return{selectedItem:n&&t.find(function(e){return E(e)===n}),onSingleSelection:function(t){e.setValue(t?E(t):null),e.setTouched(!0)}}}(n),{isInvalid:Boolean(n.error),isClearable:s&&!p},e))})}},1548:function(e,t,n){"use strict";n.d(t,"a",function(){return v});var a=n(46),r=n(58),c=n(65),i=n(70),l=n(85),o=n(82),u=n(84),d=n(0),s=n.n(d),m=n(1455),f=n(31),b=n(45),p=n(1458),v=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(r)))).validate=function(e){return n.props.isRequired&&!e?b.b._("{0} must be selected",{0:n.props.validatioName}):null},n}return Object(u.a)(t,e),Object(i.a)(t,[{key:"getControlProps",value:function(e){var t=this.props,n=t.isMulti,a=t.options,r=t.getOptionValue,c=t.defaultValue,i=e.value||c;if(n){var l=Array.isArray(i)?function(e){return i.includes(r(e))}:f.a.F;return{value:Array.isArray(a)?a.filter(l):[],onChange:function(t){e.setValue(t.map(r))}}}return{value:i&&a.find(function(e){return r(e)===i}),onChange:function(t){e.setValue(r(t))}}}},{key:"render",value:function(){var e=this,t=this.props,n=t.field,c=t.fieldIsPure,i=void 0!==c&&c,l=(t.defaultValue,Object(r.a)(t,["field","fieldIsPure","defaultValue"]));return s.a.createElement(m.Field,{field:n,validate:this.validate,pure:i},function(t){return s.a.createElement(p.a,Object.assign({},e.getControlProps(t),{onFocus:function(){return t.setTouched(!0)},styles:{control:function(e){return Boolean(t.error)?Object(a.a)({},e,{borderColor:"red"}):e}}},l))})}}]),t}(s.a.Component);v.defaultProps={validatioName:"Value",getItemId:f.a.prop("id")}},1549:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var a=n(5),r=n(2615),c=n(0),i=n.n(c),l=n(1520),o=n(26),u=n(185);function d(){var e=Object(a.a)(["\n  padding: 1rem 0.4rem;\n  cursor: grab;\n"]);return d=function(){return e},e}var s=o.default.div(d()),m=Object(l.SortableHandle)(function(){return i.a.createElement(s,null,i.a.createElement(u.a,{icon:r.a}))})},1550:function(e,t,n){"use strict";var a=n(46),r=n(58),c=n(0),i=n.n(c),l=n(74),o=n(81);function u(e){return"/"===e.charAt(0)}function d(e,t){for(var n=t,a=n+1,r=e.length;a<r;n+=1,a+=1)e[n]=e[a];e.pop()}var s=function(e,t){void 0===t&&(t="");var n,a=e&&e.split("/")||[],r=t&&t.split("/")||[],c=e&&u(e),i=t&&u(t),l=c||i;if(e&&u(e)?r=a:a.length&&(r.pop(),r=r.concat(a)),!r.length)return"/";if(r.length){var o=r[r.length-1];n="."===o||".."===o||""===o}else n=!1;for(var s=0,m=r.length;m>=0;m--){var f=r[m];"."===f?d(r,m):".."===f?(d(r,m),s++):s&&(d(r,m),s--)}if(!l)for(;s--;s)r.unshift("..");!l||""===r[0]||r[0]&&u(r[0])||r.unshift("");var b=r.join("/");return n&&"/"!==b.substr(-1)&&(b+="/"),b};n.d(t,"a",function(){return m});var m=function(e){var t=e.to,n=e.from,a=Object(r.a)(e,["to","from"]);return i.a.createElement(l.Route,{children:function(e){var r=e.location;return i.a.createElement(o.b,Object.assign({to:f(t,n||"".concat(r.pathname,"/"))},a))}})};function f(e,t){if("string"===typeof e)return s(e,t);var n=s(e.pathname||"",t);return Object(a.a)({},e,{pathname:n})}},1562:function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"b",function(){return i});var a=n(26),r=(n(1563),n(19)),c=a.default.div.attrs(function(e){return{className:i(e.pictogramId)}}).withConfig({displayName:"PictogramDisplay",componentId:"sc-6st3s9-0"})(["&:before{font-size:"," !important;margin-left:0.5rem !important;}"],function(e){var t=e.fontSize,n=void 0===t?2:t,a=e.fontSizeUnit,c=void 0===a?r.d.DefaultSizeUnit:a;return"".concat(n).concat(c)});function i(e){return"flaticon-".concat(e)}},1563:function(e,t,n){},1568:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var a=n(58),r=(n(1534),n(0)),c=n.n(r),i=n(1495);function l(e){var t=e.items,n=e.renderItem,r=e.heightStretch,l=void 0!==r&&r,o=e.rowHeight,u=void 0===o?60:o,d=Object(a.a)(e,["items","renderItem","heightStretch","rowHeight"]),s=c.a.useCallback(function(e){var a=e.key,r=e.style,i=e.index;return c.a.createElement("div",{key:a,style:r},n(t[i],i))},[n,t]),m=function(e,n){return c.a.createElement(i.g,Object.assign({width:e,height:n,headerHeight:50,rowHeight:u,rowCount:t?t.length:0,rowRenderer:s,style:{outline:"none"}},d))};return l?c.a.createElement(i.a,null,function(e){var t=e.width,n=e.height;return m(t,n)}):c.a.createElement(i.i,{scrollElement:window},function(e){var t=e.height;return c.a.createElement(i.a,{disableHeight:!0},function(e){var n=e.width;return m(n,t)})})}},2577:function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(49);t.a=Object(c.a)(r.a.createElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"Search")},2578:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),r=n(2579);t.isApolloError=function(e){return e.hasOwnProperty("graphQLErrors")};var c=function(e){var t="";return r.isNonEmptyArray(e.graphQLErrors)&&e.graphQLErrors.forEach(function(e){var n=e?e.message:"Error message not found.";t+="GraphQL error: "+n+"\n"}),e.networkError&&(t+="Network error: "+e.networkError.message+"\n"),t=t.replace(/\n$/,"")},i=function(e){function t(n){var a=n.graphQLErrors,r=n.networkError,i=n.errorMessage,l=n.extraInfo,o=e.call(this,i)||this;return o.graphQLErrors=a||[],o.networkError=r||null,o.message=i||c(o),o.extraInfo=l,o.__proto__=t.prototype,o}return a.__extends(t,e),t}(Error);t.ApolloError=i},2579:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0}},2616:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(74),i=n(208),l=n(127),o=n(1474),u=n(5),d=n(26),s=n(203),m=n(1467),f=n(1461),b=n(1469),p=n(41),v=n(45),h=n(204),g=n(1460),E=n(1488),y=n(25),w=n.n(y),O=n(36),j=n(91),C=n(62),k=n(1472),I=n(1462),R=n(57),x=n(19),T=n(46),S=n(1549),L=n(58),_=n(205),M=n(65),N=n(70),D=n(85),F=n(82),W=n(84),P=n(1520),B=Object(P.SortableElement)(function(e){var t=e.columns,n=e.style,a=e.className;return r.a.createElement("div",{style:n,className:a},t)}),V=Object(P.SortableContainer)(k.f),A=function(e){function t(){var e,n;Object(M.a)(this,t);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(n=Object(D.a)(this,(e=Object(F.a)(t)).call.apply(e,[this].concat(c)))).state={sortedItems:n.props.items},n.rowRenderer=function(e){return r.a.createElement(B,e)},n.onHandleSorting=function(){var e=Object(O.a)(w.a.mark(function e(t){var a,r,c,i,l;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.newIndex,r=t.oldIndex,a!==r){e.next=3;break}return e.abrupt("return");case 3:if(c=Object(_.a)(n.state.sortedItems),i=Object(P.arrayMove)(n.state.sortedItems,r,a),n.setState({sortedItems:i}),!n.props.onSort){e.next=15;break}if(l=n.props.onSort({item:c[r],items:i,offset:a-r,newIndex:a,oldIndex:r}),e.t0=l,!e.t0){e.next=13;break}return e.next=12,l;case 12:e.t0=!e.sent;case 13:if(!e.t0){e.next=15;break}n.setState({sortedItems:c});case 15:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n}return Object(W.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.items,Object(L.a)(e,["items"]));return r.a.createElement(V,Object.assign({lockAxis:"y",useDragHandle:!0,onSortEnd:this.onHandleSorting,rowRenderer:this.rowRenderer},t,{items:this.state.sortedItems}))}}]),t}(r.a.PureComponent);A.getDerivedStateFromProps=function(e){return{sortedItems:e.items}};var z=function(e){var t=e.categories,n=e.children,a=e.onToggle,c=e.onRemove,i=e.onSort,l=e.showEditColumn,u=void 0===l||l,d=e.showRemoveColumn,s=void 0!==d&&d,m=e.showVisibilityColumn,f=void 0!==m&&m,b=e.showHeader,p=void 0===b||b,h=e.isSortable,g=void 0!==h&&h,E=e.isLoading,y=void 0!==E&&E,w=e.heightStretch,O=void 0!==w&&w,j=e.fullHeight,C=void 0!==j&&j,I=e.noRowsDisplay,R=void 0===I?r.a.createElement(k.g,{text:v.b._("No recipes in category")}):I,L={isLoading:y,items:t,disableHeader:!p,heightStretch:O,fullHeight:C,noRowsRenderer:function(){return R}},_=Object(o.b)().getCategoryEditRoute,M=[u&&r.a.createElement(k.a,{dataKey:"id",width:x.d.ButtonColumnWidthPx,minWidth:x.d.ButtonColumnWidthPx,cellRenderer:Object(k.h)({canQuery:"wareCategory"},k.b),cellDataGetter:function(e){var t=e.rowData;return _(t.id,t.categoryType.enum)}}),s&&r.a.createElement(k.a,{dataKey:"id",width:x.d.ButtonColumnWidthPx,minWidth:x.d.ButtonColumnWidthPx,cellRenderer:k.c,columnData:{onRemove:c}}),f&&r.a.createElement(k.a,{dataKey:"visible",width:x.d.ButtonColumnWidthPx,minWidth:x.d.ButtonColumnWidthPx,cellRenderer:Object(k.h)({canMutate:"updateWareCategory"},k.d),columnData:{onToggle:a}}),r.a.createElement(k.a,{dataKey:"nameLabel",width:300,label:v.b._("Name"),cellRenderer:k.e,columnData:{noteKey:"internalNoteLabel"}}),r.a.createElement(k.a,{dataKey:"countRecipes",label:v.b._("Recipe count"),width:100,cellRenderer:function(e){var t=e.cellData;return"".concat(t," ").concat(v.b._("Recipes").toLocaleLowerCase())}}),n,g&&r.a.createElement(k.a,{dataKey:"id",width:50,cellRenderer:function(){return r.a.createElement(S.a,null)}})];return g?r.a.createElement.apply(r.a,[A,Object(T.a)({onSort:i},L)].concat(M)):r.a.createElement.apply(r.a,[k.f,L].concat(M))},q=n(1533);function H(){var e=Object(u.a)(["\n  .origins span {\n    display: inline-block;\n    margin: 0.2rem;\n    padding: 0.2rem;\n    background-color: ",";\n  }\n"]);return H=function(){return e},e}var K=d.default.div(H(),x.a.greyLight),U=Object(C.observer)(function(e){var t=e.headline,n=e.subHeadline,a=void 0!==n&&n,c=e.categoryType,i=Object(R.b)().settings,l=Object(p.db)({branchId:i.branchId,categoryType:c}),u=l.data,d=l.loading,s=l.updateQuery,b=l.refetch,v=Object(p.eb)().data,h=r.a.useMemo(function(){return v&&v.origins?v.origins.reduce(function(e,t){return e[t.enum]=t.code,e},{}):{}},[v]),g=r.a.useCallback(function(e){var t=e.cellData;return t.sort(),t.map(function(e){return r.a.createElement("span",{key:e},h[e])})},[h]),E=Object(o.b)().getCategoryCreateRoute,y=Object(p.K)(),C=Object(j.a)(y,1)[0],x=d?[]:u.categories;return r.a.createElement(K,null,r.a.createElement(f.a,null,r.a.createElement(m.a,{widthGrowIndex:1},r.a.createElement(I.a,null,t),a&&r.a.createElement(I.a,{size:"smaller"},a)),r.a.createElement(m.a,{fixedWidth:!0},r.a.createElement(q.a,{routeTo:E(c)}))),r.a.createElement(z,{isLoading:d,categories:x,onToggle:function(e,t){C({categoryId:e,visible:t},{optimisticResponse:{updateWareCategory:{__typename:"WareCategory",id:e,visible:t}}})},isSortable:!0,showHeader:!1,fullHeight:!0,showVisibilityColumn:!0,onSort:function(){var e=Object(O.a)(w.a.mark(function e(t){var n,a,r,c;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.item,a=t.items,r=t.offset,s(function(){return{categories:a}}),e.next=4,i.menu.category.sortCategory(n.id,r);case 4:if(!(c=e.sent)){e.next=8;break}return e.next=8,b();case 8:return e.abrupt("return",c);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},r.a.createElement(k.a,{dataKey:"origins",width:300,className:"origins",cellRenderer:g,style:{fontSize:"0.8rem"}})))}),Q=n(98),G=n(139);function $(){var e=Object(u.a)(["\n  white-space: nowrap;\n  margin-left: 2rem;\n  & a {\n    text-decoration: none;\n    color: ",";\n    padding: 1rem;\n  }\n"]);return $=function(){return e},e}var J=Object(d.default)(G.a)($(),x.a.black),X=Object(C.observer)(function(){var e=Object(R.b)().settings,t=Object(p.fb)({branchId:e.branchId}),n=t.loading,a=t.data;return n||!(a&&a.companyBranch&&a.companyBranch.foodMenuUrl)?null:r.a.createElement(J,{color:x.a.greyMiddle},r.a.createElement("a",{href:a.companyBranch.foodMenuUrl,target:"_blank",rel:"noopener noreferrer"},r.a.createElement(Q.Trans,{id:"Menu codes manual"})))});function Y(){var e=Object(u.a)(["\n  height: calc(100% - 3.5rem);\n  padding-top: 1rem;\n  overflow-y: scroll;\n  overflow-x: hidden;\n  -webkit-overflow-scrolling: touch;\n"]);return Y=function(){return e},e}var Z=d.default.div(Y()),ee=function(){return r.a.createElement(h.a,{pageTitle:v.b._("Category overview"),useBackButton:!0},r.a.createElement(g.a,{forcePercentHeightInMobile:100},r.a.createElement(s.a,{stretchToParent:!0},r.a.createElement(f.a,{justify:"start"},r.a.createElement(m.a,null,r.a.createElement(E.a,{width:20})),r.a.createElement(m.a,null,r.a.createElement(X,null))),r.a.createElement(Z,null,r.a.createElement(U,{categoryType:p.u.Main,headline:v.b._("Category of recipes")}),r.a.createElement(b.a,{size:1.5}),r.a.createElement(U,{categoryType:p.u.SideDish,headline:v.b._("Category of sidedish")}),r.a.createElement(b.a,{size:1.5}),r.a.createElement(U,{categoryType:p.u.Cover,headline:v.b._("Category of covers")})))))},te=n(1455),ne=n(1457);function ae(){var e=Object(u.a)(["\n  position: fixed;\n  z-index: 500;\n  right: 0;\n  top: 0rem;\n  width: 10rem;\n  opacity: 0.96;\n  background: ",";\n  border-radius: ",";\n"]);return ae=function(){return e},e}var re=d.default.div(ae(),x.a.black,x.c.Button),ce=function(e){var t=e.type,n=e.isMain,a=e.isSideDish,c=e.isCover,i=e.children;return!0===n&&t===p.u.Main||!0===a&&t===p.u.SideDish||!0===c&&t===p.u.Cover?r.a.createElement(r.a.Fragment,null,i):null},ie=n(1531),le=n(1504),oe=n(1503),ue=function(e){var t=e.isCreate,n=void 0!==t&&t;return r.a.createElement(te.FormApi,{render:function(e){return r.a.createElement(oe.a,{id:"form-submit"},function(e,t){if(!Object(le.a)(e))return v.b._("Fix form errors");return t?v.b._("Create"):v.b._("Save")}(e,n))}})};var de=n(1473);function se(){var e=Object(u.a)(["\n  flex: none;\n  margin-right: 1rem;\n"]);return se=function(){return e},e}function me(){var e=Object(u.a)(["\n  margin: 0.6rem;\n  display: flex;\n"]);return me=function(){return e},e}var fe=d.default.form(me()),be=d.default.div(se()),pe=n(1546),ve=n(141),he=n(352),ge=function(e){var t=e.observe,n=e.render;return r.a.createElement(he.a,{observe:t,render:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){var t=e.settings;return n(t)})})},Ee=n(1490),ye=n(1562),we=n(1458),Oe=n(31),je=function(e){var t=e.field;return r.a.createElement(te.Field,{field:t,pure:!0},function(e){return r.a.createElement(we.a,{value:e.value?{pictogram:e.value}:null,onChange:function(t){t&&e.setValue(t.pictogram)},options:Ee.pictograms.map(function(e){return{pictogram:e}}),getOptionValue:Oe.a.prop("pictogram"),formatOptionLabel:function(e){var t=e.pictogram;return r.a.createElement(ye.a,{pictogramId:t,fontSize:2})},components:{SingleValue:function(e){var t=e.data;return r.a.createElement(ye.a,{pictogramId:t.pictogram,fontSize:4})}},styles:{container:function(e){return Object(T.a)({},e,{width:"8rem"})},menuList:function(e){return Object(T.a)({},e,{maxHeight:"35rem"})}},isClearable:!1,isSearchable:!1,minWidth:8})})},Ce=n(1513),ke=function(e){var t=e.confirmText,n=e.onDelete;return r.a.createElement(te.Field,{field:"id"},function(e){return"NEW"!==e.value&&r.a.createElement(c.Route,null,function(a){var c=a.history;return r.a.createElement(Ce.a,{confirmText:t,onDelete:Object(O.a)(w.a.mark(function t(){return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(e.value);case 2:c.goBack();case 3:case"end":return t.stop()}},t)}))})})})},Ie=n(1463),Re=n(1456),xe=function(e){var t=e.field,n=void 0===t?"internalNote":t,a=(e.icon,e.label),c=void 0===a?v.b._("Internal note").toLocaleLowerCase():a,i=Object(L.a)(e,["field","icon","label"]);return r.a.createElement(Re.a,{label:c,labelWidth:7},r.a.createElement(Ie.a,Object.assign({field:n,inputFullWidth:!0},i)))},Te=n(2613),Se=function(e){var t=e.field,n=void 0===t?"nameLabel":t,a=Object(L.a)(e,["field"]);return r.a.createElement(Re.a,{icon:Te.a,labelWidth:7},r.a.createElement(Ie.a,Object.assign({field:n,inputFullWidth:!0,isRequired:!0,validatioName:v.b._("Name")},a)))},Le=n(107),_e=n(1548),Me=function(){var e=Object(p.eb)(),t=e.data,n=e.loading;return r.a.createElement(Re.a,{label:v.b._("cat. origins"),labelWidth:7},r.a.createElement(_e.a,{field:"origins",isMulti:!0,isLoading:n,isSearchable:!0,options:n?[]:t.origins,getOptionLabel:Le.RM.prop("code"),getOptionValue:Le.RM.prop("enum")}))},Ne=function(e){var t=e.categoryType;return r.a.createElement(fe,null,r.a.createElement(be,null,r.a.createElement(ve.a,{width:30},r.a.createElement(Se,{placeholder:v.b._("Category name"),inputFullWidth:!0})),r.a.createElement(ve.a,{width:30},r.a.createElement(xe,{placeholder:v.b._("Category internal note")})),r.a.createElement(ve.a,{width:30},r.a.createElement(Me,null)),r.a.createElement(pe.a,{field:"visible",label:v.b._("To show this category")})),t===p.u.Main?r.a.createElement(be,null,r.a.createElement(je,{field:"pictogram"})):null,r.a.createElement(de.a,{position:"BottomRight"},r.a.createElement(ge,{render:function(e){var n=e.menu;return r.a.createElement(ke,{confirmText:v.b._("Remove this category?"),onDelete:function(e){return n.category.deleteCategory(e,t)}})}})))},De=n(2610),Fe=n(2578);function We(e){var t=e.shouldLoad,n=e.loader,c=Object(L.a)(e,["shouldLoad","loader"]),i=Object(a.useState)(null),l=Object(j.a)(i,2),o=l[0],u=l[1];return Object(a.useEffect)(function(){t&&n().then(u)},[n,t]),r.a.createElement(te.Form,Object.assign({values:o},c))}var Pe=function(e){var t=e.render;return r.a.createElement(c.Route,null,function(e){var n=e.history;return t?t(function(){return n.goBack()}):(n.goBack(),null)})},Be=n(43);function Ve(){var e=Object(u.a)(["\n  color: red;\n  padding: 1rem;\n  max-width: 30rem;\n  overflow-wrap: break-word;\n"]);return Ve=function(){return e},e}var Ae=d.default.div(Ve()),ze=function(e){function t(){var e,n;Object(M.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(D.a)(this,(e=Object(F.a)(t)).call.apply(e,[this].concat(r)))).state={submitError:null,validationErrors:null},n}return Object(W.a)(t,e),Object(N.a)(t,[{key:"renderErrors",value:function(){var e=this.state,t=e.submitError,n=e.validationErrors;return t?this.renderSubmitError(t):n?this.renderValidationErrors(n):null}},{key:"renderSubmitError",value:function(e){var t=[v.b._("Unexpected error while sending form. Out team was notified about the issue.")];if(Object(Fe.isApolloError)(e)){var n=Oe.a.propEq("showToUser",!0),a=e.graphQLErrors.filter(n).map(Oe.a.prop("message"));a.length&&(t=a)}return this.renderPopover(t)}},{key:"renderValidationErrors",value:function(e){return null}},{key:"renderPopover",value:function(e){var t=this;return r.a.createElement(De.a,{open:!0,anchorEl:function(){return document.getElementById("submit-button")},onClose:function(){return t.setState({submitError:null,validationErrors:null})},anchorOrigin:{vertical:"bottom",horizontal:"center"}},e.map(function(e,t){return r.a.createElement(Ae,{key:t},e)}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.isCreate,a=t.onCreate,c=t.onUpdate,i=t.getDefaultValues,l=t.loadValues,o=t.loadDefaults,u=t.children;return r.a.createElement(Pe,{render:function(t){return r.a.createElement(We,{shouldLoad:!0,defaultValues:i(),loader:Object(O.a)(w.a.mark(function e(){var t,a,r;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i(),!o){e.next=6;break}return e.next=4,o();case 4:a=e.sent,Object.assign(t,a);case 6:if(!n){e.next=8;break}return e.abrupt("return",t);case 8:return e.next=10,l();case 10:return r=e.sent,e.abrupt("return",Object.assign({},t,r));case 12:case"end":return e.stop()}},e)})),onChange:function(e){return Object(Be.d)("new values",e.values)},onSubmit:function(){var e=Object(O.a)(w.a.mark(function e(r){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=5;break}return e.next=3,a(r);case 3:e.next=7;break;case 5:return e.next=7,c(r);case 7:t();case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),onSubmitFailure:function(t,n){e.setState({validationErrors:t,submitError:n}),Object.keys(t).length&&Object(Be.c)("validation errors",t),n&&Object(Be.c)("submit error",n)}},u,e.renderErrors())}})}}]),t}(r.a.Component);function qe(){return Object(R.b)().settings.menu}var He=function(e){var t=e.categoryId,n=e.categoryType,a=e.children,c=qe();return r.a.createElement(ze,{isCreate:null===t,onCreate:function(e){return c.category.createCategory(e,n)},onUpdate:function(e){return c.category.updateCategory(e,n)},getDefaultValues:function(){return function(e){return{id:"NEW",visible:!0,internalNoteLabel:"",pictogram:"",nameLabel:"",minCount:0,maxCount:0,categoryType:{enum:e},recipes:[],origins:[]}}(n)},loadValues:Object(O.a)(w.a.mark(function e(){var n,a;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.client.query({query:p.r,variables:{categoryId:t},fetchPolicy:"no-cache"});case 2:return n=e.sent,a=n.data,e.abrupt("return",Object(T.a)({},a.category,{origins:a.category.origins}));case 5:case"end":return e.stop()}},e)}))},a)};var Ke=n(1568),Ue=n(1519),Qe=n(1537),Ge=n(257),$e=n(1535),Je=n(49),Xe=Object(Je.a)(r.a.createElement(r.a.Fragment,null,r.a.createElement("path",{d:"M15 4c-4.42 0-8 3.58-8 8s3.58 8 8 8 8-3.58 8-8-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6z"}),r.a.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"}),r.a.createElement("path",{d:"M3 12c0-2.61 1.67-4.83 4-5.65V4.26C3.55 5.15 1 8.27 1 12s2.55 6.85 6 7.74v-2.09c-2.33-.82-4-3.04-4-5.65z"})),"Toll"),Ye=n(1489),Ze=n.n(Ye),et=n(348),tt=function(e){return void 0===e||Object(Ye.isEmpty)(e+"")||!Object(et.c)(e+"")?v.b._("Price must be a number"):null},nt=function(e){var t=e.field,n=void 0===t?"price.value":t,a=Object(L.a)(e,["field"]);return r.a.createElement(Re.a,{icon:Xe},r.a.createElement(ve.a,{width:5},r.a.createElement(Ie.a,Object.assign({field:n,inputFullWidth:!0,validate:tt},a))))},at=n(209),rt=n(1541),ct=n(6),it=n.n(ct),lt=n(210);function ot(){var e=Object(u.a)(["\n  query GVats($branchId: ID!) {\n    vats(companyBranch: $branchId) {\n      id\n      vat\n    }\n  }\n"]);return ot=function(){return e},e}var ut=it()(ot()),dt=Object(lt.a)(ut);function st(){var e=Object(u.a)(["\n  margin-left: 5rem;\n"]);return st=function(){return e},e}var mt=Object(at.a)(st()),ft=function(e){var t=e.field,n=void 0===t?"price.vat":t,a=Object(R.b)().settings;return Object(C.useObserver)(function(){return r.a.createElement(dt,{variables:{branchId:a.branchId},fetchPolicy:"cache-and-network",renderLoading:!1,render:function(e){var t=e.vats;return r.a.createElement(Re.a,{className:mt,label:"".concat(v.b._("VAT"),":")},t&&r.a.createElement(rt.a,{field:n,items:t,formatItem:function(e){var t=e.vat;return"".concat(t,"%")},isRequired:!0,validationName:v.b._("VAT")}))}})})};function bt(){var e=Object(u.a)(["\n  padding: 0.5rem;\n"]);return bt=function(){return e},e}var pt=Object(d.default)(function(e){var t=e.field,n=e.className;return r.a.createElement(te.Field,{field:t},function(e){return r.a.createElement("span",{className:n},e.value)})})(bt()),vt=function(e){var t=e.priceType,n=e.label;return r.a.createElement(r.a.Fragment,null,r.a.createElement(I.a,null,n),r.a.createElement(te.NestedField,{field:["prices",t]},r.a.createElement(f.a,{justify:"flex-start"},r.a.createElement(nt,{field:"value"}),r.a.createElement(pt,{field:"currencyCode"}),r.a.createElement(ft,{field:"vatId"}))))},ht=n(59);function gt(e){var t=e.onAdd,n=e.addLabel,c=void 0===n?v.b._("Add"):n,i=e.addButtonText,l=void 0===i?v.b._("Add"):i,o=Object(L.a)(e,["onAdd","addLabel","addButtonText"]),u=Object(ht.useStateRef)(null),d=Object(j.a)(u,2),s=d[0],b=d[1],p=Object(a.useCallback)(function(){var e=s();null!==e&&(t(e),b(null))},[s,t,b]),h=Object(a.useCallback)(function(e){"Enter"===e.key&&p()},[p]),g=Object(a.useCallback)(function(e){b(e||null)},[b]);return r.a.createElement(f.a,{justify:"flex-start"},r.a.createElement(m.a,{fixedWidth:!0,width:"4rem",margin:"auto 0"},c),r.a.createElement(m.a,{fixedWidth:!0,width:"20rem",margin:"auto 0"},r.a.createElement(we.a,Object.assign({value:s(),onChange:g,onKeyDown:h,isMulti:!1,isClearable:!1,getOptionValue:Oe.a.prop("id"),getOptionLabel:Oe.a.propOr("","nameLabel")},o))),r.a.createElement(m.a,{fixedWidth:!0,width:"10rem",margin:"auto 0"},r.a.createElement(G.a,{text:l,disabled:null===s(),onClick:p})))}var Et=function(e){var t=e.recipes,n=e.onRemove;return r.a.createElement(k.f,{items:t,disableHeader:!0},r.a.createElement(k.a,{dataKey:"associatedRecipe",width:x.d.ButtonColumnWidthPx,minWidth:x.d.ButtonColumnWidthPx,cellRenderer:function(e){var t=e.cellData;return r.a.createElement(Qe.a,{onClick:function(){return n(t)}})}}),r.a.createElement(k.a,{dataKey:"nameLabel",width:300,label:v.b._("Name"),cellRenderer:k.e,columnData:{noteKey:"internalNote"}}),r.a.createElement(k.a,{dataKey:"formattedPrice",width:100,label:v.b._("Price")}))},yt=n(349),wt=function(e){var t=e.priceType,n=e.recipeId;return r.a.createElement(te.Field,{field:"associatedRecipes"},function(e){var a=Oe.a.filter(Oe.a.propEq("warePriceType",t),e.value),c=Oe.a.reject(function(e){return e.id===n||(t=e.id,a.some(Oe.a.propEq("associatedRecipe",t)));var t}),i=function(n){e.setValue(e.value.concat({warePriceType:t,associatedRecipe:n.id,nameLabel:n.nameLabel,formattedPrice:"?"}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Et,{recipes:a,onRemove:function(n){e.setValue(Oe.a.reject(function(e){var a=e.associatedRecipe,r=e.warePriceType;return a===n&&r===t},e.value))}}),r.a.createElement(ge,{render:function(e){return r.a.createElement(yt.c,{variables:{branchId:e.branchId},fetchPolicy:"cache-and-network",render:function(e){var t=e.recipes;return r.a.createElement(gt,{options:c(t),onAdd:i})}})}}),r.a.createElement(b.a,null))})},Ot=[{priceType:p.v.Delivery,label:Object(Ge.i18nMark)("Delivery sale")},{priceType:p.v.Inhouse,label:Object(Ge.i18nMark)("Local sale")}],jt=function(e){var t=e.recipeType,n=e.recipeId;return r.a.createElement(r.a.Fragment,null,Ot.map(function(e){var c=e.priceType,i=e.label;return r.a.createElement(a.Fragment,{key:c},r.a.createElement(vt,{priceType:c,label:v.b._(i)}),r.a.createElement(b.a,null),t===$e.b.Main&&r.a.createElement(wt,{priceType:c,recipeId:n}))}))},Ct=Object(C.observer)(function(e){var t=e.categoryType,n=e.filterRecipes,a=e.onAdd,c=Object(R.b)().settings,i=Object(p.gb)({branchId:c.branchId,categoryType:t}),l=i.data,o=i.loading;return r.a.createElement(gt,{isLoading:o,options:o?[]:n(l.recipes),onAdd:a})});function kt(){var e=Object(u.a)(["\n  cursor: move;\n"]);return kt=function(){return e},e}function It(){var e=Object(u.a)(["\n  display: grid;\n  grid-gap: 1rem;\n  grid-template-columns: ","px 100px 3fr 1fr 1fr 50px;\n"]);return It=function(){return e},e}function Rt(){var e=Object(u.a)(["\n  flex: 1 1 0;\n  margin: 1rem 0 0 1rem;\n"]);return Rt=function(){return e},e}function xt(){var e=Object(u.a)(["\n  flex: 0 0 auto;\n"]);return xt=function(){return e},e}function Tt(){var e=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  height: calc(100% - 2rem);\n  width: 100%;\n"]);return Tt=function(){return e},e}var St=d.default.div(Tt()),Lt=d.default.div(xt()),_t=d.default.div(Rt()),Mt=Object(P.SortableContainer)(_t),Nt=d.default.div(It(),x.d.ButtonColumnWidthPx),Dt=d.default.div(kt()),Ft=Object(P.SortableElement)(function(e){var t=e.recipe,n=e.onRemove,a=Ot.map(function(e){var n=e.priceType,a=e.label,c=t.prices.find(Oe.a.pathEq(["priceType","enum"],n));return r.a.createElement(Dt,{key:n},r.a.createElement(Ue.a,null,v.b._(a)),c?c.price.formattedValue:r.a.createElement("i",null,v.b._("Not set").toLocaleLowerCase()))});return r.a.createElement(Nt,null,r.a.createElement("div",null,r.a.createElement(Qe.a,{onClick:n})),r.a.createElement(Dt,null,t.code),r.a.createElement(Dt,null,t.nameLabel,r.a.createElement(Ue.a,null,t.internalNote)),a,r.a.createElement(S.a,null))}),Wt=function(e){var t=e.categoryType;return r.a.createElement(te.Field,{field:"recipes"},function(e){var n=e.value,a=function(){var t=Object(O.a)(w.a.mark(function t(a){var r,c,i;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=a.newIndex,c=a.oldIndex,r!==c){t.next=3;break}return t.abrupt("return");case 3:i=Object(P.arrayMove)(n,c,r),e.setValue(i);case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(St,null,r.a.createElement(Lt,null,r.a.createElement(Ct,{categoryType:t,filterRecipes:Oe.a.without(e.value),onAdd:function(t){return e.setValue(e.value.concat(t))}})),r.a.createElement(Mt,{lockAxis:"y",lockToContainerEdges:!0,onSortEnd:a},r.a.createElement(Ke.a,{items:e.value,heightStretch:!0,rowHeight:60,renderItem:function(t,n){return r.a.createElement(Ft,{recipe:t,onRemove:function(){e.setValue(Oe.a.reject(Oe.a.propEq("id",t.id),e.value))},index:n})},rowCount:e.value.length})))})},Pt=n(197),Bt=n.n(Pt),Vt=n(1471),At=n(1459),zt=n(1566);function qt(){var e=Object(u.a)(["\n  display: flex;\n  align-items: center;\n  & > label {\n    min-width: 5rem;\n  }\n  & > * {\n    margin: 0.2rem 0.5rem;\n  }\n  input.count {\n    font-size: 1.5rem;\n    line-height: 1.5rem;\n    text-align: center;\n  }\n"]);return qt=function(){return e},e}var Ht=d.default.div(qt()),Kt=function(e){var t=e.count,n=e.label,a=e.enabled,c=e.onChange,i=e.id,l=r.a.useRef(t);return r.a.createElement(Ht,null,r.a.createElement("label",{htmlFor:i},n),r.a.createElement(ve.a,{width:3},r.a.createElement(At.a,{id:i,value:0===t?"":t,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){e.target.validity.valid&&c(Number.parseInt(e.target.value,10))}),onFocus:function(e){e.target.select()},disabled:0===t||!a,inputFullWidth:!0,type:"tel",pattern:"^[1-9]\\d*$",className:"count"})),r.a.createElement(ve.a,{width:4},r.a.createElement(G.a,{disabled:!a||t<=0,onClick:function(){return c(t-1)}},"\u2796")),r.a.createElement(ve.a,{width:4},r.a.createElement(G.a,{disabled:!a,onClick:function(){return c(t+1)}},"\u2795")),r.a.createElement("div",null,r.a.createElement(zt.a,null,r.a.createElement("input",{type:"checkbox",id:"".concat(i,"-nolimit"),checked:0===t,disabled:!a,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){0===t?c(l.current||1):(l.current=t,c(0))})}),r.a.createElement("label",{htmlFor:"".concat(i,"-nolimit")},r.a.createElement(Q.Trans,{id:"Unlimited"})))))},Ut=function(){return{noLimit:{label:v.b._("No limitation"),min:0,max:0},optional:{label:v.b._("One at most"),min:0,max:1},required:{label:v.b._("One at least"),min:1,max:0},onlyOne:{label:v.b._("Exactly one"),min:1,max:1},custom:{label:v.b._("Custom range")}}},Qt=function(e){var t=e.formApi,n=r.a.useMemo(Ut,[]),a=r.a.useState("noLimit"),c=Object(j.a)(a,2),i=c[0],l=c[1],o=t.getValue("minCount"),u=t.getValue("maxCount");r.a.useEffect(function(){if("custom"!==i){var e=Bt.a.findKey(n,function(e){var t=e.min,n=e.max;return t===o&&n===u});e&&l(e)}},[i,o,u,n]);var d=function(e){return t.setValue("minCount",e)},s=function(e){return t.setValue("maxCount",e)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Vt.a,{items:Object.keys(n),formatItem:function(e){return n[e].label},onSingleSelection:function(e){if(e){l(e);var t=n[e];d(t.min||0),s(t.max||0)}},selectedItem:i}),r.a.createElement(Kt,{id:"minCount",count:o,label:r.a.createElement(Q.Trans,{id:"Minimum"}),enabled:"custom"===i,onChange:d}),r.a.createElement(Kt,{id:"maxCount",count:u,label:r.a.createElement(Q.Trans,{id:"Maximum"}),enabled:"custom"===i,onChange:s}))},Gt=d.default.div.withConfig({displayName:"MenuCategoryPage__FormContainer",componentId:"sc-154ix5u-0"})(["display:flex;flex-direction:column;height:100%;width:100%;"]),$t=d.default.div.withConfig({displayName:"MenuCategoryPage__FormFixedRow",componentId:"sc-154ix5u-1"})(["flex:0 0 8rem;"]),Jt=d.default.div.withConfig({displayName:"MenuCategoryPage__FormStretchedRow",componentId:"sc-154ix5u-2"})(["flex:1 1 0;min-height:0;position:relative;"]),Xt=function(e){var t=e.match.params.categoryId,n=Object(o.b)(),a=n.itemType,i=n.getCategoryListRoute;return null===a?r.a.createElement(c.Redirect,{to:i()}):r.a.createElement(He,{categoryId:t,categoryType:a},r.a.createElement(h.a,{pageTitle:Object(ie.a)(a),hideLogoutWidget:!0,useBackButton:!0},r.a.createElement(g.a,{forcePercentHeightInMobile:100},r.a.createElement(Gt,null,r.a.createElement($t,null,r.a.createElement(s.a,null,r.a.createElement(Ne,{categoryType:a}))),r.a.createElement(ce,{isSideDish:!0,type:a},r.a.createElement($t,null,r.a.createElement(s.a,null,r.a.createElement(I.a,null,r.a.createElement(Q.Trans,{id:"Required amounts of recipes to be picked"})),r.a.createElement(te.FormApi,{component:Qt})))),r.a.createElement(Jt,null,r.a.createElement(s.a,{stretchToParent:!0},r.a.createElement(I.a,null,r.a.createElement(Q.Trans,{id:"Recipes assigned to this category"})),r.a.createElement(Wt,{categoryType:a}))))),r.a.createElement(re,null,r.a.createElement(ne.a,{mutationName:null===t?"createWareCategory":"updateWareCategory"},r.a.createElement(ue,{isCreate:null===t})))))},Yt=n(1536),Zt=n(334),en=Object(C.observer)(function(e){var t=e.categoryType,n=e.currentCategories,a=e.addButtonText,c=e.onAdd,i=Object(R.b)().settings,l=Object(p.db)({branchId:i.branchId,categoryType:t}),o=l.data,u=l.loading,d=o&&o.categories||[];return r.a.createElement(gt,{isLoading:u,options:Oe.a.without(n,d),addButtonText:a,onAdd:c})}),tn=function(e){var t=e.categoryType,n=e.addButtonText,a=e.noRowsText,c=e.field;return r.a.createElement(te.Field,{field:c},function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(z,{categories:e.value,showRemoveColumn:!0,showEditColumn:!1,showHeader:!1,onRemove:function(t){return e.setValue(Oe.a.reject(Oe.a.propEq("id",t),e.value))},noRowsDisplay:r.a.createElement(k.g,{text:a})}),r.a.createElement(en,{addButtonText:n,categoryType:t,currentCategories:e.value,onAdd:function(t){return e.setValue(e.value.concat(t))}}))})},nn=Object(Je.a)(r.a.createElement(r.a.Fragment,null,r.a.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"}),r.a.createElement("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),"ErrorOutline"),an=function(e){var t=e.field,n=void 0===t?"code":t,a=(e.icon,e.isRequired,Object(L.a)(e,["field","icon","isRequired"]));return r.a.createElement(Re.a,{label:v.b._("Code").toLocaleLowerCase(),labelWidth:7},r.a.createElement(ve.a,{width:9},r.a.createElement(Ie.a,Object.assign({field:n,inputFullWidth:!0,isRequired:!0,validatioName:v.b._("Code")},a))))},rn=function(e){var t=e.field,n=void 0===t?"descriptionLabel":t,a=Object(L.a)(e,["field"]);return r.a.createElement(Re.a,{label:v.b._("Public note").toLocaleLowerCase(),labelWidth:7},r.a.createElement(Ie.a,Object.assign({field:n,inputFullWidth:!0},a)))};function cn(){var e=Object(u.a)(["\n  query GAllergens {\n    allergens {\n      ...FMenuAllergen\n    }\n  }\n  ","\n"]);return cn=function(){return e},e}var ln=it()(cn(),p.d),on=Object(lt.a)(ln);function un(){var e=Object(u.a)(["\n    color: ",";\n    background-color: ",";\n  "]);return un=function(){return e},e}function dn(){var e=Object(u.a)(["\n  float: left;\n  width: 2.3rem;\n  height: 2.3rem;\n  border: 1px solid ",";\n  margin: 0.3rem 0.6rem 0.3rem ",";\n  font-size: 1.5rem;\n  text-align: center;\n  vertical-align: middle;\n  cursor: default;\n  ",";\n"]);return dn=function(){return e},e}var sn=d.default.div(dn(),x.a.greyMiddle,x.d.MarginAroundFormComponents,function(e){var t=e.active;return Object(d.css)(un(),t?x.a.black:x.a.greyMiddle,t?x.a.yellow:x.a.white)}),mn=function(e){var t=e.selected,n=e.onToggle;return r.a.createElement(on,{render:function(e){var a=e.allergens;return r.a.createElement(r.a.Fragment,null,a.map(function(e){var a={active:t.includes(e.enum),onClick:n&&function(){return n(e.enum)}};return r.a.createElement(sn,Object.assign({key:e.enum,title:e.code},a),e.category)}))}})},fn=function(){return r.a.createElement(te.Field,{field:"ingredients"},function(e){var t=e.value,n=Bt.a.uniq(Bt.a.flatten(t.map(Oe.a.prop("allergens"))));return r.a.createElement(mn,{selected:n})})},bn=function(e){var t=e.recipeType,n=t===p.u.Main;return r.a.createElement(fe,null,r.a.createElement(be,null,r.a.createElement(Se,{placeholder:v.b._("Recipe name")}),r.a.createElement(an,{placeholder:v.b._("Recipe code")}),r.a.createElement(xe,{placeholder:v.b._("Recipe internal note")}),n&&r.a.createElement(rn,{placeholder:v.b._("Public note for customers, allergens")}),r.a.createElement(ce,{type:t,isMain:!0},r.a.createElement(Re.a,{labelWidth:7,icon:nn},v.b._("Allergens based on stock cards"),r.a.createElement("br",null),r.a.createElement(fn,null))),r.a.createElement(Re.a,{labelWidth:7},r.a.createElement(pe.a,{field:"visible",label:v.b._("To show this recipe")}))),r.a.createElement(de.a,{position:"BottomRight"},r.a.createElement(ge,{render:function(e){var t=e.menu;return r.a.createElement(ke,{confirmText:v.b._("Remove this recipe?"),onDelete:function(e){return t.recipe.deleteRecipe(e)}})}})))},pn=function(e){var t=e.recipeId,n=e.recipeType,a=e.children,c=qe();return r.a.createElement(ze,{isCreate:null===t,onCreate:function(e){return c.recipe.createRecipe(e,n)},onUpdate:function(e){return c.recipe.updateRecipe(e)},getDefaultValues:function(){return hn(n)},loadDefaults:Object(O.a)(w.a.mark(function e(){var t,a,r,i;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.recipe.queryDefaults();case 2:return t=e.sent,a=t.vats,r=t.currencyCode,(i=Object(T.a)({},hn(n))).prices=vn(function(e){return{value:0,vatId:a[e],currencyCode:r}}),e.abrupt("return",i);case 8:case"end":return e.stop()}},e)})),loadValues:Object(O.a)(w.a.mark(function e(){var n,a;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.client.query({query:yt.b,variables:{recipeId:t},fetchPolicy:"no-cache"});case 2:return n=e.sent,a=n.data,e.abrupt("return",gn(a.recipe));case 5:case"end":return e.stop()}},e)}))},a)};function vn(e){return[p.v.Delivery,p.v.Inhouse].reduce(function(t,n){return t[n]=e(n),t},{})}function hn(e){return{id:"NEW",code:"",nameLabel:"",internalNote:"",descriptionLabel:"",image:"",visible:!0,recipeType:{enum:e},sourcePrices:[],prices:vn(function(){return{value:0,vatId:null,currencyCode:""}}),sourceAssociatedRecipes:[],associatedRecipes:[],sourceIngredients:[],ingredients:[],sideDishes:[],categories:[]}}function gn(e){return Object(T.a)({},e,{associatedRecipes:e.sourceAssociatedRecipes.map(function(e){var t=e.priceType,n=e.recipe;return{warePriceType:t.enum,nameLabel:n.nameLabel,associatedRecipe:n.id,formattedPrice:"?"}}),ingredients:e.sourceIngredients.map(function(e){var t=e.quantity,n=e.stockItem,a=n.id,r=n.label,c=n.allergens;return{stockItem:a,label:r,quantity:t,unitLabel:n.wareUnit.code,allergens:c.map(Oe.a.prop("enum"))}}),prices:vn(function(t){var n=e.sourcePrices.find(Oe.a.pathEq(["priceType","enum"],t));return n?{value:n.price.value,vatId:n.vat.id,currencyCode:n.price.currency.code}:{value:0,vatId:null,currencyCode:""}})})}var En=function(e){var t=e.ingredients,n=e.onRemove,a=e.isLoading,c=void 0!==a&&a;return r.a.createElement(k.f,{isLoading:c,items:t,disableHeader:!0,noRowsRenderer:function(){return r.a.createElement(k.g,{text:v.b._("Recipe has no ingredients")})}},r.a.createElement(k.a,{dataKey:"stockItem",width:x.d.ButtonColumnWidthPx,minWidth:x.d.ButtonColumnWidthPx,cellRenderer:k.c,columnData:{onRemove:n}}),r.a.createElement(k.a,{dataKey:"label",width:300,label:v.b._("Name")}),r.a.createElement(k.a,{dataKey:"quantity",width:60,label:v.b._("Quantity"),cellRenderer:function(e){var t=e.rowIndex;return r.a.createElement(ve.a,{width:2.5},r.a.createElement(Ie.a,{field:["ingredients",t,"quantity"],validate:yn,inputFullWidth:!0}))}}),r.a.createElement(k.a,{dataKey:"unitLabel",width:100,label:v.b._("Ware unit")}))};function yn(e){var t=v.b._("Quantity");return Ze.a.isEmpty(e+"")?v.b._("{fieldName} must be entered",{fieldName:t}):Ze.a.isFloat(e+"",{min:0})?null:v.b._("{fieldName} must be a positive number",{fieldName:t})}var wn=Oe.a.differenceWith(function(e,t){return e.id===t.stockItem}),On=Object(C.observer)(function(e){var t=e.ingredients,n=e.onAdd,a=e.onRemove,c=Object(R.b)().settings,i=Object(p.ib)({branchId:c.branchId}),l=i.data,o=i.loading;return r.a.createElement(r.a.Fragment,null,r.a.createElement(En,{ingredients:t,onRemove:a}),r.a.createElement(gt,{isLoading:o,addButtonText:v.b._("Add ingredient"),options:o?[]:wn(l.stockItems,t),onAdd:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){n({stockItem:e.id,label:e.nameLabel,quantity:1,unitLabel:e.wareUnit.code,allergens:e.allergens.map(Oe.a.prop("enum"))})})}))}),jn=function(){return r.a.createElement(te.Field,{field:"ingredients"},function(e){return r.a.createElement(On,{ingredients:e.value,onAdd:function(t){e.setValue(Object(_.a)(e.value).concat([t]))},onRemove:function(t){e.setValue(Oe.a.reject(Oe.a.propEq("stockItem",t),e.value))}})})},Cn=function(e){var t=e.match.params.recipeId,n=Object(o.b)(),a=n.itemType,i=n.getRecipeListRoute;return null===a?r.a.createElement(c.Redirect,{to:i()}):r.a.createElement(pn,{recipeId:t,recipeType:a},r.a.createElement(Zt.a,{margin:"0 1.25rem 4rem 0"},r.a.createElement(h.a,{pageTitle:Object(ie.b)(a),hideLogoutWidget:!0,useBackButton:!0},r.a.createElement(s.a,null,r.a.createElement(bn,{recipeType:a})),r.a.createElement(s.a,null,r.a.createElement(jt,{recipeType:a,recipeId:t})),r.a.createElement(s.a,null,r.a.createElement(I.a,null,r.a.createElement(Q.Trans,{id:"Recipe ingredients"})),r.a.createElement(b.a,null),r.a.createElement(jn,null)),r.a.createElement(ce,{type:a,isMain:!0},r.a.createElement(s.a,null,r.a.createElement(I.a,null,r.a.createElement(Q.Trans,{id:"Sidedish categories"})),r.a.createElement(Ue.a,null,r.a.createElement(Q.Trans,{id:"These sidedish are presented with recipe"})),r.a.createElement(tn,{categoryType:$e.b.SideDish,field:"sideDishes",addButtonText:v.b._("Attach sidedish category"),noRowsText:v.b._("Recipe has no sidedish category attached")})),r.a.createElement(s.a,null,r.a.createElement(I.a,null,r.a.createElement(Q.Trans,{id:"Category assignments"})),r.a.createElement(Ue.a,null,r.a.createElement(Q.Trans,{id:"Recipe is in these categories"})),r.a.createElement(tn,{categoryType:$e.b.Main,field:"categories",addButtonText:v.b._("Add to category"),noRowsText:v.b._("Recipe is not in any category")})))),r.a.createElement(re,null,r.a.createElement(ne.a,{mutationName:null===t?"createRecipe":"updateRecipe"},r.a.createElement(ue,{isCreate:null===t})))))},kn=n(1492),In=n(140),Rn=n.n(In),xn=n(184),Tn=function(e){var t=e.wareUnit,n=e.quantity,a=e.onConfirm;return r.a.createElement(G.a,{disabled:null===t,onClick:a},t?r.a.createElement(Q.Trans,{id:"Add {0} {1}",values:{0:Rn()(n).format(xn.h),1:t.code}}):r.a.createElement(Q.Trans,{id:"No stock card selected"}))},Sn=r.a.forwardRef(function(e,t){var n=e.value,a=e.onFilter,c=e.onConfirm;return r.a.createElement(Re.a,{label:v.b._("Stock card"),labelWidth:7},r.a.createElement(At.a,{ref:t,autoFocus:!0,placeholder:"".concat(v.b._("Code").toLocaleLowerCase()," / ").concat(v.b._("PLU")," / ").concat(v.b._("Title").toLocaleLowerCase()),value:n,onChange:function(e){a(e.target.value)},onKeyPressCapture:function(e){"Enter"===e.key&&(e.preventDefault(),c())}}))}),Ln=r.a.forwardRef(function(e,t){var n=e.enabled,a=e.onChange,c=e.onConfirm;return r.a.createElement(At.a,{ref:t,disabled:!n,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){var t=Rn()(e.target.value).value();a(t)}),onKeyPressCapture:function(e){"Enter"===e.key&&(e.preventDefault(),c())}})}),_n=Object(Je.a)(r.a.createElement("path",{d:"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"}),"Done"),Mn=n(330);function Nn(){var e=Object(u.a)(["\n  background-color: ",";\n"]);return Nn=function(){return e},e}var Dn=function(e){var t=e.stockItems,n=e.searchValue,a=e.onSelect;return r.a.createElement(k.f,{items:t,heightStretch:!1},r.a.createElement(k.a,{dataKey:"id",width:x.d.ButtonColumnWidthPx,minWidth:x.d.ButtonColumnWidthPx,cellRenderer:Fn,columnData:{onSelect:a}}),r.a.createElement(k.a,{dataKey:"quantity",width:100,label:v.b._("Card stock"),cellRenderer:Bn}),r.a.createElement(k.a,{dataKey:"code",width:100,label:v.b._("Card code"),cellRenderer:Pn(n)}),r.a.createElement(k.a,{dataKey:"nameLabel",width:300,label:v.b._("Card name"),cellRenderer:Pn(n)}),r.a.createElement(k.a,{dataKey:"note",width:300,label:v.b._("Card note")}))};function Fn(e){var t=e.rowData,n=e.columnData.onSelect;return r.a.createElement(Mn.a,null,r.a.createElement(G.a,{icon:_n,onClick:function(){return n(t)}}))}var Wn=d.default.span(Nn(),x.a.yellow);function Pn(e){return function(t){var n=t.cellData,a=n.toLocaleLowerCase().indexOf(e.toLocaleLowerCase());if(-1===a)return n;var c=n.substring(0,a),i=n.substring(a,a+e.length),l=n.substring(a+e.length);return r.a.createElement(r.a.Fragment,null,c,r.a.createElement(Wn,null,i),l)}}function Bn(e){var t=e.cellData,n=e.rowData;return"".concat(t," ").concat(n.wareUnit.code)}var Vn=function(e){function t(){var e,n;Object(M.a)(this,t);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(n=Object(D.a)(this,(e=Object(F.a)(t)).call.apply(e,[this].concat(c)))).state={targetStockItem:null,filteredStockItems:[],searchValue:"",inputQuantity:0},n.filterInputRef=r.a.createRef(),n.quantityInputRef=r.a.createRef(),n.onFilter=function(e){if(""!==e.trim()){var t=Object(kn.a)(e),a=n.props.stockItems.filter(Oe.a.cond([[Oe.a.propEq("plu",e),Oe.a.T],[Oe.a.propSatisfies(t,"code"),Oe.a.T],[Oe.a.propSatisfies(t,"nameLabel"),Oe.a.T]])),r=null;1===a.length&&(r=Oe.a.head(a)),n.setState({filteredStockItems:a,searchValue:e,targetStockItem:r})}else n.setState({filteredStockItems:[],searchValue:"",targetStockItem:null})},n.onConfirmFilter=function(){1===n.state.filteredStockItems.length&&n.quantityInputRef.current.focus()},n.onQuantity=function(e){n.setState({inputQuantity:e})},n.onSelectStockItem=function(e){n.setState({targetStockItem:e,filteredStockItems:[e]},function(){n.quantityInputRef.current.focus()})},n.onConfirm=function(){var e=n.state,t=e.targetStockItem,a=e.inputQuantity;t&&0!==a&&n.props.onDeposit(t,a),n.setState({targetStockItem:null,searchValue:"",inputQuantity:0},function(){n.quantityInputRef.current.value="",n.filterInputRef.current.focus()})},n}return Object(W.a)(t,e),Object(N.a)(t,[{key:"componentDidUpdate",value:function(e){e.stockItems!==this.props.stockItems&&this.onFilter(this.state.searchValue)}},{key:"render",value:function(){var e=this.state,t=e.searchValue,n=e.filteredStockItems,a=e.targetStockItem,c=e.inputQuantity,i=""!==t.trim(),l=0===n.length,o=n.length>1;return r.a.createElement(r.a.Fragment,null,r.a.createElement(fe,null,r.a.createElement(be,null,r.a.createElement(Sn,{onFilter:this.onFilter,onConfirm:this.onConfirmFilter,value:t,ref:this.filterInputRef})),r.a.createElement(be,null,r.a.createElement(Ln,{enabled:null!==a,onChange:this.onQuantity,onConfirm:this.onConfirm,ref:this.quantityInputRef})),r.a.createElement(be,null,r.a.createElement(Tn,{cardName:a?a.nameLabel:"",quantity:c,wareUnit:a?a.wareUnit:null,onConfirm:this.onConfirm}))),r.a.createElement(I.a,null,i&&o&&r.a.createElement(Q.Trans,{id:"Continue typing to find single stock card or select one from the list"}),i&&l&&r.a.createElement(Q.Trans,{id:"No stock card found from entered search value"}),i&&a&&r.a.createElement(Q.Trans,{id:"Stock card <0>{0}</0> is selected",values:{0:a.nameLabel},components:[r.a.createElement("b",null)]})),i&&r.a.createElement(Dn,{searchValue:t,stockItems:n,onSelect:this.onSelectStockItem}))}}]),t}(r.a.Component),An=Object(C.observer)(function(e){var t=e.children,n=Object(R.b)().settings,a=Object(p.hb)({branchId:n.branchId}),r=a.data,c=a.loading,i=Object(p.L)(),l=Object(j.a)(i,1)[0];return t(c?[]:r.stockItems,function(e,t){l({stockItem:e.id,quantityChange:t})})}),zn=function(e){return r.a.createElement(h.a,{pageTitle:v.b._("Stock deposit"),useBackButton:!0},r.a.createElement(s.a,null,r.a.createElement(E.a,null),r.a.createElement(An,null,function(e,t){return r.a.createElement(Vn,{stockItems:e,onDeposit:t})})))},qn=n(1532),Hn=n(335),Kn=function(e){var t=e.sideText,n=Object(L.a)(e,["sideText"]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Zt.a,{margin:"0 10px 0 0"},r.a.createElement(zt.a,null,r.a.createElement("input",Object.assign({type:"checkbox"},n)))),t)};function Un(){return qe().stock.transfer}var Qn=Object(C.observer)(function(e){var t=e.stockItemId,n=Un(),a=r.a.useRef(null),c=r.a.useCallback(function(e){var a=e.target.value;n.setQuantity(t,Number(a.replace(",",".")))},[t,n]),i=r.a.useCallback(function(){a.current&&a.current.select()},[]),l=n.getItemTransferQuantity(t);return r.a.createElement(At.a,{type:"text",inputFullWidth:!0,value:null===l?"":l,disabled:null===n.targetId,onChange:c,onFocus:i,placeholder:v.b._("to transfer"),pattern:et.b.source,invalid:n.hasInvalidAmount(t)})});function Gn(){var e=Object(u.a)(["\n  display: flex;\n  align-items: center;\n"]);return Gn=function(){return e},e}function $n(){var e=Object(u.a)(["\n  [aria-label='grid']:focus {\n    outline: none;\n  }\n\n  [role='columnheader'] {\n    display: flex;\n    align-items: center;\n    overflow: hidden;\n  }\n\n  .flex-animation,\n  [role='columnheader'] {\n    transition: flex ",";\n  }\n"]);return $n=function(){return e},e}var Jn=Object(d.default)(k.f)($n(),"0.3s"),Xn=d.default.div(Gn()),Yn=Object(C.observer)(function(e){var t=e.stockItems,n=e.isLoading,a=e.isTransferTable,c=qe().stock,i=Un();r.a.useEffect(function(){if(a){var e=t.map(function(e){var t=function(e){var t=e.quantity;return e.allowNegative?Number.MAX_SAFE_INTEGER:Math.max(t,0)}(e);return{id:e.id,max:t}});i.initItems(e)}},[a,t,i]);var l=c.filterInput,o=Object(kn.a)(l),u=Le.RM.cond([[Le.RM.propEq("plu",l),Le.RM.T],[Le.RM.propSatisfies(o,"code"),Le.RM.T],[Le.RM.propSatisfies(o,"nameLabel"),Le.RM.T]]),d=r.a.useCallback(function(e){var t=e.cellData;return r.a.createElement(C.Observer,null,function(){return r.a.createElement(Kn,{checked:i.isImportingItem(t),onChange:function(){return i.toggleImportItem(t)}})})},[i]),s=r.a.useCallback(function(){return r.a.createElement(C.Observer,null,function(){return r.a.createElement(Kn,{checked:i.isImportingAll,onChange:i.toggleImportAll,sideText:r.a.createElement(Q.Trans,{id:"Import"})})})},[i]),m=r.a.useCallback(function(e){var t=e.cellData;return r.a.createElement(C.Observer,null,function(){return r.a.createElement(Xn,null,r.a.createElement(ve.a,{width:5.5,margin:"0 0.5rem 0 0"},r.a.createElement(Qn,{stockItemId:t})))})},[]),f=r.a.createElement(k.a,{dataKey:"quantity",width:100,label:v.b._("Card stock"),cellRenderer:Zn});return r.a.createElement(Jn,{items:t.filter(u),heightStretch:!0,noRowsRenderer:function(){return n?r.a.createElement(Hn.a,null):r.a.createElement("h3",null,r.a.createElement(Q.Trans,{id:"Selected branch has no stock cards"}))}},a&&r.a.createElement(k.a,{dataKey:"id",width:i.isImportMode?130:0,label:v.b._("Import"),headerRenderer:s,cellRenderer:d,className:"flex-animation"}),a&&r.a.createElement(k.a,{dataKey:"id",width:i.isTransferMode?130:0,label:v.b._("Amount"),cellRenderer:m,className:"flex-animation"}),!a&&r.a.createElement(k.a,{dataKey:"id",width:x.d.ButtonColumnWidthPx,minWidth:x.d.ButtonColumnWidthPx,cellRenderer:Object(k.h)({canQuery:"stockItem"},k.b)}),a&&f,r.a.createElement(k.a,{dataKey:"code",width:100,label:v.b._("Card code")}),r.a.createElement(k.a,{dataKey:"nameLabel",width:300,minWidth:30,flexGrow:2,label:v.b._("Card name")}),!a&&f,r.a.createElement(k.a,{dataKey:"allowNegative",width:300,label:v.b._("Negative stock"),cellRenderer:ea}),a?null:r.a.createElement(k.a,{dataKey:"note",width:300,label:v.b._("Card note")}))});function Zn(e){var t=e.cellData,n=e.rowData;return"".concat(t," ").concat(n.wareUnit.code)}function ea(e){return!0===e.cellData?r.a.createElement(Q.Trans,{id:"Permitted"}):r.a.createElement(Q.Trans,{id:"Forbidden"})}var ta=Object(C.observer)(function(e){var t=e.isTransferring,n=void 0!==t&&t,a=Object(R.b)().settings,c=Object(p.ib)({branchId:a.branchId}),i=c.data,l=c.loading,o=i&&i.stockItems&&0!==i.stockItems.length?i.stockItems:[];return r.a.createElement(Yn,{stockItems:o,isLoading:l,isTransferTable:n})}),na=function(){var e=Object(o.b)().getStockCreateRoute;return r.a.createElement(h.a,{pageTitle:v.b._("Stock overview"),useBackButton:!0},r.a.createElement(g.a,{forcePercentHeightInMobile:100},r.a.createElement(s.a,{stretchToParent:!0},r.a.createElement(Yt.b,null,r.a.createElement("div",{className:"filter"},r.a.createElement(f.a,{justify:"start",flexWrap:"wrap"},r.a.createElement(m.a,null,r.a.createElement(E.a,{width:20})),r.a.createElement(m.a,null,r.a.createElement(qn.a,{modelType:"stock"}))),r.a.createElement(ne.a,{mutationName:"createStockItem"},r.a.createElement(q.a,{routeTo:e()}))),r.a.createElement("div",{className:"table"},r.a.createElement(ta,null))))))},aa=n(1466);function ra(){var e=Object(u.a)(["\n  query GMenuStockDefaults($branchId: ID!) {\n    companyBranch(id: $branchId) {\n      id\n      allowNegative: stockItemsCanBeNegative\n    }\n  }\n"]);return ra=function(){return e},e}function ca(){var e=Object(u.a)(["\n  query GMenuStockForm($stockId: ID!) {\n    stockItem(id: $stockId) {\n      id\n      code\n      plu\n      note\n      nameLabel: label\n      allowNegative\n      wareUnit {\n        ...FMenuWareUnit\n      }\n      allergens {\n        ...FMenuAllergen\n      }\n      companyBranch {\n        id\n        allowNegative: stockItemsCanBeNegative\n      }\n    }\n  }\n  ","\n  ","\n"]);return ca=function(){return e},e}var ia=it()(ca(),p.d,p.g),la=it()(ra()),oa=(Object(lt.a)(ia),function(e){var t=e.stockId,n=e.children,a=qe();return r.a.createElement(ze,{isCreate:null===t,onCreate:function(e){return a.stock.createItem(e)},onUpdate:function(e){return a.stock.updateItem(e)},getDefaultValues:ua,loadDefaults:Object(O.a)(w.a.mark(function e(){var t,n;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.client.query({query:la,variables:{branchId:a.stock.branchId},fetchPolicy:"no-cache"});case 2:return t=e.sent,n=t.data,e.abrupt("return",{allowNegativeDefault:da(n.companyBranch.allowNegative)});case 5:case"end":return e.stop()}},e)})),loadValues:Object(O.a)(w.a.mark(function e(){var n,r;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.client.query({query:ia,variables:{stockId:t},fetchPolicy:"no-cache"});case 2:return n=e.sent,r=n.data,e.abrupt("return",{id:(c=r.stockItem).id,internalNote:"TBD",nameLabel:c.nameLabel,code:c.code,note:c.note,plu:c.plu||"",wareUnit:c.wareUnit.enum,allergens:c.allergens.map(Oe.a.prop("enum")),allowNegative:c.allowNegative,allowNegativeDefault:da(c.companyBranch.allowNegative)});case 5:case"end":return e.stop()}var c},e)}))},n)});function ua(){return{id:"NEW",internalNote:"",nameLabel:"",code:"",plu:"",note:"",wareUnit:null,allergens:[],allowNegative:p.j.Default,allowNegativeDefault:p.j.Default}}function da(e){return e?p.j.Default:p.j.Disabled}var sa=function(e){var t=e.field,n=void 0===t?"allergens":t;return r.a.createElement(te.Field,{field:n},function(e){return r.a.createElement(Re.a,{icon:nn,labelWidth:7},r.a.createElement(mn,{selected:e.value,onToggle:function(t){var n=e.value;n.includes(t)?e.setValue(Oe.a.without([t],n)):e.setValue(Object(_.a)(n).concat([t]))}}))})},ma=[{type:p.j.Enabled,label:Object(Ge.i18nMark)("Permit")},{type:p.j.Disabled,label:Object(Ge.i18nMark)("Forbid")}],fa=function(){var e=Object(a.useMemo)(function(){return" (".concat(v.b._("Is default setting").toLocaleLowerCase(),")")},[]);return r.a.createElement(te.FormApi,null,function(t){var n=t.values.allowNegativeDefault;return r.a.createElement(Re.a,{label:v.b._("Negative stock"),labelWidth:7},r.a.createElement(rt.a,{field:"allowNegative",items:ma,formatItem:function(t){return t.type===n?r.a.createElement("span",null,v.b._(t.label),r.a.createElement("i",null,e)):v.b._(t.label)},getItemId:function(e){return e.type}}))})},ba=Object(Je.a)(r.a.createElement("path",{d:"M17.81 4.47c-.08 0-.16-.02-.23-.06C15.66 3.42 14 3 12.01 3c-1.98 0-3.86.47-5.57 1.41-.24.13-.54.04-.68-.2-.13-.24-.04-.55.2-.68C7.82 2.52 9.86 2 12.01 2c2.13 0 3.99.47 6.03 1.52.25.13.34.43.21.67-.09.18-.26.28-.44.28zM3.5 9.72c-.1 0-.2-.03-.29-.09-.23-.16-.28-.47-.12-.7.99-1.4 2.25-2.5 3.75-3.27C9.98 4.04 14 4.03 17.15 5.65c1.5.77 2.76 1.86 3.75 3.25.16.22.11.54-.12.7-.23.16-.54.11-.7-.12-.9-1.26-2.04-2.25-3.39-2.94-2.87-1.47-6.54-1.47-9.4.01-1.36.7-2.5 1.7-3.4 2.96-.08.14-.23.21-.39.21zm6.25 12.07c-.13 0-.26-.05-.35-.15-.87-.87-1.34-1.43-2.01-2.64-.69-1.23-1.05-2.73-1.05-4.34 0-2.97 2.54-5.39 5.66-5.39s5.66 2.42 5.66 5.39c0 .28-.22.5-.5.5s-.5-.22-.5-.5c0-2.42-2.09-4.39-4.66-4.39-2.57 0-4.66 1.97-4.66 4.39 0 1.44.32 2.77.93 3.85.64 1.15 1.08 1.64 1.85 2.42.19.2.19.51 0 .71-.11.1-.24.15-.37.15zm7.17-1.85c-1.19 0-2.24-.3-3.1-.89-1.49-1.01-2.38-2.65-2.38-4.39 0-.28.22-.5.5-.5s.5.22.5.5c0 1.41.72 2.74 1.94 3.56.71.48 1.54.71 2.54.71.24 0 .64-.03 1.04-.1.27-.05.53.13.58.41.05.27-.13.53-.41.58-.57.11-1.07.12-1.21.12zM14.91 22c-.04 0-.09-.01-.13-.02-1.59-.44-2.63-1.03-3.72-2.1-1.4-1.39-2.17-3.24-2.17-5.22 0-1.62 1.38-2.94 3.08-2.94 1.7 0 3.08 1.32 3.08 2.94 0 1.07.93 1.94 2.08 1.94s2.08-.87 2.08-1.94c0-3.77-3.25-6.83-7.25-6.83-2.84 0-5.44 1.58-6.61 4.03-.39.81-.59 1.76-.59 2.8 0 .78.07 2.01.67 3.61.1.26-.03.55-.29.64-.26.1-.55-.04-.64-.29-.49-1.31-.73-2.61-.73-3.96 0-1.2.23-2.29.68-3.24 1.33-2.79 4.28-4.6 7.51-4.6 4.55 0 8.25 3.51 8.25 7.83 0 1.62-1.38 2.94-3.08 2.94s-3.08-1.32-3.08-2.94c0-1.07-.93-1.94-2.08-1.94s-2.08.87-2.08 1.94c0 1.71.66 3.31 1.87 4.51.95.94 1.86 1.46 3.27 1.85.27.07.42.35.35.61-.05.23-.26.38-.47.38z"}),"Fingerprint"),pa=function(e){var t=e.field,n=void 0===t?"plu":t,a=Object(L.a)(e,["field"]);return r.a.createElement(Re.a,{icon:ba,labelWidth:7},r.a.createElement(ve.a,{width:9},r.a.createElement(Ie.a,Object.assign({field:n,inputFullWidth:!0},a))))},va=Object(Je.a)(r.a.createElement("path",{d:"M3 5h2V3c-1.1 0-2 .9-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2c0-1.1-.9-2-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2zM7 17h10V7H7v10zm2-8h6v6H9V9z"}),"SelectAll");function ha(){var e=Object(u.a)(["\n  query GWareUnits {\n    wareUnits {\n      id\n      code\n      enum\n    }\n  }\n"]);return ha=function(){return e},e}var ga=it()(ha()),Ea=Object(lt.a)(ga),ya=function(e){var t=e.field,n=void 0===t?"wareUnit":t,a=Object(L.a)(e,["field"]);return r.a.createElement(Ea,{renderLoading:!1,render:function(e,t){var c=e.wareUnits,i=t.loading;return r.a.createElement(Re.a,{icon:va,labelWidth:7},r.a.createElement(_e.a,Object.assign({field:n,options:c||[],isLoading:i,isRequired:!0,validatioName:v.b._("Ware unit"),getOptionLabel:Oe.a.prop("code"),getOptionValue:Oe.a.prop("enum"),width:12},a)))}})},wa=function(e){return r.a.createElement(fe,null,r.a.createElement(be,null,r.a.createElement(Se,{placeholder:v.b._("Card name")}),r.a.createElement(an,{placeholder:v.b._("Card code")}),r.a.createElement(ya,{placeholder:v.b._("Choose unit")}),r.a.createElement(pa,{placeholder:v.b._("PLU")}),r.a.createElement(xe,{placeholder:v.b._("Card note"),field:"note",label:v.b._("Card note")}),r.a.createElement(sa,null),r.a.createElement(fa,null)),r.a.createElement(de.a,{position:"BottomRight"},r.a.createElement(ne.a,{mutationName:"destroyStockItem"},r.a.createElement(ge,{render:function(e){var t=e.menu;return r.a.createElement(ke,{confirmText:v.b._("Remove this card?"),onDelete:function(e){return t.stock.deleteItem(e)}})}}))))},Oa=n(1514),ja=function(e){var t=e.stockId,n=Object(p.yb)({stockId:t}),a=n.data;if(n.loading)return r.a.createElement(Oa.a,null);var c=a.stockItem.ingredients;return 0===c.length?r.a.createElement(I.a,null,r.a.createElement(Q.Trans,{id:"No recipes are using stock card"})):r.a.createElement(r.a.Fragment,null,r.a.createElement(I.a,null,r.a.createElement(Q.Trans,{id:"Recipes using this card"})),r.a.createElement(k.f,{items:Object(_.a)(c),disableHeader:!0,fullHeight:!0},r.a.createElement(k.a,{dataKey:"",cellDataGetter:function(e){var t=e.rowData;return{pathname:"/settings/menu/recipe/".concat(t.recipe.id),state:{recipeType:t.recipe.recipeType.enum}}},cellRenderer:k.b,width:100}),r.a.createElement(k.a,{dataKey:"recipe",width:300,label:v.b._("Name"),cellRenderer:function(e){var t=e.rowData;return r.a.createElement(r.a.Fragment,null,t.recipe.nameLabel,r.a.createElement(Ue.a,null,t.recipe.descriptionLabel))}})))},Ca=function(e){var t=e.match.params.stockId,n="create"===t;return r.a.createElement(h.a,{pageTitle:v.b._("Stock card"),hideLogoutWidget:!0,useBackButton:!0},r.a.createElement(oa,{stockId:n?null:t},r.a.createElement(r.a.Fragment,null,r.a.createElement(re,null,r.a.createElement(ne.a,{mutationName:n?"createStockItem":"updateStockItem"},r.a.createElement(ue,{isCreate:n}))),r.a.createElement(s.a,null,r.a.createElement(wa,null),!n&&r.a.createElement(aa.a,{queryName:"recipes"},r.a.createElement(ja,{stockId:t}))))))},ka=n(1494),Ia=n(55),Ra=n(207);function xa(){var e=Object(u.a)(["\n    margin-left: ",";\n  "]);return xa=function(){return e},e}function Ta(){var e=Object(u.a)(["\n    margin-left: 3rem;\n    width: 16rem;\n  "]);return Ta=function(){return e},e}function Sa(){var e=Object(u.a)(["\n  flex: 0 0 auto;\n  ",";\n  @media (max-width: 760px) {\n    width: unset;\n    margin-left: ",";\n  }\n  ",";\n"]);return Sa=function(){return e},e}var La=d.default.div(Sa(),Object(Ia.c)(Ta()),x.d.Middle,Object(Ia.d)(xa(),x.d.Middle)),_a=Object(C.observer)(function(){var e=Un(),t=Object(Ra.a)().enqueueSuccess,n=Object(p.H)(),a=Object(j.a)(n,1)[0],c=Object(ka.a)("createStockItemTransfers"),i=e.targetId,l=null===i,o=r.a.useCallback(Object(O.a)(w.a.mark(function n(){var r,c;return w.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!((r=e.itemsForTransfer.filter(Le.RM.propSatisfies(Le.RM.gt(0),"quantity")).map(function(e){return{stockItemId:e.id,quantity:e.quantity}})).length>0&&i)){n.next=7;break}return c={targetBranch:i,transfers:r},n.next=5,a(c);case 5:n.sent&&(t(v.b._("Transfer was successfully completed!")),e.clearTransferState());case 7:case"end":return n.stop()}},n)})),[a,t,i,e]);return c?r.a.createElement(La,null,r.a.createElement(G.a,{color:x.a.green,onClick:o,disabled:l},e.isImportMode?r.a.createElement(Q.Trans,{id:"Confirm import"}):r.a.createElement(Q.Trans,{id:"Confirm transfer"}))):null}),Ma=Object(C.observer)(function(){var e=Un();return r.a.createElement(r.a.Fragment,null,r.a.createElement(Kn,{checked:e.isImportMode,onChange:e.toggleImportMode}),r.a.createElement(ve.a,{width:10},r.a.createElement(Q.Trans,{id:"Enable import mode"})))}),Na=function(){return r.a.createElement(E.a,{width:20})},Da=Object(Je.a)(r.a.createElement("path",{d:"M16.01 11H4v2h12.01v3L20 12l-3.99-4z"}),"ArrowRightAlt"),Fa=n(1475),Wa=Object(C.observer)(function(){var e=Object(R.b)().user,t=Un(),n=Le.RM.reject(Object(Le.idPropEq)(t.sourceId),e.branches);return r.a.createElement(Re.a,{icon:Da},r.a.createElement(Fa.a,{selectedBranches:t.targetId?[t.targetId]:[],onSelectionChange:function(e){var n=Object(j.a)(e,1)[0];return t.setTargetId(n)},onSelectionClear:function(){return t.setTargetId(null)},isMulti:!1,isClearable:!1,getDropdownProps:function(){return{width:20}},hideWhenSingleBranch:!0,branches:n}))});function Pa(){var e=Object(u.a)(["\n  &,\n  & > * {\n    display: flex;\n    align-items: center;\n  }\n"]);return Pa=function(){return e},e}function Ba(){var e=Object(u.a)(["\n  display: flex;\n"]);return Ba=function(){return e},e}var Va=d.default.div(Ba()),Aa=Object(d.default)(f.a)(Pa()),za=function(e){var t=Object(R.b)().user,n=Object(ka.a)("createStockItemTransfers")&&!t.hasSingleBranch;return r.a.createElement(h.a,{pageTitle:v.b._("Stock transfer"),useBackButton:!0,topContent:r.a.createElement(Va,null,r.a.createElement(_a,null))},r.a.createElement(g.a,{forcePercentHeightInMobile:100},r.a.createElement(s.a,{stretchToParent:!0},n?r.a.createElement(Yt.b,null,r.a.createElement("div",{className:"filter"},r.a.createElement(Aa,{justify:"start",flexWrap:"wrap"},r.a.createElement(m.a,null,r.a.createElement(Na,null)),r.a.createElement(m.a,null,r.a.createElement(Wa,null)),r.a.createElement(m.a,null,r.a.createElement(qn.a,{modelType:"stock"})),r.a.createElement(m.a,null,r.a.createElement(Ma,null)))),r.a.createElement("div",{className:"table"},r.a.createElement(ta,{isTransferring:!0}))):r.a.createElement(I.a,null,r.a.createElement(Q.Trans,{id:"Can't access page"})))))};n.d(t,"MenuRoutes",function(){return qa});var qa=function(){var e=Object(o.b)();return r.a.createElement(c.Switch,null,r.a.createElement(l.a,{path:e.getCategoryEditRoute(":categoryId"),component:Xt}),r.a.createElement(l.a,{path:e.getCategoryListRoute(),component:ee}),r.a.createElement(l.a,{path:e.getRecipeEditRoute(":recipeId"),component:Cn}),r.a.createElement(l.a,{path:e.getRecipeListRoute(),component:Yt.a}),r.a.createElement(l.a,{path:e.getStockDepositRoute(),component:zn}),r.a.createElement(l.a,{path:e.getStockTransferRoute(),component:za}),r.a.createElement(l.a,{path:e.getStockEditRoute(":stockId"),component:Ca}),r.a.createElement(l.a,{path:e.getStockListRoute(),component:na}),r.a.createElement(c.Redirect,{to:e.getCategoryListRoute(),from:o.a}),r.a.createElement(c.Route,{component:i.a}))};t.default=qa}}]);
//# sourceMappingURL=178.6e97c8fb.chunk.js.map