(window.webpackJsonp=window.webpackJsonp||[]).push([[184],{1460:function(e,n,t){"use strict";t.d(n,"a",function(){return b});var r=t(5),a=t(26),o=t(0),i=t.n(o),c=t(55),l=t(1487),u=t(141),d=t(19);function f(){var e=Object(r.a)(["\n    margin: 0;\n    grid-row: "," ;\n    grid-column: span 16;\n    height: "," ;\n    position: relative;\n  "]);return f=function(){return e},e}function s(){var e=Object(r.a)(["\n  position: fixed;\n  bottom: 0.5rem;\n  width: ",";\n  left: ",";\n  top: ",";"]);return s=function(){return e},e}var m=a.default.div.withConfig({displayName:"PageLayoutFullHeightItem__StyledPageLayoutFullHeightItem",componentId:"sc-1mean6j-0"})([""," ",""],Object(c.c)(s(),function(e){return void 0!==e.widthInColumns?"calc(("+e.widthInColumns+" * 6.22vw) - "+d.d.LayoutGridCellMargin+")":"calc(100vh - (2 * "+d.d.LayoutGridCellMargin+"))"},function(e){return void 0!==e.column?"calc(("+e.column+" * 6.22vw) + "+d.d.LayoutGridCellMargin+")":d.d.LayoutGridCellMargin},function(e){return void 0!==e.row?"calc(("+e.row+" * 3.9375rem) + "+d.d.LayoutGridCellMargin+")":"calc(3.9375rem + "+d.d.LayoutGridCellMargin+")"}),Object(c.d)(f(),function(e){return e.rowInMobile},function(e){var n=e.forcePercentHeightInMobile;return n?"calc(".concat(n,"vh - ").concat(d.d.PageHeaderHeight+.25+d.d.DefaultSizeUnit,")"):"unset"})),b=function(e){var n=e.children,t=e.row,r=void 0===t?1:t,a=e.rowInMobile,o=void 0===a?16:a,c=e.column,d=void 0===c?0:c,f=e.widthInColumns,s=void 0===f?16:f,b=e.withScrollArea,v=void 0!==b&&b,h=e.scrollAreaId,p=e.forcePercentHeightInMobile;return i.a.createElement(m,{column:d,row:r,rowInMobile:o,widthInColumns:s,withScrollArea:v,forcePercentHeightInMobile:p},v?i.a.createElement(l.a,{id:h},n):i.a.createElement(u.a,{height:100,heightUnit:"%"},n))}},1461:function(e,n,t){"use strict";t.d(n,"a",function(){return o});var r=t(5);function a(){var e=Object(r.a)(["\n  display: flex;\n  flex-direction: row;\n  flex-wrap: ",";\n  justify-content: ",";\n"]);return a=function(){return e},e}var o=t(26).default.div(a(),function(e){var n=e.flexWrap;return void 0===n?"unset":n},function(e){var n=e.justify;return void 0===n?"space-between":n})},1469:function(e,n,t){"use strict";t.d(n,"a",function(){return o});var r=t(5);function a(){var e=Object(r.a)(["\n  height: ",";\n"]);return a=function(){return e},e}var o=t(26).default.div(a(),function(e){var n=e.size,t=void 0===n?1:n,r=e.sizeUnit,a=void 0===r?"rem":r;return"".concat(t).concat(a)});o.displayName="VerticalGap"},1487:function(e,n,t){"use strict";t.d(n,"a",function(){return o});var r=t(5);function a(){var e=Object(r.a)(["\n  overflow-y: auto;\n  -webkit-overflow-scrolling: touch;\n  height: 100%;\n"]);return a=function(){return e},e}var o=t(26).default.div(a())},1515:function(e,n,t){"use strict";t.d(n,"a",function(){return m}),t.d(n,"b",function(){return b});var r=t(98),a=t(1498),o=t(69),i=t(62),c=t(0),l=t.n(c),u=t(67),d=t(19),f=t(57),s=(l.a.createContext(null),["places"]),m=function(e){var n=e.model,t=e.children,c={streetViewControl:!1,mapTypeControl:!1,fullscreenControl:!1},m=Object(f.b)().user,b=Object(a.e)({id:"script-loader",version:"weekly",googleMapsApiKey:u.a.googleMapsApi,libraries:s,language:m.language}),v=b.isLoaded,h=b.loadError,p=b.url,g=Reflect.has(window,"google");return h||v&&!g?(o.Sentry.withScope(function(e){e.setExtras({googleMapUrl:p}),o.Sentry.captureException(h)}),l.a.createElement("h2",null,l.a.createElement(r.Trans,{id:"Cannot load map right now. Please try again later."}))):v?l.a.createElement(i.Observer,null,function(){return l.a.createElement(a.a,{zoom:n.zoom,center:n.center,onCenterChanged:n.updatePosition,onZoomChanged:n.updateZoom,onLoad:n.setMapRef,options:c,mapContainerStyle:{borderRadius:d.c.Card,overflow:"hidden",height:"100%"}},t)}):null};function b(){var e=Object(a.d)();if(!e)throw new Error("Trying to useGoogleMap, but BaseMap is missing in the tree");return e}},1544:function(e,n,t){"use strict";t.d(n,"a",function(){return c});var r=t(5),a=t(26),o=t(19);function i(){var e=Object(r.a)(["\n  color: ",";\n  font-weight: lighter;\n  font-size: 1.2rem;\n  margin: 0.8rem 0 0.8rem 0.3rem;\n"]);return i=function(){return e},e}var c=a.default.h2(i(),o.a.greyLight)},1548:function(e,n,t){"use strict";t.d(n,"a",function(){return h});var r=t(46),a=t(58),o=t(65),i=t(70),c=t(85),l=t(82),u=t(84),d=t(0),f=t.n(d),s=t(1455),m=t(31),b=t(45),v=t(1458),h=function(e){function n(){var e,t;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(t=Object(c.a)(this,(e=Object(l.a)(n)).call.apply(e,[this].concat(a)))).validate=function(e){return t.props.isRequired&&!e?b.b._("{0} must be selected",{0:t.props.validatioName}):null},t}return Object(u.a)(n,e),Object(i.a)(n,[{key:"getControlProps",value:function(e){var n=this.props,t=n.isMulti,r=n.options,a=n.getOptionValue,o=n.defaultValue,i=e.value||o;if(t){var c=Array.isArray(i)?function(e){return i.includes(a(e))}:m.a.F;return{value:Array.isArray(r)?r.filter(c):[],onChange:function(n){e.setValue(n.map(a))}}}return{value:i&&r.find(function(e){return a(e)===i}),onChange:function(n){e.setValue(a(n))}}}},{key:"render",value:function(){var e=this,n=this.props,t=n.field,o=n.fieldIsPure,i=void 0!==o&&o,c=(n.defaultValue,Object(a.a)(n,["field","fieldIsPure","defaultValue"]));return f.a.createElement(s.Field,{field:t,validate:this.validate,pure:i},function(n){return f.a.createElement(v.a,Object.assign({},e.getControlProps(n),{onFocus:function(){return n.setTouched(!0)},styles:{control:function(e){return Boolean(n.error)?Object(r.a)({},e,{borderColor:"red"}):e}}},c))})}}]),n}(f.a.Component);h.defaultProps={validatioName:"Value",getItemId:m.a.prop("id")}},1549:function(e,n,t){"use strict";t.d(n,"a",function(){return s});var r=t(5),a=t(2615),o=t(0),i=t.n(o),c=t(1520),l=t(26),u=t(185);function d(){var e=Object(r.a)(["\n  padding: 1rem 0.4rem;\n  cursor: grab;\n"]);return d=function(){return e},e}var f=l.default.div(d()),s=Object(c.SortableHandle)(function(){return i.a.createElement(f,null,i.a.createElement(u.a,{icon:a.a}))})},1557:function(e,n,t){"use strict";t.d(n,"a",function(){return a});var r=t(0),a=function(e){var n=e.isShow,t=e.confirmText,a=e.onCancel,o=e.onConfirm;return Object(r.useEffect)(function(){n&&(window.confirm(t)?o():a())},[t,n,a,o]),null}},1569:function(e,n,t){"use strict";t.d(n,"a",function(){return d});var r=t(58),a=t(107),o=t(0),i=t.n(o),c=t(57),l=t(1458),u=t(45),d=function(e){var n=e.brands,t=e.selectedBrand,o=e.onSelection,d=Object(r.a)(e,["brands","selectedBrand","onSelection"]),f=Object(c.b)().user;return i.a.createElement(l.a,Object.assign({placeholder:u.b._("Select brand"),options:n||f.brands,value:t,formatOptionLabel:a.RM.prop("name"),getOptionValue:a.RM.prop("id"),getOptionLabel:a.RM.prop("name"),isClearable:!0,isSearchable:!0,onChange:function(e){return o(e)},autoFocus:!0},d))}},2620:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),o=t(74),i=t(208),c=t(45),l=t(1460),u=t(333),d=t(25),f=t.n(d),s=t(36),m=t(91),b=t(5),v=t(59),h=t(1455),p=t(353),g=t(26),E=t(1457),O=t(203),j=t(1557),y=t(335),w=t(57),C=t(41),z=t(43),k=t(31),x=t(207),I=t(1513),P=t(19);function S(){return Object(v.useRouterContext)().match.params.zoneId}function B(){var e=Object(w.b)(),n=e.user,t=e.zone,r=Object(v.useRouterContext)().history,o=a.a.useCallback(function(e){return"".concat("/settings/zones","/").concat(e)},[]);return{getRouteToZone:o,routeToZoneEdit:a.a.useCallback(function(e){t.map.panToZone(e),n.canQuery("zone")&&r.push(o(e))},[o,r,n,t.map]),routeToZoneList:a.a.useCallback(function(){r.push("/settings/zones")},[r])}}var F=t(98),M=t(2613),Z=t(2614),R=t(1546),L=t(1463),A=t(1462),T=t(1456),_=t(1504);function D(){var e=Object(b.a)(["\n  border-left: 3px solid #707070;\n  width: 3px;\n  position: relative;\n  left: -2rem;\n  height: 4rem;\n  float: left;\n  margin: -0.5rem 0 0 0;\n"]);return D=function(){return e},e}function V(){var e=Object(b.a)(["\n  position: relative;\n  left: 4rem;\n  top: -0.3rem;\n  width: 3rem;\n"]);return V=function(){return e},e}function G(){var e=Object(b.a)(["\n  position: relative;\n  left: 8rem;\n  top: 0rem;\n"]);return G=function(){return e},e}function H(){var e=Object(b.a)(["\n  color: ",";\n"]);return H=function(){return e},e}function N(){var e=Object(b.a)(["\n  width: 3rem;\n  position: relative;\n  z-index: 4;\n"]);return N=function(){return e},e}function U(){var e=Object(b.a)(["\n  min-width: 2rem;\n  display: inline-block;\n"]);return U=function(){return e},e}var q=g.default.div(U()),W=Object(g.default)(L.a)(N()),J=Object(g.default)(W)(H(),P.a.blue),K=g.default.div(G()),$=g.default.div(V()),Q=g.default.div(D()),Y=function(e){if("number"===typeof e)return null;var n=e.trim();return n.length&&Number.isNaN(Number.parseFloat(n))?c.b._("Must be number"):null},X=a.a.forwardRef(function(e,n){var t=e.field,r=e.label,o=e.isDeliveryPrice,i=e.autoFocus,c=void 0!==i&&i;return o?a.a.createElement(K,null,a.a.createElement(Q,null),a.a.createElement(q,null,r),a.a.createElement(J,{field:t,validate:Y,ref:n})):a.a.createElement($,null,a.a.createElement(W,{field:t,validate:Y,autoFocus:c}))}),ee=t(205),ne=t(46),te=t(1548),re=t(210),ae=t(496);function oe(){var e=Object(b.a)(["\n  background-color: ",";\n  color: ",";\n  width: 6rem;\n  padding: 0.4rem 1rem;\n  margin: 0;\n  height: 100%;\n"]);return oe=function(){return e},e}var ie=g.default.div(oe(),function(e){return e.color},P.a.white),ce=Object(re.a)(ae.a),le=function(e){var n=e.field,t=void 0===n?"zoneColor.id":n;return a.a.createElement(ce,{render:function(e){var n=e.zoneColors;return a.a.createElement(te.a,{field:t,fieldIsPure:!0,options:Object(ee.a)(n),width:8,styles:{option:function(e){return Object(ne.a)({},e,{padding:0,margin:0})},menu:function(e){return Object(ne.a)({},e,{width:"8rem",maxWidth:"8rem"})}},defaultValue:k.a.head(n),getOptionValue:k.a.prop("id"),formatOptionLabel:function(e){return a.a.createElement(ie,{color:e.color},e.code)}})}})},ue=t(1689),de=t(139),fe=t(1459);function se(){var e=Object(b.a)(["\n  margin: 0 0 0 1rem;\n"]);return se=function(){return e},e}function me(){var e=Object(b.a)(["\n  width: 3rem;\n  position: relative;\n  z-index: 4;\n"]);return me=function(){return e},e}function be(){var e=Object(b.a)(["\n  width: 3rem;\n  display: inline-block;\n"]);return be=function(){return e},e}var ve=g.default.div(be()),he=Object(g.default)(fe.a)(me()),pe=g.default.div(se()),ge=function(e){var n=e.label,t=e.display;return a.a.createElement(pe,null,a.a.createElement(ve,null,n),a.a.createElement(he,{disabled:!0,placeholder:t}))};function Ee(){var e=Object(b.a)(["\n  position: relative;\n  top: -7rem;\n  left: 16rem;\n  height: 0;\n"]);return Ee=function(){return e},e}function Oe(){var e=Object(b.a)(["\n  position: relative;\n  top: -6rem;\n"]);return Oe=function(){return e},e}var je=g.default.div(Oe()),ye=g.default.div(Ee()),we=function(e){var n=e.fieldApi;return a.a.createElement(a.a.Fragment,null,n.values.map(function(e,t,o){return a.a.createElement(r.Fragment,{key:t},a.a.createElement(X,{label:"za",isDeliveryPrice:!0,field:[t,"price","value"]}),t===o.length-1?a.a.createElement(ge,{display:"\u221e",label:"do"}):a.a.createElement(X,{field:[t,"toPrice","value"],autoFocus:!0}),o.length>1&&a.a.createElement(ye,null,a.a.createElement(I.a,{onDelete:function(){return n.removeValue("",t)}})))}),a.a.createElement(h.FormApi,{render:function(e){return a.a.createElement(je,null,a.a.createElement(de.a,{disabled:e.submitting,width:P.d.ButtonHeight+P.d.DefaultSizeUnit,icon:ue.a,onClick:function(){return n.addValue("",{price:{value:0},toPrice:{value:0}})}}))}}))};function Ce(){var e=Object(b.a)(["\n  color: ",";\n  padding-bottom: 0.2rem;\n"]);return Ce=function(){return e},e}function ze(){var e=Object(b.a)(["\n  margin: ",";\n  color: ",";\n"]);return ze=function(){return e},e}var ke=g.default.div(ze(),P.d.Middle,P.a.black),xe=g.default.div(Ce(),P.a.greyDark),Ie=function(e){return a.a.createElement(ke,null,a.a.createElement(T.a,{icon:M.a},a.a.createElement(L.a,{field:"name",validate:Object(_.b)(c.b._("Zone name"))})),a.a.createElement(T.a,{icon:Z.a},a.a.createElement(le,null)),a.a.createElement(R.a,{field:"enabled",name:"enabled",label:c.b._("Is active").toLocaleLowerCase()}),a.a.createElement(F.Trans,{id:"<0>Delivery cost</0><1>according order total cost</1>",components:[a.a.createElement(A.a,{margin:"0.5rem 0 0 0"}),a.a.createElement(xe,null)]}),a.a.createElement(X,{field:"minimalOrderPrice.value"}),a.a.createElement(h.NestedField,{field:"priceRangeRules",component:we}))},Pe=t(1467),Se=t(1461),Be=function(e){var n=e.isSubmitting,t=e.isModified,r=e.onGoBack,o=e.onSave;return a.a.createElement(Se.a,null,a.a.createElement(Pe.a,{widthGrowIndex:.4,padding:"0"},a.a.createElement(de.a,{color:P.a.greyMiddle,onClick:r,text:c.b._("Back"),disabled:n})),a.a.createElement(Pe.a,{widthGrowIndex:.4,padding:"0"},a.a.createElement(E.a,{mutationName:"updateZone"},a.a.createElement(de.a,{color:P.a.green,text:c.b._("Save zone"),onClick:o,disabled:n||!t}))))},Fe=t(62),Me=t(6);function Ze(){var e=Object(b.a)(["\n  query GZones($branchesId: [ID!]!) {\n    zones(companyBranches: $branchesId) {\n      ...FZone\n    }\n  }\n  ","\n"]);return Ze=function(){return e},e}var Re=t.n(Me)()(Ze(),C.i),Le=Object(re.a)(Re),Ae=a.a.createContext(null),Te=Object(Fe.observer)(function(e){var n=e.children,t=Object(w.b)().zone,r=t.branches.filter(t.branchFilterPredicate);return 0===r.length?a.a.createElement(Ae.Provider,{value:[]},n):a.a.createElement(Le,{fetchPolicy:"cache-and-network",variables:{branchesId:r.map(k.a.prop("id"))},renderLoading:!1,render:function(e,t){var r=e.zones,o=t.loading;return a.a.createElement(Ae.Provider,{value:o?null:r},n)}})}),_e=function(){return Object(r.useContext)(Ae)};function De(){var e=Object(b.a)(["\n  width: ",";\n  margin-top: ",";\n"]);return De=function(){return e},e}var Ve=g.default.div(De(),P.d.ButtonHeight+P.d.DefaultSizeUnit,P.d.Middle),Ge=function(){var e=S(),n=_e(),t=Object(w.b)().zone,o=B().routeToZoneList,i=Object(r.useState)(!1),l=Object(m.a)(i,2),u=l[0],d=l[1],b=Object(r.useRef)(null),g=Object(x.a)(),P=g.enqueueError,F=g.enqueueSuccess,M=Object(C.V)(),Z=Object(m.a)(M,1)[0],R=Object(r.useCallback)(function(){var n=Object(s.a)(f.a.mark(function n(r){return f.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=5;break}return n.next=3,Z(t.getZoneVariables(e,r));case 3:n.sent&&(d(!1),o(),F(c.b._("Zone has been updated")));case 5:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}(),[F,o,e,t,Z]),L=Object(r.useCallback)(Object(s.a)(f.a.mark(function n(){return f.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=3;break}return n.next=3,t.destroyZone(e);case 3:o();case 4:case"end":return n.stop()}},n)})),[o,e,t]);Object(v.useReaction)(function(){return null!==t.map.currentZonePoints},d),a.a.useEffect(function(){n&&0===n.length&&(P(c.b._("Requested zone wasn't found")),o())},[P,o,n]);var A=e&&n&&n.find(k.a.propEq("id",e))||null;return a.a.useEffect(function(){t.map.clearZonePoints()},[A,t.map]),A?a.a.createElement(h.Form,{defaultValues:A,onChange:function(e){Object(z.b)("zone form change",e.values),d(!0)},onSubmit:R,render:function(e){return b.current=e,a.a.createElement(O.a,{padding:0},a.a.createElement(Be,{isSubmitting:e.submitting,isModified:u,onSave:e.submitForm,onGoBack:o}),a.a.createElement(Ie,null),a.a.createElement(E.a,{mutationName:"destroyZone"},a.a.createElement(Ve,null,a.a.createElement(I.a,{disabled:e.submitting,confirmText:c.b._("Remove zone {0}?",{0:A.name}),onDelete:L}))),a.a.createElement(p.b,{when:u},function(e){var n=e.isShow,t=e.handleOk,r=e.handleCancel;return a.a.createElement(j.a,{isShow:n,confirmText:c.b._("Do you want to cancel changes for the zone?"),onConfirm:t,onCancel:r})}))}}):a.a.createElement(y.a,{text:c.b._("Loading form...")})},He=t(20),Ne=t(1515),Ue=t(1498),qe=t(118);function We(){var e=Object(b.a)(["\n    background-color: ",";\n    color: ",";\n  "]);return We=function(){return e},e}function Je(){var e=Object(b.a)(["\n  "," font-size: 1.3rem;\n  white-space: nowrap;\n  padding: 0.2rem 0.5rem;\n"]);return Je=function(){return e},e}var Ke=g.default.div(Je(),function(e){var n=e.isActive;return Object(g.css)(We(),n?P.a.green:P.a.greyLight,n?P.a.white:P.a.greyDark)}),$e=function(e){var n=e.branch,t=e.isActive,r=void 0===t||t;return a.a.createElement(Ue.b,{getPixelPositionOffset:function(e,n){return{x:-e/2,y:-n/2}},mapPaneName:Ue.b.MARKER_LAYER,position:Object(qe.b)(n.gps)},a.a.createElement(Ke,{isActive:r},n.name))};var Qe=function(e){var n=e.points,t=e.color,r=e.priority,o=e.onFocus,i=a.a.useCallback(function(e){o&&(e.stop(),o())},[o]);return a.a.createElement(Ue.c,{path:n.map(qe.b),options:{fillColor:t,fillOpacity:.3,strokeWeight:0,zIndex:5e3-r},editable:!1,draggable:!1,onDblClick:i})},Ye=function(e){var n=e.onChange,t=e.onClear,r=e.points,o=e.color,i=a.a.useRef(null),c=a.a.useRef([]),l=a.a.useCallback(function(){if(i.current){var e=i.current.getPath();n(e.getArray().map(qe.d))}},[n]),u=a.a.useCallback(function(e){i.current=e;var n=e.getPath();c.current.push(n.addListener("set_at",l),n.addListener("insert_at",l),n.addListener("remove_at",l))},[l]),d=a.a.useCallback(function(){t(),c.current.forEach(function(e){return e.remove()}),i.current=null},[t]);return a.a.createElement(Ue.c,{path:r.map(qe.b),options:{fillColor:o,fillOpacity:.6,strokeWeight:2,zIndex:1e4},editable:!0,draggable:!0,onDragEnd:l,onLoad:u,onUnmount:d})};function Xe(){return Object(w.b)().zone}var en=function(){var e=Xe(),n=S(),t=_e(),o=B().routeToZoneEdit,i=e.branches.filter(e.branchFilterPredicate),c=a.a.useCallback(function(n){return!e.hasBranchFilter||n===e.branchFilterId},[e]);a.a.useEffect(function(){return Object(He.autorun)(function(){e.branch&&e.map.isReady&&e.map.panToBranch(e.branch)})},[e]);var l=Object(r.useCallback)(function(e){return a.a.createElement($e,{key:"branch".concat(e.id),branch:e,isActive:c(e.id)})},[c]);return a.a.createElement(Ne.a,{model:e.map},t&&t.map(function(t){var r={key:"zone".concat(t.id),points:t.geoPolygon,priority:t.priority,color:c(t.companyBranch.id)&&t.enabled?t.zoneColor.color:P.a.greyMiddle};return t.id===n?a.a.createElement(Ye,Object.assign({},r,{onChange:e.map.updateZonePoints,onClear:e.map.clearZonePoints})):a.a.createElement(Qe,Object.assign({},r,{onFocus:function(){c(t.companyBranch.id)&&o(t.id)}}))}),i&&i.map(l))},nn=t(1487),tn=Object(Fe.observer)(function(e){var n=e.children;return Object(w.b)().user.hasSingleBranch?null:n}),rn=t(1470),an=Object(Fe.observer)(function(){var e=Xe(),n=B().routeToZoneEdit;return a.a.createElement(de.a,{text:e.hasBranchFilter?c.b._("Create zone for branch"):c.b._("Select branch to create zone"),onClick:function(){return e.createZone(n)},disabled:!e.hasBranchFilter,color:P.a.turquoise,textNextToIcon:!0,height:P.d.ButtonHeight+P.d.DefaultSizeUnit,icon:ue.a})}),on=t(1547),cn=t(1544),ln=t(469),un=t(462),dn=t(94),fn=t(463),sn=t(174),mn=t(464),bn=t(468),vn=t(465),hn=t(1520),pn=t(1693),gn=t(1549),En=t(330);function On(){var e=Object(b.a)(["\n  height: ",";\n"]);return On=function(){return e},e}function jn(){var e=Object(b.a)(["\n  font-size: 0.875rem;\n"]);return jn=function(){return e},e}function yn(){var e=Object(b.a)(["\n  font-size: 1.125rem;\n  margin-top: 0.2rem;\n"]);return yn=function(){return e},e}var wn=g.default.div(yn()),Cn=g.default.div(jn()),zn=Object(g.default)(Se.a)(On(),P.d.ButtonHeight+P.d.DefaultSizeUnit),kn=Object(hn.SortableElement)(function(e){var n=e.zone,t=e.branch,r=e.onEdit;return a.a.createElement(O.a,{key:n.id,padding:0,color:n.enabled?n.zoneColor.color:P.a.greyMiddle,onClick:r},a.a.createElement(zn,null,a.a.createElement(Pe.a,{fixedWidth:!0,padding:"0 0.5rem 0 0"},a.a.createElement(En.a,null,a.a.createElement(de.a,{icon:pn.a}))),a.a.createElement(Pe.a,{widthGrowIndex:1},a.a.createElement(wn,null,n.name," [P".concat(n.priority,"]")),a.a.createElement(Cn,null,t.name)),a.a.createElement(Pe.a,{padding:"0"},a.a.createElement(gn.a,null))))});function xn(){var e=Object(b.a)(["\n  margin-top: 0.5rem;\n  cursor: arrow;\n"]);return xn=function(){return e},e}var In=Object(hn.SortableContainer)(g.default.div(xn())),Pn=ln.a([un.a(dn.a(["companyBranch","name"])),fn.a(sn.a("priority"))]),Sn=mn.a(function(e){return e.companyBranch.id}),Bn=function(e){var n,t,o=e.branches,i=e.zones,c=e.zoneModel,l=e.onZoneEdit,u=function(e,n){return a.a.createElement(kn,{key:e.id,zone:e,branch:o.find(bn.a("id",e.companyBranch.id)),index:n,collection:e.companyBranch.id,onEdit:function(){return l(e.id)}})};if(1===o.length){var d=Pn(i);n=d.map(u),t=function(e){var n=e.oldIndex,t=e.newIndex,r=d[n];c.changeZonePriority(r,n,t)}}else{var f=vn.a(Pn,Sn(i));n=o.map(function(e){var n=f[e.id];return n?function(e,n){return a.a.createElement(r.Fragment,{key:e.id},a.a.createElement(cn.a,null,e.name),n.map(u))}(e,n):null}),t=function(e){var n=e.oldIndex,t=e.newIndex,r=e.collection,a=f[r][n];c.changeZonePriority(a,n,t)}}return a.a.createElement(In,{useDragHandle:!0,lockAxis:"y",onSortEnd:t},n)},Fn=function(){var e=_e(),n=Xe(),t=B().routeToZoneEdit;return null===e?a.a.createElement(on.a,{primaryOpacity:.2,secondaryOpacity:.2}):null===n.brand?a.a.createElement(cn.a,null,a.a.createElement(F.Trans,{id:"Select brand to see its zones"})):a.a.createElement(Bn,{zoneModel:n,zones:e.filter(n.zoneFilterPredicate),branches:n.root.user.filterBranches(n.branchFilterPredicate),onZoneEdit:t})},Mn=t(1469),Zn=t(1497),Rn=t(1569),Ln=Object(Fe.observer)(function(){var e=Object(w.b)(),n=e.user,t=e.zone,r=n.branches,o=a.a.useCallback(function(e){return null===e?[]:n.branches.filter(k.a.pathEq(["brand","id"],e.id))},[n.branches]);if(a.a.useEffect(function(){return Object(He.autorun)(function(){1===r.length&&t.setBranchFilter(k.a.head(r))})},[r,t]),r.length<=1)return null;var i=1===n.brands.length?k.a.head(n.brands):null;return i&&t.setBrandFilter(i,o(t.brand)),a.a.createElement(a.a.Fragment,null,!i&&a.a.createElement(Rn.a,{selectedBrand:t.brand,onSelection:function(e){null===e?t.clearBrandFilter():t.setBrandFilter(e,o(e))}}),!i&&a.a.createElement(Mn.a,null),a.a.createElement(Zn.a,{branches:o(t.brand),selectedBranch:t.branch,autoFocus:Boolean(i),formatOptionLabel:k.a.prop("name"),isClearable:!0,onSingleSelection:function(e){e?t.setBranchFilter(e):t.clearBranchFilter()}}))});function An(){var e=Object(b.a)(["\n  flex: 1 1 0;\n  min-height: 0;\n"]);return An=function(){return e},e}function Tn(){var e=Object(b.a)(["\n  flex: 0 0 auto;\n"]);return Tn=function(){return e},e}function _n(){var e=Object(b.a)(["\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n"]);return _n=function(){return e},e}var Dn=g.default.div(_n()),Vn=g.default.div(Tn()),Gn=g.default.div(An()),Hn=a.a.memo(function(){var e=Object(w.b)().zone;return Object(rn.a)(function(n){e.setBranchFilter(n)}),a.a.createElement(Dn,null,a.a.createElement(Vn,null,a.a.createElement(tn,null,a.a.createElement(O.a,null,a.a.createElement(Ln,null))),a.a.createElement(E.a,{mutationName:"createZone"},a.a.createElement(an,null))),a.a.createElement(Gn,null,a.a.createElement(nn.a,null,a.a.createElement(Fn,null))))}),Nn=function(e){var n=e.match,t=Boolean(n.params.zoneId);return a.a.createElement(Te,null,a.a.createElement(u.a,{pageTitle:c.b._("Delivery zones"),useBackButton:!0,backRoute:"/settings"},a.a.createElement(l.a,{widthInColumns:6,column:10,rowInMobile:2,withScrollArea:t},t?a.a.createElement(Ge,null):a.a.createElement(Hn,null)),a.a.createElement(l.a,{widthInColumns:10,rowInMobile:1,forcePercentHeightInMobile:60},a.a.createElement(en,null))))};t.d(n,"ZoneMenuRoutes",function(){return Un});var Un=function(){var e=B().getRouteToZone;return a.a.createElement(o.Switch,null,a.a.createElement(o.Route,{path:e(":zoneId?"),component:Nn}),a.a.createElement(o.Route,{component:i.a}))};n.default=Un}}]);
//# sourceMappingURL=184.ba150749.chunk.js.map