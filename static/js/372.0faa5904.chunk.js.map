{"version":3,"sources":["helpers/form.ts","atoms/IconLine.tsx","hooks/useAccessGuard.ts","atoms/SelectControl.tsx","atoms/CanMutate.tsx","atoms/NoAccess.tsx","components/filters/BranchesFilter.tsx","atoms/Headline.tsx","atoms/FlexRowSingle.tsx","atoms/FlexColumn.tsx","atoms/ScrollArea.tsx","molecules/PageLayoutFullHeightItem.tsx","hooks/useUserModel.ts","atoms/HorizontalSeparator.tsx","segments/order/hooks/useOrderListModel.ts","hooks/useDropdownFilter.ts","atoms/FormGrid.tsx","atoms/Loading.tsx","atoms/Printer.tsx","../node_modules/@speedlo/assets/flags sync /^/.*/.svg$","../node_modules/@speedlo/assets/logos sync /^/logo/-.*/.svg$","segments/dashboard/atoms/DashboardButton.tsx","molecules/PageLayoutItem.tsx","atoms/CanQuery.tsx","hooks/useDropdownSingle.ts","components/forms/FormDropdownMulti.tsx","atoms/CursorContainer.tsx","atoms/CompanyBranch.tsx","molecules/CompanyBranchDropdown.tsx","atoms/CardDock.tsx","hooks/useQueryParams.ts","components/forms/FormSubmitButton.tsx","segments/dashboard/molecules/DashboardPage.tsx","atoms/DateTimeFormatProvider.tsx","atoms/TimeBadge.tsx","atoms/LinkStyled.tsx","hooks/useDropdownMulti.ts","segments/order/atoms/DeliveryTimeBadge.tsx","molecules/ConfirmButton.tsx","components/forms/FormDropdownSingle.tsx","atoms/DeliveryMinutes.tsx","segments/order/atoms/CustomerIdentity.tsx","segments/order/molecules/NoteLine.tsx","hooks/useConfirmWithTimeout.ts","atoms/FlexDiv.tsx","segments/order/hooks/useOrderModel.ts","segments/order/hooks/useTimeSelectionDialog.tsx","hooks/useSmartDialog.tsx","../node_modules/resolve-pathname/esm/resolve-pathname.js","atoms/FlexAutoHeight.tsx","components/filters/OccasionsFilter.tsx","components/filters/SectorsFilter.tsx","../webpack:/ReactDropdownTreeSelect/webpack/universalModuleDefinition","../webpack:/ReactDropdownTreeSelect/webpack/bootstrap","../webpack:/ReactDropdownTreeSelect/node_modules/prop-types/index.js","../webpack:/ReactDropdownTreeSelect/external {\"root\":\"React\",\"commonjs2\":\"react\",\"commonjs\":\"react\",\"amd\":\"react\"}","../webpack:/ReactDropdownTreeSelect/node_modules/classnames/bind.js","../webpack:/ReactDropdownTreeSelect/node_modules/react-infinite-scroll-component/lib/index.js","../webpack:/ReactDropdownTreeSelect/node_modules/array.partial/index.js","../webpack:/ReactDropdownTreeSelect/node_modules/prop-types/factoryWithThrowingShims.js","../webpack:/ReactDropdownTreeSelect/node_modules/prop-types/lib/ReactPropTypesSecret.js","../webpack:/ReactDropdownTreeSelect/src/utils/generateUID.js","../webpack:/ReactDropdownTreeSelect/src/utils/dataset.js","../webpack:/ReactDropdownTreeSelect/src/utils/isEmpty.js","../webpack:/ReactDropdownTreeSelect/src/utils/isOutsideClick.js","../webpack:/ReactDropdownTreeSelect/src/utils/debounce.js","../webpack:/ReactDropdownTreeSelect/src/tag/index.js","../webpack:/ReactDropdownTreeSelect/src/a11y/index.js","../webpack:/ReactDropdownTreeSelect/src/input/index.js","../webpack:/ReactDropdownTreeSelect/src/trigger/index.js","../webpack:/ReactDropdownTreeSelect/src/tree-node/action.js","../webpack:/ReactDropdownTreeSelect/src/tree-node/actions.js","../webpack:/ReactDropdownTreeSelect/src/checkbox/index.js","../webpack:/ReactDropdownTreeSelect/src/radio/index.js","../webpack:/ReactDropdownTreeSelect/src/tree-node/node-label.js","../webpack:/ReactDropdownTreeSelect/src/tree-node/toggle.js","../webpack:/ReactDropdownTreeSelect/src/tree-node/index.js","../webpack:/ReactDropdownTreeSelect/src/tree/index.js","../webpack:/ReactDropdownTreeSelect/src/tree-manager/getPartialState.js","../webpack:/ReactDropdownTreeSelect/src/tree-manager/flatten-tree.js","../webpack:/ReactDropdownTreeSelect/src/tree-manager/nodeVisitor.js","../webpack:/ReactDropdownTreeSelect/src/tree-manager/keyboardNavigation.js","../webpack:/ReactDropdownTreeSelect/src/tree-manager/index.js","../webpack:/ReactDropdownTreeSelect/src/index.js","atoms/FlexRow.tsx","atoms/RelativeLink.tsx","segments/order/atoms/OrderStarIndicator.tsx","segments/order/molecules/OrderTicker.tsx","segments/order/molecules/ContactLines.tsx","segments/order/molecules/OrderCountLine.tsx","segments/order/molecules/OrderWarePriceLine.tsx","segments/order/molecules/OrderDetailTotals.tsx","../node_modules/@material-ui/icons/esm/FormatListNumbered.js","segments/order/molecules/OrderIdLine.tsx","../node_modules/@material-ui/icons/esm/Announcement.js","segments/order/molecules/OrderRuleLines.tsx","../node_modules/@material-ui/icons/esm/Timelapse.js","segments/order/atoms/OrderTimeLabel.tsx","segments/order/molecules/OrderStats.tsx","segments/order/molecules/OrderTimeLine.tsx","segments/order/molecules/OrderWareLine.tsx","segments/order/molecules/OrderWareList.tsx","../node_modules/@material-ui/icons/esm/Menu.js","molecules/HamburgerMenu.tsx","segments/order/molecules/OrderCancelButton.tsx","segments/order/molecules/OrderDeliveryToPickup.tsx","molecules/SelectButton.tsx","segments/order/molecules/PaymentMethodDropdown.tsx","segments/order/molecules/OrderPaymentMethod.tsx","segments/order/molecules/OrderStarButton.tsx","segments/order/molecules/OrderStateButton.tsx","segments/order/atoms/OrderDriverSelect.tsx","segments/order/molecules/OrderStateDeliver.tsx","segments/order/molecules/OrderStateFlowContainer.tsx","../node_modules/@material-ui/icons/esm/Schedule.js","segments/order/molecules/OrderStateTimeNotification.tsx","segments/order/molecules/OrderTransferToBranch.tsx","segments/order/organisms/OrderStateFlow.tsx","segments/order/organisms/OrderDetail.tsx","segments/order/atoms/OrderBox.tsx","../node_modules/@material-ui/core/esm/Grid/Grid.js","../node_modules/normalize-scroll-left/esm/main.js","../node_modules/@material-ui/core/esm/Tab/Tab.js","../node_modules/@material-ui/core/esm/internal/animate.js","../node_modules/@material-ui/core/esm/Tabs/ScrollbarSize.js","../node_modules/@material-ui/core/esm/Tabs/TabIndicator.js","../node_modules/@material-ui/core/esm/internal/svg-icons/KeyboardArrowLeft.js","../node_modules/@material-ui/core/esm/internal/svg-icons/KeyboardArrowRight.js","../node_modules/@material-ui/core/esm/Tabs/TabScrollButton.js","../node_modules/@material-ui/core/esm/Tabs/Tabs.js","../../../src/DateTimePicker/DateTimePickerTabs.tsx","../../../src/_shared/icons/DateRangeIcon.tsx","../../../src/_shared/icons/TimeIcon.tsx","../../../src/DateTimePicker/DateTimePickerToolbar.tsx","../../../src/DateTimePicker/DateTimePicker.tsx","atoms/InputDateTime.tsx","atoms/InputDate.tsx","components/forms/FormInputDate.tsx","../node_modules/@material-ui/icons/esm/AccessTime.js","../node_modules/@material-ui/icons/esm/Note.js","../node_modules/@material-ui/icons/esm/CancelOutlined.js","../node_modules/@material-ui/icons/esm/Star.js","../node_modules/@material-ui/icons/esm/Phone.js","../node_modules/@material-ui/icons/esm/MailOutline.js","../node_modules/@material-ui/icons/esm/DirectionsCar.js","../node_modules/@material-ui/icons/esm/Assignment.js","../node_modules/@material-ui/icons/esm/AllInbox.js","segments/dashboard/pages/StatsDashboardPage.tsx","segments/overview/molecules/ClosureHistoryFilter.tsx","components/filters/BranchFilter.tsx","segments/overview/organisms/ClosureHistoryLoader.tsx","segments/overview/molecules/ClosureHistoryTable.tsx","segments/overview/molecules/ClosureCurrentButton.tsx","segments/overview/molecules/ClosureStatisticsFilter.tsx","segments/overview/pages/ClosureHistoryPage.tsx","../node_modules/@material-ui/icons/esm/Print.js","molecules/TouchButtonPrint.tsx","atoms/MonospaceOutput.tsx","segments/overview/molecules/ClosureStatisticsContent.tsx","segments/overview/molecules/ClosureHistoryButton.tsx","segments/overview/molecules/ClosureSubmitButton.tsx","segments/overview/organisms/ClosureStatisticsControl.tsx","segments/overview/pages/ClosurePage.tsx","components/filters/CountryFilter.tsx","components/filters/DriversFilter.tsx","segments/overview/hooks/useStatsFilter.tsx","segments/overview/molecules/OrdersStatisticsList.tsx","segments/overview/molecules/OrdersStatisticsSummary.tsx","components/forms/FormInputDateTime.tsx","segments/overview/molecules/StatisticsPrimaryFilter.tsx","segments/overview/organisms/OrdersStatisticsLoader.tsx","segments/overview/pages/OrdersStatisticsPage.tsx","components/filters/CashboxesFilter.tsx","components/filters/CashiersFilter.tsx","components/filters/OriginsFilter.tsx","segments/overview/molecules/SalesStatisticsContent.tsx","segments/overview/organisms/SalesStatisticsLoader.tsx","segments/overview/pages/SalesStatisticsPage.tsx","segments/overview/routes/OverviewRouting.tsx"],"names":["isFormValid","formState","errors","Object","keys","length","fieldIsRequiredMsg","fieldDescription","fieldIsPositiveNumberMsg","validateAsNumberField","yup","number","default","transform","_","origValue","parseNumber","test","fieldIsNumberMsg","value","isNaN","ARRAY_EMPTY","StyledIconLine","styled","div","labelMargin","labelWidth","labelWidthUnits","StyledGridDescription","mediaMobile","replace","StyledGridContent","IconLine","icon","label","Spacing","DefaultSizeUnit","labelSmallCaps","children","iconComponent","logError","Error","isInFormGrid","useFormGridCheck","descriptionPart","color","Colors","greyDark","className","cn","smallCaps","useAccessGuard","queries","mutations","user","useRoot","every","canQuery","canMutate","useCanQuery","useCanMutate","getControlStyles","width","minWidth","colors","invalid","border","red","backgroundColor","errorBackground","greyMiddle","margin","MarginAroundFormComponents","undefined","composeSelectControlStyles","outerStyles","control","base","state","controlStyles","selectProps","menu","menuStyles","zIndex","black","valueContainer","maxHeight","valueContainerStyles","overflowY","clearIndicator","cursor","SelectControl","hideOnSingleOption","props","options","toPrint","formatWith","getOptionLabel","formatOptionLabel","valueText","Array","isArray","map","placeholder","getPrintContent","components","ClearIndicator","styles","getStyles","innerProps","ref","restInnerProps","style","padding","CanMutate","observer","mutationName","NoAccess","useBranchesFilterEditable","createStatePersistence","BranchesFilter","React","memo","userModel","useUserModel","branches","setBranches","formatBranchName","getOptionValue","idProp","dropdownProps","useDropdownMulti","onSelectionChange","selected","filterProps","useDropdownFilter","getOptionFilter","useBranchesFilter","withUserBranchesWhenEmpty","persistedBranches","setPersistedBranches","persistenceKey","join","selectedBranches","useMemo","RM","intersection","branchesId","hasPersistedBranches","hasAccessToAllPersistedBranches","useEffect","noBranchSelected","key","Headline","h2","light","greyLight","greyDarkest","size","FlexRowSingle","flexWrap","justify","FlexColumn","fixedWidth","widthGrowIndex","ScrollArea","StyledPageLayoutFullHeightItem","mediaDesktop","widthInColumns","LayoutGridCellMargin","column","row","rowInMobile","forcePercentHeightInMobile","PageHeaderHeight","PageLayoutFullHeightItem","withScrollArea","scrollAreaId","forceHeightInMobile","isMobile","useResponsive","id","Sizer","height","heightUnit","HorizontalSeparatorStyled","HorizontalSeparator","visible","useOrderListModel","useOrderModel","list","isSearchable","filterOption","useCallback","option","rawInput","data","toLocaleLowerCase","includes","StyledFormGrid","formGridCounter","formGridContext","createContext","FormGrid","Provider","useContext","Loading","text","StyledPrinter","Printer","webpackContext","req","webpackContextResolve","__webpack_require__","o","e","code","resolve","module","exports","DashboardButton","route","canAccessWithSingleBranch","buttonProps","gridColumnSpan","gridColumn","gridRow","EMPTY_ARRAY","PageLayoutItem","gridItemProps","normalizeAccess","hasSingleBranch","layoutItem","to","DashboardButtonHeight","access","CanQuery","queryName","useDropdownSingle","find","onChange","FormDropdownMulti","fieldName","useXFormState","field","useXField","useObserver","setValue","onFocus","setTouched","touched","hasError","isDisabled","isSubmitting","CursorContainer","CompanyBranch","branch","onClick","short","showBrand","name","substr","brand","CompanyBranchDropdown","selectedBranch","onSingleSelection","onMultiSelection","isMulti","i18n","ButtonHeight","prop","closeMenuOnSelect","selection","head","CardDock","position","useQueryParams","search","window","location","searchParams","URLSearchParams","getQueryParam","param","get","createQueryString","keyValueObj","entries","FormSubmitButton","type","green","disabled","isValid","ErrorOutline","iconSize","iconColor","heartBeat","DashboardPage","isForIconDashboard","DateTimeFormatProvider","utils","DateFnsUtils","locale","DFLocale","ETimeBadgeVariant","StyledTimeBadge","white","variants","UNKNOWN","CRITICAL","WARNING","orange","NORMAL","bigNumberStyle","css","dashStyle","clickable","TimeBadge","forwardRef","minutes","variant","Variant","output","extraClassNames","push","toString","cx","pulse","LinkStyled","a","filter","cancelIconPadding","StyledDelayedTimeMark","DeliveryTimeBadge","deliverAt","deliveredAt","isCancelled","isDelayed","timerEnabled","now","useTimer","interval","MINUTE","enabled","role","aria-label","differenceInMinutes","ConfirmButton","confirmNode","initialColor","confirmColor","confirmDisableMs","resetToInitialMs","SECOND","onConfirm","useRef","useConfirmWithTimeout","confirming","FormDropdownSingle","StyledDeliveryMinutes","StyledMinutesItem","DeliveryMinutes","deliveryType","onMinuteClick","initialMinutes","useState","setSelected","getMinutesForDeliveryType","yellow","deliveryMinutes","pickupMinutes","DeliveryTypeEnum","Pickup","CustomerIdentity","customer","lastName","firstName","defaultPhone","phone","StyledCurrentNote","span","NoteLine","note","Note","setConfirming","showConfirm","current","setTimeout","confirm","timer","clearTimeout","FlexDiv","order","useTimeSelectionDialog","title","setSubmitting","useSmartDialog","content","close","finally","actions","initialOpen","useLocalStore","isOpen","open","this","renderArea","area","onClose","isAbsolute","pathname","charAt","spliceOne","index","i","k","n","pop","resolvePathname","from","hasTrailingSlash","toParts","split","fromParts","isToAbs","isFromAbs","mustEndAbs","concat","last","up","part","unshift","result","AutoHeight","OccasionsFilter","markAsAvailable","useQFilterOccasions","getStash","loading","occasions","hasAnyOccasions","noOptionsMessage","isLoading","DropdownTreeSelectMemo","texts","SectorsFilter","sectors","useQFilterSectors","hasAnySectors","treeData","getTreeFromFlatData","flatData","mapper","node","getParentKey","parent","getKey","buildForSingleBranch","sectorsPerBranch","groupBy","sector","companyBranch","isSector","branchKey","buildWithBranches","currentNode","selectedNodes","selectedSectorsId","reduce","acc","startsWith","isBranchNode","branchNode","idPropEq","noMatches","branchId","childrenToParents","forEach","child","parentKey","trav","Reflect","has","l","modules","enumerable","bind","hasOwnProperty","classes","hasOwn","classNames","__WEBPACK_AMD_DEFINE_RESULT__","loaded","target","_createClass","descriptor","protoProps","staticProps","_get","_again","_x2","_x3","_x4","desc","_react2","_propTypes2","_utilsThrottle2","_utilsThreshold","InfiniteScroll","_classCallCheck","showLoader","lastScrollTop","actionTriggered","pullToRefreshThresholdBreached","subClass","constructor","superClass","_inherits","_react","document","console","requestAnimationFrame","_this","clientHeight","threshold","overflow","WebkitOverflowScrolling","hasChildren","outerDivStyle","left","right","top","pullDownToRefreshContent","releaseToRefreshContent","pullDownToRefreshThreshold","disableBrowserPullToRefresh","next","hasMore","loader","scrollThreshold","endMessage","scrollableTarget","pullDownToRefresh","refreshFunction","onScroll","dataLength","unit","defaultThreshold","Pixel","Percent","threshhold","args","deferTimer","fn","emptyFunction","error","argIndex","invariant","ReactPropTypesSecret","secret","shim","array","bool","func","object","string","symbol","any","arrayOf","element","instanceOf","objectOf","oneOf","oneOfType","shape","ReactPropTypes","emptyFunctionWithReset","err","elementType","exact","checkPropTypes","resetWarningCache","counter","getDataset","cur","str","toLowerCase","isEmpty","isOutsideClick","Event","path","elem","parentElement","some","eventNode","debounce","wait","timeout","callNow","clientIdGenerator","WeakMap","item","set","reset","getTagId","Tag","handleClick","onDelete","stopPropagation","nativeEvent","stopImmediatePropagation","keyCode","onKeyDown","preventDefault","onKeyUp","indexOf","PureComponent","labelRemove","readOnly","tagId","buttonId","external_root_React_commonjs2_react_commonjs_react_amd_react_default","aria-labelledby","aria-disabled","propTypes","PropTypes","isRequired","getAriaLabel","additionalLabelledBy","attributes","substring","trim","Input","input_classCallCheck","handleInputChange","persist","delayedCallback","onInputChange","tags","onTagRemove","inputRef","onBlur","activeDescendant","_id","tag","tagClassName","dataset","src_tag_0","aria-activedescendant","aria-autocomplete","Trigger","getAriaAttributes","mode","showDropdown","clientId","triggerId","labelledBy","labelAttributes","t","tabIndex","aria-haspopup","aria-expanded","handleTrigger","triggerNode","activeElement","onTrigger","dropdownTriggerClassname","dropdown-trigger","arrow","bottom","_this2","Action","onAction","actionData","nodeId","action","defaultProps","Actions","rest","idx","actionId","tree_node_action","refUpdater","checked","indeterminate","input","Checkbox","RadioButton","NodeLabel","handleCheckboxChange","onCheckboxChange","partial","showPartiallySelected","nodeLabelProps","sharedProps","htmlFor","src_radio","src_checkbox","simple-select","Toggle","onToggle","onNodeToggle","expanded","isLeaf","toggleCx","collapsed","aria-hidden","TreeNode","_children","_depth","keepTreeOnSearch","searchModeOn","liCx","keepChildrenOnSearch","matchInChildren","matchInParent","hide","focused","_focused","leaf","tree","match-in-children","match-in-parent","paddingLeft","liId","toggle","node_label","tree_node_actions","Tree","tree_classCallCheck","currentPage","computeInstanceProps","items","allVisibleNodes","slice","pageSize","Component","setNodeRef","lib_default","loadMore","componentWillReceiveProps","nextProps","hasSameActiveDescendant","setState","activeLi","getElementById","scrollTop","offsetTop","componentDidMount","parentNode","checkActiveDescendant","getNodes","totalPages","Math","ceil","currentId","focusIndex","findIndex","_parent","src_tree_node","nextItems","aria-multiselectable","identity","c","getPartialState","childProp","childSelector","flattenTree","simple","radio","showPartialState","hierarchical","rootPrefixId","walkNodes","nodes","depth","_rv","Map","defaultValues","singleSelectedNode","single","isDefaultValue","stateProps","markSubTreeVisited","visited","getItemById","getNodesMatching","nodePredicate","nodeVisitor","markSubTreeOnNonExpanded","Keys","NavActions","None","FocusPrevious","FocusNext","FocusParent","FocusFirst","FocusLast","ToggleExpanded","ToggleChecked","FocusActionNames","Set","validTriggerOpenKeys","validKeys","isMatchingEvent","currentFocus","nonFocusKey","keyboardNavigation","isValidKey","getAction","getNextFocus","prevFocus","getNodeById","reverse","sortedNodes","focus","keyboardNavigation_slicedToArray","nextIndex","getRelativeFocus","getNextFocusAfterTagDelete","deletedId","prevTags","fallback","newFocusId","focusNode","firstElementChild","handleFocusNavigationkey","newFocus","handleToggleNavigationkey","onToggleChecked","onToggleExpanded","TreeManager","searchPredicate","_src","simpleSelect","radioSelect","JSON","parse","stringify","searchMaps","currentChecked","searchTerm","proximity","closestMatch","m","matches","addOnMatch","_getAddOnMatch","addParentsToTree","_isMatch","ids","addChildrenToTree","getMatches","matchTree","_this3","allNodesHidden","_this4","setNodeCheckedState","prevChecked","togglePreviousChecked","partialCheckParents","unCheckParents","toggleChildren","_this5","_this6","collapseChildren","_this7","_this8","isMatch","term","_this9","DropdownTreeSelect","src_classCallCheck","initNewProps","treeManager","currentFocusNode","prevState","getTreeAndTags","resetSearchState","searchInput","restoreNodes","callback","keepDropdownActive","addEventListener","handleOutsideClick","removeEventListener","src_extends","filterTree","isKeyboardEvent","toggleNodeExpandState","keepOpenOnSelect","isSingleSelect","restoreDefaultValues","nextState","clearSearchOnChange","assign","onInputFocus","onInputBlur","onKeyboardKeyDown","tm","handleNavigationKey","lastTag","commonProps","radio-select","trigger","src_input","el","src_tree","FlexRow","RelativeLink","linkProps","resolveLocation","resolved","StyledOrderStarIndicator","OrderStarIndicator","data-testid","Icon","Star","OrderTickerStyled","Element","Color","turquoise","alpha","OrderTickerMainContentStyled","DeliveryTimeBadgeContainerStyled","AddressDisplayContainerStyled","CustomerIdentityContainerStyled","PriceContainerStyled","PaidMarkStyled","PaidTextStyled","ToBranchContainerStyled","Radiuses","Card","ToPickupLabel","violet","OrderTicker","showBranch","Date","delayedDeliveryTime","enum","address","original","formatAddress","isPriority","totalSum","formattedValue","isPaidWithCard","ContactLines","phones","emails","renderContact","contact","description","isMail","href","renderClickableLink","Phone","email","MailOutline","OrderCountLine","total","OrderWareLineWrap","NameContainerStyled","OrderWarePriceLine","price","highlight","formatPrice","StyledOrderDetailTotals","OrderDetailTotals","totals","tip","transportFee","coverPrice","totalDiscount","extraCharge","createSvgIcon","createElement","d","OrderOriginLabel","orderOrigin","OrderOriginEnum","DameJidlo","OrderIdLine","displayedId","FormatListNumbered","OrderRuleLines","rules","Announcement","OrderTimeLabel","DelayedDeliveryTimeLabel","DelayedOrderTimeLabel","OrderStats","stats","formatTimeWithoutTodayDate","driver","Timelapse","labelMap","OrderStateCategoryEnum","NewOrders","i18nMark","Preparing","ReadyToDeliver","OnWay","Finished","OrderTimeLine","orderTiming","AccessTime","reject","createdAt","orderStateCategory","timing","CodeContainerStyled","OrderWareLine","OrderWareList","orderWares","orderWare","recipe","nameLabel","sidedishes","sidedish","StyledHamburgerMenu","PopupMenu","Small","Middle","HamburgerMenu","isOpened","setIsOpened","Children","count","SizerButton","TouchButton","Menu","OrderCancelButton","orderId","useMCancelOrder","cancelOrder","OrderFlowMenuButtonWidth","OrderDeliveryToPickup","isDelivery","useMOrderChangeToPickup","changeToPickup","StyledSelectButton","SelectButton","selectNode","PaymentMethodDropdown","paymentMethods","selectedMethod","onSelection","inputStyles","method","paymentGate","OrderPaymentMethod","hasSomeMethod","useMChangePaymentMethod","changePaymentMethod","canChangePaymentMethod","setSelectedMethod","paymentMethodId","borderRadius","Button","borderTopRightRadius","borderBottomRightRadius","OrderStarButton","useMSetPriorityOrder","setPriorityOrder","stateLabels","OrderStateEnum","Accepted","OrderStateButton","useMOrderState","updateOrderState","StyledDriverName","StyledValueContainer","textColor","background","borderWidth","singleValue","fontSize","indicatorSeparator","display","OrderDriverSelect","drivers","selectedDriver","onSelect","onClear","onReload","isClearable","onMenuOpen","ValueContainer","DirectionsCar","DropdownIndicator","formatFullName","theme","blurInputOnSelect","primary","primary25","OrderStateDeliver","canRead","deliverOrder","useMSelectOrderDriver","selectDriver","useMRemoveOrderDriver","removeDriver","useQOrderDrivers","skip","refetch","stash","orderDriverId","driverId","StyledOrderStateFlowContainer","OrderStateFlowContainer","Fragment","OrderStateTimeNotification","useMOrderTimeNotification","sendTimeNotification","enqueueSuccess","useSnackBar","Messenger","onSuccess","dialog","Schedule","OrderTransferToBranch","useMTransferOrder","transferOrder","canTransferOrder","setSelectedBranch","HamburgerMenuAtLeft","OrderStateNewOrder","canCancel","OrderStateAcceptedOrder","canDeliver","OrderStateReadyToDeliverOrder","OrderStateOnWayOrder","OrderStateFinishedOrder","OrderStateFlow","useQOrderState","allowedCategories","isCancelable","StyledOrderDetail","OrderDetail","useQOrderDetail","allAppliedRules","customerOrdersCountCurrent","customerOrdersCountTotal","OrderBoxStyled","OrderBox","onToggleDetail","orderListModel","toggleOrderDetail","isDetailOpen","isOrderDetailOpen","SPACINGS","GRID_SIZES","getOffset","val","arguments","parseFloat","String","Grid","_props$alignContent","alignContent","_props$alignItems","alignItems","classNameProp","_props$component","component","_props$container","container","_props$direction","direction","_props$item","_props$justify","_props$lg","lg","_props$md","md","_props$sm","sm","_props$spacing","spacing","_props$wrap","wrap","_props$xl","xl","_props$xs","xs","_props$zeroMinWidth","zeroMinWidth","other","_objectWithoutProperties","clsx","root","_extends","cachedType","StyledGrid","withStyles","boxSizing","flexDirection","justifyContent","breakpoint","themeSpacing","generateGutter","breakpoints","accumulator","globalStyles","round","flexBasis","flexGrow","maxWidth","generateGrid","Tab","_props$disabled","_props$disableFocusRi","disableFocusRipple","fullWidth","indicator","_props$textColor","_props$wrapped","wrapped","ButtonBase","focusRipple","capitalize","labelIcon","event","wrapper","_extends2","typography","button","minHeight","flexShrink","_defineProperty","pxToRem","paddingTop","marginBottom","textColorInherit","opacity","textColorPrimary","palette","secondary","main","textColorSecondary","lineHeight","inDOM","detectScrollType","body","dummy","appendChild","createTextNode","dir","scrollLeft","removeChild","getNormalizedScrollLeft","Number","NaN","scrollWidth","clientWidth","easeInOutSin","time","sin","PI","ScrollbarSize","scrollbarHeight","nodeRef","setMeasurements","offsetHeight","handleResize","prevHeight","clear","TabIndicator","orientation","vertical","transition","transitions","create","colorPrimary","colorSecondary","_ref","KeyboardArrowLeft","_ref2","KeyboardArrowRight","TabScrollButton","Tabs","_props$centered","centered","childrenProp","_props$indicatorColor","indicatorColor","_props$orientation","_props$ScrollButtonCo","ScrollButtonComponent","_props$scrollButtons","scrollButtons","_props$TabIndicatorPr","TabIndicatorProps","_props$variant","useTheme","scrollable","isRtl","scrollStart","start","end","clientSize","_React$useState","mounted","setMounted","_React$useState2","indicatorStyle","setIndicatorStyle","_React$useState3","displayScroll","setDisplayScroll","_React$useState4","scrollerStyle","setScrollerStyle","valueToIndex","tabsRef","childrenWrapperRef","getTabsMeta","tabsMeta","tabMeta","tabsNode","rect","getBoundingClientRect","scrollLeftNormalized","tab","process","updateIndicatorState","useEventCallback","_newIndicatorStyle","_getTabsMeta","startValue","correction","newIndicatorStyle","dStart","abs","dSize","scroll","scrollValue","property","cb","_options$ease","ease","_options$duration","duration","cancelled","cancel","step","timestamp","min","animate","moveTabsScroll","delta","handleStartScrollClick","handleEndScrollClick","handleScrollbarSizeChange","scrollSelectedIntoView","_getTabsMeta2","nextScrollStart","_nextScrollStart","updateScrollButtonState","showStartScroll","showEndScroll","_tabsRef$current","scrollHeight","win","ownerWindow","handleTabsScroll","useImperativeHandle","updateIndicator","updateScrollButtons","childIndex","isValidElement","childValue","cloneElement","conditionalElements","scrollbarSizeListener","scrollButtonsActive","showScrollButtons","scrollButtonStart","scrollButtonsDesktop","scrollButtonEnd","getConditionalElements","scroller","fixed","flexContainer","flexContainerVertical","flex","whiteSpace","overflowX","scrollbarWidth","down","viewToTabIndex","openView","useStyles","makeStyles","tabsBackground","tabs","DateTimePickerTabs","view","dateRangeIcon","timeIcon","React.createElement","fill","toolbar","paddingRight","separator","DateTimePickerToolbar","date","setOpenView","ampm","hideTabs","useUtils","showTabs","useMeridiemMode","meridiemMode","handleMeridiemChange","rtl","isLandscape","wider","openTo","views","useOptions","getDefaultFormat","pick12hOr24hFormat","dateTime24hFormat","DateTimePicker","makePickerWithState","DefaultToolbarComponent","KeyboardDateTimePicker","getCustomProps","refuse","InputDateTime","formatFullDateTime","format","maxDateMessage","minDateMessage","InputDate","DatePicker","FormInputDate","pickerProps","onOpen","OverviewPage","Assignment","ROUTE_OVERVIEW_STATS_ORDERS","ROUTE_OVERVIEW_STATS_SALES","ROUTE_OVERVIEW_CLOSURE","AllInbox","ROUTE_STOCK_STATS","ClosureHistoryFilter","autoOk","useBranchFilterEditable","BranchFilter","setBranch","opt","useBranchFilter","withUserDefaultBranchWhenEmpty","persistedBranch","setPersistedBranch","hasPersistedBranch","hasAccessToPersistedBranch","Boolean","defaultBranch","context","called","ClosureHistoryLoader","useLazyQClosureHistory","execute","getNow","useNow","ctx","history","onSubmit","formValues","dateFrom","dateTo","initialValues","subDays","ClosureHistoryTable","report","Edit","reportSequence","reportDatetime","ClosureCurrentButton","ButtonToRight","ClosureStatisticsFilter","showCurrent","ClosureHistoryPage","FullPageLayout","pageTitle","useBackButton","backRoute","TouchButtonPrint","Print","print","StyledMonospaceOutput","p","StyledScrollableContainer","renderContent","RegExp","MonospaceOutput","ClosureStatisticsContent","reportId","useQClosureReport","showReport","plainData","lastReport","ClosureHistoryButton","ROUTE_OVERVIEW_CLOSURE_HISTORY","ClosureSubmitButton","ClosureStatisticsControl","useRouterContext","useMFinancialReportCreate","createClosure","async","MarginBox","ClosurePage","match","ROUTE_OVERVIEW_DASHBOARD","topContent","params","CountryFilter","useQFilterCountries","countries","DriversFilter","useQFilterDrivers","StatsFilterProvider","useStatsFilterCurrent","useStatsFilter","setFilter","dateTimeFrom","startOfDay","dateTimeTo","endOfDay","cashboxes","cashiers","occassions","origins","country","enabledFilters","enabledFiltersRef","applyFilter","values","cashBoxes","orderOrigins","sectorsWithChildren","xform","useXForm","executeFilter","api","submitForm","OrdersStatisticsList","orders","loaderRef","measureCache","CellMeasurerCache","defaultHeight","useQStatsOrdersCounts","countsLoading","clearAll","resetLoadMoreRowsCache","useLazyQStatsOrdersList","executeList","queryMoreOrders","startIndex","stopIndex","pagination","fromIndex","toIndex","shift","isRowLoaded","rowRenderer","columnIndex","rowIndex","cache","measure","Cancel","totalCount","counts","finished","rowCount","loadMoreRows","onRowsRendered","registerChild","rowHeight","deferredMeasurementCache","StyledStatPanel","StyledStatLabel","h1","StyledStatValue","OrdersStatisticsSummary","useQStatsOrders","finishedOrders","currency","onlinePayments","finishedCount","cancelledCount","fees","orderStatisticsPlain","FormInputDateTime","StyledStatisticsFilter","StatisticsPrimaryFilter","OrdersStatisticsLoader","navigate","useRouterNavigate","useRouteParams","autoFilter","mergeValues","branchesFilter","OrdersStatisticsPage","PageLayoutResponsive","showSoundControl","PageLayoutGridItem","CashboxesFilter","useQFilterCashboxes","formatCashboxName","uuid","CashiersFilter","useQFilterCashiers","OriginsFilter","useQFilterOrigins","StatsDisplay","plain","SalesStatisticsContent","useQStatsSales","sales","daily","vat","category","delivery","SalesStatisticsLoader","SalesStatisticsPage","OverviewRouting","PageTitle","SecureRoute","NotFoundPage"],"mappings":"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gBACAC,iCACQzH,kBACR0H,+EAIAC,mDAAgFH,iBAAmB,GACnG,+BACA,MACA,CAAU7Z,SACVwY,wBACA,MACA,CACAxc,kEACA8D,gBACA,uBAEAE,SAEAqS,sDACA,MACA,CACArS,OAAuBmK,qBACvBrK,gBACA,uBAGA0Y,wBACA,MACA,CACAxY,OACAmK,oBACA8P,OACAC,QACAC,mCAGA9H,+EACAA,gFAGAA,qBACAA,iEACAA,8DACAA,gDAMA,EA/PAuG,GAkQAjS,YAEAiS,gBACAwB,iDACA,KACA,KACA,wBAEAC,gDACA,KACA,KACA,sBAEAC,+BACAC,gCAGA3B,aACA4B,oBACAC,uBACAnf,wBACAof,iCACAC,yEACAC,0BACA5a,uBACAuE,wBACAsW,gCACAd,2BACAe,iCACAV,wCACAC,uCACAC,4CACAS,+BACAC,wBACAC,uCACAzY,sBAEAkE,qBAIA,cAEA,aAEAvN,sCACAgB,WAEAwM,iBAYA,YACA,yBACA,CACAuU,eACA/gB,aAIA,mBACA,6BACA,CACA+gB,aACA/gB,qBAIAwgB,4BACA,CACAO,eACA/gB,sBAIAqf,oFAEA2B,IAGA3B,2DAEA,IAzCA,OACA4B,cACAC,mBAGA1U,mBACA,OACAuU,eACA/gB,WAsCA,cAGA,aAEAhB,sCACAgB,WAEAwM,UAEA,gBAEA,QACA,OAFA2U,WAEA,WACA,cAEAnN,YACAoN,YACA3H,UAEAtC,gBACAkK,yBACA5H,IACA6H,eACQH,KAER1H,IACA6H,gBAKA/U,qBAIA,cAEA,aAWA,cACA,kBACA,UASA,mBAEAgV,gBACAA,yBACAA,wBACAA,0BACAA,6BACA,aAEAA,kCACA,UAGAhV,aAIA,gBAUA,aA4CAA,UArBA,0BAGA,OACA,MACA,cACAiV,iJACM,CACN,oBACAC,KACAD,wCACA,mBAEAvS,2BAIA,MADAuS,gBACA,KAQA,gBAWA,aAEA,WACAE,OACAC,OAEApV,qBACA,wBACAqV,OAIAF,KAEA,mLAMA,aACA,SAFAG,eAMA,OACAC,QACAC,OACAC,OACAxiB,SACAyiB,SACAC,SACAC,SAEAC,MACAC,UACAC,UACAC,aACArH,OACAsH,WACAC,QACAC,YACAC,SAMA,OAHAC,mBACAA,cAEA,IAMA,gBA8BArW,kBAMA,cAWA,aAIAA,UAFA,gDAOA,cAEAA,gBAzrBAA,YAA2BL,EAAQ,kCCDnCK,wBACA,kBACA,wECMA,MAA2BL,EAAQ,IAEnC,cACA,cACA2W,sBAEAtW,qBACA,wBACA,UAIA,gBACA,mLAKA,MADAuW,6BACA,GAGA,aACA,SAFAjB,eAMA,OACAC,QACAC,OACAC,OACAxiB,SACAyiB,SACAC,SACAC,SAEAC,MACAC,UACAC,UACAS,cACAR,aACArH,OACAsH,WACAC,QACAC,YACAC,QACAK,QAEAC,iBACAC,qBAKA,OAFAN,cAEA,iCCnDArW,UAFA,wFCRM4W,EAEAhe,kDCKSie,EANI,eAACjX,EAAD,uDAAK,GAAL,OACjBnN,OAAOC,KAAKkN,GAAG8P,QAAO,SAACC,EAAKmH,GAHV,MAKhB,OADAnH,WAJgB,EAIQmH,EAJDC,EAAI3iB,QAAQ,kBAAmB,SAAS4iB,gBAI7BpX,EAAEkX,GAC7BnH,IACN,KCCUsH,EAFC,mBAAMrX,GAAMlH,MAAMC,QAAQiH,KAAOA,EAAEjN,QCSpCukB,WAACrX,EAAG8O,GACjB,OAAM9O,aAAasX,QAfL,SAAAtX,GACd,GAAIA,EAAEuX,KAAM,OAAOvX,EAAEuX,KAKrB,IAHA,IAAIC,EAAOxX,EAAEsR,OACPiG,EAAO,CAACC,GAEPA,EAAKC,eACVD,EAAOA,EAAKC,cACZF,EAAK/J,QAAQgK,GAGf,OAAOD,EAXO,CAgBEvX,GAAG0X,MAAK,SAAA1X,GAAA,OAAa2X,IAAc7I,MCZtC8I,WAAChC,EAAMiC,GACpB,IAAIC,SAEJ,OAAO,WAAa,2BAAT9C,EAAS,qBAATA,EAAS,gBAClB,IAOM+C,GAAWD,EAEjB/M,aAAa+M,GACbA,EAAUlN,YAVI,WACZkN,EAAU,KACVlC,eAAQZ,KAQkB6C,GAExBE,GAASnC,eAAQZ,KJCVgD,GApBTjB,EAAU,EAEVhe,EAAM,IAAIkf,QAcP,CAAE5T,IAZG,YAIV,OAHKtL,EAAI4X,IAAIuH,IACXnf,EAAIof,IAAID,EAAMnB,KAakB,OAXfhe,EAAIsL,IAAI6T,IAQfE,MALA,WACZrf,EAAM,IAAIkf,QACVlB,EAAU,6aKRd,IAAMhQ,EAAKrR,IAAGqb,KAAK3X,KAENif,EAAW,mBAASva,EAAT,QAElBwa,6SAUJC,YAAc,SAAAvY,GAAK,MACQmT,EAAK7a,MAAtBwF,EADS,EACTA,GAAI0a,EADK,EACLA,SACZxY,EAAEyY,kBACFzY,EAAE0Y,YAAYC,2BACdH,EAAS1a,YAAKkC,EAAE/D,KAAO+D,EAAE4Y,aAG3BC,UAAY,SAAA7Y,GACI,cAAVA,EAAE/D,MACJkX,EAAKoF,YAAYvY,GACjBA,EAAE8Y,qBAINC,QAAU,SAAA/Y,IACU,KAAdA,EAAE4Y,SAAkB,CAAC,SAAU,SAASI,QAAQhZ,EAAE/D,MAAQ,KAC5DkX,EAAKoF,YAAYvY,GACjBA,EAAE8Y,6VA3BUG,qDA+BP,MAC2DnN,KAAKxT,MAA/DwF,EADD,EACCA,GAAInJ,EADL,EACKA,MADL,IACYukB,uBADZ,EAC0B,SAD1B,EACoCC,EADpC,EACoCA,SAAUvU,EAD9C,EAC8CA,SAE/CwU,EAAQf,EAASva,GACjBub,EAAcvb,EAAdub,UACA5jB,EAAYsR,EAAG,aAAc,CAAEoS,YAAY,CAAEvU,aAC7CvC,EAAa8W,GAAYvU,EAE/B,OACE0U,0BAAM7jB,UAAWsR,EAAG,OAAQjJ,GAAIsb,EAAOlR,aAAYvT,GAChDA,EACD2kB,4BACExb,GAAIub,EACJ3W,QAAUL,SAAayJ,KAAKyM,YAC5BM,UAAYxW,SAAayJ,KAAK+M,UAC9BE,QAAU1W,SAAayJ,KAAKiN,QAC5BtjB,UAAWA,EACXiP,KAAK,SACLwD,aAAYgR,EACZK,kBAAoBF,EAApBE,IAAgCH,EAChCI,gBAAenX,GATjBiX,YA1CFhB,KACGmB,UAAY,CACjB3b,GAAI4b,IAAU5D,OAAO6D,WACrBhlB,MAAO+kB,IAAU5D,OAAO6D,WACxBnB,SAAUkB,IAAU9D,KACpBuD,SAAUO,IAAU/D,KACpB/Q,SAAU8U,IAAU/D,KACpBuD,YAAaQ,IAAU5D,QAqDZwC,wBCtER,SAASsB,EAAajlB,EAAOklB,GAClC,IAAMC,EASR,SAAkCnlB,GAChC,OAAKA,EAIY,MAAbA,EAAM,GACD,CAAE4kB,kBAAmB5kB,EAAMolB,UAAU,GAAGxlB,QAAQ,MAAO,MAEzD,CAAE2T,aAAcvT,GAPJ,GADrB,CAT8CA,GAM5C,OAJIklB,IACFC,EAAW,qBAAwBA,EAAW,oBAAsB,IAApC,IAA0CD,GAAuBG,QAG5FF,+ZCCH/S,EAAKrR,IAAGqb,KAAK3X,KAmBb6gB,cAeJ,WAAY3hB,iGAAO4hB,uOACX5hB,IADW4hB,SAKnBC,kBAAoB,SAAAna,GAClBA,EAAEoa,UACFjH,EAAKkH,gBAAgBra,IALrBmT,EAAKkH,gBAAkBzC,GAAS,SAAA5X,GAAA,OAAKmT,EAAK7a,MAAMgiB,cAActa,EAAEsR,OAAO1d,SAAQ,KAF9DsmB,qUAfDjB,qDAyBT,MAYHnN,KAAKxT,MAVPiiB,EAFK,EAELA,KACAC,EAHK,EAGLA,YACAC,EAJK,EAILA,SAJK,IAKLpM,iBALK,EAKG,GALH,EAMLpM,EANK,EAMLA,QACAyY,EAPK,EAOLA,OACA9V,EARK,EAQLA,SACAuU,EATK,EASLA,SACAN,EAVK,EAULA,UACA8B,EAXK,EAWLA,iBAGF,OACErB,wBAAI7jB,UAAWsR,EAAG,aAzDR,eAACwT,EAAD,uDAAQ,GAAI/B,EAAZ,aAAsBW,EAAtB,aAAgCvU,EAAhC,aAA0CsU,EAA1C,oBACdqB,EAAKxhB,KAAI,YAAO,IACN6hB,EAAsCC,EAAtCD,IAAKjmB,EAAiCkmB,EAAjClmB,MAAOmmB,EAA0BD,EAA1BC,aAAcC,EAAYF,EAAZE,QAClC,OACEzB,0BAAI7jB,UAAWsR,EAAG,WAAY+T,GAAe7e,gBAAiB2e,GAAW5D,EAAW+D,IAClFzB,kBAAC0B,EAAD1B,CACE3kB,MAAOA,EACPmJ,GAAI8c,EACJpC,SAAUA,EACVW,SAAUA,EACVvU,SAAUA,EACVsU,YAAaA,QAXP,CA0DCqB,EAAMC,EAAarB,EAAUvU,EAAUyJ,EAAM6K,aACtDI,wBAAI7jB,UAAWsR,EAAG,aAChBuS,6BACE5U,KAAK,OACLE,SAAUA,EACVrL,IAAKkhB,EACLhlB,UAAWsR,EAAG,UACd/N,YAAaqV,EAAMrV,aAAe,YAClC6f,UAAWA,EACXpX,SAAUqK,KAAKqO,kBACflY,QAASA,EACTyY,OAAQA,EACRvB,SAAUA,EACV8B,wBAAuBN,EACvBO,oBAAmBrC,EAAY,eAC3Be,EAAavL,EAAM1Z,iBAxD7BslB,KACGR,UAAY,CACjBc,KAAMb,IAAUhE,MAChBrH,MAAOqL,IAAU7D,OACjByE,cAAeZ,IAAU9D,KACzB3T,QAASyX,IAAU9D,KACnB8E,OAAQhB,IAAU9D,KAClB4E,YAAad,IAAU9D,KACvBiD,UAAWa,IAAU9D,KACrB6E,SAAUf,IAAU9D,KACpBhR,SAAU8U,IAAU/D,KACpBwD,SAAUO,IAAU/D,KACpBgF,iBAAkBjB,IAAU5D,QAoDjBmE,olBClFf,IAAMlT,EAAKrR,IAAGqb,KAAK3X,KAEb+hB,6SAYJC,kBAAoB,WAAM,MACmCjI,EAAK7a,MAAxD+iB,EADgB,EAChBA,KADgB,IACVhN,iBADU,EACF,GADE,EACEiN,EADF,EACEA,aAAcC,EADhB,EACgBA,SAAUhB,EAD1B,EAC0BA,KAE5CiB,EAAeD,EAAfC,WACAC,EAAa,GACfC,EAAkB9B,EAAavL,EAAM1Z,OAqBzC,OApBI4lB,GAAQA,EAAKznB,SACX4oB,EAAgB,eAElBD,EAAW5U,KAAK2U,GAElBjB,EAAKjK,SAAQ,YACXmL,EAAW5U,KAAKwR,EAASsD,EAAEf,SAE7Bc,EAAkB9B,EAAavL,EAAM1Z,MAAO8mB,EAAWlgB,KAAK,OAG3Cue,GACjBhc,GAAI0d,EACJvT,KAAM,SACN2T,SAAU,EACVC,gBAA0B,iBAATR,EAA0B,UAAY,OACvDS,gBAAiBR,EAAe,OAAS,SACtCI,MAMPK,cAAgB,SAAA/b,GAEVA,EAAE/D,KAAqB,KAAd+D,EAAE4Y,SAAgC,KAAd5Y,EAAE4Y,SAAgC,KAAd5Y,EAAE4Y,SAE5C5Y,EAAE/D,KAAOkX,EAAK6I,aAAe7I,EAAK6I,cAAgBhJ,SAASiJ,gBAG1D9I,EAAK7a,MAAMgjB,cAA8B,KAAdtb,EAAE4Y,SAEvC5Y,EAAE8Y,iBAIJ3F,EAAK7a,MAAM4jB,UAAUlc,+UAtDHiZ,qDAyDX,aACsCnN,KAAKxT,MAA1CsM,EADD,EACCA,SAAUuU,EADX,EACWA,SAAUmC,EADrB,EACqBA,aAEtBa,EAA2BpV,EAAG,CAClCqV,sBACAC,SACAzX,WACAuU,WACAvF,IAAK0H,EACLgB,QAAShB,IAGX,OACEhC,yBACE/f,IAAK,YACHgjB,EAAKP,YAAclN,GAErBrZ,UAAW0mB,EACXzZ,QAAUkC,SAAWkH,KAAKiQ,cAC1BlD,UAAYjU,SAAWkH,KAAKiQ,eACxBjQ,KAAKsP,qBAERtP,KAAKxT,MAAMvD,gBA/EdomB,KACG1B,UAAY,CACjByC,UAAWxC,IAAU9D,KACrBhR,SAAU8U,IAAU/D,KACpBwD,SAAUO,IAAU/D,KACpB2F,aAAc5B,IAAU/D,KACxB0F,KAAM3B,IAAUrD,MAAM,CAAC,cAAe,eAAgB,cAAe,iBACrEhI,MAAOqL,IAAU7D,OACjB0F,SAAU7B,IAAU5D,OACpByE,KAAMb,IAAUhE,OA4ELyF,obC7FTqB,6SAcJjE,YAAc,WAAM,MACepF,EAAK7a,MAA9BmkB,EADU,EACVA,SAAUC,EADA,EACAA,WACdD,GACFA,EAASC,EAAWC,OAAQD,EAAWE,mVAjBxB3D,qDAqBV,MACsCnN,KAAKxT,MAA1C6S,EADD,EACCA,MAAO1V,EADR,EACQA,UAAW+J,EADnB,EACmBA,KAAM2Z,EADzB,EACyBA,SAEhC,OACEG,uBAAGnO,MAAOA,EAAO1V,UAAWA,EAAWiN,QAAUyW,SAAWrN,KAAKyM,aAC9D/Y,SA1BHgd,KACG/C,UAAY,CACjBtO,MAAOuO,IAAU5D,OACjBtW,KAAMka,IAAU5D,OAChBrgB,UAAWikB,IAAU5D,OACrB4G,WAAYhD,IAAU7D,OACtB4G,SAAU/C,IAAU9D,KACpBuD,SAAUO,IAAU/D,MAPlB6G,EAUGK,aAAe,CACpBJ,SAAU,cAqBCD,iaC7BTM,grBAAgB7D,qDAMX,MAC0BnN,KAAKxT,MAA9BmT,EADD,EACCA,QAAS3N,EADV,EACUA,GAAOif,0HADjB,oBAGP,OAAI3F,EAAQ3L,GAAiB,KAEtBA,EAAQ1S,KAAI,SAACmO,EAAG8V,GACrB,IAAMC,EAAW/V,EAAEpJ,IAAFoJ,UAAkB8V,EACnC,OAAO1D,kBAAC4D,EAAD5D,GAAQrd,IAAKghB,GAAcF,EAAU7V,EAArCoS,CAAwCoD,WAAY,CAAEE,OAAQA,KAAK1V,EAAb0V,CAAgB9e,GAAImf,IAAYN,OAAQ7e,eAbrGgf,KACGrD,UAAY,CACjB3b,GAAI4b,IAAU5D,OAAO6D,WACrBlO,QAASiO,IAAUhE,OAeRoH,iaCrBFK,EAAa,SAAC,GAAD,IAAGC,EAAH,EAAGA,QAASC,EAAZ,EAAYA,cAAZ,OAAgC,YACpDC,IACFA,EAAMF,QAAUA,EAChBE,EAAMD,cAAgBA,KAIpBE,grBAAiBtE,qDASZ,MAC2EnN,KAAKxT,MAA/E8kB,EADD,EACCA,QADD,IACUC,yBADV,KACiC5b,EADjC,EACiCA,SAAUmD,EAD3C,EAC2CA,SAAUuU,EADrD,EACqDA,SAAa4D,0HADlE,gEAGD1a,EAAauC,GAAYuU,EAE/B,OACEG,6BACE5U,KAAK,WACLnL,IAAK4jB,EAAW,CAAEC,UAASC,kBAC3B5b,SAAUA,EACVmD,SAAUvC,GACN0a,UApBNQ,KACG9D,UAAY,CACjB2D,QAAS1D,IAAU/D,KACnB0H,cAAe3D,IAAU/D,KACzBlU,SAAUiY,IAAU9D,KACpBhR,SAAU8U,IAAU/D,KACpBwD,SAAUO,IAAU/D,MAoBT4H,oaCjCFJ,GAAa,SAAC,GAAD,IAAGC,EAAH,EAAGA,QAAH,OAAiB,YACrCE,IACFA,EAAMF,QAAUA,KAIdI,irBAAoBvE,sDASf,MAC0DnN,KAAKxT,MAA9DuK,EADD,EACCA,KAAMua,EADP,EACOA,QAAS3b,EADhB,EACgBA,SAAUmD,EAD1B,EAC0BA,SAAUuU,EADpC,EACoCA,SAAa4D,0HADjD,uDAGD1a,EAAauC,GAAYuU,EAE/B,OACEG,8BACE5U,KAAK,QACL7B,KAAMA,EACNtJ,IAAK4jB,GAAW,CAAEC,YAClB3b,SAAUA,EACVmD,SAAUvC,GACN0a,UArBNS,MACG/D,UAAY,CACjB5W,KAAM6W,IAAU5D,OAAO6D,WACvByD,QAAS1D,IAAU/D,KACnBlU,SAAUiY,IAAU9D,KACpBhR,SAAU8U,IAAU/D,KACpBwD,SAAUO,IAAU/D,MAqBT6H,4lBC5Bf,IAAMzW,GAAKrR,IAAGqb,KAAK3X,MAEbqkB,+SAkBJC,qBAAuB,SAAA1d,GAAK,MACamT,EAAK7a,MAApC+iB,EADkB,EAClBA,KAAMvd,EADY,EACZA,GAAI6f,EADQ,EACRA,iBAGhBA,EAAiB7f,EADN,iBAATud,GAAoC,gBAATA,GAKzBrb,EADFsR,OAAU8L,SAIdpd,EAAEyY,kBACFzY,EAAE0Y,YAAYC,uWA9BMM,sDAiCb,MAC8CnN,KAAKxT,MAAlD+iB,EADD,EACCA,KAAMlQ,EADP,EACOA,MAAOxW,EADd,EACcA,MAAOmJ,EADrB,EACqBA,GAAI8f,EADzB,EACyBA,QAASR,EADlC,EACkCA,QADlC,EAEgEtR,KAAKxT,MAApE1E,EAFD,EAECA,MAAOgR,EAFR,EAEQA,SAAUiZ,EAFlB,EAEkBA,sBAAuB1E,EAFzC,EAEyCA,SAAUoC,EAFnD,EAEmDA,SACpDuC,EAAiB,CAAEroB,UAAW,cAIQ,iBAAT4lB,IAA4BlC,IAAavU,IAG1EkZ,EAAepb,QAAUoJ,KAAK4R,sBAGhC,IAAMK,EAAc,CAAEjgB,KAAIlK,QAAOwpB,UAASxY,WAAUuU,WAAUyC,UAAW,GAEzE,OACEtC,2BAAOnO,MAAOA,GAASxW,EAAOqpB,QAASlgB,GAC3B,gBAATud,EACC/B,kBAAC2E,GAAD3E,IAAazW,KAAM0Y,EAAU9lB,UAAU,aAAagM,SAAUqK,KAAK4R,sBAA0BK,IAE7FzE,kBAAC4E,GAAD5E,IACEzW,KAAM/E,EACNrI,UAAWsR,GAAG,gBAAiB,CAAEoX,gBAA0B,iBAAT9C,IAClDgC,cAAeQ,GAAyBD,EACxCnc,SAAUqK,KAAK4R,sBACXK,IAGRzE,yBAAUwE,EAAiBnpB,UA7D7B8oB,MACGhE,UAAY,CACjB3b,GAAI4b,IAAU5D,OAAO6D,WACrBlO,QAASiO,IAAUhE,MACnBvK,MAAOuO,IAAU5D,OACjBnhB,MAAO+kB,IAAU5D,OAAO6D,WACxB/lB,MAAO8lB,IAAU5D,OAAO6D,WACxByD,QAAS1D,IAAU/D,KACnBiI,QAASlE,IAAU/D,KACnB/Q,SAAU8U,IAAU/D,KACpBoF,QAASrB,IAAU7D,OACnBwF,KAAM3B,IAAUrD,MAAM,CAAC,cAAe,eAAgB,cAAe,iBACrEwH,sBAAuBnE,IAAU/D,KACjCgI,iBAAkBjE,IAAU9D,KAC5BuD,SAAUO,IAAU/D,KACpB4F,SAAU7B,IAAU5D,QAoDT2H,oaCxEf,IAAM1W,GAAKrR,IAAGqb,KAAK3X,MAEbglB,+SAQJC,SAAW,SAAAre,GACTA,EAAEyY,kBACFzY,EAAE0Y,YAAYC,2BACdxF,EAAK7a,MAAMgmB,aAAanL,EAAK7a,MAAMwF,OAGrC+a,UAAY,SAAA7Y,GACI,UAAVA,EAAE/D,KAAiC,KAAd+D,EAAE4Y,UACzBzF,EAAK7a,MAAMgmB,aAAanL,EAAK7a,MAAMwF,IACnCkC,EAAE8Y,8VAjBaG,sDAqBV,MACsBnN,KAAKxT,MAA1BimB,EADD,EACCA,SACR,GAFO,EACWC,OACN,OAAO,KAEnB,IAAMC,EAAW1X,GAAG,SAAU,CAAEwX,WAAUG,WAAYH,IACtD,OACEjF,uBACErR,KAAK,SACL2T,UAAW,EACXnmB,UAAWgpB,EACX/b,QAASoJ,KAAKuS,SACdxF,UAAW/M,KAAK+M,UAChB8F,yBAjCFP,MACG3E,UAAY,CACjB8E,SAAU7E,IAAU/D,KACpB6I,OAAQ9E,IAAU/D,KAClB2I,aAAc5E,IAAU9D,KACxB9X,GAAI4b,IAAU5D,QAkCHsI,ykBCnCf,IAAMrX,GAAKrR,IAAGqb,KAAK3X,MAEbolB,GAAS,mBAAYpH,EAAQriB,IAqC7B6pB,+SA2BJxD,kBAAoB,WAAM,MAC4DjI,EAAK7a,MAAjFumB,EADgB,EAChBA,UAAWC,EADK,EACLA,OAAQ1B,EADH,EACGA,QAASxY,EADZ,EACYA,SAAU2Z,EADtB,EACsBA,SAAUpF,EADhC,EACgCA,SAAUkC,EAD1C,EAC0CA,KAAMuC,EADhD,EACgDA,QAClE9D,EAAa,GAUnB,OARAA,EAAW7R,KAAgB,iBAAToT,EAA0B,SAAW,WACvDvB,EAAW,iBAAmBlV,GAAYuU,EAC1CW,EAAW,iBAAmBsD,EACjB,iBAAT/B,IACFvB,EAAW,gBAAkB8D,EAAU,QAAUR,EACjDtD,EAAW,eAAiBgF,GAAU,GAAK,EAC3ChF,EAAW,iBAAmB+E,IAAcN,EAAW,OAAS,UAE3DzE,8UAvCYb,sDA0CZ,MAuBHnN,KAAKxT,MArBP+iB,EAFK,EAELA,KACA0D,EAHK,EAGLA,iBACAnE,EAJK,EAILA,IACAiE,EALK,EAKLA,UACA9D,EANK,EAMLA,QACA+D,EAPK,EAOLA,OACAP,EARK,EAQLA,SACApT,EATK,EASLA,MACAxW,EAVK,EAULA,MACAipB,EAXK,EAWLA,QACAR,EAZK,EAYLA,QACAxpB,EAbK,EAaLA,MACAgR,EAdK,EAcLA,SACA6G,EAfK,EAeLA,QACAgR,EAhBK,EAgBLA,SACAuC,EAjBK,EAiBLA,aACAV,EAlBK,EAkBLA,aACAX,EAnBK,EAmBLA,iBACAE,EApBK,EAoBLA,sBACA1E,EArBK,EAqBLA,SACAoC,EAtBK,EAsBLA,SAEI0D,EArGQ,YAAS,IAEvBF,EAaEzmB,EAbFymB,iBACAG,EAYE5mB,EAZF4mB,qBACAL,EAWEvmB,EAXFumB,UACAM,EAUE7mB,EAVF6mB,gBACAC,EASE9mB,EATF8mB,cACAxa,EAQEtM,EARFsM,SACAgZ,EAOEtlB,EAPFslB,QACAyB,EAME/mB,EANF+mB,KACA5pB,EAKE6C,EALF7C,UACAooB,EAIEvlB,EAJFulB,sBACA1E,EAGE7gB,EAHF6gB,SACAiE,EAEE9kB,EAFF8kB,QACUkC,EACRhnB,EADFinB,SAGF,OAAOxY,GACL,OACA,CACEyY,KAAMhB,GAAOK,GACbY,MAAOjB,GAAOK,GACdja,WACAya,OACAK,oBAAqBX,GAAoBI,EACzCQ,kBAAmBZ,GAAoBG,GAAwBE,EAC/DxB,QAASC,GAAyBD,EAClCzE,WACAiE,UACAkC,WAEF7pB,GA/Bc,CAqGSqW,KAAKxT,OACtBmB,EAAQslB,IAAqBC,EAAe,CAAEY,YAAgC,IAAfd,GAAU,GAA3Bc,MAA2C,GAEzFC,EAAUjF,EAAViF,MAEN,OACEvG,2BAAI7jB,UAAWwpB,EAAMxlB,MAAOA,EAAOqE,GAAI+hB,GAAU7I,EAAW+D,GAAcjP,KAAKsP,qBAC7E9B,kBAACwG,GAADxG,CAAQkF,OAAQA,GAAOK,GAAYN,SAAUA,EAAUzgB,GAAI8c,EAAK0D,aAAcA,IAC9EhF,kBAACyG,GAADzG,CACEnO,MAAOA,EACPxW,MAAOA,EACPmJ,GAAI8c,EACJgD,QAASA,EACTR,QAASA,EACTxpB,MAAOA,EACPgR,SAAUA,EACVyW,KAAMA,EACNsC,iBAAkBA,EAClBE,sBAAuBA,EACvB1E,SAAUA,EACVoC,SAAUA,IAEZjC,kBAAC0G,EAAD1G,CAAS7N,QAASA,EAASgR,SAAUA,EAAU3e,GAAI8c,EAAKzB,SAAUA,WAxFpEyF,MACGnF,UAAY,CACjBmB,IAAKlB,IAAU5D,OAAO6D,WACtBmF,OAAQpF,IAAUtmB,OAClByrB,UAAWnF,IAAUhE,MACrBjK,QAASiO,IAAUhE,MACnBjgB,UAAWikB,IAAU5D,OACrB3K,MAAOuO,IAAU5D,OACjBnhB,MAAO+kB,IAAU5D,OAAO6D,WACxB/lB,MAAO8lB,IAAU5D,OAAO6D,WACxByD,QAAS1D,IAAU/D,KACnB4I,SAAU7E,IAAU/D,KACpB/Q,SAAU8U,IAAU/D,KACpBiI,QAASlE,IAAU/D,KACnBoF,QAASrB,IAAU7D,OACnBkJ,iBAAkBrF,IAAU/D,KAC5BuJ,qBAAsBxF,IAAU/D,KAChCqJ,aAActF,IAAU/D,KACxB2I,aAAc5E,IAAU9D,KACxB6G,SAAU/C,IAAU9D,KACpB+H,iBAAkBjE,IAAU9D,KAC5ByF,KAAM3B,IAAUrD,MAAM,CAAC,cAAe,eAAgB,cAAe,iBACrEwH,sBAAuBnE,IAAU/D,KACjCwD,SAAUO,IAAU/D,KACpB4F,SAAU7B,IAAU5D,QAsET8I,qaCjITqB,eAsBJ,WAAY3nB,iGAAO4nB,uOACX5nB,IADW4nB,kBAGjB/M,EAAKgN,YAAc,EACnBhN,EAAKiN,qBAAqB9nB,MAE1B6a,EAAK5b,MAAQ,CACX8oB,MAAOlN,EAAKmN,gBAAgBC,MAAM,EAAGpN,EAAK7a,MAAMkoB,WAPjCN,qUAtBFO,kDAgIR,IACCzB,EAAiBlT,KAAKxT,MAAtB0mB,aAER,OACE1F,2BAAI7jB,mBAAmBupB,EAAe,eAAiB,IAAMzlB,IAAKuS,KAAK4U,YAAgB5U,KAAKsP,qBACzFtP,KAAKvU,MAAM+c,kBACVgF,kBAACqH,IAADrH,CACE5E,WAAY5I,KAAKvU,MAAM8oB,MAAMvtB,OAC7BmhB,KAAMnI,KAAK8U,SACX1M,QAASpI,KAAKoI,UACdC,OAAQmF,0BAAM7jB,UAAU,gBAAhB6jB,cACRhF,iBAAkBxI,KAAKvU,MAAM+c,kBAE5BxI,KAAKvU,MAAM8oB,cA7IlBJ,MACGxG,UAAY,CACjB5a,KAAM6a,IAAU7D,OAChBkJ,iBAAkBrF,IAAU/D,KAC5BuJ,qBAAsBxF,IAAU/D,KAChCqJ,aAActF,IAAU/D,KACxBlU,SAAUiY,IAAU9D,KACpB0I,aAAc5E,IAAU9D,KACxB6G,SAAU/C,IAAU9D,KACpB+H,iBAAkBjE,IAAU9D,KAC5ByF,KAAM3B,IAAUrD,MAAM,CAAC,cAAe,eAAgB,cAAe,iBACrEwH,sBAAuBnE,IAAU/D,KACjC6K,SAAU9G,IAAUtmB,OACpB+lB,SAAUO,IAAU/D,KACpB4F,SAAU7B,IAAU5D,OACpB6E,iBAAkBjB,IAAU5D,QAf1BmK,GAkBGpD,aAAe,CACpB2D,SAAU,uCAcZK,0BAA4B,YAAa,IAC/BlG,EAAqBmG,EAArBnG,iBACFoG,EAA0BpG,IAAqB4B,EAAKjkB,MAAMqiB,iBAChE4B,EAAK6D,qBAAqBU,GAAYC,GACtCxE,EAAKyE,SAAS,CAAEX,MAAO9D,EAAK+D,gBAAgBC,MAAM,EAAGhE,EAAK4D,YAAc5D,EAAKjkB,MAAMkoB,YAAa,WAC9F,IAAIO,EAAJ,CADoG,IAE5FzM,EAAqBiI,EAAKhlB,MAA1B+c,iBACF2M,EAAWtG,GAAoB3H,UAAYA,SAASkO,eAAevG,GACrEsG,GAAY3M,IACdA,EAAiB6M,UAAYF,EAASG,WAAa9M,EAAiBlB,aAAe6N,EAAS7N,cAAgB,aAKlHiO,kBAAoB,WAClB9E,EAAKyE,SAAS,CAAE1M,iBAAkBiI,EAAKzN,KAAKwS,mBAG9ClB,qBAAuB,SAAC9nB,EAAOipB,GAG7B,GAFAhF,EAAK+D,gBAAkB/D,EAAKiF,SAASlpB,GACrCikB,EAAKkF,WAAaC,KAAKC,KAAKpF,EAAK+D,gBAAgBxtB,OAASypB,EAAKjkB,MAAMkoB,UACjEe,GAAyBjpB,EAAMqiB,iBAAkB,CACnD,IAAMiH,EAAYtpB,EAAMqiB,iBAAiBpmB,QAAQ,OAAQ,IACnDstB,EAAatF,EAAK+D,gBAAgBwB,WAAU,mBAAKrV,EAAExQ,MAAQ2lB,KAAa,EAC9ErF,EAAK4D,YAAc0B,EAAa,EAAIH,KAAKC,KAAKE,EAAatF,EAAKjkB,MAAMkoB,UAAY,SAItFgB,SAAW,YAAS,IAEhB3iB,EAaEvG,EAbFuG,KACAkgB,EAYEzmB,EAZFymB,iBACAG,EAWE5mB,EAXF4mB,qBACAF,EAUE1mB,EAVF0mB,aACA3D,EASE/iB,EATF+iB,KACAwC,EAQEvlB,EARFulB,sBACA1E,EAOE7gB,EAPF6gB,SACAsD,EAMEnkB,EANFmkB,SACAhb,EAKEnJ,EALFmJ,SACAkc,EAIErlB,EAJFqlB,iBACAW,EAGEhmB,EAHFgmB,aACA3D,EAEEriB,EAFFqiB,iBACAY,EACEjjB,EADFijB,SAEI8E,EAAQ,GAuBd,OAtBAxhB,EAAKyR,SAAQ,sBAvFSxB,EAAMkQ,EAAcngB,GAC5C,GAAImgB,GAAgBlQ,EAAKyP,SAAU,OAAO,EAE1C,IAAMvP,EAASF,EAAKiT,SAAWljB,EAAKwF,IAAIyK,EAAKiT,SAG7C,OAAQ/S,GAAUA,EAAOuP,UAiFV,CACUzP,EAAMkQ,EAAcngB,IACvCwhB,EAAMxZ,KACJyS,kBAAC0I,GAAD1I,IACEyF,iBAAkBA,EAClBG,qBAAsBA,EACtBjjB,IAAK6S,EAAK8L,KACN9L,EAJNwK,CAKE0F,aAAcA,EACdvd,SAAUA,EACVkc,iBAAkBA,EAClBW,aAAcA,EACd7B,SAAUA,EACVpB,KAAMA,EACNwC,sBAAuBA,EACvB1E,SAAUA,EACVoC,SAAUA,EACVZ,iBAAkBA,SAKnB0F,QAGTnM,QAAU,kBAAMqI,EAAK4D,YAAc5D,EAAKkF,iBAExCb,SAAW,WACTrE,EAAK4D,YAAc5D,EAAK4D,YAAc,EACtC,IAAM8B,EAAY1F,EAAK+D,gBAAgBC,MAAM,EAAGhE,EAAK4D,YAAc5D,EAAKjkB,MAAMkoB,UAC9EjE,EAAKyE,SAAS,CAAEX,MAAO4B,UAGzBvB,WAAa,YACXnE,EAAKzN,KAAOA,QAGdsM,kBAAoB,WAAM,IAChBC,EAASkB,EAAKjkB,MAAd+iB,KASR,MAPmB,CAGjBpT,KAAe,iBAAToT,EAA0B,UAAY,OAC5C6G,uBAAwB,2BAA2BxuB,KAAK2nB,MA2B/C4E,yBClKTkC,GAAW,mBAAKC,GAEPC,YAACvT,GAADuT,IAAOC,EAAPD,uDAAmB,WAAYE,EAA/BF,uDAA+CF,GAA/CE,OACbzE,KAAQ9O,EAAKwT,IAAY,mBAAKC,EAAcH,GAAGhF,YAAYtO,EAAKwT,GAAW5K,MAAK,mBAAK6K,EAAcH,GAAGxE,YCqRzF4E,GA7Gf,YAA4F,IAArE/C,EAAqE,EAArEA,KAAMgD,EAA+D,EAA/DA,OAAQC,EAAuD,EAAvDA,MAAOC,EAAgD,EAAhDA,iBAAkBC,EAA8B,EAA9BA,aAAcC,EAAgB,EAAhBA,aAI1E,OA6BF,SAASC,EAAT,GAUG,IATDC,EASC,EATDA,MACA/T,EAQC,EARDA,OAQC,IAPDgU,iBAOC,EAPO,EAOP,EANDP,EAMC,EANDA,OACAC,EAKC,EALDA,MACAC,EAIC,EAJDA,iBACAC,EAGC,EAHDA,aACAC,EAEC,EAFDA,aAEC,IADDI,eACC,EADK,CAAE1kB,KAAM,IAAI2kB,IAAOC,cAAe,GAAIC,mBAAoB,MAC/D,EACKC,EAASZ,GAAUC,EA8DzB,OA7DAK,EAAMzS,SAAQ,SAACxB,EAAMvC,GACnBuC,EAAKgQ,OAASkE,EAEVhU,GACFF,EAAK8L,IAAM9L,EAAKhR,IAASkR,EAAO4L,IAArB9L,IAA4BvC,EACvCuC,EAAKiT,QAAU/S,EAAO4L,IACtB5L,EAAO6P,UAAUhY,KAAKiI,EAAK8L,MAE3B9L,EAAK8L,IAAM9L,EAAKhR,IAALgR,IAAc+T,EAAkBA,EAAlBA,IAAkCtW,EAAMA,GAG/D8W,GAAUvU,EAAKsO,UACb6F,EAAIG,mBACNtU,EAAKsO,WAEL6F,EAAIG,mBAAqBtU,GAIzBuU,GAAUvU,EAAKwU,gBAAkBL,EAAIG,qBAAuBH,EAAIG,mBAAmBE,iBAErFL,EAAIG,mBAAmBhG,WACvB6F,EAAIG,mBAAqB,OAGvBtU,EAAKwU,gBAAoBD,GAAuC,IAA7BJ,EAAIE,cAAcrwB,SACvDmwB,EAAIE,cAActc,KAAKiI,EAAK8L,KAC5B9L,EAAKsO,WACDiG,IACFJ,EAAIG,mBAAqBtU,IAIxB8T,IAAgBF,GAzDzB,SAA8B5T,GAE5B,IAFsE,IAApCE,EAAoC,uDAA3B,GACrCuU,EADgE,yDACR,CAAC,YAA3B,CAAC,UAAW,YACvCjX,EAAQ,EAAGA,EAAQiX,EAAWzwB,OAAQwZ,IAAS,CACtD,IAAM/I,EAAOggB,EAAWjX,YAGpBwC,EAAKvL,aAAuByL,EAAOzL,KACrCuL,EAAKvL,GAAQyL,EAAOzL,KAP1B,CAyDqDuL,EAAME,GAAS0T,GAEhEO,EAAI1kB,KAAK4Z,IAAIrJ,EAAK8L,IAAK9L,IAClB2T,GAAU3T,EAAK/Z,WAClB+Z,EAAK+P,UAAY,GACjBiE,EAAU,CACRC,MAAOjU,EAAK/Z,SACZia,OAAQF,EACRkU,MAAOA,EAAQ,EACfN,QACAC,mBACAC,eACAK,QAGEN,IAAqB7T,EAAKsO,UAC5BtO,EAAK8O,QAAUyE,GAAgBvT,GAG1BuU,GAAWjM,EAAQtI,EAAK/Z,YAAa+Z,EAAK/Z,SAASkB,OAAM,mBAAKmsB,EAAEhF,aACnEtO,EAAKsO,aAITtO,EAAK/Z,oBAIFkuB,EAzET,CA7BmB,CACfF,MAJalqB,MAAMC,QAAQ2mB,GAAQA,EAAO,CAACA,GAK3CgD,SACAC,QACAC,mBACAC,eACAC,kBCrLEW,GAAqB,SAArBA,EAAsB1U,EAAM2U,EAASC,GACzCD,EAAQ3U,EAAK8L,QACRxD,EAAQtI,EAAK+P,YAChB/P,EAAK+P,UAAUvO,SAAQ,mBAAKkT,EAAmBE,EAAYtB,GAAIqB,EAASC,OAItEC,GAAmB,SAAClE,EAAMmE,GAC9B,IAAMb,EAAQ,GACRU,EAAU,GAYhB,OAVAhE,EAAKnP,SAAQ,SAACxB,EAAM7S,GACdwnB,EAAQxnB,KAER2nB,EAAc9U,EAAM7S,EAAKwnB,IAC3BV,EAAMlc,KAAKiI,GAGb2U,EAAQxnB,UAGH8mB,GAgBMc,GAJbF,GAIaE,GAbS,SAACpE,EAAMiE,EAAaI,GAApB,OACtBH,GAAiBlE,GAAM,SAAC3Q,EAAM7S,EAAKwnB,GAIjC,OAHIK,GAA4BhV,EAAK+P,WAAa/P,EAAK+P,UAAU/rB,aAAUgc,EAAKyP,UAC9EiF,GAAmB1U,EAAM2U,EAASC,IAE5B5U,EAAKuQ,SAQFwE,GAFbL,kZClCIO,GACA,UADAA,GAEE,YAFFA,GAGE,YAHFA,GAIG,aAJHA,GASM,WAGCC,GAAa,CACxBC,KAAM,OACNC,cAAe,gBACfC,UAAW,YACXC,YAAa,cACbC,WAAY,aACZC,UAAW,YACXC,eAAgB,iBAChBC,cAAe,iBAGJC,GAAmB,IAAIC,IAAI,CACtCV,GAAWE,cACXF,GAAWG,UACXH,GAAWI,YACXJ,GAAWK,WACXL,GAAWM,YAGPK,GAAuB,CAACZ,GAASA,GAzB/B,OACE,SACH,MAuB6EA,IAC9Ea,GAAYD,GAAqBvX,OAAO,CAAC2W,GAAWA,GA3BjD,UAkCHc,GAAkB,SAAC5oB,EAAKpJ,EAAMiyB,EAAcC,GAA1B,OACtBlyB,EAAKmmB,QAAQ/c,IAAQ,IAAO6oB,GAAgB7oB,IAAQ8oB,GA0IhDC,GAAqB,CACzBC,WAjJiB,SAAChpB,EAAK2P,GAEvB,OADoBA,EAASgZ,GAAYD,IACtB3L,QAAQ/c,IAAQ,GAgJnCipB,UA9FgB,SAACJ,EAAc7oB,GAa/B,OAXIA,IAAQ8nB,GArCW,SAACe,EAAc7oB,GACtC,OAAK6oB,GAAgB7oB,IAAQ8nB,QAEzBe,EAAavG,SACRyF,GAAWO,eAEhBO,EAAa/C,QACRiC,GAAWI,YAGbJ,GAAWC,KAT6BD,GAAWC,KADnC,CAsCKa,EAAc7oB,GAC/BA,IAAQ8nB,GA1BK,SAACe,EAAc7oB,GACvC,OAAK6oB,GAAiBA,EAAajG,WAAa5iB,IAAQ8nB,QAIjDe,EAAavG,SAAoByF,GAAWO,eAAiBP,GAAWG,UAHtEH,GAAWC,KAFI,CA2BKa,EAAc7oB,GAjDnB,SAACA,EAAK6oB,GAAN,OAAuBD,GAAgB5oB,EAAK,CApC9D,OACE,UAmCsF6oB,EAAcf,IAApF,CAkDK9nB,EAAK6oB,GACvBd,GAAWK,WAjDC,SAACpoB,EAAK6oB,GAAN,OAAuBD,GAAgB5oB,EAAK,CApC9D,MAoCyE8nB,IAAgBe,EAAcf,IAArF,CAkDK9nB,EAAK6oB,GACtBd,GAAWM,UAvBE,SAACQ,EAAc7oB,GACvC,IAAK6oB,EAAc,OAAOd,GAAWC,KACrC,OAAQhoB,GACN,KAAK8nB,GACH,OAAOC,GAAWE,cACpB,KAAKH,GACH,OAAOC,GAAWG,UACpB,IA1EK,QA2EH,OAAOH,GAAWQ,cACpB,QACE,OAAOR,GAAWC,MAVE,CAyBKa,EAAc7oB,IAoF3CkpB,aAtDmB,SAAC1F,EAAM2F,EAAWxI,EAAQyI,EAAavB,GAC1D,GAAIlH,IAAWoH,GAAWI,YACxB,OA3BmB,SAACgB,EAAWC,GAAZ,OACrBD,GAAaA,EAAUrD,QAAUsD,EAAYD,EAAUrD,SAAWqD,EAD7C,CA2BGA,EAAWC,GAEnC,IAAKZ,GAAiB9T,IAAIiM,GACxB,OAAOwI,EAGT,IAAIrC,EAAQc,GAA4BpE,EAAM4F,EAAavB,GAK3D,OA9F8B,mBAC9Be,GAAgBjI,EAAQ,CAACoH,GAAWE,cAAeF,GAAWM,eADhC,CA0FF1H,KAC1BmG,EAAQA,EAAMuC,WAxBO,SAACC,EAAaH,EAAWxI,GAChD,IAAK2I,GAAsC,IAAvBA,EAAYzyB,OAC9B,OAAOsyB,EAGT,IAAII,EAAQJ,EAMZ,OANYA,SArEe,UAAUP,GAAgBjI,EAAQ,CAACoH,GAAWK,WAAYL,GAAWM,eAqEpFc,CACaxI,GACrB4I,EAD8BC,GACrBF,EADqBE,MAEvB,CAACzB,GAAWE,cAAeF,GAAWG,WAAWnL,QAAQ4D,IAAW,IAC7E4I,EAjB8B,SAACD,EAAaH,GAC9C,IAAMM,EAAYH,EAAYvM,QAAQoM,GAAa,EACnD,OAAIM,EAAYH,EAAYzyB,QAAW,EAC9ByyB,EAAY,GAEdA,EAAYG,GALa,CAiBIH,EAAaH,IAE1CI,EAgBAG,CAAiB5C,EAAOqC,EAAWxI,IA0C1CgJ,2BAvCiC,SAACC,EAAWC,EAAUvL,EAAMwL,GAE7D,IAAIzZ,EAAQwZ,GAAYA,EAAShE,WAAU,SAAAnG,GAAA,OAAKA,EAAEf,MAAQiL,KAC1D,GAAIvZ,EAAQ,IAAMiO,EAAKznB,OAAQ,OAAOizB,EAGtC,IAAMC,EAAazL,EADnBjO,EAAQiO,EAAKznB,OAASwZ,EAAQA,EAAQiO,EAAKznB,OAAS,GACrB8nB,IACzBqL,EAAYjT,SAASkO,eAAe7I,EAAS2N,IACnD,OAAIC,GACKA,EAAUC,mBAEZH,GA6BPI,yBA1B+B,SAAC1G,EAAM7C,EAAQwI,EAAWC,EAAavB,GACtE,IAAMsC,EAAWpB,GAAmBG,aAAa1F,EAAM2F,EAAWxI,EAAQyI,EAAavB,GAIvF,OAHIsB,GAAagB,GAAYhB,EAAUxK,MAAQwL,EAASxL,MACtDwK,EAAU7F,aAER6G,GACFA,EAAS7G,YACF6G,EAASxL,KAEXwK,GAAaA,EAAUxK,KAkB9ByL,0BAfgC,SAACzJ,EAAQwI,EAAWjM,EAAUmN,EAAiBC,GAM/E,OALI3J,IAAWoH,GAAWQ,eAAkBrL,GAAciM,EAAUjM,UAAYiM,EAAUxgB,SAE/EgY,IAAWoH,GAAWO,gBAC/BgC,EAAiBnB,EAAUxK,KAF3B0L,EAAgBlB,EAAUxK,SAAKwK,EAAUhI,SAIpCgI,GAAaA,EAAUxK,MAYjBoK,4PC0GAwB,cAjSb,cAAkF,IAApE3nB,EAAoE,EAApEA,KAAMwc,EAA8D,EAA9DA,KAAMwC,EAAwD,EAAxDA,sBAAuBgF,EAAiC,EAAjCA,aAAc4D,EAAmB,EAAnBA,8GAAmB,QAChF3a,KAAK4a,KAAO7nB,EACZiN,KAAK6a,aAAwB,iBAATtL,EACpBvP,KAAK8a,YAAuB,gBAATvL,EACnBvP,KAAK8W,aAAwB,iBAATvH,EACpBvP,KAAK2a,gBAAkBA,EALyD,MAM5BjE,GAAY,CAC9D/C,KAAMoH,KAAKC,MAAMD,KAAKE,UAAUloB,IAChC4jB,OAAQ3W,KAAK6a,aACbjE,MAAO5W,KAAK8a,YACZjE,iBAAkB9E,EAClB+E,aAAc9W,KAAK8W,aACnBC,iBANMtkB,EANwE,EAMxEA,KAAM4kB,EANkE,EAMlEA,cAAeC,EANmD,EAMnDA,mBAQ7BtX,KAAK2T,KAAOlhB,EACZuN,KAAKqX,cAAgBA,EACrBrX,KAAK6W,kBAAoB7W,KAAK8W,cAAgB/E,EAC9C/R,KAAKkb,WAAa,IAAI9D,KAEjBpX,KAAK6a,cAAgB7a,KAAK8a,cAAgBxD,IAE7CtX,KAAKmb,eAAiB7D,EAAmBxI,oDAIjC9c,GACV,OAAOgO,KAAK2T,KAAKpb,IAAIvG,sCAGZopB,GAAY,WACrB,GAAIpb,KAAKkb,WAAWrW,IAAIuW,GACtB,OAAOpb,KAAKkb,WAAW3iB,IAAI6iB,GAG7B,IAAIC,GAAa,EACbC,EAAeF,EACnBpb,KAAKkb,WAAW1W,SAAQ,SAAC+W,EAAGprB,GACtBirB,EAAWnX,WAAW9T,IAAQA,EAAInJ,OAASq0B,IAC7CA,EAAYlrB,EAAInJ,OAChBs0B,EAAenrB,MAInB,IAAMqrB,EAAU,GAEVC,EAAazb,KAAK0b,eAAeF,EAASJ,GAUhD,OARIE,IAAiBF,EACEpb,KAAKkb,WAAW3iB,IAAI+iB,GAC5B9W,SAAQ,mBAAOiX,EAAWpU,EAAKkS,YAAYppB,OAExD6P,KAAK2T,KAAKnP,QAAQiX,GAGpBzb,KAAKkb,WAAW7O,IAAI+O,EAAYI,GACzBA,2CAGQxpB,EAAI2hB,GACnB,YAAI3hB,EAAkB,CACpB,IAAMgR,EAAOhD,KAAKuZ,YAAYvnB,GAC9BgO,KAAK2b,iBAAiB3Y,EAAKiT,QAAStC,GACpC3Q,EAAKuQ,MAAOvQ,EAAK4Y,UAAW5Y,EAAKuQ,KACjCvQ,EAAKqQ,mBACLM,EAAKtH,IAAIra,EAAIgR,8CAIC6Y,EAAKlI,EAAM6H,GAAS,oBAChCK,GACFA,EAAIrX,SAAQ,YACV,IAAIgX,IAAWA,EAAQvoB,SAASjB,GAAhC,CAIA,IAAMgR,EAAOyN,EAAK8I,YAAYvnB,GAC9BgR,EAAKsQ,iBACLK,EAAKtH,IAAIra,EAAIgR,GACbyN,EAAKqL,kBAAkB9Y,EAAK+P,UAAWY,0CAKlCyH,EAAYnI,EAAkBG,GAAsB,WACvDoI,EAAUxb,KAAK+b,WAAWX,EAAW/P,eAErC2Q,EAAY,IAAI5E,IAEtBoE,EAAQhX,SAAQ,YACd,IAAMxB,EAAOiZ,EAAK1C,YAAYgC,GAC9BvY,EAAKuQ,QAGLvQ,EAAK4Y,YAED3I,GAEFgJ,EAAKN,iBAAiB3Y,EAAKiT,QAAS+F,GAEtCA,EAAU3P,IAAIkP,EAAGvY,GACbiQ,GAAoBG,GAEtB6I,EAAKH,kBAAkB9Y,EAAK+P,UAAWiJ,EAAWR,MAItD,IAAMU,EAAoC,IAAnBV,EAAQx0B,OAM/B,OAFAgZ,KAAKgc,UAAYA,EAEV,CAAEE,iBAAgBvI,KAAMqI,0CAQ/B,OAJAhc,KAAK2T,KAAKnP,SAAQ,YAChBxB,EAAKuQ,WAGAvT,KAAK2T,oDAGS,WAKrB,OAJA3T,KAAKqX,cAAc7S,SAAQ,YACzB2X,EAAKC,oBAAoBpqB,SAGpBgO,KAAK2T,mDAGQ3hB,EAAIsf,GACxB,IAAM+K,EAAcrc,KAAKmb,eAIrBkB,GAAeA,IAAgBrqB,IAAIgO,KAAKuZ,YAAY8C,GAAa/K,YAErEtR,KAAKmb,eAAiB7J,EAAUtf,EAAK,iDAGnBA,EAAIsf,GACtB,IAAMtO,EAAOhD,KAAKuZ,YAAYvnB,GAC9BgR,EAAKsO,QAAUA,EAGXtR,KAAK6W,mBACP7T,EAAK8O,YAGH9R,KAAK6a,aACP7a,KAAKsc,sBAAsBtqB,EAAIsf,GACtBtR,KAAK8a,aACd9a,KAAKsc,sBAAsBtqB,EAAIsf,GAC3BtR,KAAK6W,kBACP7W,KAAKuc,oBAAoBvZ,GAEtBsO,GACHtR,KAAKwc,eAAexZ,KAGjBhD,KAAK8W,cAAc9W,KAAKyc,eAAezqB,EAAIsf,GAE5CtR,KAAK6W,kBACP7W,KAAKuc,oBAAoBvZ,GAGtBhD,KAAK8W,cAAiBxF,GACzBtR,KAAKwc,eAAexZ,2CAUXA,GAEb,IADA,IAAIE,EAASF,EAAKiT,QACX/S,GAAQ,CACb,IAAMiF,EAAOnI,KAAKuZ,YAAYrW,GAC9BiF,EAAKmJ,WACLnJ,EAAK2J,QAAUyE,GAAgBpO,EAAM,YAAanI,KAAKuZ,YAAYtU,KAAKjF,OACxEkD,EAASiF,EAAK8N,qDASEjT,GAElB,IAFwB,WACpBE,EAASF,EAAKiT,QACX/S,GAAQ,CACb,IAAMiF,EAAOnI,KAAKuZ,YAAYrW,GAC9BiF,EAAKmJ,QAAUnJ,EAAK4K,UAAU5oB,OAAM,mBAAKuyB,EAAKnD,YAAYjD,GAAGhF,WAC7DnJ,EAAK2J,QAAUyE,GAAgBpO,EAAM,YAAanI,KAAKuZ,YAAYtU,KAAKjF,OACxEkD,EAASiF,EAAK8N,gDAIHjkB,EAAIvG,GAAO,WAClBuX,EAAOhD,KAAKuZ,YAAYvnB,GAC9BgR,EAAKsO,QAAU7lB,EAEXuU,KAAK6W,mBACP7T,EAAK8O,YAGFxG,EAAQtI,EAAK+P,YAChB/P,EAAK+P,UAAUvO,SAAQ,mBAAMmY,EAAKF,eAAezqB,EAAIvG,oDAInCuG,GACpB,IAAMgR,EAAOhD,KAAKuZ,YAAYvnB,GAG9B,OAFAgR,EAAKyP,UAAYzP,EAAKyP,SACjBzP,EAAKyP,UAAUzS,KAAK4c,iBAAiB5Z,GACnChD,KAAK2T,8CAGG3Q,GAAM,WACrBA,EAAKyP,YACAnH,EAAQtI,EAAK+P,YAChB/P,EAAK+P,UAAUvO,SAAQ,mBAAKqY,EAAKD,iBAAiBC,EAAKtD,YAAYjD,gDAsBrE,MAAO,CAAE3C,KAAM3T,KAAK2T,KAAMlF,KAAMzO,KAAKyO,kDAGnBuK,EAAcrF,EAAMxjB,EAAKkd,EAAU2K,EAA0BwC,EAAiBC,GAAkB,WAC5GnB,EAAYN,GAAgBhZ,KAAKuZ,YAAYP,GAE7ClI,EAASoI,GAAmBE,UAAUE,EAAWnpB,GAEvD,OAAIwoB,GAAiB9T,IAAIiM,GACNoI,GAAmBmB,yBAClC1G,EACA7C,EACAwI,GAPgB,mBAAMwD,EAAKvD,YAAYvnB,KASvCgmB,GAKCsB,GAAc3F,EAAK9O,IAAIyU,EAAUxK,KAK/BoK,GAAmBqB,0BAA0BzJ,EAAQwI,EAAWjM,EAAUmN,EAAiBC,GAHzFzB,yCAMIwC,EAASJ,GACtB,IAAI2B,EAAU,SAAC/Z,EAAMga,GAAP,OAAgBha,EAAKna,MAAMwiB,cAAc6B,QAAQ8P,IAAS,GAKxE,MAJoC,mBAAzBhd,KAAK2a,kBACdoC,EAAU/c,KAAK2a,iBAGV,YACDoC,EAAQ/Z,EAAMoY,IAChBI,EAAQzgB,KAAKiI,EAAK8L,mCArDb,WACT,OAAI9O,KAAK8a,aAAe9a,KAAK6a,aACvB7a,KAAKmb,eACA,CAACnb,KAAKuZ,YAAYvZ,KAAKmb,iBAEzB,GAGFpD,GAA6B/X,KAAK2T,MAAM,SAAC3Q,EAAM7S,EAAKwnB,GAKzD,OAJI3U,EAAKsO,UAAY2L,EAAKnG,cAExBiB,GAA+B/U,EAAM2U,GAAS,mBAAMsF,EAAK1D,YAAYvnB,MAEhEgR,EAAKsO,iBA8CHoJ,GA9CGpJ,2ZCpOZrW,GAAKrR,IAAGqb,KAAK3X,KAEb4vB,eAoCJ,WAAY1wB,iGAAO2wB,uOACX3wB,IADW2wB,SASnBC,aAAe,YAA0E,IAAvErqB,EAAuE,EAAvEA,KAAMwc,EAAiE,EAAjEA,KAAMC,EAA2D,EAA3DA,aAAcuC,EAA6C,EAA7CA,sBAAuB4I,EAAsB,EAAtBA,gBACjEtT,EAAKgW,YAAc,IAAI3C,GAAY,CACjC3nB,OACAwc,OACAwC,wBACAgF,aAAc1P,EAAKoI,SACnBkL,oBAGF,IAAM2C,EAAmBjW,EAAK5b,MAAMutB,cAAgB3R,EAAKgW,YAAY9D,YAAYlS,EAAK5b,MAAMutB,cACxFsE,IACFA,EAAiB7J,aAEnBpM,EAAK6N,UAAS,uBACZ1F,aAAc,iBAAiB5nB,KAAK4nB,SAAiB+N,EAAU/N,cAC5DnI,EAAKgW,YAAYG,sBAxBLL,EA4BnBM,iBAAmB,WAGjB,OADApW,EAAKqW,YAAY51B,MAAQ,GAClB,CACL6rB,KAAMtM,EAAKgW,YAAYM,eACvBzK,gBACAgJ,oBAlCeiB,EAkDnB1Q,YAAc,SAACvY,EAAG0pB,GAChBvW,EAAK6N,UAAS,YAEZ,IAAM1F,EAA2C,WAA5BnI,EAAK7a,MAAMgjB,cAA6BnI,EAAKwW,qBAAuBN,EAAU/N,aAcnG,OAXIA,IAAiB+N,EAAU/N,eACzBA,EACFtI,SAAS4W,iBAAiB,QAASzW,EAAK0W,uBAExC7W,SAAS8W,oBAAoB,QAAS3W,EAAK0W,wBAI3CvO,EAAcnI,EAAK7a,MAAM2J,UACxBkR,EAAK7a,MAAMoiB,SAERY,EAA8D,CAAEA,gBAAjEyO,IAAkBzO,gBAAiBnI,EAAKoW,sBAC9CG,IApEcT,EAuEnBY,mBAAqB,SAAA7pB,GACa,WAA5BmT,EAAK7a,MAAMgjB,cAA8BjE,EAAerX,EAAGmT,EAAKrE,OAIpEqE,EAAKoF,eA5EY0Q,EA+EnB3O,cAAgB,YAAS,MACUnH,EAAKgW,YAAYa,WAChDp2B,EACAuf,EAAK7a,MAAMymB,iBACX5L,EAAK7a,MAAM4mB,sBAHL8I,EADe,EACfA,eAAgBvI,EADD,EACCA,KAKlBT,EAAeprB,EAAMd,OAAS,EAEpCqgB,EAAK6N,SAAS,CACZvB,OACAT,eACAgJ,oBA1FeiB,EA8FnBzO,YAAc,SAAC1c,EAAImsB,GAAoB,IACvBnE,EAAa3S,EAAK5b,MAAxBgjB,KACRpH,EAAKwK,iBAAiB7f,MAAW,YAC1BmsB,GAELjF,GAAmBY,2BAA2B9nB,EAAIgoB,EAAUvL,EAAMpH,EAAKqW,aAAahE,YAnGrEyD,EAuGnB3K,aAAe,YACbnL,EAAKgW,YAAYe,sBAAsBpsB,GACvC,IAAM2hB,EAAOtM,EAAK5b,MAAMynB,aAAe7L,EAAKgW,YAAYrB,UAAY3U,EAAKgW,YAAY1J,KACrFtM,EAAK6N,SAAS,CAAEvB,SACmB,mBAA5BtM,EAAK7a,MAAMgmB,cAA+BnL,EAAK7a,MAAMgmB,aAAanL,EAAKgW,YAAY9D,YAAYvnB,KA3GrFmrB,EA8GnBtL,iBAAmB,SAAC7f,EAAIsf,EAASsM,GAAa,MACTvW,EAAK7a,MAAhC+iB,EADoC,EACpCA,KAAM8O,EAD8B,EAC9BA,iBACdhX,EAAKgW,YAAYjB,oBAAoBpqB,EAAIsf,GACzC,IAAI7C,EAAOpH,EAAKgW,YAAY5O,KACtB6P,EAAiB,CAAC,eAAgB,eAAepR,QAAQqC,IAAS,EAClEC,IAAe8O,IAAmBD,IAA2BhX,EAAK5b,MAAM+jB,aAEzEf,EAAKznB,SACRqgB,EAAKgW,YAAYkB,uBACjB9P,EAAOpH,EAAKgW,YAAY5O,MAG1B,IACM+P,EAAY,CAChB7K,KAFWtM,EAAK5b,MAAMynB,aAAe7L,EAAKgW,YAAYrB,UAAY3U,EAAKgW,YAAY1J,KAGnFlF,OACAe,iBAGG8O,IAAmB9O,GAAiBnI,EAAK7a,MAAMiyB,sBAClD33B,OAAO43B,OAAOF,EAAWnX,EAAKoW,oBAG5Ba,IAAmB9O,GACrBtI,SAAS8W,oBAAoB,QAAS3W,EAAK0W,uBAG7C1W,EAAK6N,SAASsJ,GAAW,WACvBZ,GAAYA,EAASnP,MAEvBpH,EAAK7a,MAAMmJ,SAAS0R,EAAKgW,YAAY9D,YAAYvnB,GAAKyc,IA5IrC0O,EA+InBxM,SAAW,SAACE,EAAQC,GAClBzJ,EAAK7a,MAAMmkB,SAAStJ,EAAKgW,YAAY9D,YAAY1I,GAASC,IAhJzCqM,EAmJnBwB,aAAe,WACbtX,EAAKwW,uBApJYV,EAuJnByB,YAAc,WACZvX,EAAKwW,uBAxJYV,EA2JnB/M,UAAY,SAAAlc,GACVmT,EAAKoF,YAAYvY,GAAG,WAEdmT,EAAK5b,MAAM+jB,cACbnI,EAAKqW,YAAYhE,YA/JJyD,EAoKnB0B,kBAAoB,SAAA3qB,GAAK,MACImT,EAAK7a,MAAxB6gB,EADe,EACfA,SAAUkC,EADK,EACLA,KADK,EAEoClI,EAAK5b,MAAxD+jB,EAFe,EAEfA,aAAcf,EAFC,EAEDA,KAAMyE,EAFL,EAEKA,aAAc8F,EAFnB,EAEmBA,aACpC8F,EAAKzX,EAAKgW,YACV1J,EAAOT,EAAe4L,EAAG9C,UAAY8C,EAAGnL,KAE9C,GAAKnE,IAAiB0J,GAAmBC,WAAWjlB,EAAE/D,UAAe,QAAQvI,KAAKsM,EAAE/D,KAK7E,GAAIqf,GAAgB0J,GAAmBC,WAAWjlB,EAAE/D,QAAY,CACrE,IAAMmqB,EAAWwE,EAAGC,oBAClB/F,EACArF,EACAzf,EAAE/D,IACFkd,GACC6F,EACD7L,EAAKwK,iBACLxK,EAAKmL,cAEH8H,IAAatB,GACf3R,EAAK6N,SAAS,CAAE8D,aAAcsB,QAE3B,IAAI9K,GAAgB,CAAC,SAAU,OAAOtC,QAAQhZ,EAAE/D,MAAQ,EAQ7D,YAPa,iBAATof,GAA2BoE,EAAK9O,IAAImU,GACtC3R,EAAKwK,iBAAiBmH,OAGtB3R,EAAKwW,sBACLxW,EAAKoF,gBAGF,GAAc,cAAVvY,EAAE/D,MAAuBse,EAAKznB,QAA4C,IAAlCqgB,EAAKqW,YAAY51B,MAAMd,OAIxE,OAHA,IAAMg4B,EAAUvQ,EAAK7N,MACrByG,EAAKwK,iBAAiBmN,EAAQlQ,aAzB9B,GAFA5a,EAAEoa,UACFjH,EAAKoF,YAAY,MAAM,kBAAMpF,EAAKwX,kBAAkB3qB,MAChD,MAAMtM,KAAKsM,EAAE/D,KAAM,OA6BzB+D,EAAE8Y,kBA3MemQ,EA8MnB7N,kBAAoB,WAAM,MACAjI,EAAK7a,MAArB+iB,EADgB,EAChBA,KAAMhN,EADU,EACVA,MAEd,MAAa,gBAATgN,EAA+B,GAEnC0O,IACE9hB,KAAM,cACH2R,EAAavL,EAAM1Z,SAnNxBwe,EAAK5b,MAAQ,CACXynB,gBACA8F,qBAEF3R,EAAKoI,SAAWjjB,EAAMwF,IAAMka,EAAkB3T,IAAlB2T,GANXiR,qUApCYxI,8DA2E7B3U,KAAKod,aAAapd,KAAKxT,sDAIvB0a,SAAS8W,oBAAoB,QAAShe,KAAK+d,yBAAoB,gDAGvC/I,GACxBhV,KAAKod,aAAapI,oCA0KX,aACqChV,KAAKxT,MAAzCsM,EADD,EACCA,SAAUuU,EADX,EACWA,SAAUkC,EADrB,EACqBA,KAAMhN,EAD3B,EAC2BA,MAD3B,EAEsCvC,KAAKvU,MAA1C+jB,EAFD,EAECA,aAAcwJ,EAFf,EAEeA,aAAcvK,EAF7B,EAE6BA,KAI9BwQ,EAAc,CAAEnmB,WAAUuU,WAAUwB,iBAFjBmK,EAAkBA,EAAlBA,aAEmCzW,QAAOgN,OAAME,SAAUzP,KAAKyP,UAExF,OACEjC,yBACExb,GAAIgO,KAAKyP,SACT9lB,UAAWsR,GAAG+E,KAAKxT,MAAM7C,UAAW,8BACpC8D,IAAK,YACHgjB,EAAKzN,KAAOA,IAGdwK,yBACE7jB,UAAWsR,GACT,WACA,CAAEoX,gBAA0B,iBAAT9C,GACnB,CAAE2P,eAAyB,gBAAT3P,KAGpB/B,kBAAC2R,EAAD3R,IAAS4C,UAAWpQ,KAAKoQ,UAAWZ,aAAcA,GAAkByP,EAApEzR,CAAiFiB,KAAMA,IACrFjB,kBAAC4R,EAAD5R,IACEmB,SAAU,YACR8B,EAAKiN,YAAc2B,GAErB5Q,KAAMA,EACND,cAAexO,KAAKwO,cACpBrY,QAAS6J,KAAK2e,aACd/P,OAAQ5O,KAAK4e,YACblQ,YAAa1O,KAAK0O,YAClB3B,UAAW/M,KAAK6e,mBACZI,KAGPzP,GACChC,4BAAK7jB,UAAU,oBAAuBqW,KAAKsP,qBACxCtP,KAAKvU,MAAMywB,eACV1O,0BAAM7jB,UAAU,cAAc4Y,EAAM8B,WAAa,oBAEjDmJ,kBAAC8R,GAAD9R,IACEza,KAAMiN,KAAKvU,MAAMkoB,KACjBV,iBAAkBjT,KAAKxT,MAAMymB,iBAC7BG,qBAAsBpT,KAAKxT,MAAM4mB,qBACjCF,aAAclT,KAAKvU,MAAMynB,aACzBvC,SAAU3Q,KAAK2Q,SACfkB,iBAAkB7R,KAAK6R,iBACvBW,aAAcxS,KAAKwS,aACnBjD,KAAMA,EACNwC,sBAAuB/R,KAAKxT,MAAMulB,uBAC9BkN,aAjThB/B,MACGvP,UAAY,CACjB5a,KAAM6a,IAAUpD,UAAU,CAACoD,IAAU7D,OAAQ6D,IAAUhE,QAAQiE,WAC/D4Q,oBAAqB7Q,IAAU/D,KAC/BoJ,iBAAkBrF,IAAU/D,KAC5BuJ,qBAAsBxF,IAAU/D,KAChCwU,iBAAkBzQ,IAAU/D,KAC5BtH,MAAOqL,IAAUnD,MAAM,CACrBvd,YAAa0gB,IAAU5D,OACvB3F,UAAWuJ,IAAU5D,OACrBnhB,MAAO+kB,IAAU5D,OACjBoD,YAAaQ,IAAU5D,SAEzBwF,aAAc5B,IAAUrD,MAAM,CAAC,UAAW,UAAW,WACrD5gB,UAAWikB,IAAU5D,OACrBrU,SAAUiY,IAAU9D,KACpB6G,SAAU/C,IAAU9D,KACpB0I,aAAc5E,IAAU9D,KACxB3T,QAASyX,IAAU9D,KACnB8E,OAAQhB,IAAU9D,KAClByF,KAAM3B,IAAUrD,MAAM,CAAC,cAAe,eAAgB,cAAe,iBACrEwH,sBAAuBnE,IAAU/D,KACjC/Q,SAAU8U,IAAU/D,KACpBwD,SAAUO,IAAU/D,KACpB7X,GAAI4b,IAAU5D,OACd2Q,gBAAiB/M,IAAU9D,MAzBzBoT,GA4BGnM,aAAe,CACpB5a,QAAS,aACTyY,OAAQ,aACRjZ,SAAU,aACV4M,MAAO,GACPiN,aAAc,WA2RH0N,kB,2SC/UR,IAAMqC,EAAUr3B,YAAOgX,IAAPhX,CAAH,IAGSuB,IAAOwB,a,kICEvBu0B,EAA6C,SAAC,GAAD,IACxDpqB,EADwD,EACxDA,GACA0L,EAFwD,EAExDA,KACG2e,EAHqD,oCAKxD,kBAAC,IAAD,CACEx2B,SAAU,gBAAGiP,EAAH,EAAGA,SAAH,OACR,kBAAC,IAAD,eACE9C,GAAIsqB,EAAgBtqB,EAAI0L,GAAI,UAAO5I,EAASmI,SAAhB,OACxBof,QAML,SAASC,EAAgBtqB,EAAwB0L,GACtD,GAAkB,kBAAP1L,EACT,OAAOyL,YAAgBzL,EAAI0L,GAE7B,IAAM6e,EAAW9e,YAAgBzL,EAAGiL,UAAY,GAAIS,GACpD,OAAO,eAAK1L,EAAZ,CAAgBiL,SAAUsf,M,+UCvB5B,IAAMC,EAA2B13B,IAAOC,IAAV,KAOjB03B,EAA+B,WAC1C,OACE,kBAACD,EAAD,CAA0BE,cAAY,sBACpC,kBAACC,EAAA,EAAD,CAAMn3B,KAAMo3B,IAAMx2B,MAAOC,IAAOyQ,W,0kDCMtC,IAAM+lB,EAAoB/3B,YAAOg4B,UAAPh4B,CAAH,IAICi4B,IAAM12B,IAAO22B,WAC9BC,MAAM,KACNrW,SAGiBmW,IAAM12B,IAAO22B,WAC9BC,MAAM,IACNrW,UAIDsW,EAA+Bp4B,IAAOC,IAAV,KAO5Bo4B,EAAmCr4B,IAAOC,IAAV,KAGhCq4B,EAAgCt4B,IAAOC,IAAV,KAI7Bs4B,EAAkCv4B,IAAOC,IAAV,KAI/Bu4B,EAAuBx4B,IAAOC,IAAV,KAKpBw4B,EAAiBz4B,IAAOC,IAAV,IAcQsB,IAAOyQ,QAM7B0mB,EAAiB14B,IAAOC,IAAV,IACTsB,IAAOyQ,QAGL2mB,EAA0B34B,IAAOC,IAAV,IAGR24B,IAASC,KACft3B,IAAOoP,MAClBpP,IAAOoQ,OAGZmnB,EAAgB94B,IAAOC,IAAV,IAERsB,IAAOw3B,QAGLC,EAA2C,SAAC,GAKlD,IAJL/hB,EAII,EAJJA,MACAxD,EAGI,EAHJA,YACAwlB,EAEI,EAFJA,WACAvqB,EACI,EADJA,QAoBA,OACE,kBAACqpB,EAAD,CAAmBrpB,QAASA,EAASG,KAAI,gBAAWoI,EAAMnN,KACvDmvB,GACC,kBAACN,EAAD,KACG1hB,EAAMqE,cAAczM,MAIzB,kBAACupB,EAAD,KACE,kBAACC,EAAD,KACE,kBAAC/kB,EAAA,EAAD,CACEC,UAAW0D,EAAM1D,UAAY,IAAI2lB,KAAKjiB,EAAM1D,WAAa,KACzDC,YAAayD,EAAMzD,YAAc,IAAI0lB,KAAKjiB,EAAMzD,aAAe,KAC/DC,YAAaA,EACbC,UAAyC,OAA9BuD,EAAMkiB,uBAIrB,kBAACb,EAAD,KAnCiB,OAAjBrhB,EAAMoE,OACDpE,EAAMoE,OAAOxM,KAGpBoI,EAAM9B,cACN8B,EAAM9B,aAAaikB,OAASxjB,IAAiBC,OAG3C,kBAACijB,EAAD,KACE,kBAAC,QAAD,mBAIF7hB,EAAMoiB,QAAQC,SAAiBriB,EAAMoiB,QAAQC,SAC1CC,YAActiB,EAAMoiB,UAyBvB,kBAACd,EAAD,KACE,kBAACziB,EAAA,EAAD,CAAkBC,SAAUkB,EAAMlB,YAGpC,kBAACyiB,EAAD,KACGvhB,EAAMuiB,YAAc,kBAAC,EAAD,MACpBviB,EAAMwiB,SAASC,eACfziB,EAAM0iB,gBACL,oCACE,kBAAClB,EAAD,CAAgBb,cAAY,aAC5B,kBAACc,EAAD,KACE,kBAAC,QAAD,mB,oECxIHkB,EAA6C,SAAC,GAGpD,IAFLC,EAEI,EAFJA,OACAC,EACI,EADJA,OAWMC,EAAgB,SAACC,GAAD,OACpB,kBAACv5B,EAAA,EAAD,CAAUC,KAAMs5B,EAAQt5B,KAAMuH,IAAK+xB,EAAQp6B,MAAOM,YAAY,KAC5D,yBAAKiX,MAAO6iB,EAAQC,aAAe,IAXX,SAACD,GAAD,OAC1BA,EAAQE,OACN,kBAACjnB,EAAA,EAAD,CAAYknB,KAAI,iBAAYH,EAAQp6B,QAAUo6B,EAAQp6B,OAEtD,kBAACqT,EAAA,EAAD,CAAYknB,KAAI,cAASH,EAAQp6B,MAAMW,QAAQ,OAAQ,MACpDy5B,EAAQp6B,OAORw6B,CAAoBJ,MAI3B,OACE,qCACIH,EAAO/6B,OAAS,GAAKg7B,EAAOh7B,OAAS,IAAM,kBAACqL,EAAA,EAAD,MAC5C0vB,EAAO90B,KAAI,SAAAoR,GAAK,OACf4jB,EAAc,aACZr5B,KAAM25B,IACNH,QAAQ,EACRt6B,MAAOuW,EAAMA,OACVA,OAGN2jB,EAAO/0B,KAAI,SAAAu1B,GAAK,OACfP,EAAc,aACZr5B,KAAM65B,IACNL,QAAQ,EACRt6B,MAAO06B,EAAMA,OACVA,S,UC/CAE,EAAmC,SAAC,GAAD,IAAG7jB,EAAH,EAAGA,QAAS8jB,EAAZ,EAAYA,MAAZ,OAC9C,kBAAC,QAAD,+JAEwB9jB,UACD8jB,Y,uYCAzB,IAAMC,GAAoB16B,IAAOC,IAAV,MAMjB06B,GAAsB36B,IAAOC,IAAV,KAEdsB,IAAOwB,YAEZy1B,GAAuBx4B,IAAOC,IAAV,KAGfsB,IAAOwB,YAGL63B,GAAuC,SAAC,GAAD,IAClDj6B,EADkD,EAClDA,MACAk6B,EAFkD,EAElDA,MAFkD,IAGlDC,iBAHkD,gBAKlD,kBAACJ,GAAD,KACE,kBAACC,GAAD,KAAsBh6B,GACtB,kBAAC,GAAD,KACGm6B,EAAY,2BAAIC,YAAYF,IAAcE,YAAYF,M,uICzB7D,IAAMG,GAA0Bh7B,IAAOC,IAAV,MAMhBg7B,GAAsC,SAAC,GAAD,IAAGC,EAAH,EAAGA,OAAH,OACjD,kBAACF,GAAD,KACE,kBAAC,GAAD,CAAoBr6B,MAAO0O,GAAA,EAAK,EAAD,QAAUwrB,MAAOK,EAAOC,IAAIv7B,QAC3D,kBAAC,GAAD,CACEe,MAAO0O,GAAA,EAAK,EAAD,iBACXwrB,MAAOK,EAAOE,aAAax7B,QAE7B,kBAAC,GAAD,CACEe,MAAO0O,GAAA,EAAK,EAAD,gBACXwrB,MAAOK,EAAOG,WAAWz7B,QAE3B,kBAAC,GAAD,CACEe,MAAO0O,GAAA,EAAK,EAAD,kBACXwrB,OAAqC,EAA9BK,EAAOI,cAAc17B,QAE9B,kBAAC,GAAD,CACEe,MAAO0O,GAAA,EAAK,EAAD,gBACXwrB,MAAOK,EAAOK,YAAY37B,QAE5B,kBAAC,GAAD,CACEe,MAAO0O,GAAA,EAAK,EAAD,eACXwrB,MAAOK,EAAOzB,SAAS75B,MACvBk7B,WAAW,M,SCrCFU,gBAAct1B,IAAMu1B,cAAc,OAAQ,CACvDC,EAAG,+IACD,sB,mMCYJ,IASMC,GAAmB37B,IAAOC,IAAV,MATY,SAAC,GACjC,OAD6D,EAA1B27B,YACfxC,MAClB,KAAKyC,IAAgBC,UACnB,OAAOv6B,IAAOyQ,OAChB,QACE,OAAOzQ,IAAO8G,cAYP0zB,GAAgC,SAAC,GAAD,IAAGC,EAAH,EAAGA,YAAaJ,EAAhB,EAAgBA,YAAhB,OAC3C,kBAACn7B,EAAA,EAAD,CAAUC,KAAMu7B,GAAoB/7B,YAAY,KAC7C87B,EACD,kBAACL,GAAD,CAAkBC,YAAaA,EAAaI,YAAaA,GACtDJ,EAAY3vB,QCnCJuvB,gBAAct1B,IAAMu1B,cAAc,OAAQ,CACvDC,EAAG,4GACD,gBCMSQ,GAAiD,SAAC,GAAD,IAC5DC,EAD4D,EAC5DA,MACAp7B,EAF4D,EAE5DA,SAF4D,OAI5Do7B,EAAMr9B,OAAS,GAAKiC,EAClB,oCACE,kBAACoJ,EAAA,EAAD,MACA,kBAAC1J,EAAA,EAAD,CAAUC,KAAM07B,GAAcl8B,YAAY,KACvCa,EACD,6BACCo7B,EAAM50B,KAAK,QAGd,MCrBSi0B,gBAAct1B,IAAMu1B,cAAc,OAAQ,CACvDC,EAAG,0OACD,a,wICAG,IAAMW,GAAiBr8B,IAAOC,IAAV,KAGhBsB,IAAOwB,Y,sMCQlB,I,GAAMu5B,GAA2Bt8B,IAAOqW,KAAV,KAEnB9U,IAAOyQ,QAGZuqB,GAAwBv8B,YAAOq8B,GAAPr8B,CAAH,KAChBuB,IAAOyQ,QAGLwqB,GAA+B,SAAC,GAAe,IAAbvlB,EAAY,EAAZA,MACvCwlB,EAAqB,GAuB3B,GAtBIxlB,EAAMkiB,oBACRsD,EAAM5pB,KACJ,yBAAK5K,IAAI,uBACP,kBAACq0B,GAAD,KACGI,YAA2BzlB,EAAMkiB,sBAEpC,kBAACoD,GAAD,KACE,kBAAC,QAAD,2BAIGtlB,EAAM1D,WACfkpB,EAAM5pB,KACJ,yBAAK5K,IAAI,aACNy0B,YAA2BzlB,EAAM1D,WAClC,kBAAC8oB,GAAD,KACE,kBAAC,QAAD,2BAMJplB,EAAM0lB,OAAQ,CAAC,IAAD,EACgB1lB,EAAM0lB,OAAO56B,KAArCkU,EADQ,EACRA,UAAWD,EADH,EACGA,SACnBymB,EAAM5pB,KACJ,yBAAK5K,IAAI,UAAT,UACMgO,EADN,YACmBD,GACjB,kBAACqmB,GAAD,KACE,kBAAC,QAAD,kBAKR,OAAqB,IAAjBI,EAAM39B,OACD,KAGP,kBAAC2B,EAAA,EAAD,CAAUC,KAAMk8B,GAAW18B,YAAY,KACpCu8B,I,wCC9CDI,IAAQ,sBACXC,IAAuBC,UAAYC,oBAAS,YADjC,gBAEXF,IAAuBG,UAAYD,oBAAS,cAFjC,gBAGXF,IAAuBI,eAAiBF,oBAAS,qBAHtC,gBAIXF,IAAuBK,MAAQH,oBAAS,WAJ7B,gBAKXF,IAAuBM,SAAWJ,oBAAS,aALhC,IAQDK,GAAkC,SAAC,GAAD,IAAGC,EAAH,EAAGA,YAAH,OAC7C,kBAAC78B,EAAA,EAAD,CAAUC,KAAM68B,KAAYr9B,YAAY,KACrCwH,KAAG81B,QACF,gBAAGC,EAAH,EAAGA,UAAWC,EAAd,EAAcA,mBAAd,OACgB,OAAdD,IAAuBZ,GAASa,KAClCJ,GACAv4B,KAAI,SAAA44B,GAAM,OACV,yBAAK11B,IAAK01B,EAAOD,oBACdhB,YAA2BiB,EAAOF,WACnC,kBAACpB,GAAD,KACGhtB,KAAK9P,EAAEs9B,GAASc,EAAOD,4B,0dCxBlC,IAAMhD,GAAoB16B,IAAOC,IAAV,MAKjB29B,GAAsB59B,IAAOC,IAAV,MAGnB06B,GAAsB36B,IAAOC,IAAV,KAEdsB,IAAOsC,OAEZ20B,GAAuBx4B,IAAOC,IAAV,KAGfsB,IAAOwB,YAGL86B,GAA+C,SAAC,GAAD,IAC1D5xB,EAD0D,EAC1DA,KACAtL,EAF0D,EAE1DA,MACAk6B,EAH0D,EAG1DA,MAH0D,OAK1D,kBAAC,GAAD,KACE,kBAAC+C,GAAD,KAAsB3xB,GAEtB,kBAAC,GAAD,KAAsBtL,GACtB,kBAAC,GAAD,KAAuBo6B,YAAYF,MC9B1BiD,GAA+C,SAAC,GAEtD,IADLC,EACI,EADJA,WAqBA,OAAO,6BAAMA,EAAWh5B,KAnBL,SAACi5B,GAAD,OACjB,kBAAC,WAAD,CAAU/1B,IAAK+1B,EAAUl0B,IACvB,kBAAC,GAAD,CACEmC,KAAM+xB,EAAUC,OAAOhyB,KACvBtL,MAAOq9B,EAAUC,OAAOC,UACxBrD,MAAOmD,EAAUnD,MAAMj7B,QAEzB,oCACGo+B,EAAUG,WAAWp5B,KAAI,SAAAq5B,GAAQ,OAChC,kBAAC,GAAD,CACEn2B,IAAKm2B,EAASt0B,GACdmC,KAAI,WAAMmyB,EAASH,OAAOhyB,MAC1BtL,MAAOy9B,EAASH,OAAOC,UACvBrD,MAAOuD,EAASvD,MAAMj7B,kB,oBCvBnB47B,gBAAct1B,IAAMu1B,cAAc,OAAQ,CACvDC,EAAG,kDACD,Q,ubCMJ,IAAM2C,GAAsBr+B,IAAOC,IAAV,MAInBq+B,GAAYt+B,IAAOC,IAAV,KAICsB,IAAOoQ,MACV/Q,IAAQ29B,MACCh9B,IAAO8G,UACVuwB,IAASC,KAGPj4B,IAAQ49B,QAIhBC,GAAkC,SAAC,GAAkB,IAAhB19B,EAAe,EAAfA,SAAe,EAC/BmF,IAAMoP,UAAS,GADgB,oBACxDopB,EADwD,KAC9CC,EAD8C,KAE/D,OAAOz4B,IAAM04B,SAASC,MAAM99B,GAC1B,kBAACs9B,GAAD,KACE,kBAACS,GAAA,EAAD,KACE,kBAACC,GAAA,EAAD,CACEr+B,KAAMs+B,GACNpuB,SAAuB,OAAb7P,EACV2N,QAAS,kBAAMiwB,GAAaD,OAG/BA,GAAY,kBAACJ,GAAD,KAAYv9B,IAEzB,M,qBC7BOk+B,GAAsC,SAAC,GAAiB,IAAfC,EAAc,EAAdA,QAAc,EAC5CC,cAAfC,EAD2D,qBAGlE,OACE,kBAACr1B,GAAA,EAAD,CAAOxH,MAAO3B,IAAQy+B,0BACpB,kBAACjrB,GAAA,EAAD,CACEC,YAAa,kBAAC,QAAD,uBACbM,UAAW,WACTyqB,EAAY,CAAEF,cAGhB,kBAAC,QAAD,wB,WCTKI,GAA0C,SAAC,GAGjD,IAFLJ,EAEI,EAFJA,QACAK,EACI,EADJA,WACI,EACqBC,eAAlBC,EADH,qBAEJ,OAAKF,EAIH,kBAAC55B,GAAA,EAAD,CAAWE,aAAa,+BACtB,kBAACkE,GAAA,EAAD,CAAOxH,MAAO3B,IAAQy+B,0BACpB,kBAACjrB,GAAA,EAAD,CACEC,YAAa,kBAAC,QAAD,uBACbM,UAAW,WACT8qB,EAAe,CAAEP,cAGnB,kBAAC,QAAD,4BAXC,M,yTCCX,I,GAAMQ,GAAqB1/B,IAAOC,IAAV,MAeX0/B,GAAiC,SAAC,GAUxC,IATLtrB,EASI,EATJA,YACAurB,EAQI,EARJA,WAQI,IAPJtrB,oBAOI,MAPW/S,IAAOwB,WAOlB,MANJwR,oBAMI,MANWhT,IAAOqB,IAMlB,MALJ4R,wBAKI,MALe,IAKf,MAJJC,wBAII,MAJe,GAAKC,KAIpB,EAHJ9D,EAGI,EAHJA,SACA7P,EAEI,EAFJA,SACA4T,EACI,EADJA,UAEMpP,EAAMW,IAAM0O,OAAiC,MAD/C,EAE4BC,aAAsB,CACpDL,mBACAC,mBACAE,YACApP,QAJMuP,EAFJ,EAEIA,WAAYpG,EAFhB,EAEgBA,QAOpB,OACE,kBAACgxB,GAAD,KACG5qB,GAAc8qB,EACf,kBAAC71B,GAAA,EAAD,CAAOxH,MAAO3B,IAAQy+B,0BACpB,kBAACN,GAAA,EAAD,CACEx5B,IAAKA,EACLmJ,QAASA,EACTpN,MAAOwT,EAAaP,EAAeD,EACnC7S,UAAWC,aAAG,CAAE,YAAaoT,IAC7BlE,SAAUA,GAETkE,EAAaT,EAActT,M,+BCpDzB8+B,GAA0C,SAAC,GAMjD,IALLC,EAKI,EALJA,eACAC,EAII,EAJJA,eACAC,EAGI,EAHJA,YAGI,IAFJC,mBAEI,MAFU,GAEV,EADD37B,EACC,gFACEb,EAAW,aACfc,QAASu7B,EACTr5B,eAAgBC,KAChB/B,kBAAmB,SAACu7B,GAAD,OACjBA,EAAOjG,aAAeiG,EAAOC,YAAYl0B,OACxC3H,GAGCqC,EAAgB4G,aAAiB,eAClC9J,EADkC,CAErCqD,SAAUi5B,EACVl5B,kBAAmBm5B,KAGrB,OACE,kBAAC57B,GAAA,EAAD,eACEgB,OAAQ,CACN/B,QAAS,SAAAC,GAAI,sBACRA,EADQ,CAEX0G,OAAQ,OACRhH,OAAQ,GACLi9B,MAGHt5B,EACAlD,KC5BG28B,GAAuC,SAAC,GAG9C,IAFLlB,EAEI,EAFJA,QACAY,EACI,EADJA,eAEMO,EAAgBP,EAAehhC,OAAS,EAD1C,EAE0BwhC,cAAvBC,EAFH,qBAGEC,EAAyBn+B,aAAa,4BAHxC,EAIwC6D,IAAMoP,SAAkB,MAJhE,oBAIGyqB,EAJH,KAImBU,EAJnB,KAMJv6B,IAAM6B,WAAU,WACd04B,GAAkB,kBAChBJ,EAAgB34B,KAAGgI,KAAKowB,GAAiBh2B,GAAK,UAE/C,CAACu2B,EAAeP,IAQnB,OAAKU,GAA2BH,EAK9B,kBAAC,GAAD,CACEhsB,YAAa,kBAAC,QAAD,eACbM,UAb0B,WACxBorB,GACFQ,EAAoB,CAAErB,UAASwB,gBAAiBX,KAYhDH,WACE,kBAAC,GAAD,CACEE,eAAgBA,EAChBC,eAAgBA,EAChBC,YAAaS,EACbR,YAAa,CACXU,aAAc/H,IAASgI,OACvBC,qBAAsB,EACtBC,wBAAyB,MAK/B,kBAAC,QAAD,+BApBK,MC1BEC,GAAoC,SAAC,GAA6B,IAA3B7B,EAA0B,EAA1BA,QAAS1F,EAAiB,EAAjBA,WAAiB,EACjDwH,eAApBC,EADqE,qBAG5E,OACE,kBAACt7B,GAAA,EAAD,CAAWE,aAAa,oBACtB,kBAACi5B,GAAA,EAAD,KACE,kBAACC,GAAA,EAAD,CACEr+B,KAAMo3B,IACN9mB,UAAWwoB,EAAaj4B,IAAOyQ,OAASzQ,IAAOoQ,MAC/CjD,QAAS,kBAAMuyB,EAAiB,CAAE/B,UAAS1F,YAAaA,OAJ5D,OCLA0H,IAAW,sBACdC,IAAeC,SAAWpE,oBAAS,iBADrB,gBAEdmE,IAAejE,eAAiBF,oBAAS,qBAF3B,gBAGdmE,IAAe/D,SAAWJ,oBAAS,iBAHrB,IAMJqE,GAAqC,SAAC,GAA4B,IAA1BnC,EAAyB,EAAzBA,QAAS5I,EAAgB,EAAhBA,UAAgB,EACjDgL,eAApBC,EADqE,qBAG5E,OACE,kBAAC57B,GAAA,EAAD,CAAWE,aAAa,iBACtB,kBAACk5B,GAAA,EAAD,CACEvzB,KAAM6D,KAAK9P,EAAE2hC,GAAY5K,IACzBh1B,MACEg1B,IAAc6K,IAAejE,eACzB37B,IAAOwB,WACPxB,IAAOoP,MAEbpO,MAAK,UAAK3B,IAAQy+B,yBAAb,OACL3wB,QAAS,WACP6yB,EAAiB,CAAErC,UAAS37B,MAAO+yB,S,iCCTvCkL,GAAmBxhC,IAAOC,IAAV,mEAAGD,CAAH,4FAOhByhC,GAAuBzhC,IAAOC,IAAV,uEAAGD,CAAH,qEAOpB0hC,GAAY,CAAEpgC,MAAOC,IAAOoQ,OAE5BvM,GAAuB,CAC3B/B,QAAS,SAAAC,GAAI,sBACRA,EADQ,GAERo+B,GAFQ,CAGXC,WAAYpgC,IAAOoP,MACnB3G,OAAQpJ,IAAQ0O,aAAe1O,IAAQC,gBACvC8B,OAAQ,OACRi/B,YAAa,EACbjB,aAAc/H,IAASgI,OACvB59B,OAAQ,KAEVU,KAAM,SAAAJ,GAAI,sBACLA,IAELQ,eAAgB,SAAAR,GAAI,sBACfA,EADe,GAEfo+B,KAELG,YAAa,SAAAv+B,GAAI,sBACZA,EADY,GAEZo+B,KAEL18B,YAAa,SAAA1B,GAAI,sBACZA,EADY,GAEZo+B,GAFY,CAGfI,SAAU,YAEZ59B,eAAgB,SAAAZ,GAAI,sBACfA,EADe,CAElBhC,MAAOC,IAAOoQ,SAEhBowB,mBAAoB,SAAAz+B,GAAI,sBACnBA,EADmB,CAEtB0+B,QAAS,WAIAC,GAAsC,SAAC,GAAD,IACjDC,EADiD,EACjDA,QACAC,EAFiD,EAEjDA,eACAhoB,EAHiD,EAGjDA,UACAioB,EAJiD,EAIjDA,SACAC,EALiD,EAKjDA,QACAC,EANiD,EAMjDA,SANiD,OAQjD,kBAACl+B,GAAA,EAAD,CACEG,QAAS29B,EACTtiC,MAAOuiC,EACP17B,eAAgBiB,KAAG6H,KAAK,MACxB4K,UAAWA,EACX3P,cAAc,EACd+3B,aAAa,EACbv9B,YAAY,gBACZzC,MAAO,GACP6C,OAAQA,GACR8U,iBAAkB,kBAAM7K,GAAA,EAAK,EAAD,yBAC5B5B,SAAU,SAAAkvB,GACO,OAAXA,EACF0F,IAEAD,EAASzF,IAGb6F,WAAYF,EACZp9B,WAAY,CACVu9B,eAAgB,SAAAn+B,GAAK,OACnB,kBAACm9B,GAAD,KACE,kBAAC5J,EAAA,EAAD,CAAMn3B,KAAMgiC,KAAeZ,SAAU,EAAGxgC,MAAOC,IAAOoQ,QACtD,kBAAC,KAAW8wB,eAAmBn+B,KAGnCq+B,kBAAmB,kBAAM,MACzBx9B,eAAgBD,KAAWC,gBAE7BR,kBAAmB,SAAAg4B,GAAM,OACvB,kBAAC6E,GAAD,eAAsBoB,YAAejG,MAEvCkG,MAAO,SAAAA,GAAK,sBACPA,EADO,CAEVC,mBAAmB,EACnBrgC,OAAO,eACFogC,EAAMpgC,OADL,CAEJsgC,QAASxhC,IAAOwB,WAChBigC,UAAWzhC,IAAO8G,kBCvGb46B,GAAsC,SAAC,GAI7C,IAHL7mB,EAGI,EAHJA,SACA8iB,EAEI,EAFJA,QACAxB,EACI,EADJA,mBAEMwF,EAAU9gC,aAAY,WADxB,EAGmBk/B,eAAhB6B,EAHH,uBAImBC,eAAhBC,EAJH,uBAKmBC,eAAhBC,EALH,uBAOmCC,aACrC,CAAEpnB,SAAU,CAACA,GAAW8iB,WACxB,CAAEuE,MAAOP,IAFHppB,EAPJ,EAOIA,SAAUC,EAPd,EAOcA,QAAS2pB,EAPvB,EAOuBA,QAKrBC,EAAQ7pB,GAAS,SAAAjP,GAAI,MAAK,CAC9Bq3B,QAASr3B,EAAKq3B,QACdvF,OAAQ9xB,EAAKoM,MAAM0lB,WAGrB,OACE,kBAACh3B,GAAA,EAAD,CAAWE,aAAa,6BACtB,kBAAC,GAAD,CACEq8B,QAASyB,EAAQA,EAAMzB,QAAUpiC,KACjCqiC,eAAgBwB,GAASA,EAAMhH,QAAUgH,EAAMhH,OAAO56B,KACtDoY,UAAWJ,EACXuoB,SAAUoB,EACVrB,QAAS,WACHsB,GAASA,EAAMhH,QACjB4G,EAAa,CAAEK,cAAeD,EAAMhH,OAAO7yB,MAG/Cs4B,SAAU,SAAAzF,GACR0G,EAAa,CAAEnE,UAAS2E,SAAUlH,EAAO7yB,KACrC4zB,IAAuBZ,IAAuBK,OAChDgG,EAAa,CAAEjE,UAAS37B,MAAO49B,IAAehE,aClDpD2G,GAAgC9jC,IAAOC,IAAV,mFAAGD,CAAH,+JAEjBY,IAAQ0O,aAAe1O,IAAQC,gBAI7BD,IAAQ49B,QAQfuF,GAA4C,SAAC,GAAD,IAAGhjC,EAAH,EAAGA,SAAH,OACvD,kBAAC+iC,GAAD,KACGlF,WAAS75B,IAAIhE,GAAU,SAACwb,EAAOyM,GAAR,OACtB,yBAAKvnB,UAAU,YAAYwG,IAAK+gB,GAC7BzM,Q,oBCvBMif,gBAAct1B,IAAMu1B,cAAcv1B,IAAM89B,SAAU,KAAM99B,IAAMu1B,cAAc,OAAQ,CACjGC,EAAG,oJACDx1B,IAAMu1B,cAAc,OAAQ,CAC9BC,EAAG,8CACA,Y,qBCYQuI,GAA+C,SAAC,GAGtD,IAFL/E,EAEI,EAFJA,QACAK,EACI,EADJA,WACI,EAC2B2E,eAAxBC,EADH,qBAEIC,EAAmBC,eAAnBD,eAFJ,EAIuBltB,aAAuB,CAChD/B,aAAcoqB,EACV3pB,IAAiB0uB,UACjB1uB,IAAiBC,OACrBsB,MAAOooB,EACHlwB,GAAA,EAAK,EAAD,2DACJA,GAAA,EAAK,EAAD,yDACFsF,UAP0C,SAOhCnC,EAAS+xB,GAPuB,8FAQzBJ,EAAqB,CAAEjF,UAAS1sB,aARP,gBAU5C+xB,IACAH,EACE7E,EACIlwB,GAAA,EAAK,EAAD,qCACJA,GAAA,EAAK,EAAD,qCAdkC,wCAJ9C,oBAIGm1B,EAJH,KAIa3sB,EAJb,KAIaA,KAoBjB,OACE,kBAAClS,GAAA,EAAD,CAAWE,aAAa,uBACtB,kBAACk5B,GAAA,EAAD,CAAar+B,KAAM+jC,GAAU/1B,QAASmJ,IACrC2sB,I,oBClCME,GAA0C,SAAC,GAAiB,IAAfxF,EAAc,EAAdA,QAChDn9B,EAASC,eAATD,KAD8D,EAE9C4iC,eAAjBC,EAF+D,qBAGhEC,EAAmBxiC,aAAa,iBAHgC,EAI1B6D,IAAMoP,SAAoB,MAJA,oBAI/DrG,EAJ+D,KAI/C61B,EAJ+C,KAYtE,OAAKD,EAKH,kBAAC,GAAD,CACExwB,YAAa,kBAAC,QAAD,iBACbM,UAboB,WAClB1F,GACF21B,EAAc,CAAE1F,UAAS9iB,SAAUnN,KAYnC2wB,WACE,kBAAC71B,GAAA,EAAD,CAAOxH,MAAO,IACZ,kBAACyM,GAAA,EAAD,CACE1I,SAAUvE,EAAKuE,SACf4I,kBAAmB,SAAAT,GAAM,OAAIA,GAAUq2B,EAAkBr2B,EAAO3E,SAKtE,kBAAC,QAAD,4BAhBK,MCSLi7B,GAAgC,SAAC,GAAkB,IAAhBhkC,EAAe,EAAfA,SACvC,OACE,kBAAC4O,GAAA,EAAD,CAAUC,SAAS,cACjB,kBAAC,GAAD,KAAgB7O,KAKhBikC,GAA4C,SAAA1gC,GAAK,OACrD,kBAAC,GAAD,KACE,kBAAC,GAAD,KACGA,EAAM2gC,WAAa,kBAAC,GAAsB3gC,GAC3C,kBAAC,GAA0BA,GAC3B,kBAAC,GAAuBA,GACxB,kBAAC,GAAD,CAAuB46B,QAAS56B,EAAM46B,WAExC,kBAAC,GAA+B56B,GAChC,kBAAC,GAAD,eAAkBgyB,UAAW6K,IAAeC,UAAc98B,MAIxD4gC,GAAiD,SAAA5gC,GAAK,OAC1D,kBAAC,GAAD,KACE,kBAAC,GAAD,KACGA,EAAM2gC,WAAa,kBAAC,GAAsB3gC,GAC3C,kBAAC,GAA0BA,GAC3B,kBAAC,GAAuBA,GACxB,kBAAC,GAAD,CAAuB46B,QAAS56B,EAAM46B,WAGxC,kBAAC,GAAoB56B,GACrB,kBAAC,GAA+BA,GAC/BA,EAAM6gC,YACL,kBAAC,GAAD,eAAkB7O,UAAW6K,IAAejE,gBAAoB54B,IAEjEA,EAAM6gC,WACL,kBAAC,GAAsB7gC,GAEvB,kBAAC,GAAD,eAAkBgyB,UAAW6K,IAAe/D,UAAc94B,MAK1D8gC,GAAuD,SAAA9gC,GAAK,OAChE,kBAAC,GAAD,KACE,kBAAC,GAAD,KACGA,EAAM2gC,WAAa,kBAAC,GAAsB3gC,GAC3C,kBAAC,GAAuBA,IAE1B,kBAAC,GAAoBA,GACpBA,EAAMi7B,WACL,kBAAC,GAAsBj7B,GAEvB,kBAAC,GAAD,eAAkBgyB,UAAW6K,IAAe/D,UAAc94B,MAK1D+gC,GAA8C,SAAA/gC,GAAK,OACvD,kBAAC,GAAD,KACE,kBAAC,GAAD,KACGA,EAAM2gC,WAAa,kBAAC,GAAsB3gC,GAC3C,kBAAC,GAAuBA,IAE1B,kBAAC,GAA+BA,GAChC,kBAAC,GAAsBA,GACvB,kBAAC,GAAD,eAAkBgyB,UAAW6K,IAAe/D,UAAc94B,MAIxDghC,GAAiD,SAAAhhC,GAAK,OAC1D,kBAAC,GAAD,KACE,kBAAC,GAAD,KACGA,EAAM2gC,WAAa,kBAAC,GAAsB3gC,GAC3C,kBAAC,GAAuBA,MAKjBihC,GAAmC,SAAC,GAA2B,IAAzBrG,EAAwB,EAAxBA,QAAS9iB,EAAe,EAAfA,SAMpDunB,GAAQ7pB,EALO0rB,aAAe,CAClCtG,UACA9iB,aAFMtC,UAKepS,KAAGymB,UAE1B,IAAKwV,EACH,OAAO,KATgE,IAavE1sB,EAEE0sB,EAFF1sB,MACiBwuB,EACf9B,EADFroB,cAAiBmqB,kBAGblG,EACmB,OAAvBtoB,EAAM9B,cACN8B,EAAM9B,aAAaikB,OAASxjB,IAAiBC,OAEzCsvB,EACJ5F,IACCkG,EAAkB16B,SAAS+xB,IAAuBK,QACjDsI,EAAkB16B,SAAS+xB,IAAuBI,iBAEhD+H,EAAYhuB,EAAMyuB,aAElBlM,EAAaviB,EAAMuiB,WAEnBjK,EAA0B,CAC9B2P,UACA9iB,WACAshB,mBAAoBzmB,EAAMymB,mBAC1BoC,eAAgB7oB,EAAM6oB,eACtBmF,YACAE,aACA5F,aACA/F,cAEF,OAAQviB,EAAMymB,oBACZ,KAAKZ,IAAuBC,UAC1B,OAAO,kBAAC,GAAuBxN,GACjC,KAAKuN,IAAuBG,UAC1B,OAAO,kBAAC,GAA4B1N,GACtC,KAAKuN,IAAuBI,eAC1B,OAAO,kBAAC,GAAkC3N,GAC5C,KAAKuN,IAAuBK,MAC1B,OAAO,kBAAC,GAAyB5N,GACnC,KAAKuN,IAAuBM,SAC1B,OAAO,kBAAC,GAA4B7N,GACtC,QACE,OAAO,OClJPoW,GAAoB3lC,IAAOC,IAAV,wEAAGD,CAAH,qCAIV4lC,GAAc1/B,IAAMC,MAAa,YAAkB,IAAf+4B,EAAc,EAAdA,QAKzCjoB,GAAQ6C,EAJO+rB,aAAgB,CACnC3G,YADMplB,WAIe,SAAAjP,GAAI,OAAIA,EAAKoM,SAEpC,OAAc,OAAVA,EACK,kBAAC1L,EAAA,EAAD,MAIP,oCACE,kBAACo6B,GAAD,KACE,kBAACx7B,EAAA,EAAD,MACA,kBAAC,GAAD,CAAe4zB,WAAY9mB,EAAMoV,QACjC,kBAAC,GAAD,CAAmB6O,OAAQjkB,IAC3B,kBAAC,GAAD,CAAgBklB,MAAOllB,EAAM6uB,iBAC3B,kBAAC,EAAD,CACEnvB,QAASM,EAAM8uB,2BACftL,MAAOxjB,EAAM+uB,4BAGjB,kBAAC,EAAD,CACEnM,OAAQ5iB,EAAMlB,SAAS8jB,OACvBC,OAAQ7iB,EAAMlB,SAAS+jB,SAEzB,kBAACxjB,EAAA,EAAD,CAAUC,KAAMU,EAAMV,OACtB,kBAACpM,EAAA,EAAD,MACA,kBAAC,GAAD,CAAa6xB,YAAa/kB,EAAMnN,GAAI8xB,YAAa3kB,EAAM2kB,cACvD,kBAACzxB,EAAA,EAAD,MACA,kBAAC,GAAD,CAAemzB,YAAarmB,EAAMqmB,cAClC,kBAAC,GAAD,CAAYrmB,MAAOA,KAErB,kBAAC,GAAD,CAAgBioB,QAASA,EAAS9iB,SAAUnF,EAAMqE,cAAcxR,S,6NC1C/D,IAAMm8B,GAAiBjmC,IAAOC,IAAV,KACLsB,IAAOoQ,MAClBpQ,IAAO+G,YACCswB,IAASC,MAKfqN,GAAWtgC,aACtB,YAAyD,IAAtDqR,EAAqD,EAArDA,MAAOgiB,EAA8C,EAA9CA,WAAYxlB,EAAkC,EAAlCA,YAAa0yB,EAAqB,EAArBA,eAC3BC,EAAiB/7B,cAEjB60B,EAAUjoB,EAAMnN,GAEhB4E,EAAUxI,IAAMwE,aAAY,WAChC07B,EAAeC,kBAAkBnH,GAC7BiH,GACFA,MAED,CAACA,EAAgBjH,EAASkH,IAEvBE,EAAeF,EAAeG,kBAAkBrH,GAEtD,OACE,kBAAC+G,GAAD,CAAgBn8B,GAAE,gBAAWo1B,IAC3B,kBAAC,EAAD,CACEjoB,MAAOA,EACPgiB,WAAYA,EACZxlB,YAAaA,EACb/E,QAASA,IAEV43B,GAAgB,kBAACV,GAAD,CAAa1G,QAASA,S,iQC/B3CsH,EAAW,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IAC1CC,EAAa,CAAC,QAAQ,EAAM,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,IA4CnE,SAASC,EAAUC,GACjB,IAAI1mC,EAAM2mC,UAAU9nC,OAAS,QAAsBoE,IAAjB0jC,UAAU,GAAmBA,UAAU,GAAK,EAC1E9T,EAAQ+T,WAAWF,GACvB,MAAO,GAAGvtB,OAAO0Z,EAAQ7yB,GAAKmZ,OAAO0tB,OAAOH,GAAKpmC,QAAQumC,OAAOhU,GAAQ,KAAO,MA6B1E,IA6HHiU,EAAO7gC,IAAMqM,YAAW,SAAUjO,EAAOiB,GAC3C,IAAIyhC,EAAsB1iC,EAAM2iC,aAC5BA,OAAuC,IAAxBD,EAAiC,UAAYA,EAC5DE,EAAoB5iC,EAAM6iC,WAC1BA,OAAmC,IAAtBD,EAA+B,UAAYA,EACxDjqB,EAAU3Y,EAAM2Y,QAChBmqB,EAAgB9iC,EAAM7C,UACtB4lC,EAAmB/iC,EAAMgjC,UACzB7a,OAAiC,IAArB4a,EAA8B,MAAQA,EAClDE,EAAmBjjC,EAAMkjC,UACzBA,OAAiC,IAArBD,GAAsCA,EAClDE,EAAmBnjC,EAAMojC,UACzBA,OAAiC,IAArBD,EAA8B,MAAQA,EAClDE,EAAcrjC,EAAM4f,KACpBA,OAAuB,IAAhByjB,GAAiCA,EACxCC,EAAiBtjC,EAAMoE,QACvBA,OAA6B,IAAnBk/B,EAA4B,aAAeA,EACrDC,EAAYvjC,EAAMwjC,GAClBA,OAAmB,IAAdD,GAA+BA,EACpCE,EAAYzjC,EAAM0jC,GAClBA,OAAmB,IAAdD,GAA+BA,EACpCE,EAAY3jC,EAAM4jC,GAClBA,OAAmB,IAAdD,GAA+BA,EACpCE,EAAiB7jC,EAAM8jC,QACvBA,OAA6B,IAAnBD,EAA4B,EAAIA,EAC1CE,EAAc/jC,EAAMgkC,KACpBA,OAAuB,IAAhBD,EAAyB,OAASA,EACzCE,EAAYjkC,EAAMkkC,GAClBA,OAAmB,IAAdD,GAA+BA,EACpCE,EAAYnkC,EAAMokC,GAClBA,OAAmB,IAAdD,GAA+BA,EACpCE,EAAsBrkC,EAAMskC,aAC5BA,OAAuC,IAAxBD,GAAyCA,EACxDE,EAAQC,YAAyBxkC,EAAO,CAAC,eAAgB,aAAc,UAAW,YAAa,YAAa,YAAa,YAAa,OAAQ,UAAW,KAAM,KAAM,KAAM,UAAW,OAAQ,KAAM,KAAM,iBAE1M7C,EAAYsnC,YAAK9rB,EAAQ+rB,KAAM5B,EAAeI,GAAa,CAACvqB,EAAQuqB,UAAuB,IAAZY,GAAiBnrB,EAAQ,cAAc7D,OAAO0tB,OAAOsB,MAAalkB,GAAQjH,EAAQiH,KAAM0kB,GAAgB3rB,EAAQ2rB,aAA4B,QAAdlB,GAAuBzqB,EAAQ,gBAAgB7D,OAAO0tB,OAAOY,KAAuB,SAATY,GAAmBrrB,EAAQ,WAAW7D,OAAO0tB,OAAOwB,KAAwB,YAAfnB,GAA4BlqB,EAAQ,kBAAkB7D,OAAO0tB,OAAOK,KAAgC,YAAjBF,GAA8BhqB,EAAQ,oBAAoB7D,OAAO0tB,OAAOG,KAA6B,eAAZv+B,GAA4BuU,EAAQ,cAAc7D,OAAO0tB,OAAOp+B,MAAmB,IAAPggC,GAAgBzrB,EAAQ,WAAW7D,OAAO0tB,OAAO4B,MAAc,IAAPR,GAAgBjrB,EAAQ,WAAW7D,OAAO0tB,OAAOoB,MAAc,IAAPF,GAAgB/qB,EAAQ,WAAW7D,OAAO0tB,OAAOkB,MAAc,IAAPF,GAAgB7qB,EAAQ,WAAW7D,OAAO0tB,OAAOgB,MAAc,IAAPU,GAAgBvrB,EAAQ,WAAW7D,OAAO0tB,OAAO0B,MACl2B,OAAOtiC,IAAMu1B,cAAchP,EAAWwc,YAAS,CAC7CxnC,UAAWA,EACX8D,IAAKA,GACJsjC,OAoHL,ICpXIK,EDyYWC,EArBEC,aAxRG,SAAgBvG,GAClC,OAAOoG,YAAS,CAEdD,KAAM,GAGNxB,UAAW,CACT6B,UAAW,aACXrH,QAAS,OACTv5B,SAAU,OACVlG,MAAO,QAIT2hB,KAAM,CACJmlB,UAAW,aACXrmC,OAAQ,KAKV4lC,aAAc,CACZpmC,SAAU,GAIZ,sBAAuB,CACrB8mC,cAAe,UAIjB,8BAA+B,CAC7BA,cAAe,kBAIjB,2BAA4B,CAC1BA,cAAe,eAIjB,iBAAkB,CAChB7gC,SAAU,UAIZ,uBAAwB,CACtBA,SAAU,gBAIZ,wBAAyB,CACvB0+B,WAAY,UAId,4BAA6B,CAC3BA,WAAY,cAId,0BAA2B,CACzBA,WAAY,YAId,0BAA2B,CACzBA,WAAY,YAId,0BAA2B,CACzBF,aAAc,UAIhB,8BAA+B,CAC7BA,aAAc,cAIhB,4BAA6B,CAC3BA,aAAc,YAIhB,iCAAkC,CAChCA,aAAc,iBAIhB,gCAAiC,CAC/BA,aAAc,gBAIhB,oBAAqB,CACnBsC,eAAgB,UAIlB,sBAAuB,CACrBA,eAAgB,YAIlB,2BAA4B,CAC1BA,eAAgB,iBAIlB,0BAA2B,CACzBA,eAAgB,gBAIlB,0BAA2B,CACzBA,eAAgB,iBA/ItB,SAAwB1G,EAAO2G,GAC7B,IAAIpkC,EAAS,GAgBb,OAfAohC,EAASlqB,SAAQ,SAAU8rB,GACzB,IAAIqB,EAAe5G,EAAMuF,QAAQA,GAEZ,IAAjBqB,IAIJrkC,EAAO,WAAWgU,OAAOowB,EAAY,KAAKpwB,OAAOgvB,IAAY,CAC3DplC,OAAQ,IAAIoW,OAAOstB,EAAU+C,EAAc,IAC3ClnC,MAAO,eAAe6W,OAAOstB,EAAU+C,GAAe,KACtD,YAAa,CACX/jC,QAASghC,EAAU+C,EAAc,SAIhCrkC,EAgIJskC,CAAe7G,EAAO,MAAO,GAAIA,EAAM8G,YAAY9qC,KAAKgd,QAAO,SAAU+tB,EAAa3hC,GAGvF,OApMJ,SAAsB4hC,EAAchH,EAAO2G,GACzC,IAAIpkC,EAAS,GACbqhC,EAAWnqB,SAAQ,SAAU/T,GAC3B,IAAIN,EAAM,QAAQmR,OAAOowB,EAAY,KAAKpwB,OAAO7Q,GAEjD,IAAa,IAATA,EAUJ,GAAa,SAATA,EAAJ,CAUA,IAAIhG,EAAQ,GAAG6W,OAAOsU,KAAKoc,MAAMvhC,EAAO,GAAK,KAAQ,IAAM,KAG3DnD,EAAO6C,GAAO,CACZ8hC,UAAWxnC,EACXynC,SAAU,EACVC,SAAU1nC,QAfV6C,EAAO6C,GAAO,CACZ8hC,UAAW,OACXC,SAAU,EACVC,SAAU,aAZZ7kC,EAAO6C,GAAO,CACZ8hC,UAAW,EACXC,SAAU,EACVC,SAAU,WAyBG,OAAfT,EACFP,YAASY,EAAczkC,GAEvBykC,EAAahH,EAAM8G,YAAYrwB,GAAGkwB,IAAepkC,EA6JjD8kC,CAAaN,EAAa/G,EAAO56B,GAC1B2hC,IACN,OA6J+B,CAClC/6B,KAAM,WADSu6B,CAEdrC,G,yBEjRCoD,EAAMjkC,IAAMqM,YAAW,SAAajO,EAAOiB,GAC7C,IAAI0X,EAAU3Y,EAAM2Y,QAChBxb,EAAY6C,EAAM7C,UAClB2oC,EAAkB9lC,EAAMsM,SACxBA,OAA+B,IAApBw5B,GAAqCA,EAChDC,EAAwB/lC,EAAMgmC,mBAC9BA,OAA+C,IAA1BD,GAA2CA,EAChEE,EAAYjmC,EAAMimC,UAClB7pC,EAAO4D,EAAM5D,KACb8pC,EAAYlmC,EAAMkmC,UAClB7pC,EAAQ2D,EAAM3D,MACd8M,EAAWnJ,EAAMmJ,SACjBiB,EAAUpK,EAAMoK,QAChB5H,EAAWxC,EAAMwC,SACjB2jC,EAAmBnmC,EAAMo9B,UACzBA,OAAiC,IAArB+I,EAA8B,UAAYA,EACtD7qC,EAAQ0E,EAAM1E,MACd8qC,EAAiBpmC,EAAMqmC,QACvBA,OAA6B,IAAnBD,GAAoCA,EAC9C7B,EAAQC,YAAyBxkC,EAAO,CAAC,UAAW,YAAa,WAAY,qBAAsB,YAAa,OAAQ,YAAa,QAAS,WAAY,UAAW,WAAY,YAAa,QAAS,YAY3M,OAAO4B,IAAMu1B,cAAcmP,IAAY3B,YAAS,CAC9C4B,aAAcP,EACd7oC,UAAWsnC,YAAK9rB,EAAQ+rB,KAAM/rB,EAAQ,YAAY7D,OAAO0xB,YAAWpJ,KAAcjgC,EAAWmP,GAAYqM,EAAQrM,SAAU9J,GAAYmW,EAAQnW,SAAUnG,GAASD,GAAQuc,EAAQ8tB,UAAWR,GAAattB,EAAQstB,UAAWI,GAAW1tB,EAAQ0tB,SAChPplC,IAAKA,EACL0O,KAAM,MACN,gBAAiBnN,EACjB8J,SAAUA,EACVlC,QAjBiB,SAAsBs8B,GACnCv9B,GACFA,EAASu9B,EAAOprC,GAGd8O,GACFA,EAAQs8B,KAYTnC,GAAQ3iC,IAAMu1B,cAAc,OAAQ,CACrCh6B,UAAWwb,EAAQguB,SAClBvqC,EAAMC,GAAQ6pC,MAyFJpB,eA/NK,SAAgBvG,GAClC,IAAIqI,EAEJ,MAAO,CAELlC,KAAMC,YAAS,GAAIpG,EAAMsI,WAAWC,QAASF,EAAY,CACvDjB,SAAU,IACVznC,SAAU,GACVoN,SAAU,WACVy5B,UAAW,aACXgC,UAAW,GACXC,WAAY,EACZ5lC,QAAS,YACR6lC,YAAgBL,EAAWrI,EAAM8G,YAAYrwB,GAAG,MAAO,CACxD5T,QAAS,aACP6lC,YAAgBL,EAAW,WAAY,UAAWK,YAAgBL,EAAW,aAAc,UAAWK,YAAgBL,EAAW,YAAa,UAAWK,YAAgBL,EAAWrI,EAAM8G,YAAYrwB,GAAG,MAAO,CAClNwoB,SAAUe,EAAMsI,WAAWK,QAAQ,IACnChpC,SAAU,MACR0oC,IAGJH,UAAW,CACTM,UAAW,GACXI,WAAY,EACZ,6BAA8B,CAC5BC,aAAc,IAKlBC,iBAAkB,CAChBrqC,MAAO,UACPsqC,QAAS,GACT,aAAc,CACZA,QAAS,GAEX,aAAc,CACZA,QAAS,KAKbC,iBAAkB,CAChBvqC,MAAOuhC,EAAMiJ,QAAQtgC,KAAKugC,UAC1B,aAAc,CACZzqC,MAAOuhC,EAAMiJ,QAAQ/I,QAAQiJ,MAE/B,aAAc,CACZ1qC,MAAOuhC,EAAMiJ,QAAQtgC,KAAKoF,WAK9Bq7B,mBAAoB,CAClB3qC,MAAOuhC,EAAMiJ,QAAQtgC,KAAKugC,UAC1B,aAAc,CACZzqC,MAAOuhC,EAAMiJ,QAAQC,UAAUC,MAEjC,aAAc,CACZ1qC,MAAOuhC,EAAMiJ,QAAQtgC,KAAKoF,WAK9B9J,SAAU,GAGV8J,SAAU,GAGV25B,UAAW,CACTe,WAAY,EACZtB,SAAU,EACVD,UAAW,EACXE,SAAU,QAIZU,QAAS,CACP7I,SAAUe,EAAMsI,WAAWK,QAAQ,IACnCU,WAAY,KAIdjB,QAAS,CACPjJ,QAAS,cACTmF,WAAY,SACZoC,eAAgB,SAChBhnC,MAAO,OACP+mC,cAAe,aAsIa,CAChCz6B,KAAM,UADOu6B,CAEZe,G,kBD1OCgC,IAA6B,qBAAXp8B,SAA0BA,OAAOiP,WAAYjP,OAAOiP,SAASyc,eAM5E,SAAS2Q,IACZ,GAAIlD,EACA,OAAOA,EAEX,IAAKiD,IAAUp8B,OAAOiP,SAASqtB,KAC3B,MAAO,gBAEX,IAAIC,EAAQv8B,OAAOiP,SAASyc,cAAc,OAqB1C,OApBA6Q,EAAMC,YAAYvtB,SAASwtB,eAAe,SAC1CF,EAAMG,IAAM,MACZH,EAAM7mC,MAAMq8B,SAAW,OACvBwK,EAAM7mC,MAAMlD,MAAQ,MACpB+pC,EAAM7mC,MAAMuE,OAAS,MACrBsiC,EAAM7mC,MAAMmK,SAAW,WACvB08B,EAAM7mC,MAAMma,IAAM,UAClB0sB,EAAM7mC,MAAM6Z,SAAW,SACvBN,SAASqtB,KAAKE,YAAYD,GAC1BpD,EAAa,UACToD,EAAMI,WAAa,EACnBxD,EAAa,WAGboD,EAAMI,WAAa,EACM,IAArBJ,EAAMI,aACNxD,EAAa,aAGrBlqB,SAASqtB,KAAKM,YAAYL,GACnBpD,EAGJ,SAAS0D,EAAwB1qB,EAASwlB,GAC7C,IAAIgF,EAAaxqB,EAAQwqB,WAEzB,GAAkB,QAAdhF,EACA,OAAOgF,EAEX,IAAIh8B,EAAO07B,IACX,GAAa,kBAAT17B,EACA,OAAOm8B,OAAOC,IAElB,OAAQp8B,GACJ,IAAK,WACD,OAAOwR,EAAQ6qB,YAAc7qB,EAAQ8qB,YAAcN,EACvD,IAAK,UACD,OAAOxqB,EAAQ6qB,YAAc7qB,EAAQ8qB,YAAcN,EAE3D,OAAOA,EEtDX,SAASO,EAAaC,GACpB,OAAQ,EAAIxf,KAAKyf,IAAIzf,KAAK0f,GAAKF,EAAOxf,KAAK0f,GAAK,IAAM,ECIxD,IAAIhoC,EAAS,CACX7C,MAAO,GACPyH,OAAQ,GACR4F,SAAU,WACVgQ,KAAM,KACNN,SAAU,UAQG,SAAS+tB,EAAc/oC,GACpC,IAAImJ,EAAWnJ,EAAMmJ,SACjBo7B,EAAQC,YAAyBxkC,EAAO,CAAC,aAEzCgpC,EAAkBpnC,IAAM0O,SACxB24B,EAAUrnC,IAAM0O,OAAO,MAEvB44B,EAAkB,WACpBF,EAAgB32B,QAAU42B,EAAQ52B,QAAQ82B,aAAeF,EAAQ52B,QAAQyI,cAsB3E,OAnBAlZ,IAAM6B,WAAU,WACd,IAAI2lC,EAAe9pB,aAAS,WAC1B,IAAI+pB,EAAaL,EAAgB32B,QACjC62B,IAEIG,IAAeL,EAAgB32B,SACjClJ,EAAS6/B,EAAgB32B,YAI7B,OADA5G,OAAO6lB,iBAAiB,SAAU8X,GAC3B,WACLA,EAAaE,QACb79B,OAAO+lB,oBAAoB,SAAU4X,MAEtC,CAACjgC,IACJvH,IAAM6B,WAAU,WACdylC,IACA//B,EAAS6/B,EAAgB32B,WACxB,CAAClJ,IACGvH,IAAMu1B,cAAc,MAAOwN,YAAS,CACzCxjC,MAAOL,EACPG,IAAKgoC,GACJ1E,IC5CE,IA0BHgF,EAAe3nC,IAAMqM,YAAW,SAAsBjO,EAAOiB,GAC/D,IAAI0X,EAAU3Y,EAAM2Y,QAChBxb,EAAY6C,EAAM7C,UAClBH,EAAQgD,EAAMhD,MACdwsC,EAAcxpC,EAAMwpC,YACpBjF,EAAQC,YAAyBxkC,EAAO,CAAC,UAAW,YAAa,QAAS,gBAE9E,OAAO4B,IAAMu1B,cAAc,OAAQwN,YAAS,CAC1CxnC,UAAWsnC,YAAK9rB,EAAQ+rB,KAAM/rB,EAAQ,QAAQ7D,OAAO0xB,YAAWxpC,KAAUG,EAAW,CACnFssC,SAAU9wB,EAAQ8wB,UAClBD,IACFvoC,IAAKA,GACJsjC,OAyBUO,eA/DK,SAAgBvG,GAClC,MAAO,CACLmG,KAAM,CACJp5B,SAAU,WACV5F,OAAQ,EACRse,OAAQ,EACR/lB,MAAO,OACPyrC,WAAYnL,EAAMoL,YAAYC,UAEhCC,aAAc,CACZtrC,gBAAiBggC,EAAMiJ,QAAQ/I,QAAQiJ,MAEzCoC,eAAgB,CACdvrC,gBAAiBggC,EAAMiJ,QAAQC,UAAUC,MAE3C+B,SAAU,CACR/jC,OAAQ,OACRzH,MAAO,EACPod,MAAO,MA6CqB,CAChC9Q,KAAM,uBADOu6B,CAEZyE,G,UClEYrS,cAAct1B,IAAMu1B,cAAc,OAAQ,CACvDC,EAAG,uDACD,qBCFWF,cAAct1B,IAAMu1B,cAAc,OAAQ,CACvDC,EAAG,qDACD,sBCoBA2S,EAAOnoC,IAAMu1B,cAAc6S,EAAmB,CAChDxM,SAAU,UAGRyM,EAAQroC,IAAMu1B,cAAc+S,EAAoB,CAClD1M,SAAU,UAGR2M,EAAkBvoC,IAAMqM,YAAW,SAAyBjO,EAAOiB,GACrE,IAAI0X,EAAU3Y,EAAM2Y,QAChBmqB,EAAgB9iC,EAAM7C,UACtBimC,EAAYpjC,EAAMojC,UAClBoG,EAAcxpC,EAAMwpC,YACpB1jC,EAAU9F,EAAM8F,QAChBy+B,EAAQC,YAAyBxkC,EAAO,CAAC,UAAW,YAAa,YAAa,cAAe,YAE7F7C,EAAYsnC,YAAK9rB,EAAQ+rB,KAAM5B,EAAe,CAChD2G,SAAU9wB,EAAQ8wB,UAClBD,IAEF,OAAK1jC,EAMElE,IAAMu1B,cAAcmP,IAAY3B,YAAS,CAC9C3B,UAAW,MACX7lC,UAAWA,EACX8D,IAAKA,EACL0O,KAAM,KACN2T,SAAU,MACTihB,GAAsB,SAAdnB,EAAuB2G,EAAOE,GAXhCroC,IAAMu1B,cAAc,MAAO,CAChCh6B,UAAWA,OAuCF2nC,cA9EK,CAClBJ,KAAM,CACJzmC,MAAO,GACP+oC,WAAY,GAEdyC,SAAU,CACRxrC,MAAO,OACPyH,OAAQ,GACR,QAAS,CACP1K,UAAW,mBAqEiB,CAChCuP,KAAM,0BADOu6B,CAEZqF,G,QCLCC,EAAOxoC,IAAMqM,YAAW,SAAcjO,EAAOiB,GAC/C,IAAIqjB,EAAStkB,EAAMskB,OACf+lB,EAAkBrqC,EAAMsqC,SACxBA,OAA+B,IAApBD,GAAqCA,EAChDE,EAAevqC,EAAMvD,SACrBkc,EAAU3Y,EAAM2Y,QAChBxb,EAAY6C,EAAM7C,UAClB4lC,EAAmB/iC,EAAMgjC,UACzB7a,OAAiC,IAArB4a,EAA8B,MAAQA,EAClDyH,EAAwBxqC,EAAMyqC,eAC9BA,OAA2C,IAA1BD,EAAmC,YAAcA,EAClErhC,EAAWnJ,EAAMmJ,SACjBuhC,EAAqB1qC,EAAMwpC,YAC3BA,OAAqC,IAAvBkB,EAAgC,aAAeA,EAC7DC,EAAwB3qC,EAAM4qC,sBAC9BA,OAAkD,IAA1BD,EAAmCR,EAAkBQ,EAC7EE,EAAuB7qC,EAAM8qC,cAC7BA,OAAyC,IAAzBD,EAAkC,OAASA,EAC3DE,EAAwB/qC,EAAMgrC,kBAC9BA,OAA8C,IAA1BD,EAAmC,GAAKA,EAC5D5E,EAAmBnmC,EAAMo9B,UACzBA,OAAiC,IAArB+I,EAA8B,UAAYA,EACtD7qC,EAAQ0E,EAAM1E,MACd2vC,EAAiBjrC,EAAMmO,QACvBA,OAA6B,IAAnB88B,EAA4B,WAAaA,EACnD1G,EAAQC,YAAyBxkC,EAAO,CAAC,SAAU,WAAY,WAAY,UAAW,YAAa,YAAa,iBAAkB,WAAY,cAAe,wBAAyB,gBAAiB,oBAAqB,YAAa,QAAS,YAElPu+B,EAAQ2M,cACRC,EAAyB,eAAZh9B,EACbi9B,EAA4B,QAApB7M,EAAM6E,UACdqG,EAA2B,aAAhBD,EACX6B,EAAc5B,EAAW,YAAc,aACvC6B,EAAQ7B,EAAW,MAAQ,OAC3B8B,EAAM9B,EAAW,SAAW,QAC5B+B,EAAa/B,EAAW,eAAiB,cACzCxlC,EAAOwlC,EAAW,SAAW,QAQjC,IAAIgC,EAAkB7pC,IAAMoP,UAAS,GACjC06B,EAAUD,EAAgB,GAC1BE,EAAaF,EAAgB,GAE7BG,GAAmBhqC,IAAMoP,SAAS,IAClC66B,GAAiBD,GAAiB,GAClCE,GAAoBF,GAAiB,GAErCG,GAAmBnqC,IAAMoP,SAAS,CACpCs6B,OAAO,EACPC,KAAK,IAEHS,GAAgBD,GAAiB,GACjCE,GAAmBF,GAAiB,GAEpCG,GAAmBtqC,IAAMoP,SAAS,CACpCgK,SAAU,SACVosB,aAAc,OAEZ+E,GAAgBD,GAAiB,GACjCE,GAAmBF,GAAiB,GAEpCG,GAAe,IAAIzhB,IACnB0hB,GAAU1qC,IAAM0O,OAAO,MACvBi8B,GAAqB3qC,IAAM0O,OAAO,MAElCk8B,GAAc,WAChB,IACIC,EAkBAC,EAnBAC,EAAWL,GAAQj6B,QAGvB,GAAIs6B,EAAU,CACZ,IAAIC,EAAOD,EAASE,wBAEpBJ,EAAW,CACT/D,YAAaiE,EAASjE,YACtBN,WAAYuE,EAASvE,WACrBvf,UAAW8jB,EAAS9jB,UACpBikB,qBAAsBxE,EAAwBqE,EAAUpO,EAAM6E,WAC9DqF,YAAakE,EAASlE,YACtBntB,IAAKsxB,EAAKtxB,IACV0I,OAAQ4oB,EAAK5oB,OACb5I,KAAMwxB,EAAKxxB,KACXC,MAAOuxB,EAAKvxB,OAMhB,GAAIsxB,IAAsB,IAAVrxC,EAAiB,CAC/B,IAAIirB,EAAYgmB,GAAmBl6B,QAAQ5V,SAE3C,GAAI8pB,EAAU/rB,OAAS,EAAG,CACxB,IAAIuyC,EAAMxmB,EAAU8lB,GAAatgC,IAAIzQ,IAEjC0xC,EAMJN,EAAUK,EAAMA,EAAIF,wBAA0B,MAIlD,MAAO,CACLJ,SAAUA,EACVC,QAASA,IAITO,GAAuBC,aAAiB,WAC1C,IAAIC,EAEAC,EAAeZ,KACfC,EAAWW,EAAaX,SACxBC,EAAUU,EAAaV,QAEvBW,EAAa,EAEjB,GAAIX,GAAWD,EACb,GAAIhD,EACF4D,EAAaX,EAAQpxB,IAAMmxB,EAASnxB,IAAMmxB,EAAS5jB,cAC9C,CACL,IAAIykB,EAAalC,EAAQqB,EAASK,qBAAuBL,EAAS/D,YAAc+D,EAAShE,YAAcgE,EAASrE,WAChHiF,EAAaX,EAAQtxB,KAAOqxB,EAASrxB,KAAOkyB,EAIhD,IAAIC,GAAqBJ,EAAqB,GAAIlG,YAAgBkG,EAAoB7B,EAAO+B,GAAapG,YAAgBkG,EAAoBlpC,EAAMyoC,EAAUA,EAAQzoC,GAAQ,GAAIkpC,GAElL,GAAI5xC,MAAMswC,GAAeP,KAAW/vC,MAAMswC,GAAe5nC,IACvD6nC,GAAkByB,OACb,CACL,IAAIC,EAASpkB,KAAKqkB,IAAI5B,GAAeP,GAASiC,EAAkBjC,IAC5DoC,EAAQtkB,KAAKqkB,IAAI5B,GAAe5nC,GAAQspC,EAAkBtpC,KAE1DupC,GAAU,GAAKE,GAAS,IAC1B5B,GAAkByB,OAKpBI,GAAS,SAAgBC,INnOhB,SAAiBC,EAAUjwB,EAAShV,GACjD,IAAI3I,EAAUqiC,UAAU9nC,OAAS,QAAsBoE,IAAjB0jC,UAAU,GAAmBA,UAAU,GAAK,GAC9EwL,EAAKxL,UAAU9nC,OAAS,QAAsBoE,IAAjB0jC,UAAU,GAAmBA,UAAU,GAAK,aACzEyL,EAAgB9tC,EAAQ+tC,KACxBA,OAAyB,IAAlBD,EAA2BpF,EAAeoF,EACjDE,EAAoBhuC,EAAQiuC,SAC5BA,OAAiC,IAAtBD,EAA+B,IAAMA,EAChD3C,EAAQ,KACRh3B,EAAOsJ,EAAQiwB,GACfM,GAAY,EAEZC,EAAS,WACXD,GAAY,GA0BV75B,IAAS1L,EACXklC,EAAG,IAAIlxC,MAAM,uCAIfge,uBA5BW,SAASyzB,EAAKC,GACvB,GAAIH,EACFL,EAAG,IAAIlxC,MAAM,4BADf,CAKc,OAAV0uC,IACFA,EAAQgD,GAGV,IAAI1F,EAAOxf,KAAKmlB,IAAI,GAAID,EAAYhD,GAAS4C,GAC7CtwB,EAAQiwB,GAAYG,EAAKpF,IAAShgC,EAAK0L,GAAQA,EAE3Cs0B,GAAQ,EACVhuB,uBAAsB,WACpBkzB,EAAG,SAKPlzB,sBAAsByzB,OMiMtBG,CAAQnD,EAAaiB,GAAQj6B,QAASu7B,IAGpCa,GAAiB,SAAwBC,GAC3C,IAAId,EAActB,GAAQj6B,QAAQg5B,GAE9B5B,EACFmE,GAAec,GAEfd,GAAec,GAAStD,GAAS,EAAI,GAErCwC,GAAexC,GAAgC,YAAvBtD,KAAoC,EAAI,GAGlE6F,GAAOC,IAGLe,GAAyB,WAC3BF,IAAgBnC,GAAQj6B,QAAQm5B,KAG9BoD,GAAuB,WACzBH,GAAenC,GAAQj6B,QAAQm5B,KAG7BqD,GAA4BjtC,IAAMwE,aAAY,SAAU4iC,GAC1DoD,GAAiB,CACfpxB,SAAU,KACVosB,cAAe4B,MAEhB,IA2BC8F,GAAyB5B,aAAiB,WAC5C,IAAI6B,EAAgBvC,KAChBC,EAAWsC,EAActC,SACzBC,EAAUqC,EAAcrC,QAE5B,GAAKA,GAAYD,EAIjB,GAAIC,EAAQpB,GAASmB,EAASnB,GAAQ,CAEpC,IAAI0D,EAAkBvC,EAASpB,IAAgBqB,EAAQpB,GAASmB,EAASnB,IACzEqC,GAAOqB,QACF,GAAItC,EAAQnB,GAAOkB,EAASlB,GAAM,CAEvC,IAAI0D,EAAmBxC,EAASpB,IAAgBqB,EAAQnB,GAAOkB,EAASlB,IAExEoC,GAAOsB,OAGPC,GAA0BhC,aAAiB,WAC7C,GAAI/B,GAAgC,QAAlBL,EAAyB,CACzC,IAMIqE,EACAC,EAPAC,EAAmB/C,GAAQj6B,QAC3BwW,EAAYwmB,EAAiBxmB,UAC7BymB,EAAeD,EAAiBC,aAChCx0B,EAAeu0B,EAAiBv0B,aAChC2tB,EAAc4G,EAAiB5G,YAC/BC,EAAc2G,EAAiB3G,YAInC,GAAIe,EACF0F,EAAkBtmB,EAAY,EAC9BumB,EAAgBvmB,EAAYymB,EAAex0B,EAAe,MACrD,CACL,IAAIstB,EAAaE,EAAwBgE,GAAQj6B,QAASksB,EAAM6E,WAEhE+L,EAAkB/D,EAAQhD,EAAaK,EAAcC,EAAc,EAAIN,EAAa,EACpFgH,EAAiBhE,EAAqDhD,EAAa,EAA1DA,EAAaK,EAAcC,EAAc,EAGhEyG,IAAoBnD,GAAcV,OAAS8D,IAAkBpD,GAAcT,KAC7EU,GAAiB,CACfX,MAAO6D,EACP5D,IAAK6D,QAKbxtC,IAAM6B,WAAU,WACd,IAAI2lC,EAAe9pB,aAAS,WAC1B2tB,KACAiC,QAEEK,EAAMC,YAAYlD,GAAQj6B,SAE9B,OADAk9B,EAAIje,iBAAiB,SAAU8X,GACxB,WACLA,EAAaE,QACbiG,EAAI/d,oBAAoB,SAAU4X,MAEnC,CAAC6D,GAAsBiC,KAC1B,IAAIO,GAAmB7tC,IAAMwE,YAAYkZ,aAAS,WAChD4vB,SAEFttC,IAAM6B,WAAU,WACd,OAAO,WACLgsC,GAAiBnG,WAElB,CAACmG,KACJ7tC,IAAM6B,WAAU,WACdkoC,GAAW,KACV,IACH/pC,IAAM6B,WAAU,WACdwpC,KACAiC,QAEFttC,IAAM6B,WAAU,WACdqrC,OACC,CAACA,GAAwBjD,KAC5BjqC,IAAM8tC,oBAAoBprB,GAAQ,WAChC,MAAO,CACLqrB,gBAAiB1C,GACjB2C,oBAAqBV,MAEtB,CAACjC,GAAsBiC,KAC1B,IAAIhJ,GAAYtkC,IAAMu1B,cAAcoS,EAAc5E,YAAS,CACzDxnC,UAAWwb,EAAQutB,UACnBsD,YAAaA,EACbxsC,MAAOytC,GACNO,EAAmB,CACpB7pC,MAAOwjC,YAAS,GAAIkH,GAAgB,GAAIb,EAAkB7pC,UAExD0uC,GAAa,EACbpzC,GAAWmF,IAAM04B,SAAS75B,IAAI8pC,GAAc,SAAUtyB,GACxD,IAAKrW,IAAMkuC,eAAe73B,GACxB,OAAO,KAST,IAAI83B,OAAmCnxC,IAAtBqZ,EAAMjY,MAAM1E,MAAsBu0C,GAAa53B,EAAMjY,MAAM1E,MAC5E+wC,GAAaxsB,IAAIkwB,EAAYF,IAC7B,IAAIrtC,EAAWutC,IAAez0C,EAE9B,OADAu0C,IAAc,EACPjuC,IAAMouC,aAAa/3B,EAAO,CAC/BguB,UAAuB,cAAZ93B,EACX+3B,UAAW1jC,IAAakpC,GAAWxF,GACnC1jC,SAAUA,EACV2G,SAAUA,EACVi0B,UAAWA,EACX9hC,MAAOy0C,OAGPE,GA9IyB,WAC3B,IAAIA,EAAsB,GAC1BA,EAAoBC,sBAAwB/E,EAAavpC,IAAMu1B,cAAc4R,EAAe,CAC1F5rC,UAAWwb,EAAQwyB,WACnBhiC,SAAU0lC,KACP,KACL,IAAIsB,EAAsBnE,GAAcV,OAASU,GAAcT,IAC3D6E,EAAoBjF,IAAiC,SAAlBL,GAA4BqF,GAAyC,YAAlBrF,GAAiD,OAAlBA,GAezH,OAdAmF,EAAoBI,kBAAoBD,EAAoBxuC,IAAMu1B,cAAcyT,EAAuB,CACrGpB,YAAaA,EACbpG,UAAWgI,EAAQ,QAAU,OAC7BhhC,QAASukC,GACT7oC,QAASkmC,GAAcV,MACvBnuC,UAAWsnC,YAAK9rB,EAAQmyB,cAAiC,OAAlBA,GAA0BnyB,EAAQ23B,wBACtE,KACLL,EAAoBM,gBAAkBH,EAAoBxuC,IAAMu1B,cAAcyT,EAAuB,CACnGpB,YAAaA,EACbpG,UAAWgI,EAAQ,OAAS,QAC5BhhC,QAASwkC,GACT9oC,QAASkmC,GAAcT,IACvBpuC,UAAWsnC,YAAK9rB,EAAQmyB,cAAiC,OAAlBA,GAA0BnyB,EAAQ23B,wBACtE,KACEL,EAwHiBO,GAC1B,OAAO5uC,IAAMu1B,cAAchP,EAAWwc,YAAS,CAC7CxnC,UAAWsnC,YAAK9rB,EAAQ+rB,KAAMvnC,EAAWssC,GAAY9wB,EAAQ8wB,UAC7DxoC,IAAKA,GACJsjC,GAAQ0L,GAAoBI,kBAAmBJ,GAAoBC,sBAAuBtuC,IAAMu1B,cAAc,MAAO,CACtHh6B,UAAWsnC,YAAK9rB,EAAQ83B,SAAUtF,EAAaxyB,EAAQwyB,WAAaxyB,EAAQ+3B,OAC5EvvC,MAAOgrC,GACPlrC,IAAKqrC,GACLnwB,SAAUszB,IACT7tC,IAAMu1B,cAAc,MAAO,CAC5Bh6B,UAAWsnC,YAAK9rB,EAAQg4B,cAAelH,GAAY9wB,EAAQi4B,sBAAuBtG,IAAaa,GAAcxyB,EAAQ2xB,UACrHrpC,IAAKsrC,GACL58B,KAAM,WACLlT,IAAWivC,GAAWxF,IAAY+J,GAAoBM,oBAqG5CzL,eAvfK,SAAgBvG,GAClC,MAAO,CAELmG,KAAM,CACJ1pB,SAAU,SACV+rB,UAAW,GACX9rB,wBAAyB,QAEzByiB,QAAS,QAIX+L,SAAU,CACRzE,cAAe,UAIjB2L,cAAe,CACbjT,QAAS,QAIXkT,sBAAuB,CACrB5L,cAAe,UAIjBsF,SAAU,CACRrF,eAAgB,UAIlBwL,SAAU,CACRnlC,SAAU,WACVoyB,QAAS,eACTmT,KAAM,WACNC,WAAY,UAIdJ,MAAO,CACLK,UAAW,SACX9yC,MAAO,QAITktC,WAAY,CACV4F,UAAW,SAEXC,eAAgB,OAEhB,uBAAwB,CACtBtT,QAAS,SAMboN,cAAe,GAGfwF,qBAAsBrJ,YAAgB,GAAI1I,EAAM8G,YAAY4L,KAAK,MAAO,CACtEvT,QAAS,SAIXwI,UAAW,MAqbmB,CAChC37B,KAAM,WADOu6B,CAEZsF,G,SCjgBG8G,EAAiB,SAACC,G,MAClBA,YAAJ,SAA2BA,EACzB,OAGF,QAkBWC,EAAYC,aACvB,SAAA9S,G,IAEQ+S,EAAiB/S,yBACrBA,kBADqBA,KAErBA,6B,MAEK,CACLgT,KAAM,CACJv0C,MAAOuhC,0BADH,GAEJhgC,gBAAiB+yC,MAIvB,CAAE/mC,KAAM,oBAGGinC,EAAyD,SAAC,G,IACrEC,EAII,EAJJA,KACAtoC,EAGI,EAHJA,SACAuoC,EAEI,EAFJA,cACAC,EACI,EADJA,SAEMh5B,EAAUy4B,IAEV3G,EAAiBlM,UADT2M,cACS3M,yBAAvB,U,OAQE,iCACE,2BACEpwB,QADF,YAEE7S,MAAO41C,EAFT,GAGE/nC,SAXe,SAACzB,EAAD,GACfpM,IAAU41C,EAAd,IACE/nC,EA1CJ,SA0CIA,EAzCF,OAGF,UAgDMhM,UAAWwb,EAJb,KAKE8xB,eAAgBA,GAEhBmH,2BAAKt2C,MAALs2C,OAAkBx1C,KAAMw1C,6CACxBA,2BAAKt2C,MAALs2C,OAAkBx1C,KAAMw1C,gDAMhCJ,eAAkC,CAChCE,cAAeE,yBC9EqC,SAAA5xC,G,OAElD,wBACE4B,0BAAMw1B,EAAE,wKACRx1B,0BAAMiwC,KAANjwC,OAAkBw1B,EAAE,qBDyEQ,MAEhCua,SAAUC,yBE/EqC,SAAA5xC,G,OAE7C,wBACE4B,0BAAMw1B,EAAE,oJACRx1B,0BAAMiwC,KAANjwC,OAAkBw1B,EAAE,kBACpBx1B,0BAAMw1B,EAAE,gDF0EFwa,OGtEL,IAAMR,EAAYC,aACvB,SAAAp2C,G,MAAM,CACJ62C,QAAS,CACPxqB,YADO,GAEPyqB,aAFO,GAGP9M,eAAgB,gBAElB+M,UAAW,CACTtzC,OADS,cAETmB,OAAQ,cAGZ,CAAE0K,KAAM,uBAGG0nC,GAAyD,SAAC,G,IACrEC,EAQI,EARJA,KACAf,EAOI,EAPJA,SACAgB,EAMI,EANJA,YACAC,EAKI,EALJA,KACAC,EAII,EAJJA,SACAX,EAGI,EAHJA,cACAC,EAEI,EAFJA,SACAxoC,EACI,EADJA,SAEM4D,EAAQulC,cACR35B,EAAUy4B,IACVmB,GAAYF,GAAD,qBAAoB5mC,QAA0BA,mBAA/D,I,EAC+C+mC,YAAgBN,EAAME,EAJjE,GAIIK,EAJJ,eAIkBC,EAJlB,uBAMEC,EAAN,QADczH,cACF3M,U,OAGV,wCACE,6BAAeqU,aAAf,EAAmCz1C,UAAWwb,EAAQm5B,SACpDF,2BAAM1O,WAAN0O,EAAgBxtC,QAAhBwtC,SAAiC5N,KAAK,UACpC4N,2BAAMhyB,MAANgyB,EAAW1O,WAAX0O,EAAqBxN,GAArBwN,EAA4BxtC,QAA5BwtC,aAAiDxO,UAAU,UACzD,mCACE,6BACEj1B,QADF,YAEE/D,QAAS,W,OAAM+nC,EAAN,SACT3vC,SAHF,SAGY2uC,EACV90C,MAAO0Q,oBAGX,mCACE,6BACEoB,QADF,KAEE/D,QAAS,W,OAAM+nC,EAAN,SACT3vC,SAHF,SAGY2uC,EACV90C,MAAO0Q,qCAKb,2BACE6S,MADF,EAEEsjB,WAFF,EAGEkB,GAHF,EAIEhgC,QAJF,SAKEy+B,WALF,WAMEO,UAAWuP,EAAM,cAAgB,OAEjCf,6BACEzjC,QADFyjC,KAEExnC,QAAS,W,OAAM+nC,EAAN,UACT3vC,SAHFovC,UAGYT,EACV90C,MAAO0Q,qBAGT6kC,6BAAazjC,QAAbyjC,KAA0Bv1C,MAA1Bu1C,IAAoCz0C,UAAWwb,EAAQq5B,YAEvD,6BACE7jC,QADF,KAEE/D,QAAS,W,OAAM+nC,EAAN,YACT3vC,SAHF,YAGY2uC,EACV90C,MAAO0Q,sBAIVqlC,GACC,2BAAMxyB,MAAN,EAAWsjB,WAAX,EAAqBkB,GAArB,EAA4BhB,UAA5B,SAA+Ch/B,QAAQ,YACrDwtC,6BACEzjC,QADFyjC,YAEEpvC,SAFFovC,OAEYa,EACVp2C,MAAO0Q,kBAHT6kC,MAIExnC,QAAS,W,OAAMsoC,EAAN,SAGXd,6BACEzjC,QADFyjC,YAEEpvC,SAFFovC,OAEYa,EACVp2C,MAAO0Q,kBAHT6kC,MAIExnC,QAAS,W,OAAMsoC,EAAN,YAOlBH,GACC,2BACEb,cADF,EAEEC,SAFF,EAGEF,KAHF,EAIEtoC,SAAUgpC,M,+NChFpB,IAAM5tB,G,2VAAe,CAAH,QAEhBsuB,OAFgB,EAGhBrJ,YAHgB,WAIhBsJ,OAJgB,OAKhBC,MAAO,CAAC,OAAQ,OAAQ,QAAS,aAGnC,SAASC,GAAWhzC,G,IACZ+M,EAAQulC,c,GAEd,aAAItyC,c,MACI,IAAIpD,MAAV,sE,MAGK,CACLq2C,iBAAkB,W,OAChBC,YAAmBlzC,EAAD,OAAeA,EAAf,KAA2B,C,MACpC+M,EADoC,kB,MAEpCA,EAAMomC,sBAKrB,IAAaC,GAAiBC,YAAyC,CACrEL,WADqE,GAErErxB,MAFqE,IAGrE3Q,SAHqE,IAIrEsiC,wBAAyBrB,KAGdsB,GAAyBF,YAAiD,CACrFL,WADqF,GAErFrxB,MAFqF,IAGrF3Q,SAHqF,IAIrFsiC,wBAJqF,GAKrFE,eAAgB,SAAAxzC,G,MAAU,CACxByzC,OAAQzzC,oBAA4B,eAIxCozC,mBAEAG,mB,oCChFA,mCAQO,IAAMG,GAET,SAAA1zC,GACF,OACE,kBAAC8M,GAAA,EAAD,KACE,kBAAC1F,GAAA,EAAD,CACElH,QACE,6BACGF,EAAM3D,MADT,IACiBs3C,aAAmB3zC,EAAM1E,SAI5C,kBAAC83C,GAAD,eACEf,UAAQ,EACRlkC,QAAQ,SACRylC,OAAO,OACPxB,MAAM,EACNyB,eAAgB,OAAK,EAAD,kCACpBC,eAAgB,OAAK,EAAD,iCAChB9zC,Q,6GCrBD+zC,EAAoD,SAAA/zC,GAC/D,OACE,kBAAC8M,EAAA,EAAD,KACE,kBAACknC,EAAA,EAAD,eACE7lC,QAAQ,SACRylC,OAAO,MACPC,eAAgB,OAAK,EAAD,kCACpBC,eAAgB,OAAK,EAAD,iCAChB9zC,M,kCCFL,IAAMi0C,EAAgBryC,IAAMC,MACjC,YAAoC,IAAjCwH,EAAgC,EAAhCA,UAAc6qC,EAAkB,6BAC3B3qC,EAAQC,YAAuBH,GAC/BjP,EAAYkP,cAClB,OAAOG,aAAY,kBACjB,kBAAC,EAAD,eACEnO,MAAOiO,EAAMjO,MACb6N,SAAUI,EAAMG,SAChByqC,OAAQ5qC,EAAMK,WACd0C,SAAUlS,EAAU4P,cAChBkqC,W,kCCtBZ,4BAEehd,gBAAct1B,IAAMu1B,cAAcv1B,IAAM89B,SAAU,KAAM99B,IAAMu1B,cAAc,OAAQ,CACjGC,EAAG,oJACDx1B,IAAMu1B,cAAc,OAAQ,CAC9BC,EAAG,8CACA,e,kCCNL,4BAEeF,gBAAct1B,IAAMu1B,cAAc,OAAQ,CACvDC,EAAG,iHACD,S,kCCJJ,4BAEeF,gBAAct1B,IAAMu1B,cAAcv1B,IAAM89B,SAAU,KAAM99B,IAAMu1B,cAAc,OAAQ,CACjG0a,KAAM,OACNza,EAAG,kBACHkQ,QAAS,QACP1lC,IAAMu1B,cAAc,OAAQ,CAC9BC,EAAG,uOACA,mB,kCCRL,4BAEeF,gBAAct1B,IAAMu1B,cAAcv1B,IAAM89B,SAAU,KAAM99B,IAAMu1B,cAAc,OAAQ,CACjGC,EAAG,6FACDx1B,IAAMu1B,cAAc,OAAQ,CAC9B0a,KAAM,OACNza,EAAG,mBACA,S,kCCPL,4BAEeF,gBAAct1B,IAAMu1B,cAAc,OAAQ,CACvDC,EAAG,qPACD,U,kCCJJ,4BAEeF,gBAAct1B,IAAMu1B,cAAc,OAAQ,CACvDC,EAAG,+HACD,gB,kCCJJ,4BAEeF,gBAAct1B,IAAMu1B,cAAc,OAAQ,CACvDC,EAAG,wVACD,kB,kCCJJ,4BAEeF,gBAAct1B,IAAMu1B,cAAc,OAAQ,CACvDC,EAAG,mOACD,e,kCCJJ,4BAEeF,gBAAct1B,IAAMu1B,cAAc,OAAQ,CACvDC,EAAG,4MACD,a,0KCYSgd,EAAiC,kBAC5C,kBAACxnC,EAAA,EAAD,KACE,kBAAC7E,EAAA,EAAD,CACEjD,IAAK,EACLD,OAAQ,EACRjH,SAAS,aACTsJ,KAAM6D,EAAA,EAAK,EAAD,qBACV3O,KAAMi4C,IACNr3C,MAAOC,IAAO22B,UACd5rB,MAAOssC,MAET,kBAACvsC,EAAA,EAAD,CACEjD,IAAK,EACLD,OAAQ,EACRjH,SAAS,aACTsJ,KAAM6D,EAAA,EAAK,EAAD,oBACV3O,KAAMi4C,IACNr3C,MAAOC,IAAO22B,UACd5rB,MAAOusC,MAET,kBAACxsC,EAAA,EAAD,CACEjD,IAAK,EACLD,OAAQ,EACRjH,SAAS,sBACTsJ,KAAM6D,EAAA,EAAK,EAAD,WACV3O,KAAMi4C,IACNr3C,MAAOC,IAAO22B,UACd5rB,MAAOwsC,MAET,kBAACzsC,EAAA,EAAD,CACEjD,IAAK,EACLD,OAAQ,EACRjH,SAAS,aACTqK,2BAA2B,EAC3Bf,KAAM6D,EAAA,EAAK,EAAD,oBACV3O,KAAMq4C,IACNz3C,MAAOC,IAAO22B,UACd5rB,MAAO0sC,Q,kEC7CAC,EAAuB,WAClC,OACE,kBAACzwC,EAAA,EAAD,CAAeE,QAAQ,cACrB,kBAACC,EAAA,EAAD,CAAYC,YAAY,EAAMrG,MAAM,SAClC,kBAACg2C,EAAA,EAAD,CACE5qC,UAAU,WACVhN,MAAO,kBAAC,QAAD,kBACPu4C,QAAQ,KAGZ,kBAACvwC,EAAA,EAAD,CAAYC,YAAY,EAAMrG,MAAM,SAClC,kBAACg2C,EAAA,EAAD,CACE5qC,UAAU,SACVhN,MAAO,kBAAC,QAAD,gBACPu4C,QAAQ,KAGZ,kBAACvwC,EAAA,EAAD,KACE,kBAAC8H,EAAA,EAAD,CAAkBlO,MAAM,SACtB,kBAAC,QAAD,oC,8JCdG42C,EAA0BnzC,YACrC,SACA,MAKWozC,EAAiC,WAC5C,IAAMhzC,EAAYC,cADgC,EAEtB8yC,IAFsB,mBAE3C1qC,EAF2C,KAEnC4qC,EAFmC,KAK5Cj9B,GAAWjM,EADSN,cAAlBM,eACuB,YAE/BjK,IAAM6B,WAAU,WACVqU,GACFi9B,EAAUj9B,KAEX,CAACi9B,EAAWj9B,IAEf,IAAM3Y,EAAc,CAClBc,QAAS6B,EAAUE,SACnBtB,YAAaqK,EAAA,EAAK,EAAD,oBACjB1K,kBAAmB,SAAA20C,GAAG,OAAI9yC,YAAiB8yC,IAC3Cj1C,oBAAoB,EACpBoC,eAAgBC,KAGZC,EAAgB4G,YAAiB,eAClC9J,EADkC,CAErCoD,kBAAmBwyC,EACnBvyC,SAAU2H,KAGN1H,EAAcC,YAAkB,CACpCC,gBAAiBT,MAGnB,OACE,kBAACpC,EAAA,EAAD,iBACMuC,EACAI,EACAtD,KAKH,SAAS81C,IAA4D,IAA5CC,IAA2C,yDACnEpzC,EAAYC,cADuD,EAE3B8yC,IAF2B,mBAElEM,EAFkE,KAEjDC,EAFiD,KAInEC,EAAyC,OAApBF,EACrBG,EAA6BC,QACjCF,GAAsBvzC,EAAUE,SAASkH,KAAK0O,YAASu9B,KAGzDvzC,IAAM6B,WAAU,WACV4xC,IAAuBC,GACzBF,EAAmB,QAEpB,CAACE,EAA4BD,EAAoBD,IAEpD,IAAM1xC,GAAoB2xC,IAAuBC,EAGjD,OAF2D,IAA9BxzC,EAAUE,SAASxH,QAI7CkJ,GAAoBwxC,EAEdpzC,EAAU0zC,cAAchwC,GAI1B2vC,E,wCCnEHM,EAAU7zC,IAAMiF,cAAkC,CACtD6uC,QAAQ,EACRjgC,SAAS,IAKEkgC,EAAyD,SAAC,GAEhE,IADLl5C,EACI,EADJA,SACI,EACsBm5C,cADtB,mBACGC,EADH,KACY1gC,EADZ,KAEE2gC,EAASC,cAETC,EAA0B,CAC9BvgC,QAASN,EAAOM,QAChBigC,OAAQvgC,EAAOugC,OACfO,QAAS9gC,EAAO5O,MAAQ4O,EAAO5O,KAAK0vC,SAGhC9rC,EAAS8qC,GAAgB,GAE/B,OACE,kBAAC,IAAD,CACEiB,SAAU,SAACC,GACLhsC,GACF0rC,EAAQ,CACN/9B,SAAU3N,EACVisC,SAAUD,EAAWC,SACrBC,OAAQF,EAAWE,UAIzBC,cAAe,CAAEF,SAAUG,YAAQT,IAAU,GAAIO,OAAQP,MAEzD,kBAACL,EAAQ1uC,SAAT,CAAkBzL,MAAO06C,GAAMv5C,KCrCxB+5C,EAAsBl1C,aAAS,WAAO,IAAD,EDQXM,IAAMoF,WAAWyuC,GCP9CQ,EADwC,EACxCA,QAASxgC,EAD+B,EAC/BA,QAASigC,EADsB,EACtBA,OACpBvrC,EAAS8qC,GAAgB,GAC/B,OAAKS,EAGDjgC,EAEA,kBAAC7R,EAAA,EAAD,KACE,kBAACqD,EAAA,EAAD,OAIDkD,EAOA8rC,GAA8B,IAAnBA,EAAQz7C,OAQtB,oCACGy7C,EAAQx1C,KAAI,SAAAg2C,GAAM,OACjB,kBAAC1jB,EAAA,EAAD,CAASpvB,IAAK8yC,EAAOjxC,IACnB,kBAACnB,EAAA,EAAD,CAAYC,YAAY,GACtB,kBAAC0uB,EAAA,EAAD,CAAcpqB,GAAE,aAAQ6tC,EAAOjxC,KAC7B,kBAACg1B,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,CAAar+B,KAAMs6C,SAIzB,kBAACryC,EAAA,EAAD,CAAYE,eAAgB,GAA5B,WACOkyC,EAAOE,eADd,aACiChD,YAC7B8C,EAAOG,uBAlBf,kBAAChzC,EAAA,EAAD,KACE,kBAAC,QAAD,2BARF,kBAACA,EAAA,EAAD,KACE,kBAAC,QAAD,yBAZG,Q,oCCTEizC,GAAyC,SAAA72C,GACpD,OACE,kBAAC+I,GAAA,EAAD,CAAUC,UAAU,uBAClB,kBAAC,KAAD,CAAMJ,GAAI4rC,KACR,kBAAC/Z,EAAA,EAAD,CACEvzB,KAAM6D,EAAA,EAAK,EAAD,mBACV/N,MAAOC,IAAOyQ,OACdzP,MAAM,QACNyH,OAAQpJ,IAAQ0O,aAAe1O,IAAQC,qB,6GCZjD,IAAMu6C,GAAgBp7C,KAAOC,IAAV,MASNo7C,GAA0Bz1C,aAAiB,YAAsB,IAAnB01C,EAAkB,EAAlBA,YACzD,OACE,oCACE,kBAAC,EAAD,MACCA,GACC,kBAACF,GAAD,KACE,kBAAC,GAAD,WCVGG,GAAuC,SAAAj3C,GAAK,OACvD,kBAAC,EAAD,KACE,kBAACk3C,EAAA,EAAD,CACEC,UAAWpsC,EAAA,EAAK,EAAD,mBACfqsC,eAAe,EACfC,UAAU,aAEV,kBAAC9iB,EAAA,EAAD,KACE,kBAACwiB,GAAD,CAAyBC,aAAa,IACtC,kBAAC,EAAD,OAEF,kBAACziB,EAAA,EAAD,KACE,kBAACiiB,EAAD,U,SCtBOtf,gBAAct1B,IAAMu1B,cAAc,OAAQ,CACvDC,EAAG,sJACD,SCISkgB,GAAqC,SAAAt3C,GAChD,OACE,oCACE,kBAACw6B,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,CAAar+B,KAAMm7C,GAAOntC,QAAS,kBAAMqB,OAAO+rC,c,uMCDxD,IAAMC,GAAwB/7C,KAAOg8C,EAAV,wEAAGh8C,CAAH,iNAChBuB,IAAOoQ,MAKdrR,aANuB,MAUdiB,IAAOsC,OAMPo4C,GAA4Bj8C,KAAOC,IAAV,4EAAGD,CAAH,+KAOlCM,aAPkC,OAqBhC47C,GAAgB,SAAC1wC,GAAD,OACpB,kBAACuwC,GAAD,KAAqCvwC,EAH9BjL,QAAQ,IAAI47C,OAAO,KAAM,KAAM,QAM3BC,GAAoC,SAAC,GAAD,IAC/C5wC,EAD+C,EAC/CA,KAD+C,IAE/CikC,WAF+C,qBAK7C,kBAACwM,GAAD,KAA4BC,GAAc1wC,IAE1C0wC,GAAc1wC,IC/CL6wC,GAA2Bz2C,aACtC,YAAwB,IAAD,IAApB02C,gBAAoB,MAAT,GAAS,EACf7tC,EAAS8qC,IACT9V,GAAQh1B,EAFO,EAGY8tC,aAC/B,CACEngC,SAAU3N,EACV6tC,WACAE,WAAY3C,QAAQyC,IAEtB,CAAE7Y,SANI54B,EAHa,EAGbA,KAAMuW,EAHO,EAGPA,MAAOrH,EAHA,EAGAA,QASrB,OAAI0pB,EACK,kBAAC,GAAD,CAAiBj4B,KAAM6D,EAAA,EAAK,EAAD,qBAGhC0K,EACK,kBAAC,GAAD,CAAiBvO,KAAM6D,EAAA,EAAK,EAAD,eAGhC+R,IAAUvW,EACL,KAIP,kBAAC,GAAD,CACE4kC,YAAY,EACZjkC,KACE8wC,GAAYzxC,EAAKkwC,OACblwC,EAAKkwC,OAAO0B,UACZ5xC,EAAK6xC,WAAWD,e,wCChCjBE,GAAyC,SAAAr4C,GACpD,OACE,kBAAC+I,GAAA,EAAD,CAAUC,UAAU,oBAClB,kBAAC,KAAD,CAAMJ,GAAI0vC,KACR,kBAAC7d,EAAA,EAAD,CACEvzB,KAAM6D,EAAA,EAAK,EAAD,mBACV/N,MAAOC,IAAOC,SACde,MAAM,QACNyH,OAAQpJ,IAAQ0O,aAAe1O,IAAQC,qB,gCCNpCg8C,GAAwC,SAAC,GAAD,IACnDnuC,EADmD,EACnDA,QACAkC,EAFmD,EAEnDA,SAFmD,OAInD,kBAACjL,GAAA,EAAD,CAAWE,aAAa,yBACtB,kBAACkE,GAAA,EAAD,CAAOxH,MAAO,IACZ,kBAAC6R,GAAA,EAAD,CACEO,UAAWjG,EACX4F,aAAc/S,IAAOoP,MACrB0D,YAAa,kBAAC,QAAD,sBACbE,aAAchT,IAAOyQ,OACrBpB,SAAUA,GAEV,kBAAC,QAAD,2BCNKksC,GAA6C,SAAC,GAAqB,IAAnBxB,EAAkB,EAAlBA,YACnDlX,EAAmBC,eAAnBD,eACAmW,EAAYwC,cAAZxC,QAEFn+B,EAAWm9B,GAAgB,GAJ4C,EAKrDyD,cAAjBC,EALsE,oBAOvEzC,EAAWt0C,IAAMwE,aAAY,6BAAAwI,EAAAgqC,OAAA,mDAC5B9gC,EAD4B,oEAAAlJ,EAAA,MAId+pC,EAAc,CAC/B7gC,cAL+B,QAI3BvR,EAJ2B,UAQvBf,EAAOe,EAAK4O,OAAZ3P,GACRywC,EAAQ1nC,KAAR,UAAgBimC,IAAhB,YAA0ChvC,IAC1Cs6B,EAAe/0B,EAAA,EAAK,EAAD,8BAVY,uCAYhC,CAAC+M,EAAU6gC,EAAe7Y,EAAgBmW,IAE7C,OAAOxsC,aAAY,kBACjB,kBAACovC,GAAA,EAAD,CAAWn6C,OAAM,UAAKpC,IAAQ49B,OAAb,WACf,kBAACh2B,EAAA,EAAD,KACG8yC,EACC,kBAAC,GAAD,MAEA,kBAAC,GAAD,CAAqB5sC,QAAS8rC,EAAU5pC,UAAWwL,IAErD,kBAAC,GAAD,YC/BKghC,GAAgC,SAAC,GAAD,IAAGC,EAAH,EAAGA,MAAH,OAC3C,kBAAC7B,EAAA,EAAD,CACEC,UAAWpsC,EAAA,EAAK,EAAD,WACfqsC,eAAe,EACfC,UAAW2B,IACXC,WAAY,kBAAC,GAAD,OAEZ,kBAAC1kB,EAAA,EAAD,KACE,kBAACwiB,GAAD,CAAyBC,aAAa,IACtC,kBAAC,GAAD,CAA0BA,YAAazB,QAAQwD,EAAMG,OAAOlB,aAE9D,kBAACD,GAAD,CAA0BC,SAAUe,EAAMG,OAAOlB,a,sDChBxCmB,GAAgBv3C,IAAMC,MAAiB,WAAO,IAAD,EAC1Bu3C,eAAtB5jC,EADgD,EAChDA,SAAUC,EADsC,EACtCA,QAElB,OACE,kBAAChF,GAAA,EAAD,CACEpH,UAAU,UACV3I,YAAaqK,EAAA,EAAK,EAAD,qBACjB6K,iBAAkB,kBAAM7K,EAAA,EAAK,EAAD,iBAC5B9K,QAASuV,GAAS,SAAAjP,GAAI,OAAIA,EAAK8yC,cAAc79C,KAC7Cqa,UAAWJ,EACXwoB,aAAa,EACb79B,eAAgBgD,IAAG6H,KAAK,QACxBtI,gBAAiBS,IAAG6H,KAAK,QACzB9I,eAAgBiB,IAAG6H,KAAK,a,WCfjBquC,GAAgB13C,IAAMC,MAAiB,WAClD,IAAMG,EAAWY,eADuC,EAE1B22C,aAAkB,CAC9Cv3C,aADMwT,EAFgD,EAEhDA,SAAUC,EAFsC,EAEtCA,QAGlB,OACE,kBAACrM,GAAA,EAAD,CACEC,UAAU,UACVwM,UAAWJ,EACXxV,QAASuV,GAAS,SAAAjP,GAAI,OAAIA,EAAKq3B,YAAYpiC,KAC3CkF,YAAaqK,EAAA,EAAK,EAAD,qBACjB1K,kBAAmBi+B,IACnB37B,gBAAiB27B,S,wECZjBmX,GAAU7zC,IAAMiF,mBAAgDjI,GAEzD46C,GAAsB/D,GAAQ1uC,SAE9B0yC,GAAwB,kBAAM73C,IAAMoF,WAAWyuC,KAWrD,SAASiE,KAAgD,IAAC,IAAD,EAClC93C,IAAMoP,cAChCpS,GAF4D,mBACvDiQ,EADuD,KAC/C8qC,EAD+C,KAKxDrD,EAAgB10C,IAAMuB,SAC1B,iBAAO,CACLy2C,aAAcC,aAAW,IAAIjlB,MAC7BklB,WAAYC,aAAS,IAAInlB,MACzBolB,UAAW,GACXC,SAAU,GACVrc,QAAS,GACT3nB,QAAS,GACTikC,WAAY,GACZC,QAAS,GACTC,QAAS,QAEX,IAjB4D,mBAA9BC,EAA8B,yBAA9BA,EAA8B,gBAoB9D,IAAMC,EAAoB14C,IAAM0O,OAAO+pC,GAEjCE,EAAc34C,IAAMwE,aACxB,SAAuBmE,EAASjP,GAC9B,OAAOg/C,EAAkBjoC,QAAQ5L,SAAS8D,GAAQjP,EAAQ,OAE5D,IAGI0G,EAAWY,eAEXszC,EAAWt0C,IAAMwE,aACrB,SAACo0C,GACCb,EAAU,CACR33C,WACA43C,aAAcY,EAAOZ,aACrBE,WAAYU,EAAOV,WACnBlc,QAAS2c,EAAY,SAAUC,EAAO5c,SACtC6c,UAAWF,EAAY,UAAWC,EAAOR,WACzCC,SAAUM,EAAY,UAAWC,EAAOP,UACxChkC,QAASskC,EAAY,SAAUC,EAAOvkC,SACtCykC,aAAcH,EAAY,SAAUC,EAAOL,SAC3CzkC,UAAW6kC,EAAY,WAAYC,EAAON,YAC1CE,QAASG,EAAY,UAAWC,EAAOJ,SACvCO,qBAAqB,MAGzB,CAACJ,EAAav4C,EAAUs0C,IAGpBsE,EAAQC,YAAS,CACrB3E,WACAI,kBAGF,MAAO,CACLznC,SACA+rC,QACAE,cAAeF,EAAMG,IAAIC,YCtEtB,IAAMC,GAAiC,WAC5C,IAAMpsC,EAAS4qC,KAETyB,EAASt5C,IAAM0O,OAAO,IAAIsa,KAC1BuwB,EAAYv5C,IAAM0O,OAA8B,MAChD8qC,EAAex5C,IAAMuB,SACzB,kBACE,IAAIk4C,KAAkB,CACpB/2C,YAAY,EACZg3C,cAAe,GACfvU,UAAW,OAEf,IAZgD,EAeLwU,aAC3C,CAAE1sC,OAAQA,GACV,CAAEswB,MAAOtwB,IAFH2G,EAf0C,EAe1CA,SAAmBgmC,EAfuB,EAehC/lC,QAKlB7T,IAAM6B,WAAU,WACdy3C,EAAO7oC,QAAQi3B,QACf8R,EAAaK,WACTN,EAAU9oC,SACZ8oC,EAAU9oC,QAAQqpC,wBAAuB,KAE1C,CAAC7sC,EAAQusC,IA1BsC,MA4B5BO,cAAfC,EA5B2C,oBA8B5CC,EAAkBj6C,IAAMwE,aAC5B,sCAAAwI,EAAAgqC,OAAA,mDAASkD,EAAT,EAASA,WAAYC,EAArB,EAAqBA,WACfltC,EADN,mCAAAD,EAAA,MAEuBgtC,EAAY,CAC7B/sC,SACAmtC,WAAY,CACVC,UAAWH,EACXI,QAASH,MANjB,OAUI,GARMx1C,EAFV,OAYM,IADMN,EADE,aACSM,EAAK4xB,MAAM+iB,OAAOj1C,MAC1B+N,EAAQ8nC,EAAY9nC,GAAS+nC,EAAW/nC,KACzCrB,EAAQ1M,EAAKk2C,UAEjBjB,EAAO7oC,QAAQwN,IAAI7L,EAAOrB,GAfpC,uCAqBA,CAACipC,EAAa/sC,IAGVutC,EAAcx6C,IAAMwE,aACxB,gBAAG4N,EAAH,EAAGA,MAAH,YAA6CpV,IAA9Bs8C,EAAO7oC,QAAQtG,IAAIiI,KAClC,IAGIqoC,EAAcz6C,IAAMwE,aACxB,YAAoC,IAAjC4N,EAAgC,EAAhCA,MAAOrQ,EAAyB,EAAzBA,IAAKxC,EAAoB,EAApBA,MAAOuV,EAAa,EAAbA,OACd/D,EAAQuoC,EAAO7oC,QAAQtG,IAAIiI,GACjC,YAAcpV,IAAV+T,EAEA,yBAAKxR,MAAOA,EAAOwC,IAAKA,GAAxB,OAMF,kBAAC,KAAD,CACEA,IAAKA,EACL24C,YAAa,EACbC,SAAUvoC,EACVwoC,MAAOpB,EACP1kC,OAAQA,IAEP,oBAAG+lC,EAAH,EAAGA,QAAH,OACC,yBAAKt7C,MAAOA,GACV,kBAACygC,GAAA,EAAD,CACEjvB,MAAOA,EAEPgiB,YAAY,iBAAC9lB,QAAD,IAACA,OAAD,YAACA,EAAQ7M,gBAAT,aAAC,EAAkBxH,cAAnB,QAA6B,GAAK,EAC9C2U,YACEwD,EAAMymB,qBAAuBZ,IAAuBkkB,OAEtD7a,eAAgB,WACdvvB,WAAWmqC,EAAS,cAQlC,CAACrB,EAAcvsC,IAGjB,IAAKA,EACH,OAAO,KAGT,GAAI2sC,EACF,OAAO,kBAACv0C,EAAA,EAAD,MAGT,IAAM01C,EAAannC,GAAS,SAAAjP,GAAS,IAAD,EACFA,EAAK4xB,MAAMykB,OAC3C,OAFkC,EAC1BC,SAD0B,EAChB1O,aAIpB,OAAKwO,EAKH,kBAAC,KAAD,MACG,gBAAG1+C,EAAH,EAAGA,MAAOyH,EAAV,EAAUA,OAAV,OACC,kBAAC,KAAD,CACEo3C,SAAUH,EACVP,YAAaA,EACbW,aAAclB,EACd56C,IAAKk6C,IAEJ,gBAAG6B,EAAH,EAAGA,eAAgBC,EAAnB,EAAmBA,cAAnB,OACC,kBAAC,KAAD,CACEh8C,IAAKg8C,EACLD,eAAgBA,EAChBE,UAAW9B,EAAa8B,UACxBC,yBAA0B/B,EAC1B0B,SAAUH,EACV1+C,MAAOA,EACPyH,OAAQA,EACR22C,YAAaA,UArBhB,kBAAC,QAAD,mB,gmBCnHX,IAAMe,GAAkB1hD,KAAOC,IAAV,sEAAGD,CAAH,kCAEjBgJ,aAFiB,MAKjB1I,aALiB,OAUfqhD,GAAkB3hD,KAAO4hD,GAAV,sEAAG5hD,CAAH,yCAGjBgJ,aAHiB,MAMjB1I,aANiB,OAWfuhD,GAAkB7hD,KAAOmI,GAAV,sEAAGnI,CAAH,yCAGjBgJ,aAHiB,MAMjB1I,aANiB,OAWRwhD,GAA0Bl8C,aAAS,WAC9C,IAAMuN,EAAS4qC,KADqC,EAE1BgE,aACxB,CAAE5uC,OAAQA,GACV,CAAEswB,MAAOtwB,IAFHtI,EAF4C,EAE5CA,KAAMkP,EAFsC,EAEtCA,QAKd,IAAK5G,EACH,OAAO,KAGT,GAAI4G,EACF,OAAO,kBAAC,GAAD,CAAiBvO,KAAM6D,EAAA,EAAK,EAAD,eAGpC,IAAMotB,EAAQ5xB,GAAQA,EAAK4xB,MAAMulB,eACjC,OAAKvlB,EAKH,oCACE,kBAACilB,GAAD,KACE,kBAACC,GAAD,KACE,kBAAC,QAAD,wBAEF,kBAACE,GAAD,KACG9mB,YAAY0B,EAAMhC,MAAM76B,MAAO68B,EAAMhC,MAAMwnB,SAASh2C,QAGzD,kBAACy1C,GAAD,KACE,kBAACC,GAAD,KACE,kBAAC,QAAD,yBAEF,kBAACE,GAAD,KACG9mB,YACC0B,EAAMylB,eAAetiD,MACrB68B,EAAMylB,eAAeD,SAASh2C,QAIpC,kBAACy1C,GAAD,KACE,kBAACC,GAAD,KACE,kBAAC,QAAD,sBAEF,kBAACE,GAAD,KACGplB,EAAM0lB,cAAgB1lB,EAAM2lB,iBAGjC,kBAACV,GAAD,KACE,kBAACC,GAAD,KACE,kBAAC,QAAD,2BAEF,kBAACE,GAAD,KACG9mB,YAAY0B,EAAM4lB,KAAKziD,MAAO68B,EAAM4lB,KAAKJ,SAASh2C,QAIvD,kBAAC,GAAD,CACET,KAAMX,EAAM4xB,MAAM6lB,qBAClB7S,YAAY,KA3CT,Q,oBCjDE8S,GAAoBr8C,IAAMC,MACrC,YAAoC,IAAjCwH,EAAgC,EAAhCA,UAAc6qC,EAAkB,8BAC3B3qC,EAAQC,YAAuBH,GAC/BjP,EAAYkP,cAClB,OAAOG,aAAY,kBACjB,kBAACiqC,GAAA,EAAD,eACEp4C,MAAOiO,EAAMjO,MACb6N,SAAUI,EAAMG,SAChByqC,OAAQ5qC,EAAMK,WACd0C,SAAUlS,EAAU4P,cAChBkqC,UCXNgK,GAAyBxiD,aAAOwI,KAAV,6EAAGxI,CAAH,qBAIfyiD,GAA0B,WACrC,IAAMn8C,EAAWY,eACjB,OAAO6G,aAAY,kBACjB,kBAACy0C,GAAD,CAAwB95C,QAAQ,cAC9B,kBAACC,EAAA,EAAD,CAAYC,YAAY,EAAMrG,MAAM,SAClC,kBAACggD,GAAD,CACE50C,UAAU,eACVhN,MAAO,kBAAC,QAAD,aACPu4C,QAAQ,KAGZ,kBAACvwC,EAAA,EAAD,CAAYC,YAAY,EAAMrG,MAAM,SAClC,kBAACggD,GAAD,CACE50C,UAAU,aACVhN,MAAO,kBAAC,QAAD,WACPu4C,QAAQ,KAGZ,kBAACvwC,EAAA,EAAD,KACE,kBAAC8H,EAAA,EAAD,CAAkBlO,MAAM,SACtB,uIACS+D,EAASxH,iB,WC1Bf4jD,GAA2D,SAAC,GAElE,IADL3hD,EACI,EADJA,SAEM4hD,EAAWC,YAAkB,IAC7BpF,EAASqF,YAAc,UACxBjK,IADwB,iBAFzB,EAMqCoF,GAAe,SAAU,WAA1D7qC,EANJ,EAMIA,OAAQ+rC,EANZ,EAMYA,MAAOE,EANnB,EAMmBA,cAEjBhF,EAASC,cACTjU,EAAiB/7B,eATnB,EAUoBtE,eAAfQ,EAVL,oBAgCJ,OApBAL,IAAM6B,WAAU,WACVy1C,GAAgC,UAAtBA,EAAOsF,aACnBH,EAAS,CAAEz1C,GAAI0rC,IAA6Br4C,SAAS,IACrD2+C,EAAMG,IAAI0D,YAAY,CACpB7E,aAAcC,aAAW/D,KACzBgE,WAAYC,aAASjE,OAEvB7zC,EAAY6/B,EAAe4c,gBAC3B5D,OAED,CACDA,EACAhF,EACAuI,EACAvc,EACAoX,EACAj3C,EACA24C,EAAMG,MAIN,kBAAC,IAAD,CAAaH,MAAOA,GAClB,kBAACpB,GAAD,CAAqBl+C,MAAOuT,GAASpS,KC7B9BkiD,GAAuB/8C,IAAMC,MAAiB,kBACzD,kBAAC,GAAD,KACE,kBAAC+8C,GAAA,EAAD,CACEzH,UAAWpsC,EAAA,EAAK,EAAD,qBACf8zC,kBAAkB,EAClBzH,eAAe,EACf6B,WAAY,kBAAC,GAAD,OAEZ,kBAAC6F,GAAA,EAAD,CAAoB12C,WAAW,aAAaC,QAAQ,KAClD,kBAACksB,EAAA,EAAD,KACE,kBAAC5yB,GAAA,EAAD,MACA,kBAACw3C,GAAD,MACA,kBAACG,GAAD,MACA,kBAAC,GAAD,QAIJ,kBAACwF,GAAA,EAAD,CAAoB12C,WAAW,aAAaC,QAAQ,KAClD,kBAACm1C,GAAD,OAGF,kBAACt4C,GAAA,EAAD,CACEC,gBAAgB,EAChBL,IAAK,EACLD,OAAQ,EACRF,eAAgB,EAChBK,2BAA4B,IAE5B,kBAAC,KAAD,KACE,kBAAC,GAAD,aCjCG+5C,GAAkBn9C,IAAMC,MAAiB,WACpD,IAAMG,EAAWY,eADyC,EAE5Bo8C,aAAoB,CAChDh9C,aADMwT,EAFkD,EAElDA,SAAUC,EAFwC,EAExCA,QAGlB,OACE,kBAACrM,GAAA,EAAD,CACEC,UAAU,YACVwM,UAAWJ,EACXxV,QAASuV,GAAS,SAAAjP,GAAI,OAAIA,EAAKk0C,cAAcj/C,KAC7CkF,YAAaqK,EAAA,EAAK,EAAD,qBACjB1K,kBAAmB4+C,GACnBt8C,gBAAiBs8C,QAKvB,SAASA,GAAT,GAAsD,IAAzB10C,EAAwB,EAAxBA,KAAM20C,EAAkB,EAAlBA,KACjC,OAAO30C,GAAQ20C,ECjBV,IAAMC,GAAiBv9C,IAAMC,MAAiB,WACnD,IAAMG,EAAWY,eADwC,EAE3Bw8C,aAAmB,CAC/Cp9C,aADMwT,EAFiD,EAEjDA,SAAUC,EAFuC,EAEvCA,QAGlB,OACE,kBAACrM,GAAA,EAAD,CACEC,UAAU,WACVwM,UAAWJ,EACXxV,QAASuV,GAAS,SAAAjP,GAAI,OAAIA,EAAK0zC,aAAaz+C,KAC5CkF,YAAaqK,EAAA,EAAK,EAAD,qBACjB1K,kBAAmBi+B,IACnB37B,gBAAiB27B,S,WChBV+gB,GAAgBz9C,IAAMC,MAAiB,WAAO,IAAD,EAC1By9C,eAAtB9pC,EADgD,EAChDA,SAAUC,EADsC,EACtCA,QAElB,OACE,kBAACrM,GAAA,EAAD,CACEC,UAAU,UACV3I,YAAaqK,EAAA,EAAK,EAAD,2BACjB6K,iBAAkB,kBAAM7K,EAAA,EAAK,EAAD,eAC5B9K,QAASuV,GAAS,SAAAjP,GAAI,OAAIA,EAAK4zC,YAAY3+C,KAC3Cqa,UAAWJ,EACXrV,eAAgBgD,IAAG6H,KAAK,QACxBtI,gBAAiBS,IAAG6H,KAAK,QACzB9I,eAAgBiB,IAAG6H,KAAK,a,WCZxBs0C,GAA4C,SAAC,GAAyB,IAAvBC,EAAsB,EAAtBA,MAAO/iD,EAAe,EAAfA,SAC1D,OACE,oCACE,kBAACo8C,GAAA,EAAD,CAAWn6C,OAAO,gBAChB,kBAACkF,EAAA,EAAD,CAAUE,OAAO,GAAOrH,IAE1B,kBAAC,GAAD,CAAiByK,KAAMs4C,EAAOrU,YAAY,MAKnCsU,GAAmC,WAC9C,IAAM5wC,EAAS4qC,KADqC,EAE1BiG,aACxB,CAAE7wC,OAAQA,GACV,CAAEswB,MAAOtwB,IAFHtI,EAF4C,EAE5CA,KAAMkP,EAFsC,EAEtCA,QAKd,IAAK5G,EACH,OAAO,KAGT,GAAI4G,EACF,OAAO,kBAAC,GAAD,CAAiBvO,KAAM6D,EAAA,EAAK,EAAD,eAGpC,IAAM40C,EAAQp5C,GAAQA,EAAKo5C,MAC3B,OAAKA,EAKH,oCACE,kBAAC,GAAD,CAAcH,MAAOG,EAAMC,OACzB,kBAAC,QAAD,0BAGF,kBAAC,GAAD,CAAcJ,MAAOG,EAAME,KACzB,kBAAC,QAAD,sBAGF,kBAAC,GAAD,CAAcL,MAAOG,EAAMG,UACzB,kBAAC,QAAD,qBAGF,kBAAC,GAAD,CAAcN,MAAOG,EAAMI,UACzB,kBAAC,QAAD,iBAGF,kBAAC,GAAD,CAAcP,MAAOG,EAAM/hB,SACzB,kBAAC,QAAD,oBAtBG,MCjCEoiB,GAA0D,SAAC,GAEjE,IADLvjD,EACI,EADJA,SACI,EACsBi9C,GACxB,UACA,UACA,SACA,SACA,YALM7qC,EADJ,EACIA,OAAQ+rC,EADZ,EACYA,MAOhB,OACE,kBAAC,IAAD,CAAaA,MAAOA,GAClB,kBAACpB,GAAD,CAAqBl+C,MAAOuT,GAASpS,KCC9BwjD,GAAgC,kBAC3C,kBAAC/I,EAAA,EAAD,CACEC,UAAWpsC,EAAA,EAAK,EAAD,oBACfqsC,eAAe,EACf6B,WAAY,kBAAC,GAAD,OAEZ,kBAAC,GAAD,KACE,kBAAC1kB,EAAA,EAAD,KACE,kBAACrwB,EAAA,EAAD,CAAeE,QAAQ,aAAaD,SAAS,QAC3C,kBAACE,EAAA,EAAD,CAAYE,eAAgB,GAC1B,kBAAC5C,GAAA,EAAD,MACA,kBAACo9C,GAAD,MACA,kBAACI,GAAD,OAEF,kBAAC96C,EAAA,EAAD,CAAYE,eAAgB,GAC1B,kBAAC8Q,GAAA,EAAD,MACA,kBAACW,GAAA,EAAD,MACA,kBAACqpC,GAAD,QAGJ,kBAAC,GAAD,OAEF,kBAAC,GAAD,SCxCN,iDAsBO,IAAMa,GAAoC,kBAC/C,oCACE,kBAACC,EAAA,EAAD,CAAWttC,MAAO9H,EAAA,EAAK,EAAD,cACtB,kBAAC,IAAD,KACE,kBAACq1C,EAAA,EAAD,CACE9hC,OAAK,EACLW,KAAM+5B,IACNhW,UAAWoR,IAEb,kBAACgM,EAAA,EAAD,CACEnhC,KAAMq5B,IACNtV,UAAWiU,KAEb,kBAACmJ,EAAA,EAAD,CACEnhC,KAAI,UAAKu1B,IAAL,eACJxR,UAAW8V,KAEb,kBAACsH,EAAA,EAAD,CACEnhC,KAAMs1B,IACNvR,UAAWid,KAEb,kBAACG,EAAA,EAAD,CACEnhC,KAAMq1B,IACNtR,UAAW2b,KAEb,kBAAC,IAAD,CAAO3b,UAAWqd,SAKTH","file":"static/js/372.0faa5904.chunk.js","sourcesContent":["import { yup } from '@speedlo/xform'\nimport { IFormState } from 'react-form'\n\nimport { i18n } from '../i18n'\nimport { parseNumber } from './numeral'\n\nexport function isFormValid(formState: IFormState) {\n  return !formState.errors || Object.keys(formState.errors).length === 0\n}\n\nexport function fieldIsRequiredMsg(fieldDescription: string) {\n  return i18n.t`Field ${fieldDescription} cannot be empty`\n}\n\nexport function fieldIsNumberMsg(fieldDescription: string) {\n  return i18n.t`Field ${fieldDescription} must be a number`\n}\n\nexport function fieldIsPositiveNumberMsg(fieldDescription: string) {\n  return i18n.t`Field ${fieldDescription} must be a positive number`\n}\n\nexport const validateAsNumberField = (fieldDescription: string) =>\n  yup\n    .number()\n    .default(0)\n    .transform((_, origValue) => parseNumber(origValue))\n    .test(\n      'number-field',\n      fieldIsNumberMsg(fieldDescription),\n      value => !isNaN(value),\n    )\n\nexport const ARRAY_EMPTY: RoA<any> = []\n","import { Error, SvgIconComponent } from '@material-ui/icons'\nimport { cn } from '@speedlo/ui'\nimport React from 'react'\nimport styled from 'styled-components'\n\nimport { mediaMobile } from '../app/Responsive'\nimport { logError } from '../helpers/logger'\nimport { Colors, Spacing } from '../styling'\nimport { useFormGridCheck } from './FormGrid'\nimport { Icon } from './Icon'\n\ninterface IProps {\n  icon?: SvgIconComponent\n  label?: string | ReactNode\n  labelWidth?: number\n  labelWidthUnits?: string\n  labelMargin?: string\n  labelSmallCaps?: boolean\n  className?: string\n}\n\nconst StyledIconLine = styled.div<IProps>`\n  display: flex;\n\n  div.description {\n    margin: ${({ labelMargin }) => labelMargin};\n    min-width: ${({ labelWidth, labelWidthUnits }) =>\n      `${labelWidth}${labelWidthUnits}`};\n    flex: 0 0 auto;\n    text-align: right;\n  }\n\n  div.contents {\n    margin-left: 0.5rem;\n    align-self: stretch;\n    flex: 1 1 auto;\n  }\n\n  div.label {\n    padding-top: 0.2rem;\n    display: inline-block;\n    &.smallCaps {\n      font-variant-caps: all-petite-caps;\n    }\n  }\n`\n\nconst StyledGridDescription = styled.div<IProps>`\n  grid-column: desc;\n  margin: ${({ labelMargin }) => labelMargin};\n\n  div.label {\n    padding-top: 0.2rem;\n    display: inline-block;\n    &.smallCaps {\n      font-variant-caps: all-petite-caps;\n    }\n  }\n\n  ${mediaMobile`\n  grid-column: content;\n  justify-self: start;\n  margin: ${({ labelMargin }) => labelMargin.replace('auto', '0.7rem')};\n  `};\n`\n\nconst StyledGridContent = styled.div<IProps>`\n  grid-column: content;\n  margin-left: 0.5rem;\n`\n\nexport const IconLine: React.FC<IProps> = ({\n  icon,\n  label,\n  labelWidth = 0,\n  labelWidthUnits = Spacing.DefaultSizeUnit,\n  labelMargin = '0.5rem 0.2rem 0 auto',\n  labelSmallCaps = true,\n  children,\n}) => {\n  let iconComponent = icon\n  if (typeof icon === 'string') {\n    logError(\n      `IconLine: Do not use icon prop as string! Replace \"${icon}\" with the one imported from @material-ui/icons.`,\n    )\n    iconComponent = Error\n  }\n  const isInFormGrid = useFormGridCheck()\n\n  const descriptionPart = (\n    <>\n      <Icon icon={iconComponent} color={Colors.greyDark} />\n      {label ? (\n        <div className={cn('label', { smallCaps: labelSmallCaps })}>\n          {label}\n        </div>\n      ) : null}\n    </>\n  )\n\n  return isInFormGrid ? (\n    <>\n      <StyledGridDescription labelMargin={labelMargin}>\n        {descriptionPart}\n      </StyledGridDescription>\n      <StyledGridContent>{children}</StyledGridContent>\n    </>\n  ) : (\n    <StyledIconLine\n      labelWidth={labelWidth}\n      labelWidthUnits={labelWidthUnits}\n      labelMargin={labelMargin}\n    >\n      <div className=\"description\">{descriptionPart}</div>\n      <div className=\"contents\">{children}</div>\n    </StyledIconLine>\n  )\n}\n","import { useRoot } from '../atoms/RootProvider'\n\nexport function useAccessGuard(\n  queries: string[],\n  mutations: string[],\n): boolean {\n  const { user } = useRoot()\n  return queries.every(user.canQuery) && mutations.every(user.canMutate)\n}\n\nexport function useCanQuery(...queries: string[]) {\n  return useAccessGuard(queries, [])\n}\n\nexport function useCanMutate(...mutations: string[]) {\n  return useAccessGuard([], mutations)\n}\n","import { Trans } from '@lingui/macro'\nimport React from 'react'\nimport Select from 'react-select'\nimport { Props } from 'react-select/src/Select'\nimport { StylesConfig } from 'react-select/src/styles'\n\nimport { Colors, Spacing } from '../styling'\nimport { Printer } from './Printer'\n\nexport type TSelectControlProps<OptionType> = NoChildren &\n  Props<OptionType> & {\n    width?: number\n    minWidth?: number\n    maxHeight?: number\n    invalid?: boolean\n    hideOnSingleOption?: boolean\n  }\n\ntype TStyledProps = TSelectControlProps<unknown> & {\n  printing: boolean\n}\n\nfunction getControlStyles({ width, minWidth, invalid }: TStyledProps) {\n  const colors =\n    invalid === true\n      ? {\n          border: `1px solid ${Colors.red}`,\n          backgroundColor: Colors.errorBackground,\n        }\n      : {\n          border: `1px solid ${Colors.greyMiddle}`,\n        }\n  return {\n    ...colors,\n    margin: Spacing.MarginAroundFormComponents,\n    width: width !== undefined ? `${width}rem` : '100%',\n    minWidth: minWidth !== undefined ? `${minWidth}rem` : '8rem',\n  }\n}\n\nexport const composeSelectControlStyles = (outerStyles: StylesConfig = {}) => ({\n  ...outerStyles,\n  control: (base, state) => {\n    const controlStyles = { ...base, ...getControlStyles(state.selectProps) }\n    return outerStyles.control\n      ? outerStyles.control(controlStyles, state)\n      : controlStyles\n  },\n  menu: (base, state) => {\n    const {\n      selectProps: { width },\n    } = state\n    const menuStyles = {\n      ...base,\n      zIndex: 20,\n      color: Colors.black,\n      width: width !== undefined ? `${width}rem` : '100%',\n    }\n    return outerStyles.menu ? outerStyles.menu(menuStyles, state) : menuStyles\n  },\n  valueContainer: (base, state) => {\n    const {\n      selectProps: { maxHeight },\n    } = state\n    const valueContainerStyles = {\n      ...base,\n      maxHeight: maxHeight !== undefined ? `${maxHeight}rem` : '100%',\n      overflowY: maxHeight !== undefined ? 'scroll' : 'hidden',\n    }\n    return outerStyles.valueContainer\n      ? outerStyles.valueContainer(valueContainerStyles, state)\n      : valueContainerStyles\n  },\n  clearIndicator: base => ({\n    ...base,\n    cursor: 'pointer',\n  }),\n})\n\nexport function SelectControl<OptionType>({\n  hideOnSingleOption = false,\n  ...props\n}: TSelectControlProps<OptionType>) {\n  const getPrintContent = () => {\n    if (!props.value) {\n      return null\n    }\n    const formatWith: any = props.getOptionLabel || props.formatOptionLabel\n    if (!formatWith) {\n      return null\n    }\n    const valueText = Array.isArray(props.value)\n      ? props.value.map(formatWith)\n      : formatWith(props.value as OptionType)\n    return valueText.length === 0 ? null : (\n      <div>{`${props.placeholder}: ${valueText}`}</div>\n    )\n  }\n\n  if (hideOnSingleOption && props.options && props.options.length <= 1) {\n    return null\n  }\n\n  return (\n    <Printer toPrint={getPrintContent()}>\n      <Select<OptionType>\n        {...props}\n        components={{\n          ClearIndicator,\n          ...props.components,\n        }}\n        styles={composeSelectControlStyles(props.styles)}\n      />\n    </Printer>\n  )\n}\n\nfunction ClearIndicator(props) {\n  const {\n    getStyles,\n    innerProps: { ref, ...restInnerProps },\n  } = props\n  return (\n    <div\n      {...restInnerProps}\n      ref={ref}\n      style={getStyles('clearIndicator', props)}\n    >\n      <div style={{ padding: '0px 5px' }}>\n        <Trans>All</Trans>\n      </div>\n    </div>\n  )\n}\n","import { observer } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { useCanMutate } from '../hooks/useAccessGuard'\nimport { NoAccess } from './NoAccess'\n\ninterface IProps {\n  mutationName: string\n}\n\nexport const CanMutate = observer<IProps>(({ mutationName, children }) => {\n  const canMutate = useCanMutate(mutationName)\n  return canMutate ? (\n    <>{children}</>\n  ) : (\n    <NoAccess>{`No access to mutation ${mutationName}`}</NoAccess>\n  )\n})\n","import { Tooltip } from '@material-ui/core'\nimport { PanTool } from '@material-ui/icons'\nimport React from 'react'\n\ninterface IProps {\n  children: string\n}\n\nexport const NoAccess: React.FC<IProps> = ({ children }) =>\n  process.env.REACT_APP_STAGE !== 'prod' ? (\n    <Tooltip title={children}>\n      <PanTool />\n    </Tooltip>\n  ) : null\n","import { createStatePersistence } from '@speedlo/hooks'\nimport React from 'react'\n\nimport { SelectControl } from '../../atoms/SelectControl'\nimport { FCompanyBranchFragment } from '../../graph/generated'\nimport { formatBranchName } from '../../helpers/formats'\nimport { useDropdownFilter } from '../../hooks/useDropdownFilter'\nimport { useDropdownMulti } from '../../hooks/useDropdownMulti'\nimport { useUserModel } from '../../hooks/useUserModel'\nimport { i18n } from '../../i18n'\nimport { idProp, RM } from '../../tools/ramda'\n\nexport const useBranchesFilterEditable = createStatePersistence<RoA<ID>>(\n  'branches',\n  [],\n)\n\nexport const BranchesFilter = React.memo<NoChildren>(() => {\n  const userModel = useUserModel()\n  const [branches, setBranches] = useBranchesFilterEditable()\n\n  const selectProps = {\n    options: userModel.branches,\n    placeholder: i18n.t`Filter branches...`,\n    formatOptionLabel: formatBranchName,\n    getOptionValue: idProp,\n    hideOnSingleOption: true,\n  }\n\n  const dropdownProps = useDropdownMulti<FCompanyBranchFragment>({\n    ...selectProps,\n    onSelectionChange: setBranches,\n    selected: branches,\n  })\n\n  const filterProps = useDropdownFilter<FCompanyBranchFragment>({\n    getOptionFilter: formatBranchName,\n  })\n\n  return (\n    <SelectControl<FCompanyBranchFragment>\n      {...dropdownProps}\n      {...filterProps}\n      {...selectProps}\n    />\n  )\n})\n\n/**\n * Access to currently persisted list of branches for filtering purposes.\n *\n * By default it will use all user branches if none are currently set.\n * This behavior can be disabled with argument.\n *\n * @param withUserBranchesWhenEmpty\n */\nexport function useBranchesFilter(withUserBranchesWhenEmpty = true): ID[] {\n  const userModel = useUserModel()\n  const [persistedBranches, setPersistedBranches] = useBranchesFilterEditable()\n  const persistenceKey = persistedBranches.join('|')\n\n  let selectedBranches = React.useMemo(() => {\n    return RM.intersection(userModel.branchesId, persistedBranches)\n    // persistedBranches reference changes every time -> use persistenceKey to decide whether the persistence truly changed\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [persistenceKey, userModel.branchesId])\n\n  const hasPersistedBranches = persistedBranches.length > 0\n  const hasAccessToAllPersistedBranches =\n    persistedBranches.length === selectedBranches.length\n\n  React.useEffect(() => {\n    if (hasPersistedBranches && !hasAccessToAllPersistedBranches) {\n      setPersistedBranches(selectedBranches)\n    }\n  }, [\n    hasAccessToAllPersistedBranches,\n    hasPersistedBranches,\n    selectedBranches,\n    setPersistedBranches,\n  ])\n\n  const noBranchSelected = selectedBranches.length === 0\n  const userHasOnlyOneBranch = userModel.branchesId.length === 1\n\n  if (userHasOnlyOneBranch || (noBranchSelected && withUserBranchesWhenEmpty)) {\n    selectedBranches = userModel.branchesId\n  }\n\n  const key = selectedBranches.join('|')\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  return React.useMemo(() => selectedBranches, [key])\n}\n","import styled from 'styled-components'\n\nimport { Colors } from '../styling'\n\ninterface IHeadlineProps {\n  margin?: string\n  size?: 'smaller'\n  light?: boolean\n}\n\nconst getMargin = ({ margin = '0 0.5rem 0 0.5rem' }: IHeadlineProps) => margin\n\nconst getFontSize = ({ size }: IHeadlineProps) => size === 'smaller' && '1rem'\n\nconst getColor = ({ light = false }: IHeadlineProps) =>\n  light ? Colors.greyLight : Colors.greyDarkest\n\nexport const Headline = styled.h2`\n  color: ${getColor};\n  font-weight: lighter;\n  margin: ${getMargin};\n  font-size: ${getFontSize};\n  @media print {\n    color: ${Colors.black};\n  }\n`\n","import styled from 'styled-components'\n\ninterface IProps {\n  flexWrap?: string\n  justify?: string\n}\n\nexport const FlexRowSingle = styled.div<IProps>`\n  display: flex;\n  flex-direction: row;\n  flex-wrap: ${({ flexWrap = 'unset' }: IProps) => flexWrap};\n  justify-content: ${({ justify = 'space-between' }: IProps) => justify};\n`\n","import styled from 'styled-components'\n\ninterface IFlexColumnProps {\n  fixedWidth?: boolean\n  width?: string\n  widthGrowIndex?: number\n  padding?: string\n  margin?: string\n}\n\nexport const FlexColumn = styled.div`\n  flex: ${getFlexValue};\n  padding: ${getPadding};\n  margin: ${getMargin};\n`\n\nfunction getFlexValue({\n  fixedWidth = false,\n  width,\n  widthGrowIndex = 0,\n}: IFlexColumnProps) {\n  return fixedWidth ? (width ? `0 0 ${width}` : '0 0') : `${widthGrowIndex} 0`\n}\n\nfunction getPadding({ padding = '0.25rem' }: IFlexColumnProps) {\n  return padding\n}\n\nfunction getMargin({ margin = '' }: IFlexColumnProps) {\n  return margin\n}\n","import styled from 'styled-components'\n\nexport const ScrollArea = styled.div`\n  overflow-y: auto;\n  -webkit-overflow-scrolling: touch;\n  height: 100%;\n`\n","import React from 'react'\nimport styled from 'styled-components/macro'\n\nimport { mediaDesktop, mediaMobile, useResponsive } from '../app/Responsive'\nimport { ScrollArea } from '../atoms/ScrollArea'\nimport { Sizer } from '../atoms/Sizer'\nimport { Spacing } from '../styling'\n\ninterface IPageLayoutFullHeightItemProps {\n  row?: number\n  column?: number\n  rowInMobile?: number\n  widthInColumns?: number\n  withScrollArea?: boolean\n  forcePercentHeightInMobile?: number\n  scrollAreaId?: string\n}\n\nconst gridColumnWidth: string = '6.22vw'\nconst gridColumnHeigth: string = '3.9375rem'\n\nconst leftPos = () => (props: IPageLayoutFullHeightItemProps) => {\n  if (props.column !== undefined) {\n    return (\n      'calc((' +\n      props.column +\n      ' * ' +\n      gridColumnWidth +\n      ') + ' +\n      Spacing.LayoutGridCellMargin +\n      ')'\n    )\n  } else {\n    return Spacing.LayoutGridCellMargin\n  }\n}\nconst widthComputed = () => (props: IPageLayoutFullHeightItemProps) => {\n  if (props.widthInColumns !== undefined) {\n    return (\n      'calc((' +\n      props.widthInColumns +\n      ' * ' +\n      gridColumnWidth +\n      ') - ' +\n      Spacing.LayoutGridCellMargin +\n      ')'\n    )\n  } else {\n    return 'calc(100vh - (2 * ' + Spacing.LayoutGridCellMargin + '))'\n  }\n}\nconst topPos = () => (props: IPageLayoutFullHeightItemProps) => {\n  if (props.row !== undefined) {\n    return (\n      'calc((' +\n      props.row +\n      ' * ' +\n      gridColumnHeigth +\n      ') + ' +\n      Spacing.LayoutGridCellMargin +\n      ')'\n    )\n  } else {\n    return (\n      'calc(' + gridColumnHeigth + ' + ' + Spacing.LayoutGridCellMargin + ')'\n    )\n  }\n}\n\n// eslint-disable-next-line no-unexpected-multiline\nconst StyledPageLayoutFullHeightItem = styled.div<\n  IPageLayoutFullHeightItemProps\n>`\n  ${mediaDesktop`\n  position: fixed;\n  bottom: 0.5rem;\n  width: ${widthComputed()};\n  left: ${leftPos()};\n  top: ${topPos()};`}\n\n  ${mediaMobile`\n    margin: 0;\n    grid-row: ${({ rowInMobile }: IPageLayoutFullHeightItemProps) =>\n      rowInMobile} ;\n    grid-column: span 16;\n    height: ${({\n      forcePercentHeightInMobile,\n    }: IPageLayoutFullHeightItemProps) =>\n      forcePercentHeightInMobile\n        ? `calc(${forcePercentHeightInMobile}vh - ${Spacing.PageHeaderHeight +\n            0.25 +\n            Spacing.DefaultSizeUnit})`\n        : 'unset'} ;\n    position: relative;\n  `}\n`\n\nexport const PageLayoutFullHeightItem: React.FC<\n  IPageLayoutFullHeightItemProps\n> = ({\n  children,\n  row = 1,\n  rowInMobile = 16,\n  column = 0,\n  widthInColumns = 16,\n  withScrollArea = false,\n  scrollAreaId,\n  forcePercentHeightInMobile: forceHeightInMobile,\n}) => {\n  const { isMobile } = useResponsive()\n\n  return (\n    <StyledPageLayoutFullHeightItem\n      column={column}\n      row={row}\n      rowInMobile={rowInMobile}\n      widthInColumns={widthInColumns}\n      withScrollArea={withScrollArea}\n      forcePercentHeightInMobile={forceHeightInMobile}\n    >\n      {withScrollArea && !isMobile ? (\n        <ScrollArea id={scrollAreaId}>{children}</ScrollArea>\n      ) : (\n        <Sizer height={100} heightUnit=\"%\">\n          {children}\n        </Sizer>\n      )}\n    </StyledPageLayoutFullHeightItem>\n  )\n}\n","import { useRoot } from '../atoms/RootProvider'\n\nexport function useUserModel() {\n  const { user } = useRoot()\n  return user\n}\n","import React from 'react'\nimport styled from 'styled-components'\n\nimport { Colors } from '../styling'\n\ninterface IProps {\n  visible?: boolean\n}\n\nconst HorizontalSeparatorStyled = styled.div`\n  border-top: 1px solid ${Colors.greyLight};\n  margin: 0.25rem 0rem;\n`\n\nexport const HorizontalSeparator: React.FC<IProps> = ({ visible = true }) =>\n  visible ? <HorizontalSeparatorStyled /> : null\n","import { useOrderModel } from './useOrderModel'\n\nexport function useOrderListModel() {\n  const { list } = useOrderModel()\n  return list\n}\n","import React from 'react'\n\ntype TOptions<TSelectOption> = {\n  getOptionFilter?(option: TSelectOption): string\n}\n\nexport function useDropdownFilter<TSelectOption>({\n  getOptionFilter,\n}: TOptions<TSelectOption>) {\n  const isSearchable = typeof getOptionFilter === 'function'\n\n  const filterOption = React.useCallback(\n    (option, rawInput) => {\n      if (!getOptionFilter || rawInput.length === 0) {\n        return true\n      }\n      return getOptionFilter(option.data)\n        .toLocaleLowerCase()\n        .includes(rawInput.toLocaleLowerCase())\n    },\n    [getOptionFilter],\n  )\n\n  return { filterOption, isSearchable }\n}\n","import React from 'react'\nimport styled from 'styled-components/macro'\n\nimport { mediaMobile } from '../app/Responsive'\n\nconst StyledFormGrid = styled.div`\n  display: grid;\n  grid-template-columns: 0.1fr [desc] auto [content] 1fr;\n  grid-template-areas: '. desc content';\n  grid-auto-flow: row dense;\n\n  ${mediaMobile`\n    grid-template-columns: 1fr;\n    grid-template-areas:\n      'content';\n  `};\n`\n\ninterface IProps {}\nlet formGridCounter = 0\nconst formGridContext = React.createContext(formGridCounter)\n\nexport const FormGrid: React.FC<IProps> = props => {\n  return (\n    <StyledFormGrid>\n      <formGridContext.Provider value={++formGridCounter}>\n        {props.children}\n      </formGridContext.Provider>\n    </StyledFormGrid>\n  )\n}\n\nexport function useFormGridCheck() {\n  return React.useContext(formGridContext) > 0\n}\n","import React from 'react'\n\ninterface ILoadingProps {\n  text?: string\n}\n\nexport const Loading: React.FC<ILoadingProps> = ({ text = '...' }) => (\n  <h1>{text}</h1>\n)\n","import React from 'react'\nimport styled from 'styled-components/macro'\n\ntype TProps = SomeChildren & {\n  toPrint: ReactNodes\n}\n\nconst StyledPrinter = styled.div`\n  & .toPrint {\n    display: none;\n  }\n  @media print {\n    & .toPrint {\n      display: inline-block;\n    }\n    & .noPrint {\n      display: none;\n    }\n  }\n`\n\nexport const Printer: React.FC<TProps> = props => {\n  return (\n    <StyledPrinter>\n      <div className=\"toPrint\">{props.toPrint}</div>\n      <div className=\"noPrint\">{props.children}</div>\n    </StyledPrinter>\n  )\n}\n","var map = {\n\t\"./cs.svg\": 1400,\n\t\"./de.svg\": 1401,\n\t\"./en.svg\": 1402,\n\t\"./pl.svg\": 1403,\n\t\"./sk.svg\": 1404\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 1399;","var map = {\n\t\"./logo-doveze.svg\": 1406,\n\t\"./logo-gopay.svg\": 1407,\n\t\"./logo-mastercard.svg\": 1408,\n\t\"./logo-visa.svg\": 1409\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 1405;","import { History } from 'history'\nimport React from 'react'\n\nimport { PageLayoutItem } from '../../../molecules/PageLayoutItem'\nimport { ITouchButtonProps, TouchButton } from '../../../molecules/TouchButton'\n\ninterface IProps extends ITouchButtonProps {\n  row: number\n  column: number\n  route?: History.LocationDescriptor<any>\n  canQuery?: string | string[]\n  canMutate?: string | string[]\n  canAccessWithSingleBranch?: boolean\n}\n\nexport type IDashboardButtonProps = IProps\n\nexport const DashboardButton: React.FC<IProps> = ({\n  row,\n  column,\n  route,\n  canQuery,\n  canMutate,\n  canAccessWithSingleBranch,\n  ...buttonProps\n}) => {\n  return (\n    <PageLayoutItem\n      gridColumnSpan={2}\n      gridColumn={(column - 1) * 2 + 1}\n      gridRow={row}\n      route={route}\n      canQuery={canQuery}\n      canMutate={canMutate}\n      canAccessWithSingleBranch={canAccessWithSingleBranch}\n    >\n      <TouchButton {...buttonProps} />\n    </PageLayoutItem>\n  )\n}\n","import { History } from 'history'\nimport React from 'react'\nimport { Link } from 'react-router-dom'\n\nimport { NoAccess } from '../atoms/NoAccess'\nimport {\n  IPageLayoutGridItemProps,\n  PageLayoutGridItem,\n} from '../atoms/PageLayoutGridItem'\nimport { Sizer } from '../atoms/Sizer'\nimport { useAccessGuard } from '../hooks/useAccessGuard'\nimport { useUserModel } from '../hooks/useUserModel'\nimport { Spacing } from '../styling'\n\ninterface IPageLayoutItemProps extends IPageLayoutGridItemProps {\n  children: ReactNode\n  route?: History.LocationDescriptor<any>\n  canQuery?: string | string[]\n  canMutate?: string | string[]\n  canAccessWithSingleBranch?: boolean\n}\n\nconst EMPTY_ARRAY = []\n\nexport const PageLayoutItem: React.FC<IPageLayoutItemProps> = ({\n  route,\n  children,\n  canQuery = EMPTY_ARRAY,\n  canMutate = EMPTY_ARRAY,\n  canAccessWithSingleBranch = true,\n  ...gridItemProps\n}) => {\n  const userModel = useUserModel()\n\n  const queries = normalizeAccess(canQuery)\n  const mutations = normalizeAccess(canMutate)\n  const hasAccess = useAccessGuard(queries, mutations)\n\n  if (!hasAccess) {\n    return (\n      <NoAccess>{`No access to ${\n        queries.length ? `queries ${queries.join(',')} ` : ''\n      }${\n        mutations.length ? `mutations ${mutations.join(',')}` : ''\n      }`}</NoAccess>\n    )\n  }\n\n  if (!canAccessWithSingleBranch && userModel.hasSingleBranch) {\n    return <NoAccess>No access to single branch account</NoAccess>\n  }\n\n  const layoutItem = route ? (\n    <Link to={route}>{children}</Link>\n  ) : (\n    <>{children}</>\n  )\n\n  return (\n    <PageLayoutGridItem {...gridItemProps}>\n      <Sizer height={Spacing.DashboardButtonHeight}>{layoutItem}</Sizer>\n    </PageLayoutGridItem>\n  )\n}\n\nfunction normalizeAccess(access: string | string[]) {\n  return Array.isArray(access) ? access : [access]\n}\n","import { observer } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { useCanQuery } from '../hooks/useAccessGuard'\nimport { NoAccess } from './NoAccess'\n\ninterface IProps {\n  queryName: string\n}\n\nexport const CanQuery = observer<IProps>(({ queryName, children }) => {\n  const canQuery = useCanQuery(queryName)\n  return canQuery ? (\n    <>{children}</>\n  ) : (\n    <NoAccess>{`No access to query ${queryName}`}</NoAccess>\n  )\n})\n","import React from 'react'\n\ntype TOptions<TSelectOption> = {\n  options: RoA<TSelectOption> | null\n  selected: MaybeID\n  onSelectionChange: (selected: MaybeID) => void\n  getOptionValue(option: TSelectOption): string\n}\n\nexport function useDropdownSingle<TSelectOption>({\n  options,\n  selected,\n  onSelectionChange,\n  getOptionValue,\n}: TOptions<TSelectOption>) {\n  const value = React.useMemo(() => {\n    if (selected === null) {\n      return null\n    }\n    return options === null\n      ? null\n      : options.find(option => getOptionValue(option) === selected) || null\n  }, [selected, options, getOptionValue])\n\n  const onChange = (option: unknown) => {\n    onSelectionChange(option ? getOptionValue(option as TSelectOption) : null)\n  }\n\n  return { value, onChange, getOptionValue }\n}\n","import { useXField, useXFormState, XFieldName } from '@speedlo/xform'\nimport { useObserver } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { SelectControl, TSelectControlProps } from '../../atoms/SelectControl'\nimport { useDropdownFilter } from '../../hooks/useDropdownFilter'\nimport { useDropdownMulti } from '../../hooks/useDropdownMulti'\nimport { idProp } from '../../tools/ramda'\n\ntype TFormDropdownMultiProps<OptionType> = Omit<\n  TSelectControlProps<OptionType>,\n  'value' | 'onChange' | 'isMulti'\n> & {\n  fieldName: XFieldName\n  options: RoA<OptionType>\n  getOptionFilter?(option: OptionType): string\n}\n\nexport const FormDropdownMulti = <TOption extends any>({\n  fieldName,\n  getOptionValue = idProp as any,\n  getOptionFilter,\n  ...selectProps\n}: TFormDropdownMultiProps<TOption>) => {\n  const formState = useXFormState()\n  const field = useXField<RoA<ID>>(fieldName)\n\n  return useObserver(function useBody() {\n    const filterProps = useDropdownFilter({ getOptionFilter })\n    const dropdownProps = useDropdownMulti({\n      ...selectProps,\n      onSelectionChange: field.setValue,\n      selected: field.value,\n      getOptionValue,\n    })\n\n    return (\n      <SelectControl<TOption>\n        {...dropdownProps}\n        {...filterProps}\n        {...selectProps}\n        onFocus={() => field.setTouched()}\n        invalid={field.touched && field.hasError}\n        isDisabled={formState.isSubmitting}\n        getOptionValue={getOptionValue}\n      />\n    )\n  })\n}\n","import styled from 'styled-components'\n\ntype TCursor = 'pointer' | 'arrow' | 'default'\n\nexport const CursorContainer = styled.div`\n  cursor: ${({ cursor = 'default' }: { cursor?: TCursor }) => cursor};\n`\n","import React from 'react'\n\nimport { CursorContainer } from '../atoms/CursorContainer'\nimport { FCompanyBranchFragment } from '../graph/generated'\n\ninterface ICompanyBranchProps {\n  branch: FCompanyBranchFragment\n  onClick?: () => void\n  short?: boolean\n  showBrand?: boolean\n}\n\nexport const CompanyBranch: React.FC<ICompanyBranchProps> = ({\n  branch,\n  onClick,\n  short = false,\n  showBrand = true,\n}) => (\n  <CursorContainer cursor=\"pointer\" onClick={onClick}>\n    {short ? (\n      branch.name.substr(0, 8)\n    ) : (\n      <>\n        <span>{branch.name}</span>\n        {showBrand && <span>{` [${branch.brand.name}]`}</span>}\n      </>\n    )}\n  </CursorContainer>\n)\n","import React from 'react'\n\nimport { CompanyBranch } from '../atoms/CompanyBranch'\nimport { SelectControl, TSelectControlProps } from '../atoms/SelectControl'\nimport { FCompanyBranchFragment } from '../graph/generated'\nimport { ARRAY_EMPTY } from '../helpers/form'\nimport { i18n } from '../i18n'\nimport { ICompanyBranchPickerImpl } from '../organisms/CompanyBranchPicker'\nimport { Spacing } from '../styling'\nimport { RM } from '../tools/ramda'\n\ntype TProps = NoChildren &\n  ICompanyBranchPickerImpl &\n  TSelectControlProps<FCompanyBranchFragment>\n\nexport type TCompanyBranchDropdownProps = Pick<\n  TSelectControlProps<FCompanyBranchFragment>,\n  'placeholder' | 'width'\n>\n\nexport const CompanyBranchDropdown: React.FC<TProps> = ({\n  branches,\n  selectedBranch,\n  onSingleSelection,\n  selectedBranches,\n  onMultiSelection,\n  ...props\n}) => (\n  <SelectControl<FCompanyBranchFragment>\n    value={props.isMulti ? selectedBranches : selectedBranch}\n    placeholder={\n      props.isMulti ? i18n.t`Filter branches...` : i18n.t`Select a branch`\n    }\n    maxHeight={Spacing.ButtonHeight}\n    options={branches as FCompanyBranchFragment[]}\n    getOptionValue={RM.prop('id')}\n    formatOptionLabel={branch => <CompanyBranch branch={branch} />}\n    filterOption={(branch, rawInput) =>\n      branch.data.name\n        .toLocaleLowerCase()\n        .includes(rawInput.toLocaleLowerCase())\n    }\n    closeMenuOnSelect={!props.isMulti}\n    onChange={selection => {\n      if (props.isMulti && onMultiSelection) {\n        onMultiSelection(\n          Array.isArray(selection) ? selection : (ARRAY_EMPTY as any),\n        )\n      }\n      if (!props.isMulti && onSingleSelection) {\n        if (Array.isArray(selection)) {\n          onSingleSelection(RM.head(selection) || null)\n        } else {\n          onSingleSelection((selection as FCompanyBranchFragment) || null)\n        }\n      }\n    }}\n    {...props}\n  />\n)\n","import styled from 'styled-components/macro'\n\ninterface IProps {\n  position: 'TopRight' | 'BottomRight' | 'BottomLeft' | 'TopLeft'\n}\n\nexport const CardDock = styled.div<IProps>`\n  position: absolute;\n  ${({ position }) =>\n    position === 'BottomRight' || position === 'BottomLeft'\n      ? 'bottom: 0'\n      : 'top: 0'};\n  ${({ position }) =>\n    position === 'BottomLeft' || position === 'TopLeft'\n      ? 'left: 0'\n      : 'right: 0'};\n`\n","import React from 'react'\n\nexport function useQueryParams() {\n  const { search } = window.location\n  const searchParams = React.useMemo(() => new URLSearchParams(search), [\n    search,\n  ])\n\n  const getQueryParam = (param: string) => searchParams.get(param)\n  const createQueryString = (keyValueObj: Record<string, string>) => {\n    return Object.entries(keyValueObj)\n      .map(([key, value]) => `${key}=${value}`)\n      .join('&')\n  }\n\n  return { getQueryParam, createQueryString }\n}\n","import { ErrorOutline } from '@material-ui/icons'\nimport { cn } from '@speedlo/ui'\nimport { useXFormState } from '@speedlo/xform'\nimport { useObserver } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { ITouchButtonProps, TouchButton } from '../../molecules/TouchButton'\nimport { Colors } from '../../styling'\n\ninterface IProps extends ITouchButtonProps {\n  children: ReactNode | ReactNode[] | string\n}\n\nexport const FormSubmitButton: React.FC<IProps> = ({\n  children,\n  id = 'form-submit',\n  ...props\n}) => {\n  const state = useXFormState()\n  return useObserver(() => (\n    <TouchButton\n      id={id}\n      type=\"submit\"\n      color={Colors.green}\n      disabled={state.isSubmitting}\n      icon={!state.isValid ? ErrorOutline : undefined}\n      iconSize={1.1}\n      iconColor={Colors.red}\n      {...props}\n      className={cn(props.className, 'animated', 'infinite', {\n        heartBeat: state.isSubmitting,\n      })}\n    >\n      <>{children}</>\n    </TouchButton>\n  ))\n}\n","import React from 'react'\n\nimport {\n  IPageLayoutResponsiveProps,\n  PageLayoutResponsive,\n} from '../../../molecules/PageLayoutResponsive'\n\ninterface IProps extends IPageLayoutResponsiveProps {}\n\nexport const DashboardPage: React.FC<IProps> = ({ children, ...props }) => {\n  return (\n    <PageLayoutResponsive isForIconDashboard {...props}>\n      {children}\n    </PageLayoutResponsive>\n  )\n}\n","import DateFnsUtils from '@date-io/date-fns'\nimport { MuiPickersUtilsProvider } from '@material-ui/pickers'\nimport React from 'react'\n\nimport { DFLocale } from '../tools/datefns'\n\nexport const DateTimeFormatProvider: React.FC<Required<SomeChildren>> = ({\n  children,\n}) => {\n  return (\n    <MuiPickersUtilsProvider utils={DateFnsUtils} locale={DFLocale}>\n      {children}\n    </MuiPickersUtilsProvider>\n  )\n}\n","import { css, cx } from 'emotion'\nimport React from 'react'\nimport styled from 'styled-components/macro'\n\nimport { Colors } from '../styling'\n\nexport enum ETimeBadgeVariant {\n  UNKNOWN,\n  CRITICAL,\n  WARNING,\n  NORMAL,\n}\n\ninterface ITimeBadgeProps {\n  variant: ETimeBadgeVariant\n  minutes?: number\n  children?: React.ReactNode\n  className?: string\n  onClick?(): void\n}\n\nconst StyledTimeBadge = styled.div`\n  height: 2rem;\n  line-height: 2rem;\n  width: 2rem;\n  border-radius: 50%;\n  overflow: hidden;\n  border: 1px solid ${Colors.white};\n  color: ${Colors.white};\n  background: ${Colors.greyMiddle};\n  text-align: center;\n  font-family: 'Open Sans', sans-serif;\n`\n\nconst variants = {\n  [ETimeBadgeVariant.UNKNOWN]: styled(StyledTimeBadge)``,\n  [ETimeBadgeVariant.CRITICAL]: styled(StyledTimeBadge)`\n    background: ${Colors.red};\n  `,\n  [ETimeBadgeVariant.WARNING]: styled(StyledTimeBadge)`\n    background: ${Colors.orange};\n    color: ${Colors.black};\n    font-weight: bold;\n  `,\n  [ETimeBadgeVariant.NORMAL]: styled(StyledTimeBadge)`\n    background: ${Colors.green};\n  `,\n}\n\nconst bigNumberStyle = css`\n  font-size: 0.8rem;\n`\nconst dashStyle = css`\n  font-size: 1.7rem;\n  line-height: 1.6rem;\n  font-weight: bold;\n`\nconst clickable = css`\n  cursor: pointer;\n`\n\nexport const TimeBadge = React.forwardRef<HTMLDivElement, ITimeBadgeProps>(\n  ({ minutes, className, children, variant, onClick }, ref) => {\n    const Variant = variants[variant]\n    let output = children\n    const extraClassNames = ['animated']\n    if (minutes !== undefined) {\n      if (minutes > 99 || minutes < -9) {\n        extraClassNames.push(bigNumberStyle)\n      }\n      if (minutes < -99) {\n        output = ''\n        extraClassNames.push(dashStyle)\n      } else {\n        output = minutes.toString()\n      }\n    }\n    if (onClick) {\n      extraClassNames.push(clickable)\n    }\n    return (\n      <Variant\n        ref={ref}\n        key={minutes}\n        onClick={onClick}\n        className={cx(\n          className,\n          {\n            heartBeat: variant === ETimeBadgeVariant.CRITICAL && minutes! > 0,\n            pulse: variant === ETimeBadgeVariant.WARNING,\n          },\n          ...extraClassNames,\n        )}\n      >\n        {output}\n      </Variant>\n    )\n  },\n)\n","import styled from 'styled-components'\n\nexport const LinkStyled = styled.a`\n  color: inherit;\n  text-decoration-color: rgba(0, 0, 0, 0.08);\n  &:hover {\n    text-decoration-color: rgba(0, 0, 0, 0.5);\n  }\n  &:visited {\n    text-decoration-color: rgba(0, 0, 0, 0.08);\n  }\n`\n","import React from 'react'\n\nimport { ARRAY_EMPTY } from '../helpers/form'\n\ntype TOptions<TSelectOption> = {\n  options: RoA<TSelectOption> | null\n  selected: RoA<ID>\n  onSelectionChange: (selected: RoA<ID>) => void\n  getOptionValue(option: TSelectOption): string\n}\n\nexport function useDropdownMulti<TSelectOption>({\n  options,\n  selected,\n  onSelectionChange,\n  getOptionValue,\n}: TOptions<TSelectOption>) {\n  const value = React.useMemo(() => {\n    if (!Array.isArray(selected)) {\n      return null\n    }\n    return options === null\n      ? ARRAY_EMPTY\n      : options.filter(option => selected.includes(getOptionValue(option)))\n  }, [selected, options, getOptionValue])\n\n  const onChange = (option: unknown) => {\n    onSelectionChange(\n      option ? (option as TSelectOption[]).map(getOptionValue) : ARRAY_EMPTY,\n    )\n  }\n\n  return { value, onChange, isMulti: true }\n}\n","import { CancelOutlined } from '@material-ui/icons'\nimport { MINUTE, useTimer } from '@speedlo/hooks'\nimport { differenceInMinutes } from 'date-fns'\nimport { css } from 'emotion'\nimport React from 'react'\nimport styled from 'styled-components/macro'\n\nimport { ETimeBadgeVariant, TimeBadge } from '../../../atoms/TimeBadge'\nimport { Colors } from '../../../styling'\n\ninterface IDeliveryTimeBadgeProps {\n  deliverAt: Maybe<Date>\n  deliveredAt: Maybe<Date>\n  isCancelled?: boolean\n  isDelayed?: boolean\n  onClick?(): void\n}\n\nconst cancelIconPadding = css`\n  padding: 0.2rem 0.3rem 0.1rem 0.3rem;\n`\nconst StyledDelayedTimeMark = styled.div`\n  background: ${Colors.white};\n  border: 2px solid ${Colors.greyMiddle};\n  width: 0.6rem;\n  height: 0.6rem;\n  border-radius: 0.7rem;\n  position: absolute;\n`\n\nexport const DeliveryTimeBadge: React.FC<IDeliveryTimeBadgeProps> = ({\n  deliverAt,\n  deliveredAt,\n  isCancelled = false,\n  isDelayed = false,\n  onClick,\n}) => {\n  const timerEnabled = !(deliveredAt || isCancelled)\n  const now = useTimer({ interval: MINUTE, enabled: timerEnabled })\n\n  let variant = ETimeBadgeVariant.UNKNOWN\n\n  if (isCancelled) {\n    return (\n      <TimeBadge variant={variant} className={cancelIconPadding}>\n        <CancelOutlined />\n      </TimeBadge>\n    )\n  }\n\n  if (!deliverAt) {\n    return (\n      <TimeBadge variant={variant}>\n        <span role=\"img\" aria-label=\"Unknown\">\n          \n        </span>\n      </TimeBadge>\n    )\n  }\n\n  const minutes = differenceInMinutes(deliverAt, deliveredAt || now)\n\n  if (minutes > 20) {\n    variant = ETimeBadgeVariant.NORMAL\n  } else if (minutes > 0) {\n    variant = ETimeBadgeVariant.WARNING\n  } else {\n    variant = ETimeBadgeVariant.CRITICAL\n  }\n\n  return (\n    <>\n      {isDelayed && <StyledDelayedTimeMark />}\n      <TimeBadge minutes={minutes} variant={variant} onClick={onClick} />\n    </>\n  )\n}\n","import { SECOND } from '@speedlo/hooks'\nimport React from 'react'\n\nimport { useConfirmWithTimeout } from '../hooks/useConfirmWithTimeout'\nimport { Colors } from '../styling'\nimport { TouchButton } from './TouchButton'\n\ninterface IProps {\n  confirmNode: ReactNode | string\n  initialColor?: Colors\n  confirmColor?: Colors\n  confirmDisableMs?: number\n  resetToInitialMs?: number\n  disabled?: boolean\n  onConfirm(): void\n}\n\nexport const ConfirmButton: React.FC<IProps> = ({\n  confirmNode,\n  initialColor = Colors.greyMiddle,\n  confirmColor = Colors.red,\n  confirmDisableMs = 300,\n  resetToInitialMs = 3 * SECOND,\n  disabled,\n  children,\n  onConfirm,\n}) => {\n  const ref = React.useRef<HTMLButtonElement | null>(null)\n  const { confirming, onClick } = useConfirmWithTimeout({\n    confirmDisableMs,\n    resetToInitialMs,\n    onConfirm,\n    ref,\n  })\n\n  return (\n    <TouchButton\n      ref={ref}\n      onClick={onClick}\n      color={confirming ? confirmColor : initialColor}\n      disabled={disabled}\n    >\n      {confirming ? confirmNode : children}\n    </TouchButton>\n  )\n}\n","import { useXField, useXFormState, XFieldName } from '@speedlo/xform'\nimport { useObserver } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { SelectControl, TSelectControlProps } from '../../atoms/SelectControl'\nimport { useDropdownFilter } from '../../hooks/useDropdownFilter'\nimport { useDropdownSingle } from '../../hooks/useDropdownSingle'\nimport { idProp } from '../../tools/ramda'\n\ntype TFormDropdownSingleProps<OptionType> = Omit<\n  TSelectControlProps<OptionType>,\n  'value' | 'onChange' | 'isMulti'\n> & {\n  fieldName: XFieldName\n  options: RoA<OptionType>\n  getOptionFilter?(option: OptionType): string\n}\n\nexport const FormDropdownSingle = <TOption extends any>({\n  fieldName,\n  getOptionValue = idProp as any,\n  getOptionFilter,\n  ...selectProps\n}: TFormDropdownSingleProps<TOption>) => {\n  const formState = useXFormState()\n  const field = useXField<MaybeID>(fieldName)\n\n  return useObserver(function useBody() {\n    const dropdownProps = useDropdownSingle({\n      ...selectProps,\n      onSelectionChange: field.setValue,\n      selected: field.value,\n      getOptionValue,\n    })\n    const filterProps = useDropdownFilter({ getOptionFilter })\n\n    return (\n      <SelectControl<TOption>\n        {...dropdownProps}\n        {...filterProps}\n        {...selectProps}\n        onFocus={() => field.setTouched()}\n        invalid={field.touched && field.hasError}\n        isDisabled={formState.isSubmitting}\n      />\n    )\n  })\n}\n","import React from 'react'\nimport styled from 'styled-components/macro'\n\nimport { DeliveryTypeEnum } from '../graph/generated'\nimport { TouchButton } from '../molecules/TouchButton'\nimport { Colors } from '../styling'\n\ninterface IProps {\n  initialMinutes?: number\n  disabled?: boolean\n  deliveryType: DeliveryTypeEnum\n  onMinuteClick(minute: number): void\n}\n\nconst StyledDeliveryMinutes = styled.div`\n  display: flex;\n  justify-content: center;\n`\nconst StyledMinutesItem = styled.div`\n  margin: 1rem 1rem 0 0;\n`\n\nexport const DeliveryMinutes: React.FC<IProps> = ({\n  deliveryType,\n  disabled = false,\n  onMinuteClick,\n  initialMinutes,\n}) => {\n  const [selected, setSelected] = React.useState(initialMinutes)\n  const options = getMinutesForDeliveryType(deliveryType)\n  return (\n    <StyledDeliveryMinutes>\n      {options.map(minutes => (\n        <StyledMinutesItem key={minutes}>\n          <TouchButton\n            onClick={() => {\n              setSelected(minutes)\n              onMinuteClick(minutes)\n            }}\n            disabled={disabled}\n            color={selected === minutes ? Colors.yellow : Colors.green}\n          >\n            {minutes}\n          </TouchButton>\n        </StyledMinutesItem>\n      ))}\n    </StyledDeliveryMinutes>\n  )\n}\n\nconst deliveryMinutes = [20, 30, 45, 60, 75, 90, 105, 120]\nconst pickupMinutes = [10, 20, 30, 45, 60, 75, 90]\n\nexport function getMinutesForDeliveryType(type: DeliveryTypeEnum) {\n  return type === DeliveryTypeEnum.Pickup ? pickupMinutes : deliveryMinutes\n}\n","import React from 'react'\n\nimport { FCustomerFragment } from '../../../graph/generated'\n\ninterface ICustomerNameProps {\n  customer: FCustomerFragment | null\n}\n\nexport const CustomerIdentity: React.FC<ICustomerNameProps> = ({ customer }) =>\n  customer ? (\n    <span>{`${\n      customer.lastName\n        ? `${customer.firstName} ${customer.lastName}`\n        : customer.defaultPhone\n        ? customer.defaultPhone.phone\n        : ``\n    }`}</span>\n  ) : (\n    <i>unknown</i>\n  )\n","import { Note } from '@material-ui/icons'\nimport React from 'react'\nimport styled from 'styled-components/macro'\n\nimport { HorizontalSeparator } from '../../../atoms/HorizontalSeparator'\nimport { IconLine } from '../../../atoms/IconLine'\nimport { i18n } from '../../../i18n'\nimport { Colors } from '../../../styling'\n\ninterface INoteLineProps {\n  note?: string | null\n}\n\nconst StyledCurrentNote = styled.span`\n  color: ${Colors.orange};\n`\n\nexport const NoteLine: React.FC<INoteLineProps> = ({ note }) =>\n  note ? (\n    <>\n      <HorizontalSeparator />\n      <IconLine icon={Note} labelMargin=\"0\">\n        <StyledCurrentNote>\n          {note || i18n.t`Without note`.toLocaleLowerCase()}\n        </StyledCurrentNote>\n      </IconLine>\n    </>\n  ) : null\n","import React from 'react'\n\ninterface IOptions {\n  confirmDisableMs: number\n  resetToInitialMs: number\n  onConfirm: () => void\n  ref: React.MutableRefObject<{ disabled: boolean } | null>\n}\n\nexport function useConfirmWithTimeout({\n  confirmDisableMs,\n  resetToInitialMs,\n  onConfirm,\n  ref,\n}: IOptions) {\n  const [confirming, setConfirming] = React.useState(false)\n  const showConfirm = React.useCallback(() => {\n    if (ref.current) {\n      ref.current.disabled = true\n    }\n    setConfirming(true)\n\n    setTimeout(() => {\n      if (ref.current) {\n        ref.current.disabled = false\n      }\n    }, confirmDisableMs)\n  }, [ref, confirmDisableMs])\n\n  const confirm = React.useCallback(() => {\n    setConfirming(false)\n    onConfirm()\n  }, [onConfirm])\n\n  const onClick = confirming ? confirm : showConfirm\n\n  React.useEffect(() => {\n    if (confirming) {\n      const timer = setTimeout(() => setConfirming(false), resetToInitialMs)\n      return () => clearTimeout(timer)\n    }\n    return undefined\n  }, [resetToInitialMs, confirming])\n\n  return { confirming, onClick }\n}\n","import styled from 'styled-components/macro'\n\nexport const FlexDiv = styled.div`\n  display: flex;\n`\n","import { useRoot } from '../../../atoms/RootProvider'\n\nexport function useOrderModel() {\n  const { order } = useRoot()\n  return order\n}\n","import { Trans } from '@lingui/macro'\nimport React from 'react'\n\nimport { DeliveryMinutes } from '../../../atoms/DeliveryMinutes'\nimport { DeliveryTypeEnum } from '../../../graph/generated'\nimport { useSmartDialog } from '../../../hooks/useSmartDialog'\nimport { TouchButton } from '../../../molecules/TouchButton'\n\ninterface IOptions {\n  title: string\n  deliveryType: DeliveryTypeEnum\n  onConfirm(minutes: number, onSuccess: () => void): Promise<unknown>\n}\n\nexport function useTimeSelectionDialog({\n  title,\n  deliveryType,\n  onConfirm,\n}: IOptions) {\n  const [isSubmitting, setSubmitting] = React.useState(false)\n  return useSmartDialog({\n    title,\n    content: ({ close }) => (\n      <DeliveryMinutes\n        disabled={isSubmitting}\n        deliveryType={deliveryType}\n        onMinuteClick={minutes => {\n          setSubmitting(true)\n          onConfirm(minutes, close).finally(() => {\n            setSubmitting(false)\n          })\n        }}\n      />\n    ),\n    actions: ({ close }) => (\n      <TouchButton disabled={isSubmitting} onClick={close}>\n        <Trans>Cancel</Trans>\n      </TouchButton>\n    ),\n  })\n}\n","import {\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n} from '@material-ui/core'\nimport { Observer, useLocalStore } from 'mobx-react-lite'\nimport React from 'react'\n\ntype TRenderArea = ReactNodes | ((api: IDialogApi) => ReactNodes)\n\ninterface IProps {\n  initialOpen?: boolean\n  title?: string | ReactNode\n  actions?: TRenderArea\n  content: TRenderArea\n}\n\ninterface IDialogApi {\n  isOpen: boolean\n  open: () => void\n  close: () => void\n}\n\nexport function useSmartDialog({\n  content,\n  title,\n  actions,\n  initialOpen = false,\n}: IProps) {\n  const state = useLocalStore(() => ({\n    isOpen: initialOpen,\n    open() {\n      this.isOpen = true\n    },\n    close() {\n      this.isOpen = false\n    },\n  }))\n\n  const renderArea = (area: TRenderArea) => {\n    if (typeof area === 'function') {\n      return area(state)\n    }\n    return area\n  }\n\n  const dialog = (\n    <Observer>\n      {() => (\n        <Dialog open={state.isOpen} onClose={state.close}>\n          {title && <DialogTitle>{title}</DialogTitle>}\n          <DialogContent>{renderArea(content)}</DialogContent>\n          {actions && <DialogActions>{renderArea(actions)}</DialogActions>}\n        </Dialog>\n      )}\n    </Observer>\n  )\n\n  return [dialog, state] as [typeof dialog, typeof state]\n}\n","function isAbsolute(pathname) {\n  return pathname.charAt(0) === '/';\n}\n\n// About 1.5x faster than the two-arg version of Array#splice()\nfunction spliceOne(list, index) {\n  for (var i = index, k = i + 1, n = list.length; k < n; i += 1, k += 1) {\n    list[i] = list[k];\n  }\n\n  list.pop();\n}\n\n// This implementation is based heavily on node's url.parse\nfunction resolvePathname(to, from) {\n  if (from === undefined) from = '';\n\n  var toParts = (to && to.split('/')) || [];\n  var fromParts = (from && from.split('/')) || [];\n\n  var isToAbs = to && isAbsolute(to);\n  var isFromAbs = from && isAbsolute(from);\n  var mustEndAbs = isToAbs || isFromAbs;\n\n  if (to && isAbsolute(to)) {\n    // to is absolute\n    fromParts = toParts;\n  } else if (toParts.length) {\n    // to is relative, drop the filename\n    fromParts.pop();\n    fromParts = fromParts.concat(toParts);\n  }\n\n  if (!fromParts.length) return '/';\n\n  var hasTrailingSlash;\n  if (fromParts.length) {\n    var last = fromParts[fromParts.length - 1];\n    hasTrailingSlash = last === '.' || last === '..' || last === '';\n  } else {\n    hasTrailingSlash = false;\n  }\n\n  var up = 0;\n  for (var i = fromParts.length; i >= 0; i--) {\n    var part = fromParts[i];\n\n    if (part === '.') {\n      spliceOne(fromParts, i);\n    } else if (part === '..') {\n      spliceOne(fromParts, i);\n      up++;\n    } else if (up) {\n      spliceOne(fromParts, i);\n      up--;\n    }\n  }\n\n  if (!mustEndAbs) for (; up--; up) fromParts.unshift('..');\n\n  if (\n    mustEndAbs &&\n    fromParts[0] !== '' &&\n    (!fromParts[0] || !isAbsolute(fromParts[0]))\n  )\n    fromParts.unshift('');\n\n  var result = fromParts.join('/');\n\n  if (hasTrailingSlash && result.substr(-1) !== '/') result += '/';\n\n  return result;\n}\n\nexport default resolvePathname;\n","import styled from 'styled-components'\n\nexport const AutoHeight = styled.div`\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n`\n","import React from 'react'\n\nimport {\n  QFilterOccasionsOccasions,\n  useQFilterOccasions,\n} from '../../graph/generated'\nimport { ARRAY_EMPTY } from '../../helpers/form'\nimport { i18n } from '../../i18n'\nimport { RM } from '../../tools/ramda'\nimport { FormDropdownMulti } from '../forms/FormDropdownMulti'\nimport { useBranchesFilter } from './BranchesFilter'\n\ntype TOccasion = QFilterOccasionsOccasions\n\ntype TProps = NoChildren & {\n  markAsAvailable?(isAvailable: boolean): void\n}\n\nexport const OccasionsFilter = React.memo<TProps>(({ markAsAvailable }) => {\n  const branches = useBranchesFilter()\n  const { getStash, loading } = useQFilterOccasions({\n    branches,\n  })\n\n  const occasions = getStash(data => data.occasions)\n  const hasAnyOccasions = occasions !== null && occasions.length > 0\n\n  React.useEffect(() => {\n    if (markAsAvailable) {\n      markAsAvailable(hasAnyOccasions)\n    }\n  }, [hasAnyOccasions, markAsAvailable])\n\n  return (\n    <FormDropdownMulti<TOccasion>\n      fieldName=\"occasions\"\n      placeholder={i18n.t`Filter by occasions`}\n      options={occasions || ARRAY_EMPTY}\n      noOptionsMessage={() => i18n.t`No occasions`}\n      isLoading={loading}\n      getOptionLabel={RM.prop('title')}\n      getOptionFilter={RM.prop('title')}\n    />\n  )\n})\n","import './SectorsFilter.css'\n\nimport { useXField } from '@speedlo/xform'\nimport React from 'react'\nimport DropdownTreeSelect, {\n  DropdownTreeSelectProps,\n  TreeNode,\n} from 'react-dropdown-tree-select'\n\nimport {\n  FCompanyBranchFragment,\n  QFilterSectorsSectors,\n  useQFilterSectors,\n} from '../../graph/generated'\nimport { ARRAY_EMPTY } from '../../helpers/form'\nimport { useUserModel } from '../../hooks/useUserModel'\nimport { i18n } from '../../i18n'\nimport { idProp, idPropEq, RM } from '../../tools/ramda'\nimport { useBranchesFilter } from './BranchesFilter'\n\nconst DropdownTreeSelectMemo = React.memo<DropdownTreeSelectProps & NoChildren>(\n  ({ texts, data, onChange }) => {\n    // this wrapper is necessary because of the silly implementation of the component\n    // which basically resets the state on each render\n    return <DropdownTreeSelect texts={texts} data={data} onChange={onChange} />\n  },\n)\n\ntype TProps = NoChildren & {\n  markAsAvailable?(isAvailable: boolean): void\n}\n\ntype TSector = QFilterSectorsSectors\ntype TBranch = FCompanyBranchFragment\n\nexport const SectorsFilter = React.memo<TProps>(({ markAsAvailable }) => {\n  const userModel = useUserModel()\n  const branches = useBranchesFilter()\n  const hasSingleBranch = branches.length === 1\n\n  const { getStash } = useQFilterSectors({\n    branches,\n  })\n  const sectors = getStash(data => data.sectors)\n  const hasAnySectors = sectors !== null && sectors.length > 0\n\n  const treeData = React.useMemo(() => {\n    if (sectors === null) {\n      return null\n    }\n    if (hasSingleBranch) {\n      return buildForSingleBranch(sectors)\n    }\n    return buildWithBranches(\n      sectors,\n      userModel.branches.filter(branch => branches.includes(branch.id)),\n    )\n  }, [branches, hasSingleBranch, sectors, userModel])\n\n  const field = useXField<RoA<ID>>('sectors')\n\n  React.useEffect(() => {\n    if (markAsAvailable) {\n      markAsAvailable(hasAnySectors)\n    }\n  }, [hasAnySectors, markAsAvailable])\n\n  const onChange = React.useCallback(\n    (currentNode: TreeNode, selectedNodes: TreeNode[]) => {\n      const selectedSectorsId = selectedNodes.reduce(\n        (acc, node) => {\n          if (isBranchNode(node)) {\n            // with branch selected, its root sectors needs to be used\n            // in the filter instead\n            const branchNode = treeData!.find(idPropEq(node.value))\n            if (branchNode && branchNode.children) {\n              acc.push(...(branchNode.children as RoA<TSector>).map(idProp))\n            }\n          } else {\n            acc.push(node.value)\n          }\n          return acc\n        },\n        [] as ID[],\n      )\n      field.setValue(selectedSectorsId)\n    },\n    [field, treeData],\n  )\n\n  const texts = React.useMemo(\n    () => ({\n      placeholder: i18n.t`Filter by sectors`,\n      noMatches: i18n.t`No sectors`,\n    }),\n    [],\n  )\n\n  if (!hasAnySectors) {\n    return null\n  }\n\n  return (\n    <DropdownTreeSelectMemo\n      texts={texts}\n      data={treeData!}\n      onChange={onChange}\n    />\n  )\n})\n\nfunction buildForSingleBranch(sectors: RoA<TSector>) {\n  return getTreeFromFlatData({\n    flatData: sectors,\n    mapper: node => ({\n      label: node.name,\n      value: node.id,\n    }),\n    getParentKey(node) {\n      return node.parent ? node.parent.id : null\n    },\n    getKey(node) {\n      return node.id\n    },\n  })\n}\n\nconst branchKey = (branchId: ID) => `branch-${branchId}`\nfunction isBranchNode(node: TreeNode) {\n  return node.value.startsWith('branch')\n}\n\nfunction buildWithBranches(sectors: RoA<TSector>, branches: RoA<TBranch>) {\n  const sectorsPerBranch = RM.groupBy(\n    sector => sector.companyBranch.id,\n    sectors,\n  )\n\n  const flatData = [\n    ...sectors,\n    ...branches.filter(branch => {\n      return (\n        sectorsPerBranch[branch.id] && sectorsPerBranch[branch.id].length > 0\n      )\n    }),\n  ]\n\n  return getTreeFromFlatData({\n    flatData,\n    mapper: (node: TSector | TBranch) => ({\n      label: node.name,\n      id: isSector(node) ? node.id : branchKey(node.id),\n      value: isSector(node) ? node.id : branchKey(node.id),\n    }),\n    getParentKey(node) {\n      if (isSector(node)) {\n        if (node.parent) {\n          return node.parent.id\n        }\n        // sectors without parent gets the branch as parent\n        return branchKey(node.companyBranch.id)\n      }\n      return null // is branch, no parent\n    },\n    getKey(node) {\n      if (isSector(node)) {\n        return node.id\n      }\n      return branchKey(node.id)\n    },\n  })\n}\n\nfunction getTreeFromFlatData<T extends Record<string, any>, R>({\n  flatData,\n  mapper,\n  getKey,\n  getParentKey,\n}: {\n  flatData: RoA<T>\n  mapper(node: T): R\n  getKey(node: T): string\n  getParentKey(node: T): string | null\n}): Array<T & R & { children: T[] }> {\n  if (!flatData) {\n    return []\n  }\n\n  const rootKey = '@@'\n\n  const childrenToParents = { [rootKey]: [] as T[] }\n  flatData.forEach(child => {\n    const parentKey = getParentKey(child) || rootKey\n\n    if (parentKey in childrenToParents) {\n      childrenToParents[parentKey].push(child)\n    } else {\n      childrenToParents[parentKey] = [child]\n    }\n  })\n\n  if (!(rootKey in childrenToParents)) {\n    return []\n  }\n\n  const trav = (parent: T) => {\n    const parentKey = getKey(parent)\n    if (parentKey in childrenToParents) {\n      return {\n        ...parent,\n        ...mapper(parent),\n        children: childrenToParents[parentKey].map(child => trav(child)),\n      }\n    } else {\n      return {\n        ...parent,\n        ...mapper(parent),\n        children: ARRAY_EMPTY,\n      }\n    }\n  }\n\n  return childrenToParents[rootKey].map(child => trav(child))\n}\n\nfunction isSector(node: TSector | TBranch): node is TSector {\n  return Reflect.has(node, 'parent')\n}\n","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"ReactDropdownTreeSelect\", [\"react\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ReactDropdownTreeSelect\"] = factory(require(\"react\"));\n\telse\n\t\troot[\"ReactDropdownTreeSelect\"] = factory(root[\"React\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE__1__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 11);\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__1__;","/*!\n  Copyright (c) 2017 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(this && this[arg] || arg);\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tclasses.push(classNames.apply(this, arg));\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(this && this[key] || key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"InfiniteScroll\"] = factory(require(\"react\"));\n\telse\n\t\troot[\"InfiniteScroll\"] = factory(root[\"React\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_8__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n\n\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\n\tvar _get = function get(_x2, _x3, _x4) { var _again = true; _function: while (_again) { var object = _x2, property = _x3, receiver = _x4; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x2 = parent; _x3 = property; _x4 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\tvar _react = __webpack_require__(8);\n\n\tvar _react2 = _interopRequireDefault(_react);\n\n\tvar _propTypes = __webpack_require__(6);\n\n\tvar _propTypes2 = _interopRequireDefault(_propTypes);\n\n\tvar _utilsThrottle = __webpack_require__(2);\n\n\tvar _utilsThrottle2 = _interopRequireDefault(_utilsThrottle);\n\n\tvar _utilsThreshold = __webpack_require__(1);\n\n\tvar InfiniteScroll = (function (_Component) {\n\t  _inherits(InfiniteScroll, _Component);\n\n\t  function InfiniteScroll(props) {\n\t    _classCallCheck(this, InfiniteScroll);\n\n\t    _get(Object.getPrototypeOf(InfiniteScroll.prototype), \"constructor\", this).call(this);\n\t    this.state = {\n\t      showLoader: false,\n\t      lastScrollTop: 0,\n\t      actionTriggered: false,\n\t      pullToRefreshThresholdBreached: false\n\t    };\n\t    // variables to keep track of pull down behaviour\n\t    this.startY = 0;\n\t    this.currentY = 0;\n\t    this.dragging = false;\n\t    // will be populated in componentDidMount\n\t    // based on the height of the pull down element\n\t    this.maxPullDownDistance = 0;\n\n\t    this.onScrollListener = this.onScrollListener.bind(this);\n\t    this.throttledOnScrollListener = (0, _utilsThrottle2[\"default\"])(this.onScrollListener, 150).bind(this);\n\t    this.onStart = this.onStart.bind(this);\n\t    this.onMove = this.onMove.bind(this);\n\t    this.onEnd = this.onEnd.bind(this);\n\t    this.getScrollableTarget = this.getScrollableTarget.bind(this);\n\t  }\n\n\t  _createClass(InfiniteScroll, [{\n\t    key: \"componentDidMount\",\n\t    value: function componentDidMount() {\n\t      this._scrollableNode = this.getScrollableTarget();\n\t      this.el = this.props.height ? this._infScroll : this._scrollableNode || window;\n\t      this.el.addEventListener(\"scroll\", this.throttledOnScrollListener);\n\n\t      if (typeof this.props.initialScrollY === \"number\" && this.el.scrollHeight > this.props.initialScrollY) {\n\t        this.el.scrollTo(0, this.props.initialScrollY);\n\t      }\n\n\t      if (this.props.pullDownToRefresh) {\n\t        this.el.addEventListener(\"touchstart\", this.onStart);\n\t        this.el.addEventListener(\"touchmove\", this.onMove);\n\t        this.el.addEventListener(\"touchend\", this.onEnd);\n\n\t        this.el.addEventListener(\"mousedown\", this.onStart);\n\t        this.el.addEventListener(\"mousemove\", this.onMove);\n\t        this.el.addEventListener(\"mouseup\", this.onEnd);\n\n\t        // get BCR of pullDown element to position it above\n\t        this.maxPullDownDistance = this._pullDown.firstChild.getBoundingClientRect().height;\n\t        this.forceUpdate();\n\n\t        if (typeof this.props.refreshFunction !== \"function\") {\n\t          throw new Error(\"Mandatory prop \\\"refreshFunction\\\" missing.\\n          Pull Down To Refresh functionality will not work\\n          as expected. Check README.md for usage'\");\n\t        }\n\t      }\n\t    }\n\t  }, {\n\t    key: \"componentWillUnmount\",\n\t    value: function componentWillUnmount() {\n\t      this.el.removeEventListener(\"scroll\", this.throttledOnScrollListener);\n\n\t      if (this.props.pullDownToRefresh) {\n\t        this.el.removeEventListener(\"touchstart\", this.onStart);\n\t        this.el.removeEventListener(\"touchmove\", this.onMove);\n\t        this.el.removeEventListener(\"touchend\", this.onEnd);\n\n\t        this.el.removeEventListener(\"mousedown\", this.onStart);\n\t        this.el.removeEventListener(\"mousemove\", this.onMove);\n\t        this.el.removeEventListener(\"mouseup\", this.onEnd);\n\t      }\n\t    }\n\t  }, {\n\t    key: \"componentWillReceiveProps\",\n\t    value: function componentWillReceiveProps(props) {\n\t      // do nothing when dataLength and key are unchanged\n\t      if (this.props.key === props.key && this.props.dataLength === props.dataLength) return;\n\n\t      // update state when new data was sent in\n\t      this.setState({\n\t        showLoader: false,\n\t        actionTriggered: false,\n\t        pullToRefreshThresholdBreached: false\n\t      });\n\t    }\n\t  }, {\n\t    key: \"getScrollableTarget\",\n\t    value: function getScrollableTarget() {\n\t      if (this.props.scrollableTarget instanceof HTMLElement) return this.props.scrollableTarget;\n\t      if (typeof this.props.scrollableTarget === 'string') {\n\t        return document.getElementById(this.props.scrollableTarget);\n\t      }\n\t      if (this.props.scrollableTarget === null) {\n\t        console.warn(\"You are trying to pass scrollableTarget but it is null. This might\\n        happen because the element may not have been added to DOM yet.\\n        See https://github.com/ankeetmaini/react-infinite-scroll-component/issues/59 for more info.\\n      \");\n\t      }\n\t      return null;\n\t    }\n\t  }, {\n\t    key: \"onStart\",\n\t    value: function onStart(evt) {\n\t      if (this.state.lastScrollTop) return;\n\n\t      this.dragging = true;\n\t      this.startY = evt.pageY || evt.touches[0].pageY;\n\t      this.currentY = this.startY;\n\n\t      this._infScroll.style.willChange = \"transform\";\n\t      this._infScroll.style.transition = \"transform 0.2s cubic-bezier(0,0,0.31,1)\";\n\t    }\n\t  }, {\n\t    key: \"onMove\",\n\t    value: function onMove(evt) {\n\t      if (!this.dragging) return;\n\t      this.currentY = evt.pageY || evt.touches[0].pageY;\n\n\t      // user is scrolling down to up\n\t      if (this.currentY < this.startY) return;\n\n\t      if (this.currentY - this.startY >= this.props.pullDownToRefreshThreshold) {\n\t        this.setState({\n\t          pullToRefreshThresholdBreached: true\n\t        });\n\t      }\n\n\t      // so you can drag upto 1.5 times of the maxPullDownDistance\n\t      if (this.currentY - this.startY > this.maxPullDownDistance * 1.5) return;\n\n\t      this._infScroll.style.overflow = \"visible\";\n\t      this._infScroll.style.transform = \"translate3d(0px, \" + (this.currentY - this.startY) + \"px, 0px)\";\n\t    }\n\t  }, {\n\t    key: \"onEnd\",\n\t    value: function onEnd(evt) {\n\t      var _this = this;\n\n\t      this.startY = 0;\n\t      this.currentY = 0;\n\n\t      this.dragging = false;\n\n\t      if (this.state.pullToRefreshThresholdBreached) {\n\t        this.props.refreshFunction && this.props.refreshFunction();\n\t      }\n\n\t      requestAnimationFrame(function () {\n\t        // this._infScroll\n\t        if (_this._infScroll) {\n\t          _this._infScroll.style.overflow = \"auto\";\n\t          _this._infScroll.style.transform = \"none\";\n\t          _this._infScroll.style.willChange = \"none\";\n\t        }\n\t      });\n\t    }\n\t  }, {\n\t    key: \"isElementAtBottom\",\n\t    value: function isElementAtBottom(target) {\n\t      var scrollThreshold = arguments.length <= 1 || arguments[1] === undefined ? 0.8 : arguments[1];\n\n\t      var clientHeight = target === document.body || target === document.documentElement ? window.screen.availHeight : target.clientHeight;\n\n\t      var threshold = (0, _utilsThreshold.parseThreshold)(scrollThreshold);\n\n\t      if (threshold.unit === _utilsThreshold.ThresholdUnits.Pixel) {\n\t        return target.scrollTop + clientHeight >= target.scrollHeight - threshold.value;\n\t      }\n\n\t      return target.scrollTop + clientHeight >= threshold.value / 100 * target.scrollHeight;\n\t    }\n\t  }, {\n\t    key: \"onScrollListener\",\n\t    value: function onScrollListener(event) {\n\t      var _this2 = this;\n\n\t      if (typeof this.props.onScroll === \"function\") {\n\t        // Execute this callback in next tick so that it does not affect the\n\t        // functionality of the library.\n\t        setTimeout(function () {\n\t          return _this2.props.onScroll(event);\n\t        }, 0);\n\t      }\n\n\t      var target = this.props.height || this._scrollableNode ? event.target : document.documentElement.scrollTop ? document.documentElement : document.body;\n\n\t      // return immediately if the action has already been triggered,\n\t      // prevents multiple triggers.\n\t      if (this.state.actionTriggered) return;\n\n\t      var atBottom = this.isElementAtBottom(target, this.props.scrollThreshold);\n\n\t      // call the `next` function in the props to trigger the next data fetch\n\t      if (atBottom && this.props.hasMore) {\n\t        this.setState({ actionTriggered: true, showLoader: true });\n\t        this.props.next();\n\t      }\n\t      this.setState({ lastScrollTop: target.scrollTop });\n\t    }\n\t  }, {\n\t    key: \"render\",\n\t    value: function render() {\n\t      var _this3 = this;\n\n\t      var style = _extends({\n\t        height: this.props.height || \"auto\",\n\t        overflow: \"auto\",\n\t        WebkitOverflowScrolling: \"touch\"\n\t      }, this.props.style);\n\t      var hasChildren = this.props.hasChildren || !!(this.props.children && this.props.children.length);\n\n\t      // because heighted infiniteScroll visualy breaks\n\t      // on drag down as overflow becomes visible\n\t      var outerDivStyle = this.props.pullDownToRefresh && this.props.height ? { overflow: \"auto\" } : {};\n\t      return _react2[\"default\"].createElement(\n\t        \"div\",\n\t        { style: outerDivStyle },\n\t        _react2[\"default\"].createElement(\n\t          \"div\",\n\t          {\n\t            className: \"infinite-scroll-component \" + (this.props.className || ''),\n\t            ref: function (infScroll) {\n\t              return _this3._infScroll = infScroll;\n\t            },\n\t            style: style\n\t          },\n\t          this.props.pullDownToRefresh && _react2[\"default\"].createElement(\n\t            \"div\",\n\t            {\n\t              style: { position: \"relative\" },\n\t              ref: function (pullDown) {\n\t                return _this3._pullDown = pullDown;\n\t              }\n\t            },\n\t            _react2[\"default\"].createElement(\n\t              \"div\",\n\t              {\n\t                style: {\n\t                  position: \"absolute\",\n\t                  left: 0,\n\t                  right: 0,\n\t                  top: -1 * this.maxPullDownDistance\n\t                }\n\t              },\n\t              !this.state.pullToRefreshThresholdBreached && this.props.pullDownToRefreshContent,\n\t              this.state.pullToRefreshThresholdBreached && this.props.releaseToRefreshContent\n\t            )\n\t          ),\n\t          this.props.children,\n\t          !this.state.showLoader && !hasChildren && this.props.hasMore && this.props.loader,\n\t          this.state.showLoader && this.props.hasMore && this.props.loader,\n\t          !this.props.hasMore && this.props.endMessage\n\t        )\n\t      );\n\t    }\n\t  }]);\n\n\t  return InfiniteScroll;\n\t})(_react.Component);\n\n\texports[\"default\"] = InfiniteScroll;\n\n\tInfiniteScroll.defaultProps = {\n\t  pullDownToRefreshContent: _react2[\"default\"].createElement(\n\t    \"h3\",\n\t    null,\n\t    \"Pull down to refresh\"\n\t  ),\n\t  releaseToRefreshContent: _react2[\"default\"].createElement(\n\t    \"h3\",\n\t    null,\n\t    \"Release to refresh\"\n\t  ),\n\t  pullDownToRefreshThreshold: 100,\n\t  disableBrowserPullToRefresh: true\n\t};\n\n\tInfiniteScroll.propTypes = {\n\t  next: _propTypes2[\"default\"].func,\n\t  hasMore: _propTypes2[\"default\"].bool,\n\t  children: _propTypes2[\"default\"].node,\n\t  loader: _propTypes2[\"default\"].node.isRequired,\n\t  scrollThreshold: _propTypes2[\"default\"].oneOfType([_propTypes2[\"default\"].number, _propTypes2[\"default\"].string]),\n\t  endMessage: _propTypes2[\"default\"].node,\n\t  style: _propTypes2[\"default\"].object,\n\t  height: _propTypes2[\"default\"].number,\n\t  scrollableTarget: _propTypes2[\"default\"].node,\n\t  hasChildren: _propTypes2[\"default\"].bool,\n\t  pullDownToRefresh: _propTypes2[\"default\"].bool,\n\t  pullDownToRefreshContent: _propTypes2[\"default\"].node,\n\t  releaseToRefreshContent: _propTypes2[\"default\"].node,\n\t  pullDownToRefreshThreshold: _propTypes2[\"default\"].number,\n\t  refreshFunction: _propTypes2[\"default\"].func,\n\t  onScroll: _propTypes2[\"default\"].func,\n\t  dataLength: _propTypes2[\"default\"].number.isRequired,\n\t  key: _propTypes2[\"default\"].string\n\t};\n\tmodule.exports = exports[\"default\"];\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\texports.parseThreshold = parseThreshold;\n\tvar ThresholdUnits = {\n\t  Pixel: 'Pixel',\n\t  Percent: 'Percent'\n\t};\n\n\texports.ThresholdUnits = ThresholdUnits;\n\tvar defaultThreshold = {\n\t  unit: ThresholdUnits.Percent,\n\t  value: 0.8\n\t};\n\n\tfunction parseThreshold(scrollThreshold) {\n\t  if (typeof scrollThreshold === \"number\") {\n\t    return {\n\t      unit: ThresholdUnits.Percent,\n\t      value: scrollThreshold * 100\n\t    };\n\t  }\n\n\t  if (typeof scrollThreshold === \"string\") {\n\t    if (scrollThreshold.match(/^(\\d*(\\.\\d+)?)px$/)) {\n\t      return {\n\t        unit: ThresholdUnits.Pixel,\n\t        value: parseFloat(scrollThreshold)\n\t      };\n\t    }\n\n\t    if (scrollThreshold.match(/^(\\d*(\\.\\d+)?)%$/)) {\n\t      return {\n\t        unit: ThresholdUnits.Percent,\n\t        value: parseFloat(scrollThreshold)\n\t      };\n\t    }\n\n\t    console.warn('scrollThreshold format is invalid. Valid formats: \"120px\", \"50%\"...');\n\n\t    return defaultThreshold;\n\t  }\n\n\t  console.warn('scrollThreshold should be string or number');\n\n\t  return defaultThreshold;\n\t}\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports) {\n\n\t// https://remysharp.com/2010/07/21/throttling-function-calls\n\t\"use strict\";\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports[\"default\"] = throttle;\n\n\tfunction throttle(fn, threshhold, scope) {\n\t  threshhold || (threshhold = 250);\n\t  var last, deferTimer;\n\t  return function () {\n\t    var context = scope || this;\n\n\t    var now = +new Date(),\n\t        args = arguments;\n\t    if (last && now < last + threshhold) {\n\t      // hold on to it\n\t      clearTimeout(deferTimer);\n\t      deferTimer = setTimeout(function () {\n\t        last = now;\n\t        fn.apply(context, args);\n\t      }, threshhold);\n\t    } else {\n\t      last = now;\n\t      fn.apply(context, args);\n\t    }\n\t  };\n\t}\n\n\tmodule.exports = exports[\"default\"];\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\n\t/**\n\t * Copyright (c) 2013-present, Facebook, Inc.\n\t *\n\t * This source code is licensed under the MIT license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t *\n\t * \n\t */\n\n\tfunction makeEmptyFunction(arg) {\n\t  return function () {\n\t    return arg;\n\t  };\n\t}\n\n\t/**\n\t * This function accepts and discards inputs; it has no side effects. This is\n\t * primarily useful idiomatically for overridable function endpoints which\n\t * always need to be callable, since JS lacks a null-call idiom ala Cocoa.\n\t */\n\tvar emptyFunction = function emptyFunction() {};\n\n\temptyFunction.thatReturns = makeEmptyFunction;\n\temptyFunction.thatReturnsFalse = makeEmptyFunction(false);\n\temptyFunction.thatReturnsTrue = makeEmptyFunction(true);\n\temptyFunction.thatReturnsNull = makeEmptyFunction(null);\n\temptyFunction.thatReturnsThis = function () {\n\t  return this;\n\t};\n\temptyFunction.thatReturnsArgument = function (arg) {\n\t  return arg;\n\t};\n\n\tmodule.exports = emptyFunction;\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/**\n\t * Copyright (c) 2013-present, Facebook, Inc.\n\t *\n\t * This source code is licensed under the MIT license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t *\n\t */\n\n\t'use strict';\n\n\t/**\n\t * Use invariant() to assert state which your program assumes to be true.\n\t *\n\t * Provide sprintf-style format (only %s is supported) and arguments\n\t * to provide information about what broke and what you were\n\t * expecting.\n\t *\n\t * The invariant message will be stripped in production, but the invariant\n\t * will remain to ensure logic does not differ in production.\n\t */\n\n\tvar validateFormat = function validateFormat(format) {};\n\n\tif (false) {\n\t  validateFormat = function validateFormat(format) {\n\t    if (format === undefined) {\n\t      throw new Error('invariant requires an error message argument');\n\t    }\n\t  };\n\t}\n\n\tfunction invariant(condition, format, a, b, c, d, e, f) {\n\t  validateFormat(format);\n\n\t  if (!condition) {\n\t    var error;\n\t    if (format === undefined) {\n\t      error = new Error('Minified exception occurred; use the non-minified dev environment ' + 'for the full error message and additional helpful warnings.');\n\t    } else {\n\t      var args = [a, b, c, d, e, f];\n\t      var argIndex = 0;\n\t      error = new Error(format.replace(/%s/g, function () {\n\t        return args[argIndex++];\n\t      }));\n\t      error.name = 'Invariant Violation';\n\t    }\n\n\t    error.framesToPop = 1; // we don't care about invariant's own frame\n\t    throw error;\n\t  }\n\t}\n\n\tmodule.exports = invariant;\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/**\n\t * Copyright 2013-present, Facebook, Inc.\n\t * All rights reserved.\n\t *\n\t * This source code is licensed under the BSD-style license found in the\n\t * LICENSE file in the root directory of this source tree. An additional grant\n\t * of patent rights can be found in the PATENTS file in the same directory.\n\t */\n\n\t'use strict';\n\n\tvar emptyFunction = __webpack_require__(3);\n\tvar invariant = __webpack_require__(4);\n\tvar ReactPropTypesSecret = __webpack_require__(7);\n\n\tmodule.exports = function() {\n\t  function shim(props, propName, componentName, location, propFullName, secret) {\n\t    if (secret === ReactPropTypesSecret) {\n\t      // It is still safe when called from React.\n\t      return;\n\t    }\n\t    invariant(\n\t      false,\n\t      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n\t      'Use PropTypes.checkPropTypes() to call them. ' +\n\t      'Read more at http://fb.me/use-check-prop-types'\n\t    );\n\t  };\n\t  shim.isRequired = shim;\n\t  function getShim() {\n\t    return shim;\n\t  };\n\t  // Important!\n\t  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n\t  var ReactPropTypes = {\n\t    array: shim,\n\t    bool: shim,\n\t    func: shim,\n\t    number: shim,\n\t    object: shim,\n\t    string: shim,\n\t    symbol: shim,\n\n\t    any: shim,\n\t    arrayOf: getShim,\n\t    element: shim,\n\t    instanceOf: getShim,\n\t    node: shim,\n\t    objectOf: getShim,\n\t    oneOf: getShim,\n\t    oneOfType: getShim,\n\t    shape: getShim\n\t  };\n\n\t  ReactPropTypes.checkPropTypes = emptyFunction;\n\t  ReactPropTypes.PropTypes = ReactPropTypes;\n\n\t  return ReactPropTypes;\n\t};\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/**\n\t * Copyright 2013-present, Facebook, Inc.\n\t * All rights reserved.\n\t *\n\t * This source code is licensed under the BSD-style license found in the\n\t * LICENSE file in the root directory of this source tree. An additional grant\n\t * of patent rights can be found in the PATENTS file in the same directory.\n\t */\n\n\tif (false) {\n\t  var REACT_ELEMENT_TYPE = (typeof Symbol === 'function' &&\n\t    Symbol.for &&\n\t    Symbol.for('react.element')) ||\n\t    0xeac7;\n\n\t  var isValidElement = function(object) {\n\t    return typeof object === 'object' &&\n\t      object !== null &&\n\t      object.$$typeof === REACT_ELEMENT_TYPE;\n\t  };\n\n\t  // By explicitly using `prop-types` you are opting into new development behavior.\n\t  // http://fb.me/prop-types-in-prod\n\t  var throwOnDirectAccess = true;\n\t  module.exports = require('./factoryWithTypeCheckers')(isValidElement, throwOnDirectAccess);\n\t} else {\n\t  // By explicitly using `prop-types` you are opting into new production behavior.\n\t  // http://fb.me/prop-types-in-prod\n\t  module.exports = __webpack_require__(5)();\n\t}\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports) {\n\n\t/**\n\t * Copyright 2013-present, Facebook, Inc.\n\t * All rights reserved.\n\t *\n\t * This source code is licensed under the BSD-style license found in the\n\t * LICENSE file in the root directory of this source tree. An additional grant\n\t * of patent rights can be found in the PATENTS file in the same directory.\n\t */\n\n\t'use strict';\n\n\tvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\n\tmodule.exports = ReactPropTypesSecret;\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_8__;\n\n/***/ })\n/******/ ])\n});\n;","'use strict'\nmodule.exports = function (arr, func) {\n  var some = arr.filter(func)\n  return some.length !== 0 && some.length !== arr.length\n}\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","const generateUID = prefix => {\n  let counter = 1\n\n  let map = new WeakMap()\n\n  const get = item => {\n    if (!map.has(item)) {\n      map.set(item, counter++)\n    }\n    return `${prefix}${map.get(item)}`\n  }\n\n  const reset = () => {\n    map = new WeakMap()\n    counter = 1\n  }\n\n  return { get, reset }\n}\n\nconst clientIdGenerator = generateUID('rdts')\nexport default clientIdGenerator\n","const toKebabCase = str => str.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase()\n\nconst getDataset = (o = {}) =>\n  Object.keys(o).reduce((acc, cur) => {\n    acc[`data-${toKebabCase(cur)}`] = o[cur]\n    return acc\n  }, {})\n\nexport default getDataset\n","/**\n * Simplified implmentation of isEmpty.\n * Note: This is not complete and will return false positives for empty objects and likes.\n * However, it suffices for the limited use-case of this project.\n */\nconst isEmpty = o => !o || (Array.isArray(o) && !o.length)\n\nexport default isEmpty\n","const getPath = e => {\n  if (e.path) return e.path\n\n  let elem = e.target\n  const path = [elem]\n\n  while (elem.parentElement) {\n    elem = elem.parentElement\n    path.unshift(elem)\n  }\n\n  return path\n}\n\nexport default (e, node) => {\n  if (!(e instanceof Event)) return false\n  return !getPath(e).some(eventNode => eventNode === node)\n}\n","/**\n * Modified debounce that always invokes on leading edge\n * See unmodified: https://gist.github.com/mrchief/a7e8938ee96774f05644905b37f09536\n */\nexport default (func, wait) => {\n  let timeout\n\n  return (...args) => {\n    const later = () => {\n      timeout = null\n      func(...args)\n    }\n\n    // timeout will be undefined the first time (leading edge)\n    // so the callback will get executed once on leading edge\n    const callNow = !timeout\n\n    clearTimeout(timeout)\n    timeout = setTimeout(later, wait)\n\n    if (callNow) func(...args)\n  }\n}\n","import cn from 'classnames/bind'\nimport PropTypes from 'prop-types'\nimport React, { PureComponent } from 'react'\n\nimport styles from './index.css'\n\nconst cx = cn.bind(styles)\n\nexport const getTagId = id => `${id}_tag`\n\nclass Tag extends PureComponent {\n  static propTypes = {\n    id: PropTypes.string.isRequired,\n    label: PropTypes.string.isRequired,\n    onDelete: PropTypes.func,\n    readOnly: PropTypes.bool,\n    disabled: PropTypes.bool,\n    labelRemove: PropTypes.string,\n  }\n\n  handleClick = e => {\n    const { id, onDelete } = this.props\n    e.stopPropagation()\n    e.nativeEvent.stopImmediatePropagation()\n    onDelete(id, (e.key || e.keyCode) !== undefined)\n  }\n\n  onKeyDown = e => {\n    if (e.key === 'Backspace') {\n      this.handleClick(e)\n      e.preventDefault()\n    }\n  }\n\n  onKeyUp = e => {\n    if (e.keyCode === 32 || ['Delete', 'Enter'].indexOf(e.key) > -1) {\n      this.handleClick(e)\n      e.preventDefault()\n    }\n  }\n\n  render() {\n    const { id, label, labelRemove = 'Remove', readOnly, disabled } = this.props\n\n    const tagId = getTagId(id)\n    const buttonId = `${id}_button`\n    const className = cx('tag-remove', { readOnly }, { disabled })\n    const isDisabled = readOnly || disabled\n\n    return (\n      <span className={cx('tag')} id={tagId} aria-label={label}>\n        {label}\n        <button\n          id={buttonId}\n          onClick={!isDisabled ? this.handleClick : undefined}\n          onKeyDown={!isDisabled ? this.onKeyDown : undefined}\n          onKeyUp={!isDisabled ? this.onKeyUp : undefined}\n          className={className}\n          type=\"button\"\n          aria-label={labelRemove}\n          aria-labelledby={`${buttonId} ${tagId}`}\n          aria-disabled={isDisabled}\n        >\n          x\n        </button>\n      </span>\n    )\n  }\n}\n\nexport default Tag\n","export function getAriaLabel(label, additionalLabelledBy) {\n  const attributes = getAriaAttributeForLabel(label)\n\n  if (additionalLabelledBy) {\n    attributes['aria-labelledby'] = `${attributes['aria-labelledby'] || ''} ${additionalLabelledBy}`.trim()\n  }\n\n  return attributes\n}\n\nfunction getAriaAttributeForLabel(label) {\n  if (!label) return {}\n\n  /* See readme for label. When label starts with # it references ids of dom nodes instead.\n    When used on aria-labelledby, they should be referenced without a starting hash/# */\n  if (label[0] === '#') {\n    return { 'aria-labelledby': label.substring(1).replace(/ #/g, ' ') }\n  }\n  return { 'aria-label': label }\n}\n","import React, { PureComponent } from 'react'\nimport PropTypes from 'prop-types'\nimport cn from 'classnames/bind'\nimport Tag from '../tag'\nimport styles from './index.css'\nimport { getDataset, debounce } from '../utils'\nimport { getAriaLabel } from '../a11y'\n\nconst cx = cn.bind(styles)\n\nconst getTags = (tags = [], onDelete, readOnly, disabled, labelRemove) =>\n  tags.map(tag => {\n    const { _id, label, tagClassName, dataset } = tag\n    return (\n      <li className={cx('tag-item', tagClassName)} key={`tag-item-${_id}`} {...getDataset(dataset)}>\n        <Tag\n          label={label}\n          id={_id}\n          onDelete={onDelete}\n          readOnly={readOnly}\n          disabled={disabled}\n          labelRemove={labelRemove}\n        />\n      </li>\n    )\n  })\n\nclass Input extends PureComponent {\n  static propTypes = {\n    tags: PropTypes.array,\n    texts: PropTypes.object,\n    onInputChange: PropTypes.func,\n    onFocus: PropTypes.func,\n    onBlur: PropTypes.func,\n    onTagRemove: PropTypes.func,\n    onKeyDown: PropTypes.func,\n    inputRef: PropTypes.func,\n    disabled: PropTypes.bool,\n    readOnly: PropTypes.bool,\n    activeDescendant: PropTypes.string,\n  }\n\n  constructor(props) {\n    super(props)\n    this.delayedCallback = debounce(e => this.props.onInputChange(e.target.value), 300)\n  }\n\n  handleInputChange = e => {\n    e.persist()\n    this.delayedCallback(e)\n  }\n\n  render() {\n    const {\n      tags,\n      onTagRemove,\n      inputRef,\n      texts = {},\n      onFocus,\n      onBlur,\n      disabled,\n      readOnly,\n      onKeyDown,\n      activeDescendant,\n    } = this.props\n\n    return (\n      <ul className={cx('tag-list')}>\n        {getTags(tags, onTagRemove, readOnly, disabled, texts.labelRemove)}\n        <li className={cx('tag-item')}>\n          <input\n            type=\"text\"\n            disabled={disabled}\n            ref={inputRef}\n            className={cx('search')}\n            placeholder={texts.placeholder || 'Choose...'}\n            onKeyDown={onKeyDown}\n            onChange={this.handleInputChange}\n            onFocus={onFocus}\n            onBlur={onBlur}\n            readOnly={readOnly}\n            aria-activedescendant={activeDescendant}\n            aria-autocomplete={onKeyDown ? 'list' : undefined}\n            {...getAriaLabel(texts.label)}\n          />\n        </li>\n      </ul>\n    )\n  }\n}\n\nexport default Input\n","import React, { PureComponent } from 'react'\nimport PropTypes from 'prop-types'\nimport cn from 'classnames/bind'\n\nimport { getAriaLabel } from '../a11y'\nimport { getTagId } from '../tag'\n\nimport styles from '../index.css'\n\nconst cx = cn.bind(styles)\n\nclass Trigger extends PureComponent {\n  static propTypes = {\n    onTrigger: PropTypes.func,\n    disabled: PropTypes.bool,\n    readOnly: PropTypes.bool,\n    showDropdown: PropTypes.bool,\n    mode: PropTypes.oneOf(['multiSelect', 'simpleSelect', 'radioSelect', 'hierarchical']),\n    texts: PropTypes.object,\n    clientId: PropTypes.string,\n    tags: PropTypes.array,\n  }\n\n  getAriaAttributes = () => {\n    const { mode, texts = {}, showDropdown, clientId, tags } = this.props\n\n    const triggerId = `${clientId}_trigger`\n    const labelledBy = []\n    let labelAttributes = getAriaLabel(texts.label)\n    if (tags && tags.length) {\n      if (labelAttributes['aria-label']) {\n        // Adds reference to self when having aria-label\n        labelledBy.push(triggerId)\n      }\n      tags.forEach(t => {\n        labelledBy.push(getTagId(t._id))\n      })\n      labelAttributes = getAriaLabel(texts.label, labelledBy.join(' '))\n    }\n\n    const attributes = {\n      id: triggerId,\n      role: 'button',\n      tabIndex: 0,\n      'aria-haspopup': mode === 'simpleSelect' ? 'listbox' : 'tree',\n      'aria-expanded': showDropdown ? 'true' : 'false',\n      ...labelAttributes,\n    }\n\n    return attributes\n  }\n\n  handleTrigger = e => {\n    // Just return if triggered from keyDown and the key isn't enter, space or arrow down\n    if (e.key && e.keyCode !== 13 && e.keyCode !== 32 && e.keyCode !== 40) {\n      return\n    } else if (e.key && this.triggerNode && this.triggerNode !== document.activeElement) {\n      // Do not trigger if not activeElement\n      return\n    } else if (!this.props.showDropdown && e.keyCode === 32) {\n      // Avoid adding space to input on open\n      e.preventDefault()\n    }\n\n    // Else this is a key press that should trigger the dropdown\n    this.props.onTrigger(e)\n  }\n\n  render() {\n    const { disabled, readOnly, showDropdown } = this.props\n\n    const dropdownTriggerClassname = cx({\n      'dropdown-trigger': true,\n      arrow: true,\n      disabled,\n      readOnly,\n      top: showDropdown,\n      bottom: !showDropdown,\n    })\n\n    return (\n      <a\n        ref={node => {\n          this.triggerNode = node\n        }}\n        className={dropdownTriggerClassname}\n        onClick={!disabled ? this.handleTrigger : undefined}\n        onKeyDown={!disabled ? this.handleTrigger : undefined}\n        {...this.getAriaAttributes()}\n      >\n        {this.props.children}\n      </a>\n    )\n  }\n}\n\nexport default Trigger\n","import React, { PureComponent } from 'react'\nimport PropTypes from 'prop-types'\n\nclass Action extends PureComponent {\n  static propTypes = {\n    title: PropTypes.string,\n    text: PropTypes.string,\n    className: PropTypes.string,\n    actionData: PropTypes.object,\n    onAction: PropTypes.func,\n    readOnly: PropTypes.bool,\n  }\n\n  static defaultProps = {\n    onAction: () => {},\n  }\n\n  handleClick = () => {\n    const { onAction, actionData } = this.props\n    if (onAction) {\n      onAction(actionData.nodeId, actionData.action)\n    }\n  }\n\n  render() {\n    const { title, className, text, readOnly } = this.props\n\n    return (\n      <i title={title} className={className} onClick={!readOnly ? this.handleClick : undefined}>\n        {text}\n      </i>\n    )\n  }\n}\n\nexport default Action\n","import PropTypes from 'prop-types'\nimport React, { PureComponent } from 'react'\n\nimport Action from './action'\nimport { isEmpty } from '../utils'\n\nclass Actions extends PureComponent {\n  static propTypes = {\n    id: PropTypes.string.isRequired,\n    actions: PropTypes.array,\n  }\n\n  render() {\n    const { actions, id, ...rest } = this.props\n\n    if (isEmpty(actions)) return null\n\n    return actions.map((a, idx) => {\n      const actionId = a.id || `action-${idx}`\n      return <Action key={actionId} {...rest} {...a} actionData={{ action: { ...a, id: actionId }, nodeId: id }} />\n    })\n  }\n}\n\nexport default Actions\n","import React, { PureComponent } from 'react'\nimport PropTypes from 'prop-types'\n\nexport const refUpdater = ({ checked, indeterminate }) => input => {\n  if (input) {\n    input.checked = checked\n    input.indeterminate = indeterminate\n  }\n}\n\nclass Checkbox extends PureComponent {\n  static propTypes = {\n    checked: PropTypes.bool,\n    indeterminate: PropTypes.bool,\n    onChange: PropTypes.func,\n    disabled: PropTypes.bool,\n    readOnly: PropTypes.bool,\n  }\n\n  render() {\n    const { checked, indeterminate = false, onChange, disabled, readOnly, ...rest } = this.props\n\n    const isDisabled = disabled || readOnly\n\n    return (\n      <input\n        type=\"checkbox\"\n        ref={refUpdater({ checked, indeterminate })}\n        onChange={onChange}\n        disabled={isDisabled}\n        {...rest}\n      />\n    )\n  }\n}\n\nexport default Checkbox\n","import React, { PureComponent } from 'react'\nimport PropTypes from 'prop-types'\n\nexport const refUpdater = ({ checked }) => input => {\n  if (input) {\n    input.checked = checked\n  }\n}\n\nclass RadioButton extends PureComponent {\n  static propTypes = {\n    name: PropTypes.string.isRequired,\n    checked: PropTypes.bool,\n    onChange: PropTypes.func,\n    disabled: PropTypes.bool,\n    readOnly: PropTypes.bool,\n  }\n\n  render() {\n    const { name, checked, onChange, disabled, readOnly, ...rest } = this.props\n\n    const isDisabled = disabled || readOnly\n\n    return (\n      <input\n        type=\"radio\"\n        name={name}\n        ref={refUpdater({ checked })}\n        onChange={onChange}\n        disabled={isDisabled}\n        {...rest}\n      />\n    )\n  }\n}\n\nexport default RadioButton\n","import cn from 'classnames/bind'\nimport PropTypes from 'prop-types'\nimport React, { PureComponent } from 'react'\nimport Checkbox from '../checkbox'\nimport RadioButton from '../radio'\n\nimport styles from './index.css'\n\nconst cx = cn.bind(styles)\n\nclass NodeLabel extends PureComponent {\n  static propTypes = {\n    id: PropTypes.string.isRequired,\n    actions: PropTypes.array,\n    title: PropTypes.string,\n    label: PropTypes.string.isRequired,\n    value: PropTypes.string.isRequired,\n    checked: PropTypes.bool,\n    partial: PropTypes.bool,\n    disabled: PropTypes.bool,\n    dataset: PropTypes.object,\n    mode: PropTypes.oneOf(['multiSelect', 'simpleSelect', 'radioSelect', 'hierarchical']),\n    showPartiallySelected: PropTypes.bool,\n    onCheckboxChange: PropTypes.func,\n    readOnly: PropTypes.bool,\n    clientId: PropTypes.string,\n  }\n\n  handleCheckboxChange = e => {\n    const { mode, id, onCheckboxChange } = this.props\n\n    if (mode === 'simpleSelect' || mode === 'radioSelect') {\n      onCheckboxChange(id, true)\n    } else {\n      const {\n        target: { checked },\n      } = e\n      onCheckboxChange(id, checked)\n    }\n    e.stopPropagation()\n    e.nativeEvent.stopImmediatePropagation()\n  }\n\n  render() {\n    const { mode, title, label, id, partial, checked } = this.props\n    const { value, disabled, showPartiallySelected, readOnly, clientId } = this.props\n    const nodeLabelProps = { className: 'node-label' }\n\n    // in case of simple select mode, there is no checkbox, so we need to handle the click via the node label\n    // but not if the control is in readOnly or disabled state\n    const shouldRegisterClickHandler = mode === 'simpleSelect' && !readOnly && !disabled\n\n    if (shouldRegisterClickHandler) {\n      nodeLabelProps.onClick = this.handleCheckboxChange\n    }\n\n    const sharedProps = { id, value, checked, disabled, readOnly, tabIndex: -1 }\n\n    return (\n      <label title={title || label} htmlFor={id}>\n        {mode === 'radioSelect' ? (\n          <RadioButton name={clientId} className=\"radio-item\" onChange={this.handleCheckboxChange} {...sharedProps} />\n        ) : (\n          <Checkbox\n            name={id}\n            className={cx('checkbox-item', { 'simple-select': mode === 'simpleSelect' })}\n            indeterminate={showPartiallySelected && partial}\n            onChange={this.handleCheckboxChange}\n            {...sharedProps}\n          />\n        )}\n        <span {...nodeLabelProps}>{label}</span>\n      </label>\n    )\n  }\n}\n\nexport default NodeLabel\n","import cn from 'classnames/bind'\nimport PropTypes from 'prop-types'\nimport React, { PureComponent } from 'react'\nimport styles from './index.css'\n\nconst cx = cn.bind(styles)\n\nclass Toggle extends PureComponent {\n  static propTypes = {\n    expanded: PropTypes.bool,\n    isLeaf: PropTypes.bool,\n    onNodeToggle: PropTypes.func,\n    id: PropTypes.string,\n  }\n\n  onToggle = e => {\n    e.stopPropagation()\n    e.nativeEvent.stopImmediatePropagation()\n    this.props.onNodeToggle(this.props.id)\n  }\n\n  onKeyDown = e => {\n    if (e.key === 'Enter' || e.keyCode === 32) {\n      this.props.onNodeToggle(this.props.id)\n      e.preventDefault()\n    }\n  }\n\n  render() {\n    const { expanded, isLeaf } = this.props\n    if (isLeaf) return null\n\n    const toggleCx = cx('toggle', { expanded, collapsed: !expanded })\n    return (\n      <i\n        role=\"button\"\n        tabIndex={-1}\n        className={toggleCx}\n        onClick={this.onToggle}\n        onKeyDown={this.onKeyDown}\n        aria-hidden\n      />\n    )\n  }\n}\n\nexport default Toggle\n","import cn from 'classnames/bind'\nimport PropTypes from 'prop-types'\nimport React, { PureComponent } from 'react'\n\nimport { getDataset, isEmpty } from '../utils'\nimport Actions from './actions'\nimport NodeLabel from './node-label'\nimport Toggle from './toggle'\n\nimport styles from './index.css'\n\nconst cx = cn.bind(styles)\n\nconst isLeaf = children => isEmpty(children)\n\nconst getNodeCx = props => {\n  const {\n    keepTreeOnSearch,\n    keepChildrenOnSearch,\n    _children,\n    matchInChildren,\n    matchInParent,\n    disabled,\n    partial,\n    hide,\n    className,\n    showPartiallySelected,\n    readOnly,\n    checked,\n    _focused: focused,\n  } = props\n\n  return cx(\n    'node',\n    {\n      leaf: isLeaf(_children),\n      tree: !isLeaf(_children),\n      disabled,\n      hide,\n      'match-in-children': keepTreeOnSearch && matchInChildren,\n      'match-in-parent': keepTreeOnSearch && keepChildrenOnSearch && matchInParent,\n      partial: showPartiallySelected && partial,\n      readOnly,\n      checked,\n      focused,\n    },\n    className\n  )\n}\n\nclass TreeNode extends PureComponent {\n  static propTypes = {\n    _id: PropTypes.string.isRequired,\n    _depth: PropTypes.number,\n    _children: PropTypes.array,\n    actions: PropTypes.array,\n    className: PropTypes.string,\n    title: PropTypes.string,\n    label: PropTypes.string.isRequired,\n    value: PropTypes.string.isRequired,\n    checked: PropTypes.bool,\n    expanded: PropTypes.bool,\n    disabled: PropTypes.bool,\n    partial: PropTypes.bool,\n    dataset: PropTypes.object,\n    keepTreeOnSearch: PropTypes.bool,\n    keepChildrenOnSearch: PropTypes.bool,\n    searchModeOn: PropTypes.bool,\n    onNodeToggle: PropTypes.func,\n    onAction: PropTypes.func,\n    onCheckboxChange: PropTypes.func,\n    mode: PropTypes.oneOf(['multiSelect', 'simpleSelect', 'radioSelect', 'hierarchical']),\n    showPartiallySelected: PropTypes.bool,\n    readOnly: PropTypes.bool,\n    clientId: PropTypes.string,\n  }\n\n  getAriaAttributes = () => {\n    const { _children, _depth, checked, disabled, expanded, readOnly, mode, partial } = this.props\n    const attributes = {}\n\n    attributes.role = mode === 'simpleSelect' ? 'option' : 'treeitem'\n    attributes['aria-disabled'] = disabled || readOnly\n    attributes['aria-selected'] = checked\n    if (mode !== 'simpleSelect') {\n      attributes['aria-checked'] = partial ? 'mixed' : checked\n      attributes['aria-level'] = (_depth || 0) + 1\n      attributes['aria-expanded'] = _children && (expanded ? 'true' : 'false')\n    }\n    return attributes\n  }\n\n  render() {\n    const {\n      mode,\n      keepTreeOnSearch,\n      _id,\n      _children,\n      dataset,\n      _depth,\n      expanded,\n      title,\n      label,\n      partial,\n      checked,\n      value,\n      disabled,\n      actions,\n      onAction,\n      searchModeOn,\n      onNodeToggle,\n      onCheckboxChange,\n      showPartiallySelected,\n      readOnly,\n      clientId,\n    } = this.props\n    const liCx = getNodeCx(this.props)\n    const style = keepTreeOnSearch || !searchModeOn ? { paddingLeft: `${(_depth || 0) * 20}px` } : {}\n\n    const liId = `${_id}_li`\n\n    return (\n      <li className={liCx} style={style} id={liId} {...getDataset(dataset)} {...this.getAriaAttributes()}>\n        <Toggle isLeaf={isLeaf(_children)} expanded={expanded} id={_id} onNodeToggle={onNodeToggle} />\n        <NodeLabel\n          title={title}\n          label={label}\n          id={_id}\n          partial={partial}\n          checked={checked}\n          value={value}\n          disabled={disabled}\n          mode={mode}\n          onCheckboxChange={onCheckboxChange}\n          showPartiallySelected={showPartiallySelected}\n          readOnly={readOnly}\n          clientId={clientId}\n        />\n        <Actions actions={actions} onAction={onAction} id={_id} readOnly={readOnly} />\n      </li>\n    )\n  }\n}\n\nexport default TreeNode\n","import InfiniteScroll from 'react-infinite-scroll-component'\nimport PropTypes from 'prop-types'\nimport React, { Component } from 'react'\n\nimport TreeNode from '../tree-node'\n\nconst shouldRenderNode = (node, searchModeOn, data) => {\n  if (searchModeOn || node.expanded) return true\n\n  const parent = node._parent && data.get(node._parent)\n  // if it has a parent, then check parent's state.\n  // otherwise root nodes are always rendered\n  return !parent || parent.expanded\n}\n\nclass Tree extends Component {\n  static propTypes = {\n    data: PropTypes.object,\n    keepTreeOnSearch: PropTypes.bool,\n    keepChildrenOnSearch: PropTypes.bool,\n    searchModeOn: PropTypes.bool,\n    onChange: PropTypes.func,\n    onNodeToggle: PropTypes.func,\n    onAction: PropTypes.func,\n    onCheckboxChange: PropTypes.func,\n    mode: PropTypes.oneOf(['multiSelect', 'simpleSelect', 'radioSelect', 'hierarchical']),\n    showPartiallySelected: PropTypes.bool,\n    pageSize: PropTypes.number,\n    readOnly: PropTypes.bool,\n    clientId: PropTypes.string,\n    activeDescendant: PropTypes.string,\n  }\n\n  static defaultProps = {\n    pageSize: 100,\n  }\n\n  constructor(props) {\n    super(props)\n\n    this.currentPage = 1\n    this.computeInstanceProps(props, true)\n\n    this.state = {\n      items: this.allVisibleNodes.slice(0, this.props.pageSize),\n    }\n  }\n\n  componentWillReceiveProps = nextProps => {\n    const { activeDescendant } = nextProps\n    const hasSameActiveDescendant = activeDescendant === this.props.activeDescendant\n    this.computeInstanceProps(nextProps, !hasSameActiveDescendant)\n    this.setState({ items: this.allVisibleNodes.slice(0, this.currentPage * this.props.pageSize) }, () => {\n      if (hasSameActiveDescendant) return\n      const { scrollableTarget } = this.state\n      const activeLi = activeDescendant && document && document.getElementById(activeDescendant)\n      if (activeLi && scrollableTarget) {\n        scrollableTarget.scrollTop = activeLi.offsetTop - (scrollableTarget.clientHeight - activeLi.clientHeight) / 2\n      }\n    })\n  }\n\n  componentDidMount = () => {\n    this.setState({ scrollableTarget: this.node.parentNode })\n  }\n\n  computeInstanceProps = (props, checkActiveDescendant) => {\n    this.allVisibleNodes = this.getNodes(props)\n    this.totalPages = Math.ceil(this.allVisibleNodes.length / this.props.pageSize)\n    if (checkActiveDescendant && props.activeDescendant) {\n      const currentId = props.activeDescendant.replace(/_li$/, '')\n      const focusIndex = this.allVisibleNodes.findIndex(n => n.key === currentId) + 1\n      this.currentPage = focusIndex > 0 ? Math.ceil(focusIndex / this.props.pageSize) : 1\n    }\n  }\n\n  getNodes = props => {\n    const {\n      data,\n      keepTreeOnSearch,\n      keepChildrenOnSearch,\n      searchModeOn,\n      mode,\n      showPartiallySelected,\n      readOnly,\n      onAction,\n      onChange,\n      onCheckboxChange,\n      onNodeToggle,\n      activeDescendant,\n      clientId,\n    } = props\n    const items = []\n    data.forEach(node => {\n      if (shouldRenderNode(node, searchModeOn, data)) {\n        items.push(\n          <TreeNode\n            keepTreeOnSearch={keepTreeOnSearch}\n            keepChildrenOnSearch={keepChildrenOnSearch}\n            key={node._id}\n            {...node}\n            searchModeOn={searchModeOn}\n            onChange={onChange}\n            onCheckboxChange={onCheckboxChange}\n            onNodeToggle={onNodeToggle}\n            onAction={onAction}\n            mode={mode}\n            showPartiallySelected={showPartiallySelected}\n            readOnly={readOnly}\n            clientId={clientId}\n            activeDescendant={activeDescendant}\n          />\n        )\n      }\n    })\n    return items\n  }\n\n  hasMore = () => this.currentPage < this.totalPages\n\n  loadMore = () => {\n    this.currentPage = this.currentPage + 1\n    const nextItems = this.allVisibleNodes.slice(0, this.currentPage * this.props.pageSize)\n    this.setState({ items: nextItems })\n  }\n\n  setNodeRef = node => {\n    this.node = node\n  }\n\n  getAriaAttributes = () => {\n    const { mode } = this.props\n\n    const attributes = {\n      /* https://www.w3.org/TR/wai-aria-1.1/#select\n       * https://www.w3.org/TR/wai-aria-1.1/#tree */\n      role: mode === 'simpleSelect' ? 'listbox' : 'tree',\n      'aria-multiselectable': /multiSelect|hierarchical/.test(mode),\n    }\n\n    return attributes\n  }\n\n  render() {\n    const { searchModeOn } = this.props\n\n    return (\n      <ul className={`root ${searchModeOn ? 'searchModeOn' : ''}`} ref={this.setNodeRef} {...this.getAriaAttributes()}>\n        {this.state.scrollableTarget && (\n          <InfiniteScroll\n            dataLength={this.state.items.length}\n            next={this.loadMore}\n            hasMore={this.hasMore()}\n            loader={<span className=\"searchLoader\">Loading...</span>}\n            scrollableTarget={this.state.scrollableTarget}\n          >\n            {this.state.items}\n          </InfiniteScroll>\n        )}\n      </ul>\n    )\n  }\n}\n\nexport default Tree\n","import partial from 'array.partial'\n\nconst identity = c => c\n\nexport default (node, childProp = 'children', childSelector = identity) =>\n  partial(node[childProp], c => childSelector(c).checked) || node[childProp].some(c => childSelector(c).partial)\n","import getPartialState from './getPartialState'\n\nimport { isEmpty } from '../utils'\n\n/**\n * Converts a nested node into an associative array with pointers to child and parent nodes\n * Given:\n```\nconst tree = [\n  {\n    label: 'item1',\n    value: 'value1',\n    children: [\n      {\n        label: 'item1-1',\n        value: 'value1-1',\n        children: [\n          {\n            label: 'item1-1-1',\n            value: 'value1-1-1'\n          },\n          {\n            label: 'item1-1-2',\n            value: 'value1-1-2'\n          }\n        ]\n      },\n      {\n        label: 'item1-2',\n        value: 'value1-2'\n      }\n    ]\n  },\n  {\n    label: 'item2',\n    value: 'value2',\n    children: [\n      {\n        label: 'item2-1',\n        value: 'value2-1',\n        children: [\n          {\n            label: 'item2-1-1',\n            value: 'value2-1-1'\n          },\n          {\n            label: 'item2-1-2',\n            value: 'value2-1-2'\n          },\n          {\n            label: 'item2-1-3',\n            value: 'item2-1-3',\n            children: [\n              {\n                label: 'item2-1-3-1',\n                value: 'value2-1-3-1'\n              }\n            ]\n          }\n        ]\n      },\n      {\n        label: 'item2-2',\n        value: 'value2-2'\n      }\n    ]\n  }\n]\n```\n * results in\n```\n{\n  \"0\": {\n    _id: \"0\",\n    _parent: null,\n    _children: [\n      \"0-0\",\n      \"0-1\"\n    ],\n    label: \"item1\",\n    value: \"value1\"\n  },\n  \"1\": {\n    _id: \"1\",\n    _parent: null,\n    _children: [\n      \"1-0\",\n      \"1-1\"\n    ],\n    label: \"item2\",\n    value: \"value2\"\n  },\n  \"0-0\": {\n    _id: \"0-0\",\n    _parent: \"0\",\n    _children: [\n      \"0-0-0\",\n      \"0-0-1\"\n    ],\n    label: \"item1-1\",\n    value: \"value1-1\"\n  },\n  \"0-1\": {\n    _id: \"0-1\",\n    _parent: \"0\",\n    label: \"item1-2\",\n    value: \"value1-2\"\n  },\n  \"0-0-0\": {\n    _id: \"0-0-0\",\n    _parent: \"0-0\",\n    label: \"item1-1-1\",\n    value: \"value1-1-1\"\n  },\n  \"0-0-1\": {\n    _id: \"0-0-1\",\n    _parent: \"0-0\",\n    label: \"item1-1-2\",\n    value: \"value1-1-2\"\n  },\n  \"1-0\": {\n    _id: \"1-0\",\n    _parent: \"1\",\n    _children: [\n      \"1-0-0\",\n      \"1-0-1\",\n      \"1-0-2\"\n    ],\n    label: \"item2-1\",\n    value: \"value2-1\"\n  },\n  \"1-1\": {\n    _id: \"1-1\",\n    _parent: \"1\",\n    label: \"item2-2\",\n    value: \"value2-2\"\n  },\n  \"1-0-0\": {\n    _id: \"1-0-0\",\n    _parent: \"1-0\",\n    label: \"item2-1-1\",\n    value: \"value2-1-1\"\n  },\n  \"1-0-1\": {\n    _id: \"1-0-1\",\n    _parent: \"1-0\",\n    label: \"item2-1-2\",\n    value: \"value2-1-2\"\n  },\n  \"1-0-2\": {\n    _id: \"1-0-2\",\n    _parent: \"1-0\",\n    _children: [\n      \"1-0-2-0\"\n    ],\n    label: \"item2-1-3\",\n    value: \"value2-1-3\"\n  },\n  \"1-0-2-0\": {\n    _id: \"1-0-2-0\",\n    _parent: \"1-0-2\",\n    label: \"item2-1-3-1\",\n    value: \"value2-1-3-1\"\n  }\n}\n```\n * @param  {[type]} tree              The incoming tree object\n * @param  {[bool]} simple            Whether its in Single select mode (simple dropdown)\n * @param  {[bool]} radio             Whether its in Radio select mode (radio dropdown)\n * @param  {[bool]} showPartialState  Whether to show partially checked state\n * @param  {[string]} rootPrefixId    The prefix to use when setting root node ids\n * @return {object}                   The flattened list\n */\nfunction flattenTree({ tree, simple, radio, showPartialState, hierarchical, rootPrefixId }) {\n  const forest = Array.isArray(tree) ? tree : [tree]\n\n  // eslint-disable-next-line no-use-before-define\n  return walkNodes({\n    nodes: forest,\n    simple,\n    radio,\n    showPartialState,\n    hierarchical,\n    rootPrefixId,\n  })\n}\n\n/**\n * If the node didn't specify anything on its own\n * figure out the initial state based on parent\n * @param {object} node           [current node]\n * @param {object} parent         [node's immediate parent]\n * @param {bool}   inheritChecked [if checked should be inherited]\n */\nfunction setInitialStateProps(node, parent = {}, inheritChecked = true) {\n  const stateProps = inheritChecked ? ['checked', 'disabled'] : ['disabled']\n  for (let index = 0; index < stateProps.length; index++) {\n    const prop = stateProps[index]\n\n    // if and only if, node doesn't explicitly define a prop, grab it from parent\n    if (node[prop] === undefined && parent[prop] !== undefined) {\n      node[prop] = parent[prop]\n    }\n  }\n}\n\nfunction walkNodes({\n  nodes,\n  parent,\n  depth = 0,\n  simple,\n  radio,\n  showPartialState,\n  hierarchical,\n  rootPrefixId,\n  _rv = { list: new Map(), defaultValues: [], singleSelectedNode: null },\n}) {\n  const single = simple || radio\n  nodes.forEach((node, i) => {\n    node._depth = depth\n\n    if (parent) {\n      node._id = node.id || `${parent._id}-${i}`\n      node._parent = parent._id\n      parent._children.push(node._id)\n    } else {\n      node._id = node.id || `${rootPrefixId ? `${rootPrefixId}-${i}` : i}`\n    }\n\n    if (single && node.checked) {\n      if (_rv.singleSelectedNode) {\n        node.checked = false\n      } else {\n        _rv.singleSelectedNode = node\n      }\n    }\n\n    if (single && node.isDefaultValue && _rv.singleSelectedNode && !_rv.singleSelectedNode.isDefaultValue) {\n      // Default value has precedence, uncheck previous value\n      _rv.singleSelectedNode.checked = false\n      _rv.singleSelectedNode = null\n    }\n\n    if (node.isDefaultValue && (!single || _rv.defaultValues.length === 0)) {\n      _rv.defaultValues.push(node._id)\n      node.checked = true\n      if (single) {\n        _rv.singleSelectedNode = node\n      }\n    }\n\n    if (!hierarchical || radio) setInitialStateProps(node, parent, !radio)\n\n    _rv.list.set(node._id, node)\n    if (!simple && node.children) {\n      node._children = []\n      walkNodes({\n        nodes: node.children,\n        parent: node,\n        depth: depth + 1,\n        radio,\n        showPartialState,\n        hierarchical,\n        _rv,\n      })\n\n      if (showPartialState && !node.checked) {\n        node.partial = getPartialState(node)\n\n        // re-check if all children are checked. if so, check thyself\n        if (!single && !isEmpty(node.children) && node.children.every(c => c.checked)) {\n          node.checked = true\n        }\n      }\n\n      node.children = undefined\n    }\n  })\n\n  return _rv\n}\n\nexport default flattenTree\n","import { isEmpty } from '../utils'\n\nconst markSubTreeVisited = (node, visited, getItemById) => {\n  visited[node._id] = true\n  if (!isEmpty(node._children)) {\n    node._children.forEach(c => markSubTreeVisited(getItemById(c), visited, getItemById))\n  }\n}\n\nconst getNodesMatching = (tree, nodePredicate) => {\n  const nodes = []\n  const visited = {}\n\n  tree.forEach((node, key) => {\n    if (visited[key]) return\n\n    if (nodePredicate(node, key, visited)) {\n      nodes.push(node)\n    }\n\n    visited[key] = true\n  })\n\n  return nodes\n}\n\nconst getVisibleNodes = (tree, getItemById, markSubTreeOnNonExpanded) =>\n  getNodesMatching(tree, (node, key, visited) => {\n    if (markSubTreeOnNonExpanded && node._children && node._children.length && node.expanded !== true) {\n      markSubTreeVisited(node, visited, getItemById)\n    }\n    return !node.hide\n  })\n\nconst nodeVisitor = {\n  getNodesMatching,\n  getVisibleNodes,\n  markSubTreeVisited,\n}\nexport default nodeVisitor\n","import nodeVisitor from './nodeVisitor'\nimport { getTagId } from '../tag'\n\nconst Keys = {\n  Up: 'ArrowUp',\n  Down: 'ArrowDown',\n  Left: 'ArrowLeft',\n  Right: 'ArrowRight',\n  Enter: 'Enter',\n  Home: 'Home',\n  PageUp: 'PageUp',\n  End: 'End',\n  PageDown: 'PageDown',\n}\n\nexport const NavActions = {\n  None: 'None',\n  FocusPrevious: 'FocusPrevious',\n  FocusNext: 'FocusNext',\n  FocusParent: 'FocusParent',\n  FocusFirst: 'FocusFirst',\n  FocusLast: 'FocusLast',\n  ToggleExpanded: 'ToggleExpanded',\n  ToggleChecked: 'ToggleChecked',\n}\n\nexport const FocusActionNames = new Set([\n  NavActions.FocusPrevious,\n  NavActions.FocusNext,\n  NavActions.FocusParent,\n  NavActions.FocusFirst,\n  NavActions.FocusLast,\n])\n\nconst validTriggerOpenKeys = [Keys.Up, Keys.Down, Keys.Home, Keys.PageUp, Keys.End, Keys.PageDown]\nconst validKeys = validTriggerOpenKeys.concat([Keys.Left, Keys.Right, Keys.Enter])\n\nconst isValidKey = (key, isOpen) => {\n  const keysToCheck = isOpen ? validKeys : validTriggerOpenKeys\n  return keysToCheck.indexOf(key) > -1\n}\n\nconst isMatchingEvent = (key, keys, currentFocus, nonFocusKey) =>\n  keys.indexOf(key) > -1 || (!currentFocus && key === nonFocusKey)\n\nconst isFocusFirstEvent = (key, currentFocus) => isMatchingEvent(key, [Keys.Home, Keys.PageUp], currentFocus, Keys.Down)\n\nconst isFocusLastEvent = (key, currentFocus) => isMatchingEvent(key, [Keys.End, Keys.PageDown], currentFocus, Keys.Up)\n\nconst isReverseTraverseAction = action =>\n  isMatchingEvent(action, [NavActions.FocusPrevious, NavActions.FocusLast], true)\n\nconst isEdgeTraverseAction = action => isMatchingEvent(action, [NavActions.FocusFirst, NavActions.FocusLast], true)\n\nconst getLeftNavAction = (currentFocus, key) => {\n  if (!currentFocus || key !== Keys.Left) return NavActions.None\n\n  if (currentFocus.expanded === true) {\n    return NavActions.ToggleExpanded\n  }\n  if (currentFocus._parent) {\n    return NavActions.FocusParent\n  }\n\n  return NavActions.None\n}\n\nconst getRightNavAction = (currentFocus, key) => {\n  if (!currentFocus || !currentFocus._children || key !== Keys.Right) {\n    return NavActions.None\n  }\n\n  return currentFocus.expanded !== true ? NavActions.ToggleExpanded : NavActions.FocusNext\n}\n\nconst getRelativeAction = (currentFocus, key) => {\n  if (!currentFocus) return NavActions.None\n  switch (key) {\n    case Keys.Up:\n      return NavActions.FocusPrevious\n    case Keys.Down:\n      return NavActions.FocusNext\n    case Keys.Enter:\n      return NavActions.ToggleChecked\n    default:\n      return NavActions.None\n  }\n}\n\nconst getAction = (currentFocus, key) => {\n  let action\n  if (key === Keys.Left) {\n    action = getLeftNavAction(currentFocus, key)\n  } else if (key === Keys.Right) {\n    action = getRightNavAction(currentFocus, key)\n  } else if (isFocusFirstEvent(key, currentFocus)) {\n    action = NavActions.FocusFirst\n  } else if (isFocusLastEvent(key, currentFocus)) {\n    action = NavActions.FocusLast\n  } else {\n    action = getRelativeAction(currentFocus, key)\n  }\n  return action\n}\n\nconst getParentFocus = (prevFocus, getNodeById) =>\n  prevFocus && prevFocus._parent ? getNodeById(prevFocus._parent) : prevFocus\n\nconst getRelativeNeighborsFocus = (sortedNodes, prevFocus) => {\n  const nextIndex = sortedNodes.indexOf(prevFocus) + 1\n  if (nextIndex % sortedNodes.length === 0) {\n    return sortedNodes[0]\n  }\n  return sortedNodes[nextIndex]\n}\n\nconst getRelativeFocus = (sortedNodes, prevFocus, action) => {\n  if (!sortedNodes || sortedNodes.length === 0) {\n    return prevFocus\n  }\n\n  let focus = prevFocus\n  if (isEdgeTraverseAction(action)) {\n    ;[focus] = sortedNodes\n  } else if ([NavActions.FocusPrevious, NavActions.FocusNext].indexOf(action) > -1) {\n    focus = getRelativeNeighborsFocus(sortedNodes, prevFocus)\n  }\n  return focus\n}\n\nconst getNextFocus = (tree, prevFocus, action, getNodeById, markSubTreeOnNonExpanded) => {\n  if (action === NavActions.FocusParent) {\n    return getParentFocus(prevFocus, getNodeById)\n  }\n  if (!FocusActionNames.has(action)) {\n    return prevFocus\n  }\n\n  let nodes = nodeVisitor.getVisibleNodes(tree, getNodeById, markSubTreeOnNonExpanded)\n  if (isReverseTraverseAction(action)) {\n    nodes = nodes.reverse()\n  }\n\n  return getRelativeFocus(nodes, prevFocus, action)\n}\n\nconst getNextFocusAfterTagDelete = (deletedId, prevTags, tags, fallback) => {\n  // Sets new focus to next tag or returns fallback\n  let index = prevTags && prevTags.findIndex(t => t._id === deletedId)\n  if (index < 0 || !tags.length) return fallback\n\n  index = tags.length > index ? index : tags.length - 1\n  const newFocusId = tags[index]._id\n  const focusNode = document.getElementById(getTagId(newFocusId))\n  if (focusNode) {\n    return focusNode.firstElementChild || fallback\n  }\n  return fallback\n}\n\nconst handleFocusNavigationkey = (tree, action, prevFocus, getNodeById, markSubTreeOnNonExpanded) => {\n  const newFocus = keyboardNavigation.getNextFocus(tree, prevFocus, action, getNodeById, markSubTreeOnNonExpanded)\n  if (prevFocus && newFocus && prevFocus._id !== newFocus._id) {\n    prevFocus._focused = false\n  }\n  if (newFocus) {\n    newFocus._focused = true\n    return newFocus._id\n  }\n  return prevFocus && prevFocus._id\n}\n\nconst handleToggleNavigationkey = (action, prevFocus, readOnly, onToggleChecked, onToggleExpanded) => {\n  if (action === NavActions.ToggleChecked && !readOnly && !(prevFocus.readOnly || prevFocus.disabled)) {\n    onToggleChecked(prevFocus._id, prevFocus.checked !== true)\n  } else if (action === NavActions.ToggleExpanded) {\n    onToggleExpanded(prevFocus._id)\n  }\n  return prevFocus && prevFocus._id\n}\n\nconst keyboardNavigation = {\n  isValidKey,\n  getAction,\n  getNextFocus,\n  getNextFocusAfterTagDelete,\n  handleFocusNavigationkey,\n  handleToggleNavigationkey,\n}\n\nexport default keyboardNavigation\n","import getPartialState from './getPartialState'\nimport { isEmpty } from '../utils'\nimport flattenTree from './flatten-tree'\nimport nodeVisitor from './nodeVisitor'\nimport keyboardNavigation, { FocusActionNames } from './keyboardNavigation'\n\nclass TreeManager {\n  constructor({ data, mode, showPartiallySelected, rootPrefixId, searchPredicate }) {\n    this._src = data\n    this.simpleSelect = mode === 'simpleSelect'\n    this.radioSelect = mode === 'radioSelect'\n    this.hierarchical = mode === 'hierarchical'\n    this.searchPredicate = searchPredicate\n    const { list, defaultValues, singleSelectedNode } = flattenTree({\n      tree: JSON.parse(JSON.stringify(data)),\n      simple: this.simpleSelect,\n      radio: this.radioSelect,\n      showPartialState: showPartiallySelected,\n      hierarchical: this.hierarchical,\n      rootPrefixId,\n    })\n    this.tree = list\n    this.defaultValues = defaultValues\n    this.showPartialState = !this.hierarchical && showPartiallySelected\n    this.searchMaps = new Map()\n\n    if ((this.simpleSelect || this.radioSelect) && singleSelectedNode) {\n      // Remembers initial check on single select dropdowns\n      this.currentChecked = singleSelectedNode._id\n    }\n  }\n\n  getNodeById(id) {\n    return this.tree.get(id)\n  }\n\n  getMatches(searchTerm) {\n    if (this.searchMaps.has(searchTerm)) {\n      return this.searchMaps.get(searchTerm)\n    }\n\n    let proximity = -1\n    let closestMatch = searchTerm\n    this.searchMaps.forEach((m, key) => {\n      if (searchTerm.startsWith(key) && key.length > proximity) {\n        proximity = key.length\n        closestMatch = key\n      }\n    })\n\n    const matches = []\n\n    const addOnMatch = this._getAddOnMatch(matches, searchTerm)\n\n    if (closestMatch !== searchTerm) {\n      const superMatches = this.searchMaps.get(closestMatch)\n      superMatches.forEach(key => addOnMatch(this.getNodeById(key)))\n    } else {\n      this.tree.forEach(addOnMatch)\n    }\n\n    this.searchMaps.set(searchTerm, matches)\n    return matches\n  }\n\n  addParentsToTree(id, tree) {\n    if (id !== undefined) {\n      const node = this.getNodeById(id)\n      this.addParentsToTree(node._parent, tree)\n      node.hide = node._isMatch ? node.hide : true\n      node.matchInChildren = true\n      tree.set(id, node)\n    }\n  }\n\n  addChildrenToTree(ids, tree, matches) {\n    if (ids !== undefined) {\n      ids.forEach(id => {\n        if (matches && matches.includes(id)) {\n          // if a child is found by search anyways, don't display it as a child here\n          return\n        }\n        const node = this.getNodeById(id)\n        node.matchInParent = true\n        tree.set(id, node)\n        this.addChildrenToTree(node._children, tree)\n      })\n    }\n  }\n\n  filterTree(searchTerm, keepTreeOnSearch, keepChildrenOnSearch) {\n    const matches = this.getMatches(searchTerm.toLowerCase())\n\n    const matchTree = new Map()\n\n    matches.forEach(m => {\n      const node = this.getNodeById(m)\n      node.hide = false\n\n      // add a marker to tell `addParentsToTree` to not hide this node; even if it's an ancestor node\n      node._isMatch = true\n\n      if (keepTreeOnSearch) {\n        // add parent nodes first or else the tree won't be rendered in correct hierarchy\n        this.addParentsToTree(node._parent, matchTree)\n      }\n      matchTree.set(m, node)\n      if (keepTreeOnSearch && keepChildrenOnSearch) {\n        // add children nodes after a found match\n        this.addChildrenToTree(node._children, matchTree, matches)\n      }\n    })\n\n    const allNodesHidden = matches.length === 0\n\n    // we store a local reference so that components can use it in subsequent renders\n    // this is the least intrusive way of fixing #190\n    this.matchTree = matchTree\n\n    return { allNodesHidden, tree: matchTree }\n  }\n\n  restoreNodes() {\n    this.tree.forEach(node => {\n      node.hide = false\n    })\n\n    return this.tree\n  }\n\n  restoreDefaultValues() {\n    this.defaultValues.forEach(id => {\n      this.setNodeCheckedState(id, true)\n    })\n\n    return this.tree\n  }\n\n  togglePreviousChecked(id, checked) {\n    const prevChecked = this.currentChecked\n\n    // if id is same as previously selected node, then do nothing (since it's state is already set correctly by setNodeCheckedState)\n    // but if they ar not same, then toggle the previous one\n    if (prevChecked && prevChecked !== id) this.getNodeById(prevChecked).checked = false\n\n    this.currentChecked = checked ? id : null\n  }\n\n  setNodeCheckedState(id, checked) {\n    const node = this.getNodeById(id)\n    node.checked = checked\n\n    // TODO: this can probably be combined with the same check in the else block. investigate in a separate release.\n    if (this.showPartialState) {\n      node.partial = false\n    }\n\n    if (this.simpleSelect) {\n      this.togglePreviousChecked(id, checked)\n    } else if (this.radioSelect) {\n      this.togglePreviousChecked(id, checked)\n      if (this.showPartialState) {\n        this.partialCheckParents(node)\n      }\n      if (!checked) {\n        this.unCheckParents(node)\n      }\n    } else {\n      if (!this.hierarchical) this.toggleChildren(id, checked)\n\n      if (this.showPartialState) {\n        this.partialCheckParents(node)\n      }\n\n      if (!this.hierarchical && !checked) {\n        this.unCheckParents(node)\n      }\n    }\n  }\n\n  /**\n   * Walks up the tree unchecking parent nodes\n   * @param  {[type]} node [description]\n   * @return {[type]}      [description]\n   */\n  unCheckParents(node) {\n    let parent = node._parent\n    while (parent) {\n      const next = this.getNodeById(parent)\n      next.checked = false\n      next.partial = getPartialState(next, '_children', this.getNodeById.bind(this))\n      parent = next._parent\n    }\n  }\n\n  /**\n   * Walks up the tree setting partial state on parent nodes\n   * @param  {[type]} node [description]\n   * @return {[type]}      [description]\n   */\n  partialCheckParents(node) {\n    let parent = node._parent\n    while (parent) {\n      const next = this.getNodeById(parent)\n      next.checked = next._children.every(c => this.getNodeById(c).checked)\n      next.partial = getPartialState(next, '_children', this.getNodeById.bind(this))\n      parent = next._parent\n    }\n  }\n\n  toggleChildren(id, state) {\n    const node = this.getNodeById(id)\n    node.checked = state\n\n    if (this.showPartialState) {\n      node.partial = false\n    }\n\n    if (!isEmpty(node._children)) {\n      node._children.forEach(id => this.toggleChildren(id, state))\n    }\n  }\n\n  toggleNodeExpandState(id) {\n    const node = this.getNodeById(id)\n    node.expanded = !node.expanded\n    if (!node.expanded) this.collapseChildren(node)\n    return this.tree\n  }\n\n  collapseChildren(node) {\n    node.expanded = false\n    if (!isEmpty(node._children)) {\n      node._children.forEach(c => this.collapseChildren(this.getNodeById(c)))\n    }\n  }\n\n  get tags() {\n    if (this.radioSelect || this.simpleSelect) {\n      if (this.currentChecked) {\n        return [this.getNodeById(this.currentChecked)]\n      }\n      return []\n    }\n\n    return nodeVisitor.getNodesMatching(this.tree, (node, key, visited) => {\n      if (node.checked && !this.hierarchical) {\n        // Parent node, so no need to walk children\n        nodeVisitor.markSubTreeVisited(node, visited, id => this.getNodeById(id))\n      }\n      return node.checked\n    })\n  }\n\n  getTreeAndTags() {\n    return { tree: this.tree, tags: this.tags }\n  }\n\n  handleNavigationKey(currentFocus, tree, key, readOnly, markSubTreeOnNonExpanded, onToggleChecked, onToggleExpanded) {\n    const prevFocus = currentFocus && this.getNodeById(currentFocus)\n    const getNodeById = id => this.getNodeById(id)\n    const action = keyboardNavigation.getAction(prevFocus, key)\n\n    if (FocusActionNames.has(action)) {\n      const newFocus = keyboardNavigation.handleFocusNavigationkey(\n        tree,\n        action,\n        prevFocus,\n        getNodeById,\n        markSubTreeOnNonExpanded\n      )\n      return newFocus\n    }\n\n    if (!prevFocus || !tree.has(prevFocus._id)) {\n      // No current focus or not visible\n      return currentFocus\n    }\n\n    return keyboardNavigation.handleToggleNavigationkey(action, prevFocus, readOnly, onToggleChecked, onToggleExpanded)\n  }\n\n  _getAddOnMatch(matches, searchTerm) {\n    let isMatch = (node, term) => node.label.toLowerCase().indexOf(term) >= 0\n    if (typeof this.searchPredicate === 'function') {\n      isMatch = this.searchPredicate\n    }\n\n    return node => {\n      if (isMatch(node, searchTerm)) {\n        matches.push(node._id)\n      }\n    }\n  }\n}\n\nexport default TreeManager\n","/*!\n * React Dropdown Tree Select\n * A lightweight, fast and highly customizable tree select component.\n * Hrusikesh Panda <hrusikesh.panda@dowjones.com>\n * Copyright (c) 2017 Dow Jones, Inc. <support@dowjones.com> (http://dowjones.com)\n * license MIT\n * see https://github.com/dowjones/react-dropdown-tree-select\n */\nimport cn from 'classnames/bind'\nimport PropTypes from 'prop-types'\nimport React, { Component } from 'react'\n\nimport { isOutsideClick, clientIdGenerator } from './utils'\nimport Input from './input'\nimport Trigger from './trigger'\nimport Tree from './tree'\nimport TreeManager from './tree-manager'\nimport keyboardNavigation from './tree-manager/keyboardNavigation'\n\nimport styles from './index.css'\nimport { getAriaLabel } from './a11y'\n\nconst cx = cn.bind(styles)\n\nclass DropdownTreeSelect extends Component {\n  static propTypes = {\n    data: PropTypes.oneOfType([PropTypes.object, PropTypes.array]).isRequired,\n    clearSearchOnChange: PropTypes.bool,\n    keepTreeOnSearch: PropTypes.bool,\n    keepChildrenOnSearch: PropTypes.bool,\n    keepOpenOnSelect: PropTypes.bool,\n    texts: PropTypes.shape({\n      placeholder: PropTypes.string,\n      noMatches: PropTypes.string,\n      label: PropTypes.string,\n      labelRemove: PropTypes.string,\n    }),\n    showDropdown: PropTypes.oneOf(['default', 'initial', 'always']),\n    className: PropTypes.string,\n    onChange: PropTypes.func,\n    onAction: PropTypes.func,\n    onNodeToggle: PropTypes.func,\n    onFocus: PropTypes.func,\n    onBlur: PropTypes.func,\n    mode: PropTypes.oneOf(['multiSelect', 'simpleSelect', 'radioSelect', 'hierarchical']),\n    showPartiallySelected: PropTypes.bool,\n    disabled: PropTypes.bool,\n    readOnly: PropTypes.bool,\n    id: PropTypes.string,\n    searchPredicate: PropTypes.func,\n  }\n\n  static defaultProps = {\n    onFocus: () => {},\n    onBlur: () => {},\n    onChange: () => {},\n    texts: {},\n    showDropdown: 'default',\n  }\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      searchModeOn: false,\n      currentFocus: undefined,\n    }\n    this.clientId = props.id || clientIdGenerator.get(this)\n  }\n\n  initNewProps = ({ data, mode, showDropdown, showPartiallySelected, searchPredicate }) => {\n    this.treeManager = new TreeManager({\n      data,\n      mode,\n      showPartiallySelected,\n      rootPrefixId: this.clientId,\n      searchPredicate,\n    })\n    // Restore focus-state\n    const currentFocusNode = this.state.currentFocus && this.treeManager.getNodeById(this.state.currentFocus)\n    if (currentFocusNode) {\n      currentFocusNode._focused = true\n    }\n    this.setState(prevState => ({\n      showDropdown: /initial|always/.test(showDropdown) || prevState.showDropdown === true,\n      ...this.treeManager.getTreeAndTags(),\n    }))\n  }\n\n  resetSearchState = () => {\n    // clear the search criteria and avoid react controlled/uncontrolled warning\n    this.searchInput.value = ''\n    return {\n      tree: this.treeManager.restoreNodes(), // restore the tree to its pre-search state\n      searchModeOn: false,\n      allNodesHidden: false,\n    }\n  }\n\n  componentWillMount() {\n    this.initNewProps(this.props)\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('click', this.handleOutsideClick, false)\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.initNewProps(nextProps)\n  }\n\n  handleClick = (e, callback) => {\n    this.setState(prevState => {\n      // keep dropdown active when typing in search box\n      const showDropdown = this.props.showDropdown === 'always' || this.keepDropdownActive || !prevState.showDropdown\n\n      // register event listeners only if there is a state change\n      if (showDropdown !== prevState.showDropdown) {\n        if (showDropdown) {\n          document.addEventListener('click', this.handleOutsideClick, false)\n        } else {\n          document.removeEventListener('click', this.handleOutsideClick, false)\n        }\n      }\n\n      if (showDropdown) this.props.onFocus()\n      else this.props.onBlur()\n\n      return !showDropdown ? { showDropdown, ...this.resetSearchState() } : { showDropdown }\n    }, callback)\n  }\n\n  handleOutsideClick = e => {\n    if (this.props.showDropdown === 'always' || !isOutsideClick(e, this.node)) {\n      return\n    }\n\n    this.handleClick()\n  }\n\n  onInputChange = value => {\n    const { allNodesHidden, tree } = this.treeManager.filterTree(\n      value,\n      this.props.keepTreeOnSearch,\n      this.props.keepChildrenOnSearch\n    )\n    const searchModeOn = value.length > 0\n\n    this.setState({\n      tree,\n      searchModeOn,\n      allNodesHidden,\n    })\n  }\n\n  onTagRemove = (id, isKeyboardEvent) => {\n    const { tags: prevTags } = this.state\n    this.onCheckboxChange(id, false, tags => {\n      if (!isKeyboardEvent) return\n\n      keyboardNavigation.getNextFocusAfterTagDelete(id, prevTags, tags, this.searchInput).focus()\n    })\n  }\n\n  onNodeToggle = id => {\n    this.treeManager.toggleNodeExpandState(id)\n    const tree = this.state.searchModeOn ? this.treeManager.matchTree : this.treeManager.tree\n    this.setState({ tree })\n    typeof this.props.onNodeToggle === 'function' && this.props.onNodeToggle(this.treeManager.getNodeById(id))\n  }\n\n  onCheckboxChange = (id, checked, callback) => {\n    const { mode, keepOpenOnSelect } = this.props\n    this.treeManager.setNodeCheckedState(id, checked)\n    let tags = this.treeManager.tags\n    const isSingleSelect = ['simpleSelect', 'radioSelect'].indexOf(mode) > -1\n    const showDropdown = isSingleSelect && !keepOpenOnSelect ? false : this.state.showDropdown\n\n    if (!tags.length) {\n      this.treeManager.restoreDefaultValues()\n      tags = this.treeManager.tags\n    }\n\n    const tree = this.state.searchModeOn ? this.treeManager.matchTree : this.treeManager.tree\n    const nextState = {\n      tree,\n      tags,\n      showDropdown,\n    }\n\n    if ((isSingleSelect && !showDropdown) || this.props.clearSearchOnChange) {\n      Object.assign(nextState, this.resetSearchState())\n    }\n\n    if (isSingleSelect && !showDropdown) {\n      document.removeEventListener('click', this.handleOutsideClick, false)\n    }\n\n    this.setState(nextState, () => {\n      callback && callback(tags)\n    })\n    this.props.onChange(this.treeManager.getNodeById(id), tags)\n  }\n\n  onAction = (nodeId, action) => {\n    this.props.onAction(this.treeManager.getNodeById(nodeId), action)\n  }\n\n  onInputFocus = () => {\n    this.keepDropdownActive = true\n  }\n\n  onInputBlur = () => {\n    this.keepDropdownActive = false\n  }\n\n  onTrigger = e => {\n    this.handleClick(e, () => {\n      // If the dropdown is shown after key press, focus the input\n      if (this.state.showDropdown) {\n        this.searchInput.focus()\n      }\n    })\n  }\n\n  onKeyboardKeyDown = e => {\n    const { readOnly, mode } = this.props\n    const { showDropdown, tags, searchModeOn, currentFocus } = this.state\n    const tm = this.treeManager\n    const tree = searchModeOn ? tm.matchTree : tm.tree\n\n    if (!showDropdown && (keyboardNavigation.isValidKey(e.key, false) || /^\\w$/i.test(e.key))) {\n      // Triggers open of dropdown and retriggers event\n      e.persist()\n      this.handleClick(null, () => this.onKeyboardKeyDown(e))\n      if (/\\w/i.test(e.key)) return\n    } else if (showDropdown && keyboardNavigation.isValidKey(e.key, true)) {\n      const newFocus = tm.handleNavigationKey(\n        currentFocus,\n        tree,\n        e.key,\n        readOnly,\n        !searchModeOn,\n        this.onCheckboxChange,\n        this.onNodeToggle\n      )\n      if (newFocus !== currentFocus) {\n        this.setState({ currentFocus: newFocus })\n      }\n    } else if (showDropdown && ['Escape', 'Tab'].indexOf(e.key) > -1) {\n      if (mode === 'simpleSelect' && tree.has(currentFocus)) {\n        this.onCheckboxChange(currentFocus, true)\n      } else {\n        // Triggers close\n        this.keepDropdownActive = false\n        this.handleClick()\n      }\n      return\n    } else if (e.key === 'Backspace' && tags.length && this.searchInput.value.length === 0) {\n      const lastTag = tags.pop()\n      this.onCheckboxChange(lastTag._id, false)\n    } else {\n      return\n    }\n    e.preventDefault()\n  }\n\n  getAriaAttributes = () => {\n    const { mode, texts } = this.props\n\n    if (mode !== 'radioSelect') return {}\n\n    return {\n      role: 'radiogroup',\n      ...getAriaLabel(texts.label),\n    }\n  }\n\n  render() {\n    const { disabled, readOnly, mode, texts } = this.props\n    const { showDropdown, currentFocus, tags } = this.state\n\n    const activeDescendant = currentFocus ? `${currentFocus}_li` : undefined\n\n    const commonProps = { disabled, readOnly, activeDescendant, texts, mode, clientId: this.clientId }\n\n    return (\n      <div\n        id={this.clientId}\n        className={cx(this.props.className, 'react-dropdown-tree-select')}\n        ref={node => {\n          this.node = node\n        }}\n      >\n        <div\n          className={cx(\n            'dropdown',\n            { 'simple-select': mode === 'simpleSelect' },\n            { 'radio-select': mode === 'radioSelect' }\n          )}\n        >\n          <Trigger onTrigger={this.onTrigger} showDropdown={showDropdown} {...commonProps} tags={tags}>\n            <Input\n              inputRef={el => {\n                this.searchInput = el\n              }}\n              tags={tags}\n              onInputChange={this.onInputChange}\n              onFocus={this.onInputFocus}\n              onBlur={this.onInputBlur}\n              onTagRemove={this.onTagRemove}\n              onKeyDown={this.onKeyboardKeyDown}\n              {...commonProps}\n            />\n          </Trigger>\n          {showDropdown && (\n            <div className=\"dropdown-content\" {...this.getAriaAttributes()}>\n              {this.state.allNodesHidden ? (\n                <span className=\"no-matches\">{texts.noMatches || 'No matches found'}</span>\n              ) : (\n                <Tree\n                  data={this.state.tree}\n                  keepTreeOnSearch={this.props.keepTreeOnSearch}\n                  keepChildrenOnSearch={this.props.keepChildrenOnSearch}\n                  searchModeOn={this.state.searchModeOn}\n                  onAction={this.onAction}\n                  onCheckboxChange={this.onCheckboxChange}\n                  onNodeToggle={this.onNodeToggle}\n                  mode={mode}\n                  showPartiallySelected={this.props.showPartiallySelected}\n                  {...commonProps}\n                />\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default DropdownTreeSelect\n","import styled from 'styled-components'\n\nimport { Colors } from '../styling'\nimport { FlexDiv } from './FlexDiv'\n\nexport const FlexRow = styled(FlexDiv)`\n  flex-direction: row;\n  justify-content: space-between;\n  border-bottom: 1px solid ${Colors.greyMiddle};\n  padding: 0.1rem 0 0.1rem 0;\n`\n","import { LocationDescriptor } from 'history'\nimport React from 'react'\nimport { Link, LinkProps, Route } from 'react-router-dom'\nimport resolvePathname from 'resolve-pathname'\n\ninterface IRelativeLinkProps extends LinkProps {\n  to: LocationDescriptor\n  from?: string\n}\n\nexport const RelativeLink: React.FC<IRelativeLinkProps> = ({\n  to,\n  from,\n  ...linkProps\n}) => (\n  <Route\n    children={({ location }) => (\n      <Link\n        to={resolveLocation(to, from || `${location.pathname}/`)}\n        {...linkProps}\n      />\n    )}\n  />\n)\n\nexport function resolveLocation(to: LocationDescriptor, from: string) {\n  if (typeof to === 'string') {\n    return resolvePathname(to, from)\n  }\n  const resolved = resolvePathname(to.pathname || '', from)\n  return { ...to, pathname: resolved }\n}\n","import { Star } from '@material-ui/icons'\nimport React from 'react'\nimport styled from 'styled-components'\n\nimport { Icon } from '../../../atoms/Icon'\nimport { Colors } from '../../../styling'\n\nconst StyledOrderStarIndicator = styled.div`\n  display: inline-block;\n  position: absolute;\n  right: 3.8rem;\n  top: 0;\n`\n\nexport const OrderStarIndicator: React.FC = () => {\n  return (\n    <StyledOrderStarIndicator data-testid=\"OrderStarIndicator\">\n      <Icon icon={Star} color={Colors.orange} />\n    </StyledOrderStarIndicator>\n  )\n}\n","import { Trans } from '@lingui/macro'\nimport Color from 'color'\nimport React from 'react'\nimport { Element } from 'react-scroll'\nimport styled from 'styled-components'\n\nimport {\n  DeliveryTypeEnum,\n  FOrderTickerFragment,\n} from '../../../graph/generated'\nimport { formatAddress } from '../../../helpers/formats'\nimport { Colors, Radiuses } from '../../../styling'\nimport { CustomerIdentity } from '../atoms/CustomerIdentity'\nimport { DeliveryTimeBadge } from '../atoms/DeliveryTimeBadge'\nimport { OrderStarIndicator } from '../atoms/OrderStarIndicator'\n\ninterface IOrderTickerProps {\n  order: FOrderTickerFragment\n  showBranch: boolean\n  isCancelled: boolean\n  onClick(): void\n}\n\nconst OrderTickerStyled = styled(Element)`\n  text-align: left;\n  cursor: pointer;\n  &:hover {\n    background-color: ${Color(Colors.turquoise)\n      .alpha(0.05)\n      .string()};\n  }\n  &:active {\n    background-color: ${Color(Colors.turquoise)\n      .alpha(0.2)\n      .string()};\n  }\n`\n\nconst OrderTickerMainContentStyled = styled.div`\n  display: flex;\n  flex-wrap: nowrap;\n  justify-content: space-between;\n  padding: 0.4rem;\n`\n\nconst DeliveryTimeBadgeContainerStyled = styled.div`\n  flex: 0 0 2rem;\n`\nconst AddressDisplayContainerStyled = styled.div`\n  flex: 1 0;\n  padding: 0 0 0 0.5rem;\n`\nconst CustomerIdentityContainerStyled = styled.div`\n  flex: 1 0;\n  padding: 0 0 0 0.5rem;\n`\nconst PriceContainerStyled = styled.div`\n  flex: 0 0 3.5rem;\n  text-align: right;\n  position: relative;\n`\nconst PaidMarkStyled = styled.div`\n  position: absolute;\n  top: 0;\n  right: 0;\n  left: 0;\n  bottom: 0;\n\n  &:after {\n    content: '';\n    position: absolute;\n    top: 0.1rem;\n    right: -0.3rem;\n    left: 0.9rem;\n    bottom: 0.3rem;\n    border-top: 2px solid ${Colors.orange};\n    transform: rotate(13deg);\n    transform-origin: 0% 0%;\n    opacity: 0.7;\n  }\n`\nconst PaidTextStyled = styled.div`\n  color: ${Colors.orange};\n`\n\nexport const ToBranchContainerStyled = styled.div`\n  padding: 0.3rem 0.6rem;\n  display: inline-block;\n  border-top-left-radius: ${Radiuses.Card};\n  background-color: ${Colors.green};\n  color: ${Colors.white};\n`\n\nconst ToPickupLabel = styled.div`\n  font-style: italic;\n  color: ${Colors.violet};\n`\n\nexport const OrderTicker: React.FC<IOrderTickerProps> = ({\n  order,\n  isCancelled,\n  showBranch,\n  onClick,\n}) => {\n  const getOrderDestination = () => {\n    if (order.sector !== null) {\n      return order.sector.name\n    }\n    if (\n      order.deliveryType &&\n      order.deliveryType.enum === DeliveryTypeEnum.Pickup\n    ) {\n      return (\n        <ToPickupLabel>\n          <Trans>To pickup</Trans>\n        </ToPickupLabel>\n      )\n    }\n    if (order.address.original) return order.address.original\n    return formatAddress(order.address)\n  }\n\n  return (\n    <OrderTickerStyled onClick={onClick} name={`order-${order.id}`}>\n      {showBranch && (\n        <ToBranchContainerStyled>\n          {order.companyBranch.name}\n        </ToBranchContainerStyled>\n      )}\n\n      <OrderTickerMainContentStyled>\n        <DeliveryTimeBadgeContainerStyled>\n          <DeliveryTimeBadge\n            deliverAt={order.deliverAt ? new Date(order.deliverAt) : null}\n            deliveredAt={order.deliveredAt ? new Date(order.deliveredAt) : null}\n            isCancelled={isCancelled}\n            isDelayed={order.delayedDeliveryTime !== null}\n          />\n        </DeliveryTimeBadgeContainerStyled>\n\n        <AddressDisplayContainerStyled>\n          {getOrderDestination()}\n        </AddressDisplayContainerStyled>\n\n        <CustomerIdentityContainerStyled>\n          <CustomerIdentity customer={order.customer} />\n        </CustomerIdentityContainerStyled>\n\n        <PriceContainerStyled>\n          {order.isPriority && <OrderStarIndicator />}\n          {order.totalSum.formattedValue}\n          {order.isPaidWithCard && (\n            <>\n              <PaidMarkStyled data-testid=\"PaidMark\" />\n              <PaidTextStyled>\n                <Trans>Paid</Trans>\n              </PaidTextStyled>\n            </>\n          )}\n        </PriceContainerStyled>\n      </OrderTickerMainContentStyled>\n    </OrderTickerStyled>\n  )\n}\n","import { MailOutline, Phone, SvgIconComponent } from '@material-ui/icons'\nimport React from 'react'\n\nimport { HorizontalSeparator } from '../../../atoms/HorizontalSeparator'\nimport { IconLine } from '../../../atoms/IconLine'\nimport { LinkStyled } from '../../../atoms/LinkStyled'\nimport { FEmailFragment, FPhoneFragment } from '../../../graph/generated'\n\ninterface IContactLinesProps {\n  phones: RoA<FPhoneFragment>\n  emails: RoA<FEmailFragment>\n}\n\ntype Contact = {\n  icon: SvgIconComponent\n  isMail: boolean\n  value: string\n} & (FPhoneFragment | FEmailFragment)\n\nexport const ContactLines: React.FC<IContactLinesProps> = ({\n  phones,\n  emails,\n}) => {\n  const renderClickableLink = (contact: Contact) =>\n    contact.isMail ? (\n      <LinkStyled href={`mailto:${contact.value}`}>{contact.value}</LinkStyled>\n    ) : (\n      <LinkStyled href={`tel:${contact.value.replace('/ /g', '')}`}>\n        {contact.value}\n      </LinkStyled>\n    )\n\n  const renderContact = (contact: Contact) => (\n    <IconLine icon={contact.icon} key={contact.value} labelMargin=\"0\">\n      <div title={contact.description || ''}>\n        {renderClickableLink(contact)}\n      </div>\n    </IconLine>\n  )\n  return (\n    <>\n      {(phones.length > 0 || emails.length > 0) && <HorizontalSeparator />}\n      {phones.map(phone =>\n        renderContact({\n          icon: Phone,\n          isMail: false,\n          value: phone.phone,\n          ...phone,\n        }),\n      )}\n      {emails.map(email =>\n        renderContact({\n          icon: MailOutline,\n          isMail: true,\n          value: email.email,\n          ...email,\n        }),\n      )}\n    </>\n  )\n}\n","import { Plural, SelectOrdinal, Trans } from '@lingui/react'\nimport React from 'react'\n\ninterface IProps {\n  current: number\n  total: number\n}\n\nexport const OrderCountLine: React.FC<IProps> = ({ current, total }) => (\n  <Trans>\n    It's customer's{' '}\n    <SelectOrdinal value={current} one=\"#st\" two=\"#nd\" few=\"#rd\" other=\"#th\" />{' '}\n    order <Plural value={total} one=\"\" other=\"from total of # orders\" />\n  </Trans>\n)\n","import React from 'react'\nimport styled from 'styled-components'\n\nimport { formatPrice } from '../../../helpers/formats'\nimport { Colors } from '../../../styling'\n\ninterface IProps {\n  label: string\n  price: number\n  highlight?: boolean\n}\n\nconst OrderWareLineWrap = styled.div`\n  display: flex;\n  justify-content: space-between;\n  padding-left: 3rem;\n`\n\nconst NameContainerStyled = styled.div`\n  flex: 1 0;\n  color: ${Colors.greyMiddle};\n`\nconst PriceContainerStyled = styled.div`\n  flex: 0 0 4.5rem;\n  text-align: right;\n  color: ${Colors.greyMiddle};\n`\n\nexport const OrderWarePriceLine: React.FC<IProps> = ({\n  label,\n  price,\n  highlight = false,\n}) => (\n  <OrderWareLineWrap>\n    <NameContainerStyled>{label}</NameContainerStyled>\n    <PriceContainerStyled>\n      {highlight ? <b>{formatPrice(price)}</b> : formatPrice(price)}\n    </PriceContainerStyled>\n  </OrderWareLineWrap>\n)\n","import React from 'react'\nimport styled from 'styled-components'\n\nimport { FOrderTotalsFragment } from '../../../graph/generated'\nimport { i18n } from '../../../i18n'\nimport { OrderWarePriceLine } from './OrderWarePriceLine'\n\ninterface IProps {\n  totals: FOrderTotalsFragment\n}\n\nconst StyledOrderDetailTotals = styled.div`\n  margin: 0 0 0 auto;\n  width: 20rem;\n  text-align: right;\n`\n\nexport const OrderDetailTotals: React.FC<IProps> = ({ totals }) => (\n  <StyledOrderDetailTotals>\n    <OrderWarePriceLine label={i18n.t`Tips`} price={totals.tip.value} />\n    <OrderWarePriceLine\n      label={i18n.t`Transport fee`}\n      price={totals.transportFee.value}\n    />\n    <OrderWarePriceLine\n      label={i18n.t`Covers price`}\n      price={totals.coverPrice.value}\n    />\n    <OrderWarePriceLine\n      label={i18n.t`Discount total`}\n      price={totals.totalDiscount.value * -1}\n    />\n    <OrderWarePriceLine\n      label={i18n.t`Extra charge`}\n      price={totals.extraCharge.value}\n    />\n    <OrderWarePriceLine\n      label={i18n.t`Total price`}\n      price={totals.totalSum.value}\n      highlight={true}\n    />\n  </StyledOrderDetailTotals>\n)\n","import React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(\"path\", {\n  d: \"M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z\"\n}), 'FormatListNumbered');","import { FormatListNumbered } from '@material-ui/icons'\nimport React from 'react'\nimport styled from 'styled-components'\n\nimport { IconLine } from '../../../atoms/IconLine'\nimport {\n  OrderOriginEnum,\n  QOrderDetailOrderOrigin,\n} from '../../../graph/generated'\nimport { Colors } from '../../../styling'\n\ninterface IProps {\n  displayedId: string\n  orderOrigin: QOrderDetailOrderOrigin\n}\n\nconst orderColorAccordingOrigin = ({ orderOrigin }: IProps) => {\n  switch (orderOrigin.enum) {\n    case OrderOriginEnum.DameJidlo:\n      return Colors.orange\n    default:\n      return Colors.greyLight\n  }\n}\n\nconst OrderOriginLabel = styled.div`\n  display: inline-block;\n  background: ${orderColorAccordingOrigin};\n  border-radius: 0.7rem;\n  margin: 0 0 0 1rem;\n  padding: 0.1rem 0.8rem;\n`\n\nexport const OrderIdLine: React.FC<IProps> = ({ displayedId, orderOrigin }) => (\n  <IconLine icon={FormatListNumbered} labelMargin=\"0\">\n    {displayedId}\n    <OrderOriginLabel orderOrigin={orderOrigin} displayedId={displayedId}>\n      {orderOrigin.code}\n    </OrderOriginLabel>\n  </IconLine>\n)\n","import React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(\"path\", {\n  d: \"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 9h-2V5h2v6zm0 4h-2v-2h2v2z\"\n}), 'Announcement');","import { Announcement } from '@material-ui/icons'\nimport React from 'react'\n\nimport { HorizontalSeparator } from '../../../atoms/HorizontalSeparator'\nimport { IconLine } from '../../../atoms/IconLine'\n\ninterface IOrderRuleLinesProps {\n  rules: RoA<string>\n}\n\nexport const OrderRuleLines: React.FC<IOrderRuleLinesProps> = ({\n  rules,\n  children,\n}) =>\n  rules.length > 0 || children ? (\n    <>\n      <HorizontalSeparator />\n      <IconLine icon={Announcement} labelMargin=\"0\">\n        {children}\n        <br />\n        {rules.join(', ')}\n      </IconLine>\n    </>\n  ) : null\n","import React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(\"path\", {\n  d: \"M16.24 7.76C15.07 6.59 13.54 6 12 6v6l-4.24 4.24c2.34 2.34 6.14 2.34 8.49 0 2.34-2.34 2.34-6.14-.01-8.48zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\"\n}), 'Timelapse');","import styled from 'styled-components'\n\nimport { Colors } from '../../../styling'\n\nexport const OrderTimeLabel = styled.div`\n  margin-left: 1rem;\n  display: inline-block;\n  color: ${Colors.greyMiddle};\n`\n","import { Trans } from '@lingui/macro'\nimport { Timelapse } from '@material-ui/icons'\nimport React from 'react'\nimport styled from 'styled-components'\n\nimport { IconLine } from '../../../atoms/IconLine'\nimport { QOrderDetailOrder } from '../../../graph/generated'\nimport { formatTimeWithoutTodayDate } from '../../../helpers/formats'\nimport { Colors } from '../../../styling'\nimport { OrderTimeLabel } from '../atoms/OrderTimeLabel'\n\ninterface IProps {\n  order: QOrderDetailOrder\n}\n\nconst DelayedDeliveryTimeLabel = styled.span`\n  font-weight: bold;\n  color: ${Colors.orange};\n`\n\nconst DelayedOrderTimeLabel = styled(OrderTimeLabel)`\n  color: ${Colors.orange};\n`\n\nexport const OrderStats: React.FC<IProps> = ({ order }) => {\n  const stats: ReactNode[] = []\n  if (order.delayedDeliveryTime) {\n    stats.push(\n      <div key=\"delayedDeliveryTime\">\n        <DelayedDeliveryTimeLabel>\n          {formatTimeWithoutTodayDate(order.delayedDeliveryTime)}\n        </DelayedDeliveryTimeLabel>\n        <DelayedOrderTimeLabel>\n          <Trans>Deliver at time</Trans>\n        </DelayedOrderTimeLabel>\n      </div>,\n    )\n  } else if (order.deliverAt) {\n    stats.push(\n      <div key=\"deliverAt\">\n        {formatTimeWithoutTodayDate(order.deliverAt)}\n        <OrderTimeLabel>\n          <Trans>Deliver on time</Trans>\n        </OrderTimeLabel>\n      </div>,\n    )\n  }\n\n  if (order.driver) {\n    const { firstName, lastName } = order.driver.user\n    stats.push(\n      <div key=\"driver\">\n        {`${firstName} ${lastName}`}\n        <OrderTimeLabel>\n          <Trans>Driver</Trans>\n        </OrderTimeLabel>\n      </div>,\n    )\n  }\n  if (stats.length === 0) {\n    return null\n  }\n  return (\n    <IconLine icon={Timelapse} labelMargin=\"0\">\n      {stats}\n    </IconLine>\n  )\n}\n","import { i18nMark } from '@lingui/core'\nimport { AccessTime } from '@material-ui/icons'\nimport React from 'react'\n\nimport { IconLine } from '../../../atoms/IconLine'\nimport {\n  FOrderTimingOrderTiming,\n  OrderStateCategoryEnum,\n} from '../../../graph/generated'\nimport { formatTimeWithoutTodayDate } from '../../../helpers/formats'\nimport { RM } from '../../../tools/ramda'\nimport { i18n } from '../../../i18n'\nimport { OrderTimeLabel } from '../atoms/OrderTimeLabel'\n\ninterface IProps {\n  orderTiming: RoA<FOrderTimingOrderTiming>\n}\n\nconst labelMap = {\n  [OrderStateCategoryEnum.NewOrders]: i18nMark('Created'),\n  [OrderStateCategoryEnum.Preparing]: i18nMark('Preparing'),\n  [OrderStateCategoryEnum.ReadyToDeliver]: i18nMark('Ready to deliver'),\n  [OrderStateCategoryEnum.OnWay]: i18nMark('On way'),\n  [OrderStateCategoryEnum.Finished]: i18nMark('Finished'),\n}\n\nexport const OrderTimeLine: React.FC<IProps> = ({ orderTiming }) => (\n  <IconLine icon={AccessTime} labelMargin=\"0\">\n    {RM.reject(\n      ({ createdAt, orderStateCategory }) =>\n        createdAt === null || !labelMap[orderStateCategory],\n      orderTiming,\n    ).map(timing => (\n      <div key={timing.orderStateCategory}>\n        {formatTimeWithoutTodayDate(timing.createdAt)}\n        <OrderTimeLabel>\n          {i18n._(labelMap[timing.orderStateCategory])}\n        </OrderTimeLabel>\n      </div>\n    ))}\n  </IconLine>\n)\n","import React from 'react'\nimport styled from 'styled-components'\n\nimport { formatPrice } from '../../../helpers/formats'\nimport { Colors } from '../../../styling'\n\ninterface IOrderWareLineProps {\n  code?: string\n  label: string\n  price: number\n}\n\nconst OrderWareLineWrap = styled.div`\n  display: flex;\n  justify-content: space-between;\n  padding-left: 3rem;\n`\nconst CodeContainerStyled = styled.div`\n  flex: 0 0 5rem;\n`\nconst NameContainerStyled = styled.div`\n  flex: 1 0;\n  color: ${Colors.black};\n`\nconst PriceContainerStyled = styled.div`\n  flex: 0 0 4.5rem;\n  text-align: right;\n  color: ${Colors.greyMiddle};\n`\n\nexport const OrderWareLine: React.FC<IOrderWareLineProps> = ({\n  code,\n  label,\n  price,\n}) => (\n  <OrderWareLineWrap>\n    <CodeContainerStyled>{code}</CodeContainerStyled>\n\n    <NameContainerStyled>{label}</NameContainerStyled>\n    <PriceContainerStyled>{formatPrice(price)}</PriceContainerStyled>\n  </OrderWareLineWrap>\n)\n","import React, { Fragment } from 'react'\n\nimport { QOrderDetailItems } from '../../../graph/generated'\nimport { OrderWareLine } from './OrderWareLine'\n\ninterface IOrderWareListProps {\n  orderWares: RoA<QOrderDetailItems>\n}\n\nexport const OrderWareList: React.FC<IOrderWareListProps> = ({\n  orderWares,\n}) => {\n  const renderWare = (orderWare: QOrderDetailItems) => (\n    <Fragment key={orderWare.id}>\n      <OrderWareLine\n        code={orderWare.recipe.code}\n        label={orderWare.recipe.nameLabel!}\n        price={orderWare.price.value}\n      />\n      <>\n        {orderWare.sidedishes.map(sidedish => (\n          <OrderWareLine\n            key={sidedish.id}\n            code={`+${sidedish.recipe.code}`}\n            label={sidedish.recipe.nameLabel!}\n            price={sidedish.price.value}\n          />\n        ))}\n      </>\n    </Fragment>\n  )\n  return <div>{orderWares.map(renderWare)}</div>\n}\n","import React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(\"path\", {\n  d: \"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z\"\n}), 'Menu');","import { Menu } from '@material-ui/icons'\nimport React from 'react'\nimport styled from 'styled-components'\n\nimport { SizerButton } from '../atoms/SizerButton'\nimport { Colors, Radiuses, Spacing } from '../styling'\nimport { TouchButton } from './TouchButton'\n\ninterface IProps {}\n\nconst StyledHamburgerMenu = styled.div`\n  position: relative;\n`\n\nconst PopupMenu = styled.div`\n  position: absolute;\n  bottom: 4rem;\n  left: 0;\n  background: ${Colors.white};\n  padding: ${Spacing.Small};\n  border: solid 1px ${Colors.greyLight};\n  border-radius: ${Radiuses.Card};\n  box-shadow: 2px 6px 21px -2px rgba(0, 0, 0, 0.75);\n  & > *:not(:last-child) {\n    margin-bottom: ${Spacing.Middle};\n  }\n`\n\nexport const HamburgerMenu: React.FC<IProps> = ({ children }) => {\n  const [isOpened, setIsOpened] = React.useState(false)\n  return React.Children.count(children) ? (\n    <StyledHamburgerMenu>\n      <SizerButton>\n        <TouchButton\n          icon={Menu}\n          disabled={children === null}\n          onClick={() => setIsOpened(!isOpened)}\n        />\n      </SizerButton>\n      {isOpened && <PopupMenu>{children}</PopupMenu>}\n    </StyledHamburgerMenu>\n  ) : null\n}\n","import { Trans } from '@lingui/macro'\nimport React from 'react'\n\nimport { Sizer } from '../../../atoms/Sizer'\nimport { useMCancelOrder } from '../../../graph/generated'\nimport { ConfirmButton } from '../../../molecules/ConfirmButton'\nimport { Spacing } from '../../../styling'\n\ninterface IProps {\n  orderId: ID\n}\n\nexport const OrderCancelButton: React.FC<IProps> = ({ orderId }) => {\n  const [cancelOrder] = useMCancelOrder()\n\n  return (\n    <Sizer width={Spacing.OrderFlowMenuButtonWidth}>\n      <ConfirmButton\n        confirmNode={<Trans>Really cancel?</Trans>}\n        onConfirm={() => {\n          cancelOrder({ orderId })\n        }}\n      >\n        <Trans>Cancel order</Trans>\n      </ConfirmButton>\n    </Sizer>\n  )\n}\n","import { Trans } from '@lingui/macro'\nimport React from 'react'\n\nimport { CanMutate } from '../../../atoms/CanMutate'\nimport { Sizer } from '../../../atoms/Sizer'\nimport { useMOrderChangeToPickup } from '../../../graph/generated'\nimport { ConfirmButton } from '../../../molecules/ConfirmButton'\nimport { Spacing } from '../../../styling'\n\ninterface IProps {\n  orderId: ID\n  isDelivery: boolean\n}\n\nexport const OrderDeliveryToPickup: React.FC<IProps> = ({\n  orderId,\n  isDelivery,\n}) => {\n  const [changeToPickup] = useMOrderChangeToPickup()\n  if (!isDelivery) {\n    return null\n  }\n  return (\n    <CanMutate mutationName=\"updateOrderDeliveryToPickup\">\n      <Sizer width={Spacing.OrderFlowMenuButtonWidth}>\n        <ConfirmButton\n          confirmNode={<Trans>Really change?</Trans>}\n          onConfirm={() => {\n            changeToPickup({ orderId })\n          }}\n        >\n          <Trans>Change to pickup</Trans>\n        </ConfirmButton>\n      </Sizer>\n    </CanMutate>\n  )\n}\n","import { SECOND } from '@speedlo/hooks'\nimport { cn } from '@speedlo/ui'\nimport React from 'react'\nimport styled from 'styled-components'\n\nimport { Sizer } from '../atoms/Sizer'\nimport { useConfirmWithTimeout } from '../hooks/useConfirmWithTimeout'\nimport { Colors, Spacing } from '../styling'\nimport { TouchButton } from './TouchButton'\n\ninterface IProps {\n  confirmNode: ReactNode | string\n  selectNode: ReactNode | string\n  initialColor?: Colors\n  confirmColor?: Colors\n  confirmDisableMs?: number\n  resetToInitialMs?: number\n  disabled?: boolean\n  onConfirm(): void\n}\n\nconst StyledSelectButton = styled.div`\n  display: grid;\n  grid-auto-flow: column;\n  grid-gap: 5px;\n\n  > * {\n    height: 100%;\n  }\n\n  button.flat-left {\n    border-top-left-radius: 0px;\n    border-bottom-left-radius: 0px;\n  }\n`\n\nexport const SelectButton: React.FC<IProps> = ({\n  confirmNode,\n  selectNode,\n  initialColor = Colors.greyMiddle,\n  confirmColor = Colors.red,\n  confirmDisableMs = 300,\n  resetToInitialMs = 30 * SECOND,\n  disabled,\n  children,\n  onConfirm,\n}) => {\n  const ref = React.useRef<HTMLButtonElement | null>(null)\n  const { confirming, onClick } = useConfirmWithTimeout({\n    confirmDisableMs,\n    resetToInitialMs,\n    onConfirm,\n    ref,\n  })\n\n  return (\n    <StyledSelectButton>\n      {confirming && selectNode}\n      <Sizer width={Spacing.OrderFlowMenuButtonWidth}>\n        <TouchButton\n          ref={ref}\n          onClick={onClick}\n          color={confirming ? confirmColor : initialColor}\n          className={cn({ 'flat-left': confirming })}\n          disabled={disabled}\n        >\n          {confirming ? confirmNode : children}\n        </TouchButton>\n      </Sizer>\n    </StyledSelectButton>\n  )\n}\n","import React from 'react'\n\nimport { SelectControl } from '../../../atoms/SelectControl'\nimport { FPaymentMethodFragment as FPaymentMethod } from '../../../graph/generated'\nimport { useDropdownSingle } from '../../../hooks/useDropdownSingle'\nimport { idProp } from '../../../tools/ramda'\n\ntype TProps = NoChildren & {\n  paymentMethods: RoA<FPaymentMethod>\n  selectedMethod: MaybeID\n  onSelection: (method: MaybeID) => void\n  inputStyles?: React.CSSProperties\n}\n\nexport const PaymentMethodDropdown: React.FC<TProps> = ({\n  paymentMethods,\n  selectedMethod,\n  onSelection,\n  inputStyles = {},\n  ...props\n}) => {\n  const selectProps = {\n    options: paymentMethods,\n    getOptionValue: idProp,\n    formatOptionLabel: (method: FPaymentMethod) =>\n      method.description || method.paymentGate.code,\n    ...props,\n  }\n\n  const dropdownProps = useDropdownSingle<FPaymentMethod>({\n    ...selectProps,\n    selected: selectedMethod,\n    onSelectionChange: onSelection,\n  })\n\n  return (\n    <SelectControl<FPaymentMethod>\n      styles={{\n        control: base => ({\n          ...base,\n          height: '100%',\n          margin: 0,\n          ...inputStyles,\n        }),\n      }}\n      {...dropdownProps}\n      {...selectProps}\n    />\n  )\n}\n","import { Trans } from '@lingui/macro'\nimport React from 'react'\n\nimport {\n  FPaymentMethodFragment as FPaymentMethod,\n  useMChangePaymentMethod,\n} from '../../../graph/generated'\nimport { useCanMutate } from '../../../hooks/useAccessGuard'\nimport { SelectButton } from '../../../molecules/SelectButton'\nimport { Radiuses } from '../../../styling'\nimport { RM } from '../../../tools/ramda'\nimport { PaymentMethodDropdown } from './PaymentMethodDropdown'\n\ninterface IProps {\n  orderId: ID\n  paymentMethods: RoA<FPaymentMethod>\n}\n\nexport const OrderPaymentMethod: React.FC<IProps> = ({\n  orderId,\n  paymentMethods,\n}) => {\n  const hasSomeMethod = paymentMethods.length > 0\n  const [changePaymentMethod] = useMChangePaymentMethod()\n  const canChangePaymentMethod = useCanMutate('updateOrderPaymentMethod')\n  const [selectedMethod, setSelectedMethod] = React.useState<MaybeID>(null)\n\n  React.useEffect(() => {\n    setSelectedMethod(() =>\n      hasSomeMethod ? RM.head(paymentMethods)!.id : null,\n    )\n  }, [hasSomeMethod, paymentMethods])\n\n  const onChangePaymentMethod = () => {\n    if (selectedMethod) {\n      changePaymentMethod({ orderId, paymentMethodId: selectedMethod })\n    }\n  }\n\n  if (!canChangePaymentMethod || !hasSomeMethod) {\n    return null\n  }\n\n  return (\n    <SelectButton\n      confirmNode={<Trans>Change</Trans>}\n      onConfirm={onChangePaymentMethod}\n      selectNode={\n        <PaymentMethodDropdown\n          paymentMethods={paymentMethods}\n          selectedMethod={selectedMethod}\n          onSelection={setSelectedMethod}\n          inputStyles={{\n            borderRadius: Radiuses.Button,\n            borderTopRightRadius: 0,\n            borderBottomRightRadius: 0,\n          }}\n        />\n      }\n    >\n      <Trans>Change payment method</Trans>\n    </SelectButton>\n  )\n}\n","import { Star } from '@material-ui/icons'\nimport React from 'react'\n\nimport { CanMutate } from '../../../atoms/CanMutate'\nimport { SizerButton } from '../../../atoms/SizerButton'\nimport { useMSetPriorityOrder } from '../../../graph/generated'\nimport { TouchButton } from '../../../molecules/TouchButton'\nimport { Colors } from '../../../styling'\n\ninterface IProps {\n  orderId: ID\n  isPriority: boolean\n}\n\nexport const OrderStarButton: React.FC<IProps> = ({ orderId, isPriority }) => {\n  const [setPriorityOrder] = useMSetPriorityOrder()\n\n  return (\n    <CanMutate mutationName=\"setPriorityOrder\">\n      <SizerButton>\n        <TouchButton\n          icon={Star}\n          iconColor={isPriority ? Colors.orange : Colors.white}\n          onClick={() => setPriorityOrder({ orderId, isPriority: !isPriority })}\n        />\n        >\n      </SizerButton>\n    </CanMutate>\n  )\n}\n","import { i18nMark } from '@lingui/core'\nimport React from 'react'\n\nimport { CanMutate } from '../../../atoms/CanMutate'\nimport { OrderStateEnum, useMOrderState } from '../../../graph/generated'\nimport { i18n } from '../../../i18n'\nimport { TouchButton } from '../../../molecules/TouchButton'\nimport { Colors, Spacing } from '../../../styling'\n\ninterface IProps {\n  orderId: ID\n  nextState: OrderStateEnum\n}\n\nconst stateLabels = {\n  [OrderStateEnum.Accepted]: i18nMark('Accept order'),\n  [OrderStateEnum.ReadyToDeliver]: i18nMark('Ready to deliver'),\n  [OrderStateEnum.Finished]: i18nMark('Finish order'),\n}\n\nexport const OrderStateButton: React.FC<IProps> = ({ orderId, nextState }) => {\n  const [updateOrderState] = useMOrderState()\n\n  return (\n    <CanMutate mutationName=\"addOrderState\">\n      <TouchButton\n        text={i18n._(stateLabels[nextState])}\n        color={\n          nextState === OrderStateEnum.ReadyToDeliver\n            ? Colors.greyMiddle\n            : Colors.green\n        }\n        width={`${Spacing.OrderFlowMenuButtonWidth}rem`}\n        onClick={() => {\n          updateOrderState({ orderId, state: nextState })\n        }}\n      />\n    </CanMutate>\n  )\n}\n","import { DirectionsCar } from '@material-ui/icons'\nimport React from 'react'\nimport { components } from 'react-select'\nimport { StylesConfig } from 'react-select/src/styles'\nimport styled from 'styled-components/macro'\n\nimport { Icon } from '../../../atoms/Icon'\nimport { SelectControl } from '../../../atoms/SelectControl'\nimport { FDriverFragment } from '../../../graph/generated'\nimport { formatFullName } from '../../../helpers/formats'\nimport { i18n } from '../../../i18n'\nimport { Colors, Radiuses, Spacing } from '../../../styling'\nimport { RM } from '../../../tools/ramda'\n\ntype TDriver = FDriverFragment\n\ninterface IProps {\n  drivers: RoA<TDriver>\n  selectedDriver: Maybe<TDriver>\n  isLoading: boolean\n  onSelect(driver: TDriver): void\n  onClear(): void\n  onReload(): void\n}\n\nconst StyledDriverName = styled.div`\n  margin: 0.1rem 0 0rem 0.2rem;\n  display: inline-block;\n  vertical-align: top;\n  font-size: 1.25rem;\n`\n\nconst StyledValueContainer = styled.div`\n  margin: 0 0 0 0.7rem;\n  display: flex;\n  pointer-events: none;\n  width: 80%;\n`\n\nconst textColor = { color: Colors.white }\n\nconst styles: StylesConfig = {\n  control: base => ({\n    ...base,\n    ...textColor,\n    background: Colors.green,\n    height: Spacing.ButtonHeight + Spacing.DefaultSizeUnit,\n    border: 'none',\n    borderWidth: 0,\n    borderRadius: Radiuses.Button,\n    margin: 0,\n  }),\n  menu: base => ({\n    ...base,\n  }),\n  valueContainer: base => ({\n    ...base,\n    ...textColor,\n  }),\n  singleValue: base => ({\n    ...base,\n    ...textColor,\n  }),\n  placeholder: base => ({\n    ...base,\n    ...textColor,\n    fontSize: '1.2rem',\n  }),\n  clearIndicator: base => ({\n    ...base,\n    color: Colors.white,\n  }),\n  indicatorSeparator: base => ({\n    ...base,\n    display: 'none',\n  }),\n}\n\nexport const OrderDriverSelect: React.FC<IProps> = ({\n  drivers,\n  selectedDriver,\n  isLoading,\n  onSelect,\n  onClear,\n  onReload,\n}) => (\n  <SelectControl<TDriver>\n    options={drivers as TDriver[]}\n    value={selectedDriver}\n    getOptionValue={RM.prop('id')}\n    isLoading={isLoading}\n    isSearchable={false}\n    isClearable={true}\n    placeholder=\"Deliver order\"\n    width={16}\n    styles={styles}\n    noOptionsMessage={() => i18n.t`No drivers available`}\n    onChange={driver => {\n      if (driver === null) {\n        onClear()\n      } else {\n        onSelect(driver as TDriver)\n      }\n    }}\n    onMenuOpen={onReload}\n    components={{\n      ValueContainer: props => (\n        <StyledValueContainer>\n          <Icon icon={DirectionsCar} fontSize={2} color={Colors.white} />\n          <components.ValueContainer {...props} />\n        </StyledValueContainer>\n      ),\n      DropdownIndicator: () => null,\n      ClearIndicator: components.ClearIndicator,\n    }}\n    formatOptionLabel={driver => (\n      <StyledDriverName>{`${formatFullName(driver)}`}</StyledDriverName>\n    )}\n    theme={theme => ({\n      ...theme,\n      blurInputOnSelect: false,\n      colors: {\n        ...theme.colors,\n        primary: Colors.greyMiddle,\n        primary25: Colors.greyLight,\n      },\n    })}\n  />\n)\n","import React from 'react'\n\nimport { CanMutate } from '../../../atoms/CanMutate'\nimport {\n  OrderStateCategoryEnum,\n  OrderStateEnum,\n  useMOrderState,\n  useMRemoveOrderDriver,\n  useMSelectOrderDriver,\n  useQOrderDrivers,\n} from '../../../graph/generated'\nimport { ARRAY_EMPTY } from '../../../helpers/form'\nimport { useCanQuery } from '../../../hooks/useAccessGuard'\nimport { OrderDriverSelect } from '../atoms/OrderDriverSelect'\n\ninterface IProps {\n  branchId: ID\n  orderId: ID\n  orderStateCategory: OrderStateCategoryEnum\n}\n\nexport const OrderStateDeliver: React.FC<IProps> = ({\n  branchId,\n  orderId,\n  orderStateCategory,\n}) => {\n  const canRead = useCanQuery('drivers')\n\n  const [deliverOrder] = useMOrderState()\n  const [selectDriver] = useMSelectOrderDriver()\n  const [removeDriver] = useMRemoveOrderDriver()\n\n  const { getStash, loading, refetch } = useQOrderDrivers(\n    { branchId: [branchId], orderId },\n    { skip: !canRead },\n  )\n\n  const stash = getStash(data => ({\n    drivers: data.drivers,\n    driver: data.order.driver,\n  }))\n\n  return (\n    <CanMutate mutationName=\"createUserDeliveringOrder\">\n      <OrderDriverSelect\n        drivers={stash ? stash.drivers : ARRAY_EMPTY}\n        selectedDriver={stash && stash.driver && stash.driver.user}\n        isLoading={loading}\n        onReload={refetch}\n        onClear={() => {\n          if (stash && stash.driver) {\n            removeDriver({ orderDriverId: stash.driver.id })\n          }\n        }}\n        onSelect={driver => {\n          selectDriver({ orderId, driverId: driver.id })\n          if (orderStateCategory !== OrderStateCategoryEnum.OnWay) {\n            deliverOrder({ orderId, state: OrderStateEnum.OnWay })\n          }\n        }}\n      />\n    </CanMutate>\n  )\n}\n","import React, { Children } from 'react'\nimport styled from 'styled-components/macro'\n\nimport { Spacing } from '../../../styling'\n\ninterface IProps {}\n\nconst StyledOrderStateFlowContainer = styled.div`\n  margin: 0 0 0 auto;\n  padding-left: ${Spacing.ButtonHeight + Spacing.DefaultSizeUnit};\n  text-align: right;\n\n  & .menu-item {\n    margin: 0 0 0 ${Spacing.Middle};\n    display: inline-block;\n    vertical-align: bottom;\n    text-align: left;\n    height: 100%;\n  }\n`\n\nexport const OrderStateFlowContainer: React.FC<IProps> = ({ children }) => (\n  <StyledOrderStateFlowContainer>\n    {Children.map(children, (child, idx) => (\n      <div className=\"menu-item\" key={idx}>\n        {child}\n      </div>\n    ))}\n  </StyledOrderStateFlowContainer>\n)\n","import React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(React.Fragment, null, React.createElement(\"path\", {\n  d: \"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\"\n}), React.createElement(\"path\", {\n  d: \"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z\"\n})), 'Schedule');","import { Schedule } from '@material-ui/icons'\nimport React from 'react'\n\nimport { CanMutate } from '../../../atoms/CanMutate'\nimport {\n  DeliveryTypeEnum,\n  useMOrderTimeNotification,\n} from '../../../graph/generated'\nimport { useSnackBar } from '../../../hooks/useSnackBar'\nimport { i18n } from '../../../i18n'\nimport { TouchButton } from '../../../molecules/TouchButton'\nimport { useTimeSelectionDialog } from '../hooks/useTimeSelectionDialog'\n\ninterface IProps {\n  orderId: ID\n  isDelivery: boolean\n}\n\nexport const OrderStateTimeNotification: React.FC<IProps> = ({\n  orderId,\n  isDelivery,\n}) => {\n  const [sendTimeNotification] = useMOrderTimeNotification()\n  const { enqueueSuccess } = useSnackBar()\n\n  const [dialog, { open }] = useTimeSelectionDialog({\n    deliveryType: isDelivery\n      ? DeliveryTypeEnum.Messenger\n      : DeliveryTypeEnum.Pickup,\n    title: isDelivery\n      ? i18n.t`Send expected time of delivery to customer (in minutes)`\n      : i18n.t`Send expected time of pickup to customer (in minutes)`,\n    async onConfirm(minutes, onSuccess) {\n      const result = await sendTimeNotification({ orderId, minutes })\n      if (result) {\n        onSuccess()\n        enqueueSuccess(\n          isDelivery\n            ? i18n.t`Expected time of delivery was set`\n            : i18n.t`Expected time of pickup was set`,\n        )\n      }\n    },\n  })\n\n  return (\n    <CanMutate mutationName=\"orderNotifyCustomer\">\n      <TouchButton icon={Schedule} onClick={open} />\n      {dialog}\n    </CanMutate>\n  )\n}\n","import { Trans } from '@lingui/macro'\nimport React from 'react'\n\nimport { useRoot } from '../../../atoms/RootProvider'\nimport { Sizer } from '../../../atoms/Sizer'\nimport { useMTransferOrder } from '../../../graph/generated'\nimport { useCanMutate } from '../../../hooks/useAccessGuard'\nimport { CompanyBranchDropdown } from '../../../molecules/CompanyBranchDropdown'\nimport { SelectButton } from '../../../molecules/SelectButton'\n\ntype TProps = NoChildren & {\n  orderId: ID\n}\n\nexport const OrderTransferToBranch: React.FC<TProps> = ({ orderId }) => {\n  const { user } = useRoot()\n  const [transferOrder] = useMTransferOrder()\n  const canTransferOrder = useCanMutate('transferOrder')\n  const [selectedBranch, setSelectedBranch] = React.useState<Maybe<ID>>(null)\n\n  const onTransferOrder = () => {\n    if (selectedBranch) {\n      transferOrder({ orderId, branchId: selectedBranch })\n    }\n  }\n\n  if (!canTransferOrder) {\n    return null\n  }\n\n  return (\n    <SelectButton\n      confirmNode={<Trans>Transfer</Trans>}\n      onConfirm={onTransferOrder}\n      selectNode={\n        <Sizer width={14}>\n          <CompanyBranchDropdown\n            branches={user.branches}\n            onSingleSelection={branch => branch && setSelectedBranch(branch.id)}\n          />\n        </Sizer>\n      }\n    >\n      <Trans>Transfer to branch</Trans>\n    </SelectButton>\n  )\n}\n","import React from 'react'\n\nimport { CardDock } from '../../../atoms/CardDock'\nimport {\n  DeliveryTypeEnum,\n  FPaymentMethodFragment as FPaymentMethod,\n  OrderStateCategoryEnum,\n  OrderStateEnum,\n  useQOrderState,\n} from '../../../graph/generated'\nimport { HamburgerMenu } from '../../../molecules/HamburgerMenu'\nimport { RM } from '../../../tools/ramda'\nimport { OrderCancelButton } from '../molecules/OrderCancelButton'\nimport { OrderDeliveryToPickup } from '../molecules/OrderDeliveryToPickup'\nimport { OrderPaymentMethod } from '../molecules/OrderPaymentMethod'\nimport { OrderStarButton } from '../molecules/OrderStarButton'\nimport { OrderStateButton } from '../molecules/OrderStateButton'\nimport { OrderStateDeliver } from '../molecules/OrderStateDeliver'\nimport { OrderStateFlowContainer } from '../molecules/OrderStateFlowContainer'\nimport { OrderStateTimeNotification } from '../molecules/OrderStateTimeNotification'\nimport { OrderTransferToBranch } from '../molecules/OrderTransferToBranch'\n\ninterface IProps {\n  orderId: ID\n  branchId: ID\n}\n\ninterface IStateProps extends IProps {\n  orderStateCategory: OrderStateCategoryEnum\n  paymentMethods: RoA<FPaymentMethod>\n  canCancel: boolean\n  canDeliver: boolean\n  isDelivery: boolean\n  isPriority: boolean\n}\n\nconst HamburgerMenuAtLeft: React.FC = ({ children }) => {\n  return (\n    <CardDock position=\"BottomLeft\">\n      <HamburgerMenu>{children}</HamburgerMenu>\n    </CardDock>\n  )\n}\n\nconst OrderStateNewOrder: React.FC<IStateProps> = props => (\n  <OrderStateFlowContainer>\n    <HamburgerMenuAtLeft>\n      {props.canCancel && <OrderCancelButton {...props} />}\n      <OrderDeliveryToPickup {...props} />\n      <OrderPaymentMethod {...props} />\n      <OrderTransferToBranch orderId={props.orderId} />\n    </HamburgerMenuAtLeft>\n    <OrderStateTimeNotification {...props} />\n    <OrderStateButton nextState={OrderStateEnum.Accepted} {...props} />\n  </OrderStateFlowContainer>\n)\n\nconst OrderStateAcceptedOrder: React.FC<IStateProps> = props => (\n  <OrderStateFlowContainer>\n    <HamburgerMenuAtLeft>\n      {props.canCancel && <OrderCancelButton {...props} />}\n      <OrderDeliveryToPickup {...props} />\n      <OrderPaymentMethod {...props} />\n      <OrderTransferToBranch orderId={props.orderId} />\n    </HamburgerMenuAtLeft>\n\n    <OrderStarButton {...props} />\n    <OrderStateTimeNotification {...props} />\n    {props.canDeliver && (\n      <OrderStateButton nextState={OrderStateEnum.ReadyToDeliver} {...props} />\n    )}\n    {props.canDeliver ? (\n      <OrderStateDeliver {...props} />\n    ) : (\n      <OrderStateButton nextState={OrderStateEnum.Finished} {...props} />\n    )}\n  </OrderStateFlowContainer>\n)\n\nconst OrderStateReadyToDeliverOrder: React.FC<IStateProps> = props => (\n  <OrderStateFlowContainer>\n    <HamburgerMenuAtLeft>\n      {props.canCancel && <OrderCancelButton {...props} />}\n      <OrderPaymentMethod {...props} />\n    </HamburgerMenuAtLeft>\n    <OrderStarButton {...props} />\n    {props.isDelivery ? (\n      <OrderStateDeliver {...props} />\n    ) : (\n      <OrderStateButton nextState={OrderStateEnum.Finished} {...props} />\n    )}\n  </OrderStateFlowContainer>\n)\n\nconst OrderStateOnWayOrder: React.FC<IStateProps> = props => (\n  <OrderStateFlowContainer>\n    <HamburgerMenuAtLeft>\n      {props.canCancel && <OrderCancelButton {...props} />}\n      <OrderPaymentMethod {...props} />\n    </HamburgerMenuAtLeft>\n    <OrderStateTimeNotification {...props} />\n    <OrderStateDeliver {...props} />\n    <OrderStateButton nextState={OrderStateEnum.Finished} {...props} />\n  </OrderStateFlowContainer>\n)\n\nconst OrderStateFinishedOrder: React.FC<IStateProps> = props => (\n  <OrderStateFlowContainer>\n    <HamburgerMenuAtLeft>\n      {props.canCancel && <OrderCancelButton {...props} />}\n      <OrderPaymentMethod {...props} />\n    </HamburgerMenuAtLeft>\n  </OrderStateFlowContainer>\n)\n\nexport const OrderStateFlow: React.FC<IProps> = ({ orderId, branchId }) => {\n  const { getStash } = useQOrderState({\n    orderId,\n    branchId,\n  })\n\n  const stash = getStash(RM.identity)\n\n  if (!stash) {\n    return null\n  }\n\n  const {\n    order,\n    companyBranch: { allowedCategories },\n  } = stash\n\n  const isDelivery =\n    order.deliveryType !== null &&\n    order.deliveryType.enum !== DeliveryTypeEnum.Pickup\n\n  const canDeliver =\n    isDelivery &&\n    (allowedCategories.includes(OrderStateCategoryEnum.OnWay) ||\n      allowedCategories.includes(OrderStateCategoryEnum.ReadyToDeliver))\n\n  const canCancel = order.isCancelable\n\n  const isPriority = order.isPriority\n\n  const stateProps: IStateProps = {\n    orderId,\n    branchId,\n    orderStateCategory: order.orderStateCategory,\n    paymentMethods: order.paymentMethods,\n    canCancel,\n    canDeliver,\n    isDelivery,\n    isPriority,\n  }\n  switch (order.orderStateCategory) {\n    case OrderStateCategoryEnum.NewOrders:\n      return <OrderStateNewOrder {...stateProps} />\n    case OrderStateCategoryEnum.Preparing:\n      return <OrderStateAcceptedOrder {...stateProps} />\n    case OrderStateCategoryEnum.ReadyToDeliver:\n      return <OrderStateReadyToDeliverOrder {...stateProps} />\n    case OrderStateCategoryEnum.OnWay:\n      return <OrderStateOnWayOrder {...stateProps} />\n    case OrderStateCategoryEnum.Finished:\n      return <OrderStateFinishedOrder {...stateProps} />\n    default:\n      return null\n  }\n}\n","import React from 'react'\nimport styled from 'styled-components/macro'\n\nimport { HorizontalSeparator } from '../../../atoms/HorizontalSeparator'\nimport { Loading } from '../../../atoms/Loading'\nimport { useQOrderDetail } from '../../../graph/generated'\nimport { ContactLines } from '../molecules/ContactLines'\nimport { NoteLine } from '../molecules/NoteLine'\nimport { OrderCountLine } from '../molecules/OrderCountLine'\nimport { OrderDetailTotals } from '../molecules/OrderDetailTotals'\nimport { OrderIdLine } from '../molecules/OrderIdLine'\nimport { OrderRuleLines } from '../molecules/OrderRuleLines'\nimport { OrderStats } from '../molecules/OrderStats'\nimport { OrderTimeLine } from '../molecules/OrderTimeLine'\nimport { OrderWareList } from '../molecules/OrderWareList'\nimport { OrderStateFlow } from './OrderStateFlow'\n\ntype TProps = NoChildren & {\n  orderId: string\n}\n\nconst StyledOrderDetail = styled.div`\n  padding: 0 0.5rem 0.5rem 1.1rem;\n`\n\nexport const OrderDetail = React.memo<TProps>(({ orderId }) => {\n  const { getStash } = useQOrderDetail({\n    orderId,\n  })\n\n  const order = getStash(data => data.order)\n\n  if (order === null) {\n    return <Loading />\n  }\n\n  return (\n    <>\n      <StyledOrderDetail>\n        <HorizontalSeparator />\n        <OrderWareList orderWares={order.items} />\n        <OrderDetailTotals totals={order} />\n        <OrderRuleLines rules={order.allAppliedRules}>\n          <OrderCountLine\n            current={order.customerOrdersCountCurrent}\n            total={order.customerOrdersCountTotal}\n          />\n        </OrderRuleLines>\n        <ContactLines\n          phones={order.customer.phones}\n          emails={order.customer.emails}\n        />\n        <NoteLine note={order.note} />\n        <HorizontalSeparator />\n        <OrderIdLine displayedId={order.id} orderOrigin={order.orderOrigin} />\n        <HorizontalSeparator />\n        <OrderTimeLine orderTiming={order.orderTiming} />\n        <OrderStats order={order} />\n      </StyledOrderDetail>\n      <OrderStateFlow orderId={orderId} branchId={order.companyBranch.id} />\n    </>\n  )\n})\n","import { observer } from 'mobx-react-lite'\nimport React from 'react'\nimport styled from 'styled-components'\n\nimport { FOrderTickerFragment } from '../../../graph/generated'\nimport { Colors, Radiuses } from '../../../styling'\nimport { useOrderListModel } from '../hooks/useOrderListModel'\nimport { OrderTicker } from '../molecules/OrderTicker'\nimport { OrderDetail } from '../organisms/OrderDetail'\n\ninterface IProps {\n  order: FOrderTickerFragment\n  showBranch: boolean\n  isCancelled: boolean\n  onToggleDetail?(): void\n}\n\nexport const OrderBoxStyled = styled.div`\n  background-color: ${Colors.white};\n  color: ${Colors.greyDarkest};\n  border-radius: ${Radiuses.Card};\n  margin-bottom: 0.5rem;\n  position: relative;\n`\n\nexport const OrderBox = observer<IProps>(\n  ({ order, showBranch, isCancelled, onToggleDetail }) => {\n    const orderListModel = useOrderListModel()\n\n    const orderId = order.id\n\n    const onClick = React.useCallback(() => {\n      orderListModel.toggleOrderDetail(orderId)\n      if (onToggleDetail) {\n        onToggleDetail()\n      }\n    }, [onToggleDetail, orderId, orderListModel])\n\n    const isDetailOpen = orderListModel.isOrderDetailOpen(orderId)\n\n    return (\n      <OrderBoxStyled id={`order-${orderId}`}>\n        <OrderTicker\n          order={order}\n          showBranch={showBranch}\n          isCancelled={isCancelled}\n          onClick={onClick}\n        />\n        {isDetailOpen && <OrderDetail orderId={orderId} />}\n      </OrderBoxStyled>\n    )\n  },\n)\n","import _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\n// A grid component using the following libs as inspiration.\n//\n// For the implementation:\n// - https://getbootstrap.com/docs/4.3/layout/grid/\n// - https://github.com/kristoferjoseph/flexboxgrid/blob/master/src/css/flexboxgrid.css\n// - https://github.com/roylee0704/react-flexbox-grid\n// - https://material.angularjs.org/latest/layout/introduction\n//\n// Follow this flexbox Guide to better understand the underlying model:\n// - https://css-tricks.com/snippets/css/a-guide-to-flexbox/\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport withStyles from '../styles/withStyles';\nimport requirePropFactory from '../utils/requirePropFactory';\nvar SPACINGS = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10];\nvar GRID_SIZES = ['auto', true, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12];\n\nfunction generateGrid(globalStyles, theme, breakpoint) {\n  var styles = {};\n  GRID_SIZES.forEach(function (size) {\n    var key = \"grid-\".concat(breakpoint, \"-\").concat(size);\n\n    if (size === true) {\n      // For the auto layouting\n      styles[key] = {\n        flexBasis: 0,\n        flexGrow: 1,\n        maxWidth: '100%'\n      };\n      return;\n    }\n\n    if (size === 'auto') {\n      styles[key] = {\n        flexBasis: 'auto',\n        flexGrow: 0,\n        maxWidth: 'none'\n      };\n      return;\n    } // Keep 7 significant numbers.\n\n\n    var width = \"\".concat(Math.round(size / 12 * 10e7) / 10e5, \"%\"); // Close to the bootstrap implementation:\n    // https://github.com/twbs/bootstrap/blob/8fccaa2439e97ec72a4b7dc42ccc1f649790adb0/scss/mixins/_grid.scss#L41\n\n    styles[key] = {\n      flexBasis: width,\n      flexGrow: 0,\n      maxWidth: width\n    };\n  }); // No need for a media query for the first size.\n\n  if (breakpoint === 'xs') {\n    _extends(globalStyles, styles);\n  } else {\n    globalStyles[theme.breakpoints.up(breakpoint)] = styles;\n  }\n}\n\nfunction getOffset(val) {\n  var div = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  var parse = parseFloat(val);\n  return \"\".concat(parse / div).concat(String(val).replace(String(parse), '') || 'px');\n}\n\nfunction generateGutter(theme, breakpoint) {\n  var styles = {};\n  SPACINGS.forEach(function (spacing) {\n    var themeSpacing = theme.spacing(spacing);\n\n    if (themeSpacing === 0) {\n      return;\n    }\n\n    styles[\"spacing-\".concat(breakpoint, \"-\").concat(spacing)] = {\n      margin: \"-\".concat(getOffset(themeSpacing, 2)),\n      width: \"calc(100% + \".concat(getOffset(themeSpacing), \")\"),\n      '& > $item': {\n        padding: getOffset(themeSpacing, 2)\n      }\n    };\n  });\n  return styles;\n} // Default CSS values\n// flex: '0 1 auto',\n// flexDirection: 'row',\n// alignItems: 'flex-start',\n// flexWrap: 'nowrap',\n// justifyContent: 'flex-start',\n\n\nexport var styles = function styles(theme) {\n  return _extends({\n    /* Styles applied to the root element */\n    root: {},\n\n    /* Styles applied to the root element if `container={true}`. */\n    container: {\n      boxSizing: 'border-box',\n      display: 'flex',\n      flexWrap: 'wrap',\n      width: '100%'\n    },\n\n    /* Styles applied to the root element if `item={true}`. */\n    item: {\n      boxSizing: 'border-box',\n      margin: '0' // For instance, it's useful when used with a `figure` element.\n\n    },\n\n    /* Styles applied to the root element if `zeroMinWidth={true}`. */\n    zeroMinWidth: {\n      minWidth: 0\n    },\n\n    /* Styles applied to the root element if `direction=\"column\"`. */\n    'direction-xs-column': {\n      flexDirection: 'column'\n    },\n\n    /* Styles applied to the root element if `direction=\"column-reverse\"`. */\n    'direction-xs-column-reverse': {\n      flexDirection: 'column-reverse'\n    },\n\n    /* Styles applied to the root element if `direction=\"rwo-reverse\"`. */\n    'direction-xs-row-reverse': {\n      flexDirection: 'row-reverse'\n    },\n\n    /* Styles applied to the root element if `wrap=\"nowrap\"`. */\n    'wrap-xs-nowrap': {\n      flexWrap: 'nowrap'\n    },\n\n    /* Styles applied to the root element if `wrap=\"reverse\"`. */\n    'wrap-xs-wrap-reverse': {\n      flexWrap: 'wrap-reverse'\n    },\n\n    /* Styles applied to the root element if `alignItems=\"center\"`. */\n    'align-items-xs-center': {\n      alignItems: 'center'\n    },\n\n    /* Styles applied to the root element if `alignItems=\"flex-start\"`. */\n    'align-items-xs-flex-start': {\n      alignItems: 'flex-start'\n    },\n\n    /* Styles applied to the root element if `alignItems=\"flex-end\"`. */\n    'align-items-xs-flex-end': {\n      alignItems: 'flex-end'\n    },\n\n    /* Styles applied to the root element if `alignItems=\"baseline\"`. */\n    'align-items-xs-baseline': {\n      alignItems: 'baseline'\n    },\n\n    /* Styles applied to the root element if `alignContent=\"center\"`. */\n    'align-content-xs-center': {\n      alignContent: 'center'\n    },\n\n    /* Styles applied to the root element if `alignContent=\"flex-start\"`. */\n    'align-content-xs-flex-start': {\n      alignContent: 'flex-start'\n    },\n\n    /* Styles applied to the root element if `alignContent=\"flex-end\"`. */\n    'align-content-xs-flex-end': {\n      alignContent: 'flex-end'\n    },\n\n    /* Styles applied to the root element if `alignContent=\"space-between\"`. */\n    'align-content-xs-space-between': {\n      alignContent: 'space-between'\n    },\n\n    /* Styles applied to the root element if `alignContent=\"space-around\"`. */\n    'align-content-xs-space-around': {\n      alignContent: 'space-around'\n    },\n\n    /* Styles applied to the root element if `justify=\"center\"`. */\n    'justify-xs-center': {\n      justifyContent: 'center'\n    },\n\n    /* Styles applied to the root element if `justify=\"flex-end\"`. */\n    'justify-xs-flex-end': {\n      justifyContent: 'flex-end'\n    },\n\n    /* Styles applied to the root element if `justify=\"space-between\"`. */\n    'justify-xs-space-between': {\n      justifyContent: 'space-between'\n    },\n\n    /* Styles applied to the root element if `justify=\"space-around\"`. */\n    'justify-xs-space-around': {\n      justifyContent: 'space-around'\n    },\n\n    /* Styles applied to the root element if `justify=\"space-evenly\"`. */\n    'justify-xs-space-evenly': {\n      justifyContent: 'space-evenly'\n    }\n  }, generateGutter(theme, 'xs'), {}, theme.breakpoints.keys.reduce(function (accumulator, key) {\n    // Use side effect over immutability for better performance.\n    generateGrid(accumulator, theme, key);\n    return accumulator;\n  }, {}));\n};\nvar Grid = React.forwardRef(function (props, ref) {\n  var _props$alignContent = props.alignContent,\n      alignContent = _props$alignContent === void 0 ? 'stretch' : _props$alignContent,\n      _props$alignItems = props.alignItems,\n      alignItems = _props$alignItems === void 0 ? 'stretch' : _props$alignItems,\n      classes = props.classes,\n      classNameProp = props.className,\n      _props$component = props.component,\n      Component = _props$component === void 0 ? 'div' : _props$component,\n      _props$container = props.container,\n      container = _props$container === void 0 ? false : _props$container,\n      _props$direction = props.direction,\n      direction = _props$direction === void 0 ? 'row' : _props$direction,\n      _props$item = props.item,\n      item = _props$item === void 0 ? false : _props$item,\n      _props$justify = props.justify,\n      justify = _props$justify === void 0 ? 'flex-start' : _props$justify,\n      _props$lg = props.lg,\n      lg = _props$lg === void 0 ? false : _props$lg,\n      _props$md = props.md,\n      md = _props$md === void 0 ? false : _props$md,\n      _props$sm = props.sm,\n      sm = _props$sm === void 0 ? false : _props$sm,\n      _props$spacing = props.spacing,\n      spacing = _props$spacing === void 0 ? 0 : _props$spacing,\n      _props$wrap = props.wrap,\n      wrap = _props$wrap === void 0 ? 'wrap' : _props$wrap,\n      _props$xl = props.xl,\n      xl = _props$xl === void 0 ? false : _props$xl,\n      _props$xs = props.xs,\n      xs = _props$xs === void 0 ? false : _props$xs,\n      _props$zeroMinWidth = props.zeroMinWidth,\n      zeroMinWidth = _props$zeroMinWidth === void 0 ? false : _props$zeroMinWidth,\n      other = _objectWithoutProperties(props, [\"alignContent\", \"alignItems\", \"classes\", \"className\", \"component\", \"container\", \"direction\", \"item\", \"justify\", \"lg\", \"md\", \"sm\", \"spacing\", \"wrap\", \"xl\", \"xs\", \"zeroMinWidth\"]);\n\n  var className = clsx(classes.root, classNameProp, container && [classes.container, spacing !== 0 && classes[\"spacing-xs-\".concat(String(spacing))]], item && classes.item, zeroMinWidth && classes.zeroMinWidth, direction !== 'row' && classes[\"direction-xs-\".concat(String(direction))], wrap !== 'wrap' && classes[\"wrap-xs-\".concat(String(wrap))], alignItems !== 'stretch' && classes[\"align-items-xs-\".concat(String(alignItems))], alignContent !== 'stretch' && classes[\"align-content-xs-\".concat(String(alignContent))], justify !== 'flex-start' && classes[\"justify-xs-\".concat(String(justify))], xs !== false && classes[\"grid-xs-\".concat(String(xs))], sm !== false && classes[\"grid-sm-\".concat(String(sm))], md !== false && classes[\"grid-md-\".concat(String(md))], lg !== false && classes[\"grid-lg-\".concat(String(lg))], xl !== false && classes[\"grid-xl-\".concat(String(xl))]);\n  return React.createElement(Component, _extends({\n    className: className,\n    ref: ref\n  }, other));\n});\n\nif (process.env.NODE_ENV !== 'production') {\n  // can't use named function expression since the function body references `Grid`\n  // which would point to the render function instead of the actual component\n  Grid.displayName = 'ForwardRef(Grid)';\n}\n\nprocess.env.NODE_ENV !== \"production\" ? Grid.propTypes = {\n  /**\n   * Defines the `align-content` style property.\n   * It's applied for all screen sizes.\n   */\n  alignContent: PropTypes.oneOf(['stretch', 'center', 'flex-start', 'flex-end', 'space-between', 'space-around']),\n\n  /**\n   * Defines the `align-items` style property.\n   * It's applied for all screen sizes.\n   */\n  alignItems: PropTypes.oneOf(['flex-start', 'center', 'flex-end', 'stretch', 'baseline']),\n\n  /**\n   * The content of the component.\n   */\n  children: PropTypes.node,\n\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object.isRequired,\n\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n\n  /**\n   * The component used for the root node.\n   * Either a string to use a DOM element or a component.\n   */\n  component: PropTypes.elementType,\n\n  /**\n   * If `true`, the component will have the flex *container* behavior.\n   * You should be wrapping *items* with a *container*.\n   */\n  container: PropTypes.bool,\n\n  /**\n   * Defines the `flex-direction` style property.\n   * It is applied for all screen sizes.\n   */\n  direction: PropTypes.oneOf(['row', 'row-reverse', 'column', 'column-reverse']),\n\n  /**\n   * If `true`, the component will have the flex *item* behavior.\n   * You should be wrapping *items* with a *container*.\n   */\n  item: PropTypes.bool,\n\n  /**\n   * Defines the `justify-content` style property.\n   * It is applied for all screen sizes.\n   */\n  justify: PropTypes.oneOf(['flex-start', 'center', 'flex-end', 'space-between', 'space-around', 'space-evenly']),\n\n  /**\n   * Defines the number of grids the component is going to use.\n   * It's applied for the `lg` breakpoint and wider screens if not overridden.\n   */\n  lg: PropTypes.oneOf([false, 'auto', true, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]),\n\n  /**\n   * Defines the number of grids the component is going to use.\n   * It's applied for the `md` breakpoint and wider screens if not overridden.\n   */\n  md: PropTypes.oneOf([false, 'auto', true, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]),\n\n  /**\n   * Defines the number of grids the component is going to use.\n   * It's applied for the `sm` breakpoint and wider screens if not overridden.\n   */\n  sm: PropTypes.oneOf([false, 'auto', true, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]),\n\n  /**\n   * Defines the space between the type `item` component.\n   * It can only be used on a type `container` component.\n   */\n  spacing: PropTypes.oneOf(SPACINGS),\n\n  /**\n   * Defines the `flex-wrap` style property.\n   * It's applied for all screen sizes.\n   */\n  wrap: PropTypes.oneOf(['nowrap', 'wrap', 'wrap-reverse']),\n\n  /**\n   * Defines the number of grids the component is going to use.\n   * It's applied for the `xl` breakpoint and wider screens.\n   */\n  xl: PropTypes.oneOf([false, 'auto', true, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]),\n\n  /**\n   * Defines the number of grids the component is going to use.\n   * It's applied for all the screen sizes with the lowest priority.\n   */\n  xs: PropTypes.oneOf([false, 'auto', true, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]),\n\n  /**\n   * If `true`, it sets `min-width: 0` on the item.\n   * Refer to the limitations section of the documentation to better understand the use case.\n   */\n  zeroMinWidth: PropTypes.bool\n} : void 0;\nvar StyledGrid = withStyles(styles, {\n  name: 'MuiGrid'\n})(Grid);\n\nif (process.env.NODE_ENV !== 'production') {\n  var requireProp = requirePropFactory('Grid');\n  StyledGrid.propTypes = _extends({}, StyledGrid.propTypes, {\n    alignContent: requireProp('container'),\n    alignItems: requireProp('container'),\n    direction: requireProp('container'),\n    justify: requireProp('container'),\n    lg: requireProp('item'),\n    md: requireProp('item'),\n    sm: requireProp('item'),\n    spacing: requireProp('container'),\n    wrap: requireProp('container'),\n    xs: requireProp('item'),\n    zeroMinWidth: requireProp('item')\n  });\n}\n\nexport default StyledGrid;","// Based on https://github.com/react-bootstrap/dom-helpers/blob/master/src/util/inDOM.js\r\nvar inDOM = !!(typeof window !== 'undefined' && window.document && window.document.createElement);\r\nvar cachedType;\r\nexport function _setScrollType(type) {\r\n    cachedType = type;\r\n}\r\n// Based on the jquery plugin https://github.com/othree/jquery.rtl-scroll-type\r\nexport function detectScrollType() {\r\n    if (cachedType) {\r\n        return cachedType;\r\n    }\r\n    if (!inDOM || !window.document.body) {\r\n        return 'indeterminate';\r\n    }\r\n    var dummy = window.document.createElement('div');\r\n    dummy.appendChild(document.createTextNode('ABCD'));\r\n    dummy.dir = 'rtl';\r\n    dummy.style.fontSize = '14px';\r\n    dummy.style.width = '4px';\r\n    dummy.style.height = '1px';\r\n    dummy.style.position = 'absolute';\r\n    dummy.style.top = '-1000px';\r\n    dummy.style.overflow = 'scroll';\r\n    document.body.appendChild(dummy);\r\n    cachedType = 'reverse';\r\n    if (dummy.scrollLeft > 0) {\r\n        cachedType = 'default';\r\n    }\r\n    else {\r\n        dummy.scrollLeft = 1;\r\n        if (dummy.scrollLeft === 0) {\r\n            cachedType = 'negative';\r\n        }\r\n    }\r\n    document.body.removeChild(dummy);\r\n    return cachedType;\r\n}\r\n// Based on https://stackoverflow.com/a/24394376\r\nexport function getNormalizedScrollLeft(element, direction) {\r\n    var scrollLeft = element.scrollLeft;\r\n    // Perform the calculations only when direction is rtl to avoid messing up the ltr bahavior\r\n    if (direction !== 'rtl') {\r\n        return scrollLeft;\r\n    }\r\n    var type = detectScrollType();\r\n    if (type === 'indeterminate') {\r\n        return Number.NaN;\r\n    }\r\n    switch (type) {\r\n        case 'negative':\r\n            return element.scrollWidth - element.clientWidth + scrollLeft;\r\n        case 'reverse':\r\n            return element.scrollWidth - element.clientWidth - scrollLeft;\r\n    }\r\n    return scrollLeft;\r\n}\r\nexport function setNormalizedScrollLeft(element, scrollLeft, direction) {\r\n    // Perform the calculations only when direction is rtl to avoid messing up the ltr bahavior\r\n    if (direction !== 'rtl') {\r\n        element.scrollLeft = scrollLeft;\r\n        return;\r\n    }\r\n    var type = detectScrollType();\r\n    if (type === 'indeterminate') {\r\n        return;\r\n    }\r\n    switch (type) {\r\n        case 'negative':\r\n            element.scrollLeft = element.clientWidth - element.scrollWidth + scrollLeft;\r\n            break;\r\n        case 'reverse':\r\n            element.scrollLeft = element.scrollWidth - element.clientWidth - scrollLeft;\r\n            break;\r\n        default:\r\n            element.scrollLeft = scrollLeft;\r\n            break;\r\n    }\r\n}\r\n","import _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport withStyles from '../styles/withStyles';\nimport ButtonBase from '../ButtonBase';\nimport capitalize from '../utils/capitalize';\nimport unsupportedProp from '../utils/unsupportedProp';\nexport var styles = function styles(theme) {\n  var _extends2;\n\n  return {\n    /* Styles applied to the root element. */\n    root: _extends({}, theme.typography.button, (_extends2 = {\n      maxWidth: 264,\n      minWidth: 72,\n      position: 'relative',\n      boxSizing: 'border-box',\n      minHeight: 48,\n      flexShrink: 0,\n      padding: '6px 12px'\n    }, _defineProperty(_extends2, theme.breakpoints.up('sm'), {\n      padding: '6px 24px'\n    }), _defineProperty(_extends2, \"overflow\", 'hidden'), _defineProperty(_extends2, \"whiteSpace\", 'normal'), _defineProperty(_extends2, \"textAlign\", 'center'), _defineProperty(_extends2, theme.breakpoints.up('sm'), {\n      fontSize: theme.typography.pxToRem(13),\n      minWidth: 160\n    }), _extends2)),\n\n    /* Styles applied to the root element if both `icon` and `label` are provided. */\n    labelIcon: {\n      minHeight: 72,\n      paddingTop: 9,\n      '& $wrapper > *:first-child': {\n        marginBottom: 6\n      }\n    },\n\n    /* Styles applied to the root element if the parent [`Tabs`](/api/tabs/) has `textColor=\"inherit\"`. */\n    textColorInherit: {\n      color: 'inherit',\n      opacity: 0.7,\n      '&$selected': {\n        opacity: 1\n      },\n      '&$disabled': {\n        opacity: 0.5\n      }\n    },\n\n    /* Styles applied to the root element if the parent [`Tabs`](/api/tabs/) has `textColor=\"primary\"`. */\n    textColorPrimary: {\n      color: theme.palette.text.secondary,\n      '&$selected': {\n        color: theme.palette.primary.main\n      },\n      '&$disabled': {\n        color: theme.palette.text.disabled\n      }\n    },\n\n    /* Styles applied to the root element if the parent [`Tabs`](/api/tabs/) has `textColor=\"secondary\"`. */\n    textColorSecondary: {\n      color: theme.palette.text.secondary,\n      '&$selected': {\n        color: theme.palette.secondary.main\n      },\n      '&$disabled': {\n        color: theme.palette.text.disabled\n      }\n    },\n\n    /* Pseudo-class applied to the root element if `selected={true}` (controlled by the Tabs component). */\n    selected: {},\n\n    /* Pseudo-class applied to the root element if `disabled={true}` (controlled by the Tabs component). */\n    disabled: {},\n\n    /* Styles applied to the root element if `fullWidth={true}` (controlled by the Tabs component). */\n    fullWidth: {\n      flexShrink: 1,\n      flexGrow: 1,\n      flexBasis: 0,\n      maxWidth: 'none'\n    },\n\n    /* Styles applied to the root element if `wrapped={true}`. */\n    wrapped: {\n      fontSize: theme.typography.pxToRem(12),\n      lineHeight: 1.5\n    },\n\n    /* Styles applied to the `icon` and `label`'s wrapper element. */\n    wrapper: {\n      display: 'inline-flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      width: '100%',\n      flexDirection: 'column'\n    }\n  };\n};\nvar Tab = React.forwardRef(function Tab(props, ref) {\n  var classes = props.classes,\n      className = props.className,\n      _props$disabled = props.disabled,\n      disabled = _props$disabled === void 0 ? false : _props$disabled,\n      _props$disableFocusRi = props.disableFocusRipple,\n      disableFocusRipple = _props$disableFocusRi === void 0 ? false : _props$disableFocusRi,\n      fullWidth = props.fullWidth,\n      icon = props.icon,\n      indicator = props.indicator,\n      label = props.label,\n      onChange = props.onChange,\n      onClick = props.onClick,\n      selected = props.selected,\n      _props$textColor = props.textColor,\n      textColor = _props$textColor === void 0 ? 'inherit' : _props$textColor,\n      value = props.value,\n      _props$wrapped = props.wrapped,\n      wrapped = _props$wrapped === void 0 ? false : _props$wrapped,\n      other = _objectWithoutProperties(props, [\"classes\", \"className\", \"disabled\", \"disableFocusRipple\", \"fullWidth\", \"icon\", \"indicator\", \"label\", \"onChange\", \"onClick\", \"selected\", \"textColor\", \"value\", \"wrapped\"]);\n\n  var handleChange = function handleChange(event) {\n    if (onChange) {\n      onChange(event, value);\n    }\n\n    if (onClick) {\n      onClick(event);\n    }\n  };\n\n  return React.createElement(ButtonBase, _extends({\n    focusRipple: !disableFocusRipple,\n    className: clsx(classes.root, classes[\"textColor\".concat(capitalize(textColor))], className, disabled && classes.disabled, selected && classes.selected, label && icon && classes.labelIcon, fullWidth && classes.fullWidth, wrapped && classes.wrapped),\n    ref: ref,\n    role: \"tab\",\n    \"aria-selected\": selected,\n    disabled: disabled,\n    onClick: handleChange\n  }, other), React.createElement(\"span\", {\n    className: classes.wrapper\n  }, icon, label), indicator);\n});\nprocess.env.NODE_ENV !== \"production\" ? Tab.propTypes = {\n  /**\n   * This prop isn't supported.\n   * Use the `component` prop if you need to change the children structure.\n   */\n  children: unsupportedProp,\n\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object.isRequired,\n\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n\n  /**\n   * If `true`, the tab will be disabled.\n   */\n  disabled: PropTypes.bool,\n\n  /**\n   * If `true`, the  keyboard focus ripple will be disabled.\n   * `disableRipple` must also be true.\n   */\n  disableFocusRipple: PropTypes.bool,\n\n  /**\n   * If `true`, the ripple effect will be disabled.\n   */\n  disableRipple: PropTypes.bool,\n\n  /**\n   * @ignore\n   */\n  fullWidth: PropTypes.bool,\n\n  /**\n   * The icon element.\n   */\n  icon: PropTypes.node,\n\n  /**\n   * @ignore\n   * For server-side rendering consideration, we let the selected tab\n   * render the indicator.\n   */\n  indicator: PropTypes.node,\n\n  /**\n   * The label element.\n   */\n  label: PropTypes.node,\n\n  /**\n   * @ignore\n   */\n  onChange: PropTypes.func,\n\n  /**\n   * @ignore\n   */\n  onClick: PropTypes.func,\n\n  /**\n   * @ignore\n   */\n  selected: PropTypes.bool,\n\n  /**\n   * @ignore\n   */\n  textColor: PropTypes.oneOf(['secondary', 'primary', 'inherit']),\n\n  /**\n   * You can provide your own value. Otherwise, we fallback to the child position index.\n   */\n  value: PropTypes.any,\n\n  /**\n   * Tab labels appear in a single row.\n   * They can use a second line if needed.\n   */\n  wrapped: PropTypes.bool\n} : void 0;\nexport default withStyles(styles, {\n  name: 'MuiTab'\n})(Tab);","function easeInOutSin(time) {\n  return (1 + Math.sin(Math.PI * time - Math.PI / 2)) / 2;\n}\n\nexport default function animate(property, element, to) {\n  var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  var cb = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : function () {};\n  var _options$ease = options.ease,\n      ease = _options$ease === void 0 ? easeInOutSin : _options$ease,\n      _options$duration = options.duration,\n      duration = _options$duration === void 0 ? 300 : _options$duration;\n  var start = null;\n  var from = element[property];\n  var cancelled = false;\n\n  var cancel = function cancel() {\n    cancelled = true;\n  };\n\n  var step = function step(timestamp) {\n    if (cancelled) {\n      cb(new Error('Animation cancelled'));\n      return;\n    }\n\n    if (start === null) {\n      start = timestamp;\n    }\n\n    var time = Math.min(1, (timestamp - start) / duration);\n    element[property] = ease(time) * (to - from) + from;\n\n    if (time >= 1) {\n      requestAnimationFrame(function () {\n        cb(null);\n      });\n      return;\n    }\n\n    requestAnimationFrame(step);\n  };\n\n  if (from === to) {\n    cb(new Error('Element already at target position'));\n    return cancel;\n  }\n\n  requestAnimationFrame(step);\n  return cancel;\n}","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport debounce from '../utils/debounce';\nvar styles = {\n  width: 99,\n  height: 99,\n  position: 'absolute',\n  top: -9999,\n  overflow: 'scroll'\n};\n/**\n * @ignore - internal component.\n * The component is originates from https://github.com/STORIS/react-scrollbar-size.\n * It has been moved into the core in order to minimize the bundle size.\n */\n\nexport default function ScrollbarSize(props) {\n  var onChange = props.onChange,\n      other = _objectWithoutProperties(props, [\"onChange\"]);\n\n  var scrollbarHeight = React.useRef();\n  var nodeRef = React.useRef(null);\n\n  var setMeasurements = function setMeasurements() {\n    scrollbarHeight.current = nodeRef.current.offsetHeight - nodeRef.current.clientHeight;\n  };\n\n  React.useEffect(function () {\n    var handleResize = debounce(function () {\n      var prevHeight = scrollbarHeight.current;\n      setMeasurements();\n\n      if (prevHeight !== scrollbarHeight.current) {\n        onChange(scrollbarHeight.current);\n      }\n    });\n    window.addEventListener('resize', handleResize);\n    return function () {\n      handleResize.clear();\n      window.removeEventListener('resize', handleResize);\n    };\n  }, [onChange]);\n  React.useEffect(function () {\n    setMeasurements();\n    onChange(scrollbarHeight.current);\n  }, [onChange]);\n  return React.createElement(\"div\", _extends({\n    style: styles,\n    ref: nodeRef\n  }, other));\n}\nprocess.env.NODE_ENV !== \"production\" ? ScrollbarSize.propTypes = {\n  onChange: PropTypes.func.isRequired\n} : void 0;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport withStyles from '../styles/withStyles';\nimport capitalize from '../utils/capitalize';\nexport var styles = function styles(theme) {\n  return {\n    root: {\n      position: 'absolute',\n      height: 2,\n      bottom: 0,\n      width: '100%',\n      transition: theme.transitions.create()\n    },\n    colorPrimary: {\n      backgroundColor: theme.palette.primary.main\n    },\n    colorSecondary: {\n      backgroundColor: theme.palette.secondary.main\n    },\n    vertical: {\n      height: '100%',\n      width: 2,\n      right: 0\n    }\n  };\n};\n/**\n * @ignore - internal component.\n */\n\nvar TabIndicator = React.forwardRef(function TabIndicator(props, ref) {\n  var classes = props.classes,\n      className = props.className,\n      color = props.color,\n      orientation = props.orientation,\n      other = _objectWithoutProperties(props, [\"classes\", \"className\", \"color\", \"orientation\"]);\n\n  return React.createElement(\"span\", _extends({\n    className: clsx(classes.root, classes[\"color\".concat(capitalize(color))], className, {\n      vertical: classes.vertical\n    }[orientation]),\n    ref: ref\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? TabIndicator.propTypes = {\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object.isRequired,\n\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n\n  /**\n   * @ignore\n   * The color of the tab indicator.\n   */\n  color: PropTypes.oneOf(['primary', 'secondary']).isRequired,\n\n  /**\n   * The tabs orientation (layout flow direction).\n   */\n  orientation: PropTypes.oneOf(['horizontal', 'vertical']).isRequired\n} : void 0;\nexport default withStyles(styles, {\n  name: 'PrivateTabIndicator'\n})(TabIndicator);","import React from 'react';\nimport createSvgIcon from './createSvgIcon';\n/**\n * @ignore - internal component.\n */\n\nexport default createSvgIcon(React.createElement(\"path\", {\n  d: \"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z\"\n}), 'KeyboardArrowLeft');","import React from 'react';\nimport createSvgIcon from './createSvgIcon';\n/**\n * @ignore - internal component.\n */\n\nexport default createSvgIcon(React.createElement(\"path\", {\n  d: \"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z\"\n}), 'KeyboardArrowRight');","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\n\n/* eslint-disable jsx-a11y/aria-role */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport KeyboardArrowLeft from '../internal/svg-icons/KeyboardArrowLeft';\nimport KeyboardArrowRight from '../internal/svg-icons/KeyboardArrowRight';\nimport withStyles from '../styles/withStyles';\nimport ButtonBase from '../ButtonBase';\nexport var styles = {\n  root: {\n    width: 40,\n    flexShrink: 0\n  },\n  vertical: {\n    width: '100%',\n    height: 40,\n    '& svg': {\n      transform: 'rotate(90deg)'\n    }\n  }\n};\n/**\n * @ignore - internal component.\n */\n\nvar _ref = React.createElement(KeyboardArrowLeft, {\n  fontSize: \"small\"\n});\n\nvar _ref2 = React.createElement(KeyboardArrowRight, {\n  fontSize: \"small\"\n});\n\nvar TabScrollButton = React.forwardRef(function TabScrollButton(props, ref) {\n  var classes = props.classes,\n      classNameProp = props.className,\n      direction = props.direction,\n      orientation = props.orientation,\n      visible = props.visible,\n      other = _objectWithoutProperties(props, [\"classes\", \"className\", \"direction\", \"orientation\", \"visible\"]);\n\n  var className = clsx(classes.root, classNameProp, {\n    vertical: classes.vertical\n  }[orientation]);\n\n  if (!visible) {\n    return React.createElement(\"div\", {\n      className: className\n    });\n  }\n\n  return React.createElement(ButtonBase, _extends({\n    component: \"div\",\n    className: className,\n    ref: ref,\n    role: null,\n    tabIndex: null\n  }, other), direction === 'left' ? _ref : _ref2);\n});\nprocess.env.NODE_ENV !== \"production\" ? TabScrollButton.propTypes = {\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object.isRequired,\n\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n\n  /**\n   * Which direction should the button indicate?\n   */\n  direction: PropTypes.oneOf(['left', 'right']).isRequired,\n\n  /**\n   * The tabs orientation (layout flow direction).\n   */\n  orientation: PropTypes.oneOf(['horizontal', 'vertical']).isRequired,\n\n  /**\n   * Should the button be present or just consume space.\n   */\n  visible: PropTypes.bool.isRequired\n} : void 0;\nexport default withStyles(styles, {\n  name: 'PrivateTabScrollButton'\n})(TabScrollButton);","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport { refType } from '@material-ui/utils';\nimport debounce from '../utils/debounce';\nimport ownerWindow from '../utils/ownerWindow';\nimport { getNormalizedScrollLeft, detectScrollType } from 'normalize-scroll-left';\nimport animate from '../internal/animate';\nimport ScrollbarSize from './ScrollbarSize';\nimport withStyles from '../styles/withStyles';\nimport TabIndicator from './TabIndicator';\nimport TabScrollButton from './TabScrollButton';\nimport useEventCallback from '../utils/useEventCallback';\nimport useTheme from '../styles/useTheme';\nexport var styles = function styles(theme) {\n  return {\n    /* Styles applied to the root element. */\n    root: {\n      overflow: 'hidden',\n      minHeight: 48,\n      WebkitOverflowScrolling: 'touch',\n      // Add iOS momentum scrolling.\n      display: 'flex'\n    },\n\n    /* Styles applied to the root element if `orientation=\"vertical\"`. */\n    vertical: {\n      flexDirection: 'column'\n    },\n\n    /* Styles applied to the flex container element. */\n    flexContainer: {\n      display: 'flex'\n    },\n\n    /* Styles applied to the flex container element if `orientation=\"vertical\"`. */\n    flexContainerVertical: {\n      flexDirection: 'column'\n    },\n\n    /* Styles applied to the flex container element if `centered={true}` & `!variant=\"scrollable\"`. */\n    centered: {\n      justifyContent: 'center'\n    },\n\n    /* Styles applied to the tablist element. */\n    scroller: {\n      position: 'relative',\n      display: 'inline-block',\n      flex: '1 1 auto',\n      whiteSpace: 'nowrap'\n    },\n\n    /* Styles applied to the tablist element if `!variant=\"scrollable\"`\b\b\b. */\n    fixed: {\n      overflowX: 'hidden',\n      width: '100%'\n    },\n\n    /* Styles applied to the tablist element if `variant=\"scrollable\"`. */\n    scrollable: {\n      overflowX: 'scroll',\n      // Hide dimensionless scrollbar on MacOS\n      scrollbarWidth: 'none',\n      // Firefox\n      '&::-webkit-scrollbar': {\n        display: 'none' // Safari + Chrome\n\n      }\n    },\n\n    /* Styles applied to the `ScrollButtonComponent` component. */\n    scrollButtons: {},\n\n    /* Styles applied to the `ScrollButtonComponent` component if `scrollButtons=\"auto\"` or scrollButtons=\"desktop\"`. */\n    scrollButtonsDesktop: _defineProperty({}, theme.breakpoints.down('xs'), {\n      display: 'none'\n    }),\n\n    /* Styles applied to the `TabIndicator` component. */\n    indicator: {}\n  };\n};\nvar Tabs = React.forwardRef(function Tabs(props, ref) {\n  var action = props.action,\n      _props$centered = props.centered,\n      centered = _props$centered === void 0 ? false : _props$centered,\n      childrenProp = props.children,\n      classes = props.classes,\n      className = props.className,\n      _props$component = props.component,\n      Component = _props$component === void 0 ? 'div' : _props$component,\n      _props$indicatorColor = props.indicatorColor,\n      indicatorColor = _props$indicatorColor === void 0 ? 'secondary' : _props$indicatorColor,\n      onChange = props.onChange,\n      _props$orientation = props.orientation,\n      orientation = _props$orientation === void 0 ? 'horizontal' : _props$orientation,\n      _props$ScrollButtonCo = props.ScrollButtonComponent,\n      ScrollButtonComponent = _props$ScrollButtonCo === void 0 ? TabScrollButton : _props$ScrollButtonCo,\n      _props$scrollButtons = props.scrollButtons,\n      scrollButtons = _props$scrollButtons === void 0 ? 'auto' : _props$scrollButtons,\n      _props$TabIndicatorPr = props.TabIndicatorProps,\n      TabIndicatorProps = _props$TabIndicatorPr === void 0 ? {} : _props$TabIndicatorPr,\n      _props$textColor = props.textColor,\n      textColor = _props$textColor === void 0 ? 'inherit' : _props$textColor,\n      value = props.value,\n      _props$variant = props.variant,\n      variant = _props$variant === void 0 ? 'standard' : _props$variant,\n      other = _objectWithoutProperties(props, [\"action\", \"centered\", \"children\", \"classes\", \"className\", \"component\", \"indicatorColor\", \"onChange\", \"orientation\", \"ScrollButtonComponent\", \"scrollButtons\", \"TabIndicatorProps\", \"textColor\", \"value\", \"variant\"]);\n\n  var theme = useTheme();\n  var scrollable = variant === 'scrollable';\n  var isRtl = theme.direction === 'rtl';\n  var vertical = orientation === 'vertical';\n  var scrollStart = vertical ? 'scrollTop' : 'scrollLeft';\n  var start = vertical ? 'top' : 'left';\n  var end = vertical ? 'bottom' : 'right';\n  var clientSize = vertical ? 'clientHeight' : 'clientWidth';\n  var size = vertical ? 'height' : 'width';\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (centered && scrollable) {\n      console.error('Material-UI: you can not use the `centered={true}` and `variant=\"scrollable\"` properties ' + 'at the same time on a `Tabs` component.');\n    }\n  }\n\n  var _React$useState = React.useState(false),\n      mounted = _React$useState[0],\n      setMounted = _React$useState[1];\n\n  var _React$useState2 = React.useState({}),\n      indicatorStyle = _React$useState2[0],\n      setIndicatorStyle = _React$useState2[1];\n\n  var _React$useState3 = React.useState({\n    start: false,\n    end: false\n  }),\n      displayScroll = _React$useState3[0],\n      setDisplayScroll = _React$useState3[1];\n\n  var _React$useState4 = React.useState({\n    overflow: 'hidden',\n    marginBottom: null\n  }),\n      scrollerStyle = _React$useState4[0],\n      setScrollerStyle = _React$useState4[1];\n\n  var valueToIndex = new Map();\n  var tabsRef = React.useRef(null);\n  var childrenWrapperRef = React.useRef(null);\n\n  var getTabsMeta = function getTabsMeta() {\n    var tabsNode = tabsRef.current;\n    var tabsMeta;\n\n    if (tabsNode) {\n      var rect = tabsNode.getBoundingClientRect(); // create a new object with ClientRect class props + scrollLeft\n\n      tabsMeta = {\n        clientWidth: tabsNode.clientWidth,\n        scrollLeft: tabsNode.scrollLeft,\n        scrollTop: tabsNode.scrollTop,\n        scrollLeftNormalized: getNormalizedScrollLeft(tabsNode, theme.direction),\n        scrollWidth: tabsNode.scrollWidth,\n        top: rect.top,\n        bottom: rect.bottom,\n        left: rect.left,\n        right: rect.right\n      };\n    }\n\n    var tabMeta;\n\n    if (tabsNode && value !== false) {\n      var _children = childrenWrapperRef.current.children;\n\n      if (_children.length > 0) {\n        var tab = _children[valueToIndex.get(value)];\n\n        if (process.env.NODE_ENV !== 'production') {\n          if (!tab) {\n            console.error([\"Material-UI: the value provided `\".concat(value, \"` to the Tabs component is invalid.\"), 'None of the Tabs children have this value.', valueToIndex.keys ? \"You can provide one of the following values: \".concat(Array.from(valueToIndex.keys()).join(', '), \".\") : null].join('\\n'));\n          }\n        }\n\n        tabMeta = tab ? tab.getBoundingClientRect() : null;\n      }\n    }\n\n    return {\n      tabsMeta: tabsMeta,\n      tabMeta: tabMeta\n    };\n  };\n\n  var updateIndicatorState = useEventCallback(function () {\n    var _newIndicatorStyle;\n\n    var _getTabsMeta = getTabsMeta(),\n        tabsMeta = _getTabsMeta.tabsMeta,\n        tabMeta = _getTabsMeta.tabMeta;\n\n    var startValue = 0;\n\n    if (tabMeta && tabsMeta) {\n      if (vertical) {\n        startValue = tabMeta.top - tabsMeta.top + tabsMeta.scrollTop;\n      } else {\n        var correction = isRtl ? tabsMeta.scrollLeftNormalized + tabsMeta.clientWidth - tabsMeta.scrollWidth : tabsMeta.scrollLeft;\n        startValue = tabMeta.left - tabsMeta.left + correction;\n      }\n    }\n\n    var newIndicatorStyle = (_newIndicatorStyle = {}, _defineProperty(_newIndicatorStyle, start, startValue), _defineProperty(_newIndicatorStyle, size, tabMeta ? tabMeta[size] : 0), _newIndicatorStyle);\n\n    if (isNaN(indicatorStyle[start]) || isNaN(indicatorStyle[size])) {\n      setIndicatorStyle(newIndicatorStyle);\n    } else {\n      var dStart = Math.abs(indicatorStyle[start] - newIndicatorStyle[start]);\n      var dSize = Math.abs(indicatorStyle[size] - newIndicatorStyle[size]);\n\n      if (dStart >= 1 || dSize >= 1) {\n        setIndicatorStyle(newIndicatorStyle);\n      }\n    }\n  });\n\n  var scroll = function scroll(scrollValue) {\n    animate(scrollStart, tabsRef.current, scrollValue);\n  };\n\n  var moveTabsScroll = function moveTabsScroll(delta) {\n    var scrollValue = tabsRef.current[scrollStart];\n\n    if (vertical) {\n      scrollValue += delta;\n    } else {\n      scrollValue += delta * (isRtl ? -1 : 1); // Fix for Edge\n\n      scrollValue *= isRtl && detectScrollType() === 'reverse' ? -1 : 1;\n    }\n\n    scroll(scrollValue);\n  };\n\n  var handleStartScrollClick = function handleStartScrollClick() {\n    moveTabsScroll(-tabsRef.current[clientSize]);\n  };\n\n  var handleEndScrollClick = function handleEndScrollClick() {\n    moveTabsScroll(tabsRef.current[clientSize]);\n  };\n\n  var handleScrollbarSizeChange = React.useCallback(function (scrollbarHeight) {\n    setScrollerStyle({\n      overflow: null,\n      marginBottom: -scrollbarHeight\n    });\n  }, []);\n\n  var getConditionalElements = function getConditionalElements() {\n    var conditionalElements = {};\n    conditionalElements.scrollbarSizeListener = scrollable ? React.createElement(ScrollbarSize, {\n      className: classes.scrollable,\n      onChange: handleScrollbarSizeChange\n    }) : null;\n    var scrollButtonsActive = displayScroll.start || displayScroll.end;\n    var showScrollButtons = scrollable && (scrollButtons === 'auto' && scrollButtonsActive || scrollButtons === 'desktop' || scrollButtons === 'on');\n    conditionalElements.scrollButtonStart = showScrollButtons ? React.createElement(ScrollButtonComponent, {\n      orientation: orientation,\n      direction: isRtl ? 'right' : 'left',\n      onClick: handleStartScrollClick,\n      visible: displayScroll.start,\n      className: clsx(classes.scrollButtons, scrollButtons !== 'on' && classes.scrollButtonsDesktop)\n    }) : null;\n    conditionalElements.scrollButtonEnd = showScrollButtons ? React.createElement(ScrollButtonComponent, {\n      orientation: orientation,\n      direction: isRtl ? 'left' : 'right',\n      onClick: handleEndScrollClick,\n      visible: displayScroll.end,\n      className: clsx(classes.scrollButtons, scrollButtons !== 'on' && classes.scrollButtonsDesktop)\n    }) : null;\n    return conditionalElements;\n  };\n\n  var scrollSelectedIntoView = useEventCallback(function () {\n    var _getTabsMeta2 = getTabsMeta(),\n        tabsMeta = _getTabsMeta2.tabsMeta,\n        tabMeta = _getTabsMeta2.tabMeta;\n\n    if (!tabMeta || !tabsMeta) {\n      return;\n    }\n\n    if (tabMeta[start] < tabsMeta[start]) {\n      // left side of button is out of view\n      var nextScrollStart = tabsMeta[scrollStart] + (tabMeta[start] - tabsMeta[start]);\n      scroll(nextScrollStart);\n    } else if (tabMeta[end] > tabsMeta[end]) {\n      // right side of button is out of view\n      var _nextScrollStart = tabsMeta[scrollStart] + (tabMeta[end] - tabsMeta[end]);\n\n      scroll(_nextScrollStart);\n    }\n  });\n  var updateScrollButtonState = useEventCallback(function () {\n    if (scrollable && scrollButtons !== 'off') {\n      var _tabsRef$current = tabsRef.current,\n          scrollTop = _tabsRef$current.scrollTop,\n          scrollHeight = _tabsRef$current.scrollHeight,\n          clientHeight = _tabsRef$current.clientHeight,\n          scrollWidth = _tabsRef$current.scrollWidth,\n          clientWidth = _tabsRef$current.clientWidth;\n      var showStartScroll;\n      var showEndScroll;\n\n      if (vertical) {\n        showStartScroll = scrollTop > 1;\n        showEndScroll = scrollTop < scrollHeight - clientHeight - 1;\n      } else {\n        var scrollLeft = getNormalizedScrollLeft(tabsRef.current, theme.direction); // use 1 for the potential rounding error with browser zooms.\n\n        showStartScroll = isRtl ? scrollLeft < scrollWidth - clientWidth - 1 : scrollLeft > 1;\n        showEndScroll = !isRtl ? scrollLeft < scrollWidth - clientWidth - 1 : scrollLeft > 1;\n      }\n\n      if (showStartScroll !== displayScroll.start || showEndScroll !== displayScroll.end) {\n        setDisplayScroll({\n          start: showStartScroll,\n          end: showEndScroll\n        });\n      }\n    }\n  });\n  React.useEffect(function () {\n    var handleResize = debounce(function () {\n      updateIndicatorState();\n      updateScrollButtonState();\n    });\n    var win = ownerWindow(tabsRef.current);\n    win.addEventListener('resize', handleResize);\n    return function () {\n      handleResize.clear();\n      win.removeEventListener('resize', handleResize);\n    };\n  }, [updateIndicatorState, updateScrollButtonState]);\n  var handleTabsScroll = React.useCallback(debounce(function () {\n    updateScrollButtonState();\n  }));\n  React.useEffect(function () {\n    return function () {\n      handleTabsScroll.clear();\n    };\n  }, [handleTabsScroll]);\n  React.useEffect(function () {\n    setMounted(true);\n  }, []);\n  React.useEffect(function () {\n    updateIndicatorState();\n    updateScrollButtonState();\n  });\n  React.useEffect(function () {\n    scrollSelectedIntoView();\n  }, [scrollSelectedIntoView, indicatorStyle]);\n  React.useImperativeHandle(action, function () {\n    return {\n      updateIndicator: updateIndicatorState,\n      updateScrollButtons: updateScrollButtonState\n    };\n  }, [updateIndicatorState, updateScrollButtonState]);\n  var indicator = React.createElement(TabIndicator, _extends({\n    className: classes.indicator,\n    orientation: orientation,\n    color: indicatorColor\n  }, TabIndicatorProps, {\n    style: _extends({}, indicatorStyle, {}, TabIndicatorProps.style)\n  }));\n  var childIndex = 0;\n  var children = React.Children.map(childrenProp, function (child) {\n    if (!React.isValidElement(child)) {\n      return null;\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (child.type === React.Fragment) {\n        console.error([\"Material-UI: the Tabs component doesn't accept a Fragment as a child.\", 'Consider providing an array instead.'].join('\\n'));\n      }\n    }\n\n    var childValue = child.props.value === undefined ? childIndex : child.props.value;\n    valueToIndex.set(childValue, childIndex);\n    var selected = childValue === value;\n    childIndex += 1;\n    return React.cloneElement(child, {\n      fullWidth: variant === 'fullWidth',\n      indicator: selected && !mounted && indicator,\n      selected: selected,\n      onChange: onChange,\n      textColor: textColor,\n      value: childValue\n    });\n  });\n  var conditionalElements = getConditionalElements();\n  return React.createElement(Component, _extends({\n    className: clsx(classes.root, className, vertical && classes.vertical),\n    ref: ref\n  }, other), conditionalElements.scrollButtonStart, conditionalElements.scrollbarSizeListener, React.createElement(\"div\", {\n    className: clsx(classes.scroller, scrollable ? classes.scrollable : classes.fixed),\n    style: scrollerStyle,\n    ref: tabsRef,\n    onScroll: handleTabsScroll\n  }, React.createElement(\"div\", {\n    className: clsx(classes.flexContainer, vertical && classes.flexContainerVertical, centered && !scrollable && classes.centered),\n    ref: childrenWrapperRef,\n    role: \"tablist\"\n  }, children), mounted && indicator), conditionalElements.scrollButtonEnd);\n});\nprocess.env.NODE_ENV !== \"production\" ? Tabs.propTypes = {\n  /**\n   * Callback fired when the component mounts.\n   * This is useful when you want to trigger an action programmatically.\n   * It supports two actions: `updateIndicator()` and `updateScrollButtons()`\n   *\n   * @param {object} actions This object contains all possible actions\n   * that can be triggered programmatically.\n   */\n  action: refType,\n\n  /**\n   * If `true`, the tabs will be centered.\n   * This property is intended for large views.\n   */\n  centered: PropTypes.bool,\n\n  /**\n   * The content of the component.\n   */\n  children: PropTypes.node,\n\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object.isRequired,\n\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n\n  /**\n   * The component used for the root node.\n   * Either a string to use a DOM element or a component.\n   */\n  component: PropTypes.elementType,\n\n  /**\n   * Determines the color of the indicator.\n   */\n  indicatorColor: PropTypes.oneOf(['secondary', 'primary']),\n\n  /**\n   * Callback fired when the value changes.\n   *\n   * @param {object} event The event source of the callback\n   * @param {any} value We default to the index of the child (number)\n   */\n  onChange: PropTypes.func,\n\n  /**\n   * The tabs orientation (layout flow direction).\n   */\n  orientation: PropTypes.oneOf(['horizontal', 'vertical']),\n\n  /**\n   * The component used to render the scroll buttons.\n   */\n  ScrollButtonComponent: PropTypes.elementType,\n\n  /**\n   * Determine behavior of scroll buttons when tabs are set to scroll:\n   *\n   * - `auto` will only present them when not all the items are visible.\n   * - `desktop` will only present them on medium and larger viewports.\n   * - `on` will always present them.\n   * - `off` will never present them.\n   */\n  scrollButtons: PropTypes.oneOf(['auto', 'desktop', 'on', 'off']),\n\n  /**\n   * Props applied to the tab indicator element.\n   */\n  TabIndicatorProps: PropTypes.object,\n\n  /**\n   * Determines the color of the `Tab`.\n   */\n  textColor: PropTypes.oneOf(['secondary', 'primary', 'inherit']),\n\n  /**\n   * The value of the currently selected `Tab`.\n   * If you don't want any selected `Tab`, you can set this property to `false`.\n   */\n  value: PropTypes.any,\n\n  /**\n   *  Determines additional display behavior of the tabs:\n   *\n   *  - `scrollable` will invoke scrolling properties and allow for horizontally\n   *  scrolling (or swiping) of the tab bar.\n   *  -`fullWidth` will make the tabs grow to use all the available space,\n   *  which should be used for small views, like on mobile.\n   *  - `standard` will render the default state.\n   */\n  variant: PropTypes.oneOf(['standard', 'scrollable', 'fullWidth'])\n} : void 0;\nexport default withStyles(styles, {\n  name: 'MuiTabs'\n})(Tabs);","import * as React from 'react';\nimport Tab from '@material-ui/core/Tab';\nimport Tabs from '@material-ui/core/Tabs';\nimport Paper from '@material-ui/core/Paper';\nimport { TimeIcon } from '../_shared/icons/TimeIcon';\nimport { DateTimePickerView } from './DateTimePicker';\nimport { DateRangeIcon } from '../_shared/icons/DateRangeIcon';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\n\nconst viewToTabIndex = (openView: DateTimePickerView) => {\n  if (openView === 'date' || openView === 'year') {\n    return 'date';\n  }\n\n  return 'time';\n};\n\nconst tabIndexToView = (tab: DateTimePickerView) => {\n  if (tab === 'date') {\n    return 'date';\n  }\n\n  return 'hours';\n};\n\nexport interface DateTimePickerTabsProps {\n  view: DateTimePickerView;\n  onChange: (view: DateTimePickerView) => void;\n  dateRangeIcon?: React.ReactNode;\n  timeIcon?: React.ReactNode;\n}\n\nexport const useStyles = makeStyles(\n  theme => {\n    // prettier-ignore\n    const tabsBackground = theme.palette.type === 'light'\n    ? theme.palette.primary.main\n    : theme.palette.background.default;\n\n    return {\n      tabs: {\n        color: theme.palette.getContrastText(tabsBackground),\n        backgroundColor: tabsBackground,\n      },\n    };\n  },\n  { name: 'MuiPickerDTTabs' }\n);\n\nexport const DateTimePickerTabs: React.SFC<DateTimePickerTabsProps> = ({\n  view,\n  onChange,\n  dateRangeIcon,\n  timeIcon,\n}) => {\n  const classes = useStyles();\n  const theme = useTheme();\n  const indicatorColor = theme.palette.type === 'light' ? 'secondary' : 'primary';\n  const handleChange = (e: React.ChangeEvent<{}>, value: DateTimePickerView) => {\n    if (value !== viewToTabIndex(view)) {\n      onChange(tabIndexToView(value));\n    }\n  };\n\n  return (\n    <Paper>\n      <Tabs\n        variant=\"fullWidth\"\n        value={viewToTabIndex(view)}\n        onChange={handleChange}\n        className={classes.tabs}\n        indicatorColor={indicatorColor}\n      >\n        <Tab value=\"date\" icon={<>{dateRangeIcon}</>} />\n        <Tab value=\"time\" icon={<>{timeIcon}</>} />\n      </Tabs>\n    </Paper>\n  );\n};\n\nDateTimePickerTabs.defaultProps = {\n  dateRangeIcon: <DateRangeIcon />,\n  timeIcon: <TimeIcon />,\n};\n\nexport default DateTimePickerTabs;\n","import React from 'react';\nimport SvgIcon, { SvgIconProps } from '@material-ui/core/SvgIcon';\n\nexport const DateRangeIcon: React.SFC<SvgIconProps> = props => {\n  return (\n    <SvgIcon {...props}>\n      <path d=\"M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z\" />\n      <path fill=\"none\" d=\"M0 0h24v24H0z\" />\n    </SvgIcon>\n  );\n};\n","import React from 'react';\nimport SvgIcon, { SvgIconProps } from '@material-ui/core/SvgIcon';\n\nexport const TimeIcon: React.SFC<SvgIconProps> = props => {\n  return (\n    <SvgIcon {...props}>\n      <path d=\"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\" />\n      <path fill=\"none\" d=\"M0 0h24v24H0z\" />\n      <path d=\"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z\" />\n    </SvgIcon>\n  );\n};\n","import * as React from 'react';\nimport Grid from '@material-ui/core/Grid';\nimport ToolbarText from '../_shared/ToolbarText';\nimport PickerToolbar from '../_shared/PickerToolbar';\nimport ToolbarButton from '../_shared/ToolbarButton';\nimport DateTimePickerTabs from './DateTimePickerTabs';\nimport { useUtils } from '../_shared/hooks/useUtils';\nimport { DateTimePickerView } from './DateTimePicker';\nimport { ToolbarComponentProps } from '../Picker/Picker';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport { useMeridiemMode } from '../TimePicker/TimePickerToolbar';\n\nexport const useStyles = makeStyles(\n  _ => ({\n    toolbar: {\n      paddingLeft: 16,\n      paddingRight: 16,\n      justifyContent: 'space-around',\n    },\n    separator: {\n      margin: '0 4px 0 2px',\n      cursor: 'default',\n    },\n  }),\n  { name: 'MuiPickerDTToolbar' }\n);\n\nexport const DateTimePickerToolbar: React.FC<ToolbarComponentProps> = ({\n  date,\n  openView,\n  setOpenView,\n  ampm,\n  hideTabs,\n  dateRangeIcon,\n  timeIcon,\n  onChange,\n}) => {\n  const utils = useUtils();\n  const classes = useStyles();\n  const showTabs = !hideTabs && typeof window !== 'undefined' && window.innerHeight > 667;\n  const { meridiemMode, handleMeridiemChange } = useMeridiemMode(date, ampm, onChange);\n  const theme = useTheme();\n  const rtl = theme.direction === 'rtl';\n\n  return (\n    <>\n      <PickerToolbar isLandscape={false} className={classes.toolbar}>\n        <Grid container justify=\"center\" wrap=\"nowrap\">\n          <Grid item container xs={5} justify=\"flex-start\" direction=\"column\">\n            <div>\n              <ToolbarButton\n                variant=\"subtitle1\"\n                onClick={() => setOpenView('year')}\n                selected={openView === 'year'}\n                label={utils.getYearText(date)}\n              />\n            </div>\n            <div>\n              <ToolbarButton\n                variant=\"h4\"\n                onClick={() => setOpenView('date')}\n                selected={openView === 'date'}\n                label={utils.getDateTimePickerHeaderText(date)}\n              />\n            </div>\n          </Grid>\n\n          <Grid\n            item\n            container\n            xs={6}\n            justify=\"center\"\n            alignItems=\"flex-end\"\n            direction={rtl ? 'row-reverse' : 'row'}\n          >\n            <ToolbarButton\n              variant=\"h3\"\n              onClick={() => setOpenView('hours')}\n              selected={openView === 'hours'}\n              label={utils.getHourText(date, ampm!)}\n            />\n\n            <ToolbarText variant=\"h3\" label=\":\" className={classes.separator} />\n\n            <ToolbarButton\n              variant=\"h3\"\n              onClick={() => setOpenView('minutes')}\n              selected={openView === 'minutes'}\n              label={utils.getMinuteText(date)}\n            />\n          </Grid>\n\n          {ampm && (\n            <Grid item container xs={1} direction=\"column\" justify=\"flex-end\">\n              <ToolbarButton\n                variant=\"subtitle1\"\n                selected={meridiemMode === 'am'}\n                label={utils.getMeridiemText('am')}\n                onClick={() => handleMeridiemChange('am')}\n              />\n\n              <ToolbarButton\n                variant=\"subtitle1\"\n                selected={meridiemMode === 'pm'}\n                label={utils.getMeridiemText('pm')}\n                onClick={() => handleMeridiemChange('pm')}\n              />\n            </Grid>\n          )}\n        </Grid>\n      </PickerToolbar>\n\n      {showTabs && (\n        <DateTimePickerTabs\n          dateRangeIcon={dateRangeIcon}\n          timeIcon={timeIcon}\n          view={openView as DateTimePickerView}\n          onChange={setOpenView}\n        />\n      )}\n    </>\n  );\n};\n","import { useUtils } from '../_shared/hooks/useUtils';\nimport { PureDateInput } from '../_shared/PureDateInput';\nimport { BaseTimePickerProps } from '../TimePicker/TimePicker';\nimport { BaseDatePickerProps } from '../DatePicker/DatePicker';\nimport { DateTimePickerToolbar } from './DateTimePickerToolbar';\nimport { KeyboardDateInput } from '../_shared/KeyboardDateInput';\nimport { usePickerState } from '../_shared/hooks/usePickerState';\nimport { pick12hOr24hFormat } from '../_helpers/text-field-helper';\nimport { dateTimePickerDefaultProps } from '../constants/prop-types';\nimport { useKeyboardPickerState } from '../_shared/hooks/useKeyboardPickerState';\nimport {\n  WithKeyboardInputProps,\n  makePickerWithState,\n  WithPureInputProps,\n} from '../Picker/makePickerWithState';\n\nexport type DateTimePickerView = 'year' | 'date' | 'month' | 'hours' | 'minutes';\n\nexport type BaseDateTimePickerProps = BaseTimePickerProps & BaseDatePickerProps;\n\nexport interface DateTimePickerViewsProps extends BaseDateTimePickerProps {\n  /** Array of views to show */\n  views?: ('year' | 'date' | 'month' | 'hours' | 'minutes')[];\n  /** First view to show in DatePicker */\n  openTo?: 'year' | 'date' | 'month' | 'hours' | 'minutes';\n  /** To show tabs */\n  hideTabs?: boolean;\n  /** Date tab icon */\n  dateRangeIcon?: React.ReactNode;\n  /** Time tab icon */\n  timeIcon?: React.ReactNode;\n}\n\nexport type DateTimePickerProps = WithPureInputProps & DateTimePickerViewsProps;\n\nexport type KeyboardDateTimePickerProps = WithKeyboardInputProps & DateTimePickerViewsProps;\n\nconst defaultProps = {\n  ...dateTimePickerDefaultProps,\n  wider: true,\n  orientation: 'portrait' as const,\n  openTo: 'date' as DateTimePickerView,\n  views: ['year', 'date', 'hours', 'minutes'] as DateTimePickerView[],\n};\n\nfunction useOptions(props: DateTimePickerProps | KeyboardDateTimePickerProps) {\n  const utils = useUtils();\n\n  if (props.orientation !== 'portrait') {\n    throw new Error('We are not supporting custom orientation for DateTimePicker yet :(');\n  }\n\n  return {\n    getDefaultFormat: () =>\n      pick12hOr24hFormat(props.format, props.ampm, {\n        '12h': utils.dateTime12hFormat,\n        '24h': utils.dateTime24hFormat,\n      }),\n  };\n}\n\nexport const DateTimePicker = makePickerWithState<DateTimePickerProps>({\n  useOptions,\n  Input: PureDateInput,\n  useState: usePickerState,\n  DefaultToolbarComponent: DateTimePickerToolbar,\n});\n\nexport const KeyboardDateTimePicker = makePickerWithState<KeyboardDateTimePickerProps>({\n  useOptions,\n  Input: KeyboardDateInput,\n  useState: useKeyboardPickerState,\n  DefaultToolbarComponent: DateTimePickerToolbar,\n  getCustomProps: props => ({\n    refuse: props.ampm ? /[^\\dap]+/gi : /[^\\d]+/gi,\n  }),\n});\n\nDateTimePicker.defaultProps = defaultProps;\n\nKeyboardDateTimePicker.defaultProps = defaultProps;\n","import { i18n } from '@lingui/core'\nimport { DateTimePicker, DateTimePickerProps } from '@material-ui/pickers'\nimport React from 'react'\n\nimport { formatFullDateTime } from '../helpers/formats'\nimport { DateTimeFormatProvider } from './DateTimeFormatProvider'\nimport { Printer } from './Printer'\n\nexport const InputDateTime: React.FC<\n  DateTimePickerProps & NoChildren\n> = props => {\n  return (\n    <DateTimeFormatProvider>\n      <Printer\n        toPrint={\n          <div>\n            {props.label} {formatFullDateTime(props.value as Date)}\n          </div>\n        }\n      >\n        <DateTimePicker\n          hideTabs\n          variant=\"inline\"\n          format=\"PPPp\"\n          ampm={false}\n          maxDateMessage={i18n.t`Date is too much in the future`}\n          minDateMessage={i18n.t`Date is too much in the past`}\n          {...props}\n        />\n      </Printer>\n    </DateTimeFormatProvider>\n  )\n}\n","import { i18n } from '@lingui/core'\nimport { DatePicker, DatePickerProps } from '@material-ui/pickers'\nimport React from 'react'\n\nimport { DateTimeFormatProvider } from './DateTimeFormatProvider'\n\nexport const InputDate: React.FC<DatePickerProps & NoChildren> = props => {\n  return (\n    <DateTimeFormatProvider>\n      <DatePicker\n        variant=\"inline\"\n        format=\"PPP\"\n        maxDateMessage={i18n.t`Date is too much in the future`}\n        minDateMessage={i18n.t`Date is too much in the past`}\n        {...props}\n      />\n    </DateTimeFormatProvider>\n  )\n}\n","import { DatePickerProps } from '@material-ui/pickers'\nimport { useXField, useXFormState, XFieldName } from '@speedlo/xform'\nimport { useObserver } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { InputDate } from '../../atoms/InputDate'\n\ntype TProps = NoChildren &\n  Omit<DatePickerProps, 'value' | 'onChange'> & {\n    fieldName: XFieldName\n  }\n\nexport const FormInputDate = React.memo<TProps>(\n  ({ fieldName, ...pickerProps }) => {\n    const field = useXField<Maybe<Date>>(fieldName)\n    const formState = useXFormState()\n    return useObserver(() => (\n      <InputDate\n        value={field.value}\n        onChange={field.setValue}\n        onOpen={field.setTouched}\n        disabled={formState.isSubmitting}\n        {...pickerProps}\n      />\n    ))\n  },\n)\n","import React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(React.Fragment, null, React.createElement(\"path\", {\n  d: \"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\"\n}), React.createElement(\"path\", {\n  d: \"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z\"\n})), 'AccessTime');","import React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(\"path\", {\n  d: \"M22 10l-6-6H4c-1.1 0-2 .9-2 2v12.01c0 1.1.9 1.99 2 1.99l16-.01c1.1 0 2-.89 2-1.99v-8zm-7-4.5l5.5 5.5H15V5.5z\"\n}), 'Note');","import React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(React.Fragment, null, React.createElement(\"path\", {\n  fill: \"none\",\n  d: \"M0 0h24v24H0V0z\",\n  opacity: \".87\"\n}), React.createElement(\"path\", {\n  d: \"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3.59-13L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41z\"\n})), 'CancelOutlined');","import React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(React.Fragment, null, React.createElement(\"path\", {\n  d: \"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z\"\n}), React.createElement(\"path\", {\n  fill: \"none\",\n  d: \"M0 0h24v24H0z\"\n})), 'Star');","import React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(\"path\", {\n  d: \"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z\"\n}), 'Phone');","import React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(\"path\", {\n  d: \"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H4V8l8 5 8-5v10zm-8-7L4 6h16l-8 5z\"\n}), 'MailOutline');","import React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(\"path\", {\n  d: \"M18.92 6.01C18.72 5.42 18.16 5 17.5 5h-11c-.66 0-1.21.42-1.42 1.01L3 12v8c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h12v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-8l-2.08-5.99zM6.5 16c-.83 0-1.5-.67-1.5-1.5S5.67 13 6.5 13s1.5.67 1.5 1.5S7.33 16 6.5 16zm11 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zM5 11l1.5-4.5h11L19 11H5z\"\n}), 'DirectionsCar');","import React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(\"path\", {\n  d: \"M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm2 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z\"\n}), 'Assignment');","import React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(\"path\", {\n  d: \"M19 3H5c-1.1 0-2 .9-2 2v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 6h-4c0 1.62-1.38 3-3 3s-3-1.38-3-3H5V5h14v4zm-4 7h6v3c0 1.1-.9 2-2 2H5c-1.1 0-2-.9-2-2v-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3z\"\n}), 'AllInbox');","import { AllInbox, Assignment } from '@material-ui/icons'\nimport React from 'react'\n\nimport { i18n } from '../../../i18n'\nimport { Colors } from '../../../styling'\nimport {\n  ROUTE_OVERVIEW_CLOSURE,\n  ROUTE_OVERVIEW_STATS_ORDERS,\n  ROUTE_OVERVIEW_STATS_SALES,\n} from '../../overview/overview.routes'\nimport { ROUTE_STOCK_STATS } from '../../stock/stock.routes'\nimport { DashboardButton } from '../atoms/DashboardButton'\nimport { DashboardPage } from '../molecules/DashboardPage'\n\ninterface IProps {}\n\nexport const OverviewPage: React.FC<IProps> = () => (\n  <DashboardPage>\n    <DashboardButton\n      row={1}\n      column={1}\n      canQuery=\"statistics\"\n      text={i18n.t`Orders statistics`}\n      icon={Assignment}\n      color={Colors.turquoise}\n      route={ROUTE_OVERVIEW_STATS_ORDERS}\n    />\n    <DashboardButton\n      row={1}\n      column={2}\n      canQuery=\"statistics\"\n      text={i18n.t`Sales statistics`}\n      icon={Assignment}\n      color={Colors.turquoise}\n      route={ROUTE_OVERVIEW_STATS_SALES}\n    />\n    <DashboardButton\n      row={1}\n      column={3}\n      canQuery=\"lastFinancialReport\"\n      text={i18n.t`Closure`}\n      icon={Assignment}\n      color={Colors.turquoise}\n      route={ROUTE_OVERVIEW_CLOSURE}\n    />\n    <DashboardButton\n      row={2}\n      column={1}\n      canQuery=\"stockItems\"\n      canAccessWithSingleBranch={false}\n      text={i18n.t`Stock statistics`}\n      icon={AllInbox}\n      color={Colors.turquoise}\n      route={ROUTE_STOCK_STATS}\n    />\n  </DashboardPage>\n)\n","import { Trans } from '@lingui/macro'\nimport React from 'react'\n\nimport { FlexColumn } from '../../../atoms/FlexColumn'\nimport { FlexRowSingle } from '../../../atoms/FlexRowSingle'\nimport { FormInputDate } from '../../../components/forms/FormInputDate'\nimport { FormSubmitButton } from '../../../components/forms/FormSubmitButton'\n\nexport const ClosureHistoryFilter = () => {\n  return (\n    <FlexRowSingle justify=\"flex-start\">\n      <FlexColumn fixedWidth={true} width=\"12rem\">\n        <FormInputDate\n          fieldName=\"dateFrom\"\n          label={<Trans>From date</Trans>}\n          autoOk={true}\n        />\n      </FlexColumn>\n      <FlexColumn fixedWidth={true} width=\"12rem\">\n        <FormInputDate\n          fieldName=\"dateTo\"\n          label={<Trans>To date</Trans>}\n          autoOk={true}\n        />\n      </FlexColumn>\n      <FlexColumn>\n        <FormSubmitButton width=\"15rem\">\n          <Trans>Show history for branch</Trans>\n        </FormSubmitButton>\n      </FlexColumn>\n    </FlexRowSingle>\n  )\n}\n","import { createStatePersistence } from '@speedlo/hooks'\nimport React from 'react'\n\nimport { SelectControl } from '../../atoms/SelectControl'\nimport { FCompanyBranchFragment } from '../../graph/generated'\nimport { formatBranchName } from '../../helpers/formats'\nimport { useDropdownFilter } from '../../hooks/useDropdownFilter'\nimport { useDropdownSingle } from '../../hooks/useDropdownSingle'\nimport { useQueryParams } from '../../hooks/useQueryParams'\nimport { useUserModel } from '../../hooks/useUserModel'\nimport { i18n } from '../../i18n'\nimport { idProp, idPropEq } from '../../tools/ramda'\n\nexport const useBranchFilterEditable = createStatePersistence<MaybeID>(\n  'branch',\n  null,\n)\n\ntype TProps = NoChildren\n\nexport const BranchFilter: React.FC<TProps> = () => {\n  const userModel = useUserModel()\n  const [branch, setBranch] = useBranchFilterEditable()\n\n  const { getQueryParam } = useQueryParams()\n  const branchId = getQueryParam('branchId')\n\n  React.useEffect(() => {\n    if (branchId) {\n      setBranch(branchId)\n    }\n  }, [setBranch, branchId])\n\n  const selectProps = {\n    options: userModel.branches,\n    placeholder: i18n.t`Filter branch...`,\n    formatOptionLabel: opt => formatBranchName(opt),\n    hideOnSingleOption: true,\n    getOptionValue: idProp,\n  }\n\n  const dropdownProps = useDropdownSingle<FCompanyBranchFragment>({\n    ...selectProps,\n    onSelectionChange: setBranch,\n    selected: branch,\n  })\n\n  const filterProps = useDropdownFilter({\n    getOptionFilter: formatBranchName,\n  })\n\n  return (\n    <SelectControl<FCompanyBranchFragment>\n      {...dropdownProps}\n      {...filterProps}\n      {...selectProps}\n    />\n  )\n}\n\nexport function useBranchFilter(withUserDefaultBranchWhenEmpty = true): ID {\n  const userModel = useUserModel()\n  const [persistedBranch, setPersistedBranch] = useBranchFilterEditable()\n\n  const hasPersistedBranch = persistedBranch !== null\n  const hasAccessToPersistedBranch = Boolean(\n    hasPersistedBranch && userModel.branches.find(idPropEq(persistedBranch)),\n  )\n\n  React.useEffect(() => {\n    if (hasPersistedBranch && !hasAccessToPersistedBranch) {\n      setPersistedBranch(null)\n    }\n  }, [hasAccessToPersistedBranch, hasPersistedBranch, setPersistedBranch])\n\n  const noBranchSelected = !hasPersistedBranch || !hasAccessToPersistedBranch\n  const userHasOnlyOneBranch = userModel.branches.length === 1\n\n  if (\n    userHasOnlyOneBranch ||\n    (noBranchSelected && withUserDefaultBranchWhenEmpty)\n  ) {\n    return userModel.defaultBranch.id\n  }\n  // ? Not sure how to enforce return type correct to be always ID\n  // @ts-ignore\n  return persistedBranch\n}\n","import { useNow } from '@speedlo/hooks'\nimport { XForm } from '@speedlo/xform'\nimport { subDays } from 'date-fns'\nimport React from 'react'\n\nimport { useBranchFilter } from '../../../components/filters/BranchFilter'\nimport {\n  QClosureHistoryHistory,\n  useLazyQClosureHistory,\n} from '../../../graph/generated'\n\nexport type TReport = QClosureHistoryHistory\n\ntype TClosureHistoryCtx = {\n  history?: RoA<TReport>\n  loading: boolean\n  called: boolean\n}\n\nconst context = React.createContext<TClosureHistoryCtx>({\n  called: false,\n  loading: false,\n})\n\nexport const useClosureHistory = () => React.useContext(context)!\n\nexport const ClosureHistoryLoader: React.FC<Required<SomeChildren>> = ({\n  children,\n}) => {\n  const [execute, result] = useLazyQClosureHistory()\n  const getNow = useNow()\n\n  const ctx: TClosureHistoryCtx = {\n    loading: result.loading,\n    called: result.called,\n    history: result.data && result.data.history,\n  }\n\n  const branch = useBranchFilter(false)\n\n  return (\n    <XForm\n      onSubmit={(formValues: { dateFrom: Date; dateTo: Date }) => {\n        if (branch) {\n          execute({\n            branchId: branch,\n            dateFrom: formValues.dateFrom,\n            dateTo: formValues.dateTo,\n          })\n        }\n      }}\n      initialValues={{ dateFrom: subDays(getNow(), 1), dateTo: getNow() }}\n    >\n      <context.Provider value={ctx}>{children}</context.Provider>\n    </XForm>\n  )\n}\n","import { Trans } from '@lingui/macro'\nimport { Edit } from '@material-ui/icons'\nimport { observer } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { FlexColumn } from '../../../atoms/FlexColumn'\nimport { FlexRow } from '../../../atoms/FlexRow'\nimport { Headline } from '../../../atoms/Headline'\nimport { Loading } from '../../../atoms/Loading'\nimport { RelativeLink } from '../../../atoms/RelativeLink'\nimport { SizerButton } from '../../../atoms/SizerButton'\nimport { useBranchFilter } from '../../../components/filters/BranchFilter'\nimport { formatFullDateTime } from '../../../helpers/formats'\nimport { TouchButton } from '../../../molecules/TouchButton'\nimport { useClosureHistory } from '../organisms/ClosureHistoryLoader'\n\nexport const ClosureHistoryTable = observer(() => {\n  const { history, loading, called } = useClosureHistory()\n  const branch = useBranchFilter(false)\n  if (!called) {\n    return null\n  }\n  if (loading) {\n    return (\n      <Headline>\n        <Loading />\n      </Headline>\n    )\n  }\n  if (!branch) {\n    return (\n      <Headline>\n        <Trans>Select a branch</Trans>\n      </Headline>\n    )\n  }\n  if (!history || history.length === 0) {\n    return (\n      <Headline>\n        <Trans>No closures found</Trans>\n      </Headline>\n    )\n  }\n  return (\n    <>\n      {history.map(report => (\n        <FlexRow key={report.id}>\n          <FlexColumn fixedWidth={true}>\n            <RelativeLink to={`../${report.id}`}>\n              <SizerButton>\n                <TouchButton icon={Edit} />\n              </SizerButton>\n            </RelativeLink>\n          </FlexColumn>\n          <FlexColumn widthGrowIndex={1}>\n            {`[${report.reportSequence}] ${formatFullDateTime(\n              report.reportDatetime,\n            )}`}\n          </FlexColumn>\n        </FlexRow>\n      ))}\n    </>\n  )\n})\n","import React from 'react'\nimport { Link } from 'react-router-dom'\n\nimport { CanQuery } from '../../../atoms/CanQuery'\nimport { i18n } from '../../../i18n'\nimport { TouchButton } from '../../../molecules/TouchButton'\nimport { Colors, Spacing } from '../../../styling'\nimport { ROUTE_OVERVIEW_CLOSURE } from '../overview.routes'\n\ninterface IProps {}\n\nexport const ClosureCurrentButton: React.FC<IProps> = props => {\n  return (\n    <CanQuery queryName=\"lastFinancialReport\">\n      <Link to={ROUTE_OVERVIEW_CLOSURE}>\n        <TouchButton\n          text={i18n.t`Current closure`}\n          color={Colors.orange}\n          width=\"15rem\"\n          height={Spacing.ButtonHeight + Spacing.DefaultSizeUnit}\n        />\n      </Link>\n    </CanQuery>\n  )\n}\n","import { observer } from 'mobx-react-lite'\nimport React from 'react'\nimport styled from 'styled-components'\n\nimport { BranchFilter } from '../../../components/filters/BranchFilter'\nimport { ClosureCurrentButton } from './ClosureCurrentButton'\n\nconst ButtonToRight = styled.div`\n  float: right;\n  margin: 0.5rem;\n`\n\ninterface IProps {\n  showCurrent: boolean\n}\n\nexport const ClosureStatisticsFilter = observer<IProps>(({ showCurrent }) => {\n  return (\n    <>\n      <BranchFilter />\n      {showCurrent && (\n        <ButtonToRight>\n          <ClosureCurrentButton />\n        </ButtonToRight>\n      )}\n    </>\n  )\n})\n","import React from 'react'\n\nimport { Card } from '../../../atoms/Card'\nimport { i18n } from '../../../i18n'\nimport { FullPageLayout } from '../../../molecules/FullPageLayout'\nimport { ClosureHistoryFilter } from '../molecules/ClosureHistoryFilter'\nimport { ClosureHistoryTable } from '../molecules/ClosureHistoryTable'\nimport { ClosureStatisticsFilter } from '../molecules/ClosureStatisticsFilter'\nimport { ClosureHistoryLoader } from '../organisms/ClosureHistoryLoader'\n\ninterface IProps {}\n\nexport const ClosureHistoryPage: React.FC<IProps> = props => (\n  <ClosureHistoryLoader>\n    <FullPageLayout\n      pageTitle={i18n.t`Closure history`}\n      useBackButton={true}\n      backRoute=\"/overview\"\n    >\n      <Card>\n        <ClosureStatisticsFilter showCurrent={true} />\n        <ClosureHistoryFilter />\n      </Card>\n      <Card>\n        <ClosureHistoryTable />\n      </Card>\n    </FullPageLayout>\n  </ClosureHistoryLoader>\n)\n","import React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(\"path\", {\n  d: \"M19 8H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3zm-3 11H8v-5h8v5zm3-7c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm-1-9H6v4h12V3z\"\n}), 'Print');","import { Print } from '@material-ui/icons'\nimport React from 'react'\n\nimport { SizerButton } from '../atoms/SizerButton'\nimport { TouchButton } from './TouchButton'\n\ntype TProps = NoChildren\n\nexport const TouchButtonPrint: React.FC<TProps> = props => {\n  return (\n    <>\n      <SizerButton>\n        <TouchButton icon={Print} onClick={() => window.print()} />\n      </SizerButton>\n    </>\n  )\n}\n","import React from 'react'\nimport styled from 'styled-components/macro'\n\nimport { mediaMobile } from '../app/Responsive'\nimport { Colors } from '../styling'\n\ninterface IProps {\n  text: string\n  scrollable?: boolean\n}\n\nconst StyledMonospaceOutput = styled.p`\n  color: ${Colors.white};\n  font-family: Menlo, 'Roboto Mono', 'Lucida Console', monospace;\n  white-space: pre-wrap;\n  margin: 0.2rem 0.5rem 0.5rem 0;\n  line-height: 1.8rem;\n  ${mediaMobile`\n    width: max-content;\n  `};\n  @media print {\n    color: ${Colors.black};\n    font-size: 9pt;\n    page-break-inside: auto;\n  }\n`\n\nexport const StyledScrollableContainer = styled.div`\n  padding: 0.5rem;\n  display: inline-block;\n  overflow-x: auto;\n  -webkit-overflow-scrolling: touch;\n  width: 100%;\n\n  ${mediaMobile`\n  padding: 0;\n  `};\n  @media print {\n    display: block;\n    overflow-x: visible;\n    page-break-inside: auto;\n  }\n`\n\nconst formatOutput = (output: string) =>\n  // eslint-disable-next-line no-control-regex\n  output.replace(new RegExp('\\t', 'g'), '\\u0009')\n\nconst renderContent = (text: string) => (\n  <StyledMonospaceOutput>{formatOutput(text)}</StyledMonospaceOutput>\n)\n\nexport const MonospaceOutput: React.FC<IProps> = ({\n  text,\n  scrollable = false,\n}) =>\n  scrollable ? (\n    <StyledScrollableContainer>{renderContent(text)}</StyledScrollableContainer>\n  ) : (\n    renderContent(text)\n  )\n","import { observer } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { MonospaceOutput } from '../../../atoms/MonospaceOutput'\nimport { useBranchFilter } from '../../../components/filters/BranchFilter'\nimport { useQClosureReport } from '../../../graph/generated'\nimport { i18n } from '../../../i18n'\n\ninterface IProps {\n  reportId?: string\n}\n\nexport const ClosureStatisticsContent = observer<IProps>(\n  ({ reportId = '' }) => {\n    const branch = useBranchFilter()\n    const skip = !branch\n    const { data, error, loading } = useQClosureReport(\n      {\n        branchId: branch!,\n        reportId,\n        showReport: Boolean(reportId),\n      },\n      { skip },\n    )\n\n    if (skip) {\n      return <MonospaceOutput text={i18n.t`Select a branch`} />\n    }\n\n    if (loading) {\n      return <MonospaceOutput text={i18n.t`Computing`} />\n    }\n\n    if (error || !data) {\n      return null\n    }\n\n    return (\n      <MonospaceOutput\n        scrollable={true}\n        text={\n          reportId && data.report\n            ? data.report.plainData\n            : data.lastReport.plainData\n        }\n      />\n    )\n  },\n)\n","import React from 'react'\nimport { Link } from 'react-router-dom'\n\nimport { CanQuery } from '../../../atoms/CanQuery'\nimport { i18n } from '../../../i18n'\nimport { TouchButton } from '../../../molecules/TouchButton'\nimport { Colors, Spacing } from '../../../styling'\nimport { ROUTE_OVERVIEW_CLOSURE_HISTORY } from '../overview.routes'\n\ninterface IProps {}\n\nexport const ClosureHistoryButton: React.FC<IProps> = props => {\n  return (\n    <CanQuery queryName=\"financialReports\">\n      <Link to={ROUTE_OVERVIEW_CLOSURE_HISTORY}>\n        <TouchButton\n          text={i18n.t`Closure history`}\n          color={Colors.greyDark}\n          width=\"15rem\"\n          height={Spacing.ButtonHeight + Spacing.DefaultSizeUnit}\n        />\n      </Link>\n    </CanQuery>\n  )\n}\n","import { Trans } from '@lingui/macro'\nimport React from 'react'\n\nimport { CanMutate } from '../../../atoms/CanMutate'\nimport { Sizer } from '../../../atoms/Sizer'\nimport { ConfirmButton } from '../../../molecules/ConfirmButton'\nimport { Colors } from '../../../styling'\n\nexport interface IProps {\n  onClick(): void\n  disabled: boolean\n}\n\nexport const ClosureSubmitButton: React.FC<IProps> = ({\n  onClick,\n  disabled,\n}) => (\n  <CanMutate mutationName=\"createFinancialReport\">\n    <Sizer width={12}>\n      <ConfirmButton\n        onConfirm={onClick}\n        initialColor={Colors.green}\n        confirmNode={<Trans>Are you sure?</Trans>}\n        confirmColor={Colors.orange}\n        disabled={disabled}\n      >\n        <Trans>Create closure</Trans>\n      </ConfirmButton>\n    </Sizer>\n  </CanMutate>\n)\n","import { useRouterContext } from '@speedlo/hooks'\nimport { useObserver } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { FlexRowSingle } from '../../../atoms/FlexRowSingle'\nimport { MarginBox } from '../../../atoms/MarginBox'\nimport { useBranchFilter } from '../../../components/filters/BranchFilter'\nimport { useMFinancialReportCreate } from '../../../graph/generated'\nimport { useSnackBar } from '../../../hooks/useSnackBar'\nimport { i18n } from '../../../i18n'\nimport { Spacing } from '../../../styling'\nimport { ClosureCurrentButton } from '../molecules/ClosureCurrentButton'\nimport { ClosureHistoryButton } from '../molecules/ClosureHistoryButton'\nimport { ClosureSubmitButton } from '../molecules/ClosureSubmitButton'\nimport { ROUTE_OVERVIEW_CLOSURE } from '../overview.routes'\n\ninterface IProps {\n  showCurrent: boolean\n}\n\nexport const ClosureStatisticsControl: React.FC<IProps> = ({ showCurrent }) => {\n  const { enqueueSuccess } = useSnackBar()\n  const { history } = useRouterContext()\n\n  const branchId = useBranchFilter(false)\n  const [createClosure] = useMFinancialReportCreate()\n\n  const onSubmit = React.useCallback(async () => {\n    if (!branchId) {\n      return\n    }\n    const data = await createClosure({\n      branchId,\n    })\n    if (data) {\n      const { id } = data.result\n      history.push(`${ROUTE_OVERVIEW_CLOSURE}/${id}`)\n      enqueueSuccess(i18n.t`Closure has been created`)\n    }\n  }, [branchId, createClosure, enqueueSuccess, history])\n\n  return useObserver(() => (\n    <MarginBox margin={`${Spacing.Middle} 0 0 0`}>\n      <FlexRowSingle>\n        {showCurrent ? (\n          <ClosureCurrentButton />\n        ) : (\n          <ClosureSubmitButton onClick={onSubmit} disabled={!branchId} />\n        )}\n        <ClosureHistoryButton />\n      </FlexRowSingle>\n    </MarginBox>\n  ))\n}\n","import React from 'react'\nimport { RouteComponentProps } from 'react-router-dom'\n\nimport { Card } from '../../../atoms/Card'\nimport { i18n } from '../../../i18n'\nimport { FullPageLayout } from '../../../molecules/FullPageLayout'\nimport { TouchButtonPrint } from '../../../molecules/TouchButtonPrint'\nimport { ClosureStatisticsContent } from '../molecules/ClosureStatisticsContent'\nimport { ClosureStatisticsFilter } from '../molecules/ClosureStatisticsFilter'\nimport { ClosureStatisticsControl } from '../organisms/ClosureStatisticsControl'\nimport { ROUTE_OVERVIEW_DASHBOARD } from '../overview.routes'\n\ninterface IRouteParams {\n  reportId?: string\n}\n\ninterface IProps extends RouteComponentProps<IRouteParams> {}\n\nexport const ClosurePage: React.FC<IProps> = ({ match }) => (\n  <FullPageLayout\n    pageTitle={i18n.t`Closure`}\n    useBackButton={true}\n    backRoute={ROUTE_OVERVIEW_DASHBOARD}\n    topContent={<TouchButtonPrint />}\n  >\n    <Card>\n      <ClosureStatisticsFilter showCurrent={false} />\n      <ClosureStatisticsControl showCurrent={Boolean(match.params.reportId)} />\n    </Card>\n    <ClosureStatisticsContent reportId={match.params.reportId} />\n  </FullPageLayout>\n)\n","import React from 'react'\n\nimport {\n  QFilterCountriesCountries,\n  useQFilterCountries,\n} from '../../graph/generated'\nimport { ARRAY_EMPTY } from '../../helpers/form'\nimport { i18n } from '../../i18n'\nimport { RM } from '../../tools/ramda'\nimport { FormDropdownSingle } from '../forms/FormDropdownSingle'\n\ntype TCountry = QFilterCountriesCountries\n\nexport const CountryFilter = React.memo<NoChildren>(() => {\n  const { getStash, loading } = useQFilterCountries()\n\n  return (\n    <FormDropdownSingle<TCountry>\n      fieldName=\"country\"\n      placeholder={i18n.t`Filter by country`}\n      noOptionsMessage={() => i18n.t`No countries`}\n      options={getStash(data => data.countries) || ARRAY_EMPTY}\n      isLoading={loading}\n      isClearable={true}\n      getOptionLabel={RM.prop('code')}\n      getOptionFilter={RM.prop('code')}\n      getOptionValue={RM.prop('enum')}\n    />\n  )\n})\n","import React from 'react'\n\nimport { FDriverFragment, useQFilterDrivers } from '../../graph/generated'\nimport { ARRAY_EMPTY } from '../../helpers/form'\nimport { formatFullName } from '../../helpers/formats'\nimport { i18n } from '../../i18n'\nimport { FormDropdownMulti } from '../forms/FormDropdownMulti'\nimport { useBranchesFilter } from './BranchesFilter'\n\ntype TDriver = FDriverFragment\n\nexport const DriversFilter = React.memo<NoChildren>(() => {\n  const branches = useBranchesFilter()\n  const { getStash, loading } = useQFilterDrivers({\n    branches,\n  })\n  return (\n    <FormDropdownMulti<TDriver>\n      fieldName=\"drivers\"\n      isLoading={loading}\n      options={getStash(data => data.drivers) || ARRAY_EMPTY}\n      placeholder={i18n.t`Filter by drivers`}\n      formatOptionLabel={formatFullName}\n      getOptionFilter={formatFullName}\n    />\n  )\n})\n","import { useXForm } from '@speedlo/xform'\nimport { endOfDay, startOfDay } from 'date-fns'\nimport React from 'react'\n\nimport { useBranchesFilter } from '../../../components/filters/BranchesFilter'\nimport {\n  CountryEnum,\n  InputStatisticCreate,\n  OrderOriginEnum,\n} from '../../../graph/generated'\n\nconst context = React.createContext<InputStatisticCreate | undefined>(undefined)\n\nexport const StatsFilterProvider = context.Provider\n\nexport const useStatsFilterCurrent = () => React.useContext(context)\n\ntype TFilter =\n  | 'driver'\n  | 'cashbox'\n  | 'cashier'\n  | 'sector'\n  | 'origin'\n  | 'occasion'\n  | 'country'\n\nexport function useStatsFilter(...enabledFilters: RoA<TFilter>) {\n  const [filter, setFilter] = React.useState<InputStatisticCreate | undefined>(\n    undefined,\n  )\n\n  const initialValues = React.useMemo(\n    () => ({\n      dateTimeFrom: startOfDay(new Date()),\n      dateTimeTo: endOfDay(new Date()),\n      cashboxes: [] as ID[],\n      cashiers: [] as ID[],\n      drivers: [] as ID[],\n      sectors: [] as ID[],\n      occassions: [] as ID[],\n      origins: [] as OrderOriginEnum[],\n      country: null as Maybe<CountryEnum>,\n    }),\n    [],\n  )\n\n  const enabledFiltersRef = React.useRef(enabledFilters)\n\n  const applyFilter = React.useCallback(\n    <T extends TFilter, V>(name: T, value: V) => {\n      return enabledFiltersRef.current.includes(name) ? value : null\n    },\n    [],\n  )\n\n  const branches = useBranchesFilter()\n\n  const onSubmit = React.useCallback(\n    (values: typeof initialValues) => {\n      setFilter({\n        branches,\n        dateTimeFrom: values.dateTimeFrom,\n        dateTimeTo: values.dateTimeTo,\n        drivers: applyFilter('driver', values.drivers),\n        cashBoxes: applyFilter('cashbox', values.cashboxes),\n        cashiers: applyFilter('cashier', values.cashiers),\n        sectors: applyFilter('sector', values.sectors),\n        orderOrigins: applyFilter('origin', values.origins),\n        occasions: applyFilter('occasion', values.occassions),\n        country: applyFilter('country', values.country),\n        sectorsWithChildren: true,\n      })\n    },\n    [applyFilter, branches, initialValues],\n  )\n\n  const xform = useXForm({\n    onSubmit,\n    initialValues,\n  })\n\n  return {\n    filter,\n    xform,\n    executeFilter: xform.api.submitForm,\n  }\n}\n","import { Trans } from '@lingui/macro'\nimport React from 'react'\nimport { AutoSizer, CellMeasurer, CellMeasurerCache, IndexRange, InfiniteLoader, List } from 'react-virtualized'\n\nimport { Loading } from '../../../atoms/Loading'\nimport {\n  OrderStateCategoryEnum,\n  QStatsOrdersListList,\n  useLazyQStatsOrdersList,\n  useQStatsOrdersCounts,\n} from '../../../graph/generated'\nimport { OrderBox } from '../../order/atoms/OrderBox'\nimport { useStatsFilterCurrent } from '../hooks/useStatsFilter'\n\nexport const OrdersStatisticsList: React.FC = () => {\n  const filter = useStatsFilterCurrent()\n\n  const orders = React.useRef(new Map<number, QStatsOrdersListList>())\n  const loaderRef = React.useRef<InfiniteLoader | null>(null)\n  const measureCache = React.useMemo(\n    () =>\n      new CellMeasurerCache({\n        fixedWidth: true,\n        defaultHeight: 55,\n        minHeight: 55,\n      }),\n    [],\n  )\n\n  const { getStash, loading: countsLoading } = useQStatsOrdersCounts(\n    { filter: filter! },\n    { skip: !filter },\n  )\n\n  React.useEffect(() => {\n    orders.current.clear()\n    measureCache.clearAll()\n    if (loaderRef.current) {\n      loaderRef.current.resetLoadMoreRowsCache(true)\n    }\n  }, [filter, measureCache])\n\n  const [executeList] = useLazyQStatsOrdersList()\n\n  const queryMoreOrders = React.useCallback(\n    async ({ startIndex, stopIndex }: IndexRange) => {\n      if (filter) {\n        const data = await executeList({\n          filter,\n          pagination: {\n            fromIndex: startIndex,\n            toIndex: stopIndex,\n          },\n        })\n\n        if (data) {\n          const list = [...data.stats.orders.list]\n          for (let index = startIndex; index <= stopIndex; index++) {\n            const order = list.shift()\n            if (order) {\n              orders.current.set(index, order)\n            }\n          }\n        }\n      }\n    },\n    [executeList, filter],\n  )\n\n  const isRowLoaded = React.useCallback(\n    ({ index }) => orders.current.get(index) !== undefined,\n    [],\n  )\n\n  const rowRenderer = React.useCallback(\n    ({ index, key, style, parent }) => {\n      const order = orders.current.get(index)\n      if (order === undefined) {\n        return (\n          <div style={style} key={key}>\n            ...\n          </div>\n        )\n      }\n      return (\n        <CellMeasurer\n          key={key}\n          columnIndex={0}\n          rowIndex={index}\n          cache={measureCache}\n          parent={parent}\n        >\n          {({ measure }) => (\n            <div style={style}>\n              <OrderBox\n                order={order}\n                // eslint-disable-next-line no-restricted-globals\n                showBranch={(filter?.branches?.length ?? 0) > 1}\n                isCancelled={\n                  order.orderStateCategory === OrderStateCategoryEnum.Cancel\n                }\n                onToggleDetail={() => {\n                  setTimeout(measure, 500)\n                }}\n              />\n            </div>\n          )}\n        </CellMeasurer>\n      )\n    },\n    [measureCache, filter],\n  )\n\n  if (!filter) {\n    return null\n  }\n\n  if (countsLoading) {\n    return <Loading />\n  }\n\n  const totalCount = getStash(data => {\n    const { finished, cancelled } = data.stats.counts\n    return finished + cancelled\n  })\n\n  if (!totalCount) {\n    return <Trans>No orders</Trans>\n  }\n\n  return (\n    <AutoSizer>\n      {({ width, height }) => (\n        <InfiniteLoader\n          rowCount={totalCount}\n          isRowLoaded={isRowLoaded}\n          loadMoreRows={queryMoreOrders}\n          ref={loaderRef}\n        >\n          {({ onRowsRendered, registerChild }) => (\n            <List\n              ref={registerChild}\n              onRowsRendered={onRowsRendered}\n              rowHeight={measureCache.rowHeight}\n              deferredMeasurementCache={measureCache}\n              rowCount={totalCount}\n              width={width}\n              height={height}\n              rowRenderer={rowRenderer}\n            />\n          )}\n        </InfiniteLoader>\n      )}\n    </AutoSizer>\n  )\n}\n","import { Trans } from '@lingui/macro'\nimport { observer } from 'mobx-react-lite'\nimport React from 'react'\nimport styled from 'styled-components/macro'\n\nimport { mediaDesktop, mediaMobile } from '../../../app/Responsive'\nimport { MonospaceOutput } from '../../../atoms/MonospaceOutput'\nimport { useQStatsOrders } from '../../../graph/generated'\nimport { formatPrice } from '../../../helpers/formats'\nimport { i18n } from '../../../i18n'\nimport { useStatsFilterCurrent } from '../hooks/useStatsFilter'\n\nconst StyledStatPanel = styled.div`\n  display: inline-block;\n  ${mediaDesktop`\n  margin: 1.4rem 4rem 0 0.5rem;\n  `};\n  ${mediaMobile`\n    margin: 0rem 1rem 0 1rem;\n  `};\n`\n\nconst StyledStatLabel = styled.h1`\n  font-weight: normal;\n  margin: 0;\n  ${mediaDesktop`\n  font-size: 1.2rem;\n  `};\n  ${mediaMobile`\n    font-size: 0.9rem;\n  `};\n`\n\nconst StyledStatValue = styled.h2`\n  font-weight: normal;\n  margin: 0;\n  ${mediaDesktop`\n    font-size: 3.3rem;\n  `};\n  ${mediaMobile`\n    font-size: 1.7rem;\n  `};\n`\n\nexport const OrdersStatisticsSummary = observer(() => {\n  const filter = useStatsFilterCurrent()\n  const { data, loading } = useQStatsOrders(\n    { filter: filter! },\n    { skip: !filter },\n  )\n\n  if (!filter) {\n    return null\n  }\n\n  if (loading) {\n    return <MonospaceOutput text={i18n.t`Computing`} />\n  }\n\n  const stats = data && data.stats.finishedOrders\n  if (!stats) {\n    return null\n  }\n\n  return (\n    <>\n      <StyledStatPanel>\n        <StyledStatLabel>\n          <Trans>Total turnover</Trans>\n        </StyledStatLabel>\n        <StyledStatValue>\n          {formatPrice(stats.total.value, stats.total.currency.code)}\n        </StyledStatValue>\n      </StyledStatPanel>\n      <StyledStatPanel>\n        <StyledStatLabel>\n          <Trans>Online payments</Trans>\n        </StyledStatLabel>\n        <StyledStatValue>\n          {formatPrice(\n            stats.onlinePayments.value,\n            stats.onlinePayments.currency.code,\n          )}\n        </StyledStatValue>\n      </StyledStatPanel>\n      <StyledStatPanel>\n        <StyledStatLabel>\n          <Trans>Orders count</Trans>\n        </StyledStatLabel>\n        <StyledStatValue>\n          {stats.finishedCount + stats.cancelledCount}\n        </StyledStatValue>\n      </StyledStatPanel>\n      <StyledStatPanel>\n        <StyledStatLabel>\n          <Trans>Total commissions</Trans>\n        </StyledStatLabel>\n        <StyledStatValue>\n          {formatPrice(stats.fees.value, stats.fees.currency.code)}\n        </StyledStatValue>\n      </StyledStatPanel>\n\n      <MonospaceOutput\n        text={data!.stats.orderStatisticsPlain}\n        scrollable={true}\n      />\n    </>\n  )\n})\n","import { DateTimePickerProps } from '@material-ui/pickers'\nimport { useXField, useXFormState, XFieldName } from '@speedlo/xform'\nimport { useObserver } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { InputDateTime } from '../../atoms/InputDateTime'\n\ntype TProps = NoChildren &\n  Omit<DateTimePickerProps, 'value' | 'onChange'> & {\n    fieldName: XFieldName\n  }\n\nexport const FormInputDateTime = React.memo<TProps>(\n  ({ fieldName, ...pickerProps }) => {\n    const field = useXField<Maybe<Date>>(fieldName)\n    const formState = useXFormState()\n    return useObserver(() => (\n      <InputDateTime\n        value={field.value}\n        onChange={field.setValue}\n        onOpen={field.setTouched}\n        disabled={formState.isSubmitting}\n        {...pickerProps}\n      />\n    ))\n  },\n)\n","import { Plural, Trans } from '@lingui/react'\nimport { useObserver } from 'mobx-react-lite'\nimport React from 'react'\nimport styled from 'styled-components/macro'\n\nimport { FlexColumn } from '../../../atoms/FlexColumn'\nimport { FlexRowSingle } from '../../../atoms/FlexRowSingle'\nimport { useBranchesFilter } from '../../../components/filters/BranchesFilter'\nimport { FormInputDateTime } from '../../../components/forms/FormInputDateTime'\nimport { FormSubmitButton } from '../../../components/forms/FormSubmitButton'\n\nconst StyledStatisticsFilter = styled(FlexRowSingle)`\n  flex-wrap: wrap;\n`\n\nexport const StatisticsPrimaryFilter = () => {\n  const branches = useBranchesFilter()\n  return useObserver(() => (\n    <StyledStatisticsFilter justify=\"flex-start\">\n      <FlexColumn fixedWidth={true} width=\"12rem\">\n        <FormInputDateTime\n          fieldName=\"dateTimeFrom\"\n          label={<Trans>From</Trans>}\n          autoOk={true}\n        />\n      </FlexColumn>\n      <FlexColumn fixedWidth={true} width=\"12rem\">\n        <FormInputDateTime\n          fieldName=\"dateTimeTo\"\n          label={<Trans>To</Trans>}\n          autoOk={true}\n        />\n      </FlexColumn>\n      <FlexColumn>\n        <FormSubmitButton width=\"15rem\">\n          <Plural\n            value={branches.length}\n            one=\"Show for one branch\"\n            few=\"Show for # branches\"\n            other=\"Show for # branches\"\n          />\n        </FormSubmitButton>\n      </FlexColumn>\n    </StyledStatisticsFilter>\n  ))\n}\n","import { useNow, useRouteParams, useRouterNavigate } from '@speedlo/hooks'\nimport { XFormRender } from '@speedlo/xform'\nimport { endOfDay, startOfDay } from 'date-fns/esm'\nimport React from 'react'\n\nimport { useBranchesFilterEditable } from '../../../components/filters/BranchesFilter'\nimport { useOrderListModel } from '../../order/hooks/useOrderListModel'\nimport { StatsFilterProvider, useStatsFilter } from '../hooks/useStatsFilter'\nimport { ROUTE_OVERVIEW_STATS_ORDERS } from '../overview.routes'\n\nexport const OrdersStatisticsLoader: React.FC<Required<SomeChildren>> = ({\n  children,\n}) => {\n  const navigate = useRouterNavigate({})\n  const params = useRouteParams<{ autoFilter: 'today' }>(\n    `${ROUTE_OVERVIEW_STATS_ORDERS}/:autoFilter`,\n  )\n\n  const { filter, xform, executeFilter } = useStatsFilter('driver', 'country')\n\n  const getNow = useNow()\n  const orderListModel = useOrderListModel()\n  const [, setBranches] = useBranchesFilterEditable()\n\n  React.useEffect(() => {\n    if (params && params.autoFilter === 'today') {\n      navigate({ to: ROUTE_OVERVIEW_STATS_ORDERS, replace: true })\n      xform.api.mergeValues({\n        dateTimeFrom: startOfDay(getNow()),\n        dateTimeTo: endOfDay(getNow()),\n      })\n      setBranches(orderListModel.branchesFilter)\n      executeFilter()\n    }\n  }, [\n    executeFilter,\n    getNow,\n    navigate,\n    orderListModel,\n    params,\n    setBranches,\n    xform.api,\n  ])\n\n  return (\n    <XFormRender xform={xform}>\n      <StatsFilterProvider value={filter}>{children}</StatsFilterProvider>\n    </XFormRender>\n  )\n}\n","import React from 'react'\n\nimport { Card } from '../../../atoms/Card'\nimport { AutoHeight } from '../../../atoms/FlexAutoHeight'\nimport { PageLayoutGridItem } from '../../../atoms/PageLayoutGridItem'\nimport { BranchesFilter } from '../../../components/filters/BranchesFilter'\nimport { CountryFilter } from '../../../components/filters/CountryFilter'\nimport { DriversFilter } from '../../../components/filters/DriversFilter'\nimport { i18n } from '../../../i18n'\nimport { PageLayoutFullHeightItem } from '../../../molecules/PageLayoutFullHeightItem'\nimport { PageLayoutResponsive } from '../../../molecules/PageLayoutResponsive'\nimport { TouchButtonPrint } from '../../../molecules/TouchButtonPrint'\nimport { OrdersStatisticsList } from '../molecules/OrdersStatisticsList'\nimport { OrdersStatisticsSummary } from '../molecules/OrdersStatisticsSummary'\nimport { StatisticsPrimaryFilter } from '../molecules/StatisticsPrimaryFilter'\nimport { OrdersStatisticsLoader } from '../organisms/OrdersStatisticsLoader'\n\nexport const OrdersStatisticsPage = React.memo<NoChildren>(() => (\n  <OrdersStatisticsLoader>\n    <PageLayoutResponsive\n      pageTitle={i18n.t`Orders statistics`}\n      showSoundControl={false}\n      useBackButton={true}\n      topContent={<TouchButtonPrint />}\n    >\n      <PageLayoutGridItem gridColumn=\"1 / span 9\" gridRow=\"1\">\n        <Card>\n          <BranchesFilter />\n          <CountryFilter />\n          <DriversFilter />\n          <StatisticsPrimaryFilter />\n        </Card>\n      </PageLayoutGridItem>\n\n      <PageLayoutGridItem gridColumn=\"1 / span 9\" gridRow=\"2\">\n        <OrdersStatisticsSummary />\n      </PageLayoutGridItem>\n\n      <PageLayoutFullHeightItem\n        withScrollArea={false}\n        row={1}\n        column={9}\n        widthInColumns={7}\n        forcePercentHeightInMobile={90}\n      >\n        <AutoHeight>\n          <OrdersStatisticsList />\n        </AutoHeight>\n      </PageLayoutFullHeightItem>\n    </PageLayoutResponsive>\n  </OrdersStatisticsLoader>\n))\n","import React from 'react'\n\nimport {\n  QFilterCashboxesCashBoxes,\n  useQFilterCashboxes,\n} from '../../graph/generated'\nimport { ARRAY_EMPTY } from '../../helpers/form'\nimport { i18n } from '../../i18n'\nimport { FormDropdownMulti } from '../forms/FormDropdownMulti'\nimport { useBranchesFilter } from './BranchesFilter'\n\ntype TCashbox = QFilterCashboxesCashBoxes\n\nexport const CashboxesFilter = React.memo<NoChildren>(() => {\n  const branches = useBranchesFilter()\n  const { getStash, loading } = useQFilterCashboxes({\n    branches,\n  })\n  return (\n    <FormDropdownMulti<TCashbox>\n      fieldName=\"cashboxes\"\n      isLoading={loading}\n      options={getStash(data => data.cashBoxes) || ARRAY_EMPTY}\n      placeholder={i18n.t`Filter by cashbox`}\n      formatOptionLabel={formatCashboxName}\n      getOptionFilter={formatCashboxName}\n    />\n  )\n})\n\nfunction formatCashboxName({ name, uuid }: TCashbox) {\n  return name || uuid\n}\n","import React from 'react'\n\nimport {\n  QFilterCashiersCashiers,\n  useQFilterCashiers,\n} from '../../graph/generated'\nimport { ARRAY_EMPTY } from '../../helpers/form'\nimport { formatFullName } from '../../helpers/formats'\nimport { i18n } from '../../i18n'\nimport { FormDropdownMulti } from '../forms/FormDropdownMulti'\nimport { useBranchesFilter } from './BranchesFilter'\n\ntype TCashier = QFilterCashiersCashiers\n\nexport const CashiersFilter = React.memo<NoChildren>(() => {\n  const branches = useBranchesFilter()\n  const { getStash, loading } = useQFilterCashiers({\n    branches,\n  })\n  return (\n    <FormDropdownMulti<TCashier>\n      fieldName=\"cashiers\"\n      isLoading={loading}\n      options={getStash(data => data.cashiers) || ARRAY_EMPTY}\n      placeholder={i18n.t`Filter by cashier`}\n      formatOptionLabel={formatFullName}\n      getOptionFilter={formatFullName}\n    />\n  )\n})\n","import React from 'react'\n\nimport { QFilterOriginsOrigins, useQFilterOrigins } from '../../graph/generated'\nimport { ARRAY_EMPTY } from '../../helpers/form'\nimport { i18n } from '../../i18n'\nimport { RM } from '../../tools/ramda'\nimport { FormDropdownMulti } from '../forms/FormDropdownMulti'\n\ntype TOrigin = QFilterOriginsOrigins\n\nexport const OriginsFilter = React.memo<NoChildren>(() => {\n  const { getStash, loading } = useQFilterOrigins()\n\n  return (\n    <FormDropdownMulti<TOrigin>\n      fieldName=\"origins\"\n      placeholder={i18n.t`Filter by order origins`}\n      noOptionsMessage={() => i18n.t`No origins`}\n      options={getStash(data => data.origins) || ARRAY_EMPTY}\n      isLoading={loading}\n      getOptionLabel={RM.prop('code')}\n      getOptionFilter={RM.prop('code')}\n      getOptionValue={RM.prop('enum')}\n    />\n  )\n})\n","import { Trans } from '@lingui/macro'\nimport React from 'react'\n\nimport { Headline } from '../../../atoms/Headline'\nimport { MarginBox } from '../../../atoms/MarginBox'\nimport { MonospaceOutput } from '../../../atoms/MonospaceOutput'\nimport { useQStatsSales } from '../../../graph/generated'\nimport { i18n } from '../../../i18n'\nimport { useStatsFilterCurrent } from '../hooks/useStatsFilter'\n\nconst StatsDisplay: React.FC<{ plain: string }> = ({ plain, children }) => {\n  return (\n    <>\n      <MarginBox margin=\"1.5rem 0 0 0\">\n        <Headline light={true}>{children}</Headline>\n      </MarginBox>\n      <MonospaceOutput text={plain} scrollable={true} />\n    </>\n  )\n}\n\nexport const SalesStatisticsContent: React.FC = () => {\n  const filter = useStatsFilterCurrent()\n  const { data, loading } = useQStatsSales(\n    { filter: filter! },\n    { skip: !filter },\n  )\n\n  if (!filter) {\n    return null\n  }\n\n  if (loading) {\n    return <MonospaceOutput text={i18n.t`Computing`} />\n  }\n\n  const sales = data && data.sales\n  if (!sales) {\n    return null\n  }\n\n  return (\n    <>\n      <StatsDisplay plain={sales.daily}>\n        <Trans>Daily statistics</Trans>\n      </StatsDisplay>\n\n      <StatsDisplay plain={sales.vat}>\n        <Trans>VAT overview</Trans>\n      </StatsDisplay>\n\n      <StatsDisplay plain={sales.category}>\n        <Trans>By category</Trans>\n      </StatsDisplay>\n\n      <StatsDisplay plain={sales.delivery}>\n        <Trans>By type</Trans>\n      </StatsDisplay>\n\n      <StatsDisplay plain={sales.drivers}>\n        <Trans>By driver</Trans>\n      </StatsDisplay>\n    </>\n  )\n}\n","import { XFormRender } from '@speedlo/xform'\nimport React from 'react'\n\nimport { StatsFilterProvider, useStatsFilter } from '../hooks/useStatsFilter'\n\nexport const SalesStatisticsLoader: React.FC<Required<SomeChildren>> = ({\n  children,\n}) => {\n  const { filter, xform } = useStatsFilter(\n    'cashbox',\n    'cashier',\n    'sector',\n    'origin',\n    'occasion',\n  )\n  return (\n    <XFormRender xform={xform}>\n      <StatsFilterProvider value={filter}>{children}</StatsFilterProvider>\n    </XFormRender>\n  )\n}\n","import React from 'react'\n\nimport { Card } from '../../../atoms/Card'\nimport { FlexColumn } from '../../../atoms/FlexColumn'\nimport { FlexRowSingle } from '../../../atoms/FlexRowSingle'\nimport { BranchesFilter } from '../../../components/filters/BranchesFilter'\nimport { CashboxesFilter } from '../../../components/filters/CashboxesFilter'\nimport { CashiersFilter } from '../../../components/filters/CashiersFilter'\nimport { OccasionsFilter } from '../../../components/filters/OccasionsFilter'\nimport { OriginsFilter } from '../../../components/filters/OriginsFilter'\nimport { SectorsFilter } from '../../../components/filters/SectorsFilter'\nimport { i18n } from '../../../i18n'\nimport { FullPageLayout } from '../../../molecules/FullPageLayout'\nimport { TouchButtonPrint } from '../../../molecules/TouchButtonPrint'\nimport { SalesStatisticsContent } from '../molecules/SalesStatisticsContent'\nimport { StatisticsPrimaryFilter } from '../molecules/StatisticsPrimaryFilter'\nimport { SalesStatisticsLoader } from '../organisms/SalesStatisticsLoader'\n\nexport const SalesStatisticsPage: React.FC = () => (\n  <FullPageLayout\n    pageTitle={i18n.t`Sales statistics`}\n    useBackButton={true}\n    topContent={<TouchButtonPrint />}\n  >\n    <SalesStatisticsLoader>\n      <Card>\n        <FlexRowSingle justify=\"flex-start\" flexWrap=\"wrap\">\n          <FlexColumn widthGrowIndex={1}>\n            <BranchesFilter />\n            <CashboxesFilter />\n            <CashiersFilter />\n          </FlexColumn>\n          <FlexColumn widthGrowIndex={1}>\n            <OccasionsFilter />\n            <SectorsFilter />\n            <OriginsFilter />\n          </FlexColumn>\n        </FlexRowSingle>\n        <StatisticsPrimaryFilter />\n      </Card>\n      <SalesStatisticsContent />\n    </SalesStatisticsLoader>\n  </FullPageLayout>\n)\n","import React from 'react'\nimport { Route, Switch } from 'react-router-dom'\n\nimport { PageTitle } from '../../../atoms/PageTitle'\nimport { i18n } from '../../../i18n'\nimport { NotFoundPage } from '../../../pages/NotFoundPage'\nimport { SecureRoute } from '../../../routes/SecureRoute'\nimport { OverviewPage } from '../../dashboard/pages/StatsDashboardPage'\nimport {\n  ROUTE_OVERVIEW_CLOSURE,\n  ROUTE_OVERVIEW_CLOSURE_HISTORY,\n  ROUTE_OVERVIEW_DASHBOARD,\n  ROUTE_OVERVIEW_STATS_ORDERS,\n  ROUTE_OVERVIEW_STATS_SALES,\n} from '../overview.routes'\nimport { ClosureHistoryPage } from '../pages/ClosureHistoryPage'\nimport { ClosurePage } from '../pages/ClosurePage'\nimport { OrdersStatisticsPage } from '../pages/OrdersStatisticsPage'\nimport { SalesStatisticsPage } from '../pages/SalesStatisticsPage'\n\ninterface IProps {}\n\nexport const OverviewRouting: React.FC<IProps> = () => (\n  <>\n    <PageTitle title={i18n.t`Overview`} />\n    <Switch>\n      <SecureRoute\n        exact\n        path={ROUTE_OVERVIEW_DASHBOARD}\n        component={OverviewPage}\n      />\n      <SecureRoute\n        path={ROUTE_OVERVIEW_CLOSURE_HISTORY}\n        component={ClosureHistoryPage}\n      />\n      <SecureRoute\n        path={`${ROUTE_OVERVIEW_CLOSURE}/:reportId?`}\n        component={ClosurePage}\n      />\n      <SecureRoute\n        path={ROUTE_OVERVIEW_STATS_SALES}\n        component={SalesStatisticsPage}\n      />\n      <SecureRoute\n        path={ROUTE_OVERVIEW_STATS_ORDERS}\n        component={OrdersStatisticsPage}\n      />\n      <Route component={NotFoundPage} />\n    </Switch>\n  </>\n)\n\nexport default OverviewRouting\n"],"sourceRoot":""}