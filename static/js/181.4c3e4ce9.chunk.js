(window.webpackJsonp=window.webpackJsonp||[]).push([[181],{6836:function(e,n,t){"use strict";t.d(n,"a",function(){return b});var r=t(5),a=t(27),o=t(0),i=t.n(o),c=t(52),l=t(6846),u=t(135),d=t(20);function f(){var e=Object(r.a)(["\n    margin: 0;\n    grid-row: "," ;\n    grid-column: span 16;\n    height: "," ;\n    position: relative;\n  "]);return f=function(){return e},e}function s(){var e=Object(r.a)(["\n  position: fixed;\n  bottom: 0.5rem;\n  width: ",";\n  left: ",";\n  top: ",";"]);return s=function(){return e},e}var m=a.default.div.withConfig({displayName:"PageLayoutFullHeightItem__StyledPageLayoutFullHeightItem",componentId:"sc-1mean6j-0"})([""," ",""],Object(c.c)(s(),function(e){return void 0!==e.widthInColumns?"calc(("+e.widthInColumns+" * 6.22vw) - "+d.d.LayoutGridCellMargin+")":"calc(100vh - (2 * "+d.d.LayoutGridCellMargin+"))"},function(e){return void 0!==e.column?"calc(("+e.column+" * 6.22vw) + "+d.d.LayoutGridCellMargin+")":d.d.LayoutGridCellMargin},function(e){return void 0!==e.row?"calc(("+e.row+" * 3.9375rem) + "+d.d.LayoutGridCellMargin+")":"calc(3.9375rem + "+d.d.LayoutGridCellMargin+")"}),Object(c.d)(f(),function(e){return e.rowInMobile},function(e){var n=e.forcePercentHeightInMobile;return n?"calc(".concat(n,"vh - ").concat(d.d.PageHeaderHeight+.25+d.d.DefaultSizeUnit,")"):"unset"})),b=function(e){var n=e.children,t=e.row,r=void 0===t?1:t,a=e.rowInMobile,o=void 0===a?16:a,c=e.column,d=void 0===c?0:c,f=e.widthInColumns,s=void 0===f?16:f,b=e.withScrollArea,v=void 0!==b&&b,h=e.scrollAreaId,p=e.forcePercentHeightInMobile;return i.a.createElement(m,{column:d,row:r,rowInMobile:o,widthInColumns:s,withScrollArea:v,forcePercentHeightInMobile:p},v?i.a.createElement(l.a,{id:h},n):i.a.createElement(u.a,{height:100,heightUnit:"%"},n))}},6837:function(e,n,t){"use strict";t.d(n,"a",function(){return o});var r=t(5);function a(){var e=Object(r.a)(["\n  display: flex;\n  flex-direction: row;\n  flex-wrap: ",";\n  justify-content: ",";\n"]);return a=function(){return e},e}var o=t(27).default.div(a(),function(e){var n=e.flexWrap;return void 0===n?"unset":n},function(e){var n=e.justify;return void 0===n?"space-between":n})},6841:function(e,n,t){"use strict";t.d(n,"a",function(){return o});var r=t(5);function a(){var e=Object(r.a)(["\n  height: ",";\n"]);return a=function(){return e},e}var o=t(27).default.div(a(),function(e){var n=e.size,t=void 0===n?1:n,r=e.sizeUnit,a=void 0===r?"rem":r;return"".concat(t).concat(a)});o.displayName="VerticalGap"},6846:function(e,n,t){"use strict";t.d(n,"a",function(){return o});var r=t(5);function a(){var e=Object(r.a)(["\n  overflow-y: auto;\n  -webkit-overflow-scrolling: touch;\n  height: 100%;\n"]);return a=function(){return e},e}var o=t(27).default.div(a())},6867:function(e,n,t){"use strict";t.d(n,"a",function(){return s}),t.d(n,"b",function(){return m});var r=t(90),a=t(6851),o=t(6826),i=t.n(o),c=t(6959),l=t(0),u=t.n(l),d=t(20),f=(u.a.createContext(null),["places"]),s=function(e){var n=e.model,t=e.children,o=u.a.useState(!1),i=Object(r.a)(o,2),l=i[0],s=i[1],m={streetViewControl:!1,mapTypeControl:!1,fullscreenControl:!1};return u.a.createElement(a.LoadScript,{id:"script-loader",googleMapsApiKey:"AIzaSyAMytFvlKm4fxw8LCcMHofNDHcrJ8ibOTY",language:"cz",region:"CS",libraries:f,version:"weekly",onLoad:function(){return s(!0)}},l?u.a.createElement(c.a,null,function(){return u.a.createElement(a.GoogleMap,{zoom:n.zoom,center:n.center,onCenterChanged:n.updatePosition,onZoomChanged:n.updateZoom,onLoad:n.setMapRef,options:m,mapContainerStyle:{borderRadius:d.c.Card,overflow:"hidden",height:"100%"}},t)}):null)};function m(){var e=Object(l.useContext)(i.a);if(!e)throw new Error("Trying to useGoogleMap, but BaseMap is missing in the tree");return e}},6906:function(e,n,t){"use strict";t.d(n,"a",function(){return c});var r=t(5),a=t(27),o=t(20);function i(){var e=Object(r.a)(["\n  color: ",";\n  font-weight: lighter;\n  font-size: 1.2rem;\n  margin: 0.8rem 0 0.8rem 0.3rem;\n"]);return i=function(){return e},e}var c=a.default.h2(i(),o.a.greyLight)},6912:function(e,n,t){"use strict";t.d(n,"a",function(){return h});var r=t(63),a=t(54),o=t(70),i=t(75),c=t(85),l=t(83),u=t(84),d=t(0),f=t.n(d),s=t(6827),m=t(32),b=t(43),v=t(6832),h=function(e){function n(){var e,t;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(t=Object(c.a)(this,(e=Object(l.a)(n)).call.apply(e,[this].concat(a)))).validate=function(e){return t.props.isRequired&&!e?b.b._("{0} must be selected",{0:t.props.validatioName}):null},t}return Object(u.a)(n,e),Object(i.a)(n,[{key:"getControlProps",value:function(e){var n=this.props,t=n.isMulti,r=n.options,a=n.getOptionValue,o=n.defaultValue,i=e.value||o;if(t){var c=Array.isArray(i)?function(e){return i.includes(a(e))}:m.a.F;return{value:Array.isArray(r)?r.filter(c):[],onChange:function(n){e.setValue(n.map(a))}}}return{value:i&&r.find(function(e){return a(e)===i}),onChange:function(n){e.setValue(a(n))}}}},{key:"render",value:function(){var e=this,n=this.props,t=n.field,o=n.fieldIsPure,i=void 0!==o&&o,c=(n.isRequired,n.defaultValue,Object(a.a)(n,["field","fieldIsPure","isRequired","defaultValue"]));return f.a.createElement(s.Field,{field:t,validate:this.validate,pure:i},function(n){return f.a.createElement(v.a,Object.assign({},e.getControlProps(n),{onFocus:function(){return n.setTouched(!0)},styles:{control:function(e){return Boolean(n.error)?Object(r.a)({},e,{borderColor:"red"}):e}}},c))})}}]),n}(f.a.Component);h.defaultProps={validatioName:"Value",getItemId:m.a.prop("id")}},6913:function(e,n,t){"use strict";t.d(n,"a",function(){return f});var r=t(5),a=t(0),o=t.n(a),i=t(6873),c=t(27),l=t(177);function u(){var e=Object(r.a)(["\n  padding: 1rem 0.4rem;\n  cursor: grab;\n"]);return u=function(){return e},e}var d=c.default.div(u()),f=Object(i.SortableHandle)(function(){return o.a.createElement(d,null,o.a.createElement(l.a,{iconName:"reorder"}))})},6920:function(e,n,t){"use strict";t.d(n,"a",function(){return a});var r=t(0),a=function(e){return Object(r.useEffect)(function(){e.isShow&&(window.confirm(e.confirmText)?e.onConfirm():e.onCancel())},[e.isShow]),null}},7990:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),o=t(79),i=t(208),c=t(43),l=t(6836),u=t(349),d=t(26),f=t.n(d),s=t(38),m=t(90),b=t(5),v=t(19),h=t(61),p=t(6827),g=t(370),E=t(27),O=t(6830),j=t(203),y=t(6920),w=t(350),C=t(53),z=t(40),x=t(66),k=t(32),I=t(207),S=t(6864),F=t(20),P=t(50);function B(){return Object(P.useRouterContext)().match.params.zoneId}function M(){var e=Object(C.b)(),n=e.user,t=e.zone,r=Object(P.useRouterContext)().history,a=function(e){return"".concat("/settings/zones","/").concat(e)};return{getRouteToZone:a,routeToZoneEdit:function(e){t.map.panToZone(e),n.canQuery("zone")&&r.push(a(e))},routeToZoneList:function(){r.push("/settings/zones")}}}var Z=t(93),L=t(6909),_=t(6833),R=t(6835),A=t(6829),T=t(6855);function D(){var e=Object(b.a)(["\n  border-left: 3px solid #707070;\n  width: 3px;\n  position: relative;\n  left: -2rem;\n  height: 4rem;\n  float: left;\n  margin: -0.5rem 0 0 0;\n"]);return D=function(){return e},e}function N(){var e=Object(b.a)(["\n  position: relative;\n  left: 4rem;\n  top: -0.3rem;\n  width: 3rem;\n"]);return N=function(){return e},e}function V(){var e=Object(b.a)(["\n  position: relative;\n  left: 8rem;\n  top: 0rem;\n"]);return V=function(){return e},e}function H(){var e=Object(b.a)(["\n  color: ",";\n"]);return H=function(){return e},e}function G(){var e=Object(b.a)(["\n  width: 3rem;\n  position: relative;\n  z-index: 4;\n"]);return G=function(){return e},e}function q(){var e=Object(b.a)(["\n  min-width: 2rem;\n  display: inline-block;\n"]);return q=function(){return e},e}var U=E.default.div(q()),W=Object(E.default)(_.a)(G()),J=Object(E.default)(W)(H(),F.a.blue),K=E.default.div(V()),Y=E.default.div(N()),$=E.default.div(D()),Q=function(e){if("number"===typeof e)return null;var n=e.trim();return n.length&&Number.isNaN(Number.parseFloat(n))?c.b._("Must be number"):null},X=a.a.forwardRef(function(e,n){var t=e.field,r=e.label,o=e.isDeliveryPrice,i=e.autoFocus,c=void 0!==i&&i;return o?a.a.createElement(K,null,a.a.createElement($,null),a.a.createElement(U,null,r),a.a.createElement(J,{field:t,validate:Q,ref:n})):a.a.createElement(Y,null,a.a.createElement(W,{field:t,validate:Q,autoFocus:c}))}),ee=t(205),ne=t(63),te=t(6912),re=t(210),ae=t(510);function oe(){var e=Object(b.a)(["\n  background-color: ",";\n  color: ",";\n  width: 6rem;\n  padding: 0.4rem 1rem;\n  margin: 0;\n  height: 100%;\n"]);return oe=function(){return e},e}var ie=E.default.div(oe(),function(e){return e.color},F.a.white),ce=Object(re.a)(ae.a),le=function(e){var n=e.field,t=void 0===n?"zoneColor.id":n;return a.a.createElement(ce,{render:function(e){var n=e.zoneColors;return a.a.createElement(te.a,{field:t,fieldIsPure:!0,options:Object(ee.a)(n),width:8,styles:{option:function(e){return Object(ne.a)({},e,{padding:0,margin:0})},menu:function(e){return Object(ne.a)({},e,{width:"8rem",maxWidth:"8rem"})}},defaultValue:k.a.head(n),getOptionValue:k.a.prop("id"),formatOptionLabel:function(e){return a.a.createElement(ie,{color:e.color},e.code)}})}})},ue=t(133),de=t(6834);function fe(){var e=Object(b.a)(["\n  margin: 0 0 0 1rem;\n"]);return fe=function(){return e},e}function se(){var e=Object(b.a)(["\n  width: 3rem;\n  position: relative;\n  z-index: 4;\n"]);return se=function(){return e},e}function me(){var e=Object(b.a)(["\n  width: 3rem;\n  display: inline-block;\n"]);return me=function(){return e},e}var be=E.default.div(me()),ve=Object(E.default)(de.a)(se()),he=E.default.div(fe()),pe=function(e){var n=e.label,t=e.display;return a.a.createElement(he,null,a.a.createElement(be,null,n),a.a.createElement(ve,{disabled:!0,placeholder:t}))};function ge(){var e=Object(b.a)(["\n  position: relative;\n  top: -7rem;\n  left: 16rem;\n  height: 0;\n"]);return ge=function(){return e},e}function Ee(){var e=Object(b.a)(["\n  position: relative;\n  top: -6rem;\n"]);return Ee=function(){return e},e}var Oe=E.default.div(Ee()),je=E.default.div(ge()),ye=function(e){var n=e.fieldApi;return a.a.createElement(a.a.Fragment,null,n.values.map(function(e,t,o){return a.a.createElement(r.Fragment,{key:t},a.a.createElement(X,{label:"za",isDeliveryPrice:!0,field:[t,"price","value"]}),t===o.length-1?a.a.createElement(pe,{display:"\u221e",label:"do"}):a.a.createElement(X,{field:[t,"toPrice","value"],autoFocus:!0}),o.length>1&&a.a.createElement(je,null,a.a.createElement(S.a,{onDelete:function(){return n.removeValue("",t)}})))}),a.a.createElement(p.FormApi,{render:function(e){return a.a.createElement(Oe,null,a.a.createElement(ue.a,{disabled:e.submitting,width:F.d.ButtonHeight+F.d.DefaultSizeUnit,iconName:"add_circle",onClick:function(){return n.addValue("",{price:{value:0},toPrice:{value:0}})}}))}}))};function we(){var e=Object(b.a)(["\n  color: ",";\n  padding-bottom: 0.2rem;\n"]);return we=function(){return e},e}function Ce(){var e=Object(b.a)(["\n  margin: ",";\n  color: ",";\n"]);return Ce=function(){return e},e}var ze=E.default.div(Ce(),F.d.Middle,F.a.black),xe=E.default.div(we(),F.a.greyDark),ke=function(e){return a.a.createElement(ze,null,a.a.createElement(A.a,{icon:"label"},a.a.createElement(_.a,{field:"name",validate:Object(T.b)(c.b._("Zone name"))})),a.a.createElement(A.a,{icon:"color_lens"},a.a.createElement(le,null)),a.a.createElement(L.a,{field:"enabled",name:"enabled",label:c.b._("Is active").toLocaleLowerCase()}),a.a.createElement(Z.Trans,{id:"<0>Delivery cost</0><1>according order total cost</1>",components:[a.a.createElement(R.a,{margin:"0.5rem 0 0 0"}),a.a.createElement(xe,null)]}),a.a.createElement(X,{field:"minimalOrderPrice.value"}),a.a.createElement(p.NestedField,{field:"priceRangeRules",component:ye}))},Ie=t(6843),Se=t(6837),Fe=function(e){var n=e.isSubmitting,t=e.isModified,r=e.onGoBack,o=e.onSave;return a.a.createElement(Se.a,null,a.a.createElement(Ie.a,{widthGrowIndex:.4,padding:"0"},a.a.createElement(ue.a,{color:F.a.greyMiddle,onClick:r,text:c.b._("Back"),disabled:n})),a.a.createElement(Ie.a,{widthGrowIndex:.4,padding:"0"},a.a.createElement(O.a,{mutationName:"updateZone"},a.a.createElement(ue.a,{color:F.a.green,text:c.b._("Save zone"),onClick:o,disabled:n||!t}))))},Pe=t(6);function Be(){var e=Object(b.a)(["\n  query GZones($branchesId: [ID!]!) {\n    zones(companyBranches: $branchesId) {\n      ...FZone\n    }\n  }\n  ","\n"]);return Be=function(){return e},e}var Me=t.n(Pe)()(Be(),z.i),Ze=Object(re.a)(Me),Le=a.a.createContext(null),_e=Object(h.observer)(function(e){var n=e.children,t=Object(C.b)().zone,r=t.branches.filter(t.branchFilterPredicate);return 0===r.length?a.a.createElement(Le.Provider,{value:[]},n):a.a.createElement(Ze,{fetchPolicy:"cache-and-network",variables:{branchesId:r.map(k.a.prop("id"))},renderLoading:!1,render:function(e,t){var r=e.zones,o=t.loading;return a.a.createElement(Le.Provider,{value:o?null:r},n)}})}),Re=function(){return Object(r.useContext)(Le)};function Ae(){var e=Object(b.a)(["\n  width: ",";\n  margin-top: ",";\n"]);return Ae=function(){return e},e}var Te=E.default.div(Ae(),F.d.ButtonHeight+F.d.DefaultSizeUnit,F.d.Middle),De=function(){var e=B(),n=Re(),t=Object(C.b)().zone,o=M().routeToZoneList,i=Object(r.useState)(!1),l=Object(m.a)(i,2),u=l[0],d=l[1],b=Object(r.useRef)(null),E=Object(I.a)(),F=E.enqueueError,P=E.enqueueSuccess,Z=Object(z.T)(),L=Object(m.a)(Z,1)[0],_=Object(r.useCallback)(function(){var n=Object(s.a)(f.a.mark(function n(r){return f.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=5;break}return n.next=3,L(t.getZoneVariables(e,r));case 3:n.sent&&(d(!1),o(),P(c.b._("Zone has been updated")));case 5:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}(),[e]),R=Object(r.useCallback)(Object(s.a)(f.a.mark(function n(){return f.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=3;break}return n.next=3,t.destroyZone(e);case 3:o();case 4:case"end":return n.stop()}},n)})),[e]);Object(h.useDisposable)(function(){return Object(v.reaction)(function(){return null!==t.map.currentZonePoints},d)}),a.a.useEffect(function(){n&&0===n.length&&(F(c.b._("Requested zone wasn't found")),o())},[n]);var A=e&&n&&n.find(k.a.propEq("id",e))||null;return a.a.useEffect(function(){t.map.clearZonePoints()},[A]),A?a.a.createElement(p.Form,{defaultValues:A,onChange:function(e){Object(x.b)("zone form change",e.values),d(!0)},onSubmit:_,render:function(e){return b.current=e,a.a.createElement(j.a,{padding:0},a.a.createElement(Fe,{isSubmitting:e.submitting,isModified:u,onSave:e.submitForm,onGoBack:o}),a.a.createElement(ke,null),a.a.createElement(O.a,{mutationName:"destroyZone"},a.a.createElement(Te,null,a.a.createElement(S.a,{disabled:e.submitting,confirmText:c.b._("Remove zone {0}?",{0:A.name}),onDelete:R}))),a.a.createElement(g.b,{when:u},function(e){var n=e.isShow,t=e.handleOk,r=e.handleCancel;return a.a.createElement(y.a,{isShow:n,confirmText:c.b._("Do you want to cancel changes for the zone?"),onConfirm:t,onCancel:r})}))}}):a.a.createElement(w.a,{text:c.b._("Loading form...")})},Ne=t(6867),Ve=t(6851),He=t(112);function Ge(){var e=Object(b.a)(["\n    background-color: ",";\n    color: ",";\n  "]);return Ge=function(){return e},e}function qe(){var e=Object(b.a)(["\n  "," font-size: 1.3rem;\n  white-space: nowrap;\n  padding: 0.2rem 0.5rem;\n"]);return qe=function(){return e},e}var Ue=E.default.div(qe(),function(e){var n=e.isActive;return Object(E.css)(Ge(),n?F.a.green:F.a.greyLight,n?F.a.white:F.a.greyDark)}),We=function(e){var n=e.branch,t=e.isActive,r=void 0===t||t;return a.a.createElement(Ve.OverlayView,{getPixelPositionOffset:function(e,n){return{x:-e/2,y:-n/2}},mapPaneName:Ve.OverlayView.MARKER_LAYER,position:Object(He.b)(n.gps)},a.a.createElement(Ue,{isActive:r},n.name))};var Je=function(e){var n=a.a.useCallback(function(n){e.onFocus&&(n.stop(),e.onFocus())},[e.onFocus]),t=e.points,r=e.color,o=e.priority;return a.a.createElement(Ve.Polygon,{path:t.map(He.b),options:{fillColor:r,fillOpacity:.3,strokeWeight:0,zIndex:5e3-o},editable:!1,draggable:!1,onDblClick:n})},Ke=function(e){var n=a.a.useRef(null),t=a.a.useRef([]),r=a.a.useCallback(function(){if(n.current){var t=n.current.getPath();e.onChange(t.getArray().map(He.d))}},[e.onChange]),o=a.a.useCallback(function(e){n.current=e;var a=e.getPath();t.current.push(a.addListener("set_at",r),a.addListener("insert_at",r),a.addListener("remove_at",r))},[]),i=a.a.useCallback(function(){e.onClear(),t.current.forEach(function(e){return e.remove()}),n.current=null},[]),c=e.points,l=e.color;return a.a.createElement(Ve.Polygon,{path:c.map(He.b),options:{fillColor:l,fillOpacity:.6,strokeWeight:2,zIndex:1e4},editable:!0,draggable:!0,onDragEnd:r,onLoad:o,onUnmount:i})};function Ye(){return Object(C.b)().zone}var $e=function(){var e=Ye(),n=B(),t=Re(),o=M().routeToZoneEdit,i=e.branches.filter(e.branchFilterPredicate),c=function(n){return!e.hasBranchFilter||n===e.branchFilterId};a.a.useEffect(function(){return Object(v.autorun)(function(){e.branch&&e.map.isReady&&e.map.panToBranch(e.branch)})},[]);var l=Object(r.useCallback)(function(e){return a.a.createElement(We,{key:"branch".concat(e.id),branch:e,isActive:c(e.id)})},[]);return a.a.createElement(Ne.a,{model:e.map},t&&t.map(function(t){var r={key:"zone".concat(t.id),points:t.geoPolygon,priority:t.priority,color:c(t.companyBranch.id)&&t.enabled?t.zoneColor.color:F.a.greyMiddle};return t.id===n?a.a.createElement(Ke,Object.assign({},r,{onChange:e.map.updateZonePoints,onClear:e.map.clearZonePoints})):a.a.createElement(Je,Object.assign({},r,{onFocus:function(){c(t.companyBranch.id)&&o(t.id)}}))}),i&&i.map(l))},Qe=t(6846),Xe=Object(h.observer)(function(e){var n=e.children;return Object(C.b)().user.hasSingleBranch?null:n}),en=t(6844),nn=Object(h.observer)(function(){var e=Ye(),n=M().routeToZoneEdit;return a.a.createElement(ue.a,{text:e.hasBranchFilter?c.b._("Create zone for branch"):c.b._("Select branch to create zone"),onClick:function(){return e.createZone(n)},disabled:!e.hasBranchFilter,color:F.a.turquoise,textNextToIcon:!0,height:F.d.ButtonHeight+F.d.DefaultSizeUnit,iconName:"add_circle"})}),tn=t(6994),rn=t(6906),an=t(489),on=t(482),cn=t(91),ln=t(483),un=t(168),dn=t(484),fn=t(488),sn=t(485),mn=t(6873),bn=t(6913),vn=t(346);function hn(){var e=Object(b.a)(["\n  height: ",";\n"]);return hn=function(){return e},e}function pn(){var e=Object(b.a)(["\n  font-size: 0.875rem;\n"]);return pn=function(){return e},e}function gn(){var e=Object(b.a)(["\n  font-size: 1.125rem;\n  margin-top: 0.2rem;\n"]);return gn=function(){return e},e}var En=E.default.div(gn()),On=E.default.div(pn()),jn=Object(E.default)(Se.a)(hn(),F.d.ButtonHeight+F.d.DefaultSizeUnit),yn=Object(mn.SortableElement)(function(e){var n=e.zone,t=e.branch,r=e.onEdit;return a.a.createElement(j.a,{key:n.id,padding:0,color:n.enabled?n.zoneColor.color:F.a.greyMiddle,onClick:r},a.a.createElement(jn,null,a.a.createElement(Ie.a,{fixedWidth:!0,padding:"0 0.5rem 0 0"},a.a.createElement(vn.a,null,a.a.createElement(ue.a,{iconName:"mode_edit"}))),a.a.createElement(Ie.a,{widthGrowIndex:1},a.a.createElement(En,null,n.name," [P".concat(n.priority,"]")),a.a.createElement(On,null,t.name)),a.a.createElement(Ie.a,{padding:"0"},a.a.createElement(bn.a,null))))});function wn(){var e=Object(b.a)(["\n  margin-top: 0.5rem;\n  cursor: arrow;\n"]);return wn=function(){return e},e}var Cn=Object(mn.SortableContainer)(E.default.div(wn())),zn=an.a([on.a(cn.a(["companyBranch","name"])),ln.a(un.a("priority"))]),xn=dn.a(function(e){return e.companyBranch.id}),kn=function(e){var n,t,o=e.branches,i=e.zones,c=e.zoneModel,l=e.onZoneEdit,u=function(e,n){return a.a.createElement(yn,{key:e.id,zone:e,branch:o.find(fn.a("id",e.companyBranch.id)),index:n,collection:e.companyBranch.id,onEdit:function(){return l(e.id)}})};if(1===o.length){var d=zn(i);n=d.map(u),t=function(e){var n=e.oldIndex,t=e.newIndex,r=d[n];c.changeZonePriority(r,n,t)}}else{var f=sn.a(zn,xn(i));n=o.map(function(e){var n=f[e.id];return n?function(e,n){return a.a.createElement(r.Fragment,{key:e.id},a.a.createElement(rn.a,null,e.name),n.map(u))}(e,n):null}),t=function(e){var n=e.oldIndex,t=e.newIndex,r=e.collection,a=f[r][n];c.changeZonePriority(a,n,t)}}return a.a.createElement(Cn,{useDragHandle:!0,lockAxis:"y",onSortEnd:t},n)},In=function(){var e=Re(),n=Ye(),t=M().routeToZoneEdit;return null===e?a.a.createElement(tn.a,{primaryOpacity:.2,secondaryOpacity:.2}):null===n.brand?a.a.createElement(rn.a,null,a.a.createElement(Z.Trans,{id:"Select brand to see its zones"})):a.a.createElement(kn,{zoneModel:n,zones:e.filter(n.zoneFilterPredicate),branches:n.root.user.filterBranches(n.branchFilterPredicate),onZoneEdit:t})},Sn=t(6841),Fn=t(6852),Pn=function(e){var n=e.branches,t=e.selectedBranch,r=e.onSelection,o=e.autoFocus;return a.a.createElement(Fn.a,{placeholder:c.b._("Select branch"),branches:n,selectedBranch:t,onSingleSelection:r,formatOptionLabel:k.a.prop("name"),isClearable:!0,autoFocus:o})},Bn=t(6832),Mn=function(e){var n=e.brands,t=e.selectedBrand,r=e.onSelection;return a.a.createElement(Bn.a,{placeholder:c.b._("Select brand"),options:n,value:t,formatOptionLabel:k.a.prop("name"),getOptionValue:k.a.prop("id"),getOptionLabel:k.a.prop("name"),isClearable:!0,isSearchable:!0,onChange:function(e){return r(e)},autoFocus:!0})},Zn=Object(h.observer)(function(){var e=Object(C.b)(),n=e.user,t=e.zone,r=n.branches,o=a.a.useCallback(function(e){return null===e?[]:n.branches.filter(k.a.pathEq(["brand","id"],e.id))},[]);if(a.a.useEffect(function(){return Object(v.autorun)(function(){1===r.length&&t.setBranchFilter(k.a.head(r))})},[]),r.length<=1)return null;var i=1===n.brands.length?k.a.head(n.brands):null;return i&&t.setBrandFilter(i,o(t.brand)),a.a.createElement(a.a.Fragment,null,!i&&a.a.createElement(Mn,{brands:n.brands,selectedBrand:t.brand,onSelection:function(e){null===e?t.clearBrandFilter():t.setBrandFilter(e,o(e))}}),!i&&a.a.createElement(Sn.a,null),a.a.createElement(Pn,{branches:o(t.brand),selectedBranch:t.branch,autoFocus:Boolean(i),onSelection:function(e){e?t.setBranchFilter(e):t.clearBranchFilter()}}))});function Ln(){var e=Object(b.a)(["\n  flex: 1 1 0;\n  min-height: 0;\n"]);return Ln=function(){return e},e}function _n(){var e=Object(b.a)(["\n  flex: 0 0 auto;\n"]);return _n=function(){return e},e}function Rn(){var e=Object(b.a)(["\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n"]);return Rn=function(){return e},e}var An=E.default.div(Rn()),Tn=E.default.div(_n()),Dn=E.default.div(Ln()),Nn=a.a.memo(function(){var e=Object(C.b)().zone;return Object(en.a)(function(n){e.setBranchFilter(n)}),a.a.createElement(An,null,a.a.createElement(Tn,null,a.a.createElement(Xe,null,a.a.createElement(j.a,null,a.a.createElement(Zn,null))),a.a.createElement(O.a,{mutationName:"createZone"},a.a.createElement(nn,null))),a.a.createElement(Dn,null,a.a.createElement(Qe.a,null,a.a.createElement(In,null))))}),Vn=function(e){var n=e.match,t=Boolean(n.params.zoneId);return a.a.createElement(_e,null,a.a.createElement(u.a,{pageTitle:c.b._("Delivery zones"),useBackButton:!0,backRoute:"/settings"},a.a.createElement(l.a,{widthInColumns:6,column:10,rowInMobile:2,withScrollArea:t},t?a.a.createElement(De,null):a.a.createElement(Nn,null)),a.a.createElement(l.a,{widthInColumns:10,rowInMobile:1,forcePercentHeightInMobile:60},a.a.createElement($e,null))))};t.d(n,"ZoneMenuRoutes",function(){return Hn});var Hn=function(){var e=M().getRouteToZone;return a.a.createElement(o.Switch,null,a.a.createElement(o.Route,{path:e(":zoneId?"),component:Vn}),a.a.createElement(o.Route,{component:i.a}))};n.default=Hn}}]);
//# sourceMappingURL=181.4c3e4ce9.chunk.js.map