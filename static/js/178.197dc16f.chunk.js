(window.webpackJsonp=window.webpackJsonp||[]).push([[178],{7860:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.FlexRowSingle=void 0;const a=((r=n(51))&&r.__esModule?r:{default:r}).default.div.withConfig({displayName:"FlexRowSingle"})`
  display: flex;
  flex-direction: row;
  justify-content: ${({justify:e="space-between"})=>e};
`;t.FlexRowSingle=a},7861:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PageLayoutFullHeightItem=void 0;var r=i(n(0)),a=i(n(51)),l=n(7873),o=n(52);function i(e){return e&&e.__esModule?e:{default:e}}const u=a.default.div.withConfig({displayName:"FullHeightDiv"})`
  position: fixed;
  bottom: 0.5rem;
  width: ${(()=>e=>void 0!==e.widthInColumns?"calc(("+e.widthInColumns+" * 6.22vw) - "+o.Spacing.LayoutGridCellMargin+")":"calc(100vh - (2 * "+o.Spacing.LayoutGridCellMargin+"))")()};
  left: ${(()=>e=>void 0!==e.column?"calc(("+e.column+" * 6.22vw) + "+o.Spacing.LayoutGridCellMargin+")":o.Spacing.LayoutGridCellMargin)()};
  top: ${(()=>e=>void 0!==e.row?"calc(("+e.row+" * 3.9375rem) + "+o.Spacing.LayoutGridCellMargin+")":"calc(3.9375rem + "+o.Spacing.LayoutGridCellMargin+")")()};
`,c=a.default.div.withConfig({displayName:"FullHeightDivStyled"})`
  height: 100%;
`;t.PageLayoutFullHeightItem=(({children:e,row:t=1,column:n=0,widthInColumns:a=16,withScrollArea:o=!1,scrollAreaId:i})=>r.default.createElement(u,{column:n,row:t,widthInColumns:a,withScrollArea:o},o?r.default.createElement(l.ScrollArea,{id:i},e):r.default.createElement(c,null,e)))},7866:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.VerticalGap=void 0;const a=((r=n(51))&&r.__esModule?r:{default:r}).default.div.withConfig({displayName:"VerticalGap"})`
  height: ${({size:e=1,sizeUnit:t="rem"})=>`${e}${t}`};
`;t.VerticalGap=a,a.displayName="VerticalGap"},7869:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkColumnAccess=function({canQuery:e,canMutate:t},n){return a=>{let l=n(a);return e&&(l=r.default.createElement(f.CanQuery,{queryName:e},l)),t&&(l=r.default.createElement(s.CanMutate,{mutationName:t},l)),l}},t.ColumnRendererEdit=function({cellData:e}){return r.default.createElement(i.TouchButtonEdit,{target:e})},t.ColumnRendererRemove=function({cellData:e,columnData:t}){return r.default.createElement(u.TouchButtonRemove,{onClick:()=>t.onRemove&&t.onRemove(e)})},t.ColumnRendererVisibility=function({cellData:e,columnData:t,rowData:n}){return r.default.createElement(c.TouchButtonVisibility,{isVisible:e,onClick:()=>t.onToggle(n.id,!e)})},t.ColumnRendererWithNote=function({cellData:e,rowData:t,columnData:n}){return r.default.createElement(r.default.Fragment,null,e,r.default.createElement(v,null,t[n.noteKey]))},Object.defineProperty(t,"Column",{enumerable:!0,get:function(){return a.Column}}),t.DataTableEmptyText=t.NoteText=t.DataTable=void 0,n(8495);var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),a=n(8005),l=p(n(51)),o=n(78),i=n(8497),u=n(8089),c=n(8498),d=n(52),s=n(7851),f=n(7863),m=p(n(105));function p(e){return e&&e.__esModule?e:{default:e}}function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var g=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&(n[r[a]]=e[r[a]])}return n};class h extends r.Component{renderTable(e,t){const n=this.props,{items:l,children:o,isLoading:i,heightStretch:u}=n,c=g(n,["items","children","isLoading","heightStretch"]);return r.default.createElement(a.Table,y({autoHeight:!u,width:e,height:t,headerHeight:50,rowHeight:60,rowCount:l?l.length:0,rowGetter:({index:e})=>l[e],noRowsRenderer:()=>i?r.default.createElement(m.default,null):null},c),o)}render(){return this.props.heightStretch?r.default.createElement(a.AutoSizer,null,({width:e,height:t})=>this.renderTable(e,t)):r.default.createElement(a.WindowScroller,{scrollElement:window},({height:e})=>r.default.createElement(a.AutoSizer,{disableHeight:!0},({width:t})=>this.renderTable(t,e)))}}t.DataTable=h,h.defaultProps={heightStretch:!1};const v=l.default.div.withConfig({displayName:"NoteText"})`
  color: ${d.Colors.greyMiddle};
`;t.NoteText=v;const b=(0,l.default)(e=>{var{text:t=o.i18n._("Table is empty")}=e,n=g(e,["text"]);return r.default.createElement("div",n,t)}).withConfig({displayName:"DataTableEmptyText"})`
  padding: 1rem;
  color: ${d.Colors.greyMiddle};
  font-style: 'italic';
`;t.DataTableEmptyText=b},7873:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ScrollArea=void 0;const a=((r=n(51))&&r.__esModule?r:{default:r}).default.div.withConfig({displayName:"ScrollArea"})`
  overflow-y: scroll;
  -webkit-overflow-scrolling: touch;
  height: 100%;
`;t.ScrollArea=a},7875:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.CardDock=void 0;const a=(0,((r=n(51))&&r.__esModule?r:{default:r}).default)("div").withConfig({displayName:"CardDock"})`
  position: absolute;
  ${({position:e="BottomRight"})=>"BottomLeft"===e||"TopLeft"===e?"left: 0":"right: 0"};
  ${({position:e="BottomRight"})=>"BottomRight"===e||"BottomLeft"===e?"bottom: 0":"top: 0"};
`;t.CardDock=a},7900:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isPartialMatch=function(e){const t=e.toLocaleLowerCase();return e=>e.toLocaleLowerCase().includes(t)}},7907:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolveLocation=c,t.RelativeLink=void 0;var r=o(n(0)),a=n(172),l=o(n(309));function o(e){return e&&e.__esModule?e:{default:e}}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var u=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&(n[r[a]]=e[r[a]])}return n};function c(e,t){if("string"===typeof e)return(0,l.default)(e,t);const n=(0,l.default)(e.pathname||"",t);return Object.assign({},e,{pathname:n})}t.RelativeLink=(e=>{var{to:t,from:n}=e,l=u(e,["to","from"]);return r.default.createElement(a.Route,{children:({location:e})=>r.default.createElement(a.Link,i({to:c(t,n||`${e.pathname}/`)},l))})})},7912:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormInputFlatSelect=void 0;var r,a=(r=n(0))&&r.__esModule?r:{default:r},l=n(7849),o=n(53),i=n(78),u=n(7876);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var d=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&(n[r[a]]=e[r[a]])}return n};class s extends a.default.Component{constructor(){super(...arguments),this.validate=(e=>{const{isRequired:t,isMulti:n,validationName:r}=this.props;if(t){if(n&&(!Array.isArray(e)||0===e.length))return i.i18n._("{validationName} must have at least option selected",{validationName:r});if(!n&&null==e)return i.i18n._("{validationName} must have a selection",{validationName:r})}return null})}getControlProps(e){const{isMulti:t,items:n,defaultSelection:r,getItemId:a}=this.props,l=e.value||r;if(t){const t=e=>l.includes(a(e));return{selectedItems:Array.isArray(l)?n.filter(t):[],onMultiSelection:t=>{e.setValue(t.map(a)),e.setTouched(!0)}}}return{selectedItem:l&&n.find(e=>a(e)===l),onSingleSelection:t=>{e.setValue(t?a(t):null),e.setTouched(!0)}}}render(){const e=this.props,{field:t,fieldIsPure:n=!1,isRequired:r=!1,isClearable:o=!1}=e,i=d(e,["field","fieldIsPure","isRequired","isClearable"]);return a.default.createElement(l.Field,{field:t,pure:n,validate:this.validate},e=>a.default.createElement(u.SelectControlFlat,c({},this.getControlProps(e),{isInvalid:Boolean(e.error),isClearable:o&&!r},i)))}}t.FormInputFlatSelect=s,s.defaultProps={validationName:i.i18n._("Value"),getItemId:o.RM.prop("id")}},7933:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DragHandle=void 0;var r=i(n(0)),a=n(7909),l=i(n(51)),o=n(173);function i(e){return e&&e.__esModule?e:{default:e}}const u=l.default.div.withConfig({displayName:"DragHandleContainerStyled"})`
  padding: 1rem 0.4rem;
  cursor: grab;
`,c=(0,a.SortableHandle)(()=>r.default.createElement(u,null,r.default.createElement(o.Icon,{iconName:"reorder"})));t.DragHandle=c},7934:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormColumn=t.FormContainer=void 0;var r,a=(r=n(51))&&r.__esModule?r:{default:r};const l=a.default.form.withConfig({displayName:"FormContainer"})`
  margin: 0.6rem;
  display: flex;
`;t.FormContainer=l;const o=a.default.div.withConfig({displayName:"FormColumn"})`
  flex: none;
  margin-right: 1rem;
`;t.FormColumn=o},7935:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MenuSuggestionPanel=function(e){const{onAdd:t,addLabel:n=c.i18n._("Add"),addButtonText:m=c.i18n._("Add")}=e,p=f(e,["onAdd","addLabel","addButtonText"]),[y,g]=(0,u.useStateRef)(null),h=(0,r.useCallback)(()=>{const e=y();null!==e&&(t(e),g(null))},[t]),v=(0,r.useCallback)(e=>{"Enter"===e.key&&h()},[]),b=(0,r.useCallback)(e=>{g(e||null)},[]);return r.default.createElement(l.FlexRowSingle,{justify:"flex-start"},r.default.createElement(a.FlexColumn,{fixedWidth:!0,width:"4rem",margin:"auto 0"},n),r.default.createElement(a.FlexColumn,{fixedWidth:!0,width:"20rem",margin:"auto 0"},r.default.createElement(o.SelectControl,s({value:y(),onChange:b,onKeyDown:v,isMulti:!1,isClearable:!1,getOptionValue:i.RM.prop("id"),getOptionLabel:i.RM.prop("nameLabel")},p))),r.default.createElement(a.FlexColumn,{fixedWidth:!0,width:"10rem",margin:"auto 0"},r.default.createElement(d.TouchButton,{text:m,disabled:null===y(),onClick:h})))};var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),a=n(7865),l=n(7860),o=n(7855),i=n(53),u=n(5853),c=n(78),d=n(5794);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var f=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&(n[r[a]]=e[r[a]])}return n}},7948:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useDebounceCallback=function(e,t=300){const n=(0,l.useCallback)(e,[]),r=(0,l.useRef)((0,a.default)(n,t));return(0,l.useEffect)(()=>r.current.clear),r.current};var r,a=(r=n(61))&&r.__esModule?r:{default:r},l=n(0)},7993:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormInputSelect=void 0;var r,a=(r=n(0))&&r.__esModule?r:{default:r},l=n(7849),o=n(53),i=n(78),u=n(7855);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var d=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&(n[r[a]]=e[r[a]])}return n};class s extends a.default.Component{constructor(){super(...arguments),this.validate=(e=>this.props.isRequired&&!e?i.i18n._("{0} must be selected",{0:this.props.validatioName}):null)}getControlProps(e){const{isMulti:t,options:n,getOptionValue:r,defaultValue:a}=this.props,l=e.value||a;if(t){const t=Array.isArray(l)?e=>l.includes(r(e)):o.RM.F;return{value:Array.isArray(n)?n.filter(t):[],onChange:t=>{e.setValue(t.map(r))}}}return{value:l&&n.find(e=>r(e)===l),onChange:t=>{e.setValue(r(t))}}}render(){const e=this.props,{field:t,fieldIsPure:n=!1,defaultValue:r,isRequired:o=!1}=e,i=d(e,["field","fieldIsPure","defaultValue","isRequired"]);return a.default.createElement(l.Field,{field:t,validate:this.validate,pure:n},e=>a.default.createElement(u.SelectControl,c({},this.getControlProps(e),{onFocus:()=>e.setTouched(!0),styles:{control:t=>Boolean(e.error)?Object.assign({},t,{borderColor:"red"}):t}},i)))}}t.FormInputSelect=s,s.defaultProps={validatioName:"Value",getItemId:o.RM.prop("id")}},7995:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CreateButton=void 0;var r=u(n(0)),a=u(n(51)),l=n(7907),o=n(5794),i=n(52);function u(e){return e&&e.__esModule?e:{default:e}}const c=a.default.div.withConfig({displayName:"CreateButtonContainer"})`
  position: absolute;
  right: 0;
  z-index: 5;
`;t.CreateButton=(({routeTo:e="create",onClick:t})=>r.default.createElement(c,null,r.default.createElement(l.RelativeLink,{to:e,onClick:t},r.default.createElement(o.TouchButton,{iconName:"add_circle",color:i.Colors.green,width:i.Spacing.ButtonHeight,height:i.Spacing.ButtonHeight}))))},7996:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TopRightButtonContainer=void 0;var r,a=(r=n(51))&&r.__esModule?r:{default:r},l=n(52);const o=a.default.div.withConfig({displayName:"TopRightButtonContainer"})`
  position: fixed;
  z-index: 500;
  right: 0;
  top: 0rem;
  width: 10rem;
  opacity: 0.96;
  background: ${l.Colors.black};
  border-radius: ${l.Radiuses.Button};
`;t.TopRightButtonContainer=o},7997:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCategoryTypeLabel=function(e){return l.i18n._(o[e])},t.getRecipeTypeLabel=function(e){return l.i18n._(i[e])};var r=n(288),a=n(171),l=n(78);const o={[a.WareCategoryTypeEnum.Main]:(0,r.i18nMark)("Ware categories"),[a.WareCategoryTypeEnum.SideDish]:(0,r.i18nMark)("Sidedish categories"),[a.WareCategoryTypeEnum.Cover]:(0,r.i18nMark)("Cover categories")},i={[a.WareCategoryTypeEnum.Main]:(0,r.i18nMark)("Ware recipe"),[a.WareCategoryTypeEnum.SideDish]:(0,r.i18nMark)("Sidedish recipe"),[a.WareCategoryTypeEnum.Cover]:(0,r.i18nMark)("Cover recipe")}},7998:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SubmitButton=void 0;var r,a=(r=n(0))&&r.__esModule?r:{default:r},l=n(7849),o=n(7880),i=n(78),u=n(7879);t.SubmitButton=(({isCreate:e=!1})=>a.default.createElement(l.FormApi,{render:t=>a.default.createElement(u.FormSubmit,{id:"form-submit"},function(e,t){return(0,o.isFormValid)(e)?t?i.i18n._("Create"):i.i18n._("Save"):i.i18n._("Fix form errors")}(t,e))}))},7999:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormDeleteButton=void 0;var r,a=(r=n(0))&&r.__esModule?r:{default:r},l=n(7849),o=n(25),i=n(7887);var u=function(e,t,n,r){return new(n||(n=Promise))(function(a,l){function o(e){try{u(r.next(e))}catch(t){l(t)}}function i(e){try{u(r.throw(e))}catch(t){l(t)}}function u(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(o,i)}u((r=r.apply(e,t||[])).next())})};t.FormDeleteButton=(({confirmText:e,onDelete:t})=>a.default.createElement(l.Field,{field:"id"},n=>"NEW"!==n.value&&a.default.createElement(o.Route,null,({history:r})=>a.default.createElement(i.TouchButtonDelete,{confirmText:e,onDelete:()=>u(void 0,void 0,void 0,function*(){yield t(n.value),r.goBack()})}))))},8000:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormInputInternalNote=void 0;var r,a=(r=n(0))&&r.__esModule?r:{default:r},l=n(7854),o=n(7850),i=n(78);function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var c=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&(n[r[a]]=e[r[a]])}return n};t.FormInputInternalNote=(e=>{var{field:t="internalNote",icon:n="label_outline",label:r=i.i18n._("Internal note").toLocaleLowerCase()}=e,d=c(e,["field","icon","label"]);return a.default.createElement(o.IconLine,{label:r,labelWidth:7},a.default.createElement(l.FormInputTextBox,u({field:t,inputFullWidth:!0},d)))})},8001:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormInputName=void 0;var r,a=(r=n(0))&&r.__esModule?r:{default:r},l=n(7854),o=n(7850),i=n(78);function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var c=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&(n[r[a]]=e[r[a]])}return n};t.FormInputName=(e=>{var{field:t="nameLabel",icon:n="label"}=e,r=c(e,["field","icon"]);return a.default.createElement(o.IconLine,{icon:n,labelWidth:7},a.default.createElement(l.FormInputTextBox,u({field:t,inputFullWidth:!0,isRequired:!0,validatioName:i.i18n._("Name")},r)))})},8002:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MenuBaseFormLoader=void 0;var r=n(131),a=n(35),l=f(n(0)),o=f(n(51)),i=n(8506),u=n(8507),c=n(55),d=n(53),s=n(78);function f(e){return e&&e.__esModule?e:{default:e}}var m=function(e,t,n,r){return new(n||(n=Promise))(function(a,l){function o(e){try{u(r.next(e))}catch(t){l(t)}}function i(e){try{u(r.throw(e))}catch(t){l(t)}}function u(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(o,i)}u((r=r.apply(e,t||[])).next())})};const p=o.default.div.withConfig({displayName:"ErrorPop"})`
  color: red;
  padding: 1rem;
  max-width: 30rem;
  overflow-wrap: break-word;
`;t.MenuBaseFormLoader=class extends l.default.Component{constructor(){super(...arguments),this.state={submitError:null,validationErrors:null}}renderErrors(){const{submitError:e,validationErrors:t}=this.state;return e?this.renderSubmitError(e):t?this.renderValidationErrors(t):null}renderSubmitError(e){let t=[s.i18n._("Unexpected error while sending form. Out team was notified about the issue.")];if((0,a.isApolloError)(e)){const n=d.RM.propEq("showToUser",!0),r=e.graphQLErrors.filter(n).map(d.RM.prop("message"));r.length&&(t=r)}return this.renderPopover(t)}renderValidationErrors(e){return null}renderPopover(e){return l.default.createElement(r.Popover,{open:!0,anchorEl:()=>document.getElementById("submit-button"),onClose:()=>this.setState({submitError:null,validationErrors:null}),anchorOrigin:{vertical:"bottom",horizontal:"center"}},e.map((e,t)=>l.default.createElement(p,{key:t},e)))}render(){const{isCreate:e,onCreate:t,onUpdate:n,getDefaultValues:r,loadValues:a,loadDefaults:o,children:d}=this.props;return l.default.createElement(u.NavigateBack,{render:u=>l.default.createElement(i.FormLoader,{shouldLoad:!0,defaultValues:r(),loader:()=>m(this,void 0,void 0,function*(){let t=r();if(o){const e=yield o();Object.assign(t,e)}if(e)return t;const n=yield a();return Object.assign({},t,n)}),onChange:e=>(0,c.logForm)("new values",e.values),onSubmit:r=>m(this,void 0,void 0,function*(){e?yield t(r):yield n(r),u()}),onSubmitFailure:(e,t)=>{this.setState({validationErrors:e,submitError:t}),Object.keys(e).length&&(0,c.logError)("validation errors",e),t&&(0,c.logError)("submit error",t)}},d,this.renderErrors())})}}},8003:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useMenu=function(){const{settings:{menu:e}}=(0,r.useRoot)();return e};var r=n(99)},8004:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.DataTableContainer=void 0;const a=((r=n(51))&&r.__esModule?r:{default:r}).default.div.withConfig({displayName:"DataTableContainer"})`
  height: calc(100% - 4.5rem);
  padding-top: 2rem;
`;t.DataTableContainer=a},8088:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CategoryListTable=void 0;var r,a=(r=n(0))&&r.__esModule?r:{default:r},l=n(7869),o=n(7933),i=n(78),u=n(8090),c=n(52),d=n(5821);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.CategoryListTable=(({categories:e,onToggle:t,onRemove:n,onSort:r,showEditColumn:f=!0,showRemoveColumn:m=!1,showVisibilityColumn:p=!1,showHeader:y=!0,isSortable:g=!1,isLoading:h=!1,heightStretch:v=!1,noRowsDisplay:b=a.default.createElement(l.DataTableEmptyText,{text:i.i18n._("No recipes in category")})})=>{const E={isLoading:h,items:e,disableHeader:!y,noRowsRenderer:()=>b};return a.default.createElement(({children:e})=>g?a.default.createElement(u.SortableDataTable,s({heightStretch:v,onSort:r},E),e):a.default.createElement(l.DataTable,s({heightStretch:v},E),e),null,f&&a.default.createElement(l.Column,{dataKey:"id",width:c.Spacing.ButtonColumnWidthPx,minWidth:c.Spacing.ButtonColumnWidthPx,cellRenderer:(0,l.checkColumnAccess)({canQuery:"wareCategory"},l.ColumnRendererEdit),cellDataGetter:({rowData:e})=>(0,d.getCategoryRoute)(e.id,e.categoryType.enum)}),m&&a.default.createElement(l.Column,{dataKey:"id",width:c.Spacing.ButtonColumnWidthPx,minWidth:c.Spacing.ButtonColumnWidthPx,cellRenderer:l.ColumnRendererRemove,columnData:{onRemove:n}}),p&&a.default.createElement(l.Column,{dataKey:"visible",width:c.Spacing.ButtonColumnWidthPx,minWidth:c.Spacing.ButtonColumnWidthPx,cellRenderer:(0,l.checkColumnAccess)({canMutate:"updateWareCategory"},l.ColumnRendererVisibility),columnData:{onToggle:t}}),a.default.createElement(l.Column,{dataKey:"nameLabel",width:300,label:i.i18n._("Name"),cellRenderer:l.ColumnRendererWithNote,columnData:{noteKey:"internalNoteLabel"}}),a.default.createElement(l.Column,{dataKey:"countRecipes",label:i.i18n._("Recipe count"),width:100,cellRenderer:({cellData:e})=>`${e} ${i.i18n._("Recipes").toLocaleLowerCase()}`}),g&&a.default.createElement(l.Column,{dataKey:"id",width:50,cellRenderer:()=>a.default.createElement(o.DragHandle,null)}))})},8089:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TouchButtonRemove=void 0;var r,a=(r=n(0))&&r.__esModule?r:{default:r},l=n(52),o=n(5794);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var u=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&(n[r[a]]=e[r[a]])}return n};t.TouchButtonRemove=(e=>{var t=u(e,[]);return a.default.createElement(o.TouchButton,i({iconName:"remove_circle_outline",width:l.Spacing.ButtonHeight,height:l.Spacing.ButtonHeight},t))})},8090:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SortableDataTable=void 0;var r,a=(r=n(0))&&r.__esModule?r:{default:r},l=n(7909),o=n(7869);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var u=function(e,t,n,r){return new(n||(n=Promise))(function(a,l){function o(e){try{u(r.next(e))}catch(t){l(t)}}function i(e){try{u(r.throw(e))}catch(t){l(t)}}function u(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(o,i)}u((r=r.apply(e,t||[])).next())})},c=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&(n[r[a]]=e[r[a]])}return n};const d=(0,l.SortableElement)(({columns:e,style:t,className:n})=>a.default.createElement("div",{style:t,className:n},e)),s=(0,l.SortableContainer)(o.DataTable);class f extends a.default.Component{constructor(){super(...arguments),this.state={sortedItems:this.props.items},this.onHandleSorting=(({newIndex:e,oldIndex:t})=>u(this,void 0,void 0,function*(){if(e===t)return;const n=[...this.state.sortedItems],r=(0,l.arrayMove)(this.state.sortedItems,t,e);if(this.setState({sortedItems:r}),this.props.onSort){const a=this.props.onSort({item:n[t],items:r,offset:e-t,newIndex:e,oldIndex:t});a&&!(yield a)&&this.setState({sortedItems:n})}}))}render(){const e=this.props,{items:t,isLoading:n}=e,r=c(e,["items","isLoading"]);return a.default.createElement(s,i({useDragHandle:!0,lockAxis:"y",lockToContainerEdges:!0,onSortEnd:this.onHandleSorting,rowRenderer:e=>a.default.createElement(d,e),isLoading:n},r,{items:this.state.sortedItems}))}}t.SortableDataTable=f,f.getDerivedStateFromProps=(e=>({sortedItems:e.items}))},8091:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecipeListTable=void 0;var r,a=(r=n(0))&&r.__esModule?r:{default:r},l=n(8087),o=n(7869),i=n(7933),u=n(7857),c=n(171),d=n(53),s=n(78),f=n(8090),m=n(52),p=n(8092),y=n(5822);function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function h({cellData:e,columnData:{priceType:t}}){const n=e.find(d.RM.pathEq(["priceType","enum"],t));return n?n.price.formattedValue:a.default.createElement("i",null,s.i18n._("Not set").toLocaleLowerCase())}function v({rowData:e}){const t=e.recipeType.enum;return t===c.WareCategoryTypeEnum.SideDish?s.i18n._("Sidedish").toLocaleLowerCase():t===c.WareCategoryTypeEnum.Cover?s.i18n._("Cover").toLocaleLowerCase():s.i18n._("Ware").toLocaleLowerCase()}t.RecipeListTable=(({recipes:e,onToggle:t,onRemove:n,onSortRecipe:r,showEditColumn:c=!0,showRemoveColumn:d=!1,showVisibilityColumn:b=!0,showTypeColumn:E=!1,isSortable:C=!1,isLoading:_=!1,heightStretch:w=!1})=>{const O={isLoading:_,items:e,heightStretch:w,noRowsRenderer:()=>_?a.default.createElement(l.BulletList,null):a.default.createElement(u.Headline,null,s.i18n._("No recipes has been found"))};return a.default.createElement(({children:e})=>C?a.default.createElement(f.SortableDataTable,g({onSort:r},O),e):a.default.createElement(o.DataTable,O,e),null,c&&a.default.createElement(o.Column,{dataKey:"id",width:m.Spacing.ButtonColumnWidthPx,minWidth:m.Spacing.ButtonColumnWidthPx,cellRenderer:(0,o.checkColumnAccess)({canQuery:"recipe"},o.ColumnRendererEdit),cellDataGetter:({rowData:e})=>(0,y.getRecipeRoute)(e.id,e.recipeType.enum)}),d&&a.default.createElement(o.Column,{dataKey:"id",width:m.Spacing.ButtonColumnWidthPx,minWidth:m.Spacing.ButtonColumnWidthPx,cellRenderer:o.ColumnRendererRemove,columnData:{onRemove:n}}),b&&a.default.createElement(o.Column,{dataKey:"visible",width:m.Spacing.ButtonColumnWidthPx,minWidth:m.Spacing.ButtonColumnWidthPx,cellRenderer:(0,o.checkColumnAccess)({canMutate:"updateRecipe"},o.ColumnRendererVisibility),columnData:{onToggle:t}}),E&&a.default.createElement(o.Column,{dataKey:"recipeType",width:100,label:s.i18n._("Type"),cellRenderer:v}),a.default.createElement(o.Column,{dataKey:"code",width:100,label:s.i18n._("Code")}),a.default.createElement(o.Column,{dataKey:"nameLabel",width:600,flexGrow:2,label:s.i18n._("Name"),cellRenderer:o.ColumnRendererWithNote,columnData:{noteKey:"internalNote"}}),a.default.createElement(o.Column,{dataKey:"prices",width:150,label:s.i18n._("Delivery sale"),cellRenderer:h,columnData:{priceType:p.TPriceType.Delivery}}),a.default.createElement(o.Column,{dataKey:"prices",width:150,label:s.i18n._("Local sale"),cellRenderer:h,columnData:{priceType:p.TPriceType.Inhouse}}),a.default.createElement(o.Column,{dataKey:"availableAmount",label:s.i18n._("recipe.list.availableAmount",{},{defaults:"Stock"}),width:100}),a.default.createElement(o.Column,{dataKey:"internalNote",label:s.i18n._("Internal note"),width:200}),C&&a.default.createElement(o.Column,{dataKey:"id",width:50,cellRenderer:()=>a.default.createElement(i.DragHandle,null)}))})},8092:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"TCategoryType",{enumerable:!0,get:function(){return r.WareCategoryTypeEnum}}),Object.defineProperty(t,"TRecipeType",{enumerable:!0,get:function(){return r.WareCategoryTypeEnum}}),Object.defineProperty(t,"TPriceType",{enumerable:!0,get:function(){return r.WarePriceTypeEnum}});var r=n(171)},8093:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MenuFilterInput=void 0;var r,a=n(279),l=(r=n(0))&&r.__esModule?r:{default:r},o=n(7859),i=n(7850),u=n(99),c=n(7858),d=n(7948),s=n(78);t.MenuFilterInput=(({modelType:e})=>{const{settings:{menu:t}}=(0,u.useRoot)(),n=t[e],r=(0,d.useDebounceCallback)(n.setFilterInput);return l.default.createElement(i.IconLine,{icon:a.Search},l.default.createElement(c.Sizer,{width:17},l.default.createElement(o.FormInputStyled,{inputFullWidth:!0,onChange:e=>r(e.target.value),placeholder:s.i18n._("Filter by name or code")})))})},8094:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IsCategoryType=void 0;var r,a=(r=n(0))&&r.__esModule?r:{default:r},l=n(171);t.IsCategoryType=(({type:e,isMain:t,isSideDish:n,isCover:r,children:o})=>!0===t&&e===l.WareCategoryTypeEnum.Main||!0===n&&e===l.WareCategoryTypeEnum.SideDish||!0===r&&e===l.WareCategoryTypeEnum.Cover?a.default.createElement(a.default.Fragment,null,o):null)},8095:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormInputCode=void 0;var r,a=(r=n(0))&&r.__esModule?r:{default:r},l=n(7854),o=n(7850),i=n(7858),u=n(78);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var d=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&(n[r[a]]=e[r[a]])}return n};t.FormInputCode=(e=>{var{field:t="code",icon:n="label_outline",isRequired:r=!0}=e,s=d(e,["field","icon","isRequired"]);return a.default.createElement(o.IconLine,{label:u.i18n._("Code").toLocaleLowerCase(),labelWidth:7},a.default.createElement(i.Sizer,{width:9},a.default.createElement(l.FormInputTextBox,c({field:t,inputFullWidth:!0,isRequired:!0,validatioName:u.i18n._("Code")},s))))})},8096:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MenuAllergenIndicator=void 0;var r,a=(r=n(0))&&r.__esModule?r:{default:r},l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(51)),o=n(52),i=n(8522);function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const c=l.default.div.withConfig({displayName:"AllergenBox"})`
  float: left;
  width: 2.3rem;
  height: 2.3rem;
  border: 1px solid ${o.Colors.greyMiddle};
  margin: 0.3rem 0.6rem 0.3rem ${o.Spacing.MarginAroundFormComponents};
  font-size: 1.5rem;
  text-align: center;
  vertical-align: middle;
  cursor: default;
  ${({active:e})=>l.css`
    color: ${e?o.Colors.black:o.Colors.greyMiddle};
    background-color: ${e?o.Colors.yellow:o.Colors.white};
  `};
`;t.MenuAllergenIndicator=(({selected:e,onToggle:t})=>a.default.createElement(i.QueryAllergens,{render:({allergens:n})=>a.default.createElement(a.default.Fragment,null,n.map(n=>{const r={active:e.includes(n.enum),onClick:t&&(()=>t(n.enum))};return a.default.createElement(c,u({key:n.enum,title:n.code},r),n.category)}))}))},8492:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MenuRoutes=void 0;var r,a=(r=n(0))&&r.__esModule?r:{default:r},l=n(25),o=n(282),i=n(284),u=n(8493),c=n(8499),d=n(8510),s=n(8516),f=n(8534),m=n(8543),p=n(8546);const y=({match:e})=>a.default.createElement(l.Switch,null,a.default.createElement(i.SecureRoute,{exact:!0,path:e.path,render:()=>a.default.createElement(l.Redirect,{to:`${e.path}/category`})}),a.default.createElement(i.SecureRoute,{exact:!0,path:`${e.path}/category`,component:u.MenuCategoryListPage}),a.default.createElement(i.SecureRoute,{path:`${e.path}/category/:categoryId`,render:({match:{params:e},location:{state:t}})=>a.default.createElement(c.MenuCategoryPage,{categoryId:"create"===e.categoryId?null:e.categoryId,categoryType:t.categoryType})}),a.default.createElement(i.SecureRoute,{exact:!0,path:`${e.path}/recipe`,component:d.MenuRecipeListPage}),a.default.createElement(i.SecureRoute,{path:`${e.path}/recipe/:recipeId`,render:({match:{params:e},location:{state:t}})=>a.default.createElement(s.MenuRecipePage,{recipeId:"create"===e.recipeId?null:e.recipeId,recipeType:t.recipeType})}),a.default.createElement(i.SecureRoute,{exact:!0,path:`${e.path}/stock`,component:m.MenuStockListPage}),a.default.createElement(i.SecureRoute,{path:`${e.path}/stock/deposit`,component:f.MenuStockDepositPage}),a.default.createElement(i.SecureRoute,{path:`${e.path}/stock/:stockId`,render:({match:{params:e}})=>a.default.createElement(p.MenuStockPage,{stockId:"create"===e.stockId?null:e.stockId})}),a.default.createElement(l.Route,{component:o.NotFoundPage}));t.MenuRoutes=y;var g=y;t.default=g},8493:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MenuCategoryListPage=t.PartialDataTableContainer=void 0;var r=m(n(0)),a=m(n(51)),l=n(5798),o=n(7866),i=n(171),u=n(78),c=n(5800),d=n(7861),s=n(7891),f=m(n(8494));function m(e){return e&&e.__esModule?e:{default:e}}const p=a.default.div.withConfig({displayName:"PartialDataTableContainer"})`
  height: calc(100% - 3.5rem);
  padding-top: 1rem;
  overflow-y: scroll;
  overflow-x: hidden;
  -webkit-overflow-scrolling: touch;
`;t.PartialDataTableContainer=p;t.MenuCategoryListPage=(e=>r.default.createElement(r.default.Fragment,null,r.default.createElement(c.FullPageLayout,{pageTitle:u.i18n._("Category overview"),useBackButton:!0}),r.default.createElement(d.PageLayoutFullHeightItem,null,r.default.createElement(l.Card,{stretchToParent:!0},r.default.createElement(s.SettingsCompanyBranchPicker,{width:20}),r.default.createElement(p,null,r.default.createElement(f.default,{categoryType:i.WareCategoryTypeEnum.Main,headline:u.i18n._("Category of recipes"),heightStretch:!1}),r.default.createElement(o.VerticalGap,{size:1.5}),r.default.createElement(f.default,{categoryType:i.WareCategoryTypeEnum.SideDish,headline:u.i18n._("Category of sidedish"),heightStretch:!1}),r.default.createElement(o.VerticalGap,{size:1.5}),r.default.createElement(f.default,{categoryType:i.WareCategoryTypeEnum.Cover,headline:u.i18n._("Category of covers"),heightStretch:!1}))))))},8494:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=n(100),l=(r=n(0))&&r.__esModule?r:{default:r},o=n(280),i=n(7865),u=n(7860),c=n(7857),d=n(99),s=n(5821),f=n(8088),m=n(7995),p=n(294);var y=(0,a.observer)(({headline:e,subHeadline:t=!1,categoryType:n,heightStretch:r=!1})=>{const{settings:a}=(0,d.useRoot)(),{data:y,loading:g,updateQuery:h}=(0,o.useQuery)(p.CategoryListQuery,Object.assign({},a.getQueryProps({categoryType:n}),{suspend:!1})),v=y&&y.categories||[];return l.default.createElement(l.default.Fragment,null,l.default.createElement(u.FlexRowSingle,null,l.default.createElement(i.FlexColumn,{widthGrowIndex:1},l.default.createElement(c.Headline,null,e),t&&l.default.createElement(c.Headline,{size:"smaller"},t)),l.default.createElement(i.FlexColumn,{fixedWidth:!0},l.default.createElement(m.CreateButton,{routeTo:(0,s.getCategoryRoute)("create",n)}))),l.default.createElement(f.CategoryListTable,{isLoading:g,categories:v,onToggle:a.menu.category.changeVisibility,isSortable:!0,showHeader:!1,heightStretch:r,showVisibilityColumn:!0,onSort:({item:e,items:t,offset:n})=>{h(()=>({categories:t})),a.menu.category.sortCategory(e.id,n)}}))});t.default=y},8495:function(e,t,n){},8497:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TouchButtonEdit=void 0;var r,a=(r=n(0))&&r.__esModule?r:{default:r},l=n(7907),o=n(52),i=n(5794);function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var c=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&(n[r[a]]=e[r[a]])}return n};t.TouchButtonEdit=(e=>{var{target:t,Link:n=l.RelativeLink}=e,r=c(e,["target","Link"]);return a.default.createElement(n,{to:t},a.default.createElement(i.TouchButton,u({iconName:"mode_edit",width:o.Spacing.ButtonHeight,height:o.Spacing.ButtonHeight},r)))})},8498:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TouchButtonVisibility=void 0;var r,a=(r=n(0))&&r.__esModule?r:{default:r},l=n(5794),o=n(52);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var u=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&(n[r[a]]=e[r[a]])}return n};t.TouchButtonVisibility=(e=>{var{isVisible:t}=e,n=u(e,["isVisible"]);return a.default.createElement(l.TouchButton,i({iconName:"remove_red_eye",width:o.Spacing.ButtonHeight,height:o.Spacing.ButtonHeight,iconColor:t?o.Colors.white:o.Colors.greyMiddle,color:o.Colors.greyMiddle},n))})},8499:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MenuCategoryPage=t.FormStretchedRow=t.FormFixedRow=t.FormContainer=void 0;var r=n(130),a=h(n(0)),l=h(n(51)),o=n(7851),i=n(5798),u=n(7857),c=n(5800),d=n(7861),s=n(7996),f=n(7997),m=n(7998),p=n(8500),y=n(8505),g=n(8508);function h(e){return e&&e.__esModule?e:{default:e}}const v=l.default.div.withConfig({displayName:"FormContainer"})`
  display: flex;
  flex-direction: column;
  height: 100%;
  width: 100%;
`;t.FormContainer=v;const b=l.default.div.withConfig({displayName:"FormFixedRow"})`
  flex: 0 0 8rem;
`;t.FormFixedRow=b;const E=l.default.div.withConfig({displayName:"FormStretchedRow"})`
  flex: 1 1 0;
  min-height: 0;
  position: relative;
`;t.FormStretchedRow=E;t.MenuCategoryPage=(({categoryId:e,categoryType:t})=>a.default.createElement(y.CategoryFormLoader,{categoryId:e,categoryType:t},a.default.createElement(a.default.Fragment,null,a.default.createElement(c.FullPageLayout,{pageTitle:(0,f.getCategoryTypeLabel)(t),hideLogoutWidget:!0,useBackButton:!0}),a.default.createElement(d.PageLayoutFullHeightItem,null,a.default.createElement(v,null,a.default.createElement(b,null,a.default.createElement(i.Card,null,a.default.createElement(p.CategoryBasicForm,{categoryType:t}))),a.default.createElement(E,null,a.default.createElement(i.Card,{stretchToParent:!0},a.default.createElement(u.Headline,null,a.default.createElement(r.Trans,{id:"Recipes assigned to this category"})),a.default.createElement(g.CategoryRecipesView,{categoryType:t}))))),a.default.createElement(s.TopRightButtonContainer,null,a.default.createElement(o.CanMutate,{mutationName:null===e?"createWareCategory":"updateWareCategory"},a.default.createElement(m.SubmitButton,{isCreate:null===e}))))))},8500:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CategoryBasicForm=void 0;var r,a=(r=n(0))&&r.__esModule?r:{default:r},l=n(7875),o=n(7934),i=n(7930),u=n(7858),c=n(171),d=n(78),s=n(7877),f=n(8501),m=n(7999),p=n(8e3),y=n(8001);t.CategoryBasicForm=(({categoryType:e})=>a.default.createElement(o.FormContainer,null,a.default.createElement(o.FormColumn,null,a.default.createElement(u.Sizer,{width:22},a.default.createElement(y.FormInputName,{placeholder:d.i18n._("Category name"),inputFullWidth:!0})),a.default.createElement(u.Sizer,{width:22},a.default.createElement(p.FormInputInternalNote,{placeholder:d.i18n._("Category internal note")})),a.default.createElement(i.FormInputCheckbox,{field:"visible",label:d.i18n._("To show this category")})),e===c.WareCategoryTypeEnum.Main?a.default.createElement(o.FormColumn,null,a.default.createElement(f.MenuCategoryPictogramSelect,{field:"pictogram"})):null,a.default.createElement(l.CardDock,{position:"BottomRight"},a.default.createElement(s.WithSettings,{render:({menu:t})=>a.default.createElement(m.FormDeleteButton,{confirmText:d.i18n._("Remove this category?"),onDelete:n=>t.category.deleteCategory(n,e)})}))))},8501:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MenuCategoryPictogramSelect=void 0;var r,a=n(8502),l=(r=n(0))&&r.__esModule?r:{default:r},o=n(7849),i=n(8504),u=n(7855),c=n(53);t.MenuCategoryPictogramSelect=(({field:e})=>l.default.createElement(o.Field,{field:e,pure:!0},e=>l.default.createElement(u.SelectControl,{value:e.value?{pictogram:e.value}:null,onChange:t=>{t&&!Array.isArray(t)&&e.setValue(t.pictogram)},options:a.pictograms.map(e=>({pictogram:e})),getOptionValue:c.RM.prop("pictogram"),formatOptionLabel:({pictogram:e})=>l.default.createElement(i.PictogramDisplay,{pictogramId:e,fontSize:2}),components:{SingleValue:({data:e})=>l.default.createElement(i.PictogramDisplay,{pictogramId:e.pictogram,fontSize:4})},styles:{container:e=>Object.assign({},e,{width:"8rem"}),menuList:e=>Object.assign({},e,{maxHeight:"35rem"})},isClearable:!1,isSearchable:!1,minWidth:8})))},8502:function(e,t,n){t.pictograms=n(8503)},8503:function(e,t){e.exports=["pizza","beans","cheese","hot-pepper","smoking-barbecue","meat-pie","sausage","hot-dog","fruit","fruit-1","fruit-2","strawberry","soup","noodles","ramen","rice","spaghetti","food","piece-of-cake","beer","marshmallow","cake","banana-split","ice-cream","cookie","doughnut","cupcake","kebab","steak","fish","fondue","shrimp","berry","food","food-1","food-2","food-3","food-4","food-5","food-6","food-7","food-8","food-9","food-10","food-11","food-12","food-13","food-14","food-15","food-16","food-17","food-18","food-19","food-20","food-21","food-22","food-23","food-24","food-25","food-26","food-27","food-28","food-29","food-30","drink","drink-1","drink-2","drink-3","drink-4","drink-5","cup","cup-1","cup-2","whisky"]},8504:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PictogramDisplay=void 0;var r=a(n(0));function a(e){return e&&e.__esModule?e:{default:e}}const l=a(n(51)).default.div.withConfig({displayName:"PictogramDisplayStyled"})`
  &:before {
    font-size: ${function({fontSize:e=2,fontSizeUnit:t="rem"}){return`${e}${t}`}} !important;
    margin-left: 0.5rem !important;
  }
`;t.PictogramDisplay=(({pictogramId:e,fontSize:t=2,fontSizeUnit:n="rem"})=>r.default.createElement(l,{className:function(e){return`flaticon-${e}`}(e),fontSize:t,fontSizeUnit:n}))},8505:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CategoryFormLoader=void 0;var r,a=(r=n(0))&&r.__esModule?r:{default:r},l=n(8002),o=n(8003),i=n(5851);var u=function(e,t,n,r){return new(n||(n=Promise))(function(a,l){function o(e){try{u(r.next(e))}catch(t){l(t)}}function i(e){try{u(r.throw(e))}catch(t){l(t)}}function u(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(o,i)}u((r=r.apply(e,t||[])).next())})};t.CategoryFormLoader=(({categoryId:e,categoryType:t,children:n})=>{const r=(0,o.useMenu)();return a.default.createElement(l.MenuBaseFormLoader,{isCreate:null===e,onCreate:e=>r.category.createCategory(e,t),onUpdate:e=>r.category.updateCategory(e,t),getDefaultValues:()=>(function(e){return{id:"NEW",visible:!0,internalNoteLabel:"",pictogram:"",nameLabel:"",categoryType:{enum:e},recipes:[]}})(t),loadValues:()=>u(void 0,void 0,void 0,function*(){const{data:t}=yield r.client.query({query:i.MenuCategoryFormQuery,variables:{categoryId:e},fetchPolicy:"no-cache"});return t.wareCategory})},n)})},8506:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormLoader=function(e){var{shouldLoad:t,loader:n}=e,i=o(e,["shouldLoad","loader"]);const[u,c]=(0,r.useState)(null);return(0,r.useEffect)(()=>{t&&n().then(c)},[t]),r.default.createElement(a.Form,l({values:u},i))};var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),a=n(7849);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&(n[r[a]]=e[r[a]])}return n}},8507:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NavigateBack=void 0;var r,a=(r=n(0))&&r.__esModule?r:{default:r},l=n(25);t.NavigateBack=(({render:e})=>a.default.createElement(l.Route,null,({history:t})=>e?e(()=>t.goBack()):(t.goBack(),null)))},8508:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CategoryRecipesView=t.FormStretchedRow=t.FormFixedRow=t.FormContainer=void 0;var r=c(n(0)),a=n(7849),l=c(n(51)),o=n(53),i=n(8091),u=n(8509);function c(e){return e&&e.__esModule?e:{default:e}}const d=l.default.div.withConfig({displayName:"FormContainer"})`
  display: flex;
  flex-direction: column;
  height: calc(100% - 2rem);
  width: 100%;
`;t.FormContainer=d;const s=l.default.div.withConfig({displayName:"FormFixedRow"})`
  flex: 0 0 auto;
`;t.FormFixedRow=s;const f=l.default.div.withConfig({displayName:"FormStretchedRow"})`
  flex: 1 1 0;
  min-height: 0;
  position: relative;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  height: 100%;
  overflow-x: hidden;
`;t.FormStretchedRow=f;t.CategoryRecipesView=(({categoryType:e})=>r.default.createElement(a.Field,{field:"recipes"},t=>r.default.createElement(d,null,r.default.createElement(s,null,r.default.createElement(u.RecipeSuggestionPanel,{categoryType:e,filterRecipes:o.RM.without(t.value),onAdd:e=>t.setValue(t.value.concat(e))})),r.default.createElement(f,null,r.default.createElement(i.RecipeListTable,{recipes:t.value,isSortable:!0,showRemoveColumn:!0,showEditColumn:!1,showVisibilityColumn:!1,heightStretch:!1,onRemove:e=>t.setValue(o.RM.reject(o.RM.propEq("id",e),t.value)),onSortRecipe:({items:e})=>{t.setValue(e)}})))))},8509:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecipeSuggestionPanel=void 0;var r,a=(r=n(0))&&r.__esModule?r:{default:r},l=n(7877),o=n(7935),i=n(5824);function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.RecipeSuggestionPanel=(({categoryType:e,filterRecipes:t,onAdd:n})=>a.default.createElement(l.WithSettings,{observe:!0,render:r=>a.default.createElement(i.QueryRecipeList,u({},r.getQueryProps({categoryType:e}),{fetchPolicy:"cache-and-network",render:({recipes:e})=>a.default.createElement(o.MenuSuggestionPanel,{options:t(e),onAdd:n})}))}))},8510:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MenuRecipeListPage=void 0;var r,a=(r=n(0))&&r.__esModule?r:{default:r},l=n(7851),o=n(5798),i=n(8004),u=n(7865),c=n(7860),d=n(78),s=n(5800),f=n(7861),m=n(7891),p=n(8511),y=n(8093),g=n(8513),h=n(8515);t.MenuRecipeListPage=(e=>a.default.createElement(a.default.Fragment,null,a.default.createElement(s.FullPageLayout,{pageTitle:d.i18n._("Recipe overview"),useBackButton:!0}),a.default.createElement(f.PageLayoutFullHeightItem,null,a.default.createElement(o.Card,{stretchToParent:!0},a.default.createElement(c.FlexRowSingle,{justify:"start"},a.default.createElement(u.FlexColumn,null,a.default.createElement(m.SettingsCompanyBranchPicker,{width:20})),a.default.createElement(u.FlexColumn,null,a.default.createElement(y.MenuFilterInput,{modelType:"recipe"})),a.default.createElement(u.FlexColumn,null,a.default.createElement(p.MenuCategoryFilter,null))),a.default.createElement(l.CanMutate,{mutationName:"createRecipe"},a.default.createElement(g.RecipeTypeSelection,null)),a.default.createElement(i.DataTableContainer,null,a.default.createElement(h.RecipeListLoader,null))))))},8511:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MenuCategoryFilter=void 0;var r,a=n(288),l=(r=n(0))&&r.__esModule?r:{default:r},o=n(280),i=n(99),u=n(7855),c=n(7858),d=n(53),s=n(7997),f=n(8512);t.MenuCategoryFilter=(()=>{const{settings:{menu:{recipe:e}}}=(0,i.useRoot)(),{data:t,loading:n}=(0,o.useQuery)(f.MenuCategoryFilterQuery,{suspend:!1,variables:{branchId:e.branchId}});return l.default.createElement(c.Sizer,{width:17},l.default.createElement(u.SelectControl,{onChange:t=>e.setCategoryFilter(t.id),options:(()=>{if(!t||!t.categories)return[];const e=d.RM.groupBy(e=>e.categoryType.enum.toString(),t.categories);return Object.keys(e).map(t=>({label:(0,s.getCategoryTypeLabel)(t),options:e[t]}))})(),isMulti:!1,isClearable:!1,isLoading:n,placeholder:a.i18n._("Filter by category"),getOptionValue:d.RM.prop("id"),getOptionLabel:d.RM.prop("nameLabel")}))})},8512:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.MenuCategoryFilterQuery=void 0;const a=((r=n(23))&&r.__esModule?r:{default:r}).default`
  query QMenuCategoryFilter($branchId: ID!) {
    categories: wareCategories(companyBranch: $branchId) {
      id
      nameLabel
      countRecipes
      categoryType: wareCategoryType {
        enum
      }
    }
  }
`;t.MenuCategoryFilterQuery=a},8513:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecipeTypeSelection=void 0;var r=n(130),a=n(131),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=n(8514),i=n(171),u=n(5794),c=n(5822),d=n(7995);t.RecipeTypeSelection=class extends l.Component{constructor(){super(...arguments),this.state={isOpen:!1,recipeType:null},this.onClose=(()=>{this.setState({isOpen:!1})}),this.onOpen=(()=>{this.setState({isOpen:!0})}),this.onSelect=(e=>()=>{this.setState({isOpen:!0,recipeType:e})})}render(){const{isOpen:e,recipeType:t}=this.state;return l.default.createElement(l.default.Fragment,null,null!==t&&l.default.createElement(o.RelativeRedirect,{to:(0,c.getRecipeRoute)("create",t),push:!0}),l.default.createElement(d.CreateButton,{onClick:e=>{e.preventDefault(),this.onOpen()}}),l.default.createElement(a.Dialog,{open:e,onClose:this.onClose},l.default.createElement(a.DialogTitle,null,"Select item type"),l.default.createElement(u.TouchButton,{onClick:this.onSelect(i.WareCategoryTypeEnum.Main)},l.default.createElement(r.Trans,{id:"Ware"})),l.default.createElement(u.TouchButton,{onClick:this.onSelect(i.WareCategoryTypeEnum.SideDish)},l.default.createElement(r.Trans,{id:"Sidedish"})),l.default.createElement(u.TouchButton,{onClick:this.onSelect(i.WareCategoryTypeEnum.Cover)},l.default.createElement(r.Trans,{id:"Cover"}))))}}},8514:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RelativeRedirect=void 0;var r,a=(r=n(0))&&r.__esModule?r:{default:r},l=n(172),o=n(7907);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var u=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&(n[r[a]]=e[r[a]])}return n};t.RelativeRedirect=(e=>{var{to:t,from:n}=e,r=u(e,["to","from"]);return a.default.createElement(l.Redirect,i({to:(0,o.resolveLocation)(t,n||`${location.pathname}/`),from:n},r))})},8515:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecipeListLoader=void 0;var r,a=n(100),l=(r=n(0))&&r.__esModule?r:{default:r},o=n(280),i=n(99),u=n(7900),c=n(53),d=n(8091),s=n(5824);const f=(0,a.observer)(()=>{const{settings:e}=(0,i.useRoot)(),{data:t,loading:n}=(0,o.useQuery)(s.MenuRecipeListQuery,Object.assign({},e.getQueryProps({categoryId:e.menu.recipe.categoryFilterId}),{suspend:!1})),r=(0,a.useComputed)(()=>{if(!t||!t.recipes||0===t.recipes.length)return[];const n=(0,u.isPartialMatch)(e.menu.recipe.filterInput);return t.recipes.filter(c.RM.cond([[c.RM.propSatisfies(n,"code"),c.RM.T],[c.RM.propSatisfies(n,"nameLabel"),c.RM.T]]))},[t&&t.recipes]);return l.default.createElement(d.RecipeListTable,{recipes:r,onToggle:e.menu.recipe.changeVisibility,isLoading:n,heightStretch:!0,showTypeColumn:!0})});t.RecipeListLoader=f},8516:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MenuRecipePage=void 0;var r=n(130),a=w(n(0)),l=w(n(51)),o=n(7851),i=n(5798),u=n(7869),c=n(7857),d=n(7866),s=n(171),f=n(78),m=n(5800),p=n(7996),y=n(8094),g=n(7997),h=n(7998),v=n(8517),b=n(8519),E=n(8523),C=n(8524),_=n(8532);function w(e){return e&&e.__esModule?e:{default:e}}const O=(0,l.default)("div").withConfig({displayName:"FormContainer"})`
  margin: 0 1.25rem 0 0;
`;t.MenuRecipePage=(({recipeId:e,recipeType:t})=>a.default.createElement(E.RecipeFormLoader,{recipeId:e,recipeType:t},a.default.createElement(O,null,a.default.createElement(m.FullPageLayout,{width:16,pageTitle:(0,g.getRecipeTypeLabel)(t),hideLogoutWidget:!0,useBackButton:!0},a.default.createElement(i.Card,null,a.default.createElement(b.RecipeFormBasic,{recipeType:t})),a.default.createElement(i.Card,null,a.default.createElement(C.RecipeFormPricing,{recipeType:t,recipeId:e})),a.default.createElement(y.IsCategoryType,{type:t,isMain:!0},a.default.createElement(i.Card,null,a.default.createElement(c.Headline,null,a.default.createElement(r.Trans,{id:"Recipe ingredients"})),a.default.createElement(d.VerticalGap,null),a.default.createElement(_.RecipeIngredientsView,null)),a.default.createElement(i.Card,null,a.default.createElement(c.Headline,null,a.default.createElement(r.Trans,{id:"Sidedish categories"})),a.default.createElement(u.NoteText,null,a.default.createElement(r.Trans,{id:"These sidedish are presented with recipe"})),a.default.createElement(v.RecipeCategoryView,{categoryType:s.WareCategoryTypeEnum.SideDish,field:"sideDishes",addButtonText:f.i18n._("Attach sidedish category"),noRowsText:f.i18n._("Recipe has no sidedish category attached")})),a.default.createElement(i.Card,null,a.default.createElement(c.Headline,null,a.default.createElement(r.Trans,{id:"Category assignments"})),a.default.createElement(u.NoteText,null,a.default.createElement(r.Trans,{id:"Recipe is in these categories"})),a.default.createElement(v.RecipeCategoryView,{categoryType:s.WareCategoryTypeEnum.Main,field:"categories",addButtonText:f.i18n._("Add to category"),noRowsText:f.i18n._("Recipe is not in any category")})))),a.default.createElement(p.TopRightButtonContainer,null,a.default.createElement(o.CanMutate,{mutationName:null===e?"createRecipe":"updateRecipe"},a.default.createElement(h.SubmitButton,{isCreate:null===e}))))))},8517:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecipeCategoryView=void 0;var r=c(n(0)),a=n(7849),l=n(7869),o=n(53),i=n(8088),u=c(n(8518));function c(e){return e&&e.__esModule?e:{default:e}}t.RecipeCategoryView=(({categoryType:e,addButtonText:t,noRowsText:n,field:c})=>r.default.createElement(a.Field,{field:c},a=>r.default.createElement(r.default.Fragment,null,r.default.createElement(i.CategoryListTable,{categories:a.value,showRemoveColumn:!0,showEditColumn:!1,showHeader:!1,onRemove:e=>a.setValue(o.RM.reject(o.RM.propEq("id",e),a.value)),noRowsDisplay:r.default.createElement(l.DataTableEmptyText,{text:n})}),r.default.createElement(u.default,{addButtonText:t,categoryType:e,currentCategories:a.value,onAdd:e=>a.setValue(a.value.concat(e))}))))},8518:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=n(100),l=(r=n(0))&&r.__esModule?r:{default:r},o=n(280),i=n(99),u=n(53),c=n(7935),d=n(294);var s=(0,a.observer)(({categoryType:e,currentCategories:t,addButtonText:n,onAdd:r})=>{const{settings:a}=(0,i.useRoot)(),{data:s,loading:f}=(0,o.useQuery)(d.CategoryListQuery,Object.assign({},a.getQueryProps({categoryType:e}),{fetchPolicy:"cache-and-network",suspend:!1})),m=s&&s.categories||[];return l.default.createElement(c.MenuSuggestionPanel,{isLoading:f,options:u.RM.without(t,m),addButtonText:n,onAdd:r})});t.default=s},8519:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecipeFormBasic=void 0;var r,a=(r=n(0))&&r.__esModule?r:{default:r},l=n(7875),o=n(7934),i=n(7930),u=n(7850),c=n(171),d=n(78),s=n(7877),f=n(8094),m=n(7999),p=n(8095),y=n(8520),g=n(8e3),h=n(8001),v=n(8521);t.RecipeFormBasic=(({recipeType:e})=>{const t=e===c.WareCategoryTypeEnum.Main;return a.default.createElement(o.FormContainer,null,a.default.createElement(o.FormColumn,null,a.default.createElement(h.FormInputName,{placeholder:d.i18n._("Recipe name")}),a.default.createElement(p.FormInputCode,{placeholder:d.i18n._("Recipe code")}),a.default.createElement(g.FormInputInternalNote,{placeholder:d.i18n._("Recipe internal note")}),t&&a.default.createElement(y.FormInputDescription,{placeholder:d.i18n._("Public note for customers, allergens")}),a.default.createElement(f.IsCategoryType,{type:e,isMain:!0},a.default.createElement(u.IconLine,{labelWidth:7,icon:"error_outline"},d.i18n._("Allergens based on stock cards"),a.default.createElement("br",null),a.default.createElement(v.RecipeAllergenDisplay,null))),a.default.createElement(u.IconLine,{labelWidth:7},a.default.createElement(i.FormInputCheckbox,{field:"visible",label:d.i18n._("To show this recipe")}))),a.default.createElement(l.CardDock,{position:"BottomRight"},a.default.createElement(s.WithSettings,{render:({menu:e})=>a.default.createElement(m.FormDeleteButton,{confirmText:d.i18n._("Remove this recipe?"),onDelete:t=>e.recipe.deleteRecipe(t)})})))})},8520:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormInputDescription=void 0;var r,a=(r=n(0))&&r.__esModule?r:{default:r},l=n(7854),o=n(7850),i=n(78);function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var c=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&(n[r[a]]=e[r[a]])}return n};t.FormInputDescription=(e=>{var{field:t="descriptionLabel",icon:n="label_outline"}=e,r=c(e,["field","icon"]);return a.default.createElement(o.IconLine,{label:i.i18n._("Public note").toLocaleLowerCase(),labelWidth:7},a.default.createElement(l.FormInputTextBox,u({field:t,inputFullWidth:!0},r)))})},8521:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecipeAllergenDisplay=void 0;var r,a=(r=n(0))&&r.__esModule?r:{default:r},l=n(7849),o=n(53),i=n(8096);const u=o.RM.pipe(o.RM.map(o.RM.prop("allergens")),o.RM.flatten,o.RM.uniq);t.RecipeAllergenDisplay=(()=>a.default.createElement(l.Field,{field:"ingredients"},({value:e})=>{const t=u(e);return a.default.createElement(i.MenuAllergenIndicator,{selected:t})}))},8522:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QueryAllergens=t.AllergensQuery=void 0;var r,a=(r=n(23))&&r.__esModule?r:{default:r},l=n(79),o=n(5826);const i=a.default`
  query GAllergens {
    allergens {
      ...GAllergen
    }
  }
  ${o.AllergenFragment}
`;t.AllergensQuery=i;const u=(0,l.buildQuery)(i);t.QueryAllergens=u},8523:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecipeFormLoader=void 0;var r,a=(r=n(0))&&r.__esModule?r:{default:r},l=n(171),o=n(53),i=n(8002),u=n(8003),c=n(5823);var d=function(e,t,n,r){return new(n||(n=Promise))(function(a,l){function o(e){try{u(r.next(e))}catch(t){l(t)}}function i(e){try{u(r.throw(e))}catch(t){l(t)}}function u(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(o,i)}u((r=r.apply(e,t||[])).next())})};function s(e){return[l.WarePriceTypeEnum.Delivery,l.WarePriceTypeEnum.Inhouse].reduce((t,n)=>(t[n]=e(n),t),{})}function f(e){return{id:"NEW",code:"",nameLabel:"",internalNote:"",descriptionLabel:"",image:"",visible:!0,recipeType:{enum:e},sourcePrices:[],prices:s(()=>({value:0,vatId:null,currencyCode:""})),sourceAssociatedRecipes:[],associatedRecipes:[],sourceIngredients:[],ingredients:[],sideDishes:[],categories:[]}}t.RecipeFormLoader=(({recipeId:e,recipeType:t,children:n})=>{const r=(0,u.useMenu)();return a.default.createElement(i.MenuBaseFormLoader,{isCreate:null===e,onCreate:e=>r.recipe.createRecipe(e,t),onUpdate:e=>r.recipe.updateRecipe(e),getDefaultValues:()=>f(t),loadDefaults:()=>d(void 0,void 0,void 0,function*(){const{vats:e,currencyCode:n}=yield r.recipe.queryDefaults(),a=Object.assign({},f(t));return a.prices=s(t=>({value:0,vatId:e[t],currencyCode:n})),a}),loadValues:()=>d(void 0,void 0,void 0,function*(){const{data:t}=yield r.client.query({query:c.MenuRecipeFormQuery,variables:{recipeId:e},fetchPolicy:"no-cache"});return n=t.recipe,Object.assign({},n,{associatedRecipes:n.sourceAssociatedRecipes.map(({priceType:e,recipe:t})=>({warePriceType:e.enum,nameLabel:t.nameLabel,associatedRecipe:t.id,formattedPrice:"?"})),ingredients:n.sourceIngredients.map(({quantity:e,stockItem:{id:t,label:n,allergens:r,wareUnit:a}})=>({stockItem:t,label:n,quantity:e,unitLabel:a.code,allergens:r.map(o.RM.prop("enum"))})),prices:s(e=>{const t=n.sourcePrices.find(o.RM.pathEq(["priceType","enum"],e));return t?{value:t.price.value,vatId:t.vat.id,currencyCode:t.price.currency.code}:{value:0,vatId:null,currencyCode:""}})});var n})},n)})},8524:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecipeFormPricing=t.priceTypes=void 0;var r=n(130),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),l=n(7866),o=n(171),i=n(78),u=n(8092),c=n(8525),d=n(8530);const s=[{priceType:o.WarePriceTypeEnum.Delivery,label:(0,r.i18nMark)("Delivery sale")},{priceType:o.WarePriceTypeEnum.Inhouse,label:(0,r.i18nMark)("Local sale")}];t.priceTypes=s;t.RecipeFormPricing=(({recipeType:e,recipeId:t})=>a.default.createElement(a.default.Fragment,null,s.map(({priceType:n,label:r})=>a.default.createElement(a.Fragment,{key:n},a.default.createElement(c.FormPricingField,{priceType:n,label:i.i18n._(r)}),a.default.createElement(l.VerticalGap,null),e===u.TRecipeType.Main&&a.default.createElement(d.RecipeAssociatedView,{priceType:n,recipeId:t})))))},8525:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormPricingField=void 0;var r=s(n(0)),a=n(7849),l=s(n(51)),o=n(7860),i=n(8526),u=n(7857),c=n(8527),d=n(8528);function s(e){return e&&e.__esModule?e:{default:e}}const f=(0,l.default)(i.FormDisplayField).withConfig({displayName:"FormPricingCurrencyCode"})`
  padding: 0.5rem;
`;t.FormPricingField=(({priceType:e,label:t})=>r.default.createElement(r.default.Fragment,null,r.default.createElement(u.Headline,null,t),r.default.createElement(a.NestedField,{field:["prices",e]},r.default.createElement(o.FlexRowSingle,{justify:"flex-start"},r.default.createElement(c.FormInputPrice,{field:"value"}),r.default.createElement(f,{field:"currencyCode"}),r.default.createElement(d.FormInputVatSelect,{field:"vatId"})))))},8526:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormDisplayField=void 0;var r,a=(r=n(0))&&r.__esModule?r:{default:r},l=n(7849);t.FormDisplayField=(({field:e,className:t})=>a.default.createElement(l.Field,{field:e},e=>a.default.createElement("span",{className:t},e.value)))},8527:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormInputPrice=void 0;var r,a=(r=n(0))&&r.__esModule?r:{default:r},l=n(7871),o=n(7854),i=n(7850),u=n(7858),c=n(78);function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&(n[r[a]]=e[r[a]])}return n};const f=e=>void 0===e||(0,l.isEmpty)(e+"")||!(0,l.isDecimal)(e+"")?c.i18n._("Price must be a number"):null;t.FormInputPrice=(e=>{var{field:t="price.value",icon:n="toll"}=e,r=s(e,["field","icon"]);return a.default.createElement(i.IconLine,{icon:n},a.default.createElement(u.Sizer,{width:5},a.default.createElement(o.FormInputTextBox,d({field:t,inputFullWidth:!0,validate:f},r))))})},8528:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormInputVatSelect=void 0;var r,a=n(5802),l=(r=n(0))&&r.__esModule?r:{default:r},o=n(7912),i=n(7850),u=n(103),c=n(78),d=n(8529);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const f=a.css`
  margin-left: 5rem;
`;t.FormInputVatSelect=(({field:e="price.vat"})=>l.default.createElement(u.WithRoot,{render:({settings:t})=>l.default.createElement(d.QueryVat,s({},t.queryProps,{renderLoading:!1,render:({vats:t})=>l.default.createElement(i.IconLine,{className:f,label:`${c.i18n._("VAT")}:`},t&&l.default.createElement(o.FormInputFlatSelect,{field:e,items:t,formatItem:({vat:e})=>`${e}%`,isRequired:!0,validationName:c.i18n._("VAT")}))}))}))},8529:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QueryVat=t.VatsQuery=void 0;var r,a=(r=n(23))&&r.__esModule?r:{default:r},l=n(79);const o=a.default`
  query GVats($branchId: ID!) {
    vats(companyBranch: $branchId) {
      id
      vat
    }
  }
`;t.VatsQuery=o;const i=(0,l.buildQuery)(o);t.QueryVat=i},8530:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecipeAssociatedView=void 0;var r,a=(r=n(0))&&r.__esModule?r:{default:r},l=n(7849),o=n(7866),i=n(53),u=n(7877),c=n(7935),d=n(8531),s=n(5823);function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.RecipeAssociatedView=(({priceType:e,recipeId:t})=>a.default.createElement(l.Field,{field:"associatedRecipes"},n=>{const r=i.RM.filter(i.RM.propEq("warePriceType",e),n.value),l=i.RM.reject(e=>e.id===t||(e=>r.some(i.RM.propEq("associatedRecipe",e)))(e.id)),m=t=>{n.setValue(n.value.concat({warePriceType:e,associatedRecipe:t.id,nameLabel:t.nameLabel,formattedPrice:"?"}))};return a.default.createElement(a.default.Fragment,null,a.default.createElement(d.RecipeAssocListTable,{recipes:r,onRemove:t=>{n.setValue(i.RM.reject(({associatedRecipe:n,warePriceType:r})=>n===t&&r===e,n.value))}}),a.default.createElement(u.WithSettings,{render:e=>a.default.createElement(s.QueryMenuRecipeFormAssoc,f({},e.queryProps,{render:({recipes:e})=>a.default.createElement(c.MenuSuggestionPanel,{options:l(e),onAdd:m})}))}),a.default.createElement(o.VerticalGap,null))}))},8531:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecipeAssocListTable=void 0;var r,a=(r=n(0))&&r.__esModule?r:{default:r},l=n(7869),o=n(78),i=n(8089),u=n(52);t.RecipeAssocListTable=(({recipes:e,onRemove:t})=>a.default.createElement(l.DataTable,{items:e,disableHeader:!0},a.default.createElement(l.Column,{dataKey:"associatedRecipe",width:u.Spacing.ButtonColumnWidthPx,minWidth:u.Spacing.ButtonColumnWidthPx,cellRenderer:({cellData:e})=>a.default.createElement(i.TouchButtonRemove,{onClick:()=>t(e)})}),a.default.createElement(l.Column,{dataKey:"nameLabel",width:300,label:o.i18n._("Name"),cellRenderer:l.ColumnRendererWithNote,columnData:{noteKey:"internalNote"}}),a.default.createElement(l.Column,{dataKey:"formattedPrice",width:100,label:o.i18n._("Price")})))},8532:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecipeIngredientsView=void 0;var r,a=(r=n(0))&&r.__esModule?r:{default:r},l=n(7849),o=n(53),i=n(78),u=n(7877),c=n(7935),d=n(8533),s=n(5825);function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const m=o.RM.differenceWith(({id:e},{stockItem:t})=>e===t);t.RecipeIngredientsView=(()=>a.default.createElement(u.WithSettings,{observe:!1,render:e=>a.default.createElement(l.Field,{field:"ingredients"},t=>a.default.createElement(a.default.Fragment,null,a.default.createElement(d.RecipeIngredientsTable,{ingredients:t.value,onRemove:e=>{t.setValue(o.RM.reject(o.RM.propEq("stockItem",e),t.value))}}),a.default.createElement(s.QueryMenuStockList,f({},e.queryProps,{render:({stockItems:e})=>a.default.createElement(c.MenuSuggestionPanel,{addButtonText:i.i18n._("Add ingredient"),options:m(e,t.value),onAdd:e=>{t.setValue([...t.value,{stockItem:e.id,label:e.nameLabel,quantity:1,unitLabel:e.wareUnit.code,allergens:e.allergens.map(o.RM.prop("enum"))}])}})}))))}))},8533:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecipeIngredientsTable=void 0;var r=d(n(0)),a=d(n(7871)),l=n(7869),o=n(7854),i=n(7858),u=n(78),c=n(52);function d(e){return e&&e.__esModule?e:{default:e}}function s(e){const t=u.i18n._("Quantity");return a.default.isEmpty(e+"")?u.i18n._("{fieldName} must be entered",{fieldName:t}):a.default.isFloat(e+"",{min:0})?null:u.i18n._("{fieldName} must be a positive number",{fieldName:t})}t.RecipeIngredientsTable=(({ingredients:e,onRemove:t,isLoading:n=!1})=>r.default.createElement(l.DataTable,{isLoading:n,items:e,disableHeader:!0,noRowsRenderer:()=>r.default.createElement(l.DataTableEmptyText,{text:u.i18n._("Recipe has no ingredients")})},r.default.createElement(l.Column,{dataKey:"stockItem",width:c.Spacing.ButtonColumnWidthPx,minWidth:c.Spacing.ButtonColumnWidthPx,cellRenderer:l.ColumnRendererRemove,columnData:{onRemove:t}}),r.default.createElement(l.Column,{dataKey:"label",width:300,label:u.i18n._("Name")}),r.default.createElement(l.Column,{dataKey:"quantity",width:60,label:u.i18n._("Quantity"),cellRenderer:({rowIndex:e})=>r.default.createElement(i.Sizer,{width:2.5},r.default.createElement(o.FormInputTextBox,{field:["ingredients",e,"quantity"],validate:s,inputFullWidth:!0}))}),r.default.createElement(l.Column,{dataKey:"unitLabel",width:100,label:u.i18n._("Ware unit")})))},8534:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MenuStockDepositPage=void 0;var r,a=(r=n(0))&&r.__esModule?r:{default:r},l=n(5798),o=n(78),i=n(5800),u=n(7891),c=n(8535),d=n(8540);t.MenuStockDepositPage=(e=>a.default.createElement(i.FullPageLayout,{width:16,pageTitle:o.i18n._("Stock deposit"),useBackButton:!0},a.default.createElement(l.Card,null,a.default.createElement(u.SettingsCompanyBranchPicker,null),a.default.createElement(d.StockDepositLoader,null,(e,t)=>a.default.createElement(c.StockDepositControl,{stockItems:e,onDeposit:t})))))},8535:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StockDepositControl=void 0;var r,a=n(130),l=(r=n(0))&&r.__esModule?r:{default:r},o=n(7934),i=n(7857),u=n(7900),c=n(53),d=n(8536),s=n(8537),f=n(8538),m=n(8539);t.StockDepositControl=class extends l.default.Component{constructor(){super(...arguments),this.state={targetStockItem:null,filteredStockItems:[],searchValue:"",inputQuantity:0},this.filterInputRef=l.default.createRef(),this.quantityInputRef=l.default.createRef(),this.onFilter=(e=>{if(""===e.trim())return void this.setState({filteredStockItems:[],searchValue:"",targetStockItem:null});const t=(0,u.isPartialMatch)(e),n=this.props.stockItems.filter(c.RM.cond([[c.RM.propEq("plu",e),c.RM.T],[c.RM.propSatisfies(t,"code"),c.RM.T],[c.RM.propSatisfies(t,"nameLabel"),c.RM.T]]));let r=null;1===n.length&&(r=c.RM.head(n)),this.setState({filteredStockItems:n,searchValue:e,targetStockItem:r})}),this.onConfirmFilter=(()=>{1===this.state.filteredStockItems.length&&this.quantityInputRef.current.focus()}),this.onQuantity=(e=>{this.setState({inputQuantity:e})}),this.onSelectStockItem=(e=>{this.setState({targetStockItem:e,filteredStockItems:[e]},()=>{this.quantityInputRef.current.focus()})}),this.onConfirm=(()=>{const{targetStockItem:e,inputQuantity:t}=this.state;e&&0!==t&&this.props.onDeposit(e,t),this.setState({targetStockItem:null,searchValue:"",inputQuantity:0},()=>{this.quantityInputRef.current.value="",this.filterInputRef.current.focus()})})}render(){const{searchValue:e,filteredStockItems:t,targetStockItem:n,inputQuantity:r}=this.state,u=""!==e.trim(),c=0===t.length,p=t.length>1;return l.default.createElement(l.default.Fragment,null,l.default.createElement(o.FormContainer,null,l.default.createElement(o.FormColumn,null,l.default.createElement(s.StockDepositFilterInput,{onFilter:this.onFilter,onConfirm:this.onConfirmFilter,value:e,ref:this.filterInputRef})),l.default.createElement(o.FormColumn,null,l.default.createElement(f.StockDepositQuantityInput,{enabled:null!==n,onChange:this.onQuantity,onConfirm:this.onConfirm,ref:this.quantityInputRef})),l.default.createElement(o.FormColumn,null,l.default.createElement(d.StockDepositConfirmButton,{cardName:n?n.nameLabel:"",quantity:r,wareUnit:n?n.wareUnit:null,onConfirm:this.onConfirm}))),l.default.createElement(i.Headline,null,u&&p&&l.default.createElement(a.Trans,{id:"Continue typing to find single stock card or select one from the list"}),u&&c&&l.default.createElement(a.Trans,{id:"No stock card found from entered search value"}),u&&n&&l.default.createElement(a.Trans,{id:"Stock card <0>{0}</0> is selected",values:{0:n.nameLabel},components:[l.default.createElement("b",null)]})),u&&l.default.createElement(m.StockDepositResultTable,{searchValue:e,stockItems:t,onSelect:this.onSelectStockItem}))}}},8536:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StockDepositConfirmButton=void 0;var r=n(130),a=i(n(170)),l=i(n(0)),o=n(5794);function i(e){return e&&e.__esModule?e:{default:e}}t.StockDepositConfirmButton=(({wareUnit:e,quantity:t,onConfirm:n})=>l.default.createElement(o.TouchButton,{disabled:null===e,onClick:n},e?l.default.createElement(r.Trans,{id:"Add {0} {1}",values:{0:(0,a.default)(t).format("0,0.[00]"),1:e.code}}):l.default.createElement(r.Trans,{id:"No stock card selected"})))},8537:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StockDepositFilterInput=void 0;var r,a=(r=n(0))&&r.__esModule?r:{default:r},l=n(7859),o=n(7850),i=n(78);const u=a.default.forwardRef(({value:e,onFilter:t,onConfirm:n},r)=>a.default.createElement(o.IconLine,{label:i.i18n._("Stock card"),labelWidth:7},a.default.createElement(l.FormInputStyled,{ref:r,autoFocus:!0,placeholder:`${i.i18n._("Code").toLocaleLowerCase()} / ${i.i18n._("PLU")} / ${i.i18n._("Title").toLocaleLowerCase()}`,value:e,onChange:e=>{t(e.target.value)},onKeyPressCapture:e=>{"Enter"===e.key&&(e.preventDefault(),n())}})));t.StockDepositFilterInput=u},8538:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StockDepositQuantityInput=void 0;var r=o(n(170)),a=o(n(0)),l=n(7859);function o(e){return e&&e.__esModule?e:{default:e}}const i=a.default.forwardRef(({enabled:e,onChange:t,onConfirm:n},o)=>a.default.createElement(l.FormInputStyled,{ref:o,disabled:!e,onChange:e=>{const n=(0,r.default)(e.target.value).value();t(n)},onKeyPressCapture:e=>{"Enter"===e.key&&(e.preventDefault(),n())}}));t.StockDepositQuantityInput=i},8539:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StockDepositResultTable=void 0;var r=d(n(0)),a=d(n(51)),l=n(7869),o=n(8004),i=n(78),u=n(5794),c=n(52);function d(e){return e&&e.__esModule?e:{default:e}}function s({rowData:e,columnData:{onSelect:t}}){return r.default.createElement(u.TouchButton,{iconName:"done",width:c.Spacing.ButtonHeight,height:c.Spacing.ButtonHeight,onClick:()=>t(e)})}t.StockDepositResultTable=(({stockItems:e,searchValue:t,onSelect:n})=>r.default.createElement(o.DataTableContainer,null,r.default.createElement(l.DataTable,{items:e,heightStretch:!1},r.default.createElement(l.Column,{dataKey:"id",width:c.Spacing.ButtonColumnWidthPx,minWidth:c.Spacing.ButtonColumnWidthPx,cellRenderer:s,columnData:{onSelect:n}}),r.default.createElement(l.Column,{dataKey:"quantity",width:100,label:i.i18n._("Card stock"),cellRenderer:p}),r.default.createElement(l.Column,{dataKey:"code",width:100,label:i.i18n._("Card code"),cellRenderer:m(t)}),r.default.createElement(l.Column,{dataKey:"nameLabel",width:300,label:i.i18n._("Card name"),cellRenderer:m(t)}),r.default.createElement(l.Column,{dataKey:"note",width:300,label:i.i18n._("Card note")}))));const f=a.default.span.withConfig({displayName:"HighlightedValue"})`
  background-color: ${c.Colors.yellow};
`;function m(e){return({cellData:t})=>{const n=t.toLocaleLowerCase().indexOf(e.toLocaleLowerCase());if(-1===n)return t;const a=t.substring(0,n),l=t.substring(n,n+e.length),o=t.substring(n+e.length);return r.default.createElement(r.default.Fragment,null,a,r.default.createElement(f,null,l),o)}}function p({cellData:e,rowData:t}){return`${e} ${t.wareUnit.code}`}},8540:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StockDepositLoader=void 0;var r,a=(r=n(0))&&r.__esModule?r:{default:r},l=n(7877),o=n(8541);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.StockDepositLoader=(({children:e})=>a.default.createElement(o.ChangeMenuStockQuantity,{render:t=>{const n=(e,n)=>{t({variables:{stockItem:e.id,quantityChange:n}})};return a.default.createElement(l.WithSettings,{render:t=>a.default.createElement(o.QueryMenuStockDeposit,i({},t.queryProps,{render:({stockItems:t})=>e(t,n)}))})}}))},8541:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QueryMenuStockDeposit=t.ChangeMenuStockQuantity=void 0;var r,a=(r=n(23))&&r.__esModule?r:{default:r},l=n(8542),o=n(79),i=n(5827);const u=a.default`
  query GMenuStockDeposit($branchId: ID!) {
    stockItems(companyBranch: $branchId) {
      id
      code
      plu
      nameLabel: label
      note
      quantity
      wareUnit {
        ...GWareUnit
      }
    }
  }
  ${i.WareUnitFragment}
`,c=a.default`
  mutation GChangeMenuStockQuantity($stockItem: ID!, $quantityChange: Float!) {
    changeAmountStockItem(id: $stockItem, amountOffset: $quantityChange) {
      id
      quantity
    }
  }
`,d=(0,l.buildMutation)(c);t.ChangeMenuStockQuantity=d;const s=(0,o.buildQuery)(u);t.QueryMenuStockDeposit=s},8542:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildMutation=function(e){return t=>{var{render:n,children:r}=t,u=i(t,["render","children"]);return a.default.createElement(l.Mutation,o({mutation:e},u),n)}};var r,a=(r=n(0))&&r.__esModule?r:{default:r},l=n(291);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&(n[r[a]]=e[r[a]])}return n}},8543:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MenuStockListPage=void 0;var r,a=(r=n(0))&&r.__esModule?r:{default:r},l=n(7851),o=n(5798),i=n(8004),u=n(7865),c=n(7860),d=n(78),s=n(5800),f=n(7861),m=n(7891),p=n(7995),y=n(8093),g=n(8544);t.MenuStockListPage=(e=>a.default.createElement(a.default.Fragment,null,a.default.createElement(s.FullPageLayout,{pageTitle:d.i18n._("Stock overview"),useBackButton:!0}),a.default.createElement(f.PageLayoutFullHeightItem,null,a.default.createElement(o.Card,{stretchToParent:!0},a.default.createElement(c.FlexRowSingle,{justify:"start"},a.default.createElement(u.FlexColumn,null,a.default.createElement(m.SettingsCompanyBranchPicker,{width:20})),a.default.createElement(u.FlexColumn,null,a.default.createElement(y.MenuFilterInput,{modelType:"stock"}))),a.default.createElement(l.CanMutate,{mutationName:"createStockItem"},a.default.createElement(p.CreateButton,{routeTo:"create"})),a.default.createElement(i.DataTableContainer,null,a.default.createElement(g.StockListLoader,null))))))},8544:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StockListLoader=void 0;var r,a=n(100),l=(r=n(0))&&r.__esModule?r:{default:r},o=n(280),i=n(99),u=n(7900),c=n(53),d=n(5825),s=n(8545);const f=(0,a.observer)(()=>{const{settings:e}=(0,i.useRoot)(),{data:t,loading:n}=(0,o.useQuery)(d.MenuStockListQuery,Object.assign({},e.queryProps,{suspend:!1})),r=(0,a.useComputed)(()=>{if(!t||!t.stockItems||0===t.stockItems.length)return[];const n=e.menu.stock.filterInput,r=(0,u.isPartialMatch)(n);return t.stockItems.filter(c.RM.cond([[c.RM.propEq("plu",n),c.RM.T],[c.RM.propSatisfies(r,"code"),c.RM.T],[c.RM.propSatisfies(r,"nameLabel"),c.RM.T]]))},[t&&t.stockItems]);return l.default.createElement(s.StockListTable,{stockItems:r,isLoading:n})});t.StockListLoader=f},8545:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StockListTable=void 0;var r,a=n(130),l=(r=n(0))&&r.__esModule?r:{default:r},o=n(7869),i=n(5807),u=n(78),c=n(52);function d({cellData:e,rowData:t}){return`${e} ${t.wareUnit.code}`}function s({cellData:e}){return!0===e?l.default.createElement(a.Trans,{id:"Permitted"}):l.default.createElement(a.Trans,{id:"Forbidden"})}t.StockListTable=(({stockItems:e,isLoading:t})=>l.default.createElement(o.DataTable,{items:e,heightStretch:!0,noRowsRenderer:()=>t?l.default.createElement(i.Loading,null):l.default.createElement("h3",null,l.default.createElement(a.Trans,{id:"Selected branch has no stock cards"}))},l.default.createElement(o.Column,{dataKey:"id",width:c.Spacing.ButtonColumnWidthPx,minWidth:c.Spacing.ButtonColumnWidthPx,cellRenderer:(0,o.checkColumnAccess)({canQuery:"stockItem"},o.ColumnRendererEdit)}),l.default.createElement(o.Column,{dataKey:"code",width:100,label:u.i18n._("Card code")}),l.default.createElement(o.Column,{dataKey:"nameLabel",width:300,minWidth:30,flexGrow:2,label:u.i18n._("Card name")}),l.default.createElement(o.Column,{dataKey:"quantity",width:100,label:u.i18n._("Card stock"),cellRenderer:d}),l.default.createElement(o.Column,{dataKey:"allowNegative",width:300,label:u.i18n._("Negative stock"),cellRenderer:s}),l.default.createElement(o.Column,{dataKey:"note",width:300,label:u.i18n._("Card note")})))},8546:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MenuStockPage=void 0;var r,a=(r=n(0))&&r.__esModule?r:{default:r},l=n(7851),o=n(7863),i=n(5798),u=n(78),c=n(5800),d=n(7996),s=n(7998),f=n(8547),m=n(8549),p=n(8555);t.MenuStockPage=(({stockId:e})=>a.default.createElement(c.FullPageLayout,{width:16,pageTitle:u.i18n._("Stock card"),hideLogoutWidget:!0,useBackButton:!0},a.default.createElement(f.StockFormLoader,{stockId:e},a.default.createElement(a.default.Fragment,null,a.default.createElement(d.TopRightButtonContainer,null,a.default.createElement(l.CanMutate,{mutationName:null===e?"createStockItem":"updateStockItem"},a.default.createElement(s.SubmitButton,{isCreate:null===e}))),a.default.createElement(i.Card,null,a.default.createElement(m.StockFormMain,null),a.default.createElement(o.CanQuery,{queryName:"recipes"},a.default.createElement(p.StockRecipesView,{stockId:e})))))))},8547:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StockFormLoader=void 0;var r,a=(r=n(0))&&r.__esModule?r:{default:r},l=n(171),o=n(53),i=n(8002),u=n(8003),c=n(8548);var d=function(e,t,n,r){return new(n||(n=Promise))(function(a,l){function o(e){try{u(r.next(e))}catch(t){l(t)}}function i(e){try{u(r.throw(e))}catch(t){l(t)}}function u(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(o,i)}u((r=r.apply(e,t||[])).next())})};function s(){return{id:"NEW",internalNote:"",nameLabel:"",code:"",plu:"",note:"",wareUnit:null,allergens:[],allowNegative:l.FieldStateEnum.Default,allowNegativeDefault:l.FieldStateEnum.Default}}function f(e){return e?l.FieldStateEnum.Default:l.FieldStateEnum.Disabled}t.StockFormLoader=(({stockId:e,children:t})=>{const n=(0,u.useMenu)();return a.default.createElement(i.MenuBaseFormLoader,{isCreate:null===e,onCreate:e=>n.stock.createItem(e),onUpdate:e=>n.stock.updateItem(e),getDefaultValues:s,loadDefaults:()=>d(void 0,void 0,void 0,function*(){const{data:e}=yield n.client.query({query:c.MenuStockDefaultsQuery,variables:{branchId:n.stock.branchId},fetchPolicy:"no-cache"});return{allowNegativeDefault:f(e.companyBranch.allowNegative)}}),loadValues:()=>d(void 0,void 0,void 0,function*(){const{data:t}=yield n.client.query({query:c.MenuStockFormQuery,variables:{stockId:e},fetchPolicy:"no-cache"});return{id:(r=t.stockItem).id,internalNote:"TBD",nameLabel:r.nameLabel,code:r.code,note:r.note,plu:r.plu||"",wareUnit:r.wareUnit.enum,allergens:r.allergens.map(o.RM.prop("enum")),allowNegative:r.allowNegative,allowNegativeDefault:f(r.companyBranch.allowNegative)};var r})},t)})},8548:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QueryMenuStock=t.MenuStockDefaultsQuery=t.MenuStockFormQuery=void 0;var r,a=(r=n(23))&&r.__esModule?r:{default:r},l=n(79),o=n(5826),i=n(5827);const u=a.default`
  query GMenuStockForm($stockId: ID!) {
    stockItem(id: $stockId) {
      id
      code
      plu
      note
      nameLabel: label
      allowNegative
      wareUnit {
        ...GWareUnit
      }
      allergens {
        ...GAllergen
      }
      companyBranch {
        id
        allowNegative: stockItemsCanBeNegative
      }
    }
  }
  ${o.AllergenFragment}
  ${i.WareUnitFragment}
`;t.MenuStockFormQuery=u;const c=a.default`
  query GMenuStockDefaults($branchId: ID!) {
    companyBranch(id: $branchId) {
      id
      allowNegative: stockItemsCanBeNegative
    }
  }
`;t.MenuStockDefaultsQuery=c;const d=(0,l.buildQuery)(u);t.QueryMenuStock=d},8549:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StockFormMain=void 0;var r,a=(r=n(0))&&r.__esModule?r:{default:r},l=n(7851),o=n(7875),i=n(7934),u=n(78),c=n(7877),d=n(7999),s=n(8550),f=n(8551),m=n(8095),p=n(8e3),y=n(8001),g=n(8552),h=n(8553);t.StockFormMain=(e=>a.default.createElement(i.FormContainer,null,a.default.createElement(i.FormColumn,null,a.default.createElement(y.FormInputName,{placeholder:u.i18n._("Card name")}),a.default.createElement(m.FormInputCode,{placeholder:u.i18n._("Card code")}),a.default.createElement(h.FormInputWareUnit,{placeholder:u.i18n._("Choose unit")}),a.default.createElement(g.FormInputPlu,{placeholder:u.i18n._("PLU")}),a.default.createElement(p.FormInputInternalNote,{placeholder:u.i18n._("Card note"),field:"note",label:u.i18n._("Card note")}),a.default.createElement(s.FormInputAllergens,null),a.default.createElement(f.FormInputAllowNegative,null)),a.default.createElement(o.CardDock,{position:"BottomRight"},a.default.createElement(l.CanMutate,{mutationName:"destroyStockItem"},a.default.createElement(c.WithSettings,{render:({menu:e})=>a.default.createElement(d.FormDeleteButton,{confirmText:u.i18n._("Remove this card?"),onDelete:t=>e.stock.deleteItem(t)})})))))},8550:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormInputAllergens=void 0;var r,a=(r=n(0))&&r.__esModule?r:{default:r},l=n(7849),o=n(7850),i=n(53),u=n(8096);t.FormInputAllergens=(({field:e="allergens",icon:t="error_outline"})=>a.default.createElement(l.Field,{field:e},e=>a.default.createElement(o.IconLine,{icon:t,labelWidth:7},a.default.createElement(u.MenuAllergenIndicator,{selected:e.value,onToggle:t=>{const n=e.value;n.includes(t)?e.setValue(i.RM.without([t],n)):e.setValue([...n,t])}}))))},8551:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormInputAllowNegative=void 0;var r=n(130),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),l=n(7849),o=n(7912),i=n(7850),u=n(171),c=n(78);const d=[{type:u.FieldStateEnum.Enabled,label:(0,r.i18nMark)("Permit")},{type:u.FieldStateEnum.Disabled,label:(0,r.i18nMark)("Forbid")}];t.FormInputAllowNegative=(({})=>{const e=(0,a.useMemo)(()=>` (${c.i18n._("Is default setting").toLocaleLowerCase()})`,[]);return a.default.createElement(l.FormApi,null,({values:{allowNegativeDefault:t}})=>a.default.createElement(i.IconLine,{label:c.i18n._("Negative stock"),labelWidth:7},a.default.createElement(o.FormInputFlatSelect,{field:"allowNegative",items:d,formatItem:n=>n.type===t?a.default.createElement("span",null,c.i18n._(n.label),a.default.createElement("i",null,e)):c.i18n._(n.label),getItemId:e=>e.type})))})},8552:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormInputPlu=void 0;var r,a=(r=n(0))&&r.__esModule?r:{default:r},l=n(7854),o=n(7850),i=n(7858);function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var c=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&(n[r[a]]=e[r[a]])}return n};t.FormInputPlu=(e=>{var{field:t="plu",icon:n="fingerprint"}=e,r=c(e,["field","icon"]);return a.default.createElement(o.IconLine,{icon:n,labelWidth:7},a.default.createElement(i.Sizer,{width:9},a.default.createElement(l.FormInputTextBox,u({field:t,inputFullWidth:!0},r))))})},8553:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormInputWareUnit=void 0;var r,a=(r=n(0))&&r.__esModule?r:{default:r},l=n(7993),o=n(7850),i=n(53),u=n(78),c=n(8554);function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&(n[r[a]]=e[r[a]])}return n};t.FormInputWareUnit=(e=>{var{field:t="wareUnit",icon:n="select_all"}=e,r=s(e,["field","icon"]);return a.default.createElement(c.QueryWareUnits,{renderLoading:!1,render:({wareUnits:e},{loading:c})=>a.default.createElement(o.IconLine,{icon:n,labelWidth:7},a.default.createElement(l.FormInputSelect,d({field:t,options:e||[],isLoading:c,isRequired:!0,validatioName:u.i18n._("Ware unit"),getOptionLabel:i.RM.prop("code"),getOptionValue:i.RM.prop("enum"),width:12},r)))})})},8554:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QueryWareUnits=t.WareUnitsQuery=void 0;var r,a=(r=n(23))&&r.__esModule?r:{default:r},l=n(79);const o=a.default`
  query GWareUnits {
    wareUnits {
      id
      code
      enum
    }
  }
`;t.WareUnitsQuery=o;const i=(0,l.buildQuery)(o);t.QueryWareUnits=i},8555:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StockRecipesView=void 0;var r,a=n(130),l=(r=n(0))&&r.__esModule?r:{default:r},o=n(7869),i=n(7857),u=n(78),c=n(8556);t.StockRecipesView=(({stockId:e})=>null===e?null:l.default.createElement(c.QueryStockRecipes,{variables:{stockId:e},render:({stockItem:{ingredients:e}})=>e.length>0?l.default.createElement(l.default.Fragment,null,l.default.createElement(i.Headline,null,l.default.createElement(a.Trans,{id:"Recipes using this card"})),l.default.createElement(o.DataTable,{items:[...e]},l.default.createElement(o.Column,{dataKey:"",cellDataGetter:({rowData:e})=>({pathname:`/settings/menu/recipe/${e.recipe.id}`,state:{recipeType:e.recipe.recipeType.enum}}),cellRenderer:o.ColumnRendererEdit,width:100}),l.default.createElement(o.Column,{dataKey:"recipe",width:300,label:u.i18n._("Name"),cellRenderer:({rowData:e})=>l.default.createElement(l.default.Fragment,null,e.recipe.nameLabel,l.default.createElement(o.NoteText,null,e.recipe.descriptionLabel))}))):null}))},8556:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QueryStockRecipes=t.StockRecipesQuery=void 0;var r,a=(r=n(23))&&r.__esModule?r:{default:r},l=n(79);const o=a.default`
  query GStockRecipes($stockId: ID!) {
    stockItem(id: $stockId) {
      id
      ingredients {
        id
        recipe {
          id
          nameLabel
          descriptionLabel
          recipeType: wareCategoryType {
            enum
          }
        }
      }
    }
  }
`;t.StockRecipesQuery=o;const i=(0,l.buildQuery)(o);t.QueryStockRecipes=i}}]);
//# sourceMappingURL=178.197dc16f.chunk.js.map