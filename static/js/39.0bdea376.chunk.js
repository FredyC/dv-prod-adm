(this.webpackJsonpspeedlo=this.webpackJsonpspeedlo||[]).push([[39],{1372:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(61),r=n(0),c=n.n(r),i=n(1363),o=n(1379),u=Object(a.b)((function(e){var t=e.mutationName,n=e.children;return Object(i.b)(t)?c.a.createElement(c.a.Fragment,null,n):c.a.createElement(o.a,null,"No access to mutation ".concat(t))}))},1378:function(e,t,n){"use strict";var a=n(4),r=n(18),c=n(0),i=n.n(c),o=n(45);function u(){var e=Object(a.a)(["\n  overflow-y: auto;\n  -webkit-overflow-scrolling: touch;\n  height: 100%;\n"]);return u=function(){return e},e}var l=r.c.div(u()),d=n(158),s=n(14);function f(){var e=Object(a.a)(["\n    margin: 0;\n    grid-row: "," ;\n    grid-column: span 16;\n    height: "," ;\n    position: relative;\n  "]);return f=function(){return e},e}function m(){var e=Object(a.a)(["\n  position: fixed;\n  bottom: 0.5rem;\n  width: ",";\n  left: ",";\n  top: ",";"]);return m=function(){return e},e}n.d(t,"a",(function(){return h}));var b=r.c.div.withConfig({displayName:"StyledPageLayoutFullHeightItem",componentId:"sc-1mean6j-0"})([""," ",""],Object(o.c)(m(),(function(e){return void 0!==e.widthInColumns?"calc(("+e.widthInColumns+" * 6.22vw) - "+s.d.LayoutGridCellMargin+")":"calc(100vh - (2 * "+s.d.LayoutGridCellMargin+"))"}),(function(e){return void 0!==e.column?"calc(("+e.column+" * 6.22vw) + "+s.d.LayoutGridCellMargin+")":s.d.LayoutGridCellMargin}),(function(e){return void 0!==e.row?"calc(("+e.row+" * 3.9375rem) + "+s.d.LayoutGridCellMargin+")":"calc(3.9375rem + "+s.d.LayoutGridCellMargin+")"})),Object(o.d)(f(),(function(e){return e.rowInMobile}),(function(e){var t=e.forcePercentHeightInMobile;return t?"calc(".concat(t,"vh - ").concat(s.d.PageHeaderHeight+.25+s.d.DefaultSizeUnit,")"):"unset"}))),h=function(e){var t=e.children,n=e.row,a=void 0===n?1:n,r=e.rowInMobile,c=void 0===r?16:r,u=e.column,s=void 0===u?0:u,f=e.widthInColumns,m=void 0===f?16:f,h=e.withScrollArea,v=void 0!==h&&h,g=e.scrollAreaId,p=e.forcePercentHeightInMobile,E=Object(o.f)().isMobile;return i.a.createElement(b,{column:s,row:a,rowInMobile:c,widthInColumns:m,withScrollArea:v,forcePercentHeightInMobile:p},v&&!E?i.a.createElement(l,{id:g},t):i.a.createElement(d.a,{height:100,heightUnit:"%"},t))}},1382:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(4);function r(){var e=Object(a.a)(["\n  display: flex;\n  flex-direction: row;\n  flex-wrap: ",";\n  justify-content: ",";\n"]);return r=function(){return e},e}var c=n(18).c.div(r(),(function(e){var t=e.flexWrap;return void 0===t?"unset":t}),(function(e){var t=e.justify;return void 0===t?"space-between":t}))},1383:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(4);function r(){var e=Object(a.a)(["\n  flex: ",";\n  padding: ",";\n  margin: ",";\n"]);return r=function(){return e},e}var c=n(18).c.div(r(),(function(e){var t=e.fixedWidth,n=void 0!==t&&t,a=e.width,r=e.widthGrowIndex,c=void 0===r?0:r;return n?a?"0 0 ".concat(a):"0 0":"".concat(c," 0")}),(function(e){var t=e.padding;return void 0===t?"0.25rem":t}),(function(e){var t=e.margin;return void 0===t?"":t}))},1387:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(0),r=n.n(a);function c(e){var t=e.getOptionFilter,n="function"===typeof t;return{filterOption:r.a.useCallback((function(e,n){return!t||0===n.length||t(e.data).toLocaleLowerCase().includes(n.toLocaleLowerCase())}),[t]),isSearchable:n}}},1401:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(0),r=n.n(a),c=function(e){var t=e.text,n=void 0===t?"...":t;return r.a.createElement("h1",null,n)}},1402:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(1576);function r(){return Object(a.a)().menu}},1415:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(47),r=n(1445),c=n(1437),i="create";function o(e){var t=Object(a.l)().history,n=(0,Object(r.a)().getQueryParam)("type"),o=function(e,t){return t?"".concat(e,"?type=").concat(t):e};return{itemType:n,isCreate:e===i,getItemRoute:o,getRecipeCreateRoute:function(e){return o("".concat(c.c,"/").concat(i),e)},getRecipeEditRoute:function(e,t){return o("".concat(c.c,"/").concat(e),t)},getCategoryCreateRoute:function(e){return o("".concat(c.b,"/").concat(i),e)},getCategoryEditRoute:function(e,t){return o("".concat(c.b,"/").concat(e),t)},getStockCreateRoute:function(){return o("".concat(c.d,"/").concat(i))},getStockEditRoute:function(e){return o("".concat(c.d,"/").concat(e))},redirectToCategoryList:function(){t.replace(c.b)},redirectToRecipeList:function(){t.replace(c.c)},redirectToStockList:function(){t.replace(c.d)}}}},1416:function(e,t,n){"use strict";var a=n(4),r=n(65),c=(n(1574),n(0)),i=n.n(c),o=n(1508),u=n(18),l=n(36),d=n(1900),s=n(1573),f=n(439),m=n(131),b=function(e){var t=e.target,n=e.Link,a=void 0===n?s.a:n,c=Object(r.a)(e,["target","Link"]);return i.a.createElement(a,{to:t},i.a.createElement(f.a,null,i.a.createElement(m.a,Object.assign({icon:d.a},c))))},h=n(1575),v=n(2785),g=n(14),p=function(e){var t=e.isVisible,n=Object(r.a)(e,["isVisible"]);return i.a.createElement(f.a,null,i.a.createElement(m.a,Object.assign({icon:v.a,iconColor:t?g.a.white:g.a.greyMiddle,color:g.a.greyMiddle},n)))},E=n(1525),y=n(1372),w=n(1433),O=n(1532);function j(){var e=Object(a.a)(["\n  padding: 1rem;\n  color: ",";\n  font-style: 'italic';\n"]);return j=function(){return e},e}n.d(t,"f",(function(){return C})),n.d(t,"h",(function(){return k})),n.d(t,"b",(function(){return R})),n.d(t,"c",(function(){return L})),n.d(t,"d",(function(){return I})),n.d(t,"e",(function(){return S})),n.d(t,"g",(function(){return M})),n.d(t,"a",(function(){return o.d}));var C=function(e){var t=e.items,n=e.heightStretch,a=void 0!==n&&n,c=e.fullHeight,u=void 0!==c&&c,l=e.rowHeight,d=void 0===l?60:l,s=e.isLoading,f=void 0!==s&&s,m=e.children,b=Object(r.a)(e,["items","heightStretch","fullHeight","rowHeight","isLoading","children"]),h=i.a.useCallback((function(e){var n=e.index;return t[n]}),[t]),v=i.a.useCallback((function(){return f?i.a.createElement(E.a,null):null}),[f]),g=function(e,n){return i.a.createElement(o.h,Object.assign({autoHeight:!a&&!u,width:e,height:n,headerHeight:50,rowCount:t?t.length:0,rowHeight:d,rowGetter:h,noRowsRenderer:v,style:{outline:"none"}},b),m)};return u?i.a.createElement(o.a,{disableHeight:!0},(function(e){var n=e.width;return g(n,t.length*d)})):a?i.a.createElement(o.a,null,(function(e){var t=e.width,n=e.height;return g(t,n)})):i.a.createElement(o.i,{scrollElement:window},(function(e){var t=e.height;return i.a.createElement(o.a,{disableHeight:!0},(function(e){var n=e.width;return g(n,t)}))}))};function k(e,t){var n=e.canQuery,a=e.canMutate;return function(e){var r=t(e);return n&&(r=i.a.createElement(w.a,{queryName:n},r)),a&&(r=i.a.createElement(y.a,{mutationName:a},r)),r}}function R(e){var t=e.cellData;return i.a.createElement(b,{target:t})}function L(e){var t=e.cellData,n=e.columnData;return i.a.createElement(h.a,{onClick:function(){return n.onRemove&&n.onRemove(t)}})}function I(e){var t=e.cellData,n=e.columnData,a=e.rowData;return i.a.createElement(p,{isVisible:t,onClick:function(){return n.onToggle(a.id,!t)}})}function S(e){var t=e.cellData,n=e.rowData,a=e.columnData;return i.a.createElement(i.a.Fragment,null,t,i.a.createElement(O.a,null,n[a.noteKey]||""))}var M=Object(u.c)((function(e){var t=e.text,n=void 0===t?l.b._("Table is empty"):t,a=Object(r.a)(e,["text"]);return i.a.createElement("div",a,n)}))(j(),g.a.greyMiddle)},1433:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(61),r=n(0),c=n.n(r),i=n(1363),o=n(1379),u=Object(a.b)((function(e){var t=e.queryName,n=e.children;return Object(i.c)(t)?c.a.createElement(c.a.Fragment,null,n):c.a.createElement(o.a,null,"No access to query ".concat(t))}))},1525:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var a=n(4),r=n(18),c=n(0),i=n.n(c),o=n(14);function u(){var e=Object(a.a)(["\n  0% {\n    -webkit-transform: scale(0);\n  }\n  100% {\n    -webkit-transform: scale(1);\n    opacity: 0;\n  }\n"]);return u=function(){return e},e}function l(){var e=Object(a.a)(["\n  0% {\n    -webkit-transform: scale(0);\n    transform: scale(0);\n  }\n  100% {\n    -webkit-transform: scale(1);\n    transform: scale(1);\n    opacity: 0;\n  }\n"]);return l=function(){return e},e}var d=Object(r.d)(l()),s=Object(r.d)(u()),f=r.c.div.withConfig({displayName:"StyledBlockLoader",componentId:"sc-2zh6cb-0"})(["width:40px;height:40px;margin:100px auto;background-color:",";border-radius:100%;-webkit-animation:"," 1s infinite ease-in-out;animation:"," 1s infinite ease-in-out;"],o.a.orange,s,d),m=function(e){return i.a.createElement(f,null,i.a.createElement("div",{className:"bounce1"}),i.a.createElement("div",{className:"bounce2"}),i.a.createElement("div",{className:"bounce3"}))}},1532:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(4),r=n(18),c=n(14);function i(){var e=Object(a.a)(["\n  color: ",";\n"]);return i=function(){return e},e}var o=r.c.div(i(),c.a.greyMiddle)},1533:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return f})),n.d(t,"c",(function(){return m}));var a,r,c=n(256),i=n(380),o=n(78),u=n(36),l=(a={},Object(c.a)(a,o.n.Main,Object(i.i18nMark)("Ware categories")),Object(c.a)(a,o.n.SideDish,Object(i.i18nMark)("Sidedish categories")),Object(c.a)(a,o.n.Cover,Object(i.i18nMark)("Cover categories")),a),d=(r={},Object(c.a)(r,o.n.Main,Object(i.i18nMark)("Ware recipe")),Object(c.a)(r,o.n.SideDish,Object(i.i18nMark)("Sidedish recipe")),Object(c.a)(r,o.n.Cover,Object(i.i18nMark)("Cover recipe")),r),s=function(){var e;return e={},Object(c.a)(e,o.o.Delivery,u.b._("Delivery sale")),Object(c.a)(e,o.o.Inhouse,u.b._("Local sale")),e};function f(e){return e?u.b._(l[e]):""}function m(e){return e?u.b._(d[e]):""}},1536:function(e,t,n){"use strict";var a=n(4),r=n(0),c=n.n(r),i=n(18),o=n(1372),u=n(254),l=n(1383),d=n(1382),s=n(36),f=n(257),m=n(1378),b=n(1447),h=n(443),v=n(1673),g=n(47),p=n(61),E=n(1364),y=n(158),w=n(78),O=n(1361),j=n(20),C=n(1402),k=n(1533),R=Object(p.b)((function(){var e=Object(C.a)(),t=Object(w.Lb)({branchId:e.branchId}),n=t.data,a=t.loading;Object(g.i)((function(){return e.branchId}),(function(){e.setCategoryFilter(null)}));return c.a.createElement(y.a,{width:17},c.a.createElement(E.a,{key:e.branchId,value:n&&n.categories.find(Object(j.c)(e.categoryFilterId)),onChange:function(t){e.setCategoryFilter(t?t.id:null)},options:function(){if(!n||!n.categories)return O.a;var e=j.a.groupBy((function(e){return e.categoryType.enum.toString()}),n.categories);return Object.keys(e).map((function(t){return{label:Object(k.a)(t),options:e[t]}}))}(),isMulti:!1,isClearable:!0,isSearchable:!0,isLoading:a,placeholder:s.b._("Filter by category"),getOptionValue:j.a.prop("id"),getOptionLabel:j.a.propOr("","nameLabel")}))})),L=n(46),I=n(79),S=n(1357),M=n(2797),D=n(442),x=n(131),T=n(14),_=n(1577),H=n(1415),N=i.c.div.withConfig({displayName:"StyledRecipeTypeSelection",componentId:"s5zkkx-0"})(["button{margin:0.5rem 1rem;}"]),W=function(){var e=c.a.useState(!1),t=Object(L.a)(e,2),n=t[0],a=t[1],r=Object(g.l)().history,i=Object(H.a)().getRecipeCreateRoute,o=function(e){return function(){r.push(i(e))}};return c.a.createElement(c.a.Fragment,null,c.a.createElement(_.a,{onClick:function(e){e.preventDefault(),a(!0)}}),c.a.createElement(S.a,{open:n,onClose:function(){return a(!1)}},c.a.createElement(N,null,c.a.createElement(M.a,null,c.a.createElement(I.Trans,{id:"Select item type"})),c.a.createElement(y.a,{width:14},c.a.createElement(D.a,{right:2},c.a.createElement(x.a,{onClick:o(w.n.Main),color:T.a.green},c.a.createElement(I.Trans,{id:"Ware"})),c.a.createElement(x.a,{onClick:o(w.n.SideDish),color:T.a.greyDarkest},c.a.createElement(I.Trans,{id:"Sidedish"})),c.a.createElement(x.a,{onClick:o(w.n.Cover),color:T.a.greyDarkest},c.a.createElement(I.Trans,{id:"Cover"})))))))},P=n(1578),F=n(1416),K=n(1381),B=n(177),G=n(1675),V=function(e){var t=e.recipes,n=e.onToggle,a=e.onRemove,r=e.showEditColumn,i=void 0===r||r,o=e.showRemoveColumn,u=void 0!==o&&o,l=e.showVisibilityColumn,d=void 0===l||l,f=e.showTypeColumn,m=void 0!==f&&f,b=e.isLoading,h=void 0!==b&&b,v=e.heightStretch,g={isLoading:h,items:t,heightStretch:void 0!==v&&v,noRowsRenderer:function(){return h?c.a.createElement(P.a,null):c.a.createElement(K.a,null,s.b._("No recipes has been found"))}},p=Object(H.a)().getRecipeEditRoute;return c.a.createElement(F.f,g,i&&c.a.createElement(F.a,{dataKey:"id",width:T.d.ButtonColumnWidthPx,minWidth:T.d.ButtonColumnWidthPx,cellRenderer:Object(F.h)({canQuery:"recipe"},F.b),cellDataGetter:function(e){var t=e.rowData;return p(t.id,t.recipeType.enum)}}),u&&c.a.createElement(F.a,{dataKey:"id",width:T.d.ButtonColumnWidthPx,minWidth:T.d.ButtonColumnWidthPx,cellRenderer:F.c,columnData:{onRemove:a}}),d&&c.a.createElement(F.a,{dataKey:"visible",width:T.d.ButtonColumnWidthPx,minWidth:T.d.ButtonColumnWidthPx,cellRenderer:Object(F.h)({canMutate:"updateRecipe"},F.d),columnData:{onToggle:n}}),m&&c.a.createElement(F.a,{dataKey:"recipeType",width:100,label:s.b._("Type"),cellRenderer:q}),c.a.createElement(F.a,{dataKey:"code",width:100,label:s.b._("Code")}),c.a.createElement(F.a,{dataKey:"nameLabel",width:600,flexGrow:2,label:s.b._("Name"),cellRenderer:F.e,columnData:{noteKey:"internalNote"}}),c.a.createElement(F.a,{dataKey:"prices",width:150,label:s.b._("Delivery sale"),cellRenderer:A,columnData:{priceType:G.b.Delivery}}),c.a.createElement(F.a,{dataKey:"prices",width:150,label:s.b._("Local sale"),cellRenderer:A,columnData:{priceType:G.b.Inhouse}}),c.a.createElement(F.a,{dataKey:"availableAmount",label:s.b._("recipe.list.availableAmount",{},{defaults:"Stock"}),width:100}),c.a.createElement(F.a,{dataKey:"internalNote",label:s.b._("Internal note"),width:200}))};function A(e){var t=e.cellData,n=e.columnData.priceType,a=t.find(j.a.pathEq(["priceType","enum"],n));if(a){var r=a.price,i=r.value,o=r.currency.code;return Object(B.g)(i,o)}return c.a.createElement("i",null,s.b._("Not set").toLocaleLowerCase())}function q(e){var t=e.rowData.recipeType.enum;return t===w.n.SideDish?s.b._("Sidedish").toLocaleLowerCase():t===w.n.Cover?s.b._("Cover").toLocaleLowerCase():s.b._("Ware").toLocaleLowerCase()}var z=Object(p.b)((function(){var e=Object(C.a)(),t=Object(w.Sb)({branchId:e.branchId,categoryId:e.categoryFilterId}),n=t.getStash,a=t.loading,r=Object(w.Y)(),i=Object(L.a)(r,1)[0],o=c.a.useCallback((function(e,t){i({recipeId:e,visible:t},{optimisticResponse:{updateVisibility:{__typename:"Recipe",id:e,visible:t}}})}),[i]),u=e.filter.getCodeAndNamePredicate(),l=n((function(e){return e.recipes.filter(u)}));return c.a.createElement(V,{recipes:l||O.a,onToggle:o,isLoading:a,heightStretch:!0,showTypeColumn:!0})}));function Q(){var e=Object(a.a)(["\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n\n  & .filter {\n    flex: 0 0 auto;\n  }\n\n  & .table {\n    flex: 1 1 0;\n    min-height: 0;\n  }\n"]);return Q=function(){return e},e}n.d(t,"b",(function(){return J})),n.d(t,"a",(function(){return U}));var J=i.c.div(Q()),U=function(e){return c.a.createElement(f.a,{pageTitle:s.b._("Recipe overview"),useBackButton:!0,backRoute:h.a},c.a.createElement(m.a,{forcePercentHeightInMobile:100},c.a.createElement(u.a,{stretchToParent:!0},c.a.createElement(J,null,c.a.createElement("div",{className:"filter"},c.a.createElement(d.a,{justify:"start",flexWrap:"wrap"},c.a.createElement(l.a,null,c.a.createElement(b.a,{width:20})),c.a.createElement(l.a,null,c.a.createElement(v.a,null)),c.a.createElement(l.a,null,c.a.createElement(R,null))),c.a.createElement(o.a,{mutationName:"createRecipe"},c.a.createElement(W,null))),c.a.createElement("div",{className:"table"},c.a.createElement(z,null))))))}},1573:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(89),r=n(65),c=n(0),i=n.n(c),o=n(59),u=n(84),l=n(1531),d=function(e){var t=e.to,n=e.from,a=Object(r.a)(e,["to","from"]);return i.a.createElement(o.c,{children:function(e){var r=e.location;return i.a.createElement(u.b,Object.assign({to:s(t,n||"".concat(r.pathname,"/"))},a))}})};function s(e,t){if("string"===typeof e)return Object(l.a)(e,t);var n=Object(l.a)(e.pathname||"",t);return Object(a.a)({},e,{pathname:n})}},1575:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(1524),r=n(2784),c=n(0),i=n.n(c),o=n(439),u=n(131),l=function(e){var t=Object(a.a)({},e);return i.a.createElement(o.a,null,i.a.createElement(u.a,Object.assign({type:"button",icon:r.a},t)))}},1576:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(40);function r(){return Object(a.b)().settings}},1577:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var a=n(4),r=n(1559),c=n(0),i=n.n(c),o=n(84),u=n(18),l=n(439),d=n(131),s=n(14);function f(){var e=Object(a.a)(["\n  position: absolute;\n  right: 0;\n  z-index: 5;\n"]);return f=function(){return e},e}var m=u.c.div(f()),b=function(e){var t=e.routeTo,n=e.onClick,a=i.a.createElement(l.a,null,i.a.createElement(d.a,{icon:r.a,color:s.a.green,onClick:n}));return i.a.createElement(m,null,t?i.a.createElement(o.b,{to:t},a):a)}},1673:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(0),r=n.n(a),c=n(1674),i=n(36),o=n(1402),u=function(){var e=Object(o.a)();return r.a.createElement(c.a,{placeholder:i.b._("Filter by name or code"),model:e.filter,debounceIntervalMs:250})}},1674:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var a=n(46),r=n(2786),c=n(47),i=n(61),o=n(0),u=n.n(o),l=n(1367),d=n(1362),s=n(158),f=function(e){var t=e.model,n=e.icon,o=void 0===n?r.a:n,f=e.placeholder,m=e.debounceIntervalMs,b=void 0===m?0:m,h=Object(c.f)((function(e){t.setValue(e)}),b),v=Object(a.a)(h,1)[0],g=u.a.useCallback((function(e){v(e.target.value)}),[v]);return Object(i.g)((function(){return u.a.createElement(d.a,{icon:o},u.a.createElement(s.a,{width:17},u.a.createElement(l.a,{inputFullWidth:!0,defaultValue:t.value,onChange:g,placeholder:f})))}))}},1675:function(e,t,n){"use strict";var a=n(78);n.d(t,"a",(function(){return a.n})),n.d(t,"b",(function(){return a.o}))},1676:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(65),r=(n(1574),n(0)),c=n.n(r),i=n(1508);function o(e){var t=e.items,n=e.renderItem,r=e.heightStretch,o=void 0!==r&&r,u=e.rowHeight,l=void 0===u?60:u,d=Object(a.a)(e,["items","renderItem","heightStretch","rowHeight"]),s=c.a.useCallback((function(e){var a=e.key,r=e.style,i=e.index;return c.a.createElement("div",{key:a,style:r},n(t[i],i))}),[n,t]),f=function(e,n){return c.a.createElement(i.g,Object.assign({width:e,height:n,headerHeight:50,rowHeight:l,rowCount:t?t.length:0,rowRenderer:s,style:{outline:"none"}},d))};return o?c.a.createElement(i.a,null,(function(e){var t=e.width,n=e.height;return f(t,n)})):c.a.createElement(i.i,{scrollElement:window},(function(e){var t=e.height;return c.a.createElement(i.a,{disableHeight:!0},(function(e){var n=e.width;return f(n,t)}))}))}}}]);
//# sourceMappingURL=39.0bdea376.chunk.js.map