(window.webpackJsonp=window.webpackJsonp||[]).push([[176],{7677:function(e,t,a){"use strict";a.d(t,"a",function(){return d});var n=a(0),r=a.n(n),i=a(22),o=a(7687),c=a(18),l=i.b.div.withConfig({displayName:"PageLayoutFullHeightItem__FullHeightDiv",componentId:"sc-1mean6j-0"})(["position:fixed;bottom:0.5rem;width:",";left:",";top:",";"],function(e){return void 0!==e.widthInColumns?"calc(("+e.widthInColumns+" * 6.22vw) - "+c.d.LayoutGridCellMargin+")":"calc(100vh - (2 * "+c.d.LayoutGridCellMargin+"))"},function(e){return void 0!==e.column?"calc(("+e.column+" * 6.22vw) + "+c.d.LayoutGridCellMargin+")":c.d.LayoutGridCellMargin},function(e){return void 0!==e.row?"calc(("+e.row+" * 3.9375rem) + "+c.d.LayoutGridCellMargin+")":"calc(3.9375rem + "+c.d.LayoutGridCellMargin+")"}),u=i.b.div.withConfig({displayName:"PageLayoutFullHeightItem__FullHeightDivStyled",componentId:"sc-1mean6j-1"})(["height:100%;"]),d=function(e){var t=e.children,a=e.row,n=void 0===a?1:a,i=e.column,c=void 0===i?0:i,d=e.widthInColumns,s=void 0===d?16:d,m=e.withScrollArea,f=void 0!==m&&m,p=e.scrollAreaId;return r.a.createElement(l,{column:c,row:n,widthInColumns:s,withScrollArea:f},f?r.a.createElement(o.a,{id:p},t):r.a.createElement(u,null,t))}},7678:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n=a(22).b.div.withConfig({displayName:"FlexRowSingle",componentId:"sc-1opww0j-0"})(["display:flex;flex-direction:row;justify-content:",";"],function(e){var t=e.justify;return void 0===t?"space-between":t})},7682:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n=a(22).b.div.withConfig({displayName:"VerticalGap",componentId:"z6ukut-0"})(["height:",";"],function(e){var t=e.size,a=void 0===t?1:t,n=e.sizeUnit,r=void 0===n?"rem":n;return"".concat(a).concat(r)});n.displayName="VerticalGap"},7687:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n=a(22).b.div.withConfig({displayName:"ScrollArea",componentId:"v30w13-0"})(["overflow-y:auto;-webkit-overflow-scrolling:touch;height:100%;"])},7702:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=a(22),r=Object(n.b)("div").withConfig({displayName:"CardDock",componentId:"sc-1fyaqia-0"})(["position:absolute;",";",";"],function(e){var t=e.position,a=void 0===t?"BottomRight":t;return"BottomLeft"===a||"TopLeft"===a?"left: 0":"right: 0"},function(e){var t=e.position,a=void 0===t?"BottomRight":t;return"BottomRight"===a||"BottomLeft"===a?"bottom: 0":"top: 0"})},7740:function(e,t,a){"use strict";function n(e){var t=e.toLocaleLowerCase();return function(e){return e.toLocaleLowerCase().includes(t)}}a.d(t,"a",function(){return n})},7782:function(e,t,a){"use strict";a.d(t,"a",function(){return d}),a.d(t,"b",function(){return s});var n=a(34),r=a(39),i=a(0),o=a.n(i),c=a(54),l=a(61),u=a(186),d=function(e){var t=e.to,a=e.from,n=Object(r.a)(e,["to","from"]);return o.a.createElement(c.Route,{children:function(e){var r=e.location;return o.a.createElement(l.b,Object.assign({to:s(t,a||"".concat(r.pathname,"/"))},n))}})};function s(e,t){if("string"===typeof e)return Object(u.a)(e,t);var a=Object(u.a)(e.pathname||"",t);return Object(n.a)({},e,{pathname:a})}},7787:function(e,t,a){"use strict";a.d(t,"a",function(){return b});var n=a(39),r=a(112),i=a(113),o=a(116),c=a(114),l=a(117),u=a(0),d=a.n(u),s=a(7663),m=a(25),f=a(33),p=a(7685),b=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(o.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(i)))).validate=function(e){var t=a.props,n=t.isRequired,r=t.isMulti,i=t.validationName;if(n){if(r&&(!Array.isArray(e)||0===e.length))return f.b._("{validationName} must have at least option selected",{validationName:i});if(!r&&(null===e||void 0===e))return f.b._("{validationName} must have a selection",{validationName:i})}return null},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"getControlProps",value:function(e){var t=this.props,a=t.isMulti,n=t.items,r=t.defaultSelection,i=t.getItemId,o=e.value||r;if(a){return{selectedItems:Array.isArray(o)?n.filter(function(e){return o.includes(i(e))}):[],onMultiSelection:function(t){e.setValue(t.map(i)),e.setTouched(!0)}}}return{selectedItem:o&&n.find(function(e){return i(e)===o}),onSingleSelection:function(t){e.setValue(t?i(t):null),e.setTouched(!0)}}}},{key:"render",value:function(){var e=this,t=this.props,a=t.field,r=t.fieldIsPure,i=void 0!==r&&r,o=t.isRequired,c=void 0!==o&&o,l=t.isClearable,u=void 0!==l&&l,m=Object(n.a)(t,["field","fieldIsPure","isRequired","isClearable"]);return d.a.createElement(s.Field,{field:a,pure:i,validate:this.validate},function(t){return d.a.createElement(p.a,Object.assign({},e.getControlProps(t),{isInvalid:Boolean(t.error),isClearable:u&&!c},m))})}}]),t}(d.a.Component);b.defaultProps={validationName:f.b._("Value"),getItemId:m.a.prop("id")}},7791:function(e,t,a){"use strict";a.d(t,"a",function(){return u});var n=a(0),r=a.n(n),i=a(7735),o=a(22),c=a(98),l=o.b.div.withConfig({displayName:"DragHandle__DragHandleContainerStyled",componentId:"xbsz8c-0"})(["padding:1rem 0.4rem;cursor:grab;"]),u=Object(i.SortableHandle)(function(){return r.a.createElement(l,null,r.a.createElement(c.a,{iconName:"reorder"}))})},7951:function(e,t,a){"use strict";a.d(t,"a",function(){return h});var n=a(34),r=a(39),i=a(112),o=a(113),c=a(116),l=a(114),u=a(117),d=a(0),s=a.n(d),m=a(7663),f=a(25),p=a(33),b=a(7670),h=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).validate=function(e){return a.props.isRequired&&!e?p.b._("{0} must be selected",{0:a.props.validatioName}):null},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"getControlProps",value:function(e){var t=this.props,a=t.isMulti,n=t.options,r=t.getOptionValue,i=t.defaultValue,o=e.value||i;if(a){var c=Array.isArray(o)?function(e){return o.includes(r(e))}:f.a.F;return{value:Array.isArray(n)?n.filter(c):[],onChange:function(t){e.setValue(t.map(r))}}}return{value:o&&n.find(function(e){return r(e)===o}),onChange:function(t){e.setValue(r(t))}}}},{key:"render",value:function(){var e=this,t=this.props,a=t.field,i=t.fieldIsPure,o=void 0!==i&&i,c=(t.isRequired,t.defaultValue,Object(r.a)(t,["field","fieldIsPure","isRequired","defaultValue"]));return s.a.createElement(m.Field,{field:a,validate:this.validate,pure:o},function(t){return s.a.createElement(b.a,Object.assign({},e.getControlProps(t),{onFocus:function(){return t.setTouched(!0)},styles:{control:function(e){return Boolean(t.error)?Object(n.a)({},e,{borderColor:"red"}):e}}},c))})}}]),t}(s.a.Component);h.defaultProps={validatioName:"Value",getItemId:f.a.prop("id")}},7984:function(e,t,a){},8133:function(e,t,a){t.pictograms=a(8134)},8134:function(e,t){e.exports=["pizza","beans","cheese","hot-pepper","smoking-barbecue","meat-pie","sausage","hot-dog","fruit","fruit-1","fruit-2","strawberry","soup","noodles","ramen","rice","spaghetti","food","piece-of-cake","beer","marshmallow","cake","banana-split","ice-cream","cookie","doughnut","cupcake","kebab","steak","fish","fondue","shrimp","berry","food","food-1","food-2","food-3","food-4","food-5","food-6","food-7","food-8","food-9","food-10","food-11","food-12","food-13","food-14","food-15","food-16","food-17","food-18","food-19","food-20","food-21","food-22","food-23","food-24","food-25","food-26","food-27","food-28","food-29","food-30","drink","drink-1","drink-2","drink-3","drink-4","drink-5","cup","cup-1","cup-2","whisky"]},8135:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(5);t.isApolloError=function(e){return e.hasOwnProperty("graphQLErrors")};var r=function(e){var t="";return Array.isArray(e.graphQLErrors)&&0!==e.graphQLErrors.length&&e.graphQLErrors.forEach(function(e){var a=e?e.message:"Error message not found.";t+="GraphQL error: "+a+"\n"}),e.networkError&&(t+="Network error: "+e.networkError.message+"\n"),t=t.replace(/\n$/,"")},i=function(e){function t(a){var n=a.graphQLErrors,i=a.networkError,o=a.errorMessage,c=a.extraInfo,l=e.call(this,o)||this;return l.graphQLErrors=n||[],l.networkError=i||null,l.message=o||r(l),l.extraInfo=c,l.__proto__=t.prototype,l}return n.__extends(t,e),t}(Error);t.ApolloError=i},8138:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(54),o=a(163),c=a(81),l=a(22),u=a(158),d=a(7684),s=a(7678),m=a(7682),f=a(30),p=a(33),b=a(159),h=a(7677),g=a(7734),v=a(17),E=a.n(v),y=a(24),w=a(74),C=a(60),k=a(7672),O=a(59),I=a(325),j=a(34),x=a(39),_=(a(7984),a(7783)),T=a(7782),R=a(297),S=a(111),L=function(e){var t=e.target,a=e.Link,n=void 0===a?T.a:a,i=Object(x.a)(e,["target","Link"]);return r.a.createElement(n,{to:t},r.a.createElement(R.a,null,r.a.createElement(S.a,Object.assign({iconName:"mode_edit"},i))))};function N(){return(N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var D=function(e){var t=N({},e);return r.a.createElement(R.a,null,r.a.createElement(S.a,Object.assign({iconName:"remove_circle_outline"},t)))},F=a(18),P=function(e){var t=e.isVisible,a=Object(x.a)(e,["isVisible"]);return r.a.createElement(R.a,null,r.a.createElement(S.a,Object.assign({iconName:"remove_red_eye",iconColor:t?F.a.white:F.a.greyMiddle,color:F.a.greyMiddle},a)))},W=a(7667),B=a(7680),M=l.b.div.withConfig({displayName:"NoteText",componentId:"xj601d-0"})(["color:",";"],F.a.greyMiddle),V=a(88),q=function(e){var t=e.items,a=e.heightStretch,n=void 0!==a&&a,i=e.fullHeight,o=void 0!==i&&i,c=e.rowHeight,l=void 0===c?60:c,u=e.isLoading,d=void 0!==u&&u,s=e.children,m=Object(x.a)(e,["items","heightStretch","fullHeight","rowHeight","isLoading","children"]),f=r.a.useCallback(function(e){var a=e.index;return t[a]},[t]),p=r.a.useCallback(function(){return d?r.a.createElement(V.a,null):null},[d]),b=function(e,a){return r.a.createElement(_.h,Object.assign({autoHeight:!n&&!o,width:e,height:a,headerHeight:50,rowCount:t?t.length:0,rowHeight:l,rowGetter:f,noRowsRenderer:p,style:{outline:"none"}},m),s)};return o?r.a.createElement(_.a,{disableHeight:!0},function(e){var a=e.width;return b(a,t.length*l)}):n?r.a.createElement(_.a,null,function(e){var t=e.width,a=e.height;return b(t,a)}):r.a.createElement(_.i,{scrollElement:window},function(e){var t=e.height;return r.a.createElement(_.a,{disableHeight:!0},function(e){var a=e.width;return b(a,t)})})};function A(e,t){var a=e.canQuery,n=e.canMutate;return function(e){var i=t(e);return a&&(i=r.a.createElement(B.a,{queryName:a},i)),n&&(i=r.a.createElement(W.a,{mutationName:n},i)),i}}function K(e){var t=e.cellData;return r.a.createElement(L,{target:t})}function H(e){var t=e.cellData,a=e.columnData;return r.a.createElement(D,{onClick:function(){return a.onRemove&&a.onRemove(t)}})}function U(e){var t=e.cellData,a=e.columnData,n=e.rowData;return r.a.createElement(P,{isVisible:t,onClick:function(){return a.onToggle(n.id,!t)}})}function z(e){var t=e.cellData,a=e.rowData,n=e.columnData;return r.a.createElement(r.a.Fragment,null,t,r.a.createElement(M,null,a[n.noteKey]))}var G=Object(l.b)(function(e){var t=e.text,a=void 0===t?p.b._("Table is empty"):t,n=Object(x.a)(e,["text"]);return r.a.createElement("div",n,a)}).withConfig({displayName:"DataTable__DataTableEmptyText",componentId:"sc-1d9kay5-0"})(["padding:1rem;color:",";font-style:'italic';"],F.a.greyMiddle),Q=a(7791),$=a(298),J=a(112),Z=a(113),Y=a(116),X=a(114),ee=a(117),te=a(7735),ae=Object(te.SortableElement)(function(e){var t=e.columns,a=e.style,n=e.className;return r.a.createElement("div",{style:a,className:n},t)}),ne=Object(te.SortableContainer)(q),re=function(e){function t(){var e,a;Object(J.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(Y.a)(this,(e=Object(X.a)(t)).call.apply(e,[this].concat(i)))).state={sortedItems:a.props.items},a.rowRenderer=function(e){return r.a.createElement(ae,e)},a.onHandleSorting=function(){var e=Object(y.a)(E.a.mark(function e(t){var n,r,i,o,c;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.newIndex,r=t.oldIndex,n!==r){e.next=3;break}return e.abrupt("return");case 3:if(i=Object($.a)(a.state.sortedItems),o=Object(te.arrayMove)(a.state.sortedItems,r,n),a.setState({sortedItems:o}),!a.props.onSort){e.next=15;break}if(c=a.props.onSort({item:i[r],items:o,offset:n-r,newIndex:n,oldIndex:r}),e.t0=c,!e.t0){e.next=13;break}return e.next=12,c;case 12:e.t0=!e.sent;case 13:if(!e.t0){e.next=15;break}a.setState({sortedItems:i});case 15:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(ee.a)(t,e),Object(Z.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.items,Object(x.a)(e,["items"]));return r.a.createElement(ne,Object.assign({lockAxis:"y",useDragHandle:!0,onSortEnd:this.onHandleSorting,rowRenderer:this.rowRenderer},t,{items:this.state.sortedItems}))}}]),t}(r.a.PureComponent);re.getDerivedStateFromProps=function(e){return{sortedItems:e.items}};var ie,oe,ce=function(e){var t=e.categories,a=e.onToggle,n=e.onRemove,i=e.onSort,o=e.showEditColumn,c=void 0===o||o,l=e.showRemoveColumn,u=void 0!==l&&l,d=e.showVisibilityColumn,s=void 0!==d&&d,m=e.showHeader,f=void 0===m||m,b=e.isSortable,h=void 0!==b&&b,g=e.isLoading,v=void 0!==g&&g,E=e.heightStretch,y=void 0!==E&&E,w=e.fullHeight,C=void 0!==w&&w,k=e.noRowsDisplay,O=void 0===k?r.a.createElement(G,{text:p.b._("No recipes in category")}):k,x={isLoading:v,items:t,disableHeader:!f,heightStretch:y,fullHeight:C,noRowsRenderer:function(){return O}},T=[c&&r.a.createElement(_.d,{dataKey:"id",width:F.d.ButtonColumnWidthPx,minWidth:F.d.ButtonColumnWidthPx,cellRenderer:A({canQuery:"wareCategory"},K),cellDataGetter:function(e){var t=e.rowData;return Object(I.b)(t.id,t.categoryType.enum)}}),u&&r.a.createElement(_.d,{dataKey:"id",width:F.d.ButtonColumnWidthPx,minWidth:F.d.ButtonColumnWidthPx,cellRenderer:H,columnData:{onRemove:n}}),s&&r.a.createElement(_.d,{dataKey:"visible",width:F.d.ButtonColumnWidthPx,minWidth:F.d.ButtonColumnWidthPx,cellRenderer:A({canMutate:"updateWareCategory"},U),columnData:{onToggle:a}}),r.a.createElement(_.d,{dataKey:"nameLabel",width:300,label:p.b._("Name"),cellRenderer:z,columnData:{noteKey:"internalNoteLabel"}}),r.a.createElement(_.d,{dataKey:"countRecipes",label:p.b._("Recipe count"),width:100,cellRenderer:function(e){var t=e.cellData;return"".concat(t," ").concat(p.b._("Recipes").toLocaleLowerCase())}}),h&&r.a.createElement(_.d,{dataKey:"id",width:50,cellRenderer:function(){return r.a.createElement(Q.a,null)}})];return h?r.a.createElement.apply(r.a,[re,Object(j.a)({onSort:i},x)].concat(T)):r.a.createElement.apply(r.a,[q,x].concat(T))},le=l.b.div.withConfig({displayName:"CreateButton__CreateButtonContainer",componentId:"sc-837yoh-0"})(["position:absolute;right:0;z-index:5;"]),ue=function(e){var t=e.routeTo,a=void 0===t?"create":t,n=e.onClick;return r.a.createElement(le,null,r.a.createElement(T.a,{to:a,onClick:n},r.a.createElement(R.a,null,r.a.createElement(S.a,{iconName:"add_circle",color:F.a.green}))))},de=Object(C.observer)(function(e){var t=e.headline,a=e.subHeadline,n=void 0!==a&&a,i=e.categoryType,o=Object(O.c)().settings,c=Object(f.Z)({branchId:o.branchId,categoryType:i}),l=c.data,u=c.loading,m=c.updateQuery,p=c.refetch,b=Object(f.K)(),h=Object(w.a)(b,1)[0],g=l&&l.categories||[];return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,null,r.a.createElement(d.a,{widthGrowIndex:1},r.a.createElement(k.a,null,t),n&&r.a.createElement(k.a,{size:"smaller"},n)),r.a.createElement(d.a,{fixedWidth:!0},r.a.createElement(ue,{routeTo:Object(I.b)("create",i)}))),r.a.createElement(ce,{isLoading:u,categories:g,onToggle:function(e,t){h({categoryId:e,visible:t},{optimisticResponse:{updateWareCategory:{__typename:"WareCategory",id:e,visible:t}}})},isSortable:!0,showHeader:!1,fullHeight:!0,showVisibilityColumn:!0,onSort:function(){var e=Object(y.a)(E.a.mark(function e(t){var a,n,r,i;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.item,n=t.items,r=t.offset,m(function(){return{categories:n}}),e.next=4,o.menu.category.sortCategory(a.id,r);case 4:if(!(i=e.sent)){e.next=8;break}return e.next=8,p();case 8:return e.abrupt("return",i);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}))}),se=a(73),me=Object(l.b)(S.a).withConfig({displayName:"MenuGuideDownload__MenuGuideDownloadButton",componentId:"sc-1kyx0kn-0"})(["white-space:nowrap;margin-left:2rem;& a{text-decoration:none;color:",";padding:1rem;}"],F.a.black),fe=Object(C.observer)(function(){var e=Object(O.c)().settings,t=Object(f.ab)({branchId:e.branchId}),a=t.loading,n=t.data;return a||!(n&&n.companyBranch&&n.companyBranch.foodMenuUrl)?null:r.a.createElement(me,{color:F.a.greyMiddle},r.a.createElement("a",{href:n.companyBranch.foodMenuUrl,target:"_blank"},r.a.createElement(se.Trans,{id:"Menu codes manual"})))}),pe=l.b.div.withConfig({displayName:"MenuCategoryListPage__PartialDataTableContainer",componentId:"sc-1y45l0l-0"})(["height:calc(100% - 3.5rem);padding-top:1rem;overflow-y:scroll;overflow-x:hidden;-webkit-overflow-scrolling:touch;"]),be=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{pageTitle:p.b._("Category overview"),useBackButton:!0}),r.a.createElement(h.a,null,r.a.createElement(u.a,{stretchToParent:!0},r.a.createElement(s.a,{justify:"start"},r.a.createElement(d.a,null,r.a.createElement(g.a,{width:20})),r.a.createElement(d.a,null,r.a.createElement(fe,null))),r.a.createElement(pe,null,r.a.createElement(de,{categoryType:f.x.Main,headline:p.b._("Category of recipes")}),r.a.createElement(m.a,{size:1.5}),r.a.createElement(de,{categoryType:f.x.SideDish,headline:p.b._("Category of sidedish")}),r.a.createElement(m.a,{size:1.5}),r.a.createElement(de,{categoryType:f.x.Cover,headline:p.b._("Category of covers")})))))},he=l.b.div.withConfig({displayName:"TopRightButtonContainer",componentId:"sc-1n6vrhf-0"})(["position:fixed;z-index:500;right:0;top:0rem;width:10rem;opacity:0.96;background:",";border-radius:",";"],F.a.black,F.c.Button),ge=a(160),ve=a(209),Ee=(ie={},Object(ge.a)(ie,f.x.Main,Object(ve.i18nMark)("Ware categories")),Object(ge.a)(ie,f.x.SideDish,Object(ve.i18nMark)("Sidedish categories")),Object(ge.a)(ie,f.x.Cover,Object(ve.i18nMark)("Cover categories")),ie),ye=(oe={},Object(ge.a)(oe,f.x.Main,Object(ve.i18nMark)("Ware recipe")),Object(ge.a)(oe,f.x.SideDish,Object(ve.i18nMark)("Sidedish recipe")),Object(ge.a)(oe,f.x.Cover,Object(ve.i18nMark)("Cover recipe")),oe);function we(e){return p.b._(Ee[e])}function Ce(e){return p.b._(ye[e])}var ke=a(7663),Oe=a(7710),Ie=a(7709),je=function(e){var t=e.isCreate,a=void 0!==t&&t;return r.a.createElement(ke.FormApi,{render:function(e){return r.a.createElement(Ie.a,{id:"form-submit"},function(e,t){if(!Object(Oe.a)(e))return p.b._("Fix form errors");return t?p.b._("Create"):p.b._("Save")}(e,a))}})};var xe=a(7702),_e=l.b.form.withConfig({displayName:"FormContainer",componentId:"sc-38ce8s-0"})(["margin:0.6rem;display:flex;"]),Te=l.b.div.withConfig({displayName:"FormContainer__FormColumn",componentId:"sc-38ce8s-1"})(["flex:none;margin-right:1rem;"]),Re=a(7790),Se=a(115),Le=a(7781),Ne=a(8133),De=l.b.div.withConfig({displayName:"PictogramDisplay__PictogramDisplayStyled",componentId:"sc-6st3s9-0"})(["&:before{font-size:"," !important;margin-left:0.5rem !important;}"],function(e){var t=e.fontSize,a=void 0===t?2:t,n=e.fontSizeUnit,r=void 0===n?"rem":n;return"".concat(a).concat(r)}),Fe=function(e){var t=e.pictogramId,a=e.fontSize,n=void 0===a?2:a,i=e.fontSizeUnit,o=void 0===i?"rem":i;return r.a.createElement(De,{className:Pe(t),fontSize:n,fontSizeUnit:o})};function Pe(e){return"flaticon-".concat(e)}var We=a(7670),Be=a(25),Me=function(e){var t=e.field;return r.a.createElement(ke.Field,{field:t,pure:!0},function(e){return r.a.createElement(We.a,{value:e.value?{pictogram:e.value}:null,onChange:function(t){t&&!Array.isArray(t)&&e.setValue(t.pictogram)},options:Ne.pictograms.map(function(e){return{pictogram:e}}),getOptionValue:Be.a.prop("pictogram"),formatOptionLabel:function(e){var t=e.pictogram;return r.a.createElement(Fe,{pictogramId:t,fontSize:2})},components:{SingleValue:function(e){var t=e.data;return r.a.createElement(Fe,{pictogramId:t.pictogram,fontSize:4})}},styles:{container:function(e){return Object(j.a)({},e,{width:"8rem"})},menuList:function(e){return Object(j.a)({},e,{maxHeight:"35rem"})}},isClearable:!1,isSearchable:!1,minWidth:8})})},Ve=a(7728),qe=function(e){var t=e.confirmText,a=e.onDelete;return r.a.createElement(ke.Field,{field:"id"},function(e){return"NEW"!==e.value&&r.a.createElement(i.Route,null,function(n){var i=n.history;return r.a.createElement(Ve.a,{confirmText:t,onDelete:Object(y.a)(E.a.mark(function t(){return E.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a(e.value);case 2:i.goBack();case 3:case"end":return t.stop()}},t,this)}))})})})},Ae=a(7671),Ke=a(7665),He=function(e){var t=e.field,a=void 0===t?"internalNote":t,n=(e.icon,e.label),i=void 0===n?p.b._("Internal note").toLocaleLowerCase():n,o=Object(x.a)(e,["field","icon","label"]);return r.a.createElement(Ke.a,{label:i,labelWidth:7},r.a.createElement(Ae.a,Object.assign({field:a,inputFullWidth:!0},o)))},Ue=function(e){var t=e.field,a=void 0===t?"nameLabel":t,n=e.icon,i=void 0===n?"label":n,o=Object(x.a)(e,["field","icon"]);return r.a.createElement(Ke.a,{icon:i,labelWidth:7},r.a.createElement(Ae.a,Object.assign({field:a,inputFullWidth:!0,isRequired:!0,validatioName:p.b._("Name")},o)))},ze=function(e){var t=e.categoryType;return r.a.createElement(_e,null,r.a.createElement(Te,null,r.a.createElement(Se.a,{width:22},r.a.createElement(Ue,{placeholder:p.b._("Category name"),inputFullWidth:!0})),r.a.createElement(Se.a,{width:22},r.a.createElement(He,{placeholder:p.b._("Category internal note")})),r.a.createElement(Re.a,{field:"visible",label:p.b._("To show this category")})),t===f.x.Main?r.a.createElement(Te,null,r.a.createElement(Me,{field:"pictogram"})):null,r.a.createElement(xe.a,{position:"BottomRight"},r.a.createElement(Le.a,{render:function(e){var a=e.menu;return r.a.createElement(qe,{confirmText:p.b._("Remove this category?"),onDelete:function(e){return a.category.deleteCategory(e,t)}})}})))},Ge=a(95),Qe=a(8135);function $e(e){var t=e.shouldLoad,a=e.loader,i=Object(x.a)(e,["shouldLoad","loader"]),o=Object(n.useState)(null),c=Object(w.a)(o,2),l=c[0],u=c[1];return Object(n.useEffect)(function(){t&&a().then(u)},[t]),r.a.createElement(ke.Form,Object.assign({values:l},i))}var Je=function(e){var t=e.render;return r.a.createElement(i.Route,null,function(e){var a=e.history;return t?t(function(){return a.goBack()}):(a.goBack(),null)})},Ze=a(29),Ye=l.b.div.withConfig({displayName:"MenuBaseFormLoader__ErrorPop",componentId:"sc-18epk2-0"})(["color:red;padding:1rem;max-width:30rem;overflow-wrap:break-word;"]),Xe=function(e){function t(){var e,a;Object(J.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(Y.a)(this,(e=Object(X.a)(t)).call.apply(e,[this].concat(r)))).state={submitError:null,validationErrors:null},a}return Object(ee.a)(t,e),Object(Z.a)(t,[{key:"renderErrors",value:function(){var e=this.state,t=e.submitError,a=e.validationErrors;return t?this.renderSubmitError(t):a?this.renderValidationErrors(a):null}},{key:"renderSubmitError",value:function(e){var t=[p.b._("Unexpected error while sending form. Out team was notified about the issue.")];if(Object(Qe.isApolloError)(e)){var a=Be.a.propEq("showToUser",!0),n=e.graphQLErrors.filter(a).map(Be.a.prop("message"));n.length&&(t=n)}return this.renderPopover(t)}},{key:"renderValidationErrors",value:function(e){return null}},{key:"renderPopover",value:function(e){var t=this;return r.a.createElement(Ge.g,{open:!0,anchorEl:function(){return document.getElementById("submit-button")},onClose:function(){return t.setState({submitError:null,validationErrors:null})},anchorOrigin:{vertical:"bottom",horizontal:"center"}},e.map(function(e,t){return r.a.createElement(Ye,{key:t},e)}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.isCreate,n=t.onCreate,i=t.onUpdate,o=t.getDefaultValues,c=t.loadValues,l=t.loadDefaults,u=t.children;return r.a.createElement(Je,{render:function(t){return r.a.createElement($e,{shouldLoad:!0,defaultValues:o(),loader:Object(y.a)(E.a.mark(function e(){var t,n,r;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o(),!l){e.next=6;break}return e.next=4,l();case 4:n=e.sent,Object.assign(t,n);case 6:if(!a){e.next=8;break}return e.abrupt("return",t);case 8:return e.next=10,c();case 10:return r=e.sent,e.abrupt("return",Object.assign({},t,r));case 12:case"end":return e.stop()}},e,this)})),onChange:function(e){return Object(Ze.d)("new values",e.values)},onSubmit:function(){var e=Object(y.a)(E.a.mark(function e(r){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=5;break}return e.next=3,n(r);case 3:e.next=7;break;case 5:return e.next=7,i(r);case 7:t();case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),onSubmitFailure:function(t,a){e.setState({validationErrors:t,submitError:a}),Object.keys(t).length&&Object(Ze.c)("validation errors",t),a&&Object(Ze.c)("submit error",a)}},u,e.renderErrors())}})}}]),t}(r.a.Component);function et(){return Object(O.c)().settings.menu}var tt=a(457),at=function(e){var t=e.categoryId,a=e.categoryType,n=e.children,i=et();return r.a.createElement(Xe,{isCreate:null===t,onCreate:function(e){return i.category.createCategory(e,a)},onUpdate:function(e){return i.category.updateCategory(e,a)},getDefaultValues:function(){return function(e){return{id:"NEW",visible:!0,internalNoteLabel:"",pictogram:"",nameLabel:"",categoryType:{enum:e},recipes:[]}}(a)},loadValues:Object(y.a)(E.a.mark(function e(){var a,n;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.client.query({query:tt.b,variables:{categoryId:t},fetchPolicy:"no-cache"});case 2:return a=e.sent,n=a.data,e.abrupt("return",n.wareCategory);case 5:case"end":return e.stop()}},e,this)}))},n)};function nt(e){var t=e.items,a=e.renderItem,n=(e.isLoading,e.heightStretch),i=void 0!==n&&n,o=e.rowHeight,c=void 0===o?60:o,l=Object(x.a)(e,["items","renderItem","isLoading","heightStretch","rowHeight"]),u=r.a.useCallback(function(e){var n=e.key,i=e.style,o=e.index;return r.a.createElement("div",{key:n,style:i},a(t[o],o))},[a,t]),d=function(e,a){return r.a.createElement(_.g,Object.assign({width:e,height:a,headerHeight:50,rowHeight:c,rowCount:t?t.length:0,rowRenderer:u,style:{outline:"none"}},l))};return i?r.a.createElement(_.a,null,function(e){var t=e.width,a=e.height;return d(t,a)}):r.a.createElement(_.i,{scrollElement:window},function(e){var t=e.height;return r.a.createElement(_.a,{disableHeight:!0},function(e){var a=e.width;return d(a,t)})})}var rt=a(7704),it=a.n(rt),ot=a(451),ct=function(e){return void 0===e||Object(rt.isEmpty)(e+"")||!Object(ot.b)(e+"")?p.b._("Price must be a number"):null},lt=function(e){var t=e.field,a=void 0===t?"price.value":t,n=e.icon,i=void 0===n?"toll":n,o=Object(x.a)(e,["field","icon"]);return r.a.createElement(Ke.a,{icon:i},r.a.createElement(Se.a,{width:5},r.a.createElement(Ae.a,Object.assign({field:a,inputFullWidth:!0,validate:ct},o))))},ut=a(162),dt=a(7787),st=a(3),mt=a(4),ft=a.n(mt),pt=a(161);function bt(){var e=Object(st.a)(["\n  query GVats($branchId: ID!) {\n    vats(companyBranch: $branchId) {\n      id\n      vat\n    }\n  }\n"]);return bt=function(){return e},e}var ht=ft()(bt()),gt=Object(pt.a)(ht),vt=Object(ut.a)(["margin-left:5rem;"]),Et=function(e){var t=e.field,a=void 0===t?"price.vat":t,n=Object(O.c)().settings;return Object(C.useObserver)(function(){return r.a.createElement(gt,{variables:{branchId:n.branchId},fetchPolicy:"cache-and-network",renderLoading:!1,render:function(e){var t=e.vats;return r.a.createElement(Ke.a,{className:vt,label:"".concat(p.b._("VAT"),":")},t&&r.a.createElement(dt.a,{field:a,items:t,formatItem:function(e){var t=e.vat;return"".concat(t,"%")},isRequired:!0,validationName:p.b._("VAT")}))}})})},yt=Object(l.b)(function(e){var t=e.field,a=e.className;return r.a.createElement(ke.Field,{field:t},function(e){return r.a.createElement("span",{className:a},e.value)})}).withConfig({displayName:"FormPricingField__FormPricingCurrencyCode",componentId:"hoj9dy-0"})(["padding:0.5rem;"]),wt=function(e){var t=e.priceType,a=e.label;return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,null,a),r.a.createElement(ke.NestedField,{field:["prices",t]},r.a.createElement(s.a,{justify:"flex-start"},r.a.createElement(lt,{field:"value"}),r.a.createElement(yt,{field:"currencyCode"}),r.a.createElement(Et,{field:"vatId"}))))},Ct=a(68);function kt(e){var t=e.onAdd,a=e.addLabel,i=void 0===a?p.b._("Add"):a,o=e.addButtonText,c=void 0===o?p.b._("Add"):o,l=Object(x.a)(e,["onAdd","addLabel","addButtonText"]),u=Object(Ct.useStateRef)(null),m=Object(w.a)(u,2),f=m[0],b=m[1],h=Object(n.useCallback)(function(){var e=f();null!==e&&(t(e),b(null))},[t]),g=Object(n.useCallback)(function(e){"Enter"===e.key&&h()},[]),v=Object(n.useCallback)(function(e){b(e||null)},[]);return r.a.createElement(s.a,{justify:"flex-start"},r.a.createElement(d.a,{fixedWidth:!0,width:"4rem",margin:"auto 0"},i),r.a.createElement(d.a,{fixedWidth:!0,width:"20rem",margin:"auto 0"},r.a.createElement(We.a,Object.assign({value:f(),onChange:v,onKeyDown:g,isMulti:!1,isClearable:!1,getOptionValue:Be.a.prop("id"),getOptionLabel:Be.a.prop("nameLabel")},l))),r.a.createElement(d.a,{fixedWidth:!0,width:"10rem",margin:"auto 0"},r.a.createElement(S.a,{text:c,disabled:null===f(),onClick:h})))}var Ot=function(e){var t=e.recipes,a=e.onRemove;return r.a.createElement(q,{items:t,disableHeader:!0},r.a.createElement(_.d,{dataKey:"associatedRecipe",width:F.d.ButtonColumnWidthPx,minWidth:F.d.ButtonColumnWidthPx,cellRenderer:function(e){var t=e.cellData;return r.a.createElement(D,{onClick:function(){return a(t)}})}}),r.a.createElement(_.d,{dataKey:"nameLabel",width:300,label:p.b._("Name"),cellRenderer:z,columnData:{noteKey:"internalNote"}}),r.a.createElement(_.d,{dataKey:"formattedPrice",width:100,label:p.b._("Price")}))},It=a(318),jt=function(e){var t=e.priceType,a=e.recipeId;return r.a.createElement(ke.Field,{field:"associatedRecipes"},function(e){var n=Be.a.filter(Be.a.propEq("warePriceType",t),e.value),i=Be.a.reject(function(e){return e.id===a||(t=e.id,n.some(Be.a.propEq("associatedRecipe",t)));var t}),o=function(a){e.setValue(e.value.concat({warePriceType:t,associatedRecipe:a.id,nameLabel:a.nameLabel,formattedPrice:"?"}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ot,{recipes:n,onRemove:function(a){e.setValue(Be.a.reject(function(e){var n=e.associatedRecipe,r=e.warePriceType;return n===a&&r===t},e.value))}}),r.a.createElement(Le.a,{render:function(e){return r.a.createElement(It.c,{variables:{branchId:e.branchId},fetchPolicy:"cache-and-network",render:function(e){var t=e.recipes;return r.a.createElement(kt,{options:i(t),onAdd:o})}})}}),r.a.createElement(m.a,null))})},xt=[{priceType:f.y.Delivery,label:Object(ve.i18nMark)("Delivery sale")},{priceType:f.y.Inhouse,label:Object(ve.i18nMark)("Local sale")}],_t=function(e){var t=e.recipeType,a=e.recipeId;return r.a.createElement(r.a.Fragment,null,xt.map(function(e){var i=e.priceType,o=e.label;return r.a.createElement(n.Fragment,{key:i},r.a.createElement(wt,{priceType:i,label:p.b._(o)}),r.a.createElement(m.a,null),t===f.x.Main&&r.a.createElement(jt,{priceType:i,recipeId:a}))}))},Tt=Object(C.observer)(function(e){var t=e.categoryType,a=e.filterRecipes,n=e.onAdd,i=Object(O.c)().settings,o=Object(f.bb)({branchId:i.branchId,categoryType:t}),c=o.data,l=o.loading;return r.a.createElement(kt,{isLoading:l,options:l?[]:a(c.recipes),onAdd:n})}),Rt=l.b.div.withConfig({displayName:"CategoryRecipesView__Container",componentId:"sc-1g4q35k-0"})(["display:flex;flex-direction:column;height:calc(100% - 2rem);width:100%;"]),St=l.b.div.withConfig({displayName:"CategoryRecipesView__FormFixedRow",componentId:"sc-1g4q35k-1"})(["flex:0 0 auto;"]),Lt=l.b.div.withConfig({displayName:"CategoryRecipesView__FormStretchedRow",componentId:"sc-1g4q35k-2"})(["flex:1 1 0;margin:1rem 0 0 1rem;"]),Nt=Object(te.SortableContainer)(Lt),Dt=l.b.div.withConfig({displayName:"CategoryRecipesView__RecipeRow",componentId:"sc-1g4q35k-3"})(["display:grid;grid-gap:1rem;grid-template-columns:","px 100px 3fr 1fr 1fr 50px;"],F.d.ButtonColumnWidthPx),Ft=l.b.div.withConfig({displayName:"CategoryRecipesView__MoveCell",componentId:"sc-1g4q35k-4"})(["cursor:move;"]),Pt=Object(te.SortableElement)(function(e){var t=e.recipe,a=e.onRemove,n=xt.map(function(e){var a=e.priceType,n=e.label,i=t.prices.find(Be.a.pathEq(["priceType","enum"],a));return r.a.createElement(Ft,{key:a},r.a.createElement(M,null,p.b._(n)),i?i.price.formattedValue:r.a.createElement("i",null,p.b._("Not set").toLocaleLowerCase()))});return r.a.createElement(Dt,null,r.a.createElement("div",null,r.a.createElement(D,{onClick:a})),r.a.createElement(Ft,null,t.code),r.a.createElement(Ft,null,t.nameLabel,r.a.createElement(M,null,t.internalNote)),n,r.a.createElement(Q.a,null))}),Wt=function(e){var t=e.categoryType;return r.a.createElement(ke.Field,{field:"recipes"},function(e){var a=e.value,n=function(){var t=Object(y.a)(E.a.mark(function t(n){var r,i,o;return E.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.newIndex,i=n.oldIndex,r!==i){t.next=3;break}return t.abrupt("return");case 3:o=Object(te.arrayMove)(a,i,r),e.setValue(o);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(Rt,null,r.a.createElement(St,null,r.a.createElement(Tt,{categoryType:t,filterRecipes:Be.a.without(e.value),onAdd:function(t){return e.setValue(e.value.concat(t))}})),r.a.createElement(Nt,{lockAxis:"y",lockToContainerEdges:!0,onSortEnd:n},r.a.createElement(nt,{items:e.value,heightStretch:!0,rowHeight:60,renderItem:function(t,a){return r.a.createElement(Pt,{recipe:t,onRemove:function(){e.setValue(Be.a.reject(Be.a.propEq("id",t.id),e.value))},index:a})},rowCount:e.value.length})))})},Bt=l.b.div.withConfig({displayName:"MenuCategoryPage__FormContainer",componentId:"sc-154ix5u-0"})(["display:flex;flex-direction:column;height:100%;width:100%;"]),Mt=l.b.div.withConfig({displayName:"MenuCategoryPage__FormFixedRow",componentId:"sc-154ix5u-1"})(["flex:0 0 8rem;"]),Vt=l.b.div.withConfig({displayName:"MenuCategoryPage__FormStretchedRow",componentId:"sc-154ix5u-2"})(["flex:1 1 0;min-height:0;position:relative;"]),qt=function(e){var t=e.categoryId,a=e.categoryType;return r.a.createElement(at,{categoryId:t,categoryType:a},r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{pageTitle:we(a),hideLogoutWidget:!0,useBackButton:!0}),r.a.createElement(h.a,null,r.a.createElement(Bt,null,r.a.createElement(Mt,null,r.a.createElement(u.a,null,r.a.createElement(ze,{categoryType:a}))),r.a.createElement(Vt,null,r.a.createElement(u.a,{stretchToParent:!0},r.a.createElement(k.a,null,r.a.createElement(se.Trans,{id:"Recipes assigned to this category"})),r.a.createElement(Wt,{categoryType:a}))))),r.a.createElement(he,null,r.a.createElement(W.a,{mutationName:null===t?"createWareCategory":"updateWareCategory"},r.a.createElement(je,{isCreate:null===t})))))},At=l.b.div.withConfig({displayName:"DataTableContainer",componentId:"sc-1ammizr-0"})(["height:calc(100% - 4.5rem);padding-top:2rem;"]),Kt=Object(C.observer)(function(){var e=Object(O.c)().settings.menu.recipe,t=Object(f.Y)({branchId:e.branchId}),a=t.data,n=t.loading;return r.a.createElement(Se.a,{width:17},r.a.createElement(We.a,{key:e.branchId,onChange:function(t){e.setCategoryFilter(t?t.id:null)},options:function(){if(!a||!a.categories)return[];var e=Be.a.groupBy(function(e){return e.categoryType.enum.toString()},a.categories);return Object.keys(e).map(function(t){return{label:we(t),options:e[t]}})}(),isMulti:!1,isClearable:!0,isSearchable:!0,isLoading:n,placeholder:p.b._("Filter by category"),getOptionValue:Be.a.prop("id"),getOptionLabel:Be.a.prop("nameLabel")}))}),Ht=a(94),Ut=a(7673),zt=function(e){var t=e.modelType,a=Object(O.c)().settings.menu[t],n=Object(Ct.useDebounceCallback)(a.setFilterInput);return r.a.createElement(Ke.a,{icon:Ht.k},r.a.createElement(Se.a,{width:17},r.a.createElement(Ut.a,{defaultValue:a.filterInput,inputFullWidth:!0,onChange:function(e){return n(e.target.value)},placeholder:p.b._("Filter by name or code")})))},Gt=function(e){var t=e.to,a=e.from,n=Object(x.a)(e,["to","from"]);return r.a.createElement(i.Redirect,Object.assign({to:Object(T.b)(t,a||"".concat(location.pathname,"/")),from:a},n))},Qt=a(317),$t=function(e){function t(){var e,a;Object(J.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(Y.a)(this,(e=Object(X.a)(t)).call.apply(e,[this].concat(r)))).state={isOpen:!1,recipeType:null},a.onClose=function(){a.setState({isOpen:!1})},a.onOpen=function(){a.setState({isOpen:!0})},a.onSelect=function(e){return function(){a.setState({isOpen:!0,recipeType:e})}},a}return Object(ee.a)(t,e),Object(Z.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.isOpen,n=t.recipeType;return r.a.createElement(r.a.Fragment,null,null!==n&&r.a.createElement(Gt,{to:Object(Qt.b)("create",n),push:!0}),r.a.createElement(ue,{onClick:function(t){t.preventDefault(),e.onOpen()}}),r.a.createElement(Ge.c,{open:a,onClose:this.onClose},r.a.createElement(Ge.f,null,"Select item type"),r.a.createElement(S.a,{onClick:this.onSelect(f.x.Main)},r.a.createElement(se.Trans,{id:"Ware"})),r.a.createElement(S.a,{onClick:this.onSelect(f.x.SideDish)},r.a.createElement(se.Trans,{id:"Sidedish"})),r.a.createElement(S.a,{onClick:this.onSelect(f.x.Cover)},r.a.createElement(se.Trans,{id:"Cover"}))))}}]),t}(n.Component),Jt=a(7740),Zt=a(7983),Yt=function(e){var t=e.recipes,a=e.onToggle,n=e.onRemove,i=e.showEditColumn,o=void 0===i||i,c=e.showRemoveColumn,l=void 0!==c&&c,u=e.showVisibilityColumn,d=void 0===u||u,s=e.showTypeColumn,m=void 0!==s&&s,b=e.isLoading,h=void 0!==b&&b,g=e.heightStretch,v={isLoading:h,items:t,heightStretch:void 0!==g&&g,noRowsRenderer:function(){return h?r.a.createElement(Zt.a,null):r.a.createElement(k.a,null,p.b._("No recipes has been found"))}};return r.a.createElement(q,v,o&&r.a.createElement(_.d,{dataKey:"id",width:F.d.ButtonColumnWidthPx,minWidth:F.d.ButtonColumnWidthPx,cellRenderer:A({canQuery:"recipe"},K),cellDataGetter:function(e){var t=e.rowData;return Object(Qt.b)(t.id,t.recipeType.enum)}}),l&&r.a.createElement(_.d,{dataKey:"id",width:F.d.ButtonColumnWidthPx,minWidth:F.d.ButtonColumnWidthPx,cellRenderer:H,columnData:{onRemove:n}}),d&&r.a.createElement(_.d,{dataKey:"visible",width:F.d.ButtonColumnWidthPx,minWidth:F.d.ButtonColumnWidthPx,cellRenderer:A({canMutate:"updateRecipe"},U),columnData:{onToggle:a}}),m&&r.a.createElement(_.d,{dataKey:"recipeType",width:100,label:p.b._("Type"),cellRenderer:ea}),r.a.createElement(_.d,{dataKey:"code",width:100,label:p.b._("Code")}),r.a.createElement(_.d,{dataKey:"nameLabel",width:600,flexGrow:2,label:p.b._("Name"),cellRenderer:z,columnData:{noteKey:"internalNote"}}),r.a.createElement(_.d,{dataKey:"prices",width:150,label:p.b._("Delivery sale"),cellRenderer:Xt,columnData:{priceType:f.y.Delivery}}),r.a.createElement(_.d,{dataKey:"prices",width:150,label:p.b._("Local sale"),cellRenderer:Xt,columnData:{priceType:f.y.Inhouse}}),r.a.createElement(_.d,{dataKey:"availableAmount",label:p.b._("recipe.list.availableAmount",{},{defaults:"Stock"}),width:100}),r.a.createElement(_.d,{dataKey:"internalNote",label:p.b._("Internal note"),width:200}))};function Xt(e){var t=e.cellData,a=e.columnData.priceType,n=t.find(Be.a.pathEq(["priceType","enum"],a));return n?n.price.formattedValue:r.a.createElement("i",null,p.b._("Not set").toLocaleLowerCase())}function ea(e){var t=e.rowData.recipeType.enum;return t===f.x.SideDish?p.b._("Sidedish").toLocaleLowerCase():t===f.x.Cover?p.b._("Cover").toLocaleLowerCase():p.b._("Ware").toLocaleLowerCase()}var ta=Object(C.observer)(function(){var e=Object(O.c)().settings,t=Object(f.bb)({branchId:e.branchId,categoryId:e.menu.recipe.categoryFilterId}),a=t.data,n=t.loading,i=Object(C.useComputed)(function(){if(!a||!a.recipes||0===a.recipes.length)return[];var t=Object(Jt.a)(e.menu.recipe.filterInput);return a.recipes.filter(Be.a.cond([[Be.a.propSatisfies(t,"code"),Be.a.T],[Be.a.propSatisfies(t,"nameLabel"),Be.a.T]]))},[a&&a.recipes]);return r.a.createElement(Yt,{recipes:i,onToggle:e.menu.recipe.changeVisibility,isLoading:n,heightStretch:!0,showTypeColumn:!0})}),aa=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{pageTitle:p.b._("Recipe overview"),useBackButton:!0}),r.a.createElement(h.a,null,r.a.createElement(u.a,{stretchToParent:!0},r.a.createElement(s.a,{justify:"start"},r.a.createElement(d.a,null,r.a.createElement(g.a,{width:20})),r.a.createElement(d.a,null,r.a.createElement(zt,{modelType:"recipe"})),r.a.createElement(d.a,null,r.a.createElement(Kt,null))),r.a.createElement(W.a,{mutationName:"createRecipe"},r.a.createElement($t,null)),r.a.createElement(At,null,r.a.createElement(ta,null)))))},na=function(e){var t=e.type,a=e.isMain,n=e.isSideDish,i=e.isCover,o=e.children;return!0===a&&t===f.x.Main||!0===n&&t===f.x.SideDish||!0===i&&t===f.x.Cover?r.a.createElement(r.a.Fragment,null,o):null},ra=Object(C.observer)(function(e){var t=e.categoryType,a=e.currentCategories,n=e.addButtonText,i=e.onAdd,o=Object(O.c)().settings,c=Object(f.Z)({branchId:o.branchId,categoryType:t}),l=c.data,u=c.loading,d=l&&l.categories||[];return r.a.createElement(kt,{isLoading:u,options:Be.a.without(a,d),addButtonText:n,onAdd:i})}),ia=function(e){var t=e.categoryType,a=e.addButtonText,n=e.noRowsText,i=e.field;return r.a.createElement(ke.Field,{field:i},function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ce,{categories:e.value,showRemoveColumn:!0,showEditColumn:!1,showHeader:!1,onRemove:function(t){return e.setValue(Be.a.reject(Be.a.propEq("id",t),e.value))},noRowsDisplay:r.a.createElement(G,{text:n})}),r.a.createElement(ra,{addButtonText:a,categoryType:t,currentCategories:e.value,onAdd:function(t){return e.setValue(e.value.concat(t))}}))})},oa=function(e){var t=e.field,a=void 0===t?"code":t,n=(e.icon,e.isRequired,Object(x.a)(e,["field","icon","isRequired"]));return r.a.createElement(Ke.a,{label:p.b._("Code").toLocaleLowerCase(),labelWidth:7},r.a.createElement(Se.a,{width:9},r.a.createElement(Ae.a,Object.assign({field:a,inputFullWidth:!0,isRequired:!0,validatioName:p.b._("Code")},n))))},ca=function(e){var t=e.field,a=void 0===t?"descriptionLabel":t,n=(e.icon,Object(x.a)(e,["field","icon"]));return r.a.createElement(Ke.a,{label:p.b._("Public note").toLocaleLowerCase(),labelWidth:7},r.a.createElement(Ae.a,Object.assign({field:a,inputFullWidth:!0},n)))};function la(){var e=Object(st.a)(["\n  query GAllergens {\n    allergens {\n      ...FMenuAllergen\n    }\n  }\n  ","\n"]);return la=function(){return e},e}var ua=ft()(la(),f.f),da=Object(pt.a)(ua),sa=l.b.div.withConfig({displayName:"AllergenIndicator__AllergenBox",componentId:"sc-135ffpv-0"})(["float:left;width:2.3rem;height:2.3rem;border:1px solid ",";margin:0.3rem 0.6rem 0.3rem ",";font-size:1.5rem;text-align:center;vertical-align:middle;cursor:default;",";"],F.a.greyMiddle,F.d.MarginAroundFormComponents,function(e){var t=e.active;return Object(l.a)(["color:",";background-color:",";"],t?F.a.black:F.a.greyMiddle,t?F.a.yellow:F.a.white)}),ma=function(e){var t=e.selected,a=e.onToggle;return r.a.createElement(da,{render:function(e){var n=e.allergens;return r.a.createElement(r.a.Fragment,null,n.map(function(e){var n={active:t.includes(e.enum),onClick:a&&function(){return a(e.enum)}};return r.a.createElement(sa,Object.assign({key:e.enum,title:e.code},n),e.category)}))}})},fa=Be.a.pipe(Be.a.map(Be.a.prop("allergens")),Be.a.flatten,Be.a.uniq),pa=function(){return r.a.createElement(ke.Field,{field:"ingredients"},function(e){var t=e.value,a=fa(t);return r.a.createElement(ma,{selected:a})})},ba=function(e){var t=e.recipeType,a=t===f.x.Main;return r.a.createElement(_e,null,r.a.createElement(Te,null,r.a.createElement(Ue,{placeholder:p.b._("Recipe name")}),r.a.createElement(oa,{placeholder:p.b._("Recipe code")}),r.a.createElement(He,{placeholder:p.b._("Recipe internal note")}),a&&r.a.createElement(ca,{placeholder:p.b._("Public note for customers, allergens")}),r.a.createElement(na,{type:t,isMain:!0},r.a.createElement(Ke.a,{labelWidth:7,icon:"error_outline"},p.b._("Allergens based on stock cards"),r.a.createElement("br",null),r.a.createElement(pa,null))),r.a.createElement(Ke.a,{labelWidth:7},r.a.createElement(Re.a,{field:"visible",label:p.b._("To show this recipe")}))),r.a.createElement(xe.a,{position:"BottomRight"},r.a.createElement(Le.a,{render:function(e){var t=e.menu;return r.a.createElement(qe,{confirmText:p.b._("Remove this recipe?"),onDelete:function(e){return t.recipe.deleteRecipe(e)}})}})))},ha=function(e){var t=e.recipeId,a=e.recipeType,n=e.children,i=et();return r.a.createElement(Xe,{isCreate:null===t,onCreate:function(e){return i.recipe.createRecipe(e,a)},onUpdate:function(e){return i.recipe.updateRecipe(e)},getDefaultValues:function(){return va(a)},loadDefaults:Object(y.a)(E.a.mark(function e(){var t,n,r,o;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.recipe.queryDefaults();case 2:return t=e.sent,n=t.vats,r=t.currencyCode,(o=Object(j.a)({},va(a))).prices=ga(function(e){return{value:0,vatId:n[e],currencyCode:r}}),e.abrupt("return",o);case 8:case"end":return e.stop()}},e,this)})),loadValues:Object(y.a)(E.a.mark(function e(){var a,n;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.client.query({query:It.b,variables:{recipeId:t},fetchPolicy:"no-cache"});case 2:return a=e.sent,n=a.data,e.abrupt("return",Ea(n.recipe));case 5:case"end":return e.stop()}},e,this)}))},n)};function ga(e){return[f.y.Delivery,f.y.Inhouse].reduce(function(t,a){return t[a]=e(a),t},{})}function va(e){return{id:"NEW",code:"",nameLabel:"",internalNote:"",descriptionLabel:"",image:"",visible:!0,recipeType:{enum:e},sourcePrices:[],prices:ga(function(){return{value:0,vatId:null,currencyCode:""}}),sourceAssociatedRecipes:[],associatedRecipes:[],sourceIngredients:[],ingredients:[],sideDishes:[],categories:[]}}function Ea(e){return Object(j.a)({},e,{associatedRecipes:e.sourceAssociatedRecipes.map(function(e){var t=e.priceType,a=e.recipe;return{warePriceType:t.enum,nameLabel:a.nameLabel,associatedRecipe:a.id,formattedPrice:"?"}}),ingredients:e.sourceIngredients.map(function(e){var t=e.quantity,a=e.stockItem,n=a.id,r=a.label,i=a.allergens;return{stockItem:n,label:r,quantity:t,unitLabel:a.wareUnit.code,allergens:i.map(Be.a.prop("enum"))}}),prices:ga(function(t){var a=e.sourcePrices.find(Be.a.pathEq(["priceType","enum"],t));return a?{value:a.price.value,vatId:a.vat.id,currencyCode:a.price.currency.code}:{value:0,vatId:null,currencyCode:""}})})}var ya=function(e){var t=e.ingredients,a=e.onRemove,n=e.isLoading,i=void 0!==n&&n;return r.a.createElement(q,{isLoading:i,items:t,disableHeader:!0,noRowsRenderer:function(){return r.a.createElement(G,{text:p.b._("Recipe has no ingredients")})}},r.a.createElement(_.d,{dataKey:"stockItem",width:F.d.ButtonColumnWidthPx,minWidth:F.d.ButtonColumnWidthPx,cellRenderer:H,columnData:{onRemove:a}}),r.a.createElement(_.d,{dataKey:"label",width:300,label:p.b._("Name")}),r.a.createElement(_.d,{dataKey:"quantity",width:60,label:p.b._("Quantity"),cellRenderer:function(e){var t=e.rowIndex;return r.a.createElement(Se.a,{width:2.5},r.a.createElement(Ae.a,{field:["ingredients",t,"quantity"],validate:wa,inputFullWidth:!0}))}}),r.a.createElement(_.d,{dataKey:"unitLabel",width:100,label:p.b._("Ware unit")}))};function wa(e){var t=p.b._("Quantity");return it.a.isEmpty(e+"")?p.b._("{fieldName} must be entered",{fieldName:t}):it.a.isFloat(e+"",{min:0})?null:p.b._("{fieldName} must be a positive number",{fieldName:t})}var Ca=Be.a.differenceWith(function(e,t){return e.id===t.stockItem}),ka=Object(C.observer)(function(e){var t=e.ingredients,a=e.onAdd,n=e.onRemove,i=Object(O.c)().settings,o=Object(f.db)({branchId:i.branchId}),c=o.data,l=o.loading;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ya,{ingredients:t,onRemove:n}),r.a.createElement(kt,{isLoading:l,addButtonText:p.b._("Add ingredient"),options:l?[]:Ca(c.stockItems,t),onAdd:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){a({stockItem:e.id,label:e.nameLabel,quantity:1,unitLabel:e.wareUnit.code,allergens:e.allergens.map(Be.a.prop("enum"))})})}))}),Oa=function(){return r.a.createElement(ke.Field,{field:"ingredients"},function(e){return r.a.createElement(ka,{ingredients:e.value,onAdd:function(t){e.setValue(Object($.a)(e.value).concat([t]))},onRemove:function(t){e.setValue(Be.a.reject(Be.a.propEq("stockItem",t),e.value))}})})},Ia=Object(l.b)("div").withConfig({displayName:"MenuRecipePage__FormContainer",componentId:"yp6ac3-0"})(["margin:0 1.25rem 0 0;"]),ja=function(e){var t=e.recipeId,a=e.recipeType;return r.a.createElement(ha,{recipeId:t,recipeType:a},r.a.createElement(Ia,null,r.a.createElement(b.a,{width:16,pageTitle:Ce(a),hideLogoutWidget:!0,useBackButton:!0},r.a.createElement(u.a,null,r.a.createElement(ba,{recipeType:a})),r.a.createElement(u.a,null,r.a.createElement(_t,{recipeType:a,recipeId:t})),r.a.createElement(u.a,null,r.a.createElement(k.a,null,r.a.createElement(se.Trans,{id:"Recipe ingredients"})),r.a.createElement(m.a,null),r.a.createElement(Oa,null)),r.a.createElement(na,{type:a,isMain:!0},r.a.createElement(u.a,null,r.a.createElement(k.a,null,r.a.createElement(se.Trans,{id:"Sidedish categories"})),r.a.createElement(M,null,r.a.createElement(se.Trans,{id:"These sidedish are presented with recipe"})),r.a.createElement(ia,{categoryType:f.x.SideDish,field:"sideDishes",addButtonText:p.b._("Attach sidedish category"),noRowsText:p.b._("Recipe has no sidedish category attached")})),r.a.createElement(u.a,null,r.a.createElement(k.a,null,r.a.createElement(se.Trans,{id:"Category assignments"})),r.a.createElement(M,null,r.a.createElement(se.Trans,{id:"Recipe is in these categories"})),r.a.createElement(ia,{categoryType:f.x.Main,field:"categories",addButtonText:p.b._("Add to category"),noRowsText:p.b._("Recipe is not in any category")})))),r.a.createElement(he,null,r.a.createElement(W.a,{mutationName:null===t?"createRecipe":"updateRecipe"},r.a.createElement(je,{isCreate:null===t})))))},xa=a(93),_a=a.n(xa),Ta=a(135),Ra=function(e){var t=e.wareUnit,a=e.quantity,n=e.onConfirm;return r.a.createElement(S.a,{disabled:null===t,onClick:n},t?r.a.createElement(se.Trans,{id:"Add {0} {1}",values:{0:_a()(a).format(Ta.i),1:t.code}}):r.a.createElement(se.Trans,{id:"No stock card selected"}))},Sa=r.a.forwardRef(function(e,t){var a=e.value,n=e.onFilter,i=e.onConfirm;return r.a.createElement(Ke.a,{label:p.b._("Stock card"),labelWidth:7},r.a.createElement(Ut.a,{ref:t,autoFocus:!0,placeholder:"".concat(p.b._("Code").toLocaleLowerCase()," / ").concat(p.b._("PLU")," / ").concat(p.b._("Title").toLocaleLowerCase()),value:a,onChange:function(e){n(e.target.value)},onKeyPressCapture:function(e){"Enter"===e.key&&(e.preventDefault(),i())}}))}),La=r.a.forwardRef(function(e,t){var a=e.enabled,n=e.onChange,i=e.onConfirm;return r.a.createElement(Ut.a,{ref:t,disabled:!a,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){var t=_a()(e.target.value).value();n(t)}),onKeyPressCapture:function(e){"Enter"===e.key&&(e.preventDefault(),i())}})}),Na=function(e){var t=e.stockItems,a=e.searchValue,n=e.onSelect;return r.a.createElement(At,null,r.a.createElement(q,{items:t,heightStretch:!1},r.a.createElement(_.d,{dataKey:"id",width:F.d.ButtonColumnWidthPx,minWidth:F.d.ButtonColumnWidthPx,cellRenderer:Da,columnData:{onSelect:n}}),r.a.createElement(_.d,{dataKey:"quantity",width:100,label:p.b._("Card stock"),cellRenderer:Wa}),r.a.createElement(_.d,{dataKey:"code",width:100,label:p.b._("Card code"),cellRenderer:Pa(a)}),r.a.createElement(_.d,{dataKey:"nameLabel",width:300,label:p.b._("Card name"),cellRenderer:Pa(a)}),r.a.createElement(_.d,{dataKey:"note",width:300,label:p.b._("Card note")})))};function Da(e){var t=e.rowData,a=e.columnData.onSelect;return r.a.createElement(R.a,null,r.a.createElement(S.a,{iconName:"done",onClick:function(){return a(t)}}))}var Fa=l.b.span.withConfig({displayName:"StockDepositResultTable__HighlightedValue",componentId:"sc-3qukvh-0"})(["background-color:",";"],F.a.yellow);function Pa(e){return function(t){var a=t.cellData,n=a.toLocaleLowerCase().indexOf(e.toLocaleLowerCase());if(-1===n)return a;var i=a.substring(0,n),o=a.substring(n,n+e.length),c=a.substring(n+e.length);return r.a.createElement(r.a.Fragment,null,i,r.a.createElement(Fa,null,o),c)}}function Wa(e){var t=e.cellData,a=e.rowData;return"".concat(t," ").concat(a.wareUnit.code)}var Ba=function(e){function t(){var e,a;Object(J.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(Y.a)(this,(e=Object(X.a)(t)).call.apply(e,[this].concat(i)))).state={targetStockItem:null,filteredStockItems:[],searchValue:"",inputQuantity:0},a.filterInputRef=r.a.createRef(),a.quantityInputRef=r.a.createRef(),a.onFilter=function(e){if(""!==e.trim()){var t=Object(Jt.a)(e),n=a.props.stockItems.filter(Be.a.cond([[Be.a.propEq("plu",e),Be.a.T],[Be.a.propSatisfies(t,"code"),Be.a.T],[Be.a.propSatisfies(t,"nameLabel"),Be.a.T]])),r=null;1===n.length&&(r=Be.a.head(n)),a.setState({filteredStockItems:n,searchValue:e,targetStockItem:r})}else a.setState({filteredStockItems:[],searchValue:"",targetStockItem:null})},a.onConfirmFilter=function(){1===a.state.filteredStockItems.length&&a.quantityInputRef.current.focus()},a.onQuantity=function(e){a.setState({inputQuantity:e})},a.onSelectStockItem=function(e){a.setState({targetStockItem:e,filteredStockItems:[e]},function(){a.quantityInputRef.current.focus()})},a.onConfirm=function(){var e=a.state,t=e.targetStockItem,n=e.inputQuantity;t&&0!==n&&a.props.onDeposit(t,n),a.setState({targetStockItem:null,searchValue:"",inputQuantity:0},function(){a.quantityInputRef.current.value="",a.filterInputRef.current.focus()})},a}return Object(ee.a)(t,e),Object(Z.a)(t,[{key:"componentDidUpdate",value:function(e){e.stockItems!==this.props.stockItems&&this.onFilter(this.state.searchValue)}},{key:"render",value:function(){var e=this.state,t=e.searchValue,a=e.filteredStockItems,n=e.targetStockItem,i=e.inputQuantity,o=""!==t.trim(),c=0===a.length,l=a.length>1;return r.a.createElement(r.a.Fragment,null,r.a.createElement(_e,null,r.a.createElement(Te,null,r.a.createElement(Sa,{onFilter:this.onFilter,onConfirm:this.onConfirmFilter,value:t,ref:this.filterInputRef})),r.a.createElement(Te,null,r.a.createElement(La,{enabled:null!==n,onChange:this.onQuantity,onConfirm:this.onConfirm,ref:this.quantityInputRef})),r.a.createElement(Te,null,r.a.createElement(Ra,{cardName:n?n.nameLabel:"",quantity:i,wareUnit:n?n.wareUnit:null,onConfirm:this.onConfirm}))),r.a.createElement(k.a,null,o&&l&&r.a.createElement(se.Trans,{id:"Continue typing to find single stock card or select one from the list"}),o&&c&&r.a.createElement(se.Trans,{id:"No stock card found from entered search value"}),o&&n&&r.a.createElement(se.Trans,{id:"Stock card <0>{0}</0> is selected",values:{0:n.nameLabel},components:[r.a.createElement("b",null)]})),o&&r.a.createElement(Na,{searchValue:t,stockItems:a,onSelect:this.onSelectStockItem}))}}]),t}(r.a.Component),Ma=Object(C.observer)(function(e){var t=e.children,a=Object(O.c)().settings,n=Object(f.cb)({branchId:a.branchId}),r=n.data,i=n.loading,o=Object(f.L)(),c=Object(w.a)(o,1)[0];return t(i?[]:r.stockItems,function(e,t){c({stockItem:e.id,quantityChange:t})})}),Va=function(e){return r.a.createElement(b.a,{width:16,pageTitle:p.b._("Stock deposit"),useBackButton:!0},r.a.createElement(u.a,null,r.a.createElement(g.a,null),r.a.createElement(Ma,null,function(e,t){return r.a.createElement(Ba,{stockItems:e,onDeposit:t})})))},qa=a(302),Aa=function(e){var t=e.stockItems,a=e.isLoading;return r.a.createElement(q,{items:t,heightStretch:!0,noRowsRenderer:function(){return a?r.a.createElement(qa.a,null):r.a.createElement("h3",null,r.a.createElement(se.Trans,{id:"Selected branch has no stock cards"}))}},r.a.createElement(_.d,{dataKey:"id",width:F.d.ButtonColumnWidthPx,minWidth:F.d.ButtonColumnWidthPx,cellRenderer:A({canQuery:"stockItem"},K)}),r.a.createElement(_.d,{dataKey:"code",width:100,label:p.b._("Card code")}),r.a.createElement(_.d,{dataKey:"nameLabel",width:300,minWidth:30,flexGrow:2,label:p.b._("Card name")}),r.a.createElement(_.d,{dataKey:"quantity",width:100,label:p.b._("Card stock"),cellRenderer:Ka}),r.a.createElement(_.d,{dataKey:"allowNegative",width:300,label:p.b._("Negative stock"),cellRenderer:Ha}),r.a.createElement(_.d,{dataKey:"note",width:300,label:p.b._("Card note")}))};function Ka(e){var t=e.cellData,a=e.rowData;return"".concat(t," ").concat(a.wareUnit.code)}function Ha(e){return!0===e.cellData?r.a.createElement(se.Trans,{id:"Permitted"}):r.a.createElement(se.Trans,{id:"Forbidden"})}var Ua=Object(C.observer)(function(){var e=Object(O.c)().settings,t=Object(f.db)({branchId:e.branchId}),a=t.data,n=t.loading,i=Object(C.useComputed)(function(){if(!a||!a.stockItems||0===a.stockItems.length)return[];var t=e.menu.stock.filterInput,n=Object(Jt.a)(t);return a.stockItems.filter(Be.a.cond([[Be.a.propEq("plu",t),Be.a.T],[Be.a.propSatisfies(n,"code"),Be.a.T],[Be.a.propSatisfies(n,"nameLabel"),Be.a.T]]))},[a&&a.stockItems]);return r.a.createElement(Aa,{stockItems:i,isLoading:n})}),za=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{pageTitle:p.b._("Stock overview"),useBackButton:!0}),r.a.createElement(h.a,null,r.a.createElement(u.a,{stretchToParent:!0},r.a.createElement(s.a,{justify:"start"},r.a.createElement(d.a,null,r.a.createElement(g.a,{width:20})),r.a.createElement(d.a,null,r.a.createElement(zt,{modelType:"stock"}))),r.a.createElement(W.a,{mutationName:"createStockItem"},r.a.createElement(ue,{routeTo:"create"})),r.a.createElement(At,null,r.a.createElement(Ua,null)))))};function Ga(){var e=Object(st.a)(["\n  query GMenuStockDefaults($branchId: ID!) {\n    companyBranch(id: $branchId) {\n      id\n      allowNegative: stockItemsCanBeNegative\n    }\n  }\n"]);return Ga=function(){return e},e}function Qa(){var e=Object(st.a)(["\n  query GMenuStockForm($stockId: ID!) {\n    stockItem(id: $stockId) {\n      id\n      code\n      plu\n      note\n      nameLabel: label\n      allowNegative\n      wareUnit {\n        ...FMenuWareUnit\n      }\n      allergens {\n        ...FMenuAllergen\n      }\n      companyBranch {\n        id\n        allowNegative: stockItemsCanBeNegative\n      }\n    }\n  }\n  ","\n  ","\n"]);return Qa=function(){return e},e}var $a=ft()(Qa(),f.f,f.h),Ja=ft()(Ga()),Za=(Object(pt.a)($a),function(e){var t=e.stockId,a=e.children,n=et();return r.a.createElement(Xe,{isCreate:null===t,onCreate:function(e){return n.stock.createItem(e)},onUpdate:function(e){return n.stock.updateItem(e)},getDefaultValues:Ya,loadDefaults:Object(y.a)(E.a.mark(function e(){var t,a;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.client.query({query:Ja,variables:{branchId:n.stock.branchId},fetchPolicy:"no-cache"});case 2:return t=e.sent,a=t.data,e.abrupt("return",{allowNegativeDefault:Xa(a.companyBranch.allowNegative)});case 5:case"end":return e.stop()}},e,this)})),loadValues:Object(y.a)(E.a.mark(function e(){var a,r;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.client.query({query:$a,variables:{stockId:t},fetchPolicy:"no-cache"});case 2:return a=e.sent,r=a.data,e.abrupt("return",{id:(i=r.stockItem).id,internalNote:"TBD",nameLabel:i.nameLabel,code:i.code,note:i.note,plu:i.plu||"",wareUnit:i.wareUnit.enum,allergens:i.allergens.map(Be.a.prop("enum")),allowNegative:i.allowNegative,allowNegativeDefault:Xa(i.companyBranch.allowNegative)});case 5:case"end":return e.stop()}var i},e,this)}))},a)});function Ya(){return{id:"NEW",internalNote:"",nameLabel:"",code:"",plu:"",note:"",wareUnit:null,allergens:[],allowNegative:f.o.Default,allowNegativeDefault:f.o.Default}}function Xa(e){return e?f.o.Default:f.o.Disabled}var en=function(e){var t=e.field,a=void 0===t?"allergens":t,n=e.icon,i=void 0===n?"error_outline":n;return r.a.createElement(ke.Field,{field:a},function(e){return r.a.createElement(Ke.a,{icon:i,labelWidth:7},r.a.createElement(ma,{selected:e.value,onToggle:function(t){var a=e.value;a.includes(t)?e.setValue(Be.a.without([t],a)):e.setValue(Object($.a)(a).concat([t]))}}))})};var tn=[{type:f.o.Enabled,label:Object(ve.i18nMark)("Permit")},{type:f.o.Disabled,label:Object(ve.i18nMark)("Forbid")}],an=function(e){!function(e){if(null==e)throw new TypeError("Cannot destructure undefined")}(e);var t=Object(n.useMemo)(function(){return" (".concat(p.b._("Is default setting").toLocaleLowerCase(),")")},[]);return r.a.createElement(ke.FormApi,null,function(e){var a=e.values.allowNegativeDefault;return r.a.createElement(Ke.a,{label:p.b._("Negative stock"),labelWidth:7},r.a.createElement(dt.a,{field:"allowNegative",items:tn,formatItem:function(e){return e.type===a?r.a.createElement("span",null,p.b._(e.label),r.a.createElement("i",null,t)):p.b._(e.label)},getItemId:function(e){return e.type}}))})},nn=function(e){var t=e.field,a=void 0===t?"plu":t,n=e.icon,i=void 0===n?"fingerprint":n,o=Object(x.a)(e,["field","icon"]);return r.a.createElement(Ke.a,{icon:i,labelWidth:7},r.a.createElement(Se.a,{width:9},r.a.createElement(Ae.a,Object.assign({field:a,inputFullWidth:!0},o))))},rn=a(7951);function on(){var e=Object(st.a)(["\n  query GWareUnits {\n    wareUnits {\n      id\n      code\n      enum\n    }\n  }\n"]);return on=function(){return e},e}var cn=ft()(on()),ln=Object(pt.a)(cn),un=function(e){var t=e.field,a=void 0===t?"wareUnit":t,n=e.icon,i=void 0===n?"select_all":n,o=Object(x.a)(e,["field","icon"]);return r.a.createElement(ln,{renderLoading:!1,render:function(e,t){var n=e.wareUnits,c=t.loading;return r.a.createElement(Ke.a,{icon:i,labelWidth:7},r.a.createElement(rn.a,Object.assign({field:a,options:n||[],isLoading:c,isRequired:!0,validatioName:p.b._("Ware unit"),getOptionLabel:Be.a.prop("code"),getOptionValue:Be.a.prop("enum"),width:12},o)))}})},dn=function(e){return r.a.createElement(_e,null,r.a.createElement(Te,null,r.a.createElement(Ue,{placeholder:p.b._("Card name")}),r.a.createElement(oa,{placeholder:p.b._("Card code")}),r.a.createElement(un,{placeholder:p.b._("Choose unit")}),r.a.createElement(nn,{placeholder:p.b._("PLU")}),r.a.createElement(He,{placeholder:p.b._("Card note"),field:"note",label:p.b._("Card note")}),r.a.createElement(en,null),r.a.createElement(an,null)),r.a.createElement(xe.a,{position:"BottomRight"},r.a.createElement(W.a,{mutationName:"destroyStockItem"},r.a.createElement(Le.a,{render:function(e){var t=e.menu;return r.a.createElement(qe,{confirmText:p.b._("Remove this card?"),onDelete:function(e){return t.stock.deleteItem(e)}})}}))))},sn=function(e){var t=e.stockId,a=Object(f.mb)({stockId:t}),n=a.data;if(a.loading)return r.a.createElement(V.a,null);var i=n.stockItem.ingredients;return 0===i.length?r.a.createElement(k.a,null,r.a.createElement(se.Trans,{id:"No recipes are using stock card"})):r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,null,r.a.createElement(se.Trans,{id:"Recipes using this card"})),r.a.createElement(q,{items:Object($.a)(i),disableHeader:!0,fullHeight:!0},r.a.createElement(_.d,{dataKey:"",cellDataGetter:function(e){var t=e.rowData;return{pathname:"/settings/menu/recipe/".concat(t.recipe.id),state:{recipeType:t.recipe.recipeType.enum}}},cellRenderer:K,width:100}),r.a.createElement(_.d,{dataKey:"recipe",width:300,label:p.b._("Name"),cellRenderer:function(e){var t=e.rowData;return r.a.createElement(r.a.Fragment,null,t.recipe.nameLabel,r.a.createElement(M,null,t.recipe.descriptionLabel))}})))},mn=function(e){var t=e.stockId;return r.a.createElement(b.a,{width:16,pageTitle:p.b._("Stock card"),hideLogoutWidget:!0,useBackButton:!0},r.a.createElement(Za,{stockId:t},r.a.createElement(r.a.Fragment,null,r.a.createElement(he,null,r.a.createElement(W.a,{mutationName:null===t?"createStockItem":"updateStockItem"},r.a.createElement(je,{isCreate:null===t}))),r.a.createElement(u.a,null,r.a.createElement(dn,null),t&&r.a.createElement(B.a,{queryName:"recipes"},r.a.createElement(sn,{stockId:t}))))))};a.d(t,"MenuRoutes",function(){return fn});var fn=function(e){var t=e.match;return r.a.createElement(i.Switch,null,r.a.createElement(c.a,{exact:!0,path:t.path,render:function(){return r.a.createElement(i.Redirect,{to:"".concat(t.path,"/category")})}}),r.a.createElement(c.a,{exact:!0,path:"".concat(t.path,"/category"),component:be}),r.a.createElement(c.a,{path:"".concat(t.path,"/category/:categoryId"),render:function(e){var t=e.match.params,a=e.location.state;return r.a.createElement(qt,{categoryId:"create"===t.categoryId?null:t.categoryId,categoryType:a.categoryType})}}),r.a.createElement(c.a,{exact:!0,path:"".concat(t.path,"/recipe"),component:aa}),r.a.createElement(c.a,{path:"".concat(t.path,"/recipe/:recipeId"),render:function(e){var t=e.match.params,a=e.location.state;return r.a.createElement(ja,{recipeId:"create"===t.recipeId?null:t.recipeId,recipeType:a.recipeType})}}),r.a.createElement(c.a,{exact:!0,path:"".concat(t.path,"/stock"),component:za}),r.a.createElement(c.a,{path:"".concat(t.path,"/stock/deposit"),component:Va}),r.a.createElement(c.a,{path:"".concat(t.path,"/stock/:stockId"),render:function(e){var t=e.match.params;return r.a.createElement(mn,{stockId:"create"===t.stockId?null:t.stockId})}}),r.a.createElement(i.Route,{component:o.a}))};t.default=fn}}]);
//# sourceMappingURL=176.c1bbc8e0.chunk.js.map