(window.webpackJsonp=window.webpackJsonp||[]).push([[176],{7652:function(e,t,a){"use strict";var n=a(11),r=a.n(n),i=a(14),o=a(7665),c=a(0),l=a.n(c),u=a(66),d=a(70),s=a.n(d),m=a(285);function f(){return l.a.createElement(m.a,{onClick:function(){return s.a.showReportDialog()}},l.a.createElement(u.Trans,{id:"Submit feedback"}))}var p=a(22),h=a(54),g=a(39),v=a(291);function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=g.d._("Unexpected error occured while sending a request. Our team was notified about the issue."),n=Object(v.a)(),c=n.enqueueSnackbar,u=n.enqueueError,d=n.enqueueWarning,s=function(e){e.forEach(d)},m=function(e){var t=e.filter(p.a.pathEq(["extensions","showToUser"],!0));0===t.length?u(a):s(t.map(p.a.prop("message")))},b=function(e){if(Object(o.isApolloError)(e)){if(e.networkError)return void u(g.d._("Communication with server has failed. Please retry the operation in a moment again."));if(e.graphQLErrors)return void m(e.graphQLErrors)}Object(h.c)(e),c(a,{action:[l.a.createElement(f,{key:"feedback"})]})};return function(){var a=Object(i.a)(r.a.mark(function a(n){var i,o,c,l=arguments;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return i=l.length>1&&void 0!==l[1]?l[1]:{},a.prev=1,a.next=4,e(n,i);case 4:if(!(o=a.sent).errors){a.next=8;break}return m(o.errors),a.abrupt("return",null);case 8:if(o.data){a.next=10;break}return a.abrupt("return",null);case 10:return t.getUserErrors&&null!==(c=t.getUserErrors(o.data))&&s(c),a.abrupt("return",o.data);case 14:return a.prev=14,a.t0=a.catch(1),b(a.t0),a.abrupt("return",null);case 18:case"end":return a.stop()}},a,this,[[1,14]])}));return function(e){return a.apply(this,arguments)}}()}a.d(t,"a",function(){return b})},7654:function(e,t,a){"use strict";a.d(t,"a",function(){return d});var n=a(0),r=a.n(n),i=a(20),o=a(7664),c=a(15),l=i.b.div.withConfig({displayName:"PageLayoutFullHeightItem__FullHeightDiv",componentId:"sc-1mean6j-0"})(["position:fixed;bottom:0.5rem;width:",";left:",";top:",";"],function(e){return void 0!==e.widthInColumns?"calc(("+e.widthInColumns+" * 6.22vw) - "+c.d.LayoutGridCellMargin+")":"calc(100vh - (2 * "+c.d.LayoutGridCellMargin+"))"},function(e){return void 0!==e.column?"calc(("+e.column+" * 6.22vw) + "+c.d.LayoutGridCellMargin+")":c.d.LayoutGridCellMargin},function(e){return void 0!==e.row?"calc(("+e.row+" * 3.9375rem) + "+c.d.LayoutGridCellMargin+")":"calc(3.9375rem + "+c.d.LayoutGridCellMargin+")"}),u=i.b.div.withConfig({displayName:"PageLayoutFullHeightItem__FullHeightDivStyled",componentId:"sc-1mean6j-1"})(["height:100%;"]),d=function(e){var t=e.children,a=e.row,n=void 0===a?1:a,i=e.column,c=void 0===i?0:i,d=e.widthInColumns,s=void 0===d?16:d,m=e.withScrollArea,f=void 0!==m&&m,p=e.scrollAreaId;return r.a.createElement(l,{column:c,row:n,widthInColumns:s,withScrollArea:f},f?r.a.createElement(o.a,{id:p},t):r.a.createElement(u,null,t))}},7655:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n=a(20).b.div.withConfig({displayName:"FlexRowSingle",componentId:"sc-1opww0j-0"})(["display:flex;flex-direction:row;justify-content:",";"],function(e){var t=e.justify;return void 0===t?"space-between":t})},7659:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n=a(20).b.div.withConfig({displayName:"VerticalGap",componentId:"z6ukut-0"})(["height:",";"],function(e){var t=e.size,a=void 0===t?1:t,n=e.sizeUnit,r=void 0===n?"rem":n;return"".concat(a).concat(r)});n.displayName="VerticalGap"},7664:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n=a(20).b.div.withConfig({displayName:"ScrollArea",componentId:"v30w13-0"})(["overflow-y:auto;-webkit-overflow-scrolling:touch;height:100%;"])},7680:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=a(20),r=Object(n.b)("div").withConfig({displayName:"CardDock",componentId:"sc-1fyaqia-0"})(["position:absolute;",";",";"],function(e){var t=e.position,a=void 0===t?"BottomRight":t;return"BottomLeft"===a||"TopLeft"===a?"left: 0":"right: 0"},function(e){var t=e.position,a=void 0===t?"BottomRight":t;return"BottomRight"===a||"BottomLeft"===a?"bottom: 0":"top: 0"})},7722:function(e,t,a){"use strict";function n(e){var t=e.toLocaleLowerCase();return function(e){return e.toLocaleLowerCase().includes(t)}}a.d(t,"a",function(){return n})},7763:function(e,t,a){"use strict";a.d(t,"a",function(){return d}),a.d(t,"b",function(){return s});var n=a(23),r=a(42),i=a(0),o=a.n(i),c=a(44),l=a(45),u=a(162),d=function(e){var t=e.to,a=e.from,n=Object(r.a)(e,["to","from"]);return o.a.createElement(c.Route,{children:function(e){var r=e.location;return o.a.createElement(l.b,Object.assign({to:s(t,a||"".concat(r.pathname,"/"))},n))}})};function s(e,t){if("string"===typeof e)return Object(u.a)(e,t);var a=Object(u.a)(e.pathname||"",t);return Object(n.a)({},e,{pathname:a})}},7768:function(e,t,a){"use strict";a.d(t,"a",function(){return h});var n=a(42),r=a(100),i=a(101),o=a(103),c=a(102),l=a(104),u=a(0),d=a.n(u),s=a(7638),m=a(22),f=a(39),p=a(7662),h=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(o.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(i)))).validate=function(e){var t=a.props,n=t.isRequired,r=t.isMulti,i=t.validationName;if(n){if(r&&(!Array.isArray(e)||0===e.length))return f.d._("{validationName} must have at least option selected",{validationName:i});if(!r&&(null===e||void 0===e))return f.d._("{validationName} must have a selection",{validationName:i})}return null},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"getControlProps",value:function(e){var t=this.props,a=t.isMulti,n=t.items,r=t.defaultSelection,i=t.getItemId,o=e.value||r;if(a){return{selectedItems:Array.isArray(o)?n.filter(function(e){return o.includes(i(e))}):[],onMultiSelection:function(t){e.setValue(t.map(i)),e.setTouched(!0)}}}return{selectedItem:o&&n.find(function(e){return i(e)===o}),onSingleSelection:function(t){e.setValue(t?i(t):null),e.setTouched(!0)}}}},{key:"render",value:function(){var e=this,t=this.props,a=t.field,r=t.fieldIsPure,i=void 0!==r&&r,o=t.isRequired,c=void 0!==o&&o,l=t.isClearable,u=void 0!==l&&l,m=Object(n.a)(t,["field","fieldIsPure","isRequired","isClearable"]);return d.a.createElement(s.Field,{field:a,pure:i,validate:this.validate},function(t){return d.a.createElement(p.a,Object.assign({},e.getControlProps(t),{isInvalid:Boolean(t.error),isClearable:u&&!c},m))})}}]),t}(d.a.Component);h.defaultProps={validationName:f.d._("Value"),getItemId:m.a.prop("id")}},7771:function(e,t,a){"use strict";a.d(t,"a",function(){return u});var n=a(0),r=a.n(n),i=a(7717),o=a(20),c=a(90),l=o.b.div.withConfig({displayName:"DragHandle__DragHandleContainerStyled",componentId:"xbsz8c-0"})(["padding:1rem 0.4rem;cursor:grab;"]),u=Object(i.SortableHandle)(function(){return r.a.createElement(l,null,r.a.createElement(c.a,{iconName:"reorder"}))})},7931:function(e,t,a){"use strict";a.d(t,"a",function(){return g});var n=a(23),r=a(42),i=a(100),o=a(101),c=a(103),l=a(102),u=a(104),d=a(0),s=a.n(d),m=a(7638),f=a(22),p=a(39),h=a(7645),g=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).validate=function(e){return a.props.isRequired&&!e?p.d._("{0} must be selected",{0:a.props.validatioName}):null},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"getControlProps",value:function(e){var t=this.props,a=t.isMulti,n=t.options,r=t.getOptionValue,i=t.defaultValue,o=e.value||i;if(a){var c=Array.isArray(o)?function(e){return o.includes(r(e))}:f.a.F;return{value:Array.isArray(n)?n.filter(c):[],onChange:function(t){e.setValue(t.map(r))}}}return{value:o&&n.find(function(e){return r(e)===o}),onChange:function(t){e.setValue(r(t))}}}},{key:"render",value:function(){var e=this,t=this.props,a=t.field,i=t.fieldIsPure,o=void 0!==i&&i,c=(t.isRequired,t.defaultValue,Object(r.a)(t,["field","fieldIsPure","isRequired","defaultValue"]));return s.a.createElement(m.Field,{field:a,validate:this.validate,pure:o},function(t){return s.a.createElement(h.a,Object.assign({},e.getControlProps(t),{onFocus:function(){return t.setTouched(!0)},styles:{control:function(e){return Boolean(t.error)?Object(n.a)({},e,{borderColor:"red"}):e}}},c))})}}]),t}(s.a.Component);g.defaultProps={validatioName:"Value",getItemId:f.a.prop("id")}},7964:function(e,t,a){},8111:function(e,t,a){t.pictograms=a(8112)},8112:function(e,t){e.exports=["pizza","beans","cheese","hot-pepper","smoking-barbecue","meat-pie","sausage","hot-dog","fruit","fruit-1","fruit-2","strawberry","soup","noodles","ramen","rice","spaghetti","food","piece-of-cake","beer","marshmallow","cake","banana-split","ice-cream","cookie","doughnut","cupcake","kebab","steak","fish","fondue","shrimp","berry","food","food-1","food-2","food-3","food-4","food-5","food-6","food-7","food-8","food-9","food-10","food-11","food-12","food-13","food-14","food-15","food-16","food-17","food-18","food-19","food-20","food-21","food-22","food-23","food-24","food-25","food-26","food-27","food-28","food-29","food-30","drink","drink-1","drink-2","drink-3","drink-4","drink-5","cup","cup-1","cup-2","whisky"]},8115:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(44),o=a(152),c=a(74),l=a(20),u=a(288),d=a(7661),s=a(7655),m=a(7659),f=a(25),p=a(39),h=a(289),g=a(7654),v=a(7716),b=a(11),E=a.n(b),y=a(14),w=a(23),C=a(51),k=a(276),O=a(7648),j=a(53),I=a(7652),T=a(320),_=a(42),R=(a(7964),a(7764)),x=a(7763),S=a(15),L=a(285),N=function(e){var t=e.target,a=e.Link,n=void 0===a?x.a:a,i=Object(_.a)(e,["target","Link"]);return r.a.createElement(n,{to:t},r.a.createElement(L.a,Object.assign({iconName:"mode_edit",width:S.d.ButtonHeight,height:S.d.ButtonHeight},i)))};function D(){return(D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var P=function(e){var t=D({},e);return r.a.createElement(L.a,Object.assign({iconName:"remove_circle_outline",width:S.d.ButtonHeight,height:S.d.ButtonHeight},t))},B=function(e){var t=e.isVisible,a=Object(_.a)(e,["isVisible"]);return r.a.createElement(L.a,Object.assign({iconName:"remove_red_eye",width:S.d.ButtonHeight,height:S.d.ButtonHeight,iconColor:t?S.a.white:S.a.greyMiddle,color:S.a.greyMiddle},a))},F=a(7643),W=a(7657),q=l.b.div.withConfig({displayName:"NoteText",componentId:"xj601d-0"})(["color:",";"],S.a.greyMiddle),M=a(65),V=function(e){var t=e.items,a=e.heightStretch,n=void 0!==a&&a,i=e.fullHeight,o=void 0!==i&&i,c=e.rowHeight,l=void 0===c?60:c,u=e.isLoading,d=void 0!==u&&u,s=e.children,m=Object(_.a)(e,["items","heightStretch","fullHeight","rowHeight","isLoading","children"]),f=r.a.useCallback(function(e){var a=e.index;return t[a]},[t]),p=r.a.useCallback(function(){return d?r.a.createElement(M.a,null):null},[d]),h=function(e,a){return r.a.createElement(R.h,Object.assign({autoHeight:!n&&!o,width:e,height:a,headerHeight:50,rowCount:t?t.length:0,rowHeight:l,rowGetter:f,noRowsRenderer:p,style:{outline:"none"}},m),s)};return o?r.a.createElement(R.a,{disableHeight:!0},function(e){var a=e.width;return h(a,t.length*l)}):n?r.a.createElement(R.a,null,function(e){var t=e.width,a=e.height;return h(t,a)}):r.a.createElement(R.i,{scrollElement:window},function(e){var t=e.height;return r.a.createElement(R.a,{disableHeight:!0},function(e){var a=e.width;return h(a,t)})})};function A(e,t){var a=e.canQuery,n=e.canMutate;return function(e){var i=t(e);return a&&(i=r.a.createElement(W.a,{queryName:a},i)),n&&(i=r.a.createElement(F.a,{mutationName:n},i)),i}}function H(e){var t=e.cellData;return r.a.createElement(N,{target:t})}function K(e){var t=e.cellData,a=e.columnData;return r.a.createElement(P,{onClick:function(){return a.onRemove&&a.onRemove(t)}})}function U(e){var t=e.cellData,a=e.columnData,n=e.rowData;return r.a.createElement(B,{isVisible:t,onClick:function(){return a.onToggle(n.id,!t)}})}function G(e){var t=e.cellData,a=e.rowData,n=e.columnData;return r.a.createElement(r.a.Fragment,null,t,r.a.createElement(q,null,a[n.noteKey]))}var z=Object(l.b)(function(e){var t=e.text,a=void 0===t?p.d._("Table is empty"):t,n=Object(_.a)(e,["text"]);return r.a.createElement("div",n,a)}).withConfig({displayName:"DataTable__DataTableEmptyText",componentId:"sc-1d9kay5-0"})(["padding:1rem;color:",";font-style:'italic';"],S.a.greyMiddle),Q=a(7771),$=a(293),J=a(100),X=a(101),Y=a(103),Z=a(102),ee=a(104),te=a(7717),ae=Object(te.SortableElement)(function(e){var t=e.columns,a=e.style,n=e.className;return r.a.createElement("div",{style:a,className:n},t)}),ne=Object(te.SortableContainer)(V),re=function(e){function t(){var e,a;Object(J.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(Y.a)(this,(e=Object(Z.a)(t)).call.apply(e,[this].concat(i)))).state={sortedItems:a.props.items},a.rowRenderer=function(e){return r.a.createElement(ae,e)},a.onHandleSorting=function(){var e=Object(y.a)(E.a.mark(function e(t){var n,r,i,o,c;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.newIndex,r=t.oldIndex,n!==r){e.next=3;break}return e.abrupt("return");case 3:if(i=Object($.a)(a.state.sortedItems),o=Object(te.arrayMove)(a.state.sortedItems,r,n),a.setState({sortedItems:o}),!a.props.onSort){e.next=15;break}if(c=a.props.onSort({item:i[r],items:o,offset:n-r,newIndex:n,oldIndex:r}),e.t0=c,!e.t0){e.next=13;break}return e.next=12,c;case 12:e.t0=!e.sent;case 13:if(!e.t0){e.next=15;break}a.setState({sortedItems:i});case 15:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(ee.a)(t,e),Object(X.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.items,Object(_.a)(e,["items"]));return r.a.createElement(ne,Object.assign({lockAxis:"y",useDragHandle:!0,onSortEnd:this.onHandleSorting,rowRenderer:this.rowRenderer},t,{items:this.state.sortedItems}))}}]),t}(r.a.PureComponent);re.getDerivedStateFromProps=function(e){return{sortedItems:e.items}};var ie=function(e){var t=e.categories,a=e.onToggle,n=e.onRemove,i=e.onSort,o=e.showEditColumn,c=void 0===o||o,l=e.showRemoveColumn,u=void 0!==l&&l,d=e.showVisibilityColumn,s=void 0!==d&&d,m=e.showHeader,f=void 0===m||m,h=e.isSortable,g=void 0!==h&&h,v=e.isLoading,b=void 0!==v&&v,E=e.heightStretch,y=void 0!==E&&E,C=e.fullHeight,k=void 0!==C&&C,O=e.noRowsDisplay,j=void 0===O?r.a.createElement(z,{text:p.d._("No recipes in category")}):O,I={isLoading:b,items:t,disableHeader:!f,heightStretch:y,fullHeight:k,noRowsRenderer:function(){return j}},_=[c&&r.a.createElement(R.d,{dataKey:"id",width:S.d.ButtonColumnWidthPx,minWidth:S.d.ButtonColumnWidthPx,cellRenderer:A({canQuery:"wareCategory"},H),cellDataGetter:function(e){var t=e.rowData;return Object(T.b)(t.id,t.categoryType.enum)}}),u&&r.a.createElement(R.d,{dataKey:"id",width:S.d.ButtonColumnWidthPx,minWidth:S.d.ButtonColumnWidthPx,cellRenderer:K,columnData:{onRemove:n}}),s&&r.a.createElement(R.d,{dataKey:"visible",width:S.d.ButtonColumnWidthPx,minWidth:S.d.ButtonColumnWidthPx,cellRenderer:A({canMutate:"updateWareCategory"},U),columnData:{onToggle:a}}),r.a.createElement(R.d,{dataKey:"nameLabel",width:300,label:p.d._("Name"),cellRenderer:G,columnData:{noteKey:"internalNoteLabel"}}),r.a.createElement(R.d,{dataKey:"countRecipes",label:p.d._("Recipe count"),width:100,cellRenderer:function(e){var t=e.cellData;return"".concat(t," ").concat(p.d._("Recipes").toLocaleLowerCase())}}),g&&r.a.createElement(R.d,{dataKey:"id",width:50,cellRenderer:function(){return r.a.createElement(Q.a,null)}})];return g?r.a.createElement.apply(r.a,[re,Object(w.a)({onSort:i},I)].concat(_)):r.a.createElement.apply(r.a,[V,I].concat(_))},oe=l.b.div.withConfig({displayName:"CreateButton__CreateButtonContainer",componentId:"sc-837yoh-0"})(["position:absolute;right:0;z-index:5;"]),ce=function(e){var t=e.routeTo,a=void 0===t?"create":t,n=e.onClick;return r.a.createElement(oe,null,r.a.createElement(x.a,{to:a,onClick:n},r.a.createElement(L.a,{iconName:"add_circle",color:S.a.green,width:S.d.ButtonHeight,height:S.d.ButtonHeight})))},le=a(144),ue=Object(C.b)(function(e){var t=e.headline,a=e.subHeadline,n=void 0!==a&&a,i=e.categoryType,o=Object(j.c)().settings,c=Object(k.a)(le.a,Object(w.a)({},o.getQueryProps({categoryType:i}),{suspend:!1})),l=c.data,u=c.loading,m=c.updateQuery,p=c.refetch,h=Object(I.a)(Object(f.D)()),g=l&&l.categories||[];return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,null,r.a.createElement(d.a,{widthGrowIndex:1},r.a.createElement(O.a,null,t),n&&r.a.createElement(O.a,{size:"smaller"},n)),r.a.createElement(d.a,{fixedWidth:!0},r.a.createElement(ce,{routeTo:Object(T.b)("create",i)}))),r.a.createElement(ie,{isLoading:u,categories:g,onToggle:function(e,t){h({categoryId:e,visible:t},{optimisticResponse:{updateWareCategory:{__typename:"WareCategory",id:e,visible:t}}})},isSortable:!0,showHeader:!1,fullHeight:!0,showVisibilityColumn:!0,onSort:function(){var e=Object(y.a)(E.a.mark(function e(t){var a,n,r,i;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.item,n=t.items,r=t.offset,m(function(){return{categories:n}}),e.next=4,o.menu.category.sortCategory(a.id,r);case 4:if(!(i=e.sent)){e.next=8;break}return e.next=8,p();case 8:return e.abrupt("return",i);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}))}),de=a(66),se=a(2),me=a(3),fe=a.n(me);function pe(){var e=Object(se.a)(["\n  query QMenuGuideDownload($branchId: ID!) {\n    companyBranch(id: $branchId) {\n      id\n      foodMenuUrl\n    }\n  }\n"]);return pe=function(){return e},e}var he,ge,ve=fe()(pe()),be=Object(l.b)(L.a).withConfig({displayName:"MenuGuideDownload__MenuGuideDownloadButton",componentId:"sc-1kyx0kn-0"})(["white-space:nowrap;margin-left:2rem;& a{text-decoration:none;color:",";padding:1rem;}"],S.a.black),Ee=Object(C.b)(function(){var e=Object(j.c)().settings,t=Object(k.a)(ve,{suspend:!1,variables:{branchId:e.branchId}}),a=t.loading,n=t.data;return a||!(n&&n.companyBranch&&n.companyBranch.foodMenuUrl)?null:r.a.createElement(be,{color:S.a.greyMiddle},r.a.createElement("a",{href:n.companyBranch.foodMenuUrl,target:"_blank"},r.a.createElement(de.Trans,{id:"Menu codes manual"})))}),ye=l.b.div.withConfig({displayName:"MenuCategoryListPage__PartialDataTableContainer",componentId:"sc-1y45l0l-0"})(["height:calc(100% - 3.5rem);padding-top:1rem;overflow-y:scroll;overflow-x:hidden;-webkit-overflow-scrolling:touch;"]),we=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{pageTitle:p.d._("Category overview"),useBackButton:!0}),r.a.createElement(g.a,null,r.a.createElement(u.a,{stretchToParent:!0},r.a.createElement(s.a,{justify:"start"},r.a.createElement(d.a,null,r.a.createElement(v.a,{width:20})),r.a.createElement(d.a,null,r.a.createElement(Ee,null))),r.a.createElement(ye,null,r.a.createElement(ue,{categoryType:f.r.Main,headline:p.d._("Category of recipes")}),r.a.createElement(m.a,{size:1.5}),r.a.createElement(ue,{categoryType:f.r.SideDish,headline:p.d._("Category of sidedish")}),r.a.createElement(m.a,{size:1.5}),r.a.createElement(ue,{categoryType:f.r.Cover,headline:p.d._("Category of covers")})))))},Ce=l.b.div.withConfig({displayName:"TopRightButtonContainer",componentId:"sc-1n6vrhf-0"})(["position:fixed;z-index:500;right:0;top:0rem;width:10rem;opacity:0.96;background:",";border-radius:",";"],S.a.black,S.c.Button),ke=a(150),Oe=a(195),je=(he={},Object(ke.a)(he,f.r.Main,Object(Oe.i18nMark)("Ware categories")),Object(ke.a)(he,f.r.SideDish,Object(Oe.i18nMark)("Sidedish categories")),Object(ke.a)(he,f.r.Cover,Object(Oe.i18nMark)("Cover categories")),he),Ie=(ge={},Object(ke.a)(ge,f.r.Main,Object(Oe.i18nMark)("Ware recipe")),Object(ke.a)(ge,f.r.SideDish,Object(Oe.i18nMark)("Sidedish recipe")),Object(ke.a)(ge,f.r.Cover,Object(Oe.i18nMark)("Cover recipe")),ge);function Te(e){return p.d._(je[e])}function _e(e){return p.d._(Ie[e])}var Re=a(7638),xe=a(7688),Se=a(7687),Le=function(e){var t=e.isCreate,a=void 0!==t&&t;return r.a.createElement(Re.FormApi,{render:function(e){return r.a.createElement(Se.a,{id:"form-submit"},function(e,t){if(!Object(xe.a)(e))return p.d._("Fix form errors");return t?p.d._("Create"):p.d._("Save")}(e,a))}})};var Ne=a(7680),De=l.b.form.withConfig({displayName:"FormContainer",componentId:"sc-38ce8s-0"})(["margin:0.6rem;display:flex;"]),Pe=l.b.div.withConfig({displayName:"FormContainer__FormColumn",componentId:"sc-38ce8s-1"})(["flex:none;margin-right:1rem;"]),Be=a(7770),Fe=a(7647),We=a(7703),qe=a(8111),Me=l.b.div.withConfig({displayName:"PictogramDisplay__PictogramDisplayStyled",componentId:"sc-6st3s9-0"})(["&:before{font-size:"," !important;margin-left:0.5rem !important;}"],function(e){var t=e.fontSize,a=void 0===t?2:t,n=e.fontSizeUnit,r=void 0===n?"rem":n;return"".concat(a).concat(r)}),Ve=function(e){var t=e.pictogramId,a=e.fontSize,n=void 0===a?2:a,i=e.fontSizeUnit,o=void 0===i?"rem":i;return r.a.createElement(Me,{className:Ae(t),fontSize:n,fontSizeUnit:o})};function Ae(e){return"flaticon-".concat(e)}var He=a(7645),Ke=a(22),Ue=function(e){var t=e.field;return r.a.createElement(Re.Field,{field:t,pure:!0},function(e){return r.a.createElement(He.a,{value:e.value?{pictogram:e.value}:null,onChange:function(t){t&&!Array.isArray(t)&&e.setValue(t.pictogram)},options:qe.pictograms.map(function(e){return{pictogram:e}}),getOptionValue:Ke.a.prop("pictogram"),formatOptionLabel:function(e){var t=e.pictogram;return r.a.createElement(Ve,{pictogramId:t,fontSize:2})},components:{SingleValue:function(e){var t=e.data;return r.a.createElement(Ve,{pictogramId:t.pictogram,fontSize:4})}},styles:{container:function(e){return Object(w.a)({},e,{width:"8rem"})},menuList:function(e){return Object(w.a)({},e,{maxHeight:"35rem"})}},isClearable:!1,isSearchable:!1,minWidth:8})})},Ge=a(7707),ze=function(e){var t=e.confirmText,a=e.onDelete;return r.a.createElement(Re.Field,{field:"id"},function(e){return"NEW"!==e.value&&r.a.createElement(i.Route,null,function(n){var i=n.history;return r.a.createElement(Ge.a,{confirmText:t,onDelete:Object(y.a)(E.a.mark(function t(){return E.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a(e.value);case 2:i.goBack();case 3:case"end":return t.stop()}},t,this)}))})})})},Qe=a(7646),$e=a(7640),Je=function(e){var t=e.field,a=void 0===t?"internalNote":t,n=(e.icon,e.label),i=void 0===n?p.d._("Internal note").toLocaleLowerCase():n,o=Object(_.a)(e,["field","icon","label"]);return r.a.createElement($e.a,{label:i,labelWidth:7},r.a.createElement(Qe.a,Object.assign({field:a,inputFullWidth:!0},o)))},Xe=function(e){var t=e.field,a=void 0===t?"nameLabel":t,n=e.icon,i=void 0===n?"label":n,o=Object(_.a)(e,["field","icon"]);return r.a.createElement($e.a,{icon:i,labelWidth:7},r.a.createElement(Qe.a,Object.assign({field:a,inputFullWidth:!0,isRequired:!0,validatioName:p.d._("Name")},o)))},Ye=function(e){var t=e.categoryType;return r.a.createElement(De,null,r.a.createElement(Pe,null,r.a.createElement(Fe.a,{width:22},r.a.createElement(Xe,{placeholder:p.d._("Category name"),inputFullWidth:!0})),r.a.createElement(Fe.a,{width:22},r.a.createElement(Je,{placeholder:p.d._("Category internal note")})),r.a.createElement(Be.a,{field:"visible",label:p.d._("To show this category")})),t===f.r.Main?r.a.createElement(Pe,null,r.a.createElement(Ue,{field:"pictogram"})):null,r.a.createElement(Ne.a,{position:"BottomRight"},r.a.createElement(We.a,{render:function(e){var a=e.menu;return r.a.createElement(ze,{confirmText:p.d._("Remove this category?"),onDelete:function(e){return a.category.deleteCategory(e,t)}})}})))},Ze=a(58),et=a(7665),tt=a(122);function at(e){var t=e.shouldLoad,a=e.loader,i=Object(_.a)(e,["shouldLoad","loader"]),o=Object(n.useState)(null),c=Object(tt.a)(o,2),l=c[0],u=c[1];return Object(n.useEffect)(function(){t&&a().then(u)},[t]),r.a.createElement(Re.Form,Object.assign({values:l},i))}var nt=function(e){var t=e.render;return r.a.createElement(i.Route,null,function(e){var a=e.history;return t?t(function(){return a.goBack()}):(a.goBack(),null)})},rt=a(17),it=l.b.div.withConfig({displayName:"MenuBaseFormLoader__ErrorPop",componentId:"sc-18epk2-0"})(["color:red;padding:1rem;max-width:30rem;overflow-wrap:break-word;"]),ot=function(e){function t(){var e,a;Object(J.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(Y.a)(this,(e=Object(Z.a)(t)).call.apply(e,[this].concat(r)))).state={submitError:null,validationErrors:null},a}return Object(ee.a)(t,e),Object(X.a)(t,[{key:"renderErrors",value:function(){var e=this.state,t=e.submitError,a=e.validationErrors;return t?this.renderSubmitError(t):a?this.renderValidationErrors(a):null}},{key:"renderSubmitError",value:function(e){var t=[p.d._("Unexpected error while sending form. Out team was notified about the issue.")];if(Object(et.isApolloError)(e)){var a=Ke.a.propEq("showToUser",!0),n=e.graphQLErrors.filter(a).map(Ke.a.prop("message"));n.length&&(t=n)}return this.renderPopover(t)}},{key:"renderValidationErrors",value:function(e){return null}},{key:"renderPopover",value:function(e){var t=this;return r.a.createElement(Ze.g,{open:!0,anchorEl:function(){return document.getElementById("submit-button")},onClose:function(){return t.setState({submitError:null,validationErrors:null})},anchorOrigin:{vertical:"bottom",horizontal:"center"}},e.map(function(e,t){return r.a.createElement(it,{key:t},e)}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.isCreate,n=t.onCreate,i=t.onUpdate,o=t.getDefaultValues,c=t.loadValues,l=t.loadDefaults,u=t.children;return r.a.createElement(nt,{render:function(t){return r.a.createElement(at,{shouldLoad:!0,defaultValues:o(),loader:Object(y.a)(E.a.mark(function e(){var t,n,r;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o(),!l){e.next=6;break}return e.next=4,l();case 4:n=e.sent,Object.assign(t,n);case 6:if(!a){e.next=8;break}return e.abrupt("return",t);case 8:return e.next=10,c();case 10:return r=e.sent,e.abrupt("return",Object.assign({},t,r));case 12:case"end":return e.stop()}},e,this)})),onChange:function(e){return Object(rt.e)("new values",e.values)},onSubmit:function(){var e=Object(y.a)(E.a.mark(function e(r){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=5;break}return e.next=3,n(r);case 3:e.next=7;break;case 5:return e.next=7,i(r);case 7:t();case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),onSubmitFailure:function(t,a){e.setState({validationErrors:t,submitError:a}),Object.keys(t).length&&Object(rt.d)("validation errors",t),a&&Object(rt.d)("submit error",a)}},u,e.renderErrors())}})}}]),t}(r.a.Component);function ct(){return Object(j.c)().settings.menu}var lt=a(446),ut=function(e){var t=e.categoryId,a=e.categoryType,n=e.children,i=ct();return r.a.createElement(ot,{isCreate:null===t,onCreate:function(e){return i.category.createCategory(e,a)},onUpdate:function(e){return i.category.updateCategory(e,a)},getDefaultValues:function(){return function(e){return{id:"NEW",visible:!0,internalNoteLabel:"",pictogram:"",nameLabel:"",categoryType:{enum:e},recipes:[]}}(a)},loadValues:Object(y.a)(E.a.mark(function e(){var a,n;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.client.query({query:lt.b,variables:{categoryId:t},fetchPolicy:"no-cache"});case 2:return a=e.sent,n=a.data,e.abrupt("return",n.wareCategory);case 5:case"end":return e.stop()}},e,this)}))},n)};function dt(e){var t=e.items,a=e.renderItem,n=(e.isLoading,e.heightStretch),i=void 0!==n&&n,o=e.rowHeight,c=void 0===o?60:o,l=Object(_.a)(e,["items","renderItem","isLoading","heightStretch","rowHeight"]),u=r.a.useCallback(function(e){var n=e.key,i=e.style,o=e.index;return r.a.createElement("div",{key:n,style:i},a(t[o],o))},[a,t]),d=function(e,a){return r.a.createElement(R.g,Object.assign({width:e,height:a,headerHeight:50,rowHeight:c,rowCount:t?t.length:0,rowRenderer:u,style:{outline:"none"}},l))};return i?r.a.createElement(R.a,null,function(e){var t=e.width,a=e.height;return d(t,a)}):r.a.createElement(R.i,{scrollElement:window},function(e){var t=e.height;return r.a.createElement(R.a,{disableHeight:!0},function(e){var a=e.width;return d(a,t)})})}var st=a(7682),mt=a.n(st),ft=a(340),pt=function(e){return void 0===e||Object(st.isEmpty)(e+"")||!Object(ft.b)(e+"")?p.d._("Price must be a number"):null},ht=function(e){var t=e.field,a=void 0===t?"price.value":t,n=e.icon,i=void 0===n?"toll":n,o=Object(_.a)(e,["field","icon"]);return r.a.createElement($e.a,{icon:i},r.a.createElement(Fe.a,{width:5},r.a.createElement(Qe.a,Object.assign({field:a,inputFullWidth:!0,validate:pt},o))))},gt=a(151),vt=a(7768),bt=a(76),Et=a(71);function yt(){var e=Object(se.a)(["\n  query GVats($branchId: ID!) {\n    vats(companyBranch: $branchId) {\n      id\n      vat\n    }\n  }\n"]);return yt=function(){return e},e}var wt=fe()(yt()),Ct=Object(Et.a)(wt),kt=Object(gt.a)(["margin-left:5rem;"]),Ot=function(e){var t=e.field,a=void 0===t?"price.vat":t;return r.a.createElement(bt.a,{render:function(e){var t=e.settings;return r.a.createElement(Ct,Object.assign({},t.queryProps,{renderLoading:!1,render:function(e){var t=e.vats;return r.a.createElement($e.a,{className:kt,label:"".concat(p.d._("VAT"),":")},t&&r.a.createElement(vt.a,{field:a,items:t,formatItem:function(e){var t=e.vat;return"".concat(t,"%")},isRequired:!0,validationName:p.d._("VAT")}))}}))}})},jt=Object(l.b)(function(e){var t=e.field,a=e.className;return r.a.createElement(Re.Field,{field:t},function(e){return r.a.createElement("span",{className:a},e.value)})}).withConfig({displayName:"FormPricingField__FormPricingCurrencyCode",componentId:"hoj9dy-0"})(["padding:0.5rem;"]),It=function(e){var t=e.priceType,a=e.label;return r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,null,a),r.a.createElement(Re.NestedField,{field:["prices",t]},r.a.createElement(s.a,{justify:"flex-start"},r.a.createElement(ht,{field:"value"}),r.a.createElement(jt,{field:"currencyCode"}),r.a.createElement(Ot,{field:"vatId"}))))},Tt=a(67);function _t(e){var t=e.onAdd,a=e.addLabel,i=void 0===a?p.d._("Add"):a,o=e.addButtonText,c=void 0===o?p.d._("Add"):o,l=Object(_.a)(e,["onAdd","addLabel","addButtonText"]),u=Object(Tt.useStateRef)(null),m=Object(tt.a)(u,2),f=m[0],h=m[1],g=Object(n.useCallback)(function(){var e=f();null!==e&&(t(e),h(null))},[t]),v=Object(n.useCallback)(function(e){"Enter"===e.key&&g()},[]),b=Object(n.useCallback)(function(e){h(e||null)},[]);return r.a.createElement(s.a,{justify:"flex-start"},r.a.createElement(d.a,{fixedWidth:!0,width:"4rem",margin:"auto 0"},i),r.a.createElement(d.a,{fixedWidth:!0,width:"20rem",margin:"auto 0"},r.a.createElement(He.a,Object.assign({value:f(),onChange:b,onKeyDown:v,isMulti:!1,isClearable:!1,getOptionValue:Ke.a.prop("id"),getOptionLabel:Ke.a.prop("nameLabel")},l))),r.a.createElement(d.a,{fixedWidth:!0,width:"10rem",margin:"auto 0"},r.a.createElement(L.a,{text:c,disabled:null===f(),onClick:g})))}var Rt=function(e){var t=e.recipes,a=e.onRemove;return r.a.createElement(V,{items:t,disableHeader:!0},r.a.createElement(R.d,{dataKey:"associatedRecipe",width:S.d.ButtonColumnWidthPx,minWidth:S.d.ButtonColumnWidthPx,cellRenderer:function(e){var t=e.cellData;return r.a.createElement(P,{onClick:function(){return a(t)}})}}),r.a.createElement(R.d,{dataKey:"nameLabel",width:300,label:p.d._("Name"),cellRenderer:G,columnData:{noteKey:"internalNote"}}),r.a.createElement(R.d,{dataKey:"formattedPrice",width:100,label:p.d._("Price")}))},xt=a(312),St=function(e){var t=e.priceType,a=e.recipeId;return r.a.createElement(Re.Field,{field:"associatedRecipes"},function(e){var n=Ke.a.filter(Ke.a.propEq("warePriceType",t),e.value),i=Ke.a.reject(function(e){return e.id===a||(t=e.id,n.some(Ke.a.propEq("associatedRecipe",t)));var t}),o=function(a){e.setValue(e.value.concat({warePriceType:t,associatedRecipe:a.id,nameLabel:a.nameLabel,formattedPrice:"?"}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Rt,{recipes:n,onRemove:function(a){e.setValue(Ke.a.reject(function(e){var n=e.associatedRecipe,r=e.warePriceType;return n===a&&r===t},e.value))}}),r.a.createElement(We.a,{render:function(e){return r.a.createElement(xt.c,Object.assign({},e.queryProps,{render:function(e){var t=e.recipes;return r.a.createElement(_t,{options:i(t),onAdd:o})}}))}}),r.a.createElement(m.a,null))})},Lt=[{priceType:f.s.Delivery,label:Object(Oe.i18nMark)("Delivery sale")},{priceType:f.s.Inhouse,label:Object(Oe.i18nMark)("Local sale")}],Nt=function(e){var t=e.recipeType,a=e.recipeId;return r.a.createElement(r.a.Fragment,null,Lt.map(function(e){var i=e.priceType,o=e.label;return r.a.createElement(n.Fragment,{key:i},r.a.createElement(It,{priceType:i,label:p.d._(o)}),r.a.createElement(m.a,null),t===f.r.Main&&r.a.createElement(St,{priceType:i,recipeId:a}))}))},Dt=a(99);function Pt(){var e=Object(se.a)(["\n  query GMenuRecipeList(\n    $branchId: ID!\n    $categoryId: ID\n    $categoryType: WareCategoryTypeEnum\n  ) {\n    recipes(\n      companyBranch: $branchId\n      wareCategory: $categoryId\n      wareCategoryType: $categoryType\n    ) {\n      ...GMenuRecipe\n    }\n  }\n  ","\n"]);return Pt=function(){return e},e}var Bt=fe()(Pt(),Dt.c),Ft=Object(Et.a)(Bt),Wt=function(e){var t=e.categoryType,a=e.filterRecipes,n=e.onAdd;return r.a.createElement(We.a,{observe:!0,render:function(e){return r.a.createElement(Ft,Object.assign({},e.getQueryProps({categoryType:t}),{fetchPolicy:"cache-and-network",render:function(e){var t=e.recipes;return r.a.createElement(_t,{options:a(t),onAdd:n})}}))}})},qt=l.b.div.withConfig({displayName:"CategoryRecipesView__Container",componentId:"sc-1g4q35k-0"})(["display:flex;flex-direction:column;height:calc(100% - 2rem);width:100%;"]),Mt=l.b.div.withConfig({displayName:"CategoryRecipesView__FormFixedRow",componentId:"sc-1g4q35k-1"})(["flex:0 0 auto;"]),Vt=l.b.div.withConfig({displayName:"CategoryRecipesView__FormStretchedRow",componentId:"sc-1g4q35k-2"})(["flex:1 1 0;margin:1rem 0 0 1rem;"]),At=Object(te.SortableContainer)(Vt),Ht=l.b.div.withConfig({displayName:"CategoryRecipesView__RecipeRow",componentId:"sc-1g4q35k-3"})(["display:grid;grid-gap:1rem;grid-template-columns:","px 100px 3fr 1fr 1fr 50px;"],S.d.ButtonColumnWidthPx),Kt=l.b.div.withConfig({displayName:"CategoryRecipesView__MoveCell",componentId:"sc-1g4q35k-4"})(["cursor:move;"]),Ut=Object(te.SortableElement)(function(e){var t=e.recipe,a=e.onRemove,n=Lt.map(function(e){var a=e.priceType,n=e.label,i=t.prices.find(Ke.a.pathEq(["priceType","enum"],a));return r.a.createElement(Kt,{key:a},r.a.createElement(q,null,p.d._(n)),i?i.price.formattedValue:r.a.createElement("i",null,p.d._("Not set").toLocaleLowerCase()))});return r.a.createElement(Ht,null,r.a.createElement("div",null,r.a.createElement(P,{onClick:a})),r.a.createElement(Kt,null,t.code),r.a.createElement(Kt,null,t.nameLabel,r.a.createElement(q,null,t.internalNote)),n,r.a.createElement(Q.a,null))}),Gt=function(e){var t=e.categoryType;return r.a.createElement(Re.Field,{field:"recipes"},function(e){var a=e.value,n=function(){var t=Object(y.a)(E.a.mark(function t(n){var r,i,o;return E.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.newIndex,i=n.oldIndex,r!==i){t.next=3;break}return t.abrupt("return");case 3:o=Object(te.arrayMove)(a,i,r),e.setValue(o);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(qt,null,r.a.createElement(Mt,null,r.a.createElement(Wt,{categoryType:t,filterRecipes:Ke.a.without(e.value),onAdd:function(t){return e.setValue(e.value.concat(t))}})),r.a.createElement(At,{lockAxis:"y",lockToContainerEdges:!0,onSortEnd:n},r.a.createElement(dt,{items:e.value,heightStretch:!0,rowHeight:60,renderItem:function(t,a){return r.a.createElement(Ut,{recipe:t,onRemove:function(){e.setValue(Ke.a.reject(Ke.a.propEq("id",t.id),e.value))},index:a})},rowCount:e.value.length})))})},zt=l.b.div.withConfig({displayName:"MenuCategoryPage__FormContainer",componentId:"sc-154ix5u-0"})(["display:flex;flex-direction:column;height:100%;width:100%;"]),Qt=l.b.div.withConfig({displayName:"MenuCategoryPage__FormFixedRow",componentId:"sc-154ix5u-1"})(["flex:0 0 8rem;"]),$t=l.b.div.withConfig({displayName:"MenuCategoryPage__FormStretchedRow",componentId:"sc-154ix5u-2"})(["flex:1 1 0;min-height:0;position:relative;"]),Jt=function(e){var t=e.categoryId,a=e.categoryType;return r.a.createElement(ut,{categoryId:t,categoryType:a},r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{pageTitle:Te(a),hideLogoutWidget:!0,useBackButton:!0}),r.a.createElement(g.a,null,r.a.createElement(zt,null,r.a.createElement(Qt,null,r.a.createElement(u.a,null,r.a.createElement(Ye,{categoryType:a}))),r.a.createElement($t,null,r.a.createElement(u.a,{stretchToParent:!0},r.a.createElement(O.a,null,r.a.createElement(de.Trans,{id:"Recipes assigned to this category"})),r.a.createElement(Gt,{categoryType:a}))))),r.a.createElement(Ce,null,r.a.createElement(F.a,{mutationName:null===t?"createWareCategory":"updateWareCategory"},r.a.createElement(Le,{isCreate:null===t})))))},Xt=l.b.div.withConfig({displayName:"DataTableContainer",componentId:"sc-1ammizr-0"})(["height:calc(100% - 4.5rem);padding-top:2rem;"]),Yt=Object(C.b)(function(){var e=Object(j.c)().settings.menu.recipe,t=Object(f.K)({branchId:e.branchId}),a=t.data,n=t.loading;return r.a.createElement(Fe.a,{width:17},r.a.createElement(He.a,{key:e.branchId,onChange:function(t){e.setCategoryFilter(t?t.id:null)},options:function(){if(!a||!a.categories)return[];var e=Ke.a.groupBy(function(e){return e.categoryType.enum.toString()},a.categories);return Object.keys(e).map(function(t){return{label:Te(t),options:e[t]}})}(),isMulti:!1,isClearable:!0,isSearchable:!0,isLoading:n,placeholder:p.d._("Filter by category"),getOptionValue:Ke.a.prop("id"),getOptionLabel:Ke.a.prop("nameLabel")}))}),Zt=a(149),ea=a(7649),ta=function(e){var t=e.modelType,a=Object(j.c)().settings.menu[t],n=Object(Tt.useDebounceCallback)(a.setFilterInput);return r.a.createElement($e.a,{icon:Zt.i},r.a.createElement(Fe.a,{width:17},r.a.createElement(ea.a,{defaultValue:a.filterInput,inputFullWidth:!0,onChange:function(e){return n(e.target.value)},placeholder:p.d._("Filter by name or code")})))},aa=function(e){var t=e.to,a=e.from,n=Object(_.a)(e,["to","from"]);return r.a.createElement(i.Redirect,Object.assign({to:Object(x.b)(t,a||"".concat(location.pathname,"/")),from:a},n))},na=a(311),ra=function(e){function t(){var e,a;Object(J.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(Y.a)(this,(e=Object(Z.a)(t)).call.apply(e,[this].concat(r)))).state={isOpen:!1,recipeType:null},a.onClose=function(){a.setState({isOpen:!1})},a.onOpen=function(){a.setState({isOpen:!0})},a.onSelect=function(e){return function(){a.setState({isOpen:!0,recipeType:e})}},a}return Object(ee.a)(t,e),Object(X.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.isOpen,n=t.recipeType;return r.a.createElement(r.a.Fragment,null,null!==n&&r.a.createElement(aa,{to:Object(na.b)("create",n),push:!0}),r.a.createElement(ce,{onClick:function(t){t.preventDefault(),e.onOpen()}}),r.a.createElement(Ze.c,{open:a,onClose:this.onClose},r.a.createElement(Ze.f,null,"Select item type"),r.a.createElement(L.a,{onClick:this.onSelect(f.r.Main)},r.a.createElement(de.Trans,{id:"Ware"})),r.a.createElement(L.a,{onClick:this.onSelect(f.r.SideDish)},r.a.createElement(de.Trans,{id:"Sidedish"})),r.a.createElement(L.a,{onClick:this.onSelect(f.r.Cover)},r.a.createElement(de.Trans,{id:"Cover"}))))}}]),t}(n.Component),ia=a(7722),oa=a(7963),ca=function(e){var t=e.recipes,a=e.onToggle,n=e.onRemove,i=e.showEditColumn,o=void 0===i||i,c=e.showRemoveColumn,l=void 0!==c&&c,u=e.showVisibilityColumn,d=void 0===u||u,s=e.showTypeColumn,m=void 0!==s&&s,h=e.isLoading,g=void 0!==h&&h,v=e.heightStretch,b={isLoading:g,items:t,heightStretch:void 0!==v&&v,noRowsRenderer:function(){return g?r.a.createElement(oa.a,null):r.a.createElement(O.a,null,p.d._("No recipes has been found"))}};return r.a.createElement(V,b,o&&r.a.createElement(R.d,{dataKey:"id",width:S.d.ButtonColumnWidthPx,minWidth:S.d.ButtonColumnWidthPx,cellRenderer:A({canQuery:"recipe"},H),cellDataGetter:function(e){var t=e.rowData;return Object(na.b)(t.id,t.recipeType.enum)}}),l&&r.a.createElement(R.d,{dataKey:"id",width:S.d.ButtonColumnWidthPx,minWidth:S.d.ButtonColumnWidthPx,cellRenderer:K,columnData:{onRemove:n}}),d&&r.a.createElement(R.d,{dataKey:"visible",width:S.d.ButtonColumnWidthPx,minWidth:S.d.ButtonColumnWidthPx,cellRenderer:A({canMutate:"updateRecipe"},U),columnData:{onToggle:a}}),m&&r.a.createElement(R.d,{dataKey:"recipeType",width:100,label:p.d._("Type"),cellRenderer:ua}),r.a.createElement(R.d,{dataKey:"code",width:100,label:p.d._("Code")}),r.a.createElement(R.d,{dataKey:"nameLabel",width:600,flexGrow:2,label:p.d._("Name"),cellRenderer:G,columnData:{noteKey:"internalNote"}}),r.a.createElement(R.d,{dataKey:"prices",width:150,label:p.d._("Delivery sale"),cellRenderer:la,columnData:{priceType:f.s.Delivery}}),r.a.createElement(R.d,{dataKey:"prices",width:150,label:p.d._("Local sale"),cellRenderer:la,columnData:{priceType:f.s.Inhouse}}),r.a.createElement(R.d,{dataKey:"availableAmount",label:p.d._("recipe.list.availableAmount",{},{defaults:"Stock"}),width:100}),r.a.createElement(R.d,{dataKey:"internalNote",label:p.d._("Internal note"),width:200}))};function la(e){var t=e.cellData,a=e.columnData.priceType,n=t.find(Ke.a.pathEq(["priceType","enum"],a));return n?n.price.formattedValue:r.a.createElement("i",null,p.d._("Not set").toLocaleLowerCase())}function ua(e){var t=e.rowData.recipeType.enum;return t===f.r.SideDish?p.d._("Sidedish").toLocaleLowerCase():t===f.r.Cover?p.d._("Cover").toLocaleLowerCase():p.d._("Ware").toLocaleLowerCase()}var da=Object(C.b)(function(){var e=Object(j.c)().settings,t=Object(k.a)(Bt,Object(w.a)({},e.getQueryProps({categoryId:e.menu.recipe.categoryFilterId}),{suspend:!1,fetchPolicy:"cache-and-network"})),a=t.data,n=t.loading,i=Object(C.c)(function(){if(!a||!a.recipes||0===a.recipes.length)return[];var t=Object(ia.a)(e.menu.recipe.filterInput);return a.recipes.filter(Ke.a.cond([[Ke.a.propSatisfies(t,"code"),Ke.a.T],[Ke.a.propSatisfies(t,"nameLabel"),Ke.a.T]]))},[a&&a.recipes]);return r.a.createElement(ca,{recipes:i,onToggle:e.menu.recipe.changeVisibility,isLoading:n,heightStretch:!0,showTypeColumn:!0})}),sa=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{pageTitle:p.d._("Recipe overview"),useBackButton:!0}),r.a.createElement(g.a,null,r.a.createElement(u.a,{stretchToParent:!0},r.a.createElement(s.a,{justify:"start"},r.a.createElement(d.a,null,r.a.createElement(v.a,{width:20})),r.a.createElement(d.a,null,r.a.createElement(ta,{modelType:"recipe"})),r.a.createElement(d.a,null,r.a.createElement(Yt,null))),r.a.createElement(F.a,{mutationName:"createRecipe"},r.a.createElement(ra,null)),r.a.createElement(Xt,null,r.a.createElement(da,null)))))},ma=function(e){var t=e.type,a=e.isMain,n=e.isSideDish,i=e.isCover,o=e.children;return!0===a&&t===f.r.Main||!0===n&&t===f.r.SideDish||!0===i&&t===f.r.Cover?r.a.createElement(r.a.Fragment,null,o):null},fa=Object(C.b)(function(e){var t=e.categoryType,a=e.currentCategories,n=e.addButtonText,i=e.onAdd,o=Object(j.c)().settings,c=Object(k.a)(le.a,Object(w.a)({},o.getQueryProps({categoryType:t}),{fetchPolicy:"cache-and-network",suspend:!1})),l=c.data,u=c.loading,d=l&&l.categories||[];return r.a.createElement(_t,{isLoading:u,options:Ke.a.without(a,d),addButtonText:n,onAdd:i})}),pa=function(e){var t=e.categoryType,a=e.addButtonText,n=e.noRowsText,i=e.field;return r.a.createElement(Re.Field,{field:i},function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ie,{categories:e.value,showRemoveColumn:!0,showEditColumn:!1,showHeader:!1,onRemove:function(t){return e.setValue(Ke.a.reject(Ke.a.propEq("id",t),e.value))},noRowsDisplay:r.a.createElement(z,{text:n})}),r.a.createElement(fa,{addButtonText:a,categoryType:t,currentCategories:e.value,onAdd:function(t){return e.setValue(e.value.concat(t))}}))})},ha=function(e){var t=e.field,a=void 0===t?"code":t,n=(e.icon,e.isRequired,Object(_.a)(e,["field","icon","isRequired"]));return r.a.createElement($e.a,{label:p.d._("Code").toLocaleLowerCase(),labelWidth:7},r.a.createElement(Fe.a,{width:9},r.a.createElement(Qe.a,Object.assign({field:a,inputFullWidth:!0,isRequired:!0,validatioName:p.d._("Code")},n))))},ga=function(e){var t=e.field,a=void 0===t?"descriptionLabel":t,n=(e.icon,Object(_.a)(e,["field","icon"]));return r.a.createElement($e.a,{label:p.d._("Public note").toLocaleLowerCase(),labelWidth:7},r.a.createElement(Qe.a,Object.assign({field:a,inputFullWidth:!0},n)))},va=a(313);function ba(){var e=Object(se.a)(["\n  query GAllergens {\n    allergens {\n      ...GAllergen\n    }\n  }\n  ","\n"]);return ba=function(){return e},e}var Ea=fe()(ba(),va.a),ya=Object(Et.a)(Ea),wa=l.b.div.withConfig({displayName:"AllergenIndicator__AllergenBox",componentId:"sc-135ffpv-0"})(["float:left;width:2.3rem;height:2.3rem;border:1px solid ",";margin:0.3rem 0.6rem 0.3rem ",";font-size:1.5rem;text-align:center;vertical-align:middle;cursor:default;",";"],S.a.greyMiddle,S.d.MarginAroundFormComponents,function(e){var t=e.active;return Object(l.a)(["color:",";background-color:",";"],t?S.a.black:S.a.greyMiddle,t?S.a.yellow:S.a.white)}),Ca=function(e){var t=e.selected,a=e.onToggle;return r.a.createElement(ya,{render:function(e){var n=e.allergens;return r.a.createElement(r.a.Fragment,null,n.map(function(e){var n={active:t.includes(e.enum),onClick:a&&function(){return a(e.enum)}};return r.a.createElement(wa,Object.assign({key:e.enum,title:e.code},n),e.category)}))}})},ka=Ke.a.pipe(Ke.a.map(Ke.a.prop("allergens")),Ke.a.flatten,Ke.a.uniq),Oa=function(){return r.a.createElement(Re.Field,{field:"ingredients"},function(e){var t=e.value,a=ka(t);return r.a.createElement(Ca,{selected:a})})},ja=function(e){var t=e.recipeType,a=t===f.r.Main;return r.a.createElement(De,null,r.a.createElement(Pe,null,r.a.createElement(Xe,{placeholder:p.d._("Recipe name")}),r.a.createElement(ha,{placeholder:p.d._("Recipe code")}),r.a.createElement(Je,{placeholder:p.d._("Recipe internal note")}),a&&r.a.createElement(ga,{placeholder:p.d._("Public note for customers, allergens")}),r.a.createElement(ma,{type:t,isMain:!0},r.a.createElement($e.a,{labelWidth:7,icon:"error_outline"},p.d._("Allergens based on stock cards"),r.a.createElement("br",null),r.a.createElement(Oa,null))),r.a.createElement($e.a,{labelWidth:7},r.a.createElement(Be.a,{field:"visible",label:p.d._("To show this recipe")}))),r.a.createElement(Ne.a,{position:"BottomRight"},r.a.createElement(We.a,{render:function(e){var t=e.menu;return r.a.createElement(ze,{confirmText:p.d._("Remove this recipe?"),onDelete:function(e){return t.recipe.deleteRecipe(e)}})}})))},Ia=function(e){var t=e.recipeId,a=e.recipeType,n=e.children,i=ct();return r.a.createElement(ot,{isCreate:null===t,onCreate:function(e){return i.recipe.createRecipe(e,a)},onUpdate:function(e){return i.recipe.updateRecipe(e)},getDefaultValues:function(){return _a(a)},loadDefaults:Object(y.a)(E.a.mark(function e(){var t,n,r,o;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.recipe.queryDefaults();case 2:return t=e.sent,n=t.vats,r=t.currencyCode,(o=Object(w.a)({},_a(a))).prices=Ta(function(e){return{value:0,vatId:n[e],currencyCode:r}}),e.abrupt("return",o);case 8:case"end":return e.stop()}},e,this)})),loadValues:Object(y.a)(E.a.mark(function e(){var a,n;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.client.query({query:xt.b,variables:{recipeId:t},fetchPolicy:"no-cache"});case 2:return a=e.sent,n=a.data,e.abrupt("return",Ra(n.recipe));case 5:case"end":return e.stop()}},e,this)}))},n)};function Ta(e){return[f.s.Delivery,f.s.Inhouse].reduce(function(t,a){return t[a]=e(a),t},{})}function _a(e){return{id:"NEW",code:"",nameLabel:"",internalNote:"",descriptionLabel:"",image:"",visible:!0,recipeType:{enum:e},sourcePrices:[],prices:Ta(function(){return{value:0,vatId:null,currencyCode:""}}),sourceAssociatedRecipes:[],associatedRecipes:[],sourceIngredients:[],ingredients:[],sideDishes:[],categories:[]}}function Ra(e){return Object(w.a)({},e,{associatedRecipes:e.sourceAssociatedRecipes.map(function(e){var t=e.priceType,a=e.recipe;return{warePriceType:t.enum,nameLabel:a.nameLabel,associatedRecipe:a.id,formattedPrice:"?"}}),ingredients:e.sourceIngredients.map(function(e){var t=e.quantity,a=e.stockItem,n=a.id,r=a.label,i=a.allergens;return{stockItem:n,label:r,quantity:t,unitLabel:a.wareUnit.code,allergens:i.map(Ke.a.prop("enum"))}}),prices:Ta(function(t){var a=e.sourcePrices.find(Ke.a.pathEq(["priceType","enum"],t));return a?{value:a.price.value,vatId:a.vat.id,currencyCode:a.price.currency.code}:{value:0,vatId:null,currencyCode:""}})})}var xa=function(e){var t=e.ingredients,a=e.onRemove,n=e.isLoading,i=void 0!==n&&n;return r.a.createElement(V,{isLoading:i,items:t,disableHeader:!0,noRowsRenderer:function(){return r.a.createElement(z,{text:p.d._("Recipe has no ingredients")})}},r.a.createElement(R.d,{dataKey:"stockItem",width:S.d.ButtonColumnWidthPx,minWidth:S.d.ButtonColumnWidthPx,cellRenderer:K,columnData:{onRemove:a}}),r.a.createElement(R.d,{dataKey:"label",width:300,label:p.d._("Name")}),r.a.createElement(R.d,{dataKey:"quantity",width:60,label:p.d._("Quantity"),cellRenderer:function(e){var t=e.rowIndex;return r.a.createElement(Fe.a,{width:2.5},r.a.createElement(Qe.a,{field:["ingredients",t,"quantity"],validate:Sa,inputFullWidth:!0}))}}),r.a.createElement(R.d,{dataKey:"unitLabel",width:100,label:p.d._("Ware unit")}))};function Sa(e){var t=p.d._("Quantity");return mt.a.isEmpty(e+"")?p.d._("{fieldName} must be entered",{fieldName:t}):mt.a.isFloat(e+"",{min:0})?null:p.d._("{fieldName} must be a positive number",{fieldName:t})}var La=a(262),Na=Ke.a.differenceWith(function(e,t){return e.id===t.stockItem}),Da=function(){return r.a.createElement(We.a,{observe:!1,render:function(e){return r.a.createElement(Re.Field,{field:"ingredients"},function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(xa,{ingredients:t.value,onRemove:function(e){t.setValue(Ke.a.reject(Ke.a.propEq("stockItem",e),t.value))}}),r.a.createElement(La.b,Object.assign({},e.queryProps,{render:function(e){var a=e.stockItems;return r.a.createElement(_t,{addButtonText:p.d._("Add ingredient"),options:Na(a,t.value),onAdd:function(e){t.setValue(Object($.a)(t.value).concat([{stockItem:e.id,label:e.nameLabel,quantity:1,unitLabel:e.wareUnit.code,allergens:e.allergens.map(Ke.a.prop("enum"))}]))}})}})))})}})},Pa=Object(l.b)("div").withConfig({displayName:"MenuRecipePage__FormContainer",componentId:"yp6ac3-0"})(["margin:0 1.25rem 0 0;"]),Ba=function(e){var t=e.recipeId,a=e.recipeType;return r.a.createElement(Ia,{recipeId:t,recipeType:a},r.a.createElement(Pa,null,r.a.createElement(h.a,{width:16,pageTitle:_e(a),hideLogoutWidget:!0,useBackButton:!0},r.a.createElement(u.a,null,r.a.createElement(ja,{recipeType:a})),r.a.createElement(u.a,null,r.a.createElement(Nt,{recipeType:a,recipeId:t})),r.a.createElement(u.a,null,r.a.createElement(O.a,null,r.a.createElement(de.Trans,{id:"Recipe ingredients"})),r.a.createElement(m.a,null),r.a.createElement(Da,null)),r.a.createElement(ma,{type:a,isMain:!0},r.a.createElement(u.a,null,r.a.createElement(O.a,null,r.a.createElement(de.Trans,{id:"Sidedish categories"})),r.a.createElement(q,null,r.a.createElement(de.Trans,{id:"These sidedish are presented with recipe"})),r.a.createElement(pa,{categoryType:f.r.SideDish,field:"sideDishes",addButtonText:p.d._("Attach sidedish category"),noRowsText:p.d._("Recipe has no sidedish category attached")})),r.a.createElement(u.a,null,r.a.createElement(O.a,null,r.a.createElement(de.Trans,{id:"Category assignments"})),r.a.createElement(q,null,r.a.createElement(de.Trans,{id:"Recipe is in these categories"})),r.a.createElement(pa,{categoryType:f.r.Main,field:"categories",addButtonText:p.d._("Add to category"),noRowsText:p.d._("Recipe is not in any category")})))),r.a.createElement(Ce,null,r.a.createElement(F.a,{mutationName:null===t?"createRecipe":"updateRecipe"},r.a.createElement(Le,{isCreate:null===t})))))},Fa=a(88),Wa=a.n(Fa),qa=a(123),Ma=function(e){var t=e.wareUnit,a=e.quantity,n=e.onConfirm;return r.a.createElement(L.a,{disabled:null===t,onClick:n},t?r.a.createElement(de.Trans,{id:"Add {0} {1}",values:{0:Wa()(a).format(qa.h),1:t.code}}):r.a.createElement(de.Trans,{id:"No stock card selected"}))},Va=r.a.forwardRef(function(e,t){var a=e.value,n=e.onFilter,i=e.onConfirm;return r.a.createElement($e.a,{label:p.d._("Stock card"),labelWidth:7},r.a.createElement(ea.a,{ref:t,autoFocus:!0,placeholder:"".concat(p.d._("Code").toLocaleLowerCase()," / ").concat(p.d._("PLU")," / ").concat(p.d._("Title").toLocaleLowerCase()),value:a,onChange:function(e){n(e.target.value)},onKeyPressCapture:function(e){"Enter"===e.key&&(e.preventDefault(),i())}}))}),Aa=r.a.forwardRef(function(e,t){var a=e.enabled,n=e.onChange,i=e.onConfirm;return r.a.createElement(ea.a,{ref:t,disabled:!a,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){var t=Wa()(e.target.value).value();n(t)}),onKeyPressCapture:function(e){"Enter"===e.key&&(e.preventDefault(),i())}})}),Ha=function(e){var t=e.stockItems,a=e.searchValue,n=e.onSelect;return r.a.createElement(Xt,null,r.a.createElement(V,{items:t,heightStretch:!1},r.a.createElement(R.d,{dataKey:"id",width:S.d.ButtonColumnWidthPx,minWidth:S.d.ButtonColumnWidthPx,cellRenderer:Ka,columnData:{onSelect:n}}),r.a.createElement(R.d,{dataKey:"quantity",width:100,label:p.d._("Card stock"),cellRenderer:za}),r.a.createElement(R.d,{dataKey:"code",width:100,label:p.d._("Card code"),cellRenderer:Ga(a)}),r.a.createElement(R.d,{dataKey:"nameLabel",width:300,label:p.d._("Card name"),cellRenderer:Ga(a)}),r.a.createElement(R.d,{dataKey:"note",width:300,label:p.d._("Card note")})))};function Ka(e){var t=e.rowData,a=e.columnData.onSelect;return r.a.createElement(L.a,{iconName:"done",width:S.d.ButtonHeight,height:S.d.ButtonHeight,onClick:function(){return a(t)}})}var Ua=l.b.span.withConfig({displayName:"StockDepositResultTable__HighlightedValue",componentId:"sc-3qukvh-0"})(["background-color:",";"],S.a.yellow);function Ga(e){return function(t){var a=t.cellData,n=a.toLocaleLowerCase().indexOf(e.toLocaleLowerCase());if(-1===n)return a;var i=a.substring(0,n),o=a.substring(n,n+e.length),c=a.substring(n+e.length);return r.a.createElement(r.a.Fragment,null,i,r.a.createElement(Ua,null,o),c)}}function za(e){var t=e.cellData,a=e.rowData;return"".concat(t," ").concat(a.wareUnit.code)}var Qa=function(e){function t(){var e,a;Object(J.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(Y.a)(this,(e=Object(Z.a)(t)).call.apply(e,[this].concat(i)))).state={targetStockItem:null,filteredStockItems:[],searchValue:"",inputQuantity:0},a.filterInputRef=r.a.createRef(),a.quantityInputRef=r.a.createRef(),a.onFilter=function(e){if(""!==e.trim()){var t=Object(ia.a)(e),n=a.props.stockItems.filter(Ke.a.cond([[Ke.a.propEq("plu",e),Ke.a.T],[Ke.a.propSatisfies(t,"code"),Ke.a.T],[Ke.a.propSatisfies(t,"nameLabel"),Ke.a.T]])),r=null;1===n.length&&(r=Ke.a.head(n)),a.setState({filteredStockItems:n,searchValue:e,targetStockItem:r})}else a.setState({filteredStockItems:[],searchValue:"",targetStockItem:null})},a.onConfirmFilter=function(){1===a.state.filteredStockItems.length&&a.quantityInputRef.current.focus()},a.onQuantity=function(e){a.setState({inputQuantity:e})},a.onSelectStockItem=function(e){a.setState({targetStockItem:e,filteredStockItems:[e]},function(){a.quantityInputRef.current.focus()})},a.onConfirm=function(){var e=a.state,t=e.targetStockItem,n=e.inputQuantity;t&&0!==n&&a.props.onDeposit(t,n),a.setState({targetStockItem:null,searchValue:"",inputQuantity:0},function(){a.quantityInputRef.current.value="",a.filterInputRef.current.focus()})},a}return Object(ee.a)(t,e),Object(X.a)(t,[{key:"componentDidUpdate",value:function(e){e.stockItems!==this.props.stockItems&&this.onFilter(this.state.searchValue)}},{key:"render",value:function(){var e=this.state,t=e.searchValue,a=e.filteredStockItems,n=e.targetStockItem,i=e.inputQuantity,o=""!==t.trim(),c=0===a.length,l=a.length>1;return r.a.createElement(r.a.Fragment,null,r.a.createElement(De,null,r.a.createElement(Pe,null,r.a.createElement(Va,{onFilter:this.onFilter,onConfirm:this.onConfirmFilter,value:t,ref:this.filterInputRef})),r.a.createElement(Pe,null,r.a.createElement(Aa,{enabled:null!==n,onChange:this.onQuantity,onConfirm:this.onConfirm,ref:this.quantityInputRef})),r.a.createElement(Pe,null,r.a.createElement(Ma,{cardName:n?n.nameLabel:"",quantity:i,wareUnit:n?n.wareUnit:null,onConfirm:this.onConfirm}))),r.a.createElement(O.a,null,o&&l&&r.a.createElement(de.Trans,{id:"Continue typing to find single stock card or select one from the list"}),o&&c&&r.a.createElement(de.Trans,{id:"No stock card found from entered search value"}),o&&n&&r.a.createElement(de.Trans,{id:"Stock card <0>{0}</0> is selected",values:{0:n.nameLabel},components:[r.a.createElement("b",null)]})),o&&r.a.createElement(Ha,{searchValue:t,stockItems:a,onSelect:this.onSelectStockItem}))}}]),t}(r.a.Component),$a=Object(C.b)(function(e){var t=e.children,a=Object(j.c)().settings,n=Object(f.L)(void 0,a.queryProps),r=n.data,i=n.loading,o=Object(f.E)();return t(i?[]:r.stockItems,function(e,t){o({stockItem:e.id,quantityChange:t})})}),Ja=function(e){return r.a.createElement(h.a,{width:16,pageTitle:p.d._("Stock deposit"),useBackButton:!0},r.a.createElement(u.a,null,r.a.createElement(v.a,null),r.a.createElement($a,null,function(e,t){return r.a.createElement(Qa,{stockItems:e,onDeposit:t})})))},Xa=a(297),Ya=function(e){var t=e.stockItems,a=e.isLoading;return r.a.createElement(V,{items:t,heightStretch:!0,noRowsRenderer:function(){return a?r.a.createElement(Xa.a,null):r.a.createElement("h3",null,r.a.createElement(de.Trans,{id:"Selected branch has no stock cards"}))}},r.a.createElement(R.d,{dataKey:"id",width:S.d.ButtonColumnWidthPx,minWidth:S.d.ButtonColumnWidthPx,cellRenderer:A({canQuery:"stockItem"},H)}),r.a.createElement(R.d,{dataKey:"code",width:100,label:p.d._("Card code")}),r.a.createElement(R.d,{dataKey:"nameLabel",width:300,minWidth:30,flexGrow:2,label:p.d._("Card name")}),r.a.createElement(R.d,{dataKey:"quantity",width:100,label:p.d._("Card stock"),cellRenderer:Za}),r.a.createElement(R.d,{dataKey:"allowNegative",width:300,label:p.d._("Negative stock"),cellRenderer:en}),r.a.createElement(R.d,{dataKey:"note",width:300,label:p.d._("Card note")}))};function Za(e){var t=e.cellData,a=e.rowData;return"".concat(t," ").concat(a.wareUnit.code)}function en(e){return!0===e.cellData?r.a.createElement(de.Trans,{id:"Permitted"}):r.a.createElement(de.Trans,{id:"Forbidden"})}var tn=Object(C.b)(function(){var e=Object(j.c)().settings,t=Object(k.a)(La.a,Object(w.a)({},e.queryProps,{suspend:!1})),a=t.data,n=t.loading,i=Object(C.c)(function(){if(!a||!a.stockItems||0===a.stockItems.length)return[];var t=e.menu.stock.filterInput,n=Object(ia.a)(t);return a.stockItems.filter(Ke.a.cond([[Ke.a.propEq("plu",t),Ke.a.T],[Ke.a.propSatisfies(n,"code"),Ke.a.T],[Ke.a.propSatisfies(n,"nameLabel"),Ke.a.T]]))},[a&&a.stockItems]);return r.a.createElement(Ya,{stockItems:i,isLoading:n})}),an=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{pageTitle:p.d._("Stock overview"),useBackButton:!0}),r.a.createElement(g.a,null,r.a.createElement(u.a,{stretchToParent:!0},r.a.createElement(s.a,{justify:"start"},r.a.createElement(d.a,null,r.a.createElement(v.a,{width:20})),r.a.createElement(d.a,null,r.a.createElement(ta,{modelType:"stock"}))),r.a.createElement(F.a,{mutationName:"createStockItem"},r.a.createElement(ce,{routeTo:"create"})),r.a.createElement(Xt,null,r.a.createElement(tn,null)))))},nn=a(447);function rn(){var e=Object(se.a)(["\n  query GMenuStockDefaults($branchId: ID!) {\n    companyBranch(id: $branchId) {\n      id\n      allowNegative: stockItemsCanBeNegative\n    }\n  }\n"]);return rn=function(){return e},e}function on(){var e=Object(se.a)(["\n  query GMenuStockForm($stockId: ID!) {\n    stockItem(id: $stockId) {\n      id\n      code\n      plu\n      note\n      nameLabel: label\n      allowNegative\n      wareUnit {\n        ...GWareUnit\n      }\n      allergens {\n        ...GAllergen\n      }\n      companyBranch {\n        id\n        allowNegative: stockItemsCanBeNegative\n      }\n    }\n  }\n  ","\n  ","\n"]);return on=function(){return e},e}var cn=fe()(on(),va.a,nn.a),ln=fe()(rn()),un=(Object(Et.a)(cn),function(e){var t=e.stockId,a=e.children,n=ct();return r.a.createElement(ot,{isCreate:null===t,onCreate:function(e){return n.stock.createItem(e)},onUpdate:function(e){return n.stock.updateItem(e)},getDefaultValues:dn,loadDefaults:Object(y.a)(E.a.mark(function e(){var t,a;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.client.query({query:ln,variables:{branchId:n.stock.branchId},fetchPolicy:"no-cache"});case 2:return t=e.sent,a=t.data,e.abrupt("return",{allowNegativeDefault:sn(a.companyBranch.allowNegative)});case 5:case"end":return e.stop()}},e,this)})),loadValues:Object(y.a)(E.a.mark(function e(){var a,r;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.client.query({query:cn,variables:{stockId:t},fetchPolicy:"no-cache"});case 2:return a=e.sent,r=a.data,e.abrupt("return",{id:(i=r.stockItem).id,internalNote:"TBD",nameLabel:i.nameLabel,code:i.code,note:i.note,plu:i.plu||"",wareUnit:i.wareUnit.enum,allergens:i.allergens.map(Ke.a.prop("enum")),allowNegative:i.allowNegative,allowNegativeDefault:sn(i.companyBranch.allowNegative)});case 5:case"end":return e.stop()}var i},e,this)}))},a)});function dn(){return{id:"NEW",internalNote:"",nameLabel:"",code:"",plu:"",note:"",wareUnit:null,allergens:[],allowNegative:f.i.Default,allowNegativeDefault:f.i.Default}}function sn(e){return e?f.i.Default:f.i.Disabled}var mn=function(e){var t=e.field,a=void 0===t?"allergens":t,n=e.icon,i=void 0===n?"error_outline":n;return r.a.createElement(Re.Field,{field:a},function(e){return r.a.createElement($e.a,{icon:i,labelWidth:7},r.a.createElement(Ca,{selected:e.value,onToggle:function(t){var a=e.value;a.includes(t)?e.setValue(Ke.a.without([t],a)):e.setValue(Object($.a)(a).concat([t]))}}))})};var fn=[{type:f.i.Enabled,label:Object(Oe.i18nMark)("Permit")},{type:f.i.Disabled,label:Object(Oe.i18nMark)("Forbid")}],pn=function(e){!function(e){if(null==e)throw new TypeError("Cannot destructure undefined")}(e);var t=Object(n.useMemo)(function(){return" (".concat(p.d._("Is default setting").toLocaleLowerCase(),")")},[]);return r.a.createElement(Re.FormApi,null,function(e){var a=e.values.allowNegativeDefault;return r.a.createElement($e.a,{label:p.d._("Negative stock"),labelWidth:7},r.a.createElement(vt.a,{field:"allowNegative",items:fn,formatItem:function(e){return e.type===a?r.a.createElement("span",null,p.d._(e.label),r.a.createElement("i",null,t)):p.d._(e.label)},getItemId:function(e){return e.type}}))})},hn=function(e){var t=e.field,a=void 0===t?"plu":t,n=e.icon,i=void 0===n?"fingerprint":n,o=Object(_.a)(e,["field","icon"]);return r.a.createElement($e.a,{icon:i,labelWidth:7},r.a.createElement(Fe.a,{width:9},r.a.createElement(Qe.a,Object.assign({field:a,inputFullWidth:!0},o))))},gn=a(7931);function vn(){var e=Object(se.a)(["\n  query GWareUnits {\n    wareUnits {\n      id\n      code\n      enum\n    }\n  }\n"]);return vn=function(){return e},e}var bn=fe()(vn()),En=Object(Et.a)(bn),yn=function(e){var t=e.field,a=void 0===t?"wareUnit":t,n=e.icon,i=void 0===n?"select_all":n,o=Object(_.a)(e,["field","icon"]);return r.a.createElement(En,{renderLoading:!1,render:function(e,t){var n=e.wareUnits,c=t.loading;return r.a.createElement($e.a,{icon:i,labelWidth:7},r.a.createElement(gn.a,Object.assign({field:a,options:n||[],isLoading:c,isRequired:!0,validatioName:p.d._("Ware unit"),getOptionLabel:Ke.a.prop("code"),getOptionValue:Ke.a.prop("enum"),width:12},o)))}})},wn=function(e){return r.a.createElement(De,null,r.a.createElement(Pe,null,r.a.createElement(Xe,{placeholder:p.d._("Card name")}),r.a.createElement(ha,{placeholder:p.d._("Card code")}),r.a.createElement(yn,{placeholder:p.d._("Choose unit")}),r.a.createElement(hn,{placeholder:p.d._("PLU")}),r.a.createElement(Je,{placeholder:p.d._("Card note"),field:"note",label:p.d._("Card note")}),r.a.createElement(mn,null),r.a.createElement(pn,null)),r.a.createElement(Ne.a,{position:"BottomRight"},r.a.createElement(F.a,{mutationName:"destroyStockItem"},r.a.createElement(We.a,{render:function(e){var t=e.menu;return r.a.createElement(ze,{confirmText:p.d._("Remove this card?"),onDelete:function(e){return t.stock.deleteItem(e)}})}}))))},Cn=function(e){var t=e.stockId,a=Object(f.P)({stockId:t}),n=a.data;if(a.loading)return r.a.createElement(M.a,null);var i=n.stockItem.ingredients;return 0===i.length?r.a.createElement(O.a,null,r.a.createElement(de.Trans,{id:"No recipes are using stock card"})):r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,null,r.a.createElement(de.Trans,{id:"Recipes using this card"})),r.a.createElement(V,{items:Object($.a)(i),disableHeader:!0,fullHeight:!0},r.a.createElement(R.d,{dataKey:"",cellDataGetter:function(e){var t=e.rowData;return{pathname:"/settings/menu/recipe/".concat(t.recipe.id),state:{recipeType:t.recipe.recipeType.enum}}},cellRenderer:H,width:100}),r.a.createElement(R.d,{dataKey:"recipe",width:300,label:p.d._("Name"),cellRenderer:function(e){var t=e.rowData;return r.a.createElement(r.a.Fragment,null,t.recipe.nameLabel,r.a.createElement(q,null,t.recipe.descriptionLabel))}})))},kn=function(e){var t=e.stockId;return r.a.createElement(h.a,{width:16,pageTitle:p.d._("Stock card"),hideLogoutWidget:!0,useBackButton:!0},r.a.createElement(un,{stockId:t},r.a.createElement(r.a.Fragment,null,r.a.createElement(Ce,null,r.a.createElement(F.a,{mutationName:null===t?"createStockItem":"updateStockItem"},r.a.createElement(Le,{isCreate:null===t}))),r.a.createElement(u.a,null,r.a.createElement(wn,null),t&&r.a.createElement(W.a,{queryName:"recipes"},r.a.createElement(Cn,{stockId:t}))))))};a.d(t,"MenuRoutes",function(){return On});var On=function(e){var t=e.match;return r.a.createElement(i.Switch,null,r.a.createElement(c.a,{exact:!0,path:t.path,render:function(){return r.a.createElement(i.Redirect,{to:"".concat(t.path,"/category")})}}),r.a.createElement(c.a,{exact:!0,path:"".concat(t.path,"/category"),component:we}),r.a.createElement(c.a,{path:"".concat(t.path,"/category/:categoryId"),render:function(e){var t=e.match.params,a=e.location.state;return r.a.createElement(Jt,{categoryId:"create"===t.categoryId?null:t.categoryId,categoryType:a.categoryType})}}),r.a.createElement(c.a,{exact:!0,path:"".concat(t.path,"/recipe"),component:sa}),r.a.createElement(c.a,{path:"".concat(t.path,"/recipe/:recipeId"),render:function(e){var t=e.match.params,a=e.location.state;return r.a.createElement(Ba,{recipeId:"create"===t.recipeId?null:t.recipeId,recipeType:a.recipeType})}}),r.a.createElement(c.a,{exact:!0,path:"".concat(t.path,"/stock"),component:an}),r.a.createElement(c.a,{path:"".concat(t.path,"/stock/deposit"),component:Ja}),r.a.createElement(c.a,{path:"".concat(t.path,"/stock/:stockId"),render:function(e){var t=e.match.params;return r.a.createElement(kn,{stockId:"create"===t.stockId?null:t.stockId})}}),r.a.createElement(i.Route,{component:o.a}))};t.default=On}}]);
//# sourceMappingURL=176.63e92561.chunk.js.map