(window.webpackJsonpspeedlo=window.webpackJsonpspeedlo||[]).push([[187],{1426:function(e,t,a){"use strict";a.d(t,"a",function(){return m}),a.d(t,"b",function(){return b});var n=a(25),r=a(70),c=a(17),i=a(1409),l=a(49),o=a(0),u=a.n(o),s=a(1413);function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var m=u.a.forwardRef(function(e,t){var a=e.fieldName,n=e.fullWidth,r=e.validate,i=e.addHiddenLabelWithPlaceholderText,o=void 0===i||i,d=Object(c.a)(e,["fieldName","fullWidth","validate","addHiddenLabelWithPlaceholderText"]),m=b({fieldName:a,validate:r});return Object(l.g)(function(){return u.a.createElement(u.a.Fragment,null,u.a.createElement(s.b,Object.assign({},m(),{inputFullWidth:n,ref:t},d)),o&&d.placeholder&&u.a.createElement("label",{hidden:!0,htmlFor:m().id},d.placeholder))})});function b(e){var t=e.fieldName,a=e.validate,c=Object(i.h)(),l=Object(i.e)(t,{validate:a}),o=Object(r.a)(l,2),u=o[0],s=o[1];return function(){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(a,!0).forEach(function(t){Object(n.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},s(),{disabled:c.isSubmitting,invalid:u.touched&&Boolean(u.error)})}}},1430:function(e,t,a){"use strict";a.d(t,"a",function(){return c});var n=a(3);function r(){var e=Object(n.a)(["\n  height: ",";\n"]);return r=function(){return e},e}var c=a(18).c.div(r(),function(e){var t=e.size,a=void 0===t?1:t,n=e.sizeUnit,r=void 0===n?"rem":n;return"".concat(a).concat(r)});c.displayName="VerticalGap"},1457:function(e,t,a){"use strict";a.d(t,"a",function(){return s});var n=a(17),r=a(1617),c=a(0),i=a.n(c),l=a(303),o=a(15),u=a(115),s=function(e){var t=e.onDelete,a=e.confirmText,c=Object(n.a)(e,["onDelete","confirmText"]);return i.a.createElement(l.a,null,i.a.createElement(u.a,Object.assign({icon:r.a,color:o.a.greyMiddle,onClick:function(e){e.preventDefault(),a&&!window.confirm(a)||t()}},c)))}},1462:function(e,t,a){"use strict";a.d(t,"a",function(){return m});var n=a(17),r=a(1674),c=a(1412),i=a(1409),l=a(49),o=a(0),u=a.n(o),s=a(115),d=a(15),m=function(e){var t=e.children,a=e.id,o=void 0===a?"form-submit":a,m=Object(n.a)(e,["children","id"]),b=Object(i.h)();return Object(l.g)(function(){return u.a.createElement(s.a,Object.assign({id:o,type:"submit",color:d.a.green,disabled:b.isSubmitting,icon:b.isValid?void 0:r.a,iconSize:1.1,iconColor:d.a.red},m,{className:Object(c.b)(m.className,"animated","infinite",{heartBeat:b.isSubmitting})}),u.a.createElement(u.a.Fragment,null,t))})}},1504:function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"b",function(){return r});a(1482),a(35);function n(e){return!e.errors||0===Object.keys(e.errors).length}function r(e){return"number"===typeof e?e:Number.parseFloat(e.replace(",","."))}},1514:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n=a(18).c.div.withConfig({displayName:"FlexDiv",componentId:"dwel3j-0"})(["display:flex;"])},1546:function(e,t,a){"use strict";a.d(t,"a",function(){return s});var n=a(17),r=a(21),c=a(1409),i=a(49),l=a(0),o=a.n(l),u=a(1415),s=function(e){var t=e.fieldName,a=Object(n.a)(e,["fieldName"]),l=Object(c.d)(t),s=a.isMulti,d=a.options,m=a.getOptionValue,b=Object(c.h)();return Object(i.g)(function(){return o.a.createElement(u.a,Object.assign({},s?function(){var e=l.value,t=Array.isArray(e)?function(t){return e.includes(m(t))}:r.RM.F;return{value:Array.isArray(d)?d.filter(t):[],onChange:function(e){l.setValue(e.map(m))}}}():function(){var e=l.value;return{value:e&&d.find(function(t){return m(t)===e}),onChange:function(e){l.setValue(m(e))}}}(),{onFocus:function(){return l.setTouched()},invalid:l.touched&&l.hasError,isDisabled:b.isSubmitting},a))})}},1547:function(e,t,a){"use strict";a.d(t,"a",function(){return l});var n=a(1409),r=a(49),c=a(0),i=a.n(c),l=function(e){var t=e.fieldName,a=e.className,c=Object(n.f)(t);return Object(r.g)(function(){return i.a.createElement("span",{className:a},c.value)})}},1548:function(e,t,a){"use strict";a.d(t,"a",function(){return m});var n=a(3),r=a(2829),c=a(0),i=a.n(c),l=a(1498),o=a(18),u=a(148);function s(){var e=Object(n.a)(["\n  padding: 1rem 0.4rem;\n  cursor: grab;\n"]);return s=function(){return e},e}var d=o.c.div(s()),m=Object(l.c)(function(){return i.a.createElement(d,null,i.a.createElement(u.a,{icon:r.a}))})},1561:function(e,t,a){"use strict";a.d(t,"a",function(){return i}),a.d(t,"b",function(){return l});var n=a(18),r=(a(1562),a(15)),c=function(e){var t=e.fontSize,a=void 0===t?2:t,n=e.fontSizeUnit,c=void 0===n?r.d.DefaultSizeUnit:n;return"".concat(a).concat(c)},i=n.c.div.attrs(function(e){return{className:l(e.pictogramId)}}).withConfig({displayName:"PictogramDisplay",componentId:"sc-6st3s9-0"})(["&:before{font-size:"," !important;margin-left:0.5rem !important;}"],c);function l(e){return"flaticon-".concat(e)}},1592:function(e,t,a){"use strict";a.d(t,"a",function(){return m});var n=a(51),r=a.n(n),c=a(80),i=a(40),l=a(1409),o=a(0),u=a.n(o),s=(a(36),a(169)),d=void 0;function m(e){var t=e.onSubmit,a=e.initialValues,n=e.loadValues,o=e.validationSchema,m=e.submitMessage,b=e.submitRedirectPath,p=Object(i.m)().history,f=Object(s.a)(),g=f.enqueueSuccess,h=f.enqueueWarning,v=u.a.useCallback(function(){var e=Object(c.a)(r.a.mark(function e(a){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(a);case 2:m&&g(m),b&&p.push(b);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[g,p,t,m,b]),y=u.a.useCallback(function(e,t){var a=!0,n=!1,r=void 0;try{for(var c,i=t.values()[Symbol.iterator]();!(a=(c=i.next()).done);a=!0){var l=c.value;l&&h(l)}}catch(o){n=!0,r=o}finally{try{a||null==i.return||i.return()}finally{if(n)throw r}}},[h]),E=u.a.useRef(!1),O=u.a.useCallback(function(){E.current=!1},[]),j=Object(l.g)({onSubmit:v,onSubmitFailed:y,onReset:O,validationSchema:o,initialValues:a,initialValidationEnabled:void 0===n,ignoreUnknownFieldsInValidation:!0,onFormChanges:d});return u.a.useEffect(function(){E.current||(n&&Promise.resolve(n(j.state.initialValues)).then(function(e){e&&(j.api.mergeValues(e),j.state.pristineValues=j.state.values),j.api.enableValidation()}),E.current=!0)},[n,j]),j}},2834:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(53),i=a(171),l=a(96),o=a(1461),u=a(3),s=a(18),d=a(168),m=a(1422),b=a(1421),p=a(1430),f=a(69),g=a(35),h=a(170),v=a(1419),y=a(1454),E=a(306),O=a(87),j=a(49),w=a(46),C=a(115),k=a(15);function x(){var e=Object(u.a)(["\n  white-space: nowrap;\n  margin-left: 2rem;\n  & a {\n    text-decoration: none;\n    color: ",";\n    padding: 1rem;\n  }\n"]);return x=function(){return e},e}var T=Object(s.c)(C.a)(x(),k.a.black),P=Object(j.b)(function(){var e=Object(w.b)().settings,t=Object(f.Ib)({branchId:e.branchId},{fetchPolicy:"cache-first"}),a=t.loading,n=t.data;return a||!n.companyBranch.foodMenuUrl?null:r.a.createElement(T,{color:k.a.greyMiddle},r.a.createElement("a",{href:n.companyBranch.foodMenuUrl,target:"_blank",rel:"noopener noreferrer"},r.a.createElement(O.Trans,{id:"Menu codes manual"})))}),R=a(51),L=a.n(R),I=a(80),N=a(70),S=a(1433),D=a(1418),W=a(304),_=a(1589),M=a(1432),B=a(25),V=a(1548),q=a(17),F=a(78),A=a(42),U=a(33),K=a(58),z=a(59),H=a(61),G=a(1498),Q=Object(G.b)(function(e){var t=e.columns,a=e.style,n=e.className;return r.a.createElement("div",{style:a,className:n},t)}),J=Object(G.a)(S.f),Y=function(e){function t(){var e,a;Object(A.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(a=Object(K.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(c)))).state={sortedItems:a.props.items},a.rowRenderer=function(e){return r.a.createElement(Q,e)},a.onHandleSorting=function(){var e=Object(I.a)(L.a.mark(function e(t){var n,r,c,i,l;return L.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.newIndex,r=t.oldIndex,n!==r){e.next=3;break}return e.abrupt("return");case 3:if(c=Object(F.a)(a.state.sortedItems),i=Object(G.d)(a.state.sortedItems,r,n),a.setState({sortedItems:i}),!a.props.onSort){e.next=15;break}if(l=a.props.onSort({item:c[r],items:i,offset:n-r,newIndex:n,oldIndex:r}),e.t0=l,!e.t0){e.next=13;break}return e.next=12,l;case 12:e.t0=!e.sent;case 13:if(!e.t0){e.next=15;break}a.setState({sortedItems:c});case 15:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(H.a)(t,e),Object(U.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.items,Object(q.a)(e,["items"]));return r.a.createElement(J,Object.assign({lockAxis:"y",useDragHandle:!0,onSortEnd:this.onHandleSorting,rowRenderer:this.rowRenderer},t,{items:this.state.sortedItems}))}}]),t}(r.a.PureComponent);function X(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Z(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?X(a,!0).forEach(function(t){Object(B.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):X(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}Y.getDerivedStateFromProps=function(e){return{sortedItems:e.items}};var $=function(e){var t=e.categories,a=e.children,n=e.onToggle,c=e.onRemove,i=e.onSort,l=e.showEditColumn,o=void 0===l||l,u=e.showRemoveColumn,s=void 0!==u&&u,d=e.showVisibilityColumn,m=void 0!==d&&d,b=e.showHeader,p=void 0===b||b,f=e.isSortable,h=void 0!==f&&f,v=e.isLoading,y=void 0!==v&&v,E=e.heightStretch,O=void 0!==E&&E,j=e.fullHeight,w=void 0!==j&&j,C=e.noRowsDisplay,x=void 0===C?r.a.createElement(S.g,{text:g.b._("No recipes in category")}):C,T={isLoading:y,items:t,disableHeader:!p,heightStretch:O,fullHeight:w,noRowsRenderer:function(){return x}},P=Object(M.a)().getCategoryEditRoute,R=[o&&r.a.createElement(S.a,{dataKey:"id",width:k.d.ButtonColumnWidthPx,minWidth:k.d.ButtonColumnWidthPx,cellRenderer:Object(S.h)({canQuery:"wareCategory"},S.b),cellDataGetter:function(e){var t=e.rowData;return P(t.id,t.categoryType.enum)}}),s&&r.a.createElement(S.a,{dataKey:"id",width:k.d.ButtonColumnWidthPx,minWidth:k.d.ButtonColumnWidthPx,cellRenderer:S.c,columnData:{onRemove:c}}),m&&r.a.createElement(S.a,{dataKey:"visible",width:k.d.ButtonColumnWidthPx,minWidth:k.d.ButtonColumnWidthPx,cellRenderer:Object(S.h)({canMutate:"updateWareCategory"},S.d),columnData:{onToggle:n}}),r.a.createElement(S.a,{dataKey:"nameLabel",width:300,label:g.b._("Name"),cellRenderer:S.e,columnData:{noteKey:"internalNote"}}),r.a.createElement(S.a,{dataKey:"countRecipes",label:g.b._("Recipe count"),width:100,cellRenderer:function(e){var t=e.cellData;return"".concat(t," ").concat(g.b._("Recipes").toLocaleLowerCase())}}),a,h&&r.a.createElement(S.a,{dataKey:"id",width:50,cellRenderer:function(){return r.a.createElement(V.a,null)}})];return h?r.a.createElement.apply(r.a,[Y,Z({onSort:i},T)].concat(R)):r.a.createElement.apply(r.a,[S.f,T].concat(R))};function ee(){var e=Object(u.a)(["\n  .origins span {\n    display: inline-block;\n    margin: 0.2rem;\n    padding: 0.2rem;\n    background-color: ",";\n  }\n"]);return ee=function(){return e},e}var te=s.c.div(ee(),k.a.greyLight),ae=Object(j.b)(function(e){var t=e.headline,a=e.subHeadline,n=void 0!==a&&a,c=e.categoryType,i=Object(w.b)().settings,l=Object(f.Gb)({branchId:i.branchId,categoryType:c}),o=l.data,u=l.loading,s=l.updateQuery,d=l.refetch,p=Object(f.Hb)({},{fetchPolicy:"cache-first"}).data,g=r.a.useMemo(function(){return p&&p.origins?p.origins.reduce(function(e,t){return e[t.enum]=t.code,e},{}):{}},[p]),h=r.a.useCallback(function(e){var t=e.cellData;return t.sort(),t.map(function(e){return r.a.createElement("span",{key:e},g[e])})},[g]),v=Object(f.W)(),y=Object(N.a)(v,1)[0],E=r.a.useCallback(function(e,t){y({categoryId:e,visible:t},{optimisticResponse:{updateWareCategory:{__typename:"WareCategory",id:e,visible:t}}})},[y]),O=Object(f.U)(),j=Object(N.a)(O,1)[0],C=r.a.useCallback(function(){var e=Object(I.a)(L.a.mark(function e(t){var a,n,r,c;return L.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.item,n=t.items,r=t.offset,s(function(){return{categories:n}}),e.next=4,j({categoryId:a.id,offset:r});case 4:if(!(c=e.sent)){e.next=9;break}return e.next=8,d();case 8:return e.abrupt("return",c.success);case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[d,j,s]),k=Object(W.a)()(u,function(){return o.categories}),x=Object(M.a)().getCategoryCreateRoute;return r.a.createElement(te,null,r.a.createElement(b.a,null,r.a.createElement(m.a,{widthGrowIndex:1},r.a.createElement(D.a,null,t),n&&r.a.createElement(D.a,{size:"smaller"},n)),r.a.createElement(m.a,{fixedWidth:!0},r.a.createElement(_.a,{routeTo:x(c)}))),r.a.createElement($,{isLoading:u,categories:k||[],onToggle:E,isSortable:!0,showHeader:!1,fullHeight:!0,showVisibilityColumn:!0,onSort:C},r.a.createElement(S.a,{dataKey:"origins",width:300,className:"origins",cellRenderer:h,style:{fontSize:"0.8rem"}})))});function ne(){var e=Object(u.a)(["\n  height: calc(100% - 3.5rem);\n  padding-top: 1rem;\n  overflow-y: scroll;\n  overflow-x: hidden;\n  -webkit-overflow-scrolling: touch;\n"]);return ne=function(){return e},e}var re=s.c.div(ne()),ce=function(){return r.a.createElement(h.a,{pageTitle:g.b._("Category overview"),useBackButton:!0,backRoute:E.a},r.a.createElement(v.a,{forcePercentHeightInMobile:100},r.a.createElement(d.a,{stretchToParent:!0},r.a.createElement(b.a,{justify:"start"},r.a.createElement(m.a,null,r.a.createElement(y.a,{width:20})),r.a.createElement(m.a,null,r.a.createElement(P,null))),r.a.createElement(re,null,r.a.createElement(ae,{categoryType:f.p.Main,headline:g.b._("Category of recipes")}),r.a.createElement(p.a,{size:1.5}),r.a.createElement(ae,{categoryType:f.p.SideDish,headline:g.b._("Category of sidedish")}),r.a.createElement(p.a,{size:1.5}),r.a.createElement(ae,{categoryType:f.p.Cover,headline:g.b._("Category of covers")})))))};function ie(){var e=Object(u.a)(["\n  position: fixed;\n  z-index: 500;\n  right: 0.5rem;\n  top: 0.5rem;\n  width: 10rem;\n  opacity: 0.96;\n  background: ",";\n  border-radius: ",";\n"]);return ie=function(){return e},e}var le=s.c.div(ie(),k.a.black,k.c.Button),oe=a(1409);function ue(){return Object(oe.f)("itemType").value}var se=function(e){var t=e.isMain,a=e.isSideDish,n=e.isCover,c=e.children,i=ue();return!0===t&&i===f.p.Main||!0===a&&i===f.p.SideDish||!0===n&&i===f.p.Cover?r.a.createElement(r.a.Fragment,null,c):null},de=a(1462),me=a(1411),be=function(e){var t=e.isCreate,a=e.createMutation,n=e.updateMutation;return Object(me.b)(t?a:n)?r.a.createElement(de.a,null,t?r.a.createElement(O.Trans,{id:"Create"}):r.a.createElement(O.Trans,{id:"Save"})):null},pe=a(1545),fe=a(21),ge=a(1449),he=a(1592);function ve(e){var t=e.isCreate,a=e.initialValues,n=e.loadCreateDefaults,c=e.loadUpdateValues,i=e.onCreate,l=e.onUpdate,o=e.createSuccessMessage,u=e.updateSuccessMessage,s=e.successRedirectPath,d=e.validationSchema,m=e.children,b=Object(he.a)({initialValues:a,validationSchema:d,onSubmit:t?i:l,loadValues:t?n:c,submitMessage:t?o:u,submitRedirectPath:s});return r.a.createElement(oe.b,{xform:b},m)}function ye(){return Object(oe.f)("id").value}function Ee(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var Oe=fe.RM.propEq("language");function je(){var e=Object(oe.f)("translations").value,t=function(t){return e&&e.find(Oe(t))},a=function(e){return t(e)};return{hasTranslation:function(e){return!!t(e)},getTranslation:a,getTranslationOrCreate:function(n,r){var c=t(n);return c||(e.push(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ee(a,!0).forEach(function(t){Object(B.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ee(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({language:n},r())),a(n))}}}var we=Object(j.b)(function(e){var t=e.loadTranslations,a=Object(ge.a)(),n="NEW"===ye(),c=je(),i=c.hasTranslation,l=c.getTranslationOrCreate;return r.a.useEffect(function(){a.branch&&!a.branch.supportedLanguages.includes(a.currentLanguage)&&a.setLanguage(a.defaultLanguage)},[a]),a.isDefaultLanguage||n?null:i(a.currentLanguage)?null:(t(a.currentLanguage).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(l(a.currentLanguage,function(){return e}),e)}),null)});function Ce(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function ke(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ce(a,!0).forEach(function(t){Object(B.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ce(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var xe=function(e){var t=e.isCreate,a=e.categoryId,n=e.categoryType,c=e.children,i=Object(ge.a)(),l=Object(M.a)().redirectToCategoryList,u=Object(oe.c)(function(e){return{nameLabel:e.string().required(g.b._("Category name in default language must be entered."))}}),s=Object(f.s)(),d=Object(N.a)(s,1)[0],m=r.a.useCallback(function(){var e=Object(I.a)(L.a.mark(function e(t){var r;return L.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d({categoryId:a,language:i.defaultLanguage},{fetchPolicy:"no-cache"});case 2:if(null!==(r=e.sent)){e.next=6;break}return l(),e.abrupt("return",t);case 6:return e.abrupt("return",ke({},r.category,{itemType:n,origins:Object(F.a)(r.category.origins)}));case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[a,n,i.defaultLanguage,d,l]),b=Object(f.V)(),p=Object(N.a)(b,1)[0],h=r.a.useCallback(function(e,t){return p({categoryId:e,category:ke({},Pe(t),{translations:t.translations})})},[p]),v=r.a.useCallback(function(e){return h(a,e)},[a,h]),y=Object(f.S)(),E=Object(N.a)(y,1)[0],O=r.a.useCallback(function(){var e=Object(I.a)(L.a.mark(function e(t){var a,r;return L.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E({category:ke({companyBranch:i.branchId,wareCategoryType:n},Pe(t))});case 2:(a=e.sent)&&t.translations&&t.translations.length>0&&(r=a.createCategory.id,h(r,t));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[n,E,h,i]),j=Object(f.t)(),w=Object(N.a)(j,1)[0],C=r.a.useCallback(function(){var e=Object(I.a)(L.a.mark(function e(t){var n,r,c,i;return L.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w({categoryId:a,language:t},{fetchPolicy:"no-cache"});case 2:if(null!==(n=e.sent)){e.next=5;break}return e.abrupt("return");case 5:return r=n.category,c=r.nameLabel,i=r.internalNoteLabel,e.abrupt("return",{nameLabel:c,internalNoteLabel:i});case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[a,w]);return r.a.createElement(ve,{isCreate:t,onCreate:O,onUpdate:v,initialValues:Te(n),loadUpdateValues:m,validationSchema:u,successRedirectPath:o.b},r.a.createElement(r.a.Fragment,null,r.a.createElement(we,{loadTranslations:C}),c))};function Te(e){return{id:"NEW",itemType:e,visible:!0,internalNoteLabel:"",pictogram:"",nameLabel:"",minCount:0,maxCount:0,recipes:[],origins:[],translations:[]}}function Pe(e){return{nameLabel:e.nameLabel,internalNoteLabel:e.internalNoteLabel,enabled:e.visible,pictogram:e.pictogram,recipes:e.recipes.map(fe.idProp),minCount:e.minCount,maxCount:e.maxCount,orderOriginCategories:e.origins}}var Re=a(1446),Le=a(1410),Ie=a(40),Ne=a(1457),Se=Object(j.b)(function(e){var t=e.fieldName,a=void 0===t?"id":t,n=e.mutationName,c=e.confirmText,i=e.onDelete,l=Object(oe.d)(a),o=Object(me.a)([],n?[n]:[]),u=Object(Ie.m)().history,s=Object(oe.h)().isSubmitting;return o&&"NEW"!==l.value?r.a.createElement(Ne.a,{type:"button",disabled:s,confirmText:c,onDelete:Object(I.a)(L.a.mark(function e(){return L.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(l.value);case 2:u.goBack();case 3:case"end":return e.stop()}},e)}))}):null}),De=a(1532),We=a(44);function _e(){var e=Object(u.a)(["\n    grid-template-columns: "," 1fr ",";\n    grid-template-rows: auto auto auto auto;\n    grid-row-gap: ",";\n    grid-template-areas:\n      '. contentTopRight    contentTopRight'\n      '. contentPrimary     .'\n      '. contentSecondary   .'\n      '. contentBottomRight contentBottomRight'\n  "]);return _e=function(){return e},e}var Me=s.c.div.withConfig({displayName:"StyledFormLayoutGrid",componentId:"sc-1lamm5d-0"})(["display:grid;margin:-",";grid-column-gap:",";grid-template-columns:"," "," "," auto;grid-template-rows:"," auto 1fr auto ",";grid-template-areas:'. .              .                contentTopRight' '. contentPrimary contentSecondary contentTopRight' '. contentPrimary contentSecondary .' '. contentPrimary contentSecondary contentBottomRight' '. .              .                contentBottomRight';.contentPrimary{grid-area:contentPrimary;}.contentSecondary{grid-area:contentSecondary;}.contentTopRight{grid-area:contentTopRight;justify-self:end;align-self:start;}.contentBottomRight{grid-area:contentBottomRight;justify-self:end;align-self:end;}",";"],k.d.Middle,k.d.Middle,k.d.Middle,function(e){return e.primaryColumnWidth},function(e){return e.secondaryColumnWidth},k.d.Middle,k.d.Middle,Object(We.d)(_e(),k.d.Middle,k.d.Middle,k.d.Middle)),Be=function(e){var t=e.contentPrimary,a=e.contentSecondary,n=e.contentTopRight,c=e.contentBottomRight,i=e.primaryColumnWidth,l=void 0===i?"1fr":i,o=e.secondaryColumnWidth,u=void 0===o?"0":o;return r.a.createElement(Me,{primaryColumnWidth:l,secondaryColumnWidth:u},r.a.createElement("div",{className:"contentPrimary"},t),r.a.createElement("div",{className:"contentSecondary"},a),r.a.createElement("div",{className:"contentTopRight"},n),r.a.createElement("div",{className:"contentBottomRight"},c))},Ve=a(1546),qe=function(){var e=Object(f.Hb)(),t=e.data,a=e.loading;return r.a.createElement(Le.a,{label:g.b._("cat. origins"),labelWidth:7},r.a.createElement(Ve.a,{fieldName:"origins",isMulti:!0,isLoading:a,isSearchable:!0,options:a?[]:t.origins,getOptionLabel:fe.RM.prop("code"),getOptionValue:fe.RM.prop("enum")}))},Fe=a(1451),Ae=a(1561),Ue=a(1415),Ke=a(71);function ze(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function He(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ze(a,!0).forEach(function(t){Object(B.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ze(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Ge=function(){var e=Object(oe.d)("pictogram");return Object(j.g)(function(){return r.a.createElement(Ue.a,{value:e.value?{pictogram:e.value}:null,onChange:function(t){t&&e.setValue(t.pictogram)},options:Fe.pictograms.map(function(e){return{pictogram:e}}),getOptionValue:Ke.a.prop("pictogram"),formatOptionLabel:function(e){var t=e.pictogram;return r.a.createElement(Ae.a,{pictogramId:t,fontSize:2})},components:{SingleValue:function(e){var t=e.data;return r.a.createElement(Ae.a,{pictogramId:t.pictogram,fontSize:4})}},styles:{container:function(e){return He({},e,{width:"8rem"})},menuList:function(e){return He({},e,{maxHeight:"35rem"})}},isClearable:!1,isSearchable:!1,minWidth:8})})},Qe=a(1426),Je=a(1413),Ye=s.c.div.withConfig({displayName:"StyledMenuTranslationInput",componentId:"sc-1soh2vg-0"})(["position:relative;.original{font-size:0.9rem;padding:0.3rem 0;opacity:0.7;}.original img{width:1.5rem;margin:0 0.6rem;}.current-language{width:1.5rem;position:absolute;right:0.5rem;top:0.8rem;border:1px #aaa solid;box-sizing:content-box;}"]),Xe=Object(j.b)(function(e){var t=e.fieldName,a=e.placeholder,n=Object(oe.h)().isSubmitting,c=Object(oe.e)(t),i=Object(N.a)(c,2),l=i[0],o=i[1],u=Object(ge.a)(),s=je(),d=s.getTranslation,m=s.getTranslationOrCreate,b=!u.isDefaultLanguage,p=d(u.currentLanguage),f=b?p&&p[l.name]:l.value,h=o();return r.a.createElement(Ye,null,r.a.createElement(Je.b,Object.assign({},h,{disabled:n,value:f||"",onChange:b?function(e){var t=e.target.value;m(u.currentLanguage,function(){return{}})[l.name]=t}:h.onChange,inputFullWidth:!0,invalid:!b&&l.touched&&l.hasError,placeholder:a})),r.a.createElement("img",{className:"current-language",src:Object(Fe.getFlag)(u.currentLanguage),alt:"translation"}),b&&r.a.createElement("div",{className:"original",onClick:function(){return u.setLanguage(u.defaultLanguage)}},r.a.createElement("img",{src:Object(Fe.getFlag)(u.defaultLanguage),alt:"original text"}),l.value||r.a.createElement("i",null,g.b._("No text is filled"))))}),Ze=function(e){var t=e.fieldName,a=void 0===t?"internalNote":t,n=e.label,c=void 0===n?r.a.createElement(O.Trans,{id:"Internal note"}):n,i=e.placeholder,l=e.localized,o=void 0!==l&&l,u={fieldName:a,placeholder:i,fullWidth:!0};return r.a.createElement(Le.a,{label:c,labelWidth:7},o?r.a.createElement(Xe,u):r.a.createElement(Qe.a,u))},$e=a(1412),et=Object(s.c)($e.a).withConfig({displayName:"StyledLanguagePicker",componentId:"sc-1hgrqes-0"})(["transform:scale(2) translateY(0.5rem);transform-origin:right;height:2.5rem;"]),tt=Object(j.b)(function(){var e=Object(ge.a)();return r.a.createElement("div",null,r.a.createElement(et,{availableLanguages:e.supportedLanguages,selectedLanguage:e.currentLanguage,onChange:e.setLanguage,formatLanguage:fe.RM.identity,arrowColor:k.a.greyMiddle}))}),at=a(2827);function nt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var rt=function(e){var t=e.fieldName,a=void 0===t?"nameLabel":t,n=e.localized,c=void 0!==n&&n,i=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?nt(a,!0).forEach(function(t){Object(B.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):nt(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({fieldName:a},Object(q.a)(e,["fieldName","localized"]));return r.a.createElement(Le.a,{icon:at.a,labelWidth:k.d.DefaultLabelWidth},c?r.a.createElement(Xe,i):r.a.createElement(Qe.a,i))},ct=function(){var e=Object(f.T)(),t=Object(N.a)(e,1)[0];return r.a.createElement(Be,{primaryColumnWidth:"minmax(10rem, 45rem)",secondaryColumnWidth:"14rem",contentPrimary:r.a.createElement(Re.a,null,r.a.createElement(rt,{placeholder:g.b._("Category name"),localized:!0}),r.a.createElement(Ze,{placeholder:g.b._("Category internal note"),fieldName:"internalNoteLabel",localized:!0}),r.a.createElement(qe,null),r.a.createElement(Le.a,null,r.a.createElement(De.a,{fieldName:"visible",label:g.b._("To show this category")}))),contentSecondary:r.a.createElement(se,{isMain:!0},r.a.createElement(Ge,null)),contentTopRight:r.a.createElement(tt,null),contentBottomRight:r.a.createElement(Se,{mutationName:"destroyWareCategory",confirmText:g.b._("Remove this category?"),onDelete:function(e){return t({categoryId:e})}})})},it=a(1678),lt=a(1544),ot=a(1431);function ut(){var e=Object(w.b)().settings;return Object(j.g)(function(){return e.branchId})}var st=a(1587);function dt(e){var t=e.onAdd,a=e.addLabel,c=void 0===a?g.b._("Add"):a,i=e.addButtonText,l=void 0===i?g.b._("Add"):i,o=e.isLoading,u=void 0!==o&&o,s=Object(q.a)(e,["onAdd","addLabel","addButtonText","isLoading"]),d=Object(Ie.n)(null),p=Object(N.a)(d,2),f=p[0],h=p[1],v=Object(n.useCallback)(function(){var e=f();null!==e&&(t(e),h(null))},[f,t,h]),y=Object(n.useCallback)(function(e){"Enter"===e.key&&v()},[v]),E=Object(n.useCallback)(function(e){h(e||null)},[h]);return r.a.createElement(b.a,{justify:"flex-start"},r.a.createElement(m.a,{fixedWidth:!0,width:"4rem",margin:"auto 0"},c),r.a.createElement(m.a,{fixedWidth:!0,width:"20rem",margin:"auto 0"},r.a.createElement(Ue.a,Object.assign({value:f(),onChange:E,onKeyDown:y,isLoading:u,isMulti:!1,isClearable:!1,getOptionValue:Ke.a.prop("id"),getOptionLabel:Ke.a.propOr("","nameLabel")},s))),r.a.createElement(m.a,{fixedWidth:!0,width:"10rem",margin:"auto 0"},r.a.createElement(C.a,{text:l,disabled:null===f(),onClick:v})))}var mt=[f.q.Delivery,f.q.Inhouse];function bt(){var e=r.a.useMemo(pe.b,[]);return{priceTypes:mt,priceTypeLabels:e}}function pt(){var e=Object(u.a)(["\n      cursor: move;\n    "]);return pt=function(){return e},e}var ft=s.c.div.withConfig({displayName:"StyledCategoryRecipesView",componentId:"sc-1g4q35k-0"})(["display:flex;flex-direction:column;height:calc(100% - 2rem);width:100%;& .fixed-row{flex:0 0 auto;}& .move-cell{","}"],Object(We.c)(pt())),gt=s.c.div.withConfig({displayName:"StyledFormStretchedRow",componentId:"sc-1g4q35k-1"})(["flex:1 1 0;margin:1rem 0 0 1rem;"]),ht=Object(G.a)(gt),vt=s.c.div.withConfig({displayName:"StyledRecipeRow",componentId:"sc-1g4q35k-2"})(["display:grid;grid-gap:1rem;grid-template-columns:","px 100px 3fr 1fr 1fr 50px;"],k.d.ButtonColumnWidthPx),yt=Object(G.b)(function(e){var t=e.recipe,a=e.onRemove,n=bt(),c=n.priceTypes,i=n.priceTypeLabels,l=c.map(function(e){var a=t.prices.find(Ke.a.pathEq(["priceType","enum"],e));return r.a.createElement("div",{className:"move-cell",key:e},r.a.createElement(lt.a,null,i[e]),a?r.a.createElement(ot.a,{currencyCode:a.price.currency.code},a.price.value):r.a.createElement("i",null,g.b._("Not set").toLocaleLowerCase()))});return r.a.createElement(vt,null,r.a.createElement("div",null,r.a.createElement(st.a,{onClick:a})),r.a.createElement("div",{className:"move-cell"},t.code),r.a.createElement("div",{className:"move-cell"},t.nameLabel,r.a.createElement(lt.a,null,t.internalNote||"")),l,r.a.createElement(V.a,null))}),Et=function(){var e=ut(),t=ue(),a=Object(f.Kb)({branchId:e,categoryType:t}),n=a.data,c=a.loading,i=Object(oe.d)("recipes"),l=r.a.useCallback(function(){var e=Object(I.a)(L.a.mark(function e(t){var a,n;return L.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.newIndex,n=t.oldIndex,a!==n){e.next=3;break}return e.abrupt("return");case 3:i.setValue(Object(G.d)(i.value,n,a));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[i]),o=Ke.a.differenceWith(Ke.a.eqProps("id")),u=Object(We.f)().isDesktop,s=Object(oe.h)();return Object(j.g)(function(){return r.a.createElement(ft,null,r.a.createElement("div",{className:"fixed-row"},r.a.createElement(dt,{isLoading:c,isDisabled:s.isSubmitting,options:c?[]:o(n.recipes,i.value),onAdd:function(e){return i.value.push(e)},getOptionLabel:function(e){var t=e.nameLabel,a=e.code;return"".concat(a," - ").concat(t)}})),r.a.createElement(ht,{lockAxis:"y",lockToContainerEdges:!0,onSortEnd:l,useDragHandle:!u},r.a.createElement(it.a,{items:i.value,heightStretch:!0,rowHeight:60,renderItem:function(e,t){return r.a.createElement(yt,{recipe:e,onRemove:function(){i.setValue(Ke.a.reject(Object(fe.idPropEq)(e.id),i.value))},index:t})}})))})},Ot=a(161),jt=a.n(Ot),wt=a(1425),Ct=a(116),kt=a(1583);function xt(){var e=Object(u.a)(["\n  display: flex;\n  align-items: center;\n  & > label {\n    min-width: 5rem;\n  }\n  & > * {\n    margin: 0.2rem 0.5rem;\n  }\n  input.count {\n    font-size: 1.5rem;\n    line-height: 1.5rem;\n    text-align: center;\n  }\n"]);return xt=function(){return e},e}var Tt=s.c.div(xt()),Pt=function(e){var t=e.count,a=e.label,n=e.enabled,c=e.onChange,i=e.id,l=r.a.useRef(t);return r.a.createElement(Tt,null,r.a.createElement("label",{htmlFor:i},a),r.a.createElement(Ct.a,{width:3},r.a.createElement(Je.a,{id:i,value:0===t?"":t,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){e.target.validity.valid&&c(Number.parseInt(e.target.value,10))}),onFocus:function(e){e.target.select()},disabled:0===t||!n,inputFullWidth:!0,type:"tel",pattern:"^[1-9]\\d*$",className:"count"})),r.a.createElement(Ct.a,{width:4},r.a.createElement(C.a,{disabled:!n||t<=0,onClick:function(){return c(t-1)}},"\u2796")),r.a.createElement(Ct.a,{width:4},r.a.createElement(C.a,{disabled:!n,onClick:function(){return c(t+1)}},"\u2795")),r.a.createElement("div",null,r.a.createElement(kt.a,null,r.a.createElement("input",{type:"checkbox",id:"".concat(i,"-nolimit"),checked:0===t,disabled:!n,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){0===t?c(l.current||1):(l.current=t,c(0))})}),r.a.createElement("label",{htmlFor:"".concat(i,"-nolimit")},r.a.createElement(O.Trans,{id:"Unlimited"})))))},Rt=function(){return{noLimit:{label:g.b._("No limitation"),min:0,max:0},optional:{label:g.b._("One at most"),min:0,max:1},required:{label:g.b._("One at least"),min:1,max:0},onlyOne:{label:g.b._("Exactly one"),min:1,max:1},custom:{label:g.b._("Custom range")}}},Lt=Object(j.b)(function(){var e=r.a.useMemo(Rt,[]),t=Object(j.e)(function(){return{currentRule:"noLimit"}}),a=function(e){t.currentRule=e},n=Object(oe.d)("minCount"),c=Object(oe.d)("maxCount");return Object(Ie.e)(function(){if("custom"!==t.currentRule){var r=jt.a.findKey(e,function(e){var t=e.min,a=e.max;return t===n.value&&a===c.value});r&&a(r)}}),r.a.createElement(r.a.Fragment,null,r.a.createElement(wt.a,{items:Object.keys(e),formatItem:function(t){return e[t].label},onSingleSelection:function(t){if(t){a(t);var r=e[t];n.setValue(r.min||0),c.setValue(r.max||0)}},selectedItem:t.currentRule}),r.a.createElement(Pt,{id:"minCount",count:n.value,label:r.a.createElement(O.Trans,{id:"Minimum"}),enabled:"custom"===t.currentRule,onChange:n.setValue}),r.a.createElement(Pt,{id:"maxCount",count:c.value,label:r.a.createElement(O.Trans,{id:"Maximum"}),enabled:"custom"===t.currentRule,onChange:c.setValue}))}),It=s.c.div.withConfig({displayName:"FormContainer",componentId:"sc-154ix5u-0"})(["display:flex;flex-direction:column;height:100%;width:100%;"]),Nt=s.c.div.withConfig({displayName:"FormFixedRow",componentId:"sc-154ix5u-1"})(["flex:0 0 8rem;"]),St=s.c.div.withConfig({displayName:"FormStretchedRow",componentId:"sc-154ix5u-2"})(["flex:1 1 0;min-height:0;position:relative;"]),Dt=function(e){var t=e.match.params.categoryId,a=Object(M.a)(t),n=a.isCreate,c=a.itemType,i=a.redirectToCategoryList;return null===c?(i(),null):r.a.createElement(xe,{isCreate:n,categoryId:t,categoryType:c},r.a.createElement(h.a,{pageTitle:Object(pe.a)(c),hideLogoutWidget:!0,useBackButton:!0},r.a.createElement(v.a,{withScrollArea:!0},r.a.createElement(It,null,r.a.createElement(Nt,null,r.a.createElement(d.a,null,r.a.createElement(ct,null))),r.a.createElement(se,{isSideDish:!0},r.a.createElement(Nt,null,r.a.createElement(d.a,null,r.a.createElement(D.a,null,r.a.createElement(O.Trans,{id:"Required amounts of recipes to be picked"})),r.a.createElement(Lt,null)))),r.a.createElement(St,null,r.a.createElement(d.a,{stretchToParent:!0,minHeight:25},r.a.createElement(D.a,null,r.a.createElement(O.Trans,{id:"Recipes assigned to this category"})),r.a.createElement(Et,null))))),r.a.createElement(le,null,r.a.createElement(be,{isCreate:n,createMutation:"createWareCategory",updateMutation:"updateWareCategory"}))))},Wt=a(1549),_t=a(305),Mt=a(1677),Bt=Object(j.b)(function(e){var t=e.categoryType,a=e.currentCategories,n=e.addButtonText,c=e.onAdd,i=Object(w.b)().settings,l=Object(f.Gb)({branchId:i.branchId,categoryType:t}),o=l.data,u=l.loading,s=o&&o.categories||[],d=Object(oe.h)().isSubmitting;return r.a.createElement(dt,{isLoading:u,isDisabled:d,options:Ke.a.without(a,s),addButtonText:n,onAdd:c})}),Vt=function(e){var t=e.categoryType,a=e.addButtonText,n=e.noRowsText,c=e.fieldName,i=Object(oe.d)(c);return Object(j.g)(function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement($,{categories:Array.from(i.value),showRemoveColumn:!0,showEditColumn:!1,showHeader:!1,noRowsDisplay:r.a.createElement(S.g,{text:n}),onRemove:function(e){return i.value.remove(i.value.find(Object(fe.idPropEq)(e)))}}),r.a.createElement(Bt,{addButtonText:a,categoryType:t,currentCategories:Array.from(i.value),onAdd:function(e){return i.value.push(e)}}))})},qt=a(127),Ft=a.n(qt),At=a(456),Ut=a(1504);function Kt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function zt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Kt(a,!0).forEach(function(t){Object(B.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Kt(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Ht=function(e){var t=e.isCreate,a=e.recipeId,n=e.recipeType,c=e.children,i=Object(ge.a)(),l=Object(M.a)().redirectToRecipeList,u=bt().priceTypeLabels,s=Object(oe.c)(function(e){return{nameLabel:e.string().required(g.b._("Recipe name in default language must be entered.")),code:e.string().required(g.b._("Recipe code must be entered.")),prices:e.object(Jt(function(t){var a=u[t].toLocaleLowerCase();return e.object({value:e.string().required(g.b._("Recipe price for {priceType} must be entered.",{priceType:a}))})}))}}),d=Object(f.u)(),m=Object(N.a)(d,1)[0],b=r.a.useCallback(Object(I.a)(L.a.mark(function e(){var t;return L.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m({branchId:i.branchId},{fetchPolicy:"cache-first"});case 2:if(null===(t=e.sent)){e.next=5;break}return e.abrupt("return",Xt(t.defaults));case 5:return e.abrupt("return");case 6:case"end":return e.stop()}},e)})),[i,m]),p=Object(f.v)(),h=Object(N.a)(p,1)[0],v=r.a.useCallback(Object(I.a)(L.a.mark(function e(){var t;return L.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h({recipeId:a,language:i.defaultLanguage},{fetchPolicy:"no-cache"});case 2:if(null!==(t=e.sent)){e.next=6;break}return l(),e.abrupt("return");case 6:return e.abrupt("return",Zt(t.recipe));case 7:case"end":return e.stop()}},e)})),[i.defaultLanguage,h,a,l]),y=Object(f.Z)(),E=Object(N.a)(y,1)[0],O=r.a.useCallback(function(e,t){return E({recipeId:e,recipe:zt({},Gt(t),{translations:t.translations,image:Qt(t)})},At.b)},[E]),j=r.a.useCallback(function(e){return O(a,e)},[O,a]),w=Object(f.X)(),C=Object(N.a)(w,1)[0],k=r.a.useCallback(function(){var e=Object(I.a)(L.a.mark(function e(t){var a,r;return L.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C({recipe:zt({},Gt(t),{companyBranch:i.branchId,wareCategoryType:n,image:t.image})},At.b);case 2:(a=e.sent)&&t.translations&&t.translations.length>0&&(r=a.recipe.id,O(r,t));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[C,O,i,n]),x=Object(f.w)(),T=Object(N.a)(x,1)[0],P=r.a.useCallback(function(){var e=Object(I.a)(L.a.mark(function e(t){var n,r,c,i;return L.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T({recipeId:a,language:t},{fetchPolicy:"no-cache"});case 2:if(null!==(n=e.sent)){e.next=5;break}return e.abrupt("return");case 5:return r=n.recipe,c=r.nameLabel,i=r.descriptionLabel,e.abrupt("return",{nameLabel:c,descriptionLabel:i});case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[T,a]);return r.a.createElement(ve,{isCreate:t,onCreate:k,onUpdate:j,initialValues:Yt(n),loadCreateDefaults:b,loadUpdateValues:v,validationSchema:s,successRedirectPath:o.c},r.a.createElement(r.a.Fragment,null,c,r.a.createElement(we,{loadTranslations:P})))};function Gt(e){return{code:e.code,nameLabel:e.nameLabel||"",internalNote:e.internalNote,descriptionLabel:e.descriptionLabel,enabled:e.visible,prices:Object.keys(e.prices).map(function(t){return{warePriceType:t,price:{value:Ft()(e.prices[t].value).value()},vat:e.prices[t].vatId}}),sideDishCategories:e.sideDishes.map(Ke.a.prop("id")),wareCategories:e.categories.map(Ke.a.prop("id")),associatedRecipes:e.associatedRecipes.map(Ke.a.pick(["associatedRecipe","warePriceType"])),ingredients:e.ingredients.map(function(e){var t=e.stockItem,a=e.quantity;return{stockItem:t,quantity:Object(Ut.b)(a)}})}}function Qt(e){var t=e.image;return"string"===typeof t?null:null===t?{delete:!0}:{file:t,delete:!1}}function Jt(e){return mt.reduce(function(t,a){return t[a]=e(a),t},{})}function Yt(e){return{id:"NEW",itemType:e,visible:!0,code:"",nameLabel:"",internalNote:"",internalCode:"",descriptionLabel:"",image:null,prices:Jt(function(){return{value:0,vatId:null,currencyCode:""}}),associatedRecipes:[],ingredients:[],sideDishes:[],categories:[],translations:[]}}function Xt(e){var t=e.vats.reduce(function(e,t){var a=t.vatId;return e[t.priceType.enum]=a,e},{});return{prices:Jt(function(a){return{value:0,vatId:t[a],currencyCode:e.currency.code}})}}function Zt(e){return zt({},e,{itemType:e.recipeType.enum,internalNote:e.internalNote||"",descriptionLabel:e.descriptionLabel||"",associatedRecipes:e.sourceAssociatedRecipes.map(function(e){var t=e.priceType,a=e.recipe;return{warePriceType:t.enum,nameLabel:a.nameLabel,associatedRecipe:a.id,formattedPrice:"?"}}),ingredients:e.sourceIngredients.map(function(e){var t=e.quantity,a=e.stockItem,n=a.id,r=a.label,c=a.allergens;return{stockItem:n,label:r,quantity:t,unitLabel:a.wareUnit.code,allergens:c.map(Ke.a.prop("enum"))}}),prices:Jt(function(t){var a=e.sourcePrices.find(Ke.a.pathEq(["priceType","enum"],t));return a?{value:a.price.value,vatId:a.vat.id,currencyCode:a.price.currency.code}:{value:0,vatId:null,currencyCode:""}})})}var $t=a(1514),ea=a(1547),ta=a(2830),aa=function(e){var t=e.fieldName,a=Object(q.a)(e,["fieldName"]);return r.a.createElement(Le.a,{icon:ta.a},r.a.createElement(Ct.a,{width:5},r.a.createElement(Qe.a,Object.assign({fieldName:t,fullWidth:!0},a))))},na=function(e){var t=e.items,a=e.fieldName,n=e.isClearable,c=void 0!==n&&n,i=e.getItemId,l=void 0===i?fe.idProp:i,o=Object(oe.d)(a),u=Object(oe.h)();return Object(j.g)(function(){return r.a.createElement(wt.a,Object.assign({selectedItem:o.value&&t.find(function(e){return l(e)===o.value}),onSingleSelection:function(e){o.setValue(e?l(e):null),o.setTouched()},disabled:u.isSubmitting,isInvalid:o.hasError,isClearable:c,isMulti:!1},e))})},ra=function(e){var t=e.fieldName,a=ut(),n=Object(f.Nb)({branchId:a},{fetchPolicy:"cache-first"}),c=n.data;return n.loading?null:r.a.createElement(Le.a,{label:"".concat(g.b._("VAT"),":")},r.a.createElement(na,{fieldName:t,items:c.vats,formatItem:function(e){var t=e.vat;return"".concat(t,"%")}}))},ca=function(e){var t=e.recipes,a=e.onRemove;return r.a.createElement(S.f,{items:t,disableHeader:!0},r.a.createElement(S.a,{dataKey:"associatedRecipe",width:k.d.ButtonColumnWidthPx,minWidth:k.d.ButtonColumnWidthPx,cellRenderer:function(e){var t=e.cellData;return r.a.createElement(st.a,{onClick:function(){return a(t)}})}}),r.a.createElement(S.a,{dataKey:"nameLabel",width:300,label:g.b._("Name"),cellRenderer:S.e,columnData:{noteKey:"internalNote"}}),r.a.createElement(S.a,{dataKey:"formattedPrice",width:100,label:g.b._("Price")}))},ia=Object(j.b)(function(e){var t=e.priceType,a=Object(oe.f)("associatedRecipes"),n=ye(),c=ut(),i=Object(f.Jb)({branchId:c}),l=i.data,o=i.loading,u=Ke.a.propEq("warePriceType",t),s=Ke.a.propEq("associatedRecipe"),d=Ke.a.filter(u,a.value),m=Ke.a.reject(function(e){return e.id===n||(t=e.id,d.some(s(t)));var t}),b=r.a.useCallback(function(e){a.value.push({warePriceType:t,associatedRecipe:e.id,nameLabel:e.nameLabel,formattedPrice:"?"})},[t,a]),p=r.a.useCallback(function(e){a.value.remove(a.value.find(Ke.a.both(s(e),u)))},[s,u,a.value]),g=Object(oe.h)().isSubmitting;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ca,{recipes:d,onRemove:p}),r.a.createElement(dt,{options:o?[]:m(l.recipes),onAdd:b,isLoading:o,isDisabled:g}))}),la=Object(s.c)(ea.a).withConfig({displayName:"FormPricingCurrencyCode",componentId:"sc-5x5h5x-0"})(["padding:0.5rem;"]),oa=function(){var e=bt(),t=e.priceTypes,a=e.priceTypeLabels;return r.a.createElement(r.a.Fragment,null,t.map(function(e){var t=["prices",e];return r.a.createElement(n.Fragment,{key:e},r.a.createElement(D.a,null,a[e]),r.a.createElement($t.a,null,r.a.createElement(aa,{fieldName:[].concat(t,["value"])}),r.a.createElement(la,{fieldName:[].concat(t,["currencyCode"])}),r.a.createElement(_t.a,{left:5},r.a.createElement(ra,{fieldName:[].concat(t,["vatId"])}))),r.a.createElement(p.a,null),r.a.createElement(se,{isMain:!0},r.a.createElement(ia,{priceType:e}),r.a.createElement(p.a,null)))}))},ua=function(e){var t=e.placeholder;return r.a.createElement(Le.a,{label:r.a.createElement(O.Trans,{id:"Code"}),labelWidth:k.d.DefaultLabelWidth},r.a.createElement(Ct.a,{width:9},r.a.createElement(Qe.a,{fieldName:"code",fullWidth:!0,placeholder:t})))},sa=function(e){return r.a.createElement(Le.a,{label:g.b._("External ID"),labelWidth:7},r.a.createElement(Qe.a,{fieldName:"internalCode",disabled:!0}))},da=function(e){var t=e.label;return r.a.createElement(De.a,{fieldName:"visible",label:t})},ma=a(1674);function ba(){var e=Object(u.a)(["\n  float: left;\n  width: 2.3rem;\n  height: 2.3rem;\n  border: 1px solid ",";\n  margin: 0.3rem 0.6rem 0.3rem ",";\n  font-size: 1.5rem;\n  text-align: center;\n  vertical-align: middle;\n  cursor: default;\n  color: ",";\n  background-color: ",";\n  &.active {\n    color: ",";\n    background-color: ",";\n  }\n"]);return ba=function(){return e},e}var pa=s.c.div(ba(),k.a.greyMiddle,k.d.MarginAroundFormComponents,k.a.greyMiddle,k.a.white,k.a.black,k.a.yellow),fa=function(e){var t=e.selected,a=e.onToggle,n=Object(f.Eb)({},{fetchPolicy:"cache-first"}),c=n.data;return n.loading?null:r.a.createElement(r.a.Fragment,null,c.allergens.map(function(e){return r.a.createElement(pa,{key:e.enum,title:e.code,className:Object($e.b)({active:t.includes(e.enum)}),onClick:a&&function(){return a(e.enum)}},e.category)}))},ga=s.c.div.withConfig({displayName:"StyledAllergenLabel",componentId:"sc-1bpzlke-0"})(["margin:0.7rem 0 0 0.2rem;"]),ha=Object(j.b)(function(){var e=Object(oe.f)("ingredients"),t=Ke.a.uniq(Ke.a.flatten(Ke.a.map(Ke.a.prop("allergens"),e.value)));return r.a.createElement(Le.a,{labelWidth:k.d.DefaultLabelWidth,icon:ma.a},r.a.createElement(ga,null,r.a.createElement(O.Trans,{id:"Allergens based on stock cards"})),r.a.createElement(fa,{selected:t}))}),va=function(){return r.a.createElement(Le.a,{label:r.a.createElement(O.Trans,{id:"Public note"}),labelWidth:k.d.DefaultLabelWidth},r.a.createElement(Xe,{fieldName:"descriptionLabel",placeholder:g.b._("Public note for customers, allergens")}))},ya=a(2797),Ea=a(169),Oa=s.c.div.withConfig({displayName:"StyledRecipeImageUploader",componentId:"sc-1fnjy10-0"})(["border:1px dotted ",";background:",";color:",";height:18rem;min-width:12rem;cursor:pointer;& section{height:100%;width:100%;}& div.container{height:100%;width:100%;padding:0.4rem;}& img{height:100%;width:100%;object-fit:contain;}"],k.a.greyMiddle,k.a.white,k.a.greyMiddle),ja=Object(j.b)(function(){var e=Object(Ea.a)().enqueueWarning,t=Object(oe.h)().isSubmitting,a=Object(ya.a)({disabled:t,accept:"image/*",multiple:!1,onDropAccepted:function(e){var t=Object(N.a)(e,1)[0];l.setValue(t)},onDropRejected:function(){e(g.b._("Supplied file is not recognized as image."))}}),n=a.isDragActive,c=a.getRootProps,i=a.getInputProps,l=Object(oe.d)("image"),o=r.a.useMemo(function(){var e=l.value;return null===e?null:"string"!==typeof l.value?URL.createObjectURL(e):l.value},[l.value]);return r.a.createElement(Oa,null,r.a.createElement("section",null,r.a.createElement("div",Object.assign({className:"container"},c()),r.a.createElement("input",i()),o&&r.a.createElement("img",{src:o,alt:""}),null===o&&r.a.createElement("div",{className:"hint"},n?r.a.createElement(O.Trans,{id:"Drop the image here ..."}):r.a.createElement(O.Trans,{id:"Click to select image or drop it here"})))))}),wa=function(e){var t=e.isCreate,a=Object(f.Y)(),n=Object(N.a)(a,1)[0];return r.a.createElement(Be,{primaryColumnWidth:"minmax(24rem, 54rem)",secondaryColumnWidth:"minmax(12rem, 30rem)",contentPrimary:r.a.createElement(Re.a,null,r.a.createElement(ua,{placeholder:g.b._("Recipe code")}),r.a.createElement(rt,{placeholder:g.b._("Recipe name"),localized:!0}),r.a.createElement(se,{isMain:!0},r.a.createElement(va,null)),r.a.createElement(Ze,{placeholder:g.b._("Recipe internal note")}),!t&&r.a.createElement(sa,null),r.a.createElement(se,{isMain:!0},r.a.createElement(ha,null)),r.a.createElement(Le.a,{labelWidth:k.d.DefaultLabelWidth},r.a.createElement(da,{label:g.b._("To show this recipe")}))),contentSecondary:r.a.createElement(ja,null),contentTopRight:r.a.createElement(tt,null),contentBottomRight:r.a.createElement(Se,{mutationName:"destroyRecipe",confirmText:g.b._("Remove this recipe?"),onDelete:function(e){return n({recipeId:e})}})})},Ca=function(e){var t=e.ingredients,a=e.onRemove,n=e.isLoading,c=void 0!==n&&n;return r.a.createElement(S.f,{isLoading:c,items:t,disableHeader:!0,noRowsRenderer:function(){return r.a.createElement(S.g,{text:g.b._("Recipe has no ingredients")})}},r.a.createElement(S.a,{dataKey:"stockItem",width:k.d.ButtonColumnWidthPx,minWidth:k.d.ButtonColumnWidthPx,cellRenderer:S.c,columnData:{onRemove:a}}),r.a.createElement(S.a,{dataKey:"label",width:300,label:g.b._("Name")}),r.a.createElement(S.a,{dataKey:"quantity",width:60,label:g.b._("Quantity"),cellRenderer:function(e){var t=e.rowIndex;return r.a.createElement(Ct.a,{width:2.5},r.a.createElement(Qe.a,{fieldName:["ingredients",String(t),"quantity"],fullWidth:!0}))}}),r.a.createElement(S.a,{dataKey:"unitLabel",width:100,label:g.b._("Ware unit")}))},ka=Ke.a.differenceWith(function(e,t){return e.id===t.stockItem}),xa=Object(j.b)(function(e){var t=e.ingredients,a=e.onAdd,n=e.onRemove,c=ut(),i=Object(f.Mb)({branchId:c}),l=i.data,o=i.loading,u=Object(oe.h)().isSubmitting;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ca,{ingredients:t,onRemove:n}),r.a.createElement(dt,{isLoading:o,isDisabled:u,addButtonText:g.b._("Add ingredient"),options:o?[]:ka(l.stockItems,t),onAdd:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){a({stockItem:e.id,label:e.nameLabel,quantity:1,unitLabel:e.wareUnit.code,allergens:e.allergens.map(Ke.a.prop("enum"))})})}))}),Ta=function(){var e=Object(oe.d)("ingredients");return Object(j.g)(function(){return r.a.createElement(xa,{ingredients:e.value,onAdd:function(t){e.value.push(t)},onRemove:function(t){e.value.splice(e.value.findIndex(Ke.a.propEq("stockItem",t)),1)}})})},Pa=function(e){var t=e.match.params.recipeId,a=Object(M.a)(t),n=a.isCreate,c=a.itemType,i=a.redirectToRecipeList;return null===c?(i(),null):r.a.createElement(Ht,{isCreate:n,recipeId:t,recipeType:c},r.a.createElement(_t.a,{right:1.25,bottom:4},r.a.createElement(h.a,{pageTitle:Object(pe.c)(c),hideLogoutWidget:!0,useBackButton:!0},r.a.createElement(d.a,null,r.a.createElement(wa,{isCreate:n})),r.a.createElement(d.a,null,r.a.createElement(oa,null)),r.a.createElement(d.a,null,r.a.createElement(D.a,null,r.a.createElement(O.Trans,{id:"Recipe ingredients"})),r.a.createElement(p.a,null),r.a.createElement(Ta,null)),r.a.createElement(se,{isMain:!0},r.a.createElement(d.a,null,r.a.createElement(D.a,null,r.a.createElement(O.Trans,{id:"Sidedish categories"})),r.a.createElement(lt.a,null,r.a.createElement(O.Trans,{id:"These sidedish are presented with recipe"})),r.a.createElement(Vt,{fieldName:"sideDishes",categoryType:Mt.a.SideDish,addButtonText:g.b._("Attach sidedish category"),noRowsText:g.b._("Recipe has no sidedish category attached")})),r.a.createElement(d.a,null,r.a.createElement(D.a,null,r.a.createElement(O.Trans,{id:"Category assignments"})),r.a.createElement(lt.a,null,r.a.createElement(O.Trans,{id:"Recipe is in these categories"})),r.a.createElement(Vt,{fieldName:"categories",categoryType:Mt.a.Main,addButtonText:g.b._("Add to category"),noRowsText:g.b._("Recipe is not in any category")})))),r.a.createElement(le,null,r.a.createElement(be,{isCreate:n,createMutation:"createRecipe",updateMutation:"updateRecipe"}))))},Ra=a(1414),La=a(1675),Ia=a(1427);function Na(){var e=Object(u.a)(["\n  [aria-label='grid']:focus {\n    outline: none;\n  }\n\n  [role='columnheader'] {\n    display: flex;\n    align-items: center;\n    overflow: hidden;\n  }\n"]);return Na=function(){return e},e}var Sa=Object(s.c)(S.f)(Na()),Da=Object(j.b)(function(e){var t=e.stockItems,a=e.isLoading;return r.a.createElement(Sa,{items:t,heightStretch:!0,noRowsRenderer:function(){return a?r.a.createElement(Ia.a,null):r.a.createElement("h3",null,r.a.createElement(O.Trans,{id:"Selected branch has no stock cards"}))}},r.a.createElement(S.a,{dataKey:"id",width:k.d.ButtonColumnWidthPx,minWidth:k.d.ButtonColumnWidthPx,cellRenderer:Object(S.h)({canQuery:"stockItem"},S.b)}),r.a.createElement(S.a,{dataKey:"code",width:100,label:g.b._("Card code")}),r.a.createElement(S.a,{dataKey:"nameLabel",width:300,minWidth:30,flexGrow:2,label:g.b._("Card name")}),r.a.createElement(S.a,{dataKey:"quantity",width:100,label:g.b._("Card stock"),cellRenderer:Wa}),r.a.createElement(S.a,{dataKey:"allowNegativeValue",width:300,label:g.b._("Negative stock"),cellRenderer:_a}),r.a.createElement(S.a,{dataKey:"note",width:300,label:g.b._("Card note")}))});function Wa(e){var t=e.cellData,a=e.rowData;return"".concat(t," ").concat(a.wareUnit.code)}function _a(e){return!0===e.cellData?r.a.createElement(O.Trans,{id:"Permitted"}):r.a.createElement(O.Trans,{id:"Forbidden"})}var Ma=Object(j.b)(function(){var e=Object(ge.a)(),t=Object(f.Mb)({branchId:e.branchId}),a=t.data,n=t.loading,c=e.filter.getPredicate({partialMatch:["code","nameLabel"],exactMatch:["plu"]}),i=n?[]:a.stockItems.filter(c);return r.a.createElement(Da,{stockItems:i,isLoading:n})}),Ba=function(){var e=Object(M.a)().getStockCreateRoute;return r.a.createElement(h.a,{pageTitle:g.b._("Stock overview"),useBackButton:!0},r.a.createElement(v.a,{forcePercentHeightInMobile:100},r.a.createElement(d.a,{stretchToParent:!0},r.a.createElement(Wt.b,null,r.a.createElement("div",{className:"filter"},r.a.createElement(b.a,{justify:"start",flexWrap:"wrap"},r.a.createElement(m.a,null,r.a.createElement(y.a,{width:20})),r.a.createElement(m.a,null,r.a.createElement(La.a,null))),r.a.createElement(Ra.a,{mutationName:"createStockItem"},r.a.createElement(_.a,{routeTo:e()}))),r.a.createElement("div",{className:"table"},r.a.createElement(Ma,null))))))},Va=a(1452);function qa(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Fa(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?qa(a,!0).forEach(function(t){Object(B.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):qa(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Aa=function(e){var t=e.stockId,a=e.isCreate,n=e.children,c=Object(ge.a)(),i=Object(M.a)().redirectToStockList,l=Object(oe.c)(function(e){return{code:e.string().required(),nameLabel:e.string().required(),wareUnit:e.string().required(),ingredients:e.array().of(e.object({quantity:e.string().required()}))}}),u=Object(f.x)(),s=Object(N.a)(u,1)[0],d=r.a.useCallback(function(){var e=Object(I.a)(L.a.mark(function e(t){var a;return L.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s({branchId:c.branchId});case 2:if(null!==(a=e.sent)){e.next=5;break}return e.abrupt("return",t);case 5:return e.abrupt("return",Fa({},t,{},{allowNegativeDefault:Ua(a.defaults.allowNegative)}));case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[c,s]),m=Object(f.y)(),b=Object(N.a)(m,1)[0],p=r.a.useCallback(function(){var e=Object(I.a)(L.a.mark(function e(a){var n;return L.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b({stockId:t},{fetchPolicy:"no-cache"});case 2:if(null!==(n=e.sent)){e.next=6;break}return i(),e.abrupt("return",a);case 6:return e.abrupt("return",Fa({},{id:(r=n.stockItem).id,internalNote:"TBD",nameLabel:r.nameLabel,code:r.code,note:r.note,plu:r.plu||"",wareUnit:r.wareUnit.enum,quantity:r.quantity,allergens:r.allergens.map(Ke.a.prop("enum")),allowNegative:r.allowNegative,allowNegativeDefault:Ua(r.companyBranch.allowNegative)}));case 7:case"end":return e.stop()}var r},e)}));return function(t){return e.apply(this,arguments)}}(),[b,i,t]),g=Object(f.bb)(),h=Object(N.a)(g,1)[0],v=r.a.useCallback(function(e){return h({stockItem:Fa({companyBranch:c.branchId},Ka(e))})},[h,c]),y=Object(f.eb)(),E=Object(N.a)(y,1)[0],O=r.a.useCallback(function(e){return E({stockId:t,stockItem:Ka(e)})},[t,E]);return r.a.createElement(ve,{isCreate:a,onCreate:v,onUpdate:O,initialValues:{id:"NEW",internalNote:"",nameLabel:"",code:"",plu:"",note:"",wareUnit:null,quantity:0,allergens:[],allowNegative:f.c.Default,allowNegativeDefault:f.c.Default},loadCreateDefaults:d,loadUpdateValues:p,validationSchema:l,successRedirectPath:o.d},n)};function Ua(e){return e?f.c.Default:f.c.Disabled}function Ka(e){return{code:e.code,label:e.nameLabel,note:e.note,plu:e.plu,allergens:e.allergens,wareUnit:e.wareUnit,allowNegative:e.allowNegative}}var za=function(){var e=Object(oe.d)("allergens"),t=r.a.useCallback(function(t){var a=e.value;a.includes(t)?e.setValue(Ke.a.without([t],a)):e.setValue([].concat(Object(F.a)(a),[t]))},[e]);return Object(j.g)(function(){return r.a.createElement(Le.a,{icon:ma.a,labelWidth:7},r.a.createElement(fa,{selected:e.value,onToggle:t}))})},Ha=a(217),Ga=[{type:f.c.Enabled,label:Object(Ha.i18nMark)("Permit")},{type:f.c.Disabled,label:Object(Ha.i18nMark)("Forbid")}],Qa=Object(j.b)(function(){var e=Object(oe.h)().values.allowNegativeDefault;return r.a.createElement(Le.a,{label:g.b._("Negative stock"),labelWidth:7},r.a.createElement(na,{items:Ga,fieldName:"allowNegative",getItemId:fe.RM.prop("type"),formatItem:function(t){return t.type===e?r.a.createElement("span",null,g.b._(t.label),r.a.createElement("i",null," (".concat(g.b._("Is default setting").toLocaleLowerCase(),")"))):g.b._(t.label)}}))}),Ja=a(2831),Ya=function(){return r.a.createElement(Le.a,{icon:Ja.a,labelWidth:7},r.a.createElement(Ct.a,{width:9},r.a.createElement(Qe.a,{fieldName:"plu",fullWidth:!0,placeholder:g.b._("PLU")})))},Xa=a(2832),Za=function(e){var t=Object(f.Ob)(),a=t.data,n=t.loading;return r.a.createElement(Le.a,{icon:Xa.a,labelWidth:7},r.a.createElement(Ve.a,{options:a.wareUnits,isLoading:n,getOptionLabel:Ke.a.prop("code"),getOptionValue:Ke.a.prop("enum"),placeholder:g.b._("Choose unit"),fieldName:"wareUnit",width:12}))},$a=function(){var e=Object(f.cb)(),t=Object(N.a)(e,1)[0];return r.a.createElement(Be,{primaryColumnWidth:"minmax(10rem, 54rem)",contentPrimary:r.a.createElement(Re.a,null,r.a.createElement(rt,{placeholder:g.b._("Card name")}),r.a.createElement(ua,{placeholder:g.b._("Card code")}),r.a.createElement(Za,null),r.a.createElement(Ya,null),r.a.createElement(Ze,{fieldName:"note",placeholder:g.b._("Card note"),label:g.b._("Card note")}),r.a.createElement(za,null),r.a.createElement(Qa,null)),contentBottomRight:r.a.createElement(Se,{mutationName:"destroyStockItem",confirmText:g.b._("Remove this card?"),onDelete:function(e){return t({stockId:e})}})})},en=a(1528),tn=function(e){var t=e.stockId,a=Object(f.lc)({stockId:t}),n=a.data;if(a.loading)return r.a.createElement(en.a,null);var c=n.stockItem.ingredients;return 0===c.length?r.a.createElement(D.a,null,r.a.createElement(O.Trans,{id:"No recipes are using stock card"})):r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a,null,r.a.createElement(O.Trans,{id:"Recipes using this card"})),r.a.createElement(S.f,{items:Object(F.a)(c),disableHeader:!0,fullHeight:!0},r.a.createElement(S.a,{dataKey:"",cellDataGetter:function(e){var t=e.rowData;return{pathname:"".concat(o.c,"/").concat(t.recipe.id),state:{recipeType:t.recipe.recipeType.enum}}},cellRenderer:S.b,width:100}),r.a.createElement(S.a,{dataKey:"recipe",width:300,label:g.b._("Name"),cellRenderer:function(e){var t=e.rowData;return r.a.createElement(r.a.Fragment,null,t.recipe.nameLabel,r.a.createElement(lt.a,null,t.recipe.descriptionLabel))}})))},an=function(e){var t=e.match.params.stockId,a=Object(M.a)(t).isCreate;return r.a.createElement(h.a,{pageTitle:g.b._("Stock card"),hideLogoutWidget:!0,useBackButton:!0},r.a.createElement(Aa,{isCreate:a,stockId:t},r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,null,r.a.createElement($a,null),!a&&r.a.createElement(Va.a,{queryName:"recipes"},r.a.createElement(tn,{stockId:t}))),r.a.createElement(le,null,r.a.createElement(be,{isCreate:a,createMutation:"createStockItem",updateMutation:"updateStockItem"})))))};a.d(t,"MenuRouting",function(){return nn});var nn=function(){return r.a.createElement(c.e,null,r.a.createElement(l.a,{path:"".concat(o.b,"/:categoryId"),component:Dt}),r.a.createElement(l.a,{path:o.b,component:ce}),r.a.createElement(l.a,{path:"".concat(o.c,"/:recipeId"),component:Pa}),r.a.createElement(l.a,{path:o.c,component:Wt.a}),r.a.createElement(l.a,{path:"".concat(o.d,"/:stockId"),component:an}),r.a.createElement(l.a,{path:o.d,component:Ba}),r.a.createElement(c.b,{to:o.b,from:o.a}),r.a.createElement(c.c,{component:i.a}))};t.default=nn}}]);
//# sourceMappingURL=187.46cdacb0.chunk.js.map