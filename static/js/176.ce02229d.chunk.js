(window.webpackJsonp=window.webpackJsonp||[]).push([[176],{7671:function(e,t,a){"use strict";a.d(t,"a",function(){return d});var n=a(0),r=a.n(n),i=a(18),o=a(7681),c=a(12),l=i.b.div.withConfig({displayName:"PageLayoutFullHeightItem__FullHeightDiv",componentId:"sc-1mean6j-0"})(["position:fixed;bottom:0.5rem;width:",";left:",";top:",";"],function(e){return void 0!==e.widthInColumns?"calc(("+e.widthInColumns+" * 6.22vw) - "+c.d.LayoutGridCellMargin+")":"calc(100vh - (2 * "+c.d.LayoutGridCellMargin+"))"},function(e){return void 0!==e.column?"calc(("+e.column+" * 6.22vw) + "+c.d.LayoutGridCellMargin+")":c.d.LayoutGridCellMargin},function(e){return void 0!==e.row?"calc(("+e.row+" * 3.9375rem) + "+c.d.LayoutGridCellMargin+")":"calc(3.9375rem + "+c.d.LayoutGridCellMargin+")"}),u=i.b.div.withConfig({displayName:"PageLayoutFullHeightItem__FullHeightDivStyled",componentId:"sc-1mean6j-1"})(["height:100%;"]),d=function(e){var t=e.children,a=e.row,n=void 0===a?1:a,i=e.column,c=void 0===i?0:i,d=e.widthInColumns,s=void 0===d?16:d,m=e.withScrollArea,f=void 0!==m&&m,p=e.scrollAreaId;return r.a.createElement(l,{column:c,row:n,widthInColumns:s,withScrollArea:f},f?r.a.createElement(o.a,{id:p},t):r.a.createElement(u,null,t))}},7672:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n=a(18).b.div.withConfig({displayName:"FlexRowSingle",componentId:"sc-1opww0j-0"})(["display:flex;flex-direction:row;justify-content:",";"],function(e){var t=e.justify;return void 0===t?"space-between":t})},7676:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n=a(18).b.div.withConfig({displayName:"VerticalGap",componentId:"z6ukut-0"})(["height:",";"],function(e){var t=e.size,a=void 0===t?1:t,n=e.sizeUnit,r=void 0===n?"rem":n;return"".concat(a).concat(r)});n.displayName="VerticalGap"},7681:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n=a(18).b.div.withConfig({displayName:"ScrollArea",componentId:"v30w13-0"})(["overflow-y:auto;-webkit-overflow-scrolling:touch;height:100%;"])},7696:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=a(18),r=Object(n.b)("div").withConfig({displayName:"CardDock",componentId:"sc-1fyaqia-0"})(["position:absolute;",";",";"],function(e){var t=e.position,a=void 0===t?"BottomRight":t;return"BottomLeft"===a||"TopLeft"===a?"left: 0":"right: 0"},function(e){var t=e.position,a=void 0===t?"BottomRight":t;return"BottomRight"===a||"BottomLeft"===a?"bottom: 0":"top: 0"})},7735:function(e,t,a){"use strict";function n(e){var t=e.toLocaleLowerCase();return function(e){return e.toLocaleLowerCase().includes(t)}}a.d(t,"a",function(){return n})},7776:function(e,t,a){"use strict";a.d(t,"a",function(){return d}),a.d(t,"b",function(){return s});var n=a(22),r=a(40),i=a(0),o=a.n(i),c=a(42),l=a(43),u=a(164),d=function(e){var t=e.to,a=e.from,n=Object(r.a)(e,["to","from"]);return o.a.createElement(c.Route,{children:function(e){var r=e.location;return o.a.createElement(l.b,Object.assign({to:s(t,a||"".concat(r.pathname,"/"))},n))}})};function s(e,t){if("string"===typeof e)return Object(u.a)(e,t);var a=Object(u.a)(e.pathname||"",t);return Object(n.a)({},e,{pathname:a})}},7781:function(e,t,a){"use strict";a.d(t,"a",function(){return h});var n=a(40),r=a(99),i=a(100),o=a(102),c=a(101),l=a(103),u=a(0),d=a.n(u),s=a(7656),m=a(21),f=a(38),p=a(7679),h=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(o.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(i)))).validate=function(e){var t=a.props,n=t.isRequired,r=t.isMulti,i=t.validationName;if(n){if(r&&(!Array.isArray(e)||0===e.length))return f.d._("{validationName} must have at least option selected",{validationName:i});if(!r&&(null===e||void 0===e))return f.d._("{validationName} must have a selection",{validationName:i})}return null},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"getControlProps",value:function(e){var t=this.props,a=t.isMulti,n=t.items,r=t.defaultSelection,i=t.getItemId,o=e.value||r;if(a){return{selectedItems:Array.isArray(o)?n.filter(function(e){return o.includes(i(e))}):[],onMultiSelection:function(t){e.setValue(t.map(i)),e.setTouched(!0)}}}return{selectedItem:o&&n.find(function(e){return i(e)===o}),onSingleSelection:function(t){e.setValue(t?i(t):null),e.setTouched(!0)}}}},{key:"render",value:function(){var e=this,t=this.props,a=t.field,r=t.fieldIsPure,i=void 0!==r&&r,o=t.isRequired,c=void 0!==o&&o,l=t.isClearable,u=void 0!==l&&l,m=Object(n.a)(t,["field","fieldIsPure","isRequired","isClearable"]);return d.a.createElement(s.Field,{field:a,pure:i,validate:this.validate},function(t){return d.a.createElement(p.a,Object.assign({},e.getControlProps(t),{isInvalid:Boolean(t.error),isClearable:u&&!c},m))})}}]),t}(d.a.Component);h.defaultProps={validationName:f.d._("Value"),getItemId:m.a.prop("id")}},7785:function(e,t,a){"use strict";a.d(t,"a",function(){return u});var n=a(0),r=a.n(n),i=a(7777),o=a(18),c=a(88),l=o.b.div.withConfig({displayName:"DragHandle__DragHandleContainerStyled",componentId:"xbsz8c-0"})(["padding:1rem 0.4rem;cursor:grab;"]),u=Object(i.SortableHandle)(function(){return r.a.createElement(l,null,r.a.createElement(c.a,{iconName:"reorder"}))})},7946:function(e,t,a){"use strict";a.d(t,"a",function(){return g});var n=a(22),r=a(40),i=a(99),o=a(100),c=a(102),l=a(101),u=a(103),d=a(0),s=a.n(d),m=a(7656),f=a(21),p=a(38),h=a(7663),g=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).validate=function(e){return a.props.isRequired&&!e?p.d._("{0} must be selected",{0:a.props.validatioName}):null},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"getControlProps",value:function(e){var t=this.props,a=t.isMulti,n=t.options,r=t.getOptionValue,i=t.defaultValue,o=e.value||i;if(a){var c=Array.isArray(o)?function(e){return o.includes(r(e))}:f.a.F;return{value:Array.isArray(n)?n.filter(c):[],onChange:function(t){e.setValue(t.map(r))}}}return{value:o&&n.find(function(e){return r(e)===o}),onChange:function(t){e.setValue(r(t))}}}},{key:"render",value:function(){var e=this,t=this.props,a=t.field,i=t.fieldIsPure,o=void 0!==i&&i,c=(t.isRequired,t.defaultValue,Object(r.a)(t,["field","fieldIsPure","isRequired","defaultValue"]));return s.a.createElement(m.Field,{field:a,validate:this.validate,pure:o},function(t){return s.a.createElement(h.a,Object.assign({},e.getControlProps(t),{onFocus:function(){return t.setTouched(!0)},styles:{control:function(e){return Boolean(t.error)?Object(n.a)({},e,{borderColor:"red"}):e}}},c))})}}]),t}(s.a.Component);g.defaultProps={validatioName:"Value",getItemId:f.a.prop("id")}},8129:function(e,t,a){},8130:function(e,t,a){t.pictograms=a(8131)},8131:function(e,t){e.exports=["pizza","beans","cheese","hot-pepper","smoking-barbecue","meat-pie","sausage","hot-dog","fruit","fruit-1","fruit-2","strawberry","soup","noodles","ramen","rice","spaghetti","food","piece-of-cake","beer","marshmallow","cake","banana-split","ice-cream","cookie","doughnut","cupcake","kebab","steak","fish","fondue","shrimp","berry","food","food-1","food-2","food-3","food-4","food-5","food-6","food-7","food-8","food-9","food-10","food-11","food-12","food-13","food-14","food-15","food-16","food-17","food-18","food-19","food-20","food-21","food-22","food-23","food-24","food-25","food-26","food-27","food-28","food-29","food-30","drink","drink-1","drink-2","drink-3","drink-4","drink-5","cup","cup-1","cup-2","whisky"]},8134:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(42),o=a(153),c=a(74),l=a(18),u=a(298),d=a(7678),s=a(7672),m=a(7676),f=a(24),p=a(38),h=a(299),g=a(7671),v=a(7730),b=a(8),E=a.n(b),y=a(11),w=a(22),C=a(47),O=a(285),j=a(7665),k=a(53),I=a(329),T=a(40),R=a(99),_=a(100),S=a(102),x=a(101),L=a(103),D=(a(8129),a(7786)),N=a(7776),B=a(12),F=a(295),P=function(e){var t=e.target,a=e.Link,n=void 0===a?N.a:a,i=Object(T.a)(e,["target","Link"]);return r.a.createElement(n,{to:t},r.a.createElement(F.a,Object.assign({iconName:"mode_edit",width:B.d.ButtonHeight,height:B.d.ButtonHeight},i)))};function W(){return(W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var q=function(e){var t=W({},e);return r.a.createElement(F.a,Object.assign({iconName:"remove_circle_outline",width:B.d.ButtonHeight,height:B.d.ButtonHeight},t))},M=function(e){var t=e.isVisible,a=Object(T.a)(e,["isVisible"]);return r.a.createElement(F.a,Object.assign({iconName:"remove_red_eye",width:B.d.ButtonHeight,height:B.d.ButtonHeight,iconColor:t?B.a.white:B.a.greyMiddle,color:B.a.greyMiddle},a))},V=a(7661),A=a(7673),K=a(65),H=function(e){function t(){return Object(R.a)(this,t),Object(S.a)(this,Object(x.a)(t).apply(this,arguments))}return Object(L.a)(t,e),Object(_.a)(t,[{key:"renderTable",value:function(e,t){var a=this.props,n=a.items,i=a.children,o=a.isLoading,c=a.heightStretch,l=Object(T.a)(a,["items","children","isLoading","heightStretch"]);return r.a.createElement(D.h,Object.assign({autoHeight:!c,width:e,height:t,headerHeight:50,rowHeight:60,rowCount:n?n.length:0,rowGetter:function(e){var t=e.index;return n[t]},noRowsRenderer:function(){return o?r.a.createElement(K.a,null):null}},l),i)}},{key:"render",value:function(){var e=this;return this.props.heightStretch?r.a.createElement(D.a,null,function(t){var a=t.width,n=t.height;return e.renderTable(a,n)}):r.a.createElement(D.i,{scrollElement:window},function(t){var a=t.height;return r.a.createElement(D.a,{disableHeight:!0},function(t){var n=t.width;return e.renderTable(n,a)})})}}]),t}(n.Component);function U(e,t){var a=e.canQuery,n=e.canMutate;return function(e){var i=t(e);return a&&(i=r.a.createElement(A.a,{queryName:a},i)),n&&(i=r.a.createElement(V.a,{mutationName:n},i)),i}}function G(e){var t=e.cellData;return r.a.createElement(P,{target:t})}function z(e){var t=e.cellData,a=e.columnData;return r.a.createElement(q,{onClick:function(){return a.onRemove&&a.onRemove(t)}})}function Q(e){var t=e.cellData,a=e.columnData,n=e.rowData;return r.a.createElement(M,{isVisible:t,onClick:function(){return a.onToggle(n.id,!t)}})}H.defaultProps={heightStretch:!1};var $=l.b.div.withConfig({displayName:"DataTable__NoteText",componentId:"sc-1d9kay5-0"})(["color:",";"],B.a.greyMiddle);function J(e){var t=e.cellData,a=e.rowData,n=e.columnData;return r.a.createElement(r.a.Fragment,null,t,r.a.createElement($,null,a[n.noteKey]))}var X=Object(l.b)(function(e){var t=e.text,a=void 0===t?p.d._("Table is empty"):t,n=Object(T.a)(e,["text"]);return r.a.createElement("div",n,a)}).withConfig({displayName:"DataTable__DataTableEmptyText",componentId:"sc-1d9kay5-1"})(["padding:1rem;color:",";font-style:'italic';"],B.a.greyMiddle),Y=a(7785),Z=a(301),ee=a(7777),te=Object(ee.SortableElement)(function(e){var t=e.columns,a=e.style,n=e.className;return r.a.createElement("div",{style:a,className:n},t)}),ae=Object(ee.SortableContainer)(H),ne=function(e){function t(){var e,a;Object(R.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(S.a)(this,(e=Object(x.a)(t)).call.apply(e,[this].concat(r)))).state={sortedItems:a.props.items},a.onHandleSorting=function(){var e=Object(y.a)(E.a.mark(function e(t){var n,r,i,o,c;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.newIndex,r=t.oldIndex,n!==r){e.next=3;break}return e.abrupt("return");case 3:if(i=Object(Z.a)(a.state.sortedItems),o=Object(ee.arrayMove)(a.state.sortedItems,r,n),a.setState({sortedItems:o}),!a.props.onSort){e.next=15;break}if(c=a.props.onSort({item:i[r],items:o,offset:n-r,newIndex:n,oldIndex:r}),e.t0=c,!e.t0){e.next=13;break}return e.next=12,c;case 12:e.t0=!e.sent;case 13:if(!e.t0){e.next=15;break}a.setState({sortedItems:i});case 15:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(L.a)(t,e),Object(_.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.items,e.isLoading),a=Object(T.a)(e,["items","isLoading"]);return r.a.createElement(ae,Object.assign({useDragHandle:!0,lockAxis:"y",lockToContainerEdges:!0,onSortEnd:this.onHandleSorting,rowRenderer:function(e){return r.a.createElement(te,e)},isLoading:t},a,{items:this.state.sortedItems}))}}]),t}(r.a.Component);ne.getDerivedStateFromProps=function(e){return{sortedItems:e.items}};var re=function(e){var t=e.categories,a=e.onToggle,n=e.onRemove,i=e.onSort,o=e.showEditColumn,c=void 0===o||o,l=e.showRemoveColumn,u=void 0!==l&&l,d=e.showVisibilityColumn,s=void 0!==d&&d,m=e.showHeader,f=void 0===m||m,h=e.isSortable,g=void 0!==h&&h,v=e.isLoading,b=void 0!==v&&v,E=e.heightStretch,y=void 0!==E&&E,w=e.noRowsDisplay,C=void 0===w?r.a.createElement(X,{text:p.d._("No recipes in category")}):w,O={isLoading:b,items:t,disableHeader:!f,noRowsRenderer:function(){return C}};return r.a.createElement(function(e){var t=e.children;return g?r.a.createElement(ne,Object.assign({heightStretch:y,onSort:i},O),t):r.a.createElement(H,Object.assign({heightStretch:y},O),t)},null,c&&r.a.createElement(D.d,{dataKey:"id",width:B.d.ButtonColumnWidthPx,minWidth:B.d.ButtonColumnWidthPx,cellRenderer:U({canQuery:"wareCategory"},G),cellDataGetter:function(e){var t=e.rowData;return Object(I.b)(t.id,t.categoryType.enum)}}),u&&r.a.createElement(D.d,{dataKey:"id",width:B.d.ButtonColumnWidthPx,minWidth:B.d.ButtonColumnWidthPx,cellRenderer:z,columnData:{onRemove:n}}),s&&r.a.createElement(D.d,{dataKey:"visible",width:B.d.ButtonColumnWidthPx,minWidth:B.d.ButtonColumnWidthPx,cellRenderer:U({canMutate:"updateWareCategory"},Q),columnData:{onToggle:a}}),r.a.createElement(D.d,{dataKey:"nameLabel",width:300,label:p.d._("Name"),cellRenderer:J,columnData:{noteKey:"internalNoteLabel"}}),r.a.createElement(D.d,{dataKey:"countRecipes",label:p.d._("Recipe count"),width:100,cellRenderer:function(e){var t=e.cellData;return"".concat(t," ").concat(p.d._("Recipes").toLocaleLowerCase())}}),g&&r.a.createElement(D.d,{dataKey:"id",width:50,cellRenderer:function(){return r.a.createElement(Y.a,null)}}))},ie=l.b.div.withConfig({displayName:"CreateButton__CreateButtonContainer",componentId:"sc-837yoh-0"})(["position:absolute;right:0;z-index:5;"]),oe=function(e){var t=e.routeTo,a=void 0===t?"create":t,n=e.onClick;return r.a.createElement(ie,null,r.a.createElement(N.a,{to:a,onClick:n},r.a.createElement(F.a,{iconName:"add_circle",color:B.a.green,width:B.d.ButtonHeight,height:B.d.ButtonHeight})))},ce=a(147),le=Object(C.b)(function(e){var t=e.headline,a=e.subHeadline,n=void 0!==a&&a,i=e.categoryType,o=e.heightStretch,c=void 0!==o&&o,l=Object(k.c)().settings,u=Object(O.a)(ce.a,Object(w.a)({},l.getQueryProps({categoryType:i}),{suspend:!1})),m=u.data,f=u.loading,p=u.updateQuery,h=u.refetch,g=m&&m.categories||[];return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,null,r.a.createElement(d.a,{widthGrowIndex:1},r.a.createElement(j.a,null,t),n&&r.a.createElement(j.a,{size:"smaller"},n)),r.a.createElement(d.a,{fixedWidth:!0},r.a.createElement(oe,{routeTo:Object(I.b)("create",i)}))),r.a.createElement(re,{isLoading:f,categories:g,onToggle:l.menu.category.changeVisibility,isSortable:!0,showHeader:!1,heightStretch:c,showVisibilityColumn:!0,onSort:function(){var e=Object(y.a)(E.a.mark(function e(t){var a,n,r,i;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.item,n=t.items,r=t.offset,p(function(){return{categories:n}}),e.next=4,l.menu.category.sortCategory(a.id,r);case 4:if(!(i=e.sent)){e.next=8;break}return e.next=8,h();case 8:return e.abrupt("return",i);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}))}),ue=a(66),de=a(2),se=a(3),me=a.n(se);function fe(){var e=Object(de.a)(["\n  query QMenuGuideDownload($branchId: ID!) {\n    companyBranch(id: $branchId) {\n      id\n      foodMenuUrl\n    }\n  }\n"]);return fe=function(){return e},e}var pe,he,ge=me()(fe()),ve=Object(l.b)(F.a).withConfig({displayName:"MenuGuideDownload__MenuGuideDownloadButton",componentId:"sc-1kyx0kn-0"})(["white-space:nowrap;margin-left:2rem;& a{text-decoration:none;color:",";padding:1rem;}"],B.a.black),be=Object(C.b)(function(){var e=Object(k.c)().settings,t=Object(O.a)(ge,{suspend:!1,variables:{branchId:e.branchId}}),a=t.loading,n=t.data;return a||!(n&&n.companyBranch&&n.companyBranch.foodMenuUrl)?null:r.a.createElement(ve,{color:B.a.greyMiddle},r.a.createElement("a",{href:n.companyBranch.foodMenuUrl,target:"_blank"},r.a.createElement(ue.Trans,{id:"Menu codes manual"})))}),Ee=l.b.div.withConfig({displayName:"MenuCategoryListPage__PartialDataTableContainer",componentId:"sc-1y45l0l-0"})(["height:calc(100% - 3.5rem);padding-top:1rem;overflow-y:scroll;overflow-x:hidden;-webkit-overflow-scrolling:touch;"]),ye=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{pageTitle:p.d._("Category overview"),useBackButton:!0}),r.a.createElement(g.a,null,r.a.createElement(u.a,{stretchToParent:!0},r.a.createElement(s.a,{justify:"start"},r.a.createElement(d.a,null,r.a.createElement(v.a,{width:20})),r.a.createElement(d.a,null,r.a.createElement(be,null))),r.a.createElement(Ee,null,r.a.createElement(le,{categoryType:f.n.Main,headline:p.d._("Category of recipes"),heightStretch:!1}),r.a.createElement(m.a,{size:1.5}),r.a.createElement(le,{categoryType:f.n.SideDish,headline:p.d._("Category of sidedish"),heightStretch:!1}),r.a.createElement(m.a,{size:1.5}),r.a.createElement(le,{categoryType:f.n.Cover,headline:p.d._("Category of covers"),heightStretch:!1})))))},we=l.b.div.withConfig({displayName:"TopRightButtonContainer",componentId:"sc-1n6vrhf-0"})(["position:fixed;z-index:500;right:0;top:0rem;width:10rem;opacity:0.96;background:",";border-radius:",";"],B.a.black,B.c.Button),Ce=a(151),Oe=a(201),je=(pe={},Object(Ce.a)(pe,f.n.Main,Object(Oe.i18nMark)("Ware categories")),Object(Ce.a)(pe,f.n.SideDish,Object(Oe.i18nMark)("Sidedish categories")),Object(Ce.a)(pe,f.n.Cover,Object(Oe.i18nMark)("Cover categories")),pe),ke=(he={},Object(Ce.a)(he,f.n.Main,Object(Oe.i18nMark)("Ware recipe")),Object(Ce.a)(he,f.n.SideDish,Object(Oe.i18nMark)("Sidedish recipe")),Object(Ce.a)(he,f.n.Cover,Object(Oe.i18nMark)("Cover recipe")),he);function Ie(e){return p.d._(je[e])}function Te(e){return p.d._(ke[e])}var Re=a(7656),_e=a(7704),Se=a(7703),xe=function(e){var t=e.isCreate,a=void 0!==t&&t;return r.a.createElement(Re.FormApi,{render:function(e){return r.a.createElement(Se.a,{id:"form-submit"},function(e,t){if(!Object(_e.a)(e))return p.d._("Fix form errors");return t?p.d._("Create"):p.d._("Save")}(e,a))}})};var Le=a(7696),De=l.b.form.withConfig({displayName:"FormContainer",componentId:"sc-38ce8s-0"})(["margin:0.6rem;display:flex;"]),Ne=l.b.div.withConfig({displayName:"FormContainer__FormColumn",componentId:"sc-38ce8s-1"})(["flex:none;margin-right:1rem;"]),Be=a(7783),Fe=a(7666),Pe=a(7719),We=a(8130),qe=l.b.div.withConfig({displayName:"PictogramDisplay__PictogramDisplayStyled",componentId:"sc-6st3s9-0"})(["&:before{font-size:"," !important;margin-left:0.5rem !important;}"],function(e){var t=e.fontSize,a=void 0===t?2:t,n=e.fontSizeUnit,r=void 0===n?"rem":n;return"".concat(a).concat(r)}),Me=function(e){var t=e.pictogramId,a=e.fontSize,n=void 0===a?2:a,i=e.fontSizeUnit,o=void 0===i?"rem":i;return r.a.createElement(qe,{className:Ve(t),fontSize:n,fontSizeUnit:o})};function Ve(e){return"flaticon-".concat(e)}var Ae=a(7663),Ke=a(21),He=function(e){var t=e.field;return r.a.createElement(Re.Field,{field:t,pure:!0},function(e){return r.a.createElement(Ae.a,{value:e.value?{pictogram:e.value}:null,onChange:function(t){t&&!Array.isArray(t)&&e.setValue(t.pictogram)},options:We.pictograms.map(function(e){return{pictogram:e}}),getOptionValue:Ke.a.prop("pictogram"),formatOptionLabel:function(e){var t=e.pictogram;return r.a.createElement(Me,{pictogramId:t,fontSize:2})},components:{SingleValue:function(e){var t=e.data;return r.a.createElement(Me,{pictogramId:t.pictogram,fontSize:4})}},styles:{container:function(e){return Object(w.a)({},e,{width:"8rem"})},menuList:function(e){return Object(w.a)({},e,{maxHeight:"35rem"})}},isClearable:!1,isSearchable:!1,minWidth:8})})},Ue=a(7722),Ge=function(e){var t=e.confirmText,a=e.onDelete;return r.a.createElement(Re.Field,{field:"id"},function(e){return"NEW"!==e.value&&r.a.createElement(i.Route,null,function(n){var i=n.history;return r.a.createElement(Ue.a,{confirmText:t,onDelete:Object(y.a)(E.a.mark(function t(){return E.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a(e.value);case 2:i.goBack();case 3:case"end":return t.stop()}},t,this)}))})})})},ze=a(7664),Qe=a(7658),$e=function(e){var t=e.field,a=void 0===t?"internalNote":t,n=(e.icon,e.label),i=void 0===n?p.d._("Internal note").toLocaleLowerCase():n,o=Object(T.a)(e,["field","icon","label"]);return r.a.createElement(Qe.a,{label:i,labelWidth:7},r.a.createElement(ze.a,Object.assign({field:a,inputFullWidth:!0},o)))},Je=function(e){var t=e.field,a=void 0===t?"nameLabel":t,n=e.icon,i=void 0===n?"label":n,o=Object(T.a)(e,["field","icon"]);return r.a.createElement(Qe.a,{icon:i,labelWidth:7},r.a.createElement(ze.a,Object.assign({field:a,inputFullWidth:!0,isRequired:!0,validatioName:p.d._("Name")},o)))},Xe=function(e){var t=e.categoryType;return r.a.createElement(De,null,r.a.createElement(Ne,null,r.a.createElement(Fe.a,{width:22},r.a.createElement(Je,{placeholder:p.d._("Category name"),inputFullWidth:!0})),r.a.createElement(Fe.a,{width:22},r.a.createElement($e,{placeholder:p.d._("Category internal note")})),r.a.createElement(Be.a,{field:"visible",label:p.d._("To show this category")})),t===f.n.Main?r.a.createElement(Ne,null,r.a.createElement(He,{field:"pictogram"})):null,r.a.createElement(Le.a,{position:"BottomRight"},r.a.createElement(Pe.a,{render:function(e){var a=e.menu;return r.a.createElement(Ge,{confirmText:p.d._("Remove this category?"),onDelete:function(e){return a.category.deleteCategory(e,t)}})}})))},Ye=a(56),Ze=a(51),et=a(124);function tt(e){var t=e.shouldLoad,a=e.loader,i=Object(T.a)(e,["shouldLoad","loader"]),o=Object(n.useState)(null),c=Object(et.a)(o,2),l=c[0],u=c[1];return Object(n.useEffect)(function(){t&&a().then(u)},[t]),r.a.createElement(Re.Form,Object.assign({values:l},i))}var at=function(e){var t=e.render;return r.a.createElement(i.Route,null,function(e){var a=e.history;return t?t(function(){return a.goBack()}):(a.goBack(),null)})},nt=a(15),rt=l.b.div.withConfig({displayName:"MenuBaseFormLoader__ErrorPop",componentId:"sc-18epk2-0"})(["color:red;padding:1rem;max-width:30rem;overflow-wrap:break-word;"]),it=function(e){function t(){var e,a;Object(R.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(S.a)(this,(e=Object(x.a)(t)).call.apply(e,[this].concat(r)))).state={submitError:null,validationErrors:null},a}return Object(L.a)(t,e),Object(_.a)(t,[{key:"renderErrors",value:function(){var e=this.state,t=e.submitError,a=e.validationErrors;return t?this.renderSubmitError(t):a?this.renderValidationErrors(a):null}},{key:"renderSubmitError",value:function(e){var t=[p.d._("Unexpected error while sending form. Out team was notified about the issue.")];if(Object(Ze.b)(e)){var a=Ke.a.propEq("showToUser",!0),n=e.graphQLErrors.filter(a).map(Ke.a.prop("message"));n.length&&(t=n)}return this.renderPopover(t)}},{key:"renderValidationErrors",value:function(e){return null}},{key:"renderPopover",value:function(e){var t=this;return r.a.createElement(Ye.g,{open:!0,anchorEl:function(){return document.getElementById("submit-button")},onClose:function(){return t.setState({submitError:null,validationErrors:null})},anchorOrigin:{vertical:"bottom",horizontal:"center"}},e.map(function(e,t){return r.a.createElement(rt,{key:t},e)}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.isCreate,n=t.onCreate,i=t.onUpdate,o=t.getDefaultValues,c=t.loadValues,l=t.loadDefaults,u=t.children;return r.a.createElement(at,{render:function(t){return r.a.createElement(tt,{shouldLoad:!0,defaultValues:o(),loader:Object(y.a)(E.a.mark(function e(){var t,n,r;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o(),!l){e.next=6;break}return e.next=4,l();case 4:n=e.sent,Object.assign(t,n);case 6:if(!a){e.next=8;break}return e.abrupt("return",t);case 8:return e.next=10,c();case 10:return r=e.sent,e.abrupt("return",Object.assign({},t,r));case 12:case"end":return e.stop()}},e,this)})),onChange:function(e){return Object(nt.e)("new values",e.values)},onSubmit:function(){var e=Object(y.a)(E.a.mark(function e(r){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=5;break}return e.next=3,n(r);case 3:e.next=7;break;case 5:return e.next=7,i(r);case 7:t();case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),onSubmitFailure:function(t,a){e.setState({validationErrors:t,submitError:a}),Object.keys(t).length&&Object(nt.d)("validation errors",t),a&&Object(nt.d)("submit error",a)}},u,e.renderErrors())}})}}]),t}(r.a.Component);function ot(){return Object(k.c)().settings.menu}var ct=a(457),lt=function(e){var t=e.categoryId,a=e.categoryType,n=e.children,i=ot();return r.a.createElement(it,{isCreate:null===t,onCreate:function(e){return i.category.createCategory(e,a)},onUpdate:function(e){return i.category.updateCategory(e,a)},getDefaultValues:function(){return function(e){return{id:"NEW",visible:!0,internalNoteLabel:"",pictogram:"",nameLabel:"",categoryType:{enum:e},recipes:[]}}(a)},loadValues:Object(y.a)(E.a.mark(function e(){var a,n;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.client.query({query:ct.b,variables:{categoryId:t},fetchPolicy:"no-cache"});case 2:return a=e.sent,n=a.data,e.abrupt("return",n.wareCategory);case 5:case"end":return e.stop()}},e,this)}))},n)};var ut=a(7978),dt=a(321),st=function(e){var t=e.recipes,a=e.onToggle,n=e.onRemove,i=e.onSortRecipe,o=e.showEditColumn,c=void 0===o||o,l=e.showRemoveColumn,u=void 0!==l&&l,d=e.showVisibilityColumn,s=void 0===d||d,m=e.showTypeColumn,h=void 0!==m&&m,g=e.isSortable,v=void 0!==g&&g,b=e.isLoading,E=void 0!==b&&b,y=e.heightStretch,w={isLoading:E,items:t,heightStretch:void 0!==y&&y,noRowsRenderer:function(){return E?r.a.createElement(ut.a,null):r.a.createElement(j.a,null,p.d._("No recipes has been found"))}};return r.a.createElement(function(e){var t=e.children;return v?r.a.createElement(ne,Object.assign({onSort:i},w),t):r.a.createElement(H,w,t)},null,c&&r.a.createElement(D.d,{dataKey:"id",width:B.d.ButtonColumnWidthPx,minWidth:B.d.ButtonColumnWidthPx,cellRenderer:U({canQuery:"recipe"},G),cellDataGetter:function(e){var t=e.rowData;return Object(dt.b)(t.id,t.recipeType.enum)}}),u&&r.a.createElement(D.d,{dataKey:"id",width:B.d.ButtonColumnWidthPx,minWidth:B.d.ButtonColumnWidthPx,cellRenderer:z,columnData:{onRemove:n}}),s&&r.a.createElement(D.d,{dataKey:"visible",width:B.d.ButtonColumnWidthPx,minWidth:B.d.ButtonColumnWidthPx,cellRenderer:U({canMutate:"updateRecipe"},Q),columnData:{onToggle:a}}),h&&r.a.createElement(D.d,{dataKey:"recipeType",width:100,label:p.d._("Type"),cellRenderer:ft}),r.a.createElement(D.d,{dataKey:"code",width:100,label:p.d._("Code")}),r.a.createElement(D.d,{dataKey:"nameLabel",width:600,flexGrow:2,label:p.d._("Name"),cellRenderer:J,columnData:{noteKey:"internalNote"}}),r.a.createElement(D.d,{dataKey:"prices",width:150,label:p.d._("Delivery sale"),cellRenderer:mt,columnData:{priceType:f.o.Delivery}}),r.a.createElement(D.d,{dataKey:"prices",width:150,label:p.d._("Local sale"),cellRenderer:mt,columnData:{priceType:f.o.Inhouse}}),r.a.createElement(D.d,{dataKey:"availableAmount",label:p.d._("recipe.list.availableAmount",{},{defaults:"Stock"}),width:100}),r.a.createElement(D.d,{dataKey:"internalNote",label:p.d._("Internal note"),width:200}),v&&r.a.createElement(D.d,{dataKey:"id",width:50,cellRenderer:function(){return r.a.createElement(Y.a,null)}}))};function mt(e){var t=e.cellData,a=e.columnData.priceType,n=t.find(Ke.a.pathEq(["priceType","enum"],a));return n?n.price.formattedValue:r.a.createElement("i",null,p.d._("Not set").toLocaleLowerCase())}function ft(e){var t=e.rowData.recipeType.enum;return t===f.n.SideDish?p.d._("Sidedish").toLocaleLowerCase():t===f.n.Cover?p.d._("Cover").toLocaleLowerCase():p.d._("Ware").toLocaleLowerCase()}var pt=a(64);function ht(e){var t=e.onAdd,a=e.addLabel,i=void 0===a?p.d._("Add"):a,o=e.addButtonText,c=void 0===o?p.d._("Add"):o,l=Object(T.a)(e,["onAdd","addLabel","addButtonText"]),u=Object(pt.useStateRef)(null),m=Object(et.a)(u,2),f=m[0],h=m[1],g=Object(n.useCallback)(function(){var e=f();null!==e&&(t(e),h(null))},[t]),v=Object(n.useCallback)(function(e){"Enter"===e.key&&g()},[]),b=Object(n.useCallback)(function(e){h(e||null)},[]);return r.a.createElement(s.a,{justify:"flex-start"},r.a.createElement(d.a,{fixedWidth:!0,width:"4rem",margin:"auto 0"},i),r.a.createElement(d.a,{fixedWidth:!0,width:"20rem",margin:"auto 0"},r.a.createElement(Ae.a,Object.assign({value:f(),onChange:b,onKeyDown:v,isMulti:!1,isClearable:!1,getOptionValue:Ke.a.prop("id"),getOptionLabel:Ke.a.prop("nameLabel")},l))),r.a.createElement(d.a,{fixedWidth:!0,width:"10rem",margin:"auto 0"},r.a.createElement(F.a,{text:c,disabled:null===f(),onClick:g})))}var gt=a(71),vt=a(97);function bt(){var e=Object(de.a)(["\n  query GMenuRecipeList(\n    $branchId: ID!\n    $categoryId: ID\n    $categoryType: WareCategoryTypeEnum\n  ) {\n    recipes(\n      companyBranch: $branchId\n      wareCategory: $categoryId\n      wareCategoryType: $categoryType\n    ) {\n      ...GMenuRecipe\n    }\n  }\n  ","\n"]);return bt=function(){return e},e}var Et=me()(bt(),vt.c),yt=Object(gt.a)(Et),wt=function(e){var t=e.categoryType,a=e.filterRecipes,n=e.onAdd;return r.a.createElement(Pe.a,{observe:!0,render:function(e){return r.a.createElement(yt,Object.assign({},e.getQueryProps({categoryType:t}),{fetchPolicy:"cache-and-network",render:function(e){var t=e.recipes;return r.a.createElement(ht,{options:a(t),onAdd:n})}}))}})},Ct=l.b.div.withConfig({displayName:"CategoryRecipesView__FormContainer",componentId:"sc-1g4q35k-0"})(["display:flex;flex-direction:column;height:calc(100% - 2rem);width:100%;"]),Ot=l.b.div.withConfig({displayName:"CategoryRecipesView__FormFixedRow",componentId:"sc-1g4q35k-1"})(["flex:0 0 auto;"]),jt=l.b.div.withConfig({displayName:"CategoryRecipesView__FormStretchedRow",componentId:"sc-1g4q35k-2"})(["flex:1 1 0;min-height:0;position:relative;overflow-y:auto;-webkit-overflow-scrolling:touch;height:100%;overflow-x:hidden;"]),kt=function(e){var t=e.categoryType;return r.a.createElement(Re.Field,{field:"recipes"},function(e){return r.a.createElement(Ct,null,r.a.createElement(Ot,null,r.a.createElement(wt,{categoryType:t,filterRecipes:Ke.a.without(e.value),onAdd:function(t){return e.setValue(e.value.concat(t))}})),r.a.createElement(jt,null,r.a.createElement(st,{recipes:e.value,isSortable:!0,showRemoveColumn:!0,showEditColumn:!1,showVisibilityColumn:!1,heightStretch:!1,onRemove:function(t){return e.setValue(Ke.a.reject(Ke.a.propEq("id",t),e.value))},onSortRecipe:function(t){var a=t.items;e.setValue(a)}})))})},It=l.b.div.withConfig({displayName:"MenuCategoryPage__FormContainer",componentId:"sc-154ix5u-0"})(["display:flex;flex-direction:column;height:100%;width:100%;"]),Tt=l.b.div.withConfig({displayName:"MenuCategoryPage__FormFixedRow",componentId:"sc-154ix5u-1"})(["flex:0 0 8rem;"]),Rt=l.b.div.withConfig({displayName:"MenuCategoryPage__FormStretchedRow",componentId:"sc-154ix5u-2"})(["flex:1 1 0;min-height:0;position:relative;"]),_t=function(e){var t=e.categoryId,a=e.categoryType;return r.a.createElement(lt,{categoryId:t,categoryType:a},r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{pageTitle:Ie(a),hideLogoutWidget:!0,useBackButton:!0}),r.a.createElement(g.a,null,r.a.createElement(It,null,r.a.createElement(Tt,null,r.a.createElement(u.a,null,r.a.createElement(Xe,{categoryType:a}))),r.a.createElement(Rt,null,r.a.createElement(u.a,{stretchToParent:!0},r.a.createElement(j.a,null,r.a.createElement(ue.Trans,{id:"Recipes assigned to this category"})),r.a.createElement(kt,{categoryType:a}))))),r.a.createElement(we,null,r.a.createElement(V.a,{mutationName:null===t?"createWareCategory":"updateWareCategory"},r.a.createElement(xe,{isCreate:null===t})))))},St=l.b.div.withConfig({displayName:"DataTableContainer",componentId:"sc-1ammizr-0"})(["height:calc(100% - 4.5rem);padding-top:2rem;"]);function xt(){var e=Object(de.a)(["\n  query QMenuCategoryFilter($branchId: ID!) {\n    categories: wareCategories(companyBranch: $branchId) {\n      id\n      nameLabel\n      countRecipes\n      categoryType: wareCategoryType {\n        enum\n      }\n    }\n  }\n"]);return xt=function(){return e},e}var Lt=me()(xt()),Dt=function(){var e=Object(k.c)().settings.menu.recipe,t=Object(O.a)(Lt,{suspend:!1,variables:{branchId:e.branchId}}),a=t.data,n=t.loading;return r.a.createElement(Fe.a,{width:17},r.a.createElement(Ae.a,{onChange:function(t){return e.setCategoryFilter(t.id)},options:function(){if(!a||!a.categories)return[];var e=Ke.a.groupBy(function(e){return e.categoryType.enum.toString()},a.categories);return Object.keys(e).map(function(t){return{label:Ie(t),options:e[t]}})}(),isMulti:!1,isClearable:!1,isLoading:n,placeholder:p.d._("Filter by category"),getOptionValue:Ke.a.prop("id"),getOptionLabel:Ke.a.prop("nameLabel")}))},Nt=a(150),Bt=a(7667),Ft=function(e){var t=e.modelType,a=Object(k.c)().settings.menu[t],n=Object(pt.useDebounceCallback)(a.setFilterInput);return r.a.createElement(Qe.a,{icon:Nt.i},r.a.createElement(Fe.a,{width:17},r.a.createElement(Bt.a,{inputFullWidth:!0,onChange:function(e){return n(e.target.value)},placeholder:p.d._("Filter by name or code")})))},Pt=function(e){var t=e.to,a=e.from,n=Object(T.a)(e,["to","from"]);return r.a.createElement(i.Redirect,Object.assign({to:Object(N.b)(t,a||"".concat(location.pathname,"/")),from:a},n))},Wt=function(e){function t(){var e,a;Object(R.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(S.a)(this,(e=Object(x.a)(t)).call.apply(e,[this].concat(r)))).state={isOpen:!1,recipeType:null},a.onClose=function(){a.setState({isOpen:!1})},a.onOpen=function(){a.setState({isOpen:!0})},a.onSelect=function(e){return function(){a.setState({isOpen:!0,recipeType:e})}},a}return Object(L.a)(t,e),Object(_.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.isOpen,n=t.recipeType;return r.a.createElement(r.a.Fragment,null,null!==n&&r.a.createElement(Pt,{to:Object(dt.b)("create",n),push:!0}),r.a.createElement(oe,{onClick:function(t){t.preventDefault(),e.onOpen()}}),r.a.createElement(Ye.c,{open:a,onClose:this.onClose},r.a.createElement(Ye.f,null,"Select item type"),r.a.createElement(F.a,{onClick:this.onSelect(f.n.Main)},r.a.createElement(ue.Trans,{id:"Ware"})),r.a.createElement(F.a,{onClick:this.onSelect(f.n.SideDish)},r.a.createElement(ue.Trans,{id:"Sidedish"})),r.a.createElement(F.a,{onClick:this.onSelect(f.n.Cover)},r.a.createElement(ue.Trans,{id:"Cover"}))))}}]),t}(n.Component),qt=a(7735),Mt=Object(C.b)(function(){var e=Object(k.c)().settings,t=Object(O.a)(Et,Object(w.a)({},e.getQueryProps({categoryId:e.menu.recipe.categoryFilterId}),{suspend:!1,fetchPolicy:"cache-and-network"})),a=t.data,n=t.loading,i=Object(C.c)(function(){if(!a||!a.recipes||0===a.recipes.length)return[];var t=Object(qt.a)(e.menu.recipe.filterInput);return a.recipes.filter(Ke.a.cond([[Ke.a.propSatisfies(t,"code"),Ke.a.T],[Ke.a.propSatisfies(t,"nameLabel"),Ke.a.T]]))},[a&&a.recipes]);return r.a.createElement(st,{recipes:i,onToggle:e.menu.recipe.changeVisibility,isLoading:n,heightStretch:!0,showTypeColumn:!0})}),Vt=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{pageTitle:p.d._("Recipe overview"),useBackButton:!0}),r.a.createElement(g.a,null,r.a.createElement(u.a,{stretchToParent:!0},r.a.createElement(s.a,{justify:"start"},r.a.createElement(d.a,null,r.a.createElement(v.a,{width:20})),r.a.createElement(d.a,null,r.a.createElement(Ft,{modelType:"recipe"})),r.a.createElement(d.a,null,r.a.createElement(Dt,null))),r.a.createElement(V.a,{mutationName:"createRecipe"},r.a.createElement(Wt,null)),r.a.createElement(St,null,r.a.createElement(Mt,null)))))},At=function(e){var t=e.type,a=e.isMain,n=e.isSideDish,i=e.isCover,o=e.children;return!0===a&&t===f.n.Main||!0===n&&t===f.n.SideDish||!0===i&&t===f.n.Cover?r.a.createElement(r.a.Fragment,null,o):null},Kt=Object(C.b)(function(e){var t=e.categoryType,a=e.currentCategories,n=e.addButtonText,i=e.onAdd,o=Object(k.c)().settings,c=Object(O.a)(ce.a,Object(w.a)({},o.getQueryProps({categoryType:t}),{fetchPolicy:"cache-and-network",suspend:!1})),l=c.data,u=c.loading,d=l&&l.categories||[];return r.a.createElement(ht,{isLoading:u,options:Ke.a.without(a,d),addButtonText:n,onAdd:i})}),Ht=function(e){var t=e.categoryType,a=e.addButtonText,n=e.noRowsText,i=e.field;return r.a.createElement(Re.Field,{field:i},function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(re,{categories:e.value,showRemoveColumn:!0,showEditColumn:!1,showHeader:!1,onRemove:function(t){return e.setValue(Ke.a.reject(Ke.a.propEq("id",t),e.value))},noRowsDisplay:r.a.createElement(X,{text:n})}),r.a.createElement(Kt,{addButtonText:a,categoryType:t,currentCategories:e.value,onAdd:function(t){return e.setValue(e.value.concat(t))}}))})},Ut=function(e){var t=e.field,a=void 0===t?"code":t,n=(e.icon,e.isRequired,Object(T.a)(e,["field","icon","isRequired"]));return r.a.createElement(Qe.a,{label:p.d._("Code").toLocaleLowerCase(),labelWidth:7},r.a.createElement(Fe.a,{width:9},r.a.createElement(ze.a,Object.assign({field:a,inputFullWidth:!0,isRequired:!0,validatioName:p.d._("Code")},n))))},Gt=function(e){var t=e.field,a=void 0===t?"descriptionLabel":t,n=(e.icon,Object(T.a)(e,["field","icon"]));return r.a.createElement(Qe.a,{label:p.d._("Public note").toLocaleLowerCase(),labelWidth:7},r.a.createElement(ze.a,Object.assign({field:a,inputFullWidth:!0},n)))},zt=a(323);function Qt(){var e=Object(de.a)(["\n  query GAllergens {\n    allergens {\n      ...GAllergen\n    }\n  }\n  ","\n"]);return Qt=function(){return e},e}var $t=me()(Qt(),zt.a),Jt=Object(gt.a)($t),Xt=l.b.div.withConfig({displayName:"AllergenIndicator__AllergenBox",componentId:"sc-135ffpv-0"})(["float:left;width:2.3rem;height:2.3rem;border:1px solid ",";margin:0.3rem 0.6rem 0.3rem ",";font-size:1.5rem;text-align:center;vertical-align:middle;cursor:default;",";"],B.a.greyMiddle,B.d.MarginAroundFormComponents,function(e){var t=e.active;return Object(l.a)(["color:",";background-color:",";"],t?B.a.black:B.a.greyMiddle,t?B.a.yellow:B.a.white)}),Yt=function(e){var t=e.selected,a=e.onToggle;return r.a.createElement(Jt,{render:function(e){var n=e.allergens;return r.a.createElement(r.a.Fragment,null,n.map(function(e){var n={active:t.includes(e.enum),onClick:a&&function(){return a(e.enum)}};return r.a.createElement(Xt,Object.assign({key:e.enum,title:e.code},n),e.category)}))}})},Zt=Ke.a.pipe(Ke.a.map(Ke.a.prop("allergens")),Ke.a.flatten,Ke.a.uniq),ea=function(){return r.a.createElement(Re.Field,{field:"ingredients"},function(e){var t=e.value,a=Zt(t);return r.a.createElement(Yt,{selected:a})})},ta=function(e){var t=e.recipeType,a=t===f.n.Main;return r.a.createElement(De,null,r.a.createElement(Ne,null,r.a.createElement(Je,{placeholder:p.d._("Recipe name")}),r.a.createElement(Ut,{placeholder:p.d._("Recipe code")}),r.a.createElement($e,{placeholder:p.d._("Recipe internal note")}),a&&r.a.createElement(Gt,{placeholder:p.d._("Public note for customers, allergens")}),r.a.createElement(At,{type:t,isMain:!0},r.a.createElement(Qe.a,{labelWidth:7,icon:"error_outline"},p.d._("Allergens based on stock cards"),r.a.createElement("br",null),r.a.createElement(ea,null))),r.a.createElement(Qe.a,{labelWidth:7},r.a.createElement(Be.a,{field:"visible",label:p.d._("To show this recipe")}))),r.a.createElement(Le.a,{position:"BottomRight"},r.a.createElement(Pe.a,{render:function(e){var t=e.menu;return r.a.createElement(Ge,{confirmText:p.d._("Remove this recipe?"),onDelete:function(e){return t.recipe.deleteRecipe(e)}})}})))},aa=a(322),na=function(e){var t=e.recipeId,a=e.recipeType,n=e.children,i=ot();return r.a.createElement(it,{isCreate:null===t,onCreate:function(e){return i.recipe.createRecipe(e,a)},onUpdate:function(e){return i.recipe.updateRecipe(e)},getDefaultValues:function(){return ia(a)},loadDefaults:Object(y.a)(E.a.mark(function e(){var t,n,r,o;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.recipe.queryDefaults();case 2:return t=e.sent,n=t.vats,r=t.currencyCode,(o=Object(w.a)({},ia(a))).prices=ra(function(e){return{value:0,vatId:n[e],currencyCode:r}}),e.abrupt("return",o);case 8:case"end":return e.stop()}},e,this)})),loadValues:Object(y.a)(E.a.mark(function e(){var a,n;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.client.query({query:aa.b,variables:{recipeId:t},fetchPolicy:"no-cache"});case 2:return a=e.sent,n=a.data,e.abrupt("return",oa(n.recipe));case 5:case"end":return e.stop()}},e,this)}))},n)};function ra(e){return[f.o.Delivery,f.o.Inhouse].reduce(function(t,a){return t[a]=e(a),t},{})}function ia(e){return{id:"NEW",code:"",nameLabel:"",internalNote:"",descriptionLabel:"",image:"",visible:!0,recipeType:{enum:e},sourcePrices:[],prices:ra(function(){return{value:0,vatId:null,currencyCode:""}}),sourceAssociatedRecipes:[],associatedRecipes:[],sourceIngredients:[],ingredients:[],sideDishes:[],categories:[]}}function oa(e){return Object(w.a)({},e,{associatedRecipes:e.sourceAssociatedRecipes.map(function(e){var t=e.priceType,a=e.recipe;return{warePriceType:t.enum,nameLabel:a.nameLabel,associatedRecipe:a.id,formattedPrice:"?"}}),ingredients:e.sourceIngredients.map(function(e){var t=e.quantity,a=e.stockItem,n=a.id,r=a.label,i=a.allergens;return{stockItem:n,label:r,quantity:t,unitLabel:a.wareUnit.code,allergens:i.map(Ke.a.prop("enum"))}}),prices:ra(function(t){var a=e.sourcePrices.find(Ke.a.pathEq(["priceType","enum"],t));return a?{value:a.price.value,vatId:a.vat.id,currencyCode:a.price.currency.code}:{value:0,vatId:null,currencyCode:""}})})}var ca=a(7698),la=a.n(ca),ua=a(351),da=function(e){return void 0===e||Object(ca.isEmpty)(e+"")||!Object(ua.b)(e+"")?p.d._("Price must be a number"):null},sa=function(e){var t=e.field,a=void 0===t?"price.value":t,n=e.icon,i=void 0===n?"toll":n,o=Object(T.a)(e,["field","icon"]);return r.a.createElement(Qe.a,{icon:i},r.a.createElement(Fe.a,{width:5},r.a.createElement(ze.a,Object.assign({field:a,inputFullWidth:!0,validate:da},o))))},ma=a(152),fa=a(7781),pa=a(76);function ha(){var e=Object(de.a)(["\n  query GVats($branchId: ID!) {\n    vats(companyBranch: $branchId) {\n      id\n      vat\n    }\n  }\n"]);return ha=function(){return e},e}var ga=me()(ha()),va=Object(gt.a)(ga),ba=Object(ma.css)(["margin-left:5rem;"]),Ea=function(e){var t=e.field,a=void 0===t?"price.vat":t;return r.a.createElement(pa.a,{render:function(e){var t=e.settings;return r.a.createElement(va,Object.assign({},t.queryProps,{renderLoading:!1,render:function(e){var t=e.vats;return r.a.createElement(Qe.a,{className:ba,label:"".concat(p.d._("VAT"),":")},t&&r.a.createElement(fa.a,{field:a,items:t,formatItem:function(e){var t=e.vat;return"".concat(t,"%")},isRequired:!0,validationName:p.d._("VAT")}))}}))}})},ya=Object(l.b)(function(e){var t=e.field,a=e.className;return r.a.createElement(Re.Field,{field:t},function(e){return r.a.createElement("span",{className:a},e.value)})}).withConfig({displayName:"FormPricingField__FormPricingCurrencyCode",componentId:"hoj9dy-0"})(["padding:0.5rem;"]),wa=function(e){var t=e.priceType,a=e.label;return r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,null,a),r.a.createElement(Re.NestedField,{field:["prices",t]},r.a.createElement(s.a,{justify:"flex-start"},r.a.createElement(sa,{field:"value"}),r.a.createElement(ya,{field:"currencyCode"}),r.a.createElement(Ea,{field:"vatId"}))))},Ca=function(e){var t=e.recipes,a=e.onRemove;return r.a.createElement(H,{items:t,disableHeader:!0},r.a.createElement(D.d,{dataKey:"associatedRecipe",width:B.d.ButtonColumnWidthPx,minWidth:B.d.ButtonColumnWidthPx,cellRenderer:function(e){var t=e.cellData;return r.a.createElement(q,{onClick:function(){return a(t)}})}}),r.a.createElement(D.d,{dataKey:"nameLabel",width:300,label:p.d._("Name"),cellRenderer:J,columnData:{noteKey:"internalNote"}}),r.a.createElement(D.d,{dataKey:"formattedPrice",width:100,label:p.d._("Price")}))},Oa=function(e){var t=e.priceType,a=e.recipeId;return r.a.createElement(Re.Field,{field:"associatedRecipes"},function(e){var n=Ke.a.filter(Ke.a.propEq("warePriceType",t),e.value),i=Ke.a.reject(function(e){return e.id===a||(t=e.id,n.some(Ke.a.propEq("associatedRecipe",t)));var t}),o=function(a){e.setValue(e.value.concat({warePriceType:t,associatedRecipe:a.id,nameLabel:a.nameLabel,formattedPrice:"?"}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ca,{recipes:n,onRemove:function(a){e.setValue(Ke.a.reject(function(e){var n=e.associatedRecipe,r=e.warePriceType;return n===a&&r===t},e.value))}}),r.a.createElement(Pe.a,{render:function(e){return r.a.createElement(aa.c,Object.assign({},e.queryProps,{render:function(e){var t=e.recipes;return r.a.createElement(ht,{options:i(t),onAdd:o})}}))}}),r.a.createElement(m.a,null))})},ja=[{priceType:f.o.Delivery,label:Object(Oe.i18nMark)("Delivery sale")},{priceType:f.o.Inhouse,label:Object(Oe.i18nMark)("Local sale")}],ka=function(e){var t=e.recipeType,a=e.recipeId;return r.a.createElement(r.a.Fragment,null,ja.map(function(e){var i=e.priceType,o=e.label;return r.a.createElement(n.Fragment,{key:i},r.a.createElement(wa,{priceType:i,label:p.d._(o)}),r.a.createElement(m.a,null),t===f.n.Main&&r.a.createElement(Oa,{priceType:i,recipeId:a}))}))},Ia=function(e){var t=e.ingredients,a=e.onRemove,n=e.isLoading,i=void 0!==n&&n;return r.a.createElement(H,{isLoading:i,items:t,disableHeader:!0,noRowsRenderer:function(){return r.a.createElement(X,{text:p.d._("Recipe has no ingredients")})}},r.a.createElement(D.d,{dataKey:"stockItem",width:B.d.ButtonColumnWidthPx,minWidth:B.d.ButtonColumnWidthPx,cellRenderer:z,columnData:{onRemove:a}}),r.a.createElement(D.d,{dataKey:"label",width:300,label:p.d._("Name")}),r.a.createElement(D.d,{dataKey:"quantity",width:60,label:p.d._("Quantity"),cellRenderer:function(e){var t=e.rowIndex;return r.a.createElement(Fe.a,{width:2.5},r.a.createElement(ze.a,{field:["ingredients",t,"quantity"],validate:Ta,inputFullWidth:!0}))}}),r.a.createElement(D.d,{dataKey:"unitLabel",width:100,label:p.d._("Ware unit")}))};function Ta(e){var t=p.d._("Quantity");return la.a.isEmpty(e+"")?p.d._("{fieldName} must be entered",{fieldName:t}):la.a.isFloat(e+"",{min:0})?null:p.d._("{fieldName} must be a positive number",{fieldName:t})}var Ra=a(270),_a=Ke.a.differenceWith(function(e,t){return e.id===t.stockItem}),Sa=function(){return r.a.createElement(Pe.a,{observe:!1,render:function(e){return r.a.createElement(Re.Field,{field:"ingredients"},function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ia,{ingredients:t.value,onRemove:function(e){t.setValue(Ke.a.reject(Ke.a.propEq("stockItem",e),t.value))}}),r.a.createElement(Ra.b,Object.assign({},e.queryProps,{render:function(e){var a=e.stockItems;return r.a.createElement(ht,{addButtonText:p.d._("Add ingredient"),options:_a(a,t.value),onAdd:function(e){t.setValue(Object(Z.a)(t.value).concat([{stockItem:e.id,label:e.nameLabel,quantity:1,unitLabel:e.wareUnit.code,allergens:e.allergens.map(Ke.a.prop("enum"))}]))}})}})))})}})},xa=Object(l.b)("div").withConfig({displayName:"MenuRecipePage__FormContainer",componentId:"yp6ac3-0"})(["margin:0 1.25rem 0 0;"]),La=function(e){var t=e.recipeId,a=e.recipeType;return r.a.createElement(na,{recipeId:t,recipeType:a},r.a.createElement(xa,null,r.a.createElement(h.a,{width:16,pageTitle:Te(a),hideLogoutWidget:!0,useBackButton:!0},r.a.createElement(u.a,null,r.a.createElement(ta,{recipeType:a})),r.a.createElement(u.a,null,r.a.createElement(ka,{recipeType:a,recipeId:t})),r.a.createElement(At,{type:a,isMain:!0},r.a.createElement(u.a,null,r.a.createElement(j.a,null,r.a.createElement(ue.Trans,{id:"Recipe ingredients"})),r.a.createElement(m.a,null),r.a.createElement(Sa,null)),r.a.createElement(u.a,null,r.a.createElement(j.a,null,r.a.createElement(ue.Trans,{id:"Sidedish categories"})),r.a.createElement($,null,r.a.createElement(ue.Trans,{id:"These sidedish are presented with recipe"})),r.a.createElement(Ht,{categoryType:f.n.SideDish,field:"sideDishes",addButtonText:p.d._("Attach sidedish category"),noRowsText:p.d._("Recipe has no sidedish category attached")})),r.a.createElement(u.a,null,r.a.createElement(j.a,null,r.a.createElement(ue.Trans,{id:"Category assignments"})),r.a.createElement($,null,r.a.createElement(ue.Trans,{id:"Recipe is in these categories"})),r.a.createElement(Ht,{categoryType:f.n.Main,field:"categories",addButtonText:p.d._("Add to category"),noRowsText:p.d._("Recipe is not in any category")})))),r.a.createElement(we,null,r.a.createElement(V.a,{mutationName:null===t?"createRecipe":"updateRecipe"},r.a.createElement(xe,{isCreate:null===t})))))},Da=a(86),Na=a.n(Da),Ba=a(125),Fa=function(e){var t=e.wareUnit,a=e.quantity,n=e.onConfirm;return r.a.createElement(F.a,{disabled:null===t,onClick:n},t?r.a.createElement(ue.Trans,{id:"Add {0} {1}",values:{0:Na()(a).format(Ba.h),1:t.code}}):r.a.createElement(ue.Trans,{id:"No stock card selected"}))},Pa=r.a.forwardRef(function(e,t){var a=e.value,n=e.onFilter,i=e.onConfirm;return r.a.createElement(Qe.a,{label:p.d._("Stock card"),labelWidth:7},r.a.createElement(Bt.a,{ref:t,autoFocus:!0,placeholder:"".concat(p.d._("Code").toLocaleLowerCase()," / ").concat(p.d._("PLU")," / ").concat(p.d._("Title").toLocaleLowerCase()),value:a,onChange:function(e){n(e.target.value)},onKeyPressCapture:function(e){"Enter"===e.key&&(e.preventDefault(),i())}}))}),Wa=r.a.forwardRef(function(e,t){var a=e.enabled,n=e.onChange,i=e.onConfirm;return r.a.createElement(Bt.a,{ref:t,disabled:!a,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){var t=Na()(e.target.value).value();n(t)}),onKeyPressCapture:function(e){"Enter"===e.key&&(e.preventDefault(),i())}})}),qa=function(e){var t=e.stockItems,a=e.searchValue,n=e.onSelect;return r.a.createElement(St,null,r.a.createElement(H,{items:t,heightStretch:!1},r.a.createElement(D.d,{dataKey:"id",width:B.d.ButtonColumnWidthPx,minWidth:B.d.ButtonColumnWidthPx,cellRenderer:Ma,columnData:{onSelect:n}}),r.a.createElement(D.d,{dataKey:"quantity",width:100,label:p.d._("Card stock"),cellRenderer:Ka}),r.a.createElement(D.d,{dataKey:"code",width:100,label:p.d._("Card code"),cellRenderer:Aa(a)}),r.a.createElement(D.d,{dataKey:"nameLabel",width:300,label:p.d._("Card name"),cellRenderer:Aa(a)}),r.a.createElement(D.d,{dataKey:"note",width:300,label:p.d._("Card note")})))};function Ma(e){var t=e.rowData,a=e.columnData.onSelect;return r.a.createElement(F.a,{iconName:"done",width:B.d.ButtonHeight,height:B.d.ButtonHeight,onClick:function(){return a(t)}})}var Va=l.b.span.withConfig({displayName:"StockDepositResultTable__HighlightedValue",componentId:"sc-3qukvh-0"})(["background-color:",";"],B.a.yellow);function Aa(e){return function(t){var a=t.cellData,n=a.toLocaleLowerCase().indexOf(e.toLocaleLowerCase());if(-1===n)return a;var i=a.substring(0,n),o=a.substring(n,n+e.length),c=a.substring(n+e.length);return r.a.createElement(r.a.Fragment,null,i,r.a.createElement(Va,null,o),c)}}function Ka(e){var t=e.cellData,a=e.rowData;return"".concat(t," ").concat(a.wareUnit.code)}var Ha=function(e){function t(){var e,a;Object(R.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(S.a)(this,(e=Object(x.a)(t)).call.apply(e,[this].concat(i)))).state={targetStockItem:null,filteredStockItems:[],searchValue:"",inputQuantity:0},a.filterInputRef=r.a.createRef(),a.quantityInputRef=r.a.createRef(),a.onFilter=function(e){if(""!==e.trim()){var t=Object(qt.a)(e),n=a.props.stockItems.filter(Ke.a.cond([[Ke.a.propEq("plu",e),Ke.a.T],[Ke.a.propSatisfies(t,"code"),Ke.a.T],[Ke.a.propSatisfies(t,"nameLabel"),Ke.a.T]])),r=null;1===n.length&&(r=Ke.a.head(n)),a.setState({filteredStockItems:n,searchValue:e,targetStockItem:r})}else a.setState({filteredStockItems:[],searchValue:"",targetStockItem:null})},a.onConfirmFilter=function(){1===a.state.filteredStockItems.length&&a.quantityInputRef.current.focus()},a.onQuantity=function(e){a.setState({inputQuantity:e})},a.onSelectStockItem=function(e){a.setState({targetStockItem:e,filteredStockItems:[e]},function(){a.quantityInputRef.current.focus()})},a.onConfirm=function(){var e=a.state,t=e.targetStockItem,n=e.inputQuantity;t&&0!==n&&a.props.onDeposit(t,n),a.setState({targetStockItem:null,searchValue:"",inputQuantity:0},function(){a.quantityInputRef.current.value="",a.filterInputRef.current.focus()})},a}return Object(L.a)(t,e),Object(_.a)(t,[{key:"render",value:function(){var e=this.state,t=e.searchValue,a=e.filteredStockItems,n=e.targetStockItem,i=e.inputQuantity,o=""!==t.trim(),c=0===a.length,l=a.length>1;return r.a.createElement(r.a.Fragment,null,r.a.createElement(De,null,r.a.createElement(Ne,null,r.a.createElement(Pa,{onFilter:this.onFilter,onConfirm:this.onConfirmFilter,value:t,ref:this.filterInputRef})),r.a.createElement(Ne,null,r.a.createElement(Wa,{enabled:null!==n,onChange:this.onQuantity,onConfirm:this.onConfirm,ref:this.quantityInputRef})),r.a.createElement(Ne,null,r.a.createElement(Fa,{cardName:n?n.nameLabel:"",quantity:i,wareUnit:n?n.wareUnit:null,onConfirm:this.onConfirm}))),r.a.createElement(j.a,null,o&&l&&r.a.createElement(ue.Trans,{id:"Continue typing to find single stock card or select one from the list"}),o&&c&&r.a.createElement(ue.Trans,{id:"No stock card found from entered search value"}),o&&n&&r.a.createElement(ue.Trans,{id:"Stock card <0>{0}</0> is selected",values:{0:n.nameLabel},components:[r.a.createElement("b",null)]})),o&&r.a.createElement(qa,{searchValue:t,stockItems:a,onSelect:this.onSelectStockItem}))}}]),t}(r.a.Component),Ua=function(e){var t=e.children,a=Object(k.c)().settings,n=Object(f.t)(void 0,a.queryProps),r=n.data,i=n.loading,o=Object(f.q)();return i?null:t(r.stockItems,function(e,t){o({stockItem:e.id,quantityChange:t})})},Ga=function(e){return r.a.createElement(h.a,{width:16,pageTitle:p.d._("Stock deposit"),useBackButton:!0},r.a.createElement(u.a,null,r.a.createElement(v.a,null),r.a.createElement(Ua,null,function(e,t){return r.a.createElement(Ha,{stockItems:e,onDeposit:t})})))},za=a(307),Qa=function(e){var t=e.stockItems,a=e.isLoading;return r.a.createElement(H,{items:t,heightStretch:!0,noRowsRenderer:function(){return a?r.a.createElement(za.a,null):r.a.createElement("h3",null,r.a.createElement(ue.Trans,{id:"Selected branch has no stock cards"}))}},r.a.createElement(D.d,{dataKey:"id",width:B.d.ButtonColumnWidthPx,minWidth:B.d.ButtonColumnWidthPx,cellRenderer:U({canQuery:"stockItem"},G)}),r.a.createElement(D.d,{dataKey:"code",width:100,label:p.d._("Card code")}),r.a.createElement(D.d,{dataKey:"nameLabel",width:300,minWidth:30,flexGrow:2,label:p.d._("Card name")}),r.a.createElement(D.d,{dataKey:"quantity",width:100,label:p.d._("Card stock"),cellRenderer:$a}),r.a.createElement(D.d,{dataKey:"allowNegative",width:300,label:p.d._("Negative stock"),cellRenderer:Ja}),r.a.createElement(D.d,{dataKey:"note",width:300,label:p.d._("Card note")}))};function $a(e){var t=e.cellData,a=e.rowData;return"".concat(t," ").concat(a.wareUnit.code)}function Ja(e){return!0===e.cellData?r.a.createElement(ue.Trans,{id:"Permitted"}):r.a.createElement(ue.Trans,{id:"Forbidden"})}var Xa=Object(C.b)(function(){var e=Object(k.c)().settings,t=Object(O.a)(Ra.a,Object(w.a)({},e.queryProps,{suspend:!1})),a=t.data,n=t.loading,i=Object(C.c)(function(){if(!a||!a.stockItems||0===a.stockItems.length)return[];var t=e.menu.stock.filterInput,n=Object(qt.a)(t);return a.stockItems.filter(Ke.a.cond([[Ke.a.propEq("plu",t),Ke.a.T],[Ke.a.propSatisfies(n,"code"),Ke.a.T],[Ke.a.propSatisfies(n,"nameLabel"),Ke.a.T]]))},[a&&a.stockItems]);return r.a.createElement(Qa,{stockItems:i,isLoading:n})}),Ya=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{pageTitle:p.d._("Stock overview"),useBackButton:!0}),r.a.createElement(g.a,null,r.a.createElement(u.a,{stretchToParent:!0},r.a.createElement(s.a,{justify:"start"},r.a.createElement(d.a,null,r.a.createElement(v.a,{width:20})),r.a.createElement(d.a,null,r.a.createElement(Ft,{modelType:"stock"}))),r.a.createElement(V.a,{mutationName:"createStockItem"},r.a.createElement(oe,{routeTo:"create"})),r.a.createElement(St,null,r.a.createElement(Xa,null)))))},Za=a(458);function en(){var e=Object(de.a)(["\n  query GMenuStockDefaults($branchId: ID!) {\n    companyBranch(id: $branchId) {\n      id\n      allowNegative: stockItemsCanBeNegative\n    }\n  }\n"]);return en=function(){return e},e}function tn(){var e=Object(de.a)(["\n  query GMenuStockForm($stockId: ID!) {\n    stockItem(id: $stockId) {\n      id\n      code\n      plu\n      note\n      nameLabel: label\n      allowNegative\n      wareUnit {\n        ...GWareUnit\n      }\n      allergens {\n        ...GAllergen\n      }\n      companyBranch {\n        id\n        allowNegative: stockItemsCanBeNegative\n      }\n    }\n  }\n  ","\n  ","\n"]);return tn=function(){return e},e}var an=me()(tn(),zt.a,Za.a),nn=me()(en()),rn=(Object(gt.a)(an),function(e){var t=e.stockId,a=e.children,n=ot();return r.a.createElement(it,{isCreate:null===t,onCreate:function(e){return n.stock.createItem(e)},onUpdate:function(e){return n.stock.updateItem(e)},getDefaultValues:on,loadDefaults:Object(y.a)(E.a.mark(function e(){var t,a;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.client.query({query:nn,variables:{branchId:n.stock.branchId},fetchPolicy:"no-cache"});case 2:return t=e.sent,a=t.data,e.abrupt("return",{allowNegativeDefault:cn(a.companyBranch.allowNegative)});case 5:case"end":return e.stop()}},e,this)})),loadValues:Object(y.a)(E.a.mark(function e(){var a,r;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.client.query({query:an,variables:{stockId:t},fetchPolicy:"no-cache"});case 2:return a=e.sent,r=a.data,e.abrupt("return",{id:(i=r.stockItem).id,internalNote:"TBD",nameLabel:i.nameLabel,code:i.code,note:i.note,plu:i.plu||"",wareUnit:i.wareUnit.enum,allergens:i.allergens.map(Ke.a.prop("enum")),allowNegative:i.allowNegative,allowNegativeDefault:cn(i.companyBranch.allowNegative)});case 5:case"end":return e.stop()}var i},e,this)}))},a)});function on(){return{id:"NEW",internalNote:"",nameLabel:"",code:"",plu:"",note:"",wareUnit:null,allergens:[],allowNegative:f.i.Default,allowNegativeDefault:f.i.Default}}function cn(e){return e?f.i.Default:f.i.Disabled}var ln=function(e){var t=e.field,a=void 0===t?"allergens":t,n=e.icon,i=void 0===n?"error_outline":n;return r.a.createElement(Re.Field,{field:a},function(e){return r.a.createElement(Qe.a,{icon:i,labelWidth:7},r.a.createElement(Yt,{selected:e.value,onToggle:function(t){var a=e.value;a.includes(t)?e.setValue(Ke.a.without([t],a)):e.setValue(Object(Z.a)(a).concat([t]))}}))})};var un=[{type:f.i.Enabled,label:Object(Oe.i18nMark)("Permit")},{type:f.i.Disabled,label:Object(Oe.i18nMark)("Forbid")}],dn=function(e){!function(e){if(null==e)throw new TypeError("Cannot destructure undefined")}(e);var t=Object(n.useMemo)(function(){return" (".concat(p.d._("Is default setting").toLocaleLowerCase(),")")},[]);return r.a.createElement(Re.FormApi,null,function(e){var a=e.values.allowNegativeDefault;return r.a.createElement(Qe.a,{label:p.d._("Negative stock"),labelWidth:7},r.a.createElement(fa.a,{field:"allowNegative",items:un,formatItem:function(e){return e.type===a?r.a.createElement("span",null,p.d._(e.label),r.a.createElement("i",null,t)):p.d._(e.label)},getItemId:function(e){return e.type}}))})},sn=function(e){var t=e.field,a=void 0===t?"plu":t,n=e.icon,i=void 0===n?"fingerprint":n,o=Object(T.a)(e,["field","icon"]);return r.a.createElement(Qe.a,{icon:i,labelWidth:7},r.a.createElement(Fe.a,{width:9},r.a.createElement(ze.a,Object.assign({field:a,inputFullWidth:!0},o))))},mn=a(7946);function fn(){var e=Object(de.a)(["\n  query GWareUnits {\n    wareUnits {\n      id\n      code\n      enum\n    }\n  }\n"]);return fn=function(){return e},e}var pn=me()(fn()),hn=Object(gt.a)(pn),gn=function(e){var t=e.field,a=void 0===t?"wareUnit":t,n=e.icon,i=void 0===n?"select_all":n,o=Object(T.a)(e,["field","icon"]);return r.a.createElement(hn,{renderLoading:!1,render:function(e,t){var n=e.wareUnits,c=t.loading;return r.a.createElement(Qe.a,{icon:i,labelWidth:7},r.a.createElement(mn.a,Object.assign({field:a,options:n||[],isLoading:c,isRequired:!0,validatioName:p.d._("Ware unit"),getOptionLabel:Ke.a.prop("code"),getOptionValue:Ke.a.prop("enum"),width:12},o)))}})},vn=function(e){return r.a.createElement(De,null,r.a.createElement(Ne,null,r.a.createElement(Je,{placeholder:p.d._("Card name")}),r.a.createElement(Ut,{placeholder:p.d._("Card code")}),r.a.createElement(gn,{placeholder:p.d._("Choose unit")}),r.a.createElement(sn,{placeholder:p.d._("PLU")}),r.a.createElement($e,{placeholder:p.d._("Card note"),field:"note",label:p.d._("Card note")}),r.a.createElement(ln,null),r.a.createElement(dn,null)),r.a.createElement(Le.a,{position:"BottomRight"},r.a.createElement(V.a,{mutationName:"destroyStockItem"},r.a.createElement(Pe.a,{render:function(e){var t=e.menu;return r.a.createElement(Ge,{confirmText:p.d._("Remove this card?"),onDelete:function(e){return t.stock.deleteItem(e)}})}}))))};function bn(){var e=Object(de.a)(["\n  query GStockRecipes($stockId: ID!) {\n    stockItem(id: $stockId) {\n      id\n      ingredients {\n        id\n        recipe {\n          id\n          nameLabel\n          descriptionLabel\n          recipeType: wareCategoryType {\n            enum\n          }\n        }\n      }\n    }\n  }\n"]);return bn=function(){return e},e}var En=me()(bn()),yn=Object(gt.a)(En),wn=function(e){var t=e.stockId;return null===t?null:r.a.createElement(yn,{variables:{stockId:t},render:function(e){var t=e.stockItem.ingredients;return t.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,null,r.a.createElement(ue.Trans,{id:"Recipes using this card"})),r.a.createElement(H,{items:Object(Z.a)(t)},r.a.createElement(D.d,{dataKey:"",cellDataGetter:function(e){var t=e.rowData;return{pathname:"/settings/menu/recipe/".concat(t.recipe.id),state:{recipeType:t.recipe.recipeType.enum}}},cellRenderer:G,width:100}),r.a.createElement(D.d,{dataKey:"recipe",width:300,label:p.d._("Name"),cellRenderer:function(e){var t=e.rowData;return r.a.createElement(r.a.Fragment,null,t.recipe.nameLabel,r.a.createElement($,null,t.recipe.descriptionLabel))}}))):null}})},Cn=function(e){var t=e.stockId;return r.a.createElement(h.a,{width:16,pageTitle:p.d._("Stock card"),hideLogoutWidget:!0,useBackButton:!0},r.a.createElement(rn,{stockId:t},r.a.createElement(r.a.Fragment,null,r.a.createElement(we,null,r.a.createElement(V.a,{mutationName:null===t?"createStockItem":"updateStockItem"},r.a.createElement(xe,{isCreate:null===t}))),r.a.createElement(u.a,null,r.a.createElement(vn,null),r.a.createElement(A.a,{queryName:"recipes"},r.a.createElement(wn,{stockId:t}))))))};a.d(t,"MenuRoutes",function(){return On});var On=function(e){var t=e.match;return r.a.createElement(i.Switch,null,r.a.createElement(c.a,{exact:!0,path:t.path,render:function(){return r.a.createElement(i.Redirect,{to:"".concat(t.path,"/category")})}}),r.a.createElement(c.a,{exact:!0,path:"".concat(t.path,"/category"),component:ye}),r.a.createElement(c.a,{path:"".concat(t.path,"/category/:categoryId"),render:function(e){var t=e.match.params,a=e.location.state;return r.a.createElement(_t,{categoryId:"create"===t.categoryId?null:t.categoryId,categoryType:a.categoryType})}}),r.a.createElement(c.a,{exact:!0,path:"".concat(t.path,"/recipe"),component:Vt}),r.a.createElement(c.a,{path:"".concat(t.path,"/recipe/:recipeId"),render:function(e){var t=e.match.params,a=e.location.state;return r.a.createElement(La,{recipeId:"create"===t.recipeId?null:t.recipeId,recipeType:a.recipeType})}}),r.a.createElement(c.a,{exact:!0,path:"".concat(t.path,"/stock"),component:Ya}),r.a.createElement(c.a,{path:"".concat(t.path,"/stock/deposit"),component:Ga}),r.a.createElement(c.a,{path:"".concat(t.path,"/stock/:stockId"),render:function(e){var t=e.match.params;return r.a.createElement(Cn,{stockId:"create"===t.stockId?null:t.stockId})}}),r.a.createElement(i.Route,{component:o.a}))};t.default=On}}]);
//# sourceMappingURL=176.ce02229d.chunk.js.map