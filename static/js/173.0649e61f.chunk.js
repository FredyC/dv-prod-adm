(window.webpackJsonp=window.webpackJsonp||[]).push([[173],{7663:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n(39),a=n(0),i=n.n(a),c=n(22),l=n(18),o=n(98),u=c.b.div.withConfig({displayName:"IconLine__IconLineWrap",componentId:"sc-1e1p2kh-0"})(["display:flex;"]);u.displayName="IconLineWrap";var d=c.b.div.withConfig({displayName:"IconLine__DescriptionContainer",componentId:"sc-1e1p2kh-1"})(["margin:",";min-width:",";flex:0 0 auto;text-align:right;"],function(e){var t=e.labelMargin;return void 0===t?"0.5rem 0.2rem 0 auto":t},function(e){var t=e.labelWidth,n=void 0===t?0:t,r=e.labelWidthUnits;return n+(void 0===r?l.d.DefaultSizeUnit:r)}),s=c.b.div.withConfig({displayName:"IconLine__IconLineChildren",componentId:"sc-1e1p2kh-2"})(["margin-left:0.5rem;align-self:stretch;flex:1 1 auto;"]),m=c.b.div.withConfig({displayName:"IconLine__LabelStyled",componentId:"sc-1e1p2kh-3"})(["padding-top:0.2rem;display:inline-block;"]);s.displayName="IconLineChildren";var f=function(e){var t,n=e.icon,a=e.label,c=e.labelWidth,f=e.labelWidthUnits,p=e.labelMargin,b=e.children,h=Object(r.a)(e,["icon","label","labelWidth","labelWidthUnits","labelMargin","children"]);return n&&(t="string"===typeof n?i.a.createElement(o.a,{iconName:n,color:l.a.greyDark}):i.a.createElement(n,{nativeColor:l.a.greyDark})),i.a.createElement(u,h,i.a.createElement(d,{labelWidth:c,labelWidthUnits:f,labelMargin:p},t,a?i.a.createElement(m,null,a):null),i.a.createElement(s,null,b))}},7665:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(60),a=n(0),i=n.n(a),c=n(7674),l=n(59),o=function(e){var t=e.mutationName,n=e.children,a=Object(l.c)().user;return Object(r.useObserver)(function(){return a.canMutate(t)?i.a.createElement(i.a.Fragment,null,n):i.a.createElement(c.a,null,"No access to mutation ".concat(t))})}},7668:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(34),a=n(0),i=n.n(a),c=n(7726),l=n(18),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r.a)({},e,{control:function(t,n){var a=n.selectProps,i=a.width,c=a.minWidth,o=Object(r.a)({},t,{border:"1px solid ".concat(l.a.greyMiddle),margin:l.d.MarginAroundFormComponents,width:void 0!==i?"".concat(i,"rem"):"100%",minWidth:void 0!==c?"".concat(c,"rem"):"8rem"});return e.control?e.control(o,n):o},menu:function(t,n){var a=n.selectProps.width,i=Object(r.a)({},t,{zIndex:20,color:l.a.black,width:void 0!==a?"".concat(a,"rem"):"100%"});return e.menu?e.menu(i,n):i}})};function u(e){return i.a.createElement(c.b,Object.assign({},e,{styles:o(e.styles)}))}},7671:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(22),a=n(18),i=r.b.h2.withConfig({displayName:"Headline",componentId:"sc-6a1pim-0"})(["color:",";font-weight:lighter;margin:",";font-size:",";"],function(e){var t=e.light;return void 0!==t&&t?a.a.greyLight:a.a.greyDarkest},function(e){var t=e.margin;return void 0===t?"0 0.5rem 0 0.5rem":t},function(e){return"smaller"===e.size&&"1rem"})},7674:function(e,t,n){"use strict";n.d(t,"a",function(){return r});n(0);var r=function(e){e.children;return null}},7675:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(60),a=n(0),i=n.n(a),c=n(7674),l=n(59),o=function(e){var t=e.queryName,n=e.children,a=Object(l.c)().user;return Object(r.useObserver)(function(){return a.canQuery(t)?i.a.createElement(i.a.Fragment,null,n):i.a.createElement(c.a,null,"No access to query ".concat(t))})}},7676:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n(0),a=n.n(r),i=n(22),c=n(7685),l=n(18),o=i.b.div.withConfig({displayName:"PageLayoutFullHeightItem__FullHeightDiv",componentId:"sc-1mean6j-0"})(["position:fixed;bottom:0.5rem;width:",";left:",";top:",";"],function(e){return void 0!==e.widthInColumns?"calc(("+e.widthInColumns+" * 6.22vw) - "+l.d.LayoutGridCellMargin+")":"calc(100vh - (2 * "+l.d.LayoutGridCellMargin+"))"},function(e){return void 0!==e.column?"calc(("+e.column+" * 6.22vw) + "+l.d.LayoutGridCellMargin+")":l.d.LayoutGridCellMargin},function(e){return void 0!==e.row?"calc(("+e.row+" * 3.9375rem) + "+l.d.LayoutGridCellMargin+")":"calc(3.9375rem + "+l.d.LayoutGridCellMargin+")"}),u=i.b.div.withConfig({displayName:"PageLayoutFullHeightItem__FullHeightDivStyled",componentId:"sc-1mean6j-1"})(["height:100%;"]),d=function(e){var t=e.children,n=e.row,r=void 0===n?1:n,i=e.column,l=void 0===i?0:i,d=e.widthInColumns,s=void 0===d?16:d,m=e.withScrollArea,f=void 0!==m&&m,p=e.scrollAreaId;return a.a.createElement(o,{column:l,row:r,widthInColumns:s,withScrollArea:f},f?a.a.createElement(c.a,{id:p},t):a.a.createElement(u,null,t))}},7677:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=n(22).b.div.withConfig({displayName:"FlexRowSingle",componentId:"sc-1opww0j-0"})(["display:flex;flex-direction:row;justify-content:",";"],function(e){var t=e.justify;return void 0===t?"space-between":t})},7679:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(0),a=n.n(r),i=n(22),c=n(18),l=i.b.div.withConfig({displayName:"HorizontalSeparator__HorizontalSeparatorStyled",componentId:"sc-19gy69d-0"})(["border-top:1px solid ",";margin:0.25rem 0rem;"],c.a.greyLight),o=function(e){var t=e.visible;return void 0===t||t?a.a.createElement(l,null):null}},7681:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(0),a=n.n(r),i=n(134),c=function(e){var t=e.price,n=e.currencyCode,r=e.className;return a.a.createElement("span",{className:r},n?"".concat(Object(i.e)(t)," ").concat(n):Object(i.e)(t))}},7682:function(e,t,n){"use strict";n.d(t,"a",function(){return b});var r=n(112),a=n(113),i=n(115),c=n(114),l=n(116),o=n(73),u=n(0),d=n.n(u),s=n(22),m=n(25),f=s.b.div.withConfig({displayName:"SelectControlFlat__ItemStyled",componentId:"sc-1mlqgvx-0"})(["margin:0.5rem 0.6rem;display:inline-block;cursor:pointer;color:",";",";"],function(e){return e.textColor},function(e){if(!e.isSelected)return"";return Object(s.a)(["font-weight:bolder;text-decoration:underline;"])}),p=s.b.div.withConfig({displayName:"SelectControlFlat__SelectorStyled",componentId:"sc-1mlqgvx-1"})(["border:",";"],function(e){return!0===e.isInvalid?"1px red solid":"auto"}),b=function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(a.a)(t,[{key:"hasSelection",value:function(){var e=this.props,t=e.isMulti,n=e.selectedItem,r=e.selectedItems;return t?Array.isArray(r)&&r.length>0:null!==n&&void 0!==n}},{key:"isItemSelected",value:function(e){var t=this.props,n=t.isMulti,r=t.selectedItem,a=t.selectedItems;return n&&Array.isArray(a)?m.a.contains(e,a):m.a.equals(r,e)}},{key:"updateSelection",value:function(e){var t=this.props,n=t.isMulti,r=t.selectedItems,a=void 0===r?[]:r,i=t.onSingleSelection,c=t.onMultiSelection;null===e?n&&c?c([]):i&&i(null):n&&c?this.isItemSelected(e)?c(Array.isArray(a)?m.a.without([e],a):[e]):c(Array.isArray(a)?m.a.concat(a,[e]):[]):i&&i(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.items,r=t.isClearable,a=t.isInvalid,i=void 0!==a&&a,c=t.textColor,l=void 0===c?"inherit":c,u=t.formatItem;return d.a.createElement(p,{isInvalid:i},r&&d.a.createElement(f,{isSelected:!this.hasSelection(),textColor:l,onClick:function(){e.updateSelection(null)}},d.a.createElement(o.Trans,{id:"optionselector.clear-filter"})),n.map(function(t,n){return d.a.createElement(f,{key:n,isSelected:e.isItemSelected(t),textColor:l,onClick:function(){e.updateSelection(t)}},u(t))}))}}]),t}(d.a.Component);b.defaultProps={formatItem:m.a.prop("displayName"),getItemValue:m.a.prop("id")}},7683:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=n(22).b.div.withConfig({displayName:"FlexColumn",componentId:"sc-1hrk99t-0"})(["flex:",";padding:",";margin:",";"],function(e){var t=e.fixedWidth,n=void 0!==t&&t,r=e.width,a=e.widthGrowIndex,i=void 0===a?0:a;return n?r?"0 0 ".concat(r):"0 0":"".concat(i," 0")},function(e){var t=e.padding;return void 0===t?"0.25rem":t},function(e){var t=e.margin;return void 0===t?"":t})},7685:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=n(22).b.div.withConfig({displayName:"ScrollArea",componentId:"v30w13-0"})(["overflow-y:auto;-webkit-overflow-scrolling:touch;height:100%;"])},7700:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(22),a=Object(r.b)("div").withConfig({displayName:"CardDock",componentId:"sc-1fyaqia-0"})(["position:absolute;",";",";"],function(e){var t=e.position,n=void 0===t?"BottomRight":t;return"BottomLeft"===n||"TopLeft"===n?"left: 0":"right: 0"},function(e){var t=e.position,n=void 0===t?"BottomRight":t;return"BottomRight"===n||"BottomLeft"===n?"bottom: 0":"top: 0"})},7701:function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(59),c=n(25),l=n(7705),o=n(39),u=n(7682),d=n(18),s=function(e){var t=e.branches,n=e.selectedBranch,r=e.selectedBranches,i=e.textColor,c=void 0===i?d.a.black:i,l=Object(o.a)(e,["branches","selectedBranch","selectedBranches","textColor"]);return a.a.createElement(u.a,Object.assign({items:t,selectedItem:n,selectedItems:r,textColor:c,formatItem:function(e){return a.a.createElement("span",{title:e.brand.name},e.name)}},l))};n.d(t,"a",function(){return m});var m=function(e){var t=e.breakpoint,n=void 0===t?3:t,r=e.selectedBranches,o=void 0===r?[]:r,u=e.isMulti,d=void 0!==u&&u,m=e.isClearable,f=void 0===m||m,p=e.textColor,b=e.onSelectionChange,h=e.onSelectionClear,v=e.getDropdownProps,g=void 0===v?function(){return{}}:v,E=Object(i.c)().user,y=function(e){return o.includes(e.id)},O={textColor:p,isClearable:f,isMulti:d,branches:E.branches,selectedBranch:E.branches.find(y),selectedBranches:E.branches.filter(y),onSingleSelection:function(e){null===e&&h?h():null!==e&&b&&b([e.id],[e])},onMultiSelection:function(e){0===e.length&&h?h():e.length&&b&&b(e.map(c.a.prop("id")),e)}};return E.branches.length<n?a.a.createElement(s,O):a.a.createElement(l.a,Object.assign({},O,g()))}},7705:function(e,t,n){"use strict";var r=n(34),a=n(39),i=n(73),c=n(0),l=n.n(c),o=n(22).b.div.withConfig({displayName:"CursorContainer",componentId:"sc-1c4akqg-0"})(["cursor:",";"],function(e){var t=e.cursor;return void 0===t?"default":t}),u=function(e){var t=e.branch,n=e.onClick,r=e.short,a=void 0!==r&&r,i=e.showBrand,c=void 0===i||i;return l.a.createElement(o,{cursor:"pointer",onClick:n},a?t.name.substr(0,8):l.a.createElement(l.a.Fragment,null,l.a.createElement("span",null,t.name),c&&l.a.createElement("span",null," [".concat(t.brand.name,"]"))))},d=n(7668),s=n(25),m=n(33);n.d(t,"a",function(){return p});var f=function(e){var t=e.getStyles,n=e.innerProps,r=n.ref,c=Object(a.a)(n,["ref"]);return l.a.createElement("div",Object.assign({},c,{ref:r,style:t("clearIndicator",e)}),l.a.createElement("div",{style:{padding:"0px 5px"}},l.a.createElement(i.Trans,{id:"All"})))},p=function(e){var t=e.branches,n=e.selectedBranch,i=e.onSingleSelection,c=e.selectedBranches,o=e.onMultiSelection,p=Object(a.a)(e,["branches","selectedBranch","onSingleSelection","selectedBranches","onMultiSelection"]);return l.a.createElement(d.a,Object.assign({value:p.isMulti?c:n,placeholder:p.isMulti?m.b._("Filter branches..."):m.b._("Select a branch"),options:t,getOptionValue:s.a.prop("id"),formatOptionLabel:function(e){return l.a.createElement(u,{branch:e})},filterOption:function(e,t){return e.data.name.toLocaleLowerCase().includes(t.toLocaleLowerCase())},closeMenuOnSelect:!p.isMulti,components:{ClearIndicator:f},styles:{clearIndicator:function(e){return Object(r.a)({},e,{cursor:"pointer"})}},onChange:function(e){p.isMulti&&o&&Array.isArray(e)&&o(e),!p.isMulti&&i&&(Array.isArray(e)?i(s.a.head(e)||null):i(e||null))}},p))}},7707:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n(39),a=n(0),i=n.n(a),c=n(7661),l=n(7708),o=n(110),u=n(18),d=function(e){var t=e.children,n=Object(r.a)(e,["children"]);return i.a.createElement(c.FormApi,null,function(e){return i.a.createElement(o.a,Object.assign({color:u.a.green,disabled:!Object(l.a)(e)||e.submitting,onClick:function(t){t.preventDefault(),e.submitForm(t)}},n),t)})}},7708:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return c});var r=n(7702),a=n(33);function i(e){return!e.errors||0===Object.keys(e.errors).length}function c(e){return function(t){return Object(r.isEmpty)(t+"")?a.b._("{fieldName} must be entered",{fieldName:e}):null}}},7709:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(7798),a=n(7703),i=n(0),c=n.n(i),l=function(e){var t=e.children;return c.a.createElement(a.e,{utils:r.a},t)}},7720:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var r=n(3),a=n(94),i=n(68),c=n(50),l=n(161),o=n(0),u=n.n(o),d=n(22),s=n(7729),m=n(18);function f(){var e=Object(r.a)(["\n  padding: 0.2rem 0.3rem 0.1rem 0.3rem;\n"]);return f=function(){return e},e}var p=Object(l.a)(f()),b=d.b.div.withConfig({displayName:"DeliveryTimeBadge__DelayedTimeMark",componentId:"g9mune-0"})(["background:",";border:2px solid ",";width:0.6rem;height:0.6rem;border-radius:0.7rem;position:absolute;"],m.a.white,m.a.greyMiddle),h=function(e){var t=e.deliverAt,n=e.deliveredAt,r=e.isCancelled,l=void 0!==r&&r,o=e.isDelayed,d=void 0!==o&&o,m=e.onClick,f=!(n||l),h=Object(i.useTimer)({interval:i.MINUTE,enabled:f}),v=s.a.UNKNOWN;if(l)return u.a.createElement(s.b,{variant:v,className:p},u.a.createElement(a.d,null));if(!t)return u.a.createElement(s.b,{variant:v},"\u2754");var g=Object(c.differenceInMinutes)(t,n||h);return v=g>20?s.a.NORMAL:g>0?s.a.WARNING:s.a.CRITICAL,u.a.createElement(u.a.Fragment,null,d&&u.a.createElement(b,null),u.a.createElement(s.b,{minutes:g,variant:v,onClick:m}))}},7721:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(39),a=n(0),i=n.n(a),c=n(61),l=n(7665),o=n(7675),u=function(e){var t=e.route,n=e.component,u=e.canQuery,d=e.canMutate,s=Object(r.a)(e,["route","component","canQuery","canMutate"]),m=t?i.a.createElement(c.b,{to:t},Object(a.createElement)(n)):Object(a.createElement)(n);return u&&(m=i.a.createElement(o.a,{queryName:u},m)),d&&(m=i.a.createElement(l.a,{mutationName:d},m)),i.a.createElement("div",s,m)}},7722:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=n(22).b.a.withConfig({displayName:"LinkStyled",componentId:"a79qe4-0"})(["color:inherit;text-decoration-color:rgba(0,0,0,0.08);&:hover{text-decoration-color:rgba(0,0,0,0.5);}&:visited{text-decoration-color:rgba(0,0,0,0.08);}"])},7729:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return y});var r,a,i=n(3),c=n(159),l=n(161),o=n(0),u=n.n(o),d=n(22),s=n(18);function m(){var e=Object(i.a)(["\n  cursor: pointer;\n"]);return m=function(){return e},e}function f(){var e=Object(i.a)(["\n  font-size: 1.7rem;\n  font-weight: bold;\n"]);return f=function(){return e},e}function p(){var e=Object(i.a)(["\n  font-size: 0.8rem;\n"]);return p=function(){return e},e}!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.CRITICAL=1]="CRITICAL",e[e.WARNING=2]="WARNING",e[e.NORMAL=3]="NORMAL"}(a||(a={}));var b=d.b.div.withConfig({displayName:"TimeBadge__TimeBadgeStyled",componentId:"zuoyiw-0"})(["height:2rem;line-height:2rem;width:2rem;border-radius:50%;overflow:hidden;border:1px solid white;color:",";background:",";text-align:center;font-family:'Open Sans',sans-serif;"],s.a.white,s.a.greyMiddle),h=(r={},Object(c.a)(r,a.UNKNOWN,Object(d.b)(b).withConfig({displayName:"TimeBadge__UNKNOWN",componentId:"zuoyiw-1"})([""])),Object(c.a)(r,a.CRITICAL,Object(d.b)(b).withConfig({displayName:"TimeBadge__CRITICAL",componentId:"zuoyiw-2"})(["background:",";"],s.a.red)),Object(c.a)(r,a.WARNING,Object(d.b)(b).withConfig({displayName:"TimeBadge__WARNING",componentId:"zuoyiw-3"})(["background:",";color:",";font-weight:bold;"],s.a.orange,s.a.black)),Object(c.a)(r,a.NORMAL,Object(d.b)(b).withConfig({displayName:"TimeBadge__NORMAL",componentId:"zuoyiw-4"})(["background:",";"],s.a.green)),r),v=Object(l.a)(p()),g=Object(l.a)(f()),E=Object(l.a)(m()),y=function(e){var t=e.minutes,n=e.className,r=e.children,a=e.variant,i=e.onClick,c=h[a],o=r,d=[];return void 0!==t&&((t>99||t<-9)&&d.push(v),t<-99?(o="\u2012",d.push(g)):o=t.toString()),i&&d.push(E),u.a.createElement(c,{onClick:i,className:l.b.apply(void 0,[n].concat(d))},o)}},7730:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(0),a=n.n(r),i=function(e){var t=e.customer;return t?a.a.createElement("span",null,"".concat(t.lastName?"".concat(t.firstName," ").concat(t.lastName):t.defaultPhone?t.defaultPhone.phone:"")):a.a.createElement("i",null,"unknown")}},7737:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var r=n(17),a=n.n(r),i=n(24),c=n(34),l=n(9),o=n(68),u=n(62),d=n(14),s=n(60);function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(l.useApolloClient)(),r=Object(l.useApolloDefender)().onError,m=Object(s.useObservable)({data:null,loading:!1,error:void 0,wasExecuted:!1,get hasAnyError(){return Boolean(m.error)}});Object(o.useReaction)(function(){return m.error},function(e){e&&r(e)});var f=function(n,r){return new l.ApolloOperationError(n,e,Object(c.a)({},t,{variables:r}))},p=function(){var r=Object(i.a)(a.a.mark(function r(i){var l;return a.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return m.loading=!0,r.prev=1,r.next=4,n.query(Object(c.a)({},t,{query:e,variables:i}));case 4:l=r.sent,Object(d.runInAction)(function(){m.wasExecuted=!0,m.data=l.data,m.loading=!1,l.errors&&l.errors.length>0&&(m.error=f(new u.ApolloError({graphQLErrors:l.errors}),i))}),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(1),Object(d.runInAction)(function(){m.error=f(r.t0,i),m.loading=!1});case 11:return r.abrupt("return",m);case 12:case"end":return r.stop()}},r,this,[[1,8]])}));return function(e){return r.apply(this,arguments)}}();return{result:m,execute:p,reset:function(){Object(d.runInAction)(function(){m.wasExecuted=!1,m.data=null,m.error=void 0,m.loading=!1})}}}},7777:function(e,t,n){"use strict";n.d(t,"b",function(){return j}),n.d(t,"a",function(){return k});var r=n(73),a=n(120),i=n.n(a),c=n(0),l=n.n(c),o=n(305),u=n(22),d=n(7681),s=n(28),m=n(134),f=n(18),p=n(7730),b=n(7720),h=Object(u.b)(o.Element).withConfig({displayName:"OrderTicker__OrderTickerStyled",componentId:"sc-1k7ehm4-0"})(["text-align:left;cursor:pointer;&:hover{background-color:",";}&:active{background-color:",";}"],i()(f.a.turquoise).alpha(.05).string(),i()(f.a.turquoise).alpha(.2).string()),v=u.b.div.withConfig({displayName:"OrderTicker__OrderTickerMainContentStyled",componentId:"sc-1k7ehm4-1"})(["display:flex;flex-wrap:nowrap;justify-content:space-between;padding:0.4rem;"]),g=u.b.div.withConfig({displayName:"OrderTicker__DeliveryTimeBadgeContainerStyled",componentId:"sc-1k7ehm4-2"})(["flex:0 0 2rem;"]),E=u.b.div.withConfig({displayName:"OrderTicker__AddressDisplayContainerStyled",componentId:"sc-1k7ehm4-3"})(["flex:1 0;padding:0 0 0 0.5rem;"]),y=u.b.div.withConfig({displayName:"OrderTicker__CustomerIdentityContainerStyled",componentId:"sc-1k7ehm4-4"})(["flex:1 0;padding:0 0 0 0.5rem;"]),O=u.b.div.withConfig({displayName:"OrderTicker__PriceContainerStyled",componentId:"sc-1k7ehm4-5"})(["flex:0 0 3.5rem;text-align:right;position:relative;"]),C=u.b.div.withConfig({displayName:"OrderTicker__PaidMarkStyled",componentId:"sc-1k7ehm4-6"})(["position:absolute;top:0;right:0;left:0;bottom:0;&:after{content:'';position:absolute;top:0.1rem;right:-0.3rem;left:0.9rem;bottom:0.3rem;border-top:2px solid ",";transform:rotate(13deg);transform-origin:0% 0%;opacity:0.7;}"],f.a.orange),w=u.b.div.withConfig({displayName:"OrderTicker__PaidTextStyled",componentId:"sc-1k7ehm4-7"})(["color:",";"],f.a.orange),j=u.b.div.withConfig({displayName:"OrderTicker__ToBranchContainerStyled",componentId:"sc-1k7ehm4-8"})(["padding:0.3rem 0.6rem;display:inline-block;border-top-left-radius:",";background-color:",";color:",";"],f.c.Card,f.a.green,f.a.white),I=u.b.div.withConfig({displayName:"OrderTicker__ToPickupLabel",componentId:"sc-1k7ehm4-9"})(["font-style:italic;color:",";"],f.a.violet),k=function(e){var t=e.order,n=e.showBranch,a=e.onClick;return l.a.createElement(h,{onClick:a,name:"order-".concat(t.id)},n&&l.a.createElement(j,null,t.companyBranch.name),l.a.createElement(v,null,l.a.createElement(g,null,l.a.createElement(b.a,{deliverAt:t.deliverAt?new Date(t.deliverAt):null,deliveredAt:t.deliveredAt?new Date(t.deliveredAt):null,isCancelled:t.orderStateCategory===s.s.Cancel,isDelayed:null!==t.delayedDeliveryTime})),l.a.createElement(E,null,t.deliveryType&&t.deliveryType.enum===s.a.Pickup?l.a.createElement(I,null,l.a.createElement(r.Trans,{id:"To pickup"})):Object(m.a)(t.address)),l.a.createElement(y,null,l.a.createElement(p.a,{customer:t.customer})),l.a.createElement(O,null,l.a.createElement(d.a,{price:t.totalSum.value,currencyCode:t.totalSum.currency.code}),t.isPaidWithCard&&l.a.createElement(l.a.Fragment,null,l.a.createElement(C,null),l.a.createElement(w,null,l.a.createElement(r.Trans,{id:"Paid"}))))))}},7778:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var r=n(0),a=n.n(r),i=n(22),c=n(7679),l=n(7663),o=n(33),u=n(18),d=i.b.span.withConfig({displayName:"NoteLine__CurrentNoteStyled",componentId:"fzcqzs-0"})(["color:",";"],u.a.orange),s=i.b.span.withConfig({displayName:"NoteLine__PreviousNoteStyled",componentId:"fzcqzs-1"})(["color:",";margin-left:0.5rem;"],u.a.greyDark),m=function(e){var t=e.note,n=e.previousNote;return t||n?a.a.createElement(a.a.Fragment,null,a.a.createElement(c.a,null),a.a.createElement(l.a,{icon:"note",labelMargin:"0"},a.a.createElement(d,null,t||o.b._("Without note").toLocaleLowerCase()),a.a.createElement(s,null,n))):null}},7783:function(e,t,n){"use strict";n.d(t,"a",function(){return p}),n.d(t,"b",function(){return b});var r=n(74),a=n(0),i=n.n(a),c=n(22),l=n(28),o=n(110),u=n(18),d=[20,30,45,60,75,90,105,120],s=[10,20,30,45,60,75,90],m=c.b.div.withConfig({displayName:"DeliveryMinutes__MinutesContainer",componentId:"i7ojyp-0"})(["display:flex;justify-content:center;"]),f=c.b.div.withConfig({displayName:"DeliveryMinutes__MinutesItem",componentId:"i7ojyp-1"})(["margin:1rem 1rem 0 0;"]),p=function(e){var t=e.deliveryType,n=e.onMinuteClick,a=e.initialMinutes,c=i.a.useState(a),l=Object(r.a)(c,2),d=l[0],s=l[1],p=b(t);return i.a.createElement(m,null,p.map(function(e){return i.a.createElement(f,{key:e},i.a.createElement(o.a,{onClick:function(){s(e),n(e)},color:d===e?u.a.yellow:u.a.green},e))}))};function b(e){return e===l.a.Pickup?s:d}},7785:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n(74),a=n(73),i=n(95),c=n(0),l=n.n(c),o=n(7783),u=n(110),d=function(e){var t=e.title,n=e.deliveryType,d=e.onConfirm,s=e.onCancel,m=e.children,f=e.cancelText,p=e.refApi,b=Object(c.useState)(!1),h=Object(r.a)(b,2),v=h[0],g=h[1],E=function(){return g(!0)},y=function(){return g(!1)};return p&&(p.current={openDialog:E,closeDialog:y}),l.a.createElement(l.a.Fragment,null,m&&m({openDialog:E,closeDialog:y}),l.a.createElement(i.c,{open:v,onClose:y},l.a.createElement(i.f,null,t),l.a.createElement(i.e,null,l.a.createElement(o.a,{deliveryType:n,onMinuteClick:function(e){y(),d(e)}})),l.a.createElement(i.d,null,l.a.createElement(u.a,{onClick:function(){y(),s&&s()}},f||l.a.createElement(a.Trans,{id:"Cancel"})))))}},7788:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n(34),a=n(39),i=n(0),c=n.n(i),l=n(54),o=n(61),u=n(170),d=function(e){var t=e.to,n=e.from,r=Object(a.a)(e,["to","from"]);return c.a.createElement(l.Route,{children:function(e){var a=e.location;return c.a.createElement(o.b,Object.assign({to:s(t,n||"".concat(a.pathname,"/"))},r))}})};function s(e,t){if("string"===typeof e)return Object(u.a)(e,t);var n=Object(u.a)(e.pathname||"",t);return Object(r.a)({},e,{pathname:n})}},7797:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(34),a=n(39),i=n(7703),c=n(0),l=n.n(c),o=n(7661),u=n(33),d=n(7709),s=function(e){var t=e.field,n=e.inline,c=void 0===n||n,s=Object(a.a)(e,["field","inline"]),m=c?i.c:i.a;return l.a.createElement(d.a,null,l.a.createElement(o.Field,{field:t,render:function(e){return l.a.createElement(m,Object(r.a)({value:e.value,onChange:function(t){return e.setValue(t)},onOpen:function(){return e.setTouched(!0)},format:"lll",ampm:!1,showTabs:!1,maxDateMessage:u.b._("Date is too much in the future"),minDateMessage:u.b._("Date is too much in the past")},s))}}))}},7802:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=n(22).b.div.withConfig({displayName:"FlexAutoHeight__AutoHeight",componentId:"sc-1j1q0nj-0"})(["display:flex;flex-direction:column;height:100%;"])},7948:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n(39),a=n(7703),i=n(0),c=n.n(i),l=n(7661),o=n(33),u=n(7709),d=function(e){var t=e.field,n=Object(r.a)(e,["field"]);return c.a.createElement(u.a,null,c.a.createElement(l.Field,{field:t,render:function(e){return c.a.createElement(a.b,Object.assign({value:e.value,onChange:function(t){return e.setValue(t)},onOpen:function(){return e.setTouched(!0)},format:"ll",ampm:!1,okLabel:o.b._("Ok"),cancelLabel:o.b._("Cancel"),clearLabel:o.b._("Clear"),todayLabel:o.b._("Today"),maxDateMessage:o.b._("Date is too much in the future"),minDateMessage:o.b._("Date is too much in the past")},n))}}))}},7949:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(22),a=n(18),i=r.b.div.withConfig({displayName:"FlexRow",componentId:"sc-1ef4cag-0"})(["display:flex;flex-direction:row;justify-content:space-between;border-bottom:1px solid ",";padding:0.1rem 0 0.1rem 0;"],a.a.greyMiddle)},7951:function(e,t,n){"use strict";var r,a=n(0),i=n.n(a),c=n(22),l=n(60),o=function(e){var t=e.test,n=e.renderSuccess,r=e.renderFailure;return Object(l.useObserver)(function(){return t()?n():r?r():null})},u=n(18),d=n(7777),s=n(7679),m=n(34),f=n(7663),p=n(7722),b=function(e){var t=e.phones,n=e.emails,r=function(e){return i.a.createElement(f.a,{icon:e.icon,key:e.value,labelMargin:"0"},i.a.createElement("div",{title:e.description||""},function(e){return e.isMail?i.a.createElement(p.a,{href:"mailto:".concat(e.value)},e.value):i.a.createElement(p.a,{href:"tel:".concat(e.value.replace("/ /g",""))},e.value)}(e)))};return i.a.createElement(i.a.Fragment,null,(t.length>0||n.length>0)&&i.a.createElement(s.a,null),t.map(function(e){return r(Object(m.a)({icon:"phone",isMail:!1,value:e.phone},e))}),n.map(function(e){return r(Object(m.a)({icon:"mail_outline",isMail:!0,value:e.email},e))}))},h=n(7778),v=n(73),g=function(e){var t=e.current,n=e.total;return i.a.createElement(v.Trans,{id:"It's customer's {current, selectordinal, one {#st} two {#nd} few {#rd} other {#th}} order {total, plural, one {} other {from total of # orders}}",values:{current:t,total:n}})},E=n(33),y=n(7681),O=c.b.div.withConfig({displayName:"OrderWarePriceLine__OrderWareLineWrap",componentId:"sc-1ollpms-0"})(["display:flex;justify-content:space-between;padding-left:3rem;"]),C=c.b.div.withConfig({displayName:"OrderWarePriceLine__NameContainerStyled",componentId:"sc-1ollpms-1"})(["flex:1 0;color:",";"],u.a.greyMiddle),w=c.b.div.withConfig({displayName:"OrderWarePriceLine__PriceContainerStyled",componentId:"sc-1ollpms-2"})(["flex:0 0 4.5rem;text-align:right;color:",";"],u.a.greyMiddle),j=function(e){var t=e.label,n=e.price,r=e.highlight,a=void 0!==r&&r;return i.a.createElement(O,null,i.a.createElement(C,null,t),i.a.createElement(w,null,a?i.a.createElement("b",null,i.a.createElement(y.a,{price:n})):i.a.createElement(y.a,{price:n})))},I=c.b.div.withConfig({displayName:"OrderDetailTotals__OrderCartTotalsContainer",componentId:"sc-1nzpgi5-0"})(["margin:0 0 0 auto;width:20rem;text-align:right;"]),k=function(e){var t=e.order;return i.a.createElement(I,null,i.a.createElement(j,{label:E.b._("Tips"),price:t.tip.value}),i.a.createElement(j,{label:E.b._("Transport fee"),price:t.transportFee.value}),i.a.createElement(j,{label:E.b._("Covers price"),price:t.coverPrice.value}),i.a.createElement(j,{label:E.b._("Discount total"),price:-1*t.totalDiscount.value}),i.a.createElement(j,{label:E.b._("Total price"),price:t.totalSum.value,highlight:!0}))},N=n(28),_=c.b.div.withConfig({displayName:"OrderIdLine__OrderOriginLabel",componentId:"iwvc5u-0"})(["display:inline-block;background:",";border-radius:0.7rem;margin:0 0 0 1rem;padding:0.1rem 0.8rem;"],function(e){switch(e.orderOrigin.enum){case N.q.DameJidlo:return u.a.orange;default:return u.a.greyLight}}),S=function(e){var t=e.displayedId,n=e.orderOrigin;return i.a.createElement(f.a,{icon:"format_list_numbered",labelMargin:"0"},t,i.a.createElement(_,{orderOrigin:n,displayedId:t},n.code))},x=function(e){var t=e.rules,n=e.children;return t.length>0||n?i.a.createElement(i.a.Fragment,null,i.a.createElement(s.a,null),i.a.createElement(f.a,{icon:"announcement",labelMargin:"0"},n,i.a.createElement("br",null),t.join(", "))):null},T=n(94),D=n(134),M=c.b.div.withConfig({displayName:"OrderTimeLabel",componentId:"akyxtu-0"})(["margin-left:1rem;display:inline-block;color:",";"],u.a.greyMiddle),F=c.b.span.withConfig({displayName:"OrderStats__DelayedDeliveryTimeLabel",componentId:"sc-13hdm3k-0"})(["font-weight:bold;color:",";"],u.a.orange),L=Object(c.b)(M).withConfig({displayName:"OrderStats__DelayedOrderTimeLabel",componentId:"sc-13hdm3k-1"})(["color:",";"],u.a.orange),B=function(e){var t=e.order,n=[];if(t.delayedDeliveryTime?n.push(i.a.createElement("div",{key:"delayedDeliveryTime"},i.a.createElement(F,null,Object(D.g)(t.delayedDeliveryTime)),i.a.createElement(L,null,i.a.createElement(v.Trans,{id:"Deliver at time"})))):t.deliverAt&&n.push(i.a.createElement("div",{key:"deliverAt"},Object(D.g)(t.deliverAt),i.a.createElement(M,null,i.a.createElement(v.Trans,{id:"Deliver on time"})))),t.driver){var r=t.driver.user,a=r.firstName,c=r.lastName;n.push(i.a.createElement("div",{key:"driver"},"".concat(a," ").concat(c),i.a.createElement(M,null,i.a.createElement(v.Trans,{id:"Driver"}))))}return 0===n.length?null:i.a.createElement(f.a,{icon:T.m,labelMargin:"0"},n)},A=n(159),R=n(208),W=n(25),P=(r={},Object(A.a)(r,N.s.NewOrders,Object(R.i18nMark)("Created")),Object(A.a)(r,N.s.Preparing,Object(R.i18nMark)("Preparing")),Object(A.a)(r,N.s.ReadyToDeliver,Object(R.i18nMark)("Ready to deliver")),Object(A.a)(r,N.s.OnWay,Object(R.i18nMark)("On way")),Object(A.a)(r,N.s.Finished,Object(R.i18nMark)("Finished")),r),z=function(e){var t=e.orderTiming;return i.a.createElement(f.a,{icon:"access_time",labelMargin:"0"},W.a.reject(function(e){var t=e.createdAt,n=e.orderStateCategory;return null===t||!P[n]},t).map(function(e){return i.a.createElement("div",{key:e.orderStateCategory},Object(D.g)(e.createdAt),i.a.createElement(M,null,E.b._(P[e.orderStateCategory])))}))},q=c.b.div.withConfig({displayName:"OrderWareLine__OrderWareLineWrap",componentId:"rd1fw7-0"})(["display:flex;justify-content:space-between;padding-left:3rem;"]),H=c.b.div.withConfig({displayName:"OrderWareLine__CodeContainerStyled",componentId:"rd1fw7-1"})(["flex:0 0 5rem;"]),G=c.b.div.withConfig({displayName:"OrderWareLine__NameContainerStyled",componentId:"rd1fw7-2"})(["flex:1 0;color:",";"],u.a.black),U=c.b.div.withConfig({displayName:"OrderWareLine__PriceContainerStyled",componentId:"rd1fw7-3"})(["flex:0 0 4.5rem;text-align:right;color:",";"],u.a.greyMiddle),V=function(e){var t=e.code,n=e.label,r=e.price;return i.a.createElement(q,null,i.a.createElement(H,null,t),i.a.createElement(G,null,n),i.a.createElement(U,null,i.a.createElement(y.a,{price:r})))},Q=function(e){var t=e.orderWares;return i.a.createElement("div",null,t.map(function(e){return i.a.createElement(a.Fragment,{key:e.id},i.a.createElement(V,{code:e.recipe.code,label:e.recipe.nameLabel,price:e.price.value}),i.a.createElement(i.a.Fragment,null,e.sidedishes.map(function(e){return i.a.createElement(V,{key:e.id,code:"+".concat(e.recipe.code),label:e.recipe.nameLabel,price:e.price.value})})))}))},K=n(3),J=n(4),$=n.n(J),Y=n(160);function X(){var e=Object(K.a)(["\n  query GOrderDetail($id: ID!) {\n    order(id: $id) {\n      id\n      createdAt\n      deliverAt\n      delayedDeliveryTime\n      companyBranch {\n        id\n      }\n      customer {\n        emails {\n          ...FEmail\n        }\n        phones {\n          ...FPhone\n        }\n      }\n      customerOrdersCountCurrent\n      customerOrdersCountTotal\n      note\n      previousNote\n      allAppliedRules\n      items {\n        ...GOrderDetailWare\n        sidedishes: sideDishes {\n          ...GOrderDetailWare\n        }\n      }\n      totalSum {\n        ...FPrice\n      }\n      transportFee {\n        ...FPrice\n      }\n      coverPrice {\n        ...FPrice\n      }\n      totalDiscount {\n        ...FPrice\n      }\n      orderOrigin {\n        code\n        enum\n      }\n      tip {\n        ...FPrice\n      }\n      ...FOrderTiming\n      ...FOrderDriver\n    }\n  }\n\n  fragment GOrderDetailWare on OrderRecipe {\n    id\n    recipe {\n      id\n      code\n      nameLabel\n    }\n    price {\n      ...FPrice\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return X=function(){return e},e}var Z,ee=Object(Y.a)($()(X(),N.n,N.d,N.m,N.j,N.l)),te=n(7700),ne=n(74),re=n(295),ae=n(110),ie=c.b.div.withConfig({displayName:"HamburgerMenu__StyledHamburgerMenu",componentId:"sc-126axmf-0"})(["position:relative;"]),ce=c.b.div.withConfig({displayName:"HamburgerMenu__PopupMenu",componentId:"sc-126axmf-1"})(["position:absolute;bottom:4rem;left:0;background:",";padding:",";border:solid 1px ",";border-radius:",";box-shadow:2px 6px 21px -2px rgba(0,0,0,0.75);& div:not(:last-child){margin-bottom:",";}"],u.a.white,u.d.Small,u.a.greyLight,u.c.Card,u.d.Middle),le=function(e){var t=e.children,n=i.a.useState(!1),r=Object(ne.a)(n,2),a=r[0],c=r[1];return i.a.Children.count(t)?i.a.createElement(ie,null,i.a.createElement(re.a,null,i.a.createElement(ae.a,{iconName:"menu",disabled:null===t,onClick:function(){return c(!a)}})),a&&i.a.createElement(ce,null,t)):null},oe=n(111),ue=n(68),de=function(e){var t=e.confirmNode,n=e.initialColor,r=void 0===n?u.a.greyMiddle:n,a=e.confirmColor,c=void 0===a?u.a.red:a,l=e.confirmDisableMs,o=void 0===l?300:l,d=e.resetToInitialMs,s=void 0===d?3*ue.SECOND:d,m=e.children,f=e.onConfirm,p=i.a.useState(!1),b=Object(ne.a)(p,2),h=b[0],v=b[1],g=i.a.useRef(null);return i.a.useEffect(function(){if(h){var e=setTimeout(function(){v(!1)},s);return function(){clearTimeout(e)}}},[s,h]),i.a.createElement(ae.a,{ref:g,onClick:function(){!1===h?(g.current.disabled=!0,v(!0),setTimeout(function(){g.current&&(g.current.disabled=!1)},o)):f()},color:h?c:r},h?t:m)},se=function(e){var t=e.orderId,n=Object(N.E)(),r=Object(ne.a)(n,1)[0];return i.a.createElement(oe.a,{width:7.375},i.a.createElement(de,{confirmNode:i.a.createElement(v.Trans,{id:"Really cancel?"}),onConfirm:function(){r({orderId:t})}},i.a.createElement(v.Trans,{id:"Cancel order"})))},me=n(7665),fe=function(e){var t=e.orderId,n=e.isDelivery,r=Object(N.P)(),a=Object(ne.a)(r,1)[0];return n?i.a.createElement(me.a,{mutationName:"updateOrderDeliveryToPickup"},i.a.createElement(de,{confirmNode:i.a.createElement(v.Trans,{id:"Really change?"}),onConfirm:function(){a({orderId:t})}},i.a.createElement(v.Trans,{id:"Change to pickup"}))):null},pe=(Z={},Object(A.a)(Z,N.t.Accepted,Object(R.i18nMark)("Accept order")),Object(A.a)(Z,N.t.Finished,Object(R.i18nMark)("Finish order")),Z),be=function(e){var t=e.orderId,n=e.nextState,r=Object(N.Q)(),a=Object(ne.a)(r,1)[0];return i.a.createElement(me.a,{mutationName:"addOrderState"},i.a.createElement(ae.a,{text:E.b._(pe[n]),width:"7.375rem",onClick:function(){a({orderId:t,state:n})}}))},he=n(59);function ve(e,t){var n=Object(he.c)().user;return e.every(n.canQuery)&&t.every(n.canMutate)}var ge=n(7726),Ee=n(98),ye=n(7668),Oe=c.b.div.withConfig({displayName:"OrderDriverSelect__DriverName",componentId:"krow6a-0"})(["margin:0.1rem 0 0rem 0.2rem;display:inline-block;vertical-align:top;font-size:1.25rem;"]),Ce={background:u.a.greyMiddle},we={color:u.a.white},je={control:function(e){return Object(m.a)({},e,Ce,we,{height:u.d.ButtonHeight+u.d.DefaultSizeUnit,borderWidth:0,borderRadius:u.c.Button,margin:0})},menu:function(e){return Object(m.a)({},e,Ce)},valueContainer:function(e){return Object(m.a)({},e,we)},singleValue:function(e){return Object(m.a)({},e,we)},placeholder:function(e){return Object(m.a)({},e,we,{fontSize:"1.2rem"})}},Ie=function(e){var t=e.drivers,n=e.selectedDriver,r=e.isLoading,a=e.onSelect,c=e.onClear,l=e.onReload;return i.a.createElement(ye.a,{options:t,value:n,getOptionValue:W.a.prop("id"),isLoading:r,isSearchable:!1,isClearable:!0,placeholder:"Deliver order",width:16,styles:je,noOptionsMessage:function(){return E.b._("No drivers available")},onChange:function(e){null===e?c():a(e)},onMenuOpen:l,components:{ValueContainer:function(e){return i.a.createElement(i.a.Fragment,null,i.a.createElement(Ee.a,{iconName:"directions_car",fontSize:2,color:u.a.white}),i.a.createElement(ge.a.ValueContainer,e))},DropdownIndicator:function(){return null}},formatOptionLabel:function(e){return i.a.createElement(Oe,null,"".concat(e.firstName," ").concat(e.lastName))}})},ke=function(e){var t=e.branchId,n=e.orderId,r=e.orderStateCategory,a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ve(t,[])}("drivers"),c=Object(N.Q)(),l=Object(ne.a)(c,1)[0],o=Object(N.U)(),u=Object(ne.a)(o,1)[0],d=Object(N.S)(),s=Object(ne.a)(d,1)[0],m=Object(N.kb)({branchId:[t],orderId:n},{skip:!a}),f=m.data,p=m.loading,b=m.refetch;return i.a.createElement(me.a,{mutationName:"createUserDeliveringOrder"},i.a.createElement(Ie,{drivers:p||!a?[]:f.drivers,selectedDriver:p?null:f.order.driver&&f.order.driver.user,isLoading:p,onReload:b,onClear:function(){var e=f.order.driver;e&&s({orderDriverId:e.id})},onSelect:function(e){u({orderId:n,driverId:e.id}),r!==N.s.OnWay&&l({orderId:n,state:N.t.OnWay})}}))},Ne=c.b.div.withConfig({displayName:"OrderStateFlowContainer__OrderStateFlowContainerWrapper",componentId:"sc-58okdq-0"})(["margin:0 0 0 auto;text-align:right;height:",";"],u.d.ButtonHeight+u.d.DefaultSizeUnit),_e=c.b.div.withConfig({displayName:"OrderStateFlowContainer__Control",componentId:"sc-58okdq-1"})(["margin:0 0 0 0.5rem;display:inline-block;vertical-align:bottom;text-align:left;height:100%;"]),Se=function(e){var t=e.children;return i.a.createElement(Ne,null,a.Children.map(t,function(e,t){return i.a.createElement(_e,{key:t},e)}))},xe=n(7785),Te=function(e){var t=e.orderId,n=e.isDelivery,r=Object(N.R)(),a=Object(ne.a)(r,1)[0];return i.a.createElement(me.a,{mutationName:"orderNotifyCustomer"},i.a.createElement(xe.a,{title:n?E.b._("Send expected time of delivery to customer (in minutes)"):E.b._("Send expected time of pickup to customer (in minutes)"),deliveryType:n?N.a.Messenger:N.a.Pickup,onConfirm:function(e){a({orderId:t,minutes:e})}},function(e){var t=e.openDialog;return i.a.createElement(ae.a,{iconName:"schedule",onClick:t})}))},De=function(e){var t=e.children;return i.a.createElement(te.a,{position:"BottomLeft"},i.a.createElement(le,null,t))},Me=function(e){return i.a.createElement(Se,null,i.a.createElement(De,null,e.canCancel&&i.a.createElement(se,e),i.a.createElement(fe,e)),i.a.createElement(Te,e),i.a.createElement(be,Object.assign({nextState:N.t.Accepted},e)))},Fe=function(e){return i.a.createElement(Se,null,i.a.createElement(De,null,e.canCancel&&i.a.createElement(se,e),i.a.createElement(fe,e)),i.a.createElement(Te,e),e.canDeliver?i.a.createElement(ke,e):i.a.createElement(be,Object.assign({nextState:N.t.Finished},e)))},Le=function(e){return i.a.createElement(Se,null,i.a.createElement(De,null,e.canCancel&&i.a.createElement(se,e)),e.isDelivery?i.a.createElement(ke,e):i.a.createElement(be,Object.assign({nextState:N.t.Finished},e)))},Be=function(e){return i.a.createElement(Se,null,i.a.createElement(De,null,e.canCancel&&i.a.createElement(se,e)),i.a.createElement(Te,e),i.a.createElement(ke,e),i.a.createElement(be,Object.assign({nextState:N.t.Finished},e)))},Ae=function(e){return i.a.createElement(Se,null,i.a.createElement(De,null,e.canCancel&&i.a.createElement(se,e)))},Re=function(e){var t=e.orderId,n=e.branchId,r=Object(N.ob)({orderId:t,branchId:n}),a=r.data;if(r.loading)return null;var c=a.order,l=a.companyBranch.allowedCategories,o=null!==c.deliveryType&&c.deliveryType.enum!==N.a.Pickup,u=o&&(l.includes(N.s.OnWay)||l.includes(N.s.ReadyToDeliver)),d=c.isCancelable,s={orderId:t,branchId:n,orderStateCategory:c.orderStateCategory,canCancel:d,canDeliver:u,isDelivery:o};switch(c.orderStateCategory){case N.s.NewOrders:return i.a.createElement(Me,s);case N.s.Preparing:return i.a.createElement(Fe,s);case N.s.ReadyToDeliver:return i.a.createElement(Le,s);case N.s.OnWay:return i.a.createElement(Be,s);case N.s.Finished:return i.a.createElement(Ae,s);default:return null}},We=c.b.div.withConfig({displayName:"OrderDetail__OrderDetailContainerStyled",componentId:"sc-1sl8m9d-0"})(["padding:0 0.5rem 0.5rem 1.1rem;"]),Pe=function(e){var t=e.orderId;return i.a.createElement(ee,{variables:{id:t},fetchPolicy:"cache-and-network",render:function(e){var n=e.order;return i.a.createElement(i.a.Fragment,null,i.a.createElement(We,null,i.a.createElement(s.a,null),i.a.createElement(Q,{orderWares:n.items}),i.a.createElement(k,{order:n}),i.a.createElement(x,{rules:n.allAppliedRules},i.a.createElement(g,{current:n.customerOrdersCountCurrent,total:n.customerOrdersCountTotal})),i.a.createElement(b,{phones:n.customer.phones,emails:n.customer.emails}),i.a.createElement(h.a,{note:n.note,previousNote:n.previousNote}),i.a.createElement(s.a,null),i.a.createElement(S,{displayedId:n.id,orderOrigin:n.orderOrigin}),i.a.createElement(s.a,null),i.a.createElement(z,{orderTiming:n.orderTiming}),i.a.createElement(B,{order:n})),i.a.createElement(Re,{orderId:t,branchId:n.companyBranch.id}))}})};n.d(t,"a",function(){return qe});var ze=c.b.div.withConfig({displayName:"OrderBox__OrderBoxStyled",componentId:"sc-1k86wgq-0"})(["background-color:",";color:",";border-radius:",";margin-bottom:0.5rem;position:relative;"],u.a.white,u.a.greyDarkest,u.c.Card),qe=function(e){var t=e.order,n=e.showBranch,r=e.toggleOrderDetail,a=e.isOrderDetailOpen;return i.a.createElement(ze,{id:"order-".concat(t.id)},i.a.createElement(d.a,{order:t,showBranch:n,onClick:function(){return r(t.id)}}),i.a.createElement(o,{test:function(){return a(t.id)},renderSuccess:function(){return i.a.createElement(Pe,{orderId:t.id})}}))}},8144:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(54),c=n(135),l=n(33),o=n(162),u=n(81),d=n(157),s=n(158),m=n(73),f=n(7683),p=n(7677),b=n(7948),h=n(7707),v=function(){return a.a.createElement(p.a,{justify:"flex-start"},a.a.createElement(f.a,{fixedWidth:!0,width:"12rem"},a.a.createElement(b.a,{field:"dateFrom",label:a.a.createElement(m.Trans,{id:"From date"}),autoOk:!0})),a.a.createElement(f.a,{fixedWidth:!0,width:"12rem"},a.a.createElement(b.a,{field:"dateTo",label:a.a.createElement(m.Trans,{id:"To date"}),autoOk:!0})),a.a.createElement(f.a,null,a.a.createElement(h.a,{width:"15rem"},a.a.createElement(m.Trans,{id:"Show history for branch"}))))},g=n(60),E=n(7949),y=n(7671),O=n(301),C=n(7788),w=n(59),j=n(295),I=n(134),k=n(110),N=n(50),_=n(7661),S=n(28),x=n(7737),T=Object(r.createContext)(null),D=function(e){var t=e.children,n=Object(w.c)().statistics,r=Object(x.a)(S.u),i=r.result,c=r.execute;return a.a.createElement(_.Form,{onSubmit:function(e){n.closureBranch&&c({branchId:n.closureBranch,dateFrom:Object(I.b)(e.dateFrom),dateTo:Object(I.b)(e.dateTo)})},defaultValues:{dateFrom:Object(N.subDays)(new Date,1),dateTo:new Date}},a.a.createElement(T.Provider,{value:i},t))},M=Object(g.observer)(function(){var e=Object(r.useContext)(T),t=e.data,n=e.loading,i=e.wasExecuted,c=Object(w.c)().statistics;return i?n?a.a.createElement(y.a,null,a.a.createElement(O.a,null)):c.closureBranch?t&&0===t.history.length?a.a.createElement(y.a,null,a.a.createElement(m.Trans,{id:"No closures found"})):a.a.createElement(a.a.Fragment,null,t&&t.history.map(function(e){return a.a.createElement(E.a,{key:e.id},a.a.createElement(f.a,{fixedWidth:!0},a.a.createElement(C.a,{to:"../".concat(e.id)},a.a.createElement(j.a,null,a.a.createElement(k.a,{iconName:"mode_edit"})))),a.a.createElement(f.a,{widthGrowIndex:1},"[".concat(e.reportSequence,"] ").concat(Object(I.b)(e.reportDatetime))))})):a.a.createElement(y.a,null,a.a.createElement(m.Trans,{id:"Select a branch"})):null}),F=n(74),L=n(22),B=n(7701),A=n(61),R=n(7675),W=n(18),P=function(e){return a.a.createElement(R.a,{queryName:"lastFinancialReport"},a.a.createElement(A.b,{to:"/overview/closure"},a.a.createElement(k.a,{text:l.b._("Current closure"),color:W.a.orange,width:"15rem",height:W.d.ButtonHeight+W.d.DefaultSizeUnit})))},z=L.b.div.withConfig({displayName:"ClosureStatisticsFilter__ButtonToRight",componentId:"szcsi6-0"})(["float:right;margin:0.5rem;"]),q=Object(g.observer)(function(e){var t=e.showCurrent,n=Object(w.c)().statistics;return a.a.createElement(a.a.Fragment,null,a.a.createElement(B.a,{selectedBranches:n.closureBranch?[n.closureBranch]:[],onSelectionChange:function(e){var t=Object(F.a)(e,1)[0];return n.setClosureBranch(t)},onSelectionClear:function(){return n.setClosureBranch(null)},isClearable:!1}),t&&a.a.createElement(z,null,a.a.createElement(P,null)))}),H=function(e){return a.a.createElement(D,null,a.a.createElement(s.a,{pageTitle:l.b._("Closure history"),useBackButton:!0,backRoute:"/overview"},a.a.createElement(d.a,null,a.a.createElement(q,{showCurrent:!0}),a.a.createElement(v,null)),a.a.createElement(d.a,null,a.a.createElement(M,null))))},G=L.b.p.withConfig({displayName:"MonospaceOutput__MonospaceOutputStyled",componentId:"hmbc1i-0"})(["color:white;font-family:'Lucida Console',Monaco,monospace;white-space:pre-wrap;margin:0.2rem 0.5rem 0.5rem 1rem;line-height:1.8rem;"]),U=function(e){var t=e.text;return a.a.createElement(G,null,t.replace(new RegExp("\t","g"),"\t"))},V=Object(g.observer)(function(e){var t=e.reportId,n=void 0===t?"":t,r=Object(w.c)().statistics,i=Object(S.ab)({branchId:r.closureBranch,reportId:n,showReport:Boolean(n)}),c=i.data;return i.loading?a.a.createElement(U,{text:l.b._("Computing")}):a.a.createElement(U,{text:n?c.report.plainData:c.lastReport.plainData})}),Q=n(17),K=n.n(Q),J=n(24),$=n(68),Y=n(163),X=function(e){return a.a.createElement(R.a,{queryName:"financialReports"},a.a.createElement(A.b,{to:"/overview/closure/history"},a.a.createElement(k.a,{text:l.b._("Closure history"),color:W.a.greyDark,width:"15rem",height:W.d.ButtonHeight+W.d.DefaultSizeUnit})))},Z=n(7665),ee=function(e){return a.a.createElement(Z.a,{mutationName:"createFinancialReport"},a.a.createElement(k.a,Object.assign({text:l.b._("Create closure"),color:W.a.green,width:"12rem"},e)))},te=L.b.div.withConfig({displayName:"ClosureStatisticsControl__ButtonToRight",componentId:"elroh1-0"})(["float:right;"]),ne=function(e){var t=e.showCurrent,n=Object(w.c)().statistics,i=Object(Y.a)().enqueueSuccess,c=Object($.useRouterContext)().history,o=Object(S.L)(),u=Object(F.a)(o,1)[0],d=Object(r.useCallback)(Object(J.a)(K.a.mark(function e(){var t,r;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.closureBranch){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,u({branchId:n.closureBranch});case 4:(t=e.sent)&&(r=t.result.id,c.push("/overview/closure/".concat(r)),i(l.b._("Closure has been created")));case 6:case"end":return e.stop()}},e,this)})),[]);return Object(g.useObserver)(function(){return a.a.createElement(a.a.Fragment,null,t?a.a.createElement(P,null):a.a.createElement(ee,{onClick:d,disabled:!n.closureBranch}),a.a.createElement(te,null,a.a.createElement(X,null)))})},re=function(e){var t=e.match;return a.a.createElement(s.a,{pageTitle:l.b._("Closure"),useBackButton:!0,backRoute:"/overview"},a.a.createElement(d.a,null,a.a.createElement(q,{showCurrent:!1}),a.a.createElement(ne,{showCurrent:Boolean(t.params.reportId)})),a.a.createElement(V,{reportId:t.params.reportId}))},ae=n(297),ie=n(9),ce=a.a.createContext(void 0),le=function(){return a.a.useContext(ce)};function oe(){var e=Object(w.c)().statistics,t=a.a.useState(),n=Object(F.a)(t,2),r=n[0],i=n[1],c=function(){i({branches:Object(ae.a)(e.branchesFilter),drivers:Object(ae.a)(e.drivers),dateTimeFrom:Object(ie.isoDate)(e.dateTimeFrom),dateTimeTo:Object(ie.isoDate)(e.dateTimeTo)})},l={dateTimeFrom:e.dateTimeFrom,dateTimeTo:e.dateTimeTo};return{filter:r,executeFilter:c,renderForm:function(t){return a.a.createElement(_.Form,{onSubmit:c,onChange:function(t){var n=t.values;return e.updateFilter(n)},defaultValues:l},a.a.createElement(ce.Provider,{value:r},t))}}}var ue=function(e){var t=e.plain,n=e.children;return a.a.createElement(a.a.Fragment,null,a.a.createElement(y.a,{light:!0},n),a.a.createElement(U,{text:t}))},de=function(){var e=le(),t=Object(S.pb)({filter:e},{skip:!e}),n=t.data,r=t.loading;if(!e)return null;if(r)return a.a.createElement(U,{text:l.b._("Computing")});var i=n.stats;return a.a.createElement(a.a.Fragment,null,a.a.createElement(ue,{plain:i.daily},a.a.createElement(m.Trans,{id:"Daily statistics"})),a.a.createElement(ue,{plain:i.category},a.a.createElement(m.Trans,{id:"By category"})),a.a.createElement(ue,{plain:i.delivery},a.a.createElement(m.Trans,{id:"By type"})),a.a.createElement(ue,{plain:i.drivers},a.a.createElement(m.Trans,{id:"By driver"})))},se=function(){var e=Object(w.c)().statistics;return Object(g.useObserver)(function(){return a.a.createElement(B.a,{selectedBranches:Array.from(e.branches),onSelectionChange:e.setBranchFilter,onSelectionClear:e.clearBranchFilter,isMulti:!0})})},me=n(7797),fe=function(){var e=Object(w.c)().statistics;return Object(g.useObserver)(function(){return a.a.createElement(p.a,{justify:"flex-start"},a.a.createElement(f.a,{fixedWidth:!0,width:"12rem"},a.a.createElement(me.a,{field:"dateTimeFrom",label:a.a.createElement(m.Trans,{id:"From"}),autoOk:!0})),a.a.createElement(f.a,{fixedWidth:!0,width:"12rem"},a.a.createElement(me.a,{field:"dateTimeTo",label:a.a.createElement(m.Trans,{id:"To"}),autoOk:!0})),a.a.createElement(f.a,null,a.a.createElement(h.a,{width:"15rem"},a.a.createElement(m.Trans,{id:"{0, plural, one {Show for one branch} few {Show for # branches} other {Show for # branches}}",values:{0:e.branchesFilter.length}}))))})},pe=function(e){var t=e.children;return(0,oe().renderForm)(t)},be=function(){return a.a.createElement(s.a,{pageTitle:l.b._("Sales statistics"),useBackButton:!0},a.a.createElement(pe,null,a.a.createElement(d.a,null,a.a.createElement(se,null),a.a.createElement(fe,null)),a.a.createElement(de,null)))},he=n(7802),ve=n(298),ge=n(7676),Ee=n(7780),ye=n(7951),Oe=function(){var e=Object(w.c)(),t=e.statistics,n=e.order,r=le(),i=a.a.useRef(new Map),c=a.a.useRef(null),l=a.a.useMemo(function(){return new Ee.c({fixedWidth:!0,defaultHeight:55,minHeight:55})},[]),o=Object(S.rb)({filter:r},{skip:!r}),u=o.data,d=o.loading;a.a.useEffect(function(){i.current.clear(),l.clearAll(),c.current&&c.current.resetLoadMoreRowsCache(!0)},[JSON.stringify(r)]);var s=Object(x.a)(S.y).execute,f=a.a.useCallback(function(){var e=Object(J.a)(K.a.mark(function e(t){var n,a,c,l,o,u;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.startIndex,a=t.stopIndex,!r){e.next=6;break}return e.next=4,s({filter:r,pagination:{fromIndex:n,toIndex:a}});case 4:if((c=e.sent).data)for(l=Object(ae.a)(c.data.stats.orders.list),o=n;o<=a;o++)(u=l.shift())&&i.current.set(o,u);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),[r]),p=a.a.useCallback(function(e){var t=e.index;return void 0!==i.current.get(t)},[]),b=a.a.useCallback(function(e){var r=e.index,c=e.key,o=e.style,u=e.parent,d=i.current.get(r);return void 0===d?a.a.createElement("div",{style:o,key:c},"..."):a.a.createElement(Ee.b,{key:c,columnIndex:0,rowIndex:r,cache:l,parent:u},function(e){var r=e.measure;return a.a.createElement("div",{style:o},a.a.createElement(ye.a,{order:d,toggleOrderDetail:function(e){n.list.toggleOrderDetail(e),setTimeout(r,500)},isOrderDetailOpen:n.list.isOrderDetailOpen,showBranch:t.branchesFilter.length>1}))})},[]);if(!r)return null;if(d)return a.a.createElement(O.a,null);var h=u.stats.counts,v=h.finished+h.cancelled;return 0===v?a.a.createElement(m.Trans,{id:"No orders"}):a.a.createElement(Ee.a,null,function(e){var t=e.width,n=e.height;return a.a.createElement(Ee.f,{rowCount:v,isRowLoaded:p,loadMoreRows:f,ref:c},function(e){var r=e.onRowsRendered,i=e.registerChild;return a.a.createElement(Ee.g,{ref:i,onRowsRendered:r,rowHeight:l.rowHeight,deferredMeasurementCache:l,rowCount:v,width:t,height:n,rowRenderer:b})})})},Ce=n(7681),we=L.b.div.withConfig({displayName:"OrdersStatisticsSummary__StatPanel",componentId:"sc-1nzggd2-0"})(["margin:1.4rem 4rem 0 0.5rem;display:inline-block;"]),je=L.b.h1.withConfig({displayName:"OrdersStatisticsSummary__StatLabel",componentId:"sc-1nzggd2-1"})(["font-size:1.5rem;font-weight:normal;margin:0;"]),Ie=L.b.h2.withConfig({displayName:"OrdersStatisticsSummary__StatValue",componentId:"sc-1nzggd2-2"})(["font-size:4rem;font-weight:normal;margin:0;"]),ke=Object(g.observer)(function(){var e=le(),t=Object(S.qb)({filter:e},{skip:!e}),n=t.data,r=t.loading;if(!e)return null;if(r)return a.a.createElement(U,{text:l.b._("Computing")});var i=n.stats.finishedOrders;return a.a.createElement(a.a.Fragment,null,a.a.createElement(we,null,a.a.createElement(je,null,a.a.createElement(m.Trans,{id:"Total turnover"})),a.a.createElement(Ie,null,a.a.createElement(Ce.a,{price:i.total.value,currencyCode:i.total.currency.code}))),a.a.createElement(we,null,a.a.createElement(je,null,a.a.createElement(m.Trans,{id:"Online payments"})),a.a.createElement(Ie,null,a.a.createElement(Ce.a,{price:i.onlinePayments.value,currencyCode:i.onlinePayments.currency.code}))),a.a.createElement(we,null,a.a.createElement(je,null,a.a.createElement(m.Trans,{id:"Orders count"})),a.a.createElement(Ie,null,i.finishedCount+i.cancelledCount)),a.a.createElement(we,null,a.a.createElement(je,null,a.a.createElement(m.Trans,{id:"Total commissions"})),a.a.createElement(Ie,null,a.a.createElement(Ce.a,{price:i.fees.value,currencyCode:i.fees.currency.code}))),a.a.createElement(we,null,a.a.createElement(U,{text:n.stats.orderStatisticsPlain})))}),Ne=n(7668),_e=n(25),Se=Object(g.observer)(function(){var e=Object(w.c)().statistics,t=Object(S.Y)({branches:e.branchesFilter}),n=t.data,r=t.loading;return a.a.useEffect(function(){r||e.setDriversFilter(_e.a.intersection(e.drivers,n.drivers.map(_e.a.prop("id"))))},[r]),a.a.createElement(Ne.a,{isMulti:!0,isClearable:!0,isSearchable:!0,filterOption:function(e,t){return 0===t.length||Object(I.d)(e.data).toLocaleLowerCase().includes(t.toLocaleLowerCase())},placeholder:l.b._("Filter by drivers"),isLoading:r,options:r?[]:Object(ae.a)(n.drivers),value:r?[]:n.drivers.filter(function(t){return e.drivers.includes(t.id)}),formatOptionLabel:I.d,getOptionValue:_e.a.prop("id"),onChange:function(t){t?e.setDriversFilter(t.map(_e.a.prop("id"))):e.setDriversFilter([])}})}),xe=function(e){var t=e.children,n=e.autoFilter,r=oe(),i=r.executeFilter,c=r.renderForm;return a.a.useEffect(function(){n&&i()},[n]),c(t)};var Te=function(e){var t=e.match,n=Object(w.c)().statistics;return"today"===t.params.filter&&n.setTodayOrdersFilter(),a.a.createElement(xe,{autoFilter:t.params.filter},a.a.createElement(ge.a,{withScrollArea:!1,row:1,column:7,widthInColumns:9},a.a.createElement(he.a,null,a.a.createElement(Oe,null))),a.a.createElement(ve.a,{layouts:[{i:"summary",x:0,y:1,w:7,h:1}],pageTitle:l.b._("Orders statistics"),showSoundControl:!1,scrollPageTitle:!1,useBackButton:!0},a.a.createElement("div",{key:"summary"},a.a.createElement(d.a,null,a.a.createElement(se,null),a.a.createElement(Se,null),a.a.createElement(fe,null)),a.a.createElement(ke,null))))},De=n(7721),Me=function(e){return a.a.createElement(k.a,{text:l.b._("Closure"),iconName:"assignment",color:W.a.turquoise})},Fe=function(e){return a.a.createElement(k.a,{text:l.b._("Sales statistics"),iconName:"assignment",color:W.a.turquoise})},Le=function(e){return a.a.createElement(k.a,{text:l.b._("Orders statistics"),iconName:"assignment",color:W.a.turquoise})};var Be=function(e){return a.a.createElement(ve.a,{layouts:[{i:"OrdersStatistics",x:0,y:1,w:2,h:2},{i:"DailyStatistics",x:2,y:1,w:2,h:2},{i:"Closure",x:4,y:1,w:2,h:2}]},a.a.createElement(De.a,{key:"OrdersStatistics",route:"/overview/orders",component:Le,canQuery:"statistics"}),a.a.createElement(De.a,{key:"DailyStatistics",route:"/overview/statistics",component:Fe,canQuery:"statistics"}),a.a.createElement(De.a,{key:"Closure",route:"/overview/closure",component:Me,canQuery:"lastFinancialReport"}))};n.d(t,"OverviewRoutes",function(){return Ae});var Ae=function(e){var t=e.match;return a.a.createElement(a.a.Fragment,null,a.a.createElement(c.a,{title:l.b._("Overview")}),a.a.createElement(i.Switch,null,a.a.createElement(u.a,{exact:!0,path:t.path,component:Be}),a.a.createElement(u.a,{path:"".concat(t.path,"/closure/history"),component:H}),a.a.createElement(u.a,{path:"".concat(t.path,"/closure/:reportId?"),component:re}),a.a.createElement(u.a,{path:"".concat(t.path,"/statistics"),component:be}),a.a.createElement(u.a,{path:"".concat(t.path,"/orders/:filter?"),component:Te}),a.a.createElement(i.Route,{component:o.a})))};t.default=Ae}}]);
//# sourceMappingURL=173.0649e61f.chunk.js.map