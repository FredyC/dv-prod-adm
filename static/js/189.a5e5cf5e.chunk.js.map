{"version":3,"sources":["../node_modules/resolve-pathname/esm/resolve-pathname.js","../node_modules/@material-ui/icons/esm/AddCircle.js","../node_modules/react-content-loader/dist/react-content-loader.es.js","molecules/CompanyBrandDropdown.tsx","../node_modules/@material-ui/icons/esm/Store.js","../node_modules/@material-ui/icons/esm/AllInbox.js","../node_modules/@material-ui/icons/esm/RemoveCircleOutline.js","../node_modules/@material-ui/icons/esm/RemoveRedEye.js","../node_modules/@material-ui/icons/esm/Search.js","../node_modules/@material-ui/icons/esm/OpenInBrowser.js","../node_modules/@material-ui/icons/esm/Redo.js","segments/dashboard/pages/StockDashboardPage.tsx","atoms/FormContainer.tsx","segments/stock/molecules/StockDepositConfirmButton.tsx","segments/stock/molecules/StockDepositFilterInput.tsx","segments/stock/molecules/StockDepositQuantityInput.tsx","../node_modules/@material-ui/icons/esm/Done.js","segments/stock/molecules/StockDepositResultTable.tsx","segments/stock/organisms/StockDepositControl.tsx","segments/stock/organisms/StockDepositLoader.tsx","segments/stock/pages/StockDepositPage.tsx","segments/stock/molecules/StockStatisticsTable.tsx","segments/stock/organisms/StockStatisticsContent.tsx","segments/stock/molecules/StockStatisticsFilter.tsx","segments/stock/pages/StockStatisticsPage.tsx","segments/stock/hooks/useTransferModel.ts","segments/stock/molecules/ConfirmTransferButton.tsx","segments/stock/atoms/ImportCheckbox.tsx","segments/stock/molecules/ImportModeToggle.tsx","segments/stock/molecules/StockTransferAmountInput.tsx","segments/stock/molecules/StockTransferTable.tsx","segments/stock/hooks/useStockTransferLoader.ts","segments/stock/molecules/TransferSourceBranchPicker.tsx","../node_modules/@material-ui/icons/esm/ArrowRightAlt.js","segments/stock/molecules/TransferTargetBranchPicker.tsx","segments/stock/pages/StockTransferPage.tsx","segments/stock/routes/StockRouting.tsx"],"names":["isAbsolute","pathname","charAt","spliceOne","list","index","i","k","n","length","pop","to","from","undefined","hasTrailingSlash","toParts","split","fromParts","isToAbs","isFromAbs","mustEndAbs","concat","last","up","part","unshift","result","join","substr","createElement","d","_assign","Object","assign","t","s","arguments","p","prototype","hasOwnProperty","call","apply","this","uid","Math","random","toString","substring","Svg","_a","rtl","speed","interval","style","width","height","baseUrl","gradientRatio","animate","ariaLabel","children","className","uniquekey","primaryColor","primaryOpacity","secondaryColor","secondaryOpacity","preserveAspectRatio","props","e","indexOf","getOwnPropertySymbols","__rest","idClip","idGradient","rtlStyle","transform","keyTimes","dur","role","viewBox","x","y","clipPath","fill","id","offset","stopColor","stopOpacity","attributeName","values","repeatCount","defaultProps","InitialComponent","rx","ry","ContentLoader","mergedProps","BulletListStyle","cx","cy","r","ClearIndicator","getStyles","innerProps","ref","restInnerProps","padding","CompanyBrandDropdown","brands","selectedBrand","onSelection","user","useRoot","placeholder","options","value","formatOptionLabel","RM","prop","getOptionValue","getOptionLabel","isClearable","isSearchable","onChange","autoFocus","components","Fragment","createSvgIcon","StockDashboardPage","DashboardPage","pageTitle","i18n","DashboardButton","row","column","canQuery","text","icon","Inbox","color","Colors","violet","route","ROUTE_STOCK_OVERVIEW","canMutate","OpenInBrowser","ROUTE_STOCK_DEPOSIT","canAccessWithSingleBranch","Redo","ROUTE_STOCK_TRANSFER","AllInbox","turquoise","ROUTE_STOCK_STATS","FormContainer","styled","div","FormColumn","StockDepositConfirmButton","wareUnit","quantity","onConfirm","TouchButton","disabled","onClick","numeral","format","priceFormat","code","StockDepositFilterInput","React","forwardRef","onFilter","IconLine","label","labelWidth","FormInputStyled","toLocaleLowerCase","ev","target","onKeyPressCapture","key","preventDefault","StockDepositQuantityInput","enabled","StockDepositResultTable","stockItems","searchValue","onSelect","DataTable","items","heightStretch","dataKey","Spacing","ButtonColumnWidthPx","minWidth","cellRenderer","ColumnRendererSelect","columnData","stockWithUnit","highlightMatch","rowData","SizerButton","Done","HighlightedValue","span","yellow","cellData","begin","match","end","StockDepositControl","state","targetStockItem","filteredStockItems","inputQuantity","filterInputRef","createRef","quantityInputRef","trim","partialMatch","isPartialMatch","filter","cond","propEq","T","propSatisfies","head","setState","onConfirmFilter","current","focus","onQuantity","onSelectStockItem","stockItem","onDeposit","prevProps","hasSearchValue","isNoneFind","isMultiFind","cardName","nameLabel","Headline","Component","StockDepositLoader","observer","settings","useQMenuStockDeposit","branchId","data","loading","useMMenuStockQuantity","changeQuantity","quantityChange","StockDepositPage","FullPageLayout","useBackButton","Card","SettingsCompanyBranchPicker","itemLineHeight","branchItemLineHeight","lineSpacing","StyledStockStatisticsTable","greyMiddle","StockStatisticsTable","DataList","rowHeight","branches","renderItem","item","map","branchItem","branchName","showNamePerBranch","itemNameAtBranch","StockStatisticsContent","statistics","useQStockStats","brandId","stockBrandId","skip","Loading","stockSearchInput","filterItems","sortWith","ascend","sortItems","reduce","accItems","stock","existingItem","find","stockItemId","companyBranch","name","push","StyledFlexRowSingle","FlexRowSingle","StockStatisticsFilter","useObserver","justify","FlexColumn","MarginBox","margin","Store","Sizer","idPropEq","brand","setStockBrand","Search","defaultValue","inputFullWidth","setStockFilter","StockStatisticsPage","PageLayoutFullHeightItem","forcePercentHeightInMobile","stretchToParent","useTransferModel","transfer","StyledConfirmTransferButton","mediaDesktop","Middle","mediaMobile","ConfirmTransferButton","enqueueSuccess","useSnackBar","useMCreateTransfers","createTransfers","canTransferStockItems","useCanMutate","useCallback","a","targetBranch","targetId","transfers","itemsForTransfer","MIN_TRANSFER_QUANTITY","transferVariables","clearTransferState","validTransfer","hasTarget","some","isQuantityValid","isValidTransfer","green","isImportMode","ImportCheckbox","sideText","StyledCheckbox","type","ImportModeToggle","checked","toggleImportMode","StockTransferAmountInput","inputRef","useRef","setQuantity","onFocus","select","getItemRawQuantity","pattern","numberRx","source","invalid","isItemQuantityValid","StyledDataTable","VerticallyCenteredFlexContainer","StockTransferTable","renderImportItemCheckbox","itemId","isImportingItem","toggleImportItem","data-testid","renderImportAllHeader","isImportingAll","toggleImportAll","renderAmountInput","useQStockForTransfer","sourceId","useEffect","itemsToInit","max","allowNegativeValue","Number","MAX_SAFE_INTEGER","initItems","getPredicate","exactMatch","isLoading","filteredItems","useStockTransferLoader","noRowsRenderer","isTransferMode","headerClassName","cn","headerRenderer","flexGrow","stockAllowNegative","TransferSourceBranchPicker","TransferTargetBranchPicker","branchesWithoutSourceBranch","reject","ArrowRightAlt","CompanyBranchPicker","selectedBranches","onSelectionChange","branch","setTargetId","onSelectionClear","isMulti","getDropdownProps","hideWhenSingleBranch","StyledTopContainer","VerticallyCenteredRow","StockTransferPage","canAccessPage","hasSingleBranch","topContent","flexWrap","FilterInput","model","debounceIntervalMs","StockRouting","SecureRoute","path","ROUTE_STOCK","exact","component","ROUTE_MENU_STOCK","NotFoundPage"],"mappings":"2GAAA,SAASA,EAAWC,GAClB,MAA8B,MAAvBA,EAASC,OAAO,GAIzB,SAASC,EAAUC,EAAMC,GACvB,IAAK,IAAIC,EAAID,EAAOE,EAAID,EAAI,EAAGE,EAAIJ,EAAKK,OAAQF,EAAIC,EAAGF,GAAK,EAAGC,GAAK,EAClEH,EAAKE,GAAKF,EAAKG,GAGjBH,EAAKM,MAwDQ,IApDf,SAAyBC,EAAIC,QACdC,IAATD,IAAoBA,EAAO,IAC/B,IAgBIE,EAhBAC,EAAUJ,GAAMA,EAAGK,MAAM,MAAQ,GACjCC,EAAYL,GAAQA,EAAKI,MAAM,MAAQ,GACvCE,EAAUP,GAAMX,EAAWW,GAC3BQ,EAAYP,GAAQZ,EAAWY,GAC/BQ,EAAaF,GAAWC,EAW5B,GATIR,GAAMX,EAAWW,GAEnBM,EAAYF,EACHA,EAAQN,SAEjBQ,EAAUP,MACVO,EAAYA,EAAUI,OAAON,KAG1BE,EAAUR,OAAQ,MAAO,IAG9B,GAAIQ,EAAUR,OAAQ,CACpB,IAAIa,EAAOL,EAAUA,EAAUR,OAAS,GACxCK,EAA4B,MAATQ,GAAyB,OAATA,GAA0B,KAATA,OAEpDR,GAAmB,EAKrB,IAFA,IAAIS,EAAK,EAEAjB,EAAIW,EAAUR,OAAQH,GAAK,EAAGA,IAAK,CAC1C,IAAIkB,EAAOP,EAAUX,GAER,MAATkB,EACFrB,EAAUc,EAAWX,GACH,OAATkB,GACTrB,EAAUc,EAAWX,GACrBiB,KACSA,IACTpB,EAAUc,EAAWX,GACrBiB,KAIJ,IAAKH,EAAY,KAAOG,IAAMA,EAC5BN,EAAUQ,QAAQ,OAEhBL,GAA+B,KAAjBH,EAAU,IAAeA,EAAU,IAAOjB,EAAWiB,EAAU,KAAMA,EAAUQ,QAAQ,IACzG,IAAIC,EAAST,EAAUU,KAAK,KAE5B,OADIb,GAA0C,MAAtBY,EAAOE,QAAQ,KAAYF,GAAU,KACtDA,I,kCC/DT,4BAEe,gBAAc,IAAMG,cAAc,OAAQ,CACvDC,EAAG,yGACD,c,yDCJJ,2CAgBIC,EAAU,WAaZ,OAZAA,EAAUC,OAAOC,QAAU,SAAkBC,GAC3C,IAAK,IAAIC,EAAG7B,EAAI,EAAGE,EAAI4B,UAAU3B,OAAQH,EAAIE,EAAGF,IAG9C,IAAK,IAAI+B,KAFTF,EAAIC,UAAU9B,GAGR0B,OAAOM,UAAUC,eAAeC,KAAKL,EAAGE,KAAIH,EAAEG,GAAKF,EAAEE,IAI7D,OAAOH,IAGMO,MAAMC,KAAMN,YAgB7B,IAAIO,EAAM,WACR,OAAOC,KAAKC,SAASC,SAAS,IAAIC,UAAU,IAG1CC,EAAM,SAAaC,GACrB,IAAIC,EAAMD,EAAGC,IACTC,EAAQF,EAAGE,MACXC,EAAWH,EAAGG,SACdC,EAAQJ,EAAGI,MACXC,EAAQL,EAAGK,MACXC,EAASN,EAAGM,OACZC,EAAUP,EAAGO,QACbC,EAAgBR,EAAGQ,cACnBC,EAAUT,EAAGS,QACbC,EAAYV,EAAGU,UACfC,EAAWX,EAAGW,SACdC,EAAYZ,EAAGY,UACfC,EAAYb,EAAGa,UACfC,EAAed,EAAGc,aAClBC,EAAiBf,EAAGe,eACpBC,EAAiBhB,EAAGgB,eACpBC,EAAmBjB,EAAGiB,iBACtBC,EAAsBlB,EAAGkB,oBACzBC,EApCN,SAAgBjC,EAAGkC,GACjB,IAAInC,EAAI,GAER,IAAK,IAAIG,KAAKF,EACRH,OAAOM,UAAUC,eAAeC,KAAKL,EAAGE,IAAMgC,EAAEC,QAAQjC,GAAK,IAAGH,EAAEG,GAAKF,EAAEE,IAG/E,GAAS,MAALF,GAAqD,oBAAjCH,OAAOuC,sBAA2C,KAAIjE,EAAI,EAAb,IAAgB+B,EAAIL,OAAOuC,sBAAsBpC,GAAI7B,EAAI+B,EAAE5B,OAAQH,IAClI+D,EAAEC,QAAQjC,EAAE/B,IAAM,IAAG4B,EAAEG,EAAE/B,IAAM6B,EAAEE,EAAE/B,KAEzC,OAAO4B,EA0BKsC,CAAOvB,EAAI,CAAC,MAAO,QAAS,WAAY,QAAS,QAAS,SAAU,UAAW,gBAAiB,UAAW,YAAa,WAAY,YAAa,YAAa,eAAgB,iBAAkB,iBAAkB,mBAAoB,wBAE9OwB,EAASX,EAAYA,EAAY,UAAYnB,IAC7C+B,EAAaZ,EAAYA,EAAY,cAAgBnB,IACrDgC,EAAWzB,EAAM,CACnB0B,UAAW,cACT,GACAC,EAAW,MAAQzB,EAAW,MAC9B0B,EAAM3B,EAAQ,IAClB,OAAO,wBAAc,MAAOpB,EAAQ,CAClCgD,KAAM,MACN1B,MAAOtB,EAAQ,GAAIsB,EAAOsB,GAC1Bd,UAAWA,EACX,aAAcF,GAAwB,KACtCqB,QAAS,OAAS1B,EAAQ,IAAMC,EAChCY,oBAAqBA,GACpBC,GAAQT,EAAY,wBAAc,QAAS,KAAMA,GAAa,KAAM,wBAAc,OAAQ,CAC3FsB,EAAG,IACHC,EAAG,IACH5B,MAAOA,EACPC,OAAQA,EACR4B,SAAU,OAAS3B,EAAU,IAAMiB,EAAS,IAC5CpB,MAAO,CACL+B,KAAM,OAAS5B,EAAU,IAAMkB,EAAa,OAE5C,wBAAc,OAAQ,KAAM,wBAAc,WAAY,CACxDW,GAAIZ,GACHb,GAAW,wBAAc,iBAAkB,CAC5CyB,GAAIX,GACH,wBAAc,OAAQ,CACvBY,OAAQ,KACRC,UAAWxB,EACXyB,YAAaxB,GACZN,GAAW,wBAAc,UAAW,CACrC+B,cAAe,SACfC,QAASjC,EAAgB,MAAQA,EAAgB,MACjDoB,SAAUA,EACVC,IAAKA,EACLa,YAAa,gBACV,wBAAc,OAAQ,CACzBL,OAAQ,MACRC,UAAWtB,EACXuB,YAAatB,GACZR,GAAW,wBAAc,UAAW,CACrC+B,cAAe,SACfC,QAASjC,EAAgB,EAAI,MAAQA,EAAgB,EAAI,MAAQ,EAAIA,EAAgB,GACrFoB,SAAUA,EACVC,IAAKA,EACLa,YAAa,gBACV,wBAAc,OAAQ,CACzBL,OAAQ,OACRC,UAAWxB,EACXyB,YAAaxB,GACZN,GAAW,wBAAc,UAAW,CACrC+B,cAAe,SACfC,OAAQ,UAAY,EAAIjC,GACxBoB,SAAUA,EACVC,IAAKA,EACLa,YAAa,oBAIbC,EAAe,CACjBlC,SAAS,EACTC,UAAW,uBACXH,QAAS,GACTC,cAAe,EACfF,OAAQ,IACRH,SAAU,IACVe,oBAAqB,OACrBJ,aAAc,UACdC,eAAgB,EAChBd,KAAK,EACLe,eAAgB,UAChBC,iBAAkB,EAClBf,MAAO,EACPE,MAAO,GACPC,MAAO,KAGLuC,EAAmB,SAA0BzB,GAC/C,OAAO,wBAAc,OAAQ,CAC3Ba,EAAG,IACHC,EAAG,IACHY,GAAI,IACJC,GAAI,IACJzC,MAAOc,EAAMd,MACbC,OAAQa,EAAMb,UAIdyC,EAAgB,SAAuB5B,GACzC,IAAI6B,EAAclE,EAAQ,GAAI6D,EAAcxB,GAExCR,EAAWQ,EAAMR,SAAWQ,EAAMR,SAAW,wBAAciC,EAAkB9D,EAAQ,GAAIkE,IAC7F,OAAO,wBAAcjD,EAAKjB,EAAQ,GAAIkE,GAAcrC,IA8LlDsC,EAAkB,SAAyB9B,GAC7C,OAAO,wBAAc4B,EAAejE,EAAQ,GAAIqC,GAAQ,wBAAc,SAAU,CAC9E+B,GAAI,KACJC,GAAI,KACJC,EAAG,MACD,wBAAc,OAAQ,CACxBpB,EAAG,KACHC,EAAG,KACHY,GAAI,IACJC,GAAI,IACJzC,MAAO,MACPC,OAAQ,OACN,wBAAc,SAAU,CAC1B4C,GAAI,KACJC,GAAI,KACJC,EAAG,MACD,wBAAc,OAAQ,CACxBpB,EAAG,KACHC,EAAG,KACHY,GAAI,IACJC,GAAI,IACJzC,MAAO,MACPC,OAAQ,OACN,wBAAc,SAAU,CAC1B4C,GAAI,KACJC,GAAI,KACJC,EAAG,MACD,wBAAc,OAAQ,CACxBpB,EAAG,KACHC,EAAG,KACHY,GAAI,IACJC,GAAI,IACJzC,MAAO,MACPC,OAAQ,OACN,wBAAc,SAAU,CAC1B4C,GAAI,KACJC,GAAI,MACJC,EAAG,MACD,wBAAc,OAAQ,CACxBpB,EAAG,KACHC,EAAG,MACHY,GAAI,IACJC,GAAI,IACJzC,MAAO,MACPC,OAAQ,U,wIC5XN+C,EAAiB,SAAAlC,GAAU,IAE7BmC,EAEEnC,EAFFmC,UAF4B,EAI1BnC,EADFoC,WAAcC,EAHc,EAGdA,IAAQC,EAHM,uBAK9B,OACE,yCACMA,EADN,CAEED,IAAKA,EACLpD,MAAOkD,EAAU,iBAAkBnC,KAEnC,yBAAKf,MAAO,CAAEsD,QAAS,YACrB,kBAAC,QAAD,eAMKC,EAAyC,SAAC,GAKhD,IAJLC,EAII,EAJJA,OACAC,EAGI,EAHJA,cACAC,EAEI,EAFJA,YACG3C,EACC,wDACI4C,EAASC,cAATD,KAER,OACE,kBAAC,IAAD,eACEE,YAAa,IAAK,EAAD,gBACjBC,QAASN,GAAUG,EAAKH,OACxBO,MAAON,EACPO,kBAAmBC,KAAGC,KAAK,QAC3BC,eAAgBF,KAAGC,KAAK,MACxBE,eAAgBH,KAAGC,KAAK,QACxBG,aAAa,EACbC,cAAc,EACdC,SAAU,SAAAR,GAAK,OAAIL,EAAYK,IAC/BS,WAAW,EACXC,WAAY,CAAExB,mBACVlC,M,kCCxDV,4BAEe,gBAAc,IAAMvC,cAAc,OAAQ,CACvDC,EAAG,+EACD,U,kCCJJ,4BAEe,gBAAc,IAAMD,cAAc,IAAMkG,SAAU,KAAM,IAAMlG,cAAc,OAAQ,CACjGuD,KAAM,OACNtD,EAAG,oBACD,IAAMD,cAAc,OAAQ,CAC9BC,EAAG,6MACA,a,kCCPL,4BAEe,gBAAc,IAAMD,cAAc,OAAQ,CACvDC,EAAG,gJACD,wB,kCCJJ,4BAEe,gBAAc,IAAMD,cAAc,OAAQ,CACvDC,EAAG,sNACD,iB,kCCJJ,4BAEe,gBAAc,IAAMD,cAAc,OAAQ,CACvDC,EAAG,+OACD,W,kHCFW,SAAAkG,EAAA,GAAc,IAAMnG,cAAc,OAAQ,CACvDC,EAAG,kIACD,iBCFW,SAAAkG,EAAA,GAAc,IAAMnG,cAAc,OAAQ,CACvDC,EAAG,oJACD,Q,uDCUSmG,EAA+B,kBAC1C,kBAACC,EAAA,EAAD,CAAeC,UAAWC,EAAA,EAAK,EAAD,UAC5B,kBAACC,EAAA,EAAD,CACEC,IAAK,EACLC,OAAQ,EACRC,SAAS,aACTC,KAAML,EAAA,EAAK,EAAD,kBACVM,KAAMC,IACNC,MAAOC,IAAOC,OACdC,MAAOC,MAET,kBAACX,EAAA,EAAD,CACEC,IAAK,EACLC,OAAQ,EACRU,UAAU,wBACVR,KAAML,EAAA,EAAK,EAAD,iBACVM,KAAMQ,EACNN,MAAOC,IAAOC,OACdC,MAAOI,MAET,kBAACd,EAAA,EAAD,CACEC,IAAK,EACLC,OAAQ,EACRU,UAAU,2BACVG,2BAA2B,EAC3BX,KAAML,EAAA,EAAK,EAAD,kBACVM,KAAMW,EACNT,MAAOC,IAAOC,OACdC,MAAOO,MAET,kBAACjB,EAAA,EAAD,CACEC,IAAK,EACLC,OAAQ,EACRC,SAAS,aACTY,2BAA2B,EAC3BX,KAAML,EAAA,EAAK,EAAD,oBACVM,KAAMa,IACNX,MAAOC,IAAOW,UACdT,MAAOU,Q,oTClDN,IAAMC,EAAgBC,IAAOC,IAAV,KAKbC,EAAaF,IAAOC,IAAV,K,+DCQVE,EAA8C,SAAC,GAAD,IACzDC,EADyD,EACzDA,SACAC,EAFyD,EAEzDA,SACAC,EAHyD,EAGzDA,UAHyD,OAKzD,kBAACC,EAAA,EAAD,CAAaC,SAAuB,OAAbJ,EAAmBK,QAASH,GAChDF,EACC,kBAAC,QAAD,4BAAeM,IAAQL,GAAUM,OAAOC,KAAxC,EACER,EAASS,QAGX,kBAAC,QAAD,iC,oBCdOC,EAA0BC,IAAMC,WAG3C,WAAiClE,GAAjC,IAAGW,EAAH,EAAGA,MAAOwD,EAAV,EAAUA,SAAUX,EAApB,EAAoBA,UAApB,OACA,kBAACY,EAAA,EAAD,CAAUC,MAAO1C,EAAA,EAAK,EAAD,cAAgB2C,WAAY,GAC/C,kBAACC,EAAA,EAAD,CAEEvE,IAAKA,EACLoB,WAAW,EACXX,YAAW,UAAKkB,EAAA,EAAK,EAAD,QAAS6C,oBAAlB,cAA2C7C,EAAA,EAAK,EAAD,OAA/C,cAA4DA,EAAA,EAAK,EAAD,SAAU6C,qBACrF7D,MAAOA,EACPQ,SAAU,SAAAsD,GACRN,EAASM,EAAGC,OAAO/D,QAErBgE,kBAAmB,SAAAF,GACF,UAAXA,EAAGG,MACLH,EAAGI,iBACHrB,WClBGsB,EAA4Bb,IAAMC,WAG7C,WAAmClE,GAAnC,IAAG+E,EAAH,EAAGA,QAAS5D,EAAZ,EAAYA,SAAUqC,EAAtB,EAAsBA,UAAtB,OACA,kBAACe,EAAA,EAAD,CAEEvE,IAAKA,EACL0D,UAAWqB,EACX5D,SAAQ,8GAAE,SAAAsD,GACR,IAAM9D,EAAQiD,IAAQa,EAAGC,OAAO/D,OAAOA,QACvCQ,EAASR,KAEXgE,kBAAmB,SAAAF,GACF,UAAXA,EAAGG,MACLH,EAAGI,iBACHrB,UCxBO,SAAAjC,EAAA,GAAc,IAAMnG,cAAc,OAAQ,CACvDC,EAAG,uDACD,Q,oHCcG,IAAM2J,EAA4C,SAAC,GAAD,IACvDC,EADuD,EACvDA,WACAC,EAFuD,EAEvDA,YACAC,EAHuD,EAGvDA,SAHuD,OAKvD,kBAACC,EAAA,EAAD,CAAWC,MAAOJ,EAAYK,eAAe,GAC3C,kBAAC,IAAD,CACEC,QAAQ,KACR1I,MAAO2I,IAAQC,oBACfC,SAAUF,IAAQC,oBAClBE,aAAcC,EACdC,WAAY,CAAEV,cAEhB,kBAAC,IAAD,CACEI,QAAQ,WACR1I,MAAO,IACPwH,MAAO1C,EAAA,EAAK,EAAD,cACXgE,aAAcG,KAEhB,kBAAC,IAAD,CACEP,QAAQ,OACR1I,MAAO,IACPwH,MAAO1C,EAAA,EAAK,EAAD,aACXgE,aAAcI,GAAeb,KAE/B,kBAAC,IAAD,CACEK,QAAQ,YACR1I,MAAO,IACPwH,MAAO1C,EAAA,EAAK,EAAD,aACXgE,aAAcI,GAAeb,KAE/B,kBAAC,IAAD,CAAQK,QAAQ,OAAO1I,MAAO,IAAKwH,MAAO1C,EAAA,EAAK,EAAD,iBAIlD,SAASiE,EAAT,GAGoB,IAFlBI,EAEiB,EAFjBA,QACcb,EACG,EADjBU,WAAcV,SAEd,OACE,kBAACc,EAAA,EAAD,KACE,kBAACxC,EAAA,EAAD,CAAaxB,KAAMiE,EAAMvC,QAAS,kBAAMwB,EAASa,OAKvD,IAAMG,EAAmBjD,IAAOkD,KAAV,IACAhE,IAAOiE,QAG7B,SAASN,GAAeb,GACtB,OAAO,YAAmC,IAAhCoB,EAA+B,EAA/BA,SACF1M,EAAQ0M,EACX9B,oBACA3G,QAAQqH,EAAYV,qBACvB,IAAe,IAAX5K,EACF,OAAO0M,EAET,IAAMC,EAAQD,EAAShK,UAAU,EAAG1C,GAC9B4M,EAAQF,EAAShK,UAAU1C,EAAOA,EAAQsL,EAAYlL,QACtDyM,EAAMH,EAAShK,UAAU1C,EAAQsL,EAAYlL,QACnD,OACE,oCACGuM,EACD,kBAACJ,EAAD,KAAmBK,GAClBC,IAMT,SAASX,GAAT,GAA+D,IAAtCQ,EAAqC,EAArCA,SAAUN,EAA2B,EAA3BA,QACjC,MAAM,GAAN,OAAUM,EAAV,YAAsBN,EAAQ1C,SAASS,MCjElC,IAAM2C,GAAb,2MACEC,MAAgB,CACdC,gBAAiB,KACjBC,mBAAoB,GACpB3B,YAAa,GACb4B,cAAe,GALnB,EAYEC,eAAiB9C,IAAM+C,YAZzB,EAaEC,iBAAmBhD,IAAM+C,YAb3B,EAcE7C,SAAW,SAACe,GACV,GAA2B,KAAvBA,EAAYgC,OAAhB,CAQA,IAAMC,EAAeC,YAAelC,GAC9B2B,EAAqB,EAAKlJ,MAAMsH,WAAWoC,OAC/CxG,IAAGyG,KAAK,CACN,CAACzG,IAAG0G,OAAO,MAAOrC,GAAcrE,IAAG2G,GACnC,CAAC3G,IAAG4G,cAAcN,EAAc,QAAStG,IAAG2G,GAC5C,CAAC3G,IAAG4G,cAAcN,EAAc,aAActG,IAAG2G,MAGjDZ,EAAqC,KACP,IAA9BC,EAAmB7M,SACrB4M,EAAkB/F,IAAG6G,KAAKb,IAE5B,EAAKc,SAAS,CACZd,qBACA3B,cACA0B,yBAtBA,EAAKe,SAAS,CACZd,mBAAoB,GACpB3B,YAAa,GACb0B,gBAAiB,QAnBzB,EAyCEgB,gBAAkB,WAC6B,IAAzC,EAAKjB,MAAME,mBAAmB7M,QAChC,EAAKiN,iBAAiBY,QAASC,SA3CrC,EA8CEC,WAAa,SAACxE,GACZ,EAAKoE,SAAS,CAAEb,cAAevD,KA/CnC,EAiDEyE,kBAAoB,SAACC,GACnB,EAAKN,SACH,CACEf,gBAAiBqB,EACjBpB,mBAAoB,CAACoB,IAEvB,WACE,EAAKhB,iBAAiBY,QAASC,WAxDvC,EA4DEtE,UAAY,WAAO,IAAD,EAC2B,EAAKmD,MAAxCC,EADQ,EACRA,gBAAiBE,EADT,EACSA,cACrBF,GAAqC,IAAlBE,GACrB,EAAKnJ,MAAMuK,UAAUtB,EAAiBE,GAExC,EAAKa,SACH,CAAEf,gBAAiB,KAAM1B,YAAa,GAAI4B,cAAe,GACzD,WACE,EAAKG,iBAAiBY,QAASlH,MAAQ,GACvC,EAAKoG,eAAec,QAASC,WArErC,kFAOqBK,GACbA,EAAUlD,aAAehJ,KAAK0B,MAAMsH,YACtChJ,KAAKkI,SAASlI,KAAK0K,MAAMzB,eAT/B,+BAyEY,IAAD,EAMHjJ,KAAK0K,MAJPzB,EAFK,EAELA,YACA2B,EAHK,EAGLA,mBACAD,EAJK,EAILA,gBACAE,EALK,EAKLA,cAEIsB,EAAwC,KAAvBlD,EAAYgC,OAC7BmB,EAA2C,IAA9BxB,EAAmB7M,OAChCsO,EAAczB,EAAmB7M,OAAS,EAChD,OACE,oCACE,kBAACiJ,EAAD,KACE,kBAACG,EAAD,KACE,kBAACY,EAAD,CACEG,SAAUlI,KAAKkI,SACfX,UAAWvH,KAAK2L,gBAChBjH,MAAOuE,EACPlF,IAAK/D,KAAK8K,kBAGd,kBAAC3D,EAAD,KACE,kBAAC0B,EAAD,CACEC,QAA6B,OAApB6B,EACTzF,SAAUlF,KAAK8L,WACfvE,UAAWvH,KAAKuH,UAChBxD,IAAK/D,KAAKgL,oBAGd,kBAAC7D,EAAD,KACE,kBAAC,EAAD,CACEmF,SAAU3B,EAAkBA,EAAgB4B,UAAY,GACxDjF,SAAUuD,EACVxD,SAAUsD,EAAkBA,EAAgBtD,SAAW,KACvDE,UAAWvH,KAAKuH,cAItB,kBAACiF,EAAA,EAAD,KACGL,GAAkBE,GACjB,kBAAC,QAAD,8EAKDF,GAAkBC,GACjB,kBAAC,QAAD,sDAEDD,GAAkBxB,GACjB,kBAAC,QAAD,kDACiBA,EAAgB4B,WADjC,YACa,gCAIhBJ,GACC,kBAAC,EAAD,CACElD,YAAaA,EACbD,WAAY4B,EACZ1B,SAAUlJ,KAAK+L,yBAnI3B,GAAyC/D,IAAMyE,W,oCCRlCC,GAAqBC,aAAiB,YAAmB,IAAhBzL,EAAe,EAAfA,SAC5C0L,EAAarI,eAAbqI,SAD2D,EAEzCC,cAAqB,CAC7CC,SAAUF,EAASE,WADbC,EAF2D,EAE3DA,KAAMC,EAFqD,EAErDA,QAFqD,EAK1CC,gBAAlBC,EAL4D,qBAYnE,OAAOhM,EAAS8L,EAAU,GAAKD,EAAK/D,WANN,SAACgD,EAAW1E,GACxC4F,EAAe,CACblB,UAAWA,EAAUrJ,GACrBwK,eAAgB7F,QCfT8F,GAAqC,SAAA1L,GAAK,OACrD,kBAAC2L,EAAA,EAAD,CAAgB5H,UAAWC,EAAA,EAAK,EAAD,iBAAmB4H,eAAe,GAC/D,kBAACC,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,MACA,kBAACd,GAAD,KACG,SAAC1D,EAAYiD,GAAb,OACC,kBAAC,GAAD,CAAqBjD,WAAYA,EAAYiD,UAAWA,S,qDCW5DwB,GAAiB,GACjBC,GAAuB,GACvBC,GAAc,GAEdC,GAA6B3G,IAAOC,IAAV,6EAAGD,CAAH,ksBAONwG,GAUKtH,IAAO0H,WA+BxBH,GAIDvH,IAAO0H,WAIP1H,IAAO0H,YAIPC,GAAyC,SAAC,GAAe,IAAb1E,EAAY,EAAZA,MASvD,OACE,kBAAC2E,GAAA,EAAD,CACE3E,MAAOA,EACP4E,UAXJ,YAAyC,IAAjBrQ,EAAgB,EAAhBA,MACtB,OACE8P,GACAE,GACAvE,EAAMzL,GAAOsQ,SAAUlQ,OAAS2P,IAQhCrE,eAAe,EACf6E,WAAY,SAAAC,GAAI,OACd,kBAACP,GAAD,KACE,yBAAKzM,UAAU,cACb,yBAAKA,UAAU,QAAQgN,EAAKrG,MAC5B,yBAAK3G,UAAU,UACb,yBAAKA,UAAU,QAAQgN,EAAK5B,WAC5B,yBAAKpL,UAAU,YACZgN,EAAK7G,SADR,IACmB6G,EAAK9G,SAASS,MAEjC,yBAAK3G,UAAU,gBAAf,SAEF,yBAAKA,UAAU,YACZgN,EAAKF,SAASG,IAAI,SAAAC,GAAU,OAC3B,yBAAKlN,UAAU,aAAawH,IAAK0F,EAAWC,YAC1C,yBAAKnN,UAAU,cAAckN,EAAWC,YACxC,yBAAKnN,UAAU,YACZkN,EAAW/G,SADd,IACyB6G,EAAK9G,SAASS,MAEtCqG,EAAKI,mBACJ,yBAAKpN,UAAU,gBACZkN,EAAWG,4BCjHrBC,GAAyB9B,aAAS,WAAO,IAC5C+B,EAAenK,eAAfmK,WAD2C,EAGzBC,cACxB,CACEC,QAASF,EAAWG,cAEtB,CAAEC,MAAOJ,EAAWG,eAJd9B,EAH2C,EAG3CA,KAAMC,EAHqC,EAGrCA,QAOd,IAAK0B,EAAWG,aAAc,OAAO,KAErC,GAAI7B,EAAS,OAAO,kBAAC+B,GAAA,EAAD,MAEpB,IAAM9F,EAAcyF,EAAWM,iBACzB9D,EAAeC,YAAelC,GAC9BgG,EAAcrK,MAAGyG,KAAK,CAC1B,CAACzG,MAAG0G,OAAO,MAAOrC,GAAcrE,MAAG2G,GACnC,CAAC3G,MAAG4G,cAAcN,EAAc,QAAStG,MAAG2G,GAC5C,CAAC3G,MAAG4G,cAAcN,EAAc,aAActG,MAAG2G,KAO7CnC,EAJYxE,MAAGsK,SAAgC,CACnDtK,MAAGuK,OAAOvK,MAAGC,KAAK,UAGNuK,CAAUrC,EAAK/D,WAAWoC,OAAO6D,IAAcI,OAC3D,SAACC,EAAUC,GACT,IAAMC,EAAeF,EAASG,KAC5B,gBAAG3H,EAAH,EAAGA,KAAMT,EAAT,EAASA,SAAT,OACES,IAASyH,EAAMzH,MAAQT,EAAS1E,KAAO4M,EAAMlI,SAAS1E,KAEpD0L,EAAa,CACjBqB,YAAaH,EAAM5M,GACnB2E,SAAUiI,EAAMjI,SAChBgH,WAAYiB,EAAMI,cAAcC,KAChCpB,iBAAkBe,EAAMhD,WAkB1B,OAfKiD,GAUHA,EAAavB,SAAS4B,KAAKxB,GACvBmB,EAAajD,YAAcgD,EAAMhD,YACnCiD,EAAajB,mBAAoB,IAXnCe,EAASO,KAAK,CACZ/H,KAAMyH,EAAMzH,KACZT,SAAUkI,EAAMlI,SAChBkF,UAAWgD,EAAMhD,UACjBgC,mBAAmB,EACnBN,SAAU,CAACI,GACX/G,SAAUiI,EAAMjI,WAQbgI,GAET,IAGF,OAAO,kBAAC,GAAD,CAAsBlG,MAAOA,M,qFCxDhC0G,GAAsB7I,YAAO8I,MAAV,0EAAG9I,CAAH,qBAIZ+I,GAAwB,WAAO,IAAD,EACZzL,eAArBD,EADiC,EACjCA,KAAMoK,EAD2B,EAC3BA,WAEd,OAAOuB,aAAY,kBACjB,kBAACH,GAAD,CAAqBI,QAAQ,cAC3B,kBAACC,GAAA,EAAD,KACE,kBAACC,GAAA,EAAD,CAAWC,OAAO,cAChB,kBAAClI,EAAA,EAAD,CAAUnC,KAAMsK,MACd,kBAACC,GAAA,EAAD,CAAO3P,MAAO,IACZ,kBAACsD,GAAA,EAAD,CACEE,cACEE,EAAKH,OAAOsL,KAAKe,oBAAS9B,EAAWG,gBAAkB,KAEzDxK,YAAa,SAAAoM,GACX/B,EAAWgC,cAAcD,EAAQA,EAAM9N,GAAK,aAOxD,kBAACwN,GAAA,EAAD,KACE,kBAAChI,EAAA,EAAD,CAAUnC,KAAM2K,MACd,kBAACJ,GAAA,EAAD,CAAO3P,MAAO,IACZ,kBAAC0H,EAAA,EAAD,CACEsI,aAAclC,EAAWM,iBACzB6B,gBAAgB,EAChB3L,SAAU,SAAAsD,GAAE,OAAIkG,EAAWoC,eAAetI,EAAGC,OAAO/D,QACpDF,YAAa,QAAK,EAAD,mCCtClBuM,GAAgC,kBAC3C,kBAAC1D,EAAA,EAAD,CAAgB5H,UAAWC,EAAA,EAAK,EAAD,oBAAsB4H,eAAe,GAClE,kBAAC0D,GAAA,EAAD,CAA0BC,2BAA4B,KACpD,kBAAC1D,EAAA,EAAD,CAAM2D,iBAAiB,GACrB,kBAAC,KAAD,KACE,yBAAK/P,UAAU,UACb,kBAAC,GAAD,OAEF,yBAAKA,UAAU,SACb,kBAACsN,GAAD,Y,sBCjBL,SAAS0C,KAId,OADI5M,eADFgL,MAAS6B,S,gdCYb,IAAMC,GAA8BpK,IAAOC,IAAV,KAE7BoK,aAF6B,MAQd/H,IAAQgI,OAEvBC,aAV6B,KAWdjI,IAAQgI,SAIdE,GAAwB9E,aAAS,WAC5C,IAAMyE,EAAWD,KACTO,EAAmBC,eAAnBD,eAF0C,EAGxBE,eAAnBC,EAH2C,qBAI5CC,EAAwBC,aAAa,4BAErCxK,EAAYS,IAAMgK,YAAN,uBAAkB,iCAAAC,EAAA,wDAC5BC,EAAed,EAASe,YACxBC,EAAYhB,EAASiB,iBAAiBjE,IAAI,SAAAD,GAAI,MAAK,CACvDuB,YAAavB,EAAKxL,GAClB2E,SAAU6G,EAAK7G,UAAYgL,SAGfvU,OAAS,GAAKmU,GAPM,uBAQ1BK,EAAoB,CACxBL,eACAE,aAV8B,SAaXP,EAAgBU,GAbL,gBAgB9Bb,EAAehM,EAAA,EAAK,EAAD,yCACnB0L,EAASoB,sBAjBqB,yCAoBjC,CAACX,EAAiBH,EAAgBN,IAErC,IAAKU,EACH,OAAO,KAGT,IAAMW,EAkBR,SAAyBrB,GACvB,IAAKA,EAASsB,UACZ,OAAO,EAGT,IAAMN,EAAYhB,EAASiB,iBAC3B,GAAyB,IAArBD,EAAUrU,OACZ,OAAO,EAIT,GADuBqU,EAAUO,KAAK,SAAAxE,GAAI,OAA6B,IAAzBA,EAAKyE,kBAEjD,OAAO,EAGT,OAAO,EAjCeC,CAAgBzB,GACtC,OACE,kBAACC,GAAD,KACE,kBAAC7J,EAAA,EAAD,CACEtB,MAAOC,IAAO2M,MACdpL,QAASH,EACTE,UAAWgL,GAEVrB,EAAS2B,aACR,kBAAC,QAAD,uBAEA,kBAAC,QAAD,6B,wBC9DGC,GAAmC,SAAC,GAAD,IAAGC,EAAH,EAAGA,SAAavR,EAAhB,oCAC9C,oCACE,kBAAC0O,GAAA,EAAD,CAAWC,OAAO,cAChB,kBAAC6C,GAAA,EAAD,KACE,yCAAOC,KAAK,YAAezR,MAG9BuR,ICXQG,GAAmBzG,aAAS,WACvC,IAAMyE,EAAWD,KAEjB,OACE,oCACE,kBAAC,GAAD,CACEkC,QAASjC,EAAS2B,aAClB7N,SAAUkM,EAASkC,mBAErB,kBAAC/C,GAAA,EAAD,CAAO3P,MAAO,IACZ,kBAAC,QAAD,+B,qBCNK2S,GAA2B5G,aAAiB,YAAsB,IAAnB+C,EAAkB,EAAlBA,YACpD0B,EAAWD,KAEXqC,EAAWxL,IAAMyL,OAAgC,MAEjDvO,EAAW8C,IAAMgK,YACrB,SAACxJ,GAA6C,IACpC9D,EAAU8D,EAAGC,OAAb/D,MACR0M,EAASsC,YAAYhE,EAAahL,IAEpC,CAACgL,EAAa0B,IAGVuC,EAAU3L,IAAMgK,YAAY,WAC5BwB,EAAS5H,SACX4H,EAAS5H,QAAQgI,UAElB,IAEH,OACE,kBAACtL,EAAA,EAAD,CACE6K,KAAK,OACLtC,gBAAgB,EAChBnM,MAAO0M,EAASyC,mBAAmBnE,GACnCjI,UAAW2J,EAASsB,UACpBxN,SAAUA,EACVyO,QAASA,EACTnP,YAAakB,EAAA,EAAK,EAAD,eACjBoO,QAASC,KAASC,OAClBC,SAAU7C,EAAS8C,oBAAoBxE,O,4aCzB7C,IAGMyE,GAAkBlN,YAAOkC,IAAPlC,CAAH,KAHM,QAoBrBmN,GAAkCnN,IAAOC,IAAV,MAKxBmN,GAA+B1H,aAAS,WACnD,IAAMyE,EAAWD,KAEXmD,EAA2BtM,IAAMgK,YACrC,gBAAauC,EAAb,EAAGlK,SAAH,OACE,kBAAC,KAAD,KACG,kBACC,kBAAC,GAAD,CACEgJ,QAASjC,EAASoD,gBAAgBD,GAClC9M,UAAW2J,EAASsB,UACpBxN,SAAU,kBAAMkM,EAASqD,iBAAiBF,IAC1CG,cAAY,uBAKpB,CAACtD,IAGGuD,EAAwB3M,IAAMgK,YAClC,kBACE,kBAAC,KAAD,KACG,kBACC,kBAAC,GAAD,CACEqB,QAASjC,EAASwD,eAClBnN,UAAW2J,EAASsB,UACpBxN,SAAUkM,EAASyD,gBACnB5B,SAAU,kBAAC,QAAD,eACVyB,cAAY,2BAKpB,CAACtD,IAGG0D,EAAoB9M,IAAMgK,YAC9B,YAAmC,IAC3BuC,EAD0B,EAA/BlK,SAED,OACE,kBAAC,KAAD,KACG,kBACC,kBAAC+J,GAAD,KACE,kBAAC7D,GAAA,EAAD,CAAO3P,MAAO,EAAGyP,OAAO,gBACtB,kBAACkD,GAAD,CAA0B7D,YAAa6E,SAOnD,IAnDuD,EC/BpD,WACL,IAAMnD,EAAWD,KADsB,EAGb4D,cAAqB,CAC7CjI,SAAUsE,EAAS4D,WADbjI,EAH+B,EAG/BA,KAAMC,EAHyB,EAGzBA,QAIdhF,IAAMiN,UAAU,WACd,IAAIjI,EAAJ,CAIA,IAAMkI,EAAcnI,EAAK/D,WAAWoF,IAAI,SAAAD,GACtC,IAAMgH,GACwB,IAA5BhH,EAAKiH,mBACDC,OAAOC,iBACPpV,KAAKiV,IAAIhH,EAAK7G,SAAU,GAE9B,MAAO,CAAE3E,GAAIwL,EAAKxL,GAAIwS,SAGxB/D,EAASmE,UAAUL,KAClB,CAACnI,EAAK/D,WAAYgE,EAASoE,IAE9B,IAAMnC,EAAcmC,EAAShG,OAAOoK,aAAiC,CACnEC,WAAY,CAAC,OACbvK,aAAc,CAAC,OAAQ,eAGzB,MAAO,CACLwK,UAAW1I,EACX2I,cAAe3I,EAAU,GAAKD,EAAK/D,WAAWoC,OAAO6D,IDsDlB2G,GAA7BD,EAtDiD,EAsDjDA,cAAeD,EAtDkC,EAsDlCA,UAEvB,OACE,kBAACvB,GAAD,CACE/K,MAAOuM,EACPtM,eAAe,EACfwM,eAAgB,kBACdH,EACE,kBAAC3G,GAAA,EAAD,MAEA,4BACE,kBAAC,QAAD,8CAKN,kBAAC,IAAD,CACEzF,QAAQ,KACR1I,MAAOwQ,EAAS0E,eAhGM,IAgGmC,EACzD1N,MAAO1C,EAAA,EAAK,EAAD,UACXgE,aAAcoL,EACd3T,UAAU,iBACV4U,gBAAiBC,aAAG,CAAE,qBAAsB5E,EAAS0E,mBAEvD,kBAAC,IAAD,CACExM,QAAQ,KACR1I,MAAOwQ,EAAS2B,aAxGM,IAwGiC,EACvD3K,MAAO1C,EAAA,EAAK,EAAD,UACXuQ,eAAgBtB,EAChBjL,aAAc4K,EACdnT,UAAU,iBACV4U,gBAAiBC,aAAG,CAAE,qBAAsB5E,EAAS2B,iBAEvD,kBAAC,IAAD,CACEzJ,QAAQ,WACR1I,MAAO,IACPwH,MAAO1C,EAAA,EAAK,EAAD,cACXgE,aAAcG,KAEhB,kBAAC,IAAD,CAAQP,QAAQ,OAAO1I,MAAO,IAAKwH,MAAO1C,EAAA,EAAK,EAAD,eAC9C,kBAAC,IAAD,CACE4D,QAAQ,YACR1I,MAAO,IACP6I,SAAU,GACVyM,SAAU,EACV9N,MAAO1C,EAAA,EAAK,EAAD,eAEb,kBAAC,IAAD,CACE4D,QAAQ,qBACR1I,MAAO,IACPwH,MAAO1C,EAAA,EAAK,EAAD,kBACXgE,aAAcyM,QAMtB,SAAStM,GAAT,GAA+D,IAAtCQ,EAAqC,EAArCA,SAAUN,EAA2B,EAA3BA,QACjC,MAAM,GAAN,OAAUM,EAAV,YAAsBN,EAAQ1C,SAASS,MAGzC,SAASqO,GAAT,GACE,OAAoB,IADoC,EAA5B9L,SACD,kBAAC,QAAD,kBAA2B,kBAAC,QAAD,kBEzJjD,IAAM+L,GAAuC,WAClD,OAAO,kBAAC5I,EAAA,EAAD,CAA6B5M,MAAO,MCH9B,UAAA0E,EAAA,GAAc,IAAMnG,cAAc,OAAQ,CACvDC,EAAG,yCACD,iB,WCMSiX,GAA6B1J,aAAS,WAAO,IAChDrI,EAASC,eAATD,KACF8M,EAAWD,KAEXmF,EAA8B1R,MAAG2R,OACrC/F,oBAASY,EAAS4D,UAClB1Q,EAAK2J,UAGP,OACE,kBAAC9F,EAAA,EAAD,CAAUnC,KAAMwQ,IACd,kBAACC,GAAA,EAAD,CACEC,iBAAkBtF,EAASe,SAAW,CAACf,EAASe,UAAY,GAC5DwE,kBAAmB,gBAAEC,EAAF,4BAAcxF,EAASyF,YAAYD,IACtDE,iBAAkB,kBAAM1F,EAASyF,YAAY,OAC7CE,SAAS,EACT/R,aAAa,EACbgS,iBAAkB,iBAAO,CAAEpW,MAAO,KAClCqW,sBAAsB,EACtBhJ,SAAUqI,O,wOCPlB,IAAMY,GAAqBjQ,IAAOC,IAAV,MAIlBiQ,GAAwBlQ,YAAO8I,KAAP9I,CAAH,MAQdmQ,GAA8B,SAAA1V,GAAU,IAC3C4C,EAASC,eAATD,KAEF+S,EADmBtF,aAAa,8BACKzN,EAAKgT,gBAExClM,EAAW+F,KAAX/F,OAER,OACE,kBAACiC,EAAA,EAAD,CACE5H,UAAWC,EAAA,EAAK,EAAD,kBACf4H,eAAe,EACfiK,WACE,kBAACL,GAAD,KACE,kBAACzF,GAAD,QAIJ,kBAACT,GAAA,EAAD,CAA0BC,2BAA4B,KACpD,kBAAC1D,EAAA,EAAD,CAAM2D,iBAAiB,GACpBmG,EACC,kBAAC,KAAD,KACE,yBAAKlW,UAAU,UACb,kBAACgW,GAAD,CAAuBjH,QAAQ,QAAQsH,SAAS,QAC9C,kBAACrH,GAAA,EAAD,KACE,kBAAC,GAAD,OAEF,kBAACA,GAAA,EAAD,KACE,kBAACkG,GAAD,OAEF,kBAAClG,GAAA,EAAD,KACE,kBAACsH,GAAA,EAAD,CACEC,MAAOtM,EACP5G,YAAW,UAAKkB,EAAA,EAAK,EAAD,QAAS6C,oBAAlB,cAA2C7C,EAAA,EAAK,EAAD,OAA/C,cAA4DA,EAAA,EAAK,EAAD,SAAU6C,qBACrFoP,mBAAoB,OAGxB,kBAACxH,GAAA,EAAD,KACE,kBAACiD,GAAD,SAIN,yBAAKjS,UAAU,SACb,kBAACkT,GAAD,QAIJ,kBAAC7H,EAAA,EAAD,KACE,kBAAC,QAAD,+BCjFd,4CAkBO,IAAMoL,GAAyB,kBACpC,kBAAC,IAAD,KACE,kBAACC,EAAA,EAAD,CAAaC,KAAMC,IAAaC,OAAK,EAACC,UAAW1S,IACjD,kBAACsS,EAAA,EAAD,CAAaC,KAAM/Q,IAAmBkR,UAAWlH,KACjD,kBAAC8G,EAAA,EAAD,CAAaC,KAAMlR,IAAsBqR,UAAWb,KACpD,kBAACS,EAAA,EAAD,CAAaC,KAAMrR,IAAqBwR,UAAW7K,KACnD,kBAAC,IAAD,CAAUnP,GAAIia,IAAkBha,KAAMoI,MACtC,kBAAC,IAAD,CAAO2R,UAAWE,QAIPP","file":"static/js/189.a5e5cf5e.chunk.js","sourcesContent":["function isAbsolute(pathname) {\n  return pathname.charAt(0) === '/';\n} // About 1.5x faster than the two-arg version of Array#splice()\n\n\nfunction spliceOne(list, index) {\n  for (var i = index, k = i + 1, n = list.length; k < n; i += 1, k += 1) {\n    list[i] = list[k];\n  }\n\n  list.pop();\n} // This implementation is based heavily on node's url.parse\n\n\nfunction resolvePathname(to, from) {\n  if (from === undefined) from = '';\n  var toParts = to && to.split('/') || [];\n  var fromParts = from && from.split('/') || [];\n  var isToAbs = to && isAbsolute(to);\n  var isFromAbs = from && isAbsolute(from);\n  var mustEndAbs = isToAbs || isFromAbs;\n\n  if (to && isAbsolute(to)) {\n    // to is absolute\n    fromParts = toParts;\n  } else if (toParts.length) {\n    // to is relative, drop the filename\n    fromParts.pop();\n    fromParts = fromParts.concat(toParts);\n  }\n\n  if (!fromParts.length) return '/';\n  var hasTrailingSlash;\n\n  if (fromParts.length) {\n    var last = fromParts[fromParts.length - 1];\n    hasTrailingSlash = last === '.' || last === '..' || last === '';\n  } else {\n    hasTrailingSlash = false;\n  }\n\n  var up = 0;\n\n  for (var i = fromParts.length; i >= 0; i--) {\n    var part = fromParts[i];\n\n    if (part === '.') {\n      spliceOne(fromParts, i);\n    } else if (part === '..') {\n      spliceOne(fromParts, i);\n      up++;\n    } else if (up) {\n      spliceOne(fromParts, i);\n      up--;\n    }\n  }\n\n  if (!mustEndAbs) for (; up--; up) {\n    fromParts.unshift('..');\n  }\n  if (mustEndAbs && fromParts[0] !== '' && (!fromParts[0] || !isAbsolute(fromParts[0]))) fromParts.unshift('');\n  var result = fromParts.join('/');\n  if (hasTrailingSlash && result.substr(-1) !== '/') result += '/';\n  return result;\n}\n\nexport default resolvePathname;","import React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(\"path\", {\n  d: \"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z\"\n}), 'AddCircle');","import { createElement } from 'react';\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\n\nvar _assign = function __assign() {\n  _assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return _assign.apply(this, arguments);\n};\n\nfunction __rest(s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n  }\n  return t;\n}\n\nvar uid = function uid() {\n  return Math.random().toString(36).substring(2);\n};\n\nvar Svg = function Svg(_a) {\n  var rtl = _a.rtl,\n      speed = _a.speed,\n      interval = _a.interval,\n      style = _a.style,\n      width = _a.width,\n      height = _a.height,\n      baseUrl = _a.baseUrl,\n      gradientRatio = _a.gradientRatio,\n      animate = _a.animate,\n      ariaLabel = _a.ariaLabel,\n      children = _a.children,\n      className = _a.className,\n      uniquekey = _a.uniquekey,\n      primaryColor = _a.primaryColor,\n      primaryOpacity = _a.primaryOpacity,\n      secondaryColor = _a.secondaryColor,\n      secondaryOpacity = _a.secondaryOpacity,\n      preserveAspectRatio = _a.preserveAspectRatio,\n      props = __rest(_a, [\"rtl\", \"speed\", \"interval\", \"style\", \"width\", \"height\", \"baseUrl\", \"gradientRatio\", \"animate\", \"ariaLabel\", \"children\", \"className\", \"uniquekey\", \"primaryColor\", \"primaryOpacity\", \"secondaryColor\", \"secondaryOpacity\", \"preserveAspectRatio\"]);\n\n  var idClip = uniquekey ? uniquekey + \"-idClip\" : uid();\n  var idGradient = uniquekey ? uniquekey + \"-idGradient\" : uid();\n  var rtlStyle = rtl ? {\n    transform: 'scaleX(-1)'\n  } : {};\n  var keyTimes = \"0; \" + interval + \"; 1\";\n  var dur = speed + \"s\";\n  return createElement(\"svg\", _assign({\n    role: \"img\",\n    style: _assign({}, style, rtlStyle),\n    className: className,\n    \"aria-label\": ariaLabel ? ariaLabel : null,\n    viewBox: \"0 0 \" + width + \" \" + height,\n    preserveAspectRatio: preserveAspectRatio\n  }, props), ariaLabel ? createElement(\"title\", null, ariaLabel) : null, createElement(\"rect\", {\n    x: \"0\",\n    y: \"0\",\n    width: width,\n    height: height,\n    clipPath: \"url(\" + baseUrl + \"#\" + idClip + \")\",\n    style: {\n      fill: \"url(\" + baseUrl + \"#\" + idGradient + \")\"\n    }\n  }), createElement(\"defs\", null, createElement(\"clipPath\", {\n    id: idClip\n  }, children), createElement(\"linearGradient\", {\n    id: idGradient\n  }, createElement(\"stop\", {\n    offset: \"0%\",\n    stopColor: primaryColor,\n    stopOpacity: primaryOpacity\n  }, animate && createElement(\"animate\", {\n    attributeName: \"offset\",\n    values: -gradientRatio + \"; \" + -gradientRatio + \"; 1\",\n    keyTimes: keyTimes,\n    dur: dur,\n    repeatCount: \"indefinite\"\n  })), createElement(\"stop\", {\n    offset: \"50%\",\n    stopColor: secondaryColor,\n    stopOpacity: secondaryOpacity\n  }, animate && createElement(\"animate\", {\n    attributeName: \"offset\",\n    values: -gradientRatio / 2 + \"; \" + -gradientRatio / 2 + \"; \" + (1 + gradientRatio / 2),\n    keyTimes: keyTimes,\n    dur: dur,\n    repeatCount: \"indefinite\"\n  })), createElement(\"stop\", {\n    offset: \"100%\",\n    stopColor: primaryColor,\n    stopOpacity: primaryOpacity\n  }, animate && createElement(\"animate\", {\n    attributeName: \"offset\",\n    values: \"0; 0; \" + (1 + gradientRatio),\n    keyTimes: keyTimes,\n    dur: dur,\n    repeatCount: \"indefinite\"\n  })))));\n};\n\nvar defaultProps = {\n  animate: true,\n  ariaLabel: 'Loading interface...',\n  baseUrl: '',\n  gradientRatio: 2,\n  height: 130,\n  interval: 0.25,\n  preserveAspectRatio: 'none',\n  primaryColor: '#f0f0f0',\n  primaryOpacity: 1,\n  rtl: false,\n  secondaryColor: '#e0e0e0',\n  secondaryOpacity: 1,\n  speed: 2,\n  style: {},\n  width: 400\n};\n\nvar InitialComponent = function InitialComponent(props) {\n  return createElement(\"rect\", {\n    x: \"0\",\n    y: \"0\",\n    rx: \"5\",\n    ry: \"5\",\n    width: props.width,\n    height: props.height\n  });\n};\n\nvar ContentLoader = function ContentLoader(props) {\n  var mergedProps = _assign({}, defaultProps, props);\n\n  var children = props.children ? props.children : createElement(InitialComponent, _assign({}, mergedProps));\n  return createElement(Svg, _assign({}, mergedProps), children);\n};\n\nvar FacebookStyle = function FacebookStyle(props) {\n  return createElement(ContentLoader, _assign({}, props), createElement(\"rect\", {\n    x: \"70\",\n    y: \"15\",\n    rx: \"4\",\n    ry: \"4\",\n    width: \"117\",\n    height: \"6.4\"\n  }), createElement(\"rect\", {\n    x: \"70\",\n    y: \"35\",\n    rx: \"3\",\n    ry: \"3\",\n    width: \"85\",\n    height: \"6.4\"\n  }), createElement(\"rect\", {\n    x: \"0\",\n    y: \"80\",\n    rx: \"3\",\n    ry: \"3\",\n    width: \"350\",\n    height: \"6.4\"\n  }), createElement(\"rect\", {\n    x: \"0\",\n    y: \"100\",\n    rx: \"3\",\n    ry: \"3\",\n    width: \"380\",\n    height: \"6.4\"\n  }), createElement(\"rect\", {\n    x: \"0\",\n    y: \"120\",\n    rx: \"3\",\n    ry: \"3\",\n    width: \"201\",\n    height: \"6.4\"\n  }), createElement(\"circle\", {\n    cx: \"30\",\n    cy: \"30\",\n    r: \"30\"\n  }));\n};\n\nvar InstagramStyle = function InstagramStyle(props) {\n  return createElement(ContentLoader, _assign({}, props, {\n    height: 480\n  }), createElement(\"circle\", {\n    cx: \"30\",\n    cy: \"30\",\n    r: \"30\"\n  }), createElement(\"rect\", {\n    x: \"75\",\n    y: \"13\",\n    rx: \"4\",\n    ry: \"4\",\n    width: \"100\",\n    height: \"13\"\n  }), createElement(\"rect\", {\n    x: \"75\",\n    y: \"37\",\n    rx: \"4\",\n    ry: \"4\",\n    width: \"50\",\n    height: \"8\"\n  }), createElement(\"rect\", {\n    x: \"0\",\n    y: \"70\",\n    rx: \"5\",\n    ry: \"5\",\n    width: \"400\",\n    height: \"400\"\n  }));\n};\n\nvar CodeStyle = function CodeStyle(props) {\n  return createElement(ContentLoader, _assign({}, props), createElement(\"rect\", {\n    x: \"0\",\n    y: \"0\",\n    rx: \"3\",\n    ry: \"3\",\n    width: \"70\",\n    height: \"10\"\n  }), createElement(\"rect\", {\n    x: \"80\",\n    y: \"0\",\n    rx: \"3\",\n    ry: \"3\",\n    width: \"100\",\n    height: \"10\"\n  }), createElement(\"rect\", {\n    x: \"190\",\n    y: \"0\",\n    rx: \"3\",\n    ry: \"3\",\n    width: \"10\",\n    height: \"10\"\n  }), createElement(\"rect\", {\n    x: \"15\",\n    y: \"20\",\n    rx: \"3\",\n    ry: \"3\",\n    width: \"130\",\n    height: \"10\"\n  }), createElement(\"rect\", {\n    x: \"155\",\n    y: \"20\",\n    rx: \"3\",\n    ry: \"3\",\n    width: \"130\",\n    height: \"10\"\n  }), createElement(\"rect\", {\n    x: \"15\",\n    y: \"40\",\n    rx: \"3\",\n    ry: \"3\",\n    width: \"90\",\n    height: \"10\"\n  }), createElement(\"rect\", {\n    x: \"115\",\n    y: \"40\",\n    rx: \"3\",\n    ry: \"3\",\n    width: \"60\",\n    height: \"10\"\n  }), createElement(\"rect\", {\n    x: \"185\",\n    y: \"40\",\n    rx: \"3\",\n    ry: \"3\",\n    width: \"60\",\n    height: \"10\"\n  }), createElement(\"rect\", {\n    x: \"0\",\n    y: \"60\",\n    rx: \"3\",\n    ry: \"3\",\n    width: \"30\",\n    height: \"10\"\n  }));\n};\n\nvar ListStyle = function ListStyle(props) {\n  return createElement(ContentLoader, _assign({}, props), createElement(\"rect\", {\n    x: \"0\",\n    y: \"0\",\n    rx: \"3\",\n    ry: \"3\",\n    width: \"250\",\n    height: \"10\"\n  }), createElement(\"rect\", {\n    x: \"20\",\n    y: \"20\",\n    rx: \"3\",\n    ry: \"3\",\n    width: \"220\",\n    height: \"10\"\n  }), createElement(\"rect\", {\n    x: \"20\",\n    y: \"40\",\n    rx: \"3\",\n    ry: \"3\",\n    width: \"170\",\n    height: \"10\"\n  }), createElement(\"rect\", {\n    x: \"0\",\n    y: \"60\",\n    rx: \"3\",\n    ry: \"3\",\n    width: \"250\",\n    height: \"10\"\n  }), createElement(\"rect\", {\n    x: \"20\",\n    y: \"80\",\n    rx: \"3\",\n    ry: \"3\",\n    width: \"200\",\n    height: \"10\"\n  }), createElement(\"rect\", {\n    x: \"20\",\n    y: \"100\",\n    rx: \"3\",\n    ry: \"3\",\n    width: \"80\",\n    height: \"10\"\n  }));\n};\n\nvar BulletListStyle = function BulletListStyle(props) {\n  return createElement(ContentLoader, _assign({}, props), createElement(\"circle\", {\n    cx: \"10\",\n    cy: \"20\",\n    r: \"8\"\n  }), createElement(\"rect\", {\n    x: \"25\",\n    y: \"15\",\n    rx: \"5\",\n    ry: \"5\",\n    width: \"220\",\n    height: \"10\"\n  }), createElement(\"circle\", {\n    cx: \"10\",\n    cy: \"50\",\n    r: \"8\"\n  }), createElement(\"rect\", {\n    x: \"25\",\n    y: \"45\",\n    rx: \"5\",\n    ry: \"5\",\n    width: \"220\",\n    height: \"10\"\n  }), createElement(\"circle\", {\n    cx: \"10\",\n    cy: \"80\",\n    r: \"8\"\n  }), createElement(\"rect\", {\n    x: \"25\",\n    y: \"75\",\n    rx: \"5\",\n    ry: \"5\",\n    width: \"220\",\n    height: \"10\"\n  }), createElement(\"circle\", {\n    cx: \"10\",\n    cy: \"110\",\n    r: \"8\"\n  }), createElement(\"rect\", {\n    x: \"25\",\n    y: \"105\",\n    rx: \"5\",\n    ry: \"5\",\n    width: \"220\",\n    height: \"10\"\n  }));\n};\n\nexport default ContentLoader;\nexport { BulletListStyle as BulletList, CodeStyle as Code, FacebookStyle as Facebook, InstagramStyle as Instagram, ListStyle as List };","import { Trans } from '@lingui/macro'\nimport { RM } from '@speedlo/tools'\nimport React from 'react'\n\nimport { useRoot } from '../atoms/RootProvider'\nimport { ISelectControlProps, SelectControl } from '../atoms/SelectControl'\nimport { FCompanyBranchBrand } from '../graph/generated'\nimport { i18n } from '../i18n'\n\ntype TBrand = FCompanyBranchBrand\n\ninterface IProps extends ISelectControlProps<TBrand> {\n  brands?: RoA<TBrand>\n  selectedBrand: Maybe<TBrand>\n  onSelection(brand: Maybe<TBrand>): void\n}\n\nconst ClearIndicator = props => {\n  const {\n    getStyles,\n    innerProps: { ref, ...restInnerProps },\n  } = props\n  return (\n    <div\n      {...restInnerProps}\n      ref={ref}\n      style={getStyles('clearIndicator', props)}\n    >\n      <div style={{ padding: '0px 5px' }}>\n        <Trans>All</Trans>\n      </div>\n    </div>\n  )\n}\n\nexport const CompanyBrandDropdown: React.FC<IProps> = ({\n  brands,\n  selectedBrand,\n  onSelection,\n  ...props\n}) => {\n  const { user } = useRoot()\n\n  return (\n    <SelectControl<TBrand>\n      placeholder={i18n.t`Select brand`}\n      options={brands || user.brands}\n      value={selectedBrand}\n      formatOptionLabel={RM.prop('name')}\n      getOptionValue={RM.prop('id')}\n      getOptionLabel={RM.prop('name')}\n      isClearable={true}\n      isSearchable={true}\n      onChange={value => onSelection(value as Maybe<TBrand>)}\n      autoFocus={true}\n      components={{ ClearIndicator }}\n      {...props}\n    />\n  )\n}\n","import React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(\"path\", {\n  d: \"M20 4H4v2h16V4zm1 10v-2l-1-5H4l-1 5v2h1v6h10v-6h4v6h2v-6h1zm-9 4H6v-4h6v4z\"\n}), 'Store');","import React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(React.Fragment, null, React.createElement(\"path\", {\n  fill: \"none\",\n  d: \"M0 0h24v24H0V0z\"\n}), React.createElement(\"path\", {\n  d: \"M19 3H5c-1.1 0-2 .9-2 2v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 6h-4c0 1.62-1.38 3-3 3s-3-1.38-3-3H5V5h14v4zm-4 7h6v3c0 1.1-.9 2-2 2H5c-1.1 0-2-.9-2-2v-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3z\"\n})), 'AllInbox');","import React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(\"path\", {\n  d: \"M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\"\n}), 'RemoveCircleOutline');","import React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(\"path\", {\n  d: \"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z\"\n}), 'RemoveRedEye');","import React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(\"path\", {\n  d: \"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\"\n}), 'Search');","import React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(\"path\", {\n  d: \"M19 4H5c-1.11 0-2 .9-2 2v12c0 1.1.89 2 2 2h4v-2H5V8h14v10h-4v2h4c1.1 0 2-.9 2-2V6c0-1.1-.89-2-2-2zm-7 6l-4 4h3v6h2v-6h3l-4-4z\"\n}), 'OpenInBrowser');","import React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(\"path\", {\n  d: \"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z\"\n}), 'Redo');","import { AllInbox, Inbox, OpenInBrowser, Redo } from '@material-ui/icons'\nimport React from 'react'\n\nimport { i18n } from '../../../i18n'\nimport { Colors } from '../../../styling'\nimport {\n  ROUTE_STOCK_DEPOSIT,\n  ROUTE_STOCK_OVERVIEW,\n  ROUTE_STOCK_STATS,\n  ROUTE_STOCK_TRANSFER,\n} from '../../stock/stock.routes'\nimport { DashboardButton } from '../atoms/DashboardButton'\nimport { DashboardPage } from '../molecules/DashboardPage'\n\nexport const StockDashboardPage: React.FC = () => (\n  <DashboardPage pageTitle={i18n.t`Stock`}>\n    <DashboardButton\n      row={1}\n      column={1}\n      canQuery=\"stockItems\"\n      text={i18n.t`Stock overview`}\n      icon={Inbox}\n      color={Colors.violet}\n      route={ROUTE_STOCK_OVERVIEW}\n    />\n    <DashboardButton\n      row={1}\n      column={2}\n      canMutate=\"changeAmountStockItem\"\n      text={i18n.t`Stock deposit`}\n      icon={OpenInBrowser}\n      color={Colors.violet}\n      route={ROUTE_STOCK_DEPOSIT}\n    />\n    <DashboardButton\n      row={1}\n      column={3}\n      canMutate=\"createStockItemTransfers\"\n      canAccessWithSingleBranch={false}\n      text={i18n.t`Stock transfer`}\n      icon={Redo}\n      color={Colors.violet}\n      route={ROUTE_STOCK_TRANSFER}\n    />\n    <DashboardButton\n      row={2}\n      column={1}\n      canQuery=\"stockItems\"\n      canAccessWithSingleBranch={false}\n      text={i18n.t`Stock statistics`}\n      icon={AllInbox}\n      color={Colors.turquoise}\n      route={ROUTE_STOCK_STATS}\n    />\n  </DashboardPage>\n)\n","import styled from 'styled-components'\n\nexport const FormContainer = styled.div`\n  margin: 0.6rem;\n  display: flex;\n`\n\nexport const FormColumn = styled.div`\n  flex: none;\n  margin-right: 1rem;\n`\n","import { Trans } from '@lingui/macro'\nimport numeral from 'numeral'\nimport React from 'react'\n\nimport { FMenuWareUnitFragment } from '../../../graph/generated'\nimport { priceFormat } from '../../../helpers/formats'\nimport { TouchButton } from '../../../molecules/TouchButton'\n\ninterface IProps {\n  cardName: string\n  wareUnit: Maybe<FMenuWareUnitFragment>\n  quantity: number\n  onConfirm(): void\n}\n\nexport const StockDepositConfirmButton: React.FC<IProps> = ({\n  wareUnit,\n  quantity,\n  onConfirm,\n}) => (\n  <TouchButton disabled={wareUnit === null} onClick={onConfirm}>\n    {wareUnit ? (\n      <Trans>{`Add ${numeral(quantity).format(priceFormat)} ${\n        wareUnit.code\n      }`}</Trans>\n    ) : (\n      <Trans>No stock card selected</Trans>\n    )}\n  </TouchButton>\n)\n","import React from 'react'\n\nimport { FormInputStyled } from '../../../atoms/FormInputStyled'\nimport { IconLine } from '../../../atoms/IconLine'\nimport { i18n } from '../../../i18n'\n\ninterface IProps {\n  value: string\n  onFilter(value: string): void\n  onConfirm(): void\n}\n\nexport const StockDepositFilterInput = React.forwardRef<\n  HTMLInputElement,\n  IProps\n>(({ value, onFilter, onConfirm }, ref) => (\n  <IconLine label={i18n.t`Stock card`} labelWidth={7}>\n    <FormInputStyled\n      // @ts-ignore https://github.com/DefinitelyTyped/DefinitelyTyped/issues/28884\n      ref={ref}\n      autoFocus={true}\n      placeholder={`${i18n.t`Code`.toLocaleLowerCase()} / ${i18n.t`PLU`} / ${i18n.t`Title`.toLocaleLowerCase()}`}\n      value={value}\n      onChange={ev => {\n        onFilter(ev.target.value)\n      }}\n      onKeyPressCapture={ev => {\n        if (ev.key === 'Enter') {\n          ev.preventDefault()\n          onConfirm()\n        }\n      }}\n    />\n  </IconLine>\n))\n","import numeral from 'numeral'\nimport React from 'react'\n\nimport { FormInputStyled } from '../../../atoms/FormInputStyled'\n\ninterface IProps {\n  enabled: boolean\n  onChange(quantity: number): void\n  onConfirm(): void\n}\n\nexport const StockDepositQuantityInput = React.forwardRef<\n  HTMLInputElement,\n  IProps\n>(({ enabled, onChange, onConfirm }, ref) => (\n  <FormInputStyled\n    // @ts-ignore https://github.com/DefinitelyTyped/DefinitelyTyped/issues/28884\n    ref={ref}\n    disabled={!enabled}\n    onChange={ev => {\n      const value = numeral(ev.target.value).value()\n      onChange(value)\n    }}\n    onKeyPressCapture={ev => {\n      if (ev.key === 'Enter') {\n        ev.preventDefault()\n        onConfirm()\n      }\n    }}\n  />\n))\n","import React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(\"path\", {\n  d: \"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z\"\n}), 'Done');","import { Done } from '@material-ui/icons'\nimport React from 'react'\nimport { TableCellProps } from 'react-virtualized'\nimport styled from 'styled-components'\n\nimport { Column, DataTable } from '../../../atoms/DataTable'\nimport { SizerButton } from '../../../atoms/SizerButton'\nimport { QMenuStockDepositStockItems } from '../../../graph/generated'\nimport { i18n } from '../../../i18n'\nimport { TouchButton } from '../../../molecules/TouchButton'\nimport { Colors, Spacing } from '../../../styling'\n\ninterface IProps {\n  searchValue: string\n  stockItems: QMenuStockDepositStockItems[]\n  onSelect(stockItem: QMenuStockDepositStockItems): void\n}\n\nexport const StockDepositResultTable: React.FC<IProps> = ({\n  stockItems,\n  searchValue,\n  onSelect,\n}) => (\n  <DataTable items={stockItems} heightStretch={false}>\n    <Column\n      dataKey=\"id\"\n      width={Spacing.ButtonColumnWidthPx}\n      minWidth={Spacing.ButtonColumnWidthPx}\n      cellRenderer={ColumnRendererSelect}\n      columnData={{ onSelect }}\n    />\n    <Column\n      dataKey=\"quantity\"\n      width={100}\n      label={i18n.t`Card stock`}\n      cellRenderer={stockWithUnit}\n    />\n    <Column\n      dataKey=\"code\"\n      width={100}\n      label={i18n.t`Card code`}\n      cellRenderer={highlightMatch(searchValue)}\n    />\n    <Column\n      dataKey=\"nameLabel\"\n      width={300}\n      label={i18n.t`Card name`}\n      cellRenderer={highlightMatch(searchValue)}\n    />\n    <Column dataKey=\"note\" width={300} label={i18n.t`Card note`} />\n  </DataTable>\n)\n\nfunction ColumnRendererSelect({\n  rowData,\n  columnData: { onSelect },\n}: TableCellProps) {\n  return (\n    <SizerButton>\n      <TouchButton icon={Done} onClick={() => onSelect(rowData)} />\n    </SizerButton>\n  )\n}\n\nconst HighlightedValue = styled.span`\n  background-color: ${Colors.yellow};\n`\n\nfunction highlightMatch(searchValue: string) {\n  return ({ cellData }: TableCellProps) => {\n    const index = cellData\n      .toLocaleLowerCase()\n      .indexOf(searchValue.toLocaleLowerCase())\n    if (index === -1) {\n      return cellData\n    }\n    const begin = cellData.substring(0, index)\n    const match = cellData.substring(index, index + searchValue.length)\n    const end = cellData.substring(index + searchValue.length)\n    return (\n      <>\n        {begin}\n        <HighlightedValue>{match}</HighlightedValue>\n        {end}\n      </>\n    )\n  }\n}\n\nfunction stockWithUnit({ cellData, rowData }: TableCellProps) {\n  return `${cellData} ${rowData.wareUnit.code}`\n}\n","import { Trans } from '@lingui/macro'\nimport React from 'react'\n\nimport { FormColumn, FormContainer } from '../../../atoms/FormContainer'\nimport { Headline } from '../../../atoms/Headline'\nimport { isPartialMatch } from '../../../helpers/filter'\nimport { RM } from '../../../helpers/ramda'\nimport { StockDepositConfirmButton } from '../molecules/StockDepositConfirmButton'\nimport { StockDepositFilterInput } from '../molecules/StockDepositFilterInput'\nimport { StockDepositQuantityInput } from '../molecules/StockDepositQuantityInput'\nimport { StockDepositResultTable } from '../molecules/StockDepositResultTable'\nimport { TStockItem } from './StockDepositLoader'\n\ninterface IProps {\n  stockItems: RoA<TStockItem>\n  onDeposit(stockItem: TStockItem, quantity: number): void\n}\n\ninterface IState {\n  targetStockItem: Maybe<TStockItem>\n  filteredStockItems: TStockItem[]\n  searchValue: string\n  inputQuantity: number\n}\n\nexport class StockDepositControl extends React.Component<IProps, IState> {\n  state: IState = {\n    targetStockItem: null,\n    filteredStockItems: [],\n    searchValue: '',\n    inputQuantity: 0,\n  }\n  componentDidUpdate(prevProps: IProps) {\n    if (prevProps.stockItems !== this.props.stockItems) {\n      this.onFilter(this.state.searchValue)\n    }\n  }\n  filterInputRef = React.createRef<HTMLInputElement>()\n  quantityInputRef = React.createRef<HTMLInputElement>()\n  onFilter = (searchValue: string) => {\n    if (searchValue.trim() === '') {\n      this.setState({\n        filteredStockItems: [],\n        searchValue: '',\n        targetStockItem: null,\n      })\n      return\n    }\n    const partialMatch = isPartialMatch(searchValue)\n    const filteredStockItems = this.props.stockItems.filter(\n      RM.cond([\n        [RM.propEq('plu', searchValue), RM.T],\n        [RM.propSatisfies(partialMatch, 'code'), RM.T],\n        [RM.propSatisfies(partialMatch, 'nameLabel'), RM.T],\n      ]),\n    )\n    let targetStockItem: Maybe<TStockItem> = null\n    if (filteredStockItems.length === 1) {\n      targetStockItem = RM.head(filteredStockItems)!\n    }\n    this.setState({\n      filteredStockItems,\n      searchValue,\n      targetStockItem,\n    })\n  }\n  onConfirmFilter = () => {\n    if (this.state.filteredStockItems.length === 1) {\n      this.quantityInputRef.current!.focus()\n    }\n  }\n  onQuantity = (quantity: number) => {\n    this.setState({ inputQuantity: quantity })\n  }\n  onSelectStockItem = (stockItem: TStockItem) => {\n    this.setState(\n      {\n        targetStockItem: stockItem,\n        filteredStockItems: [stockItem],\n      },\n      () => {\n        this.quantityInputRef.current!.focus()\n      },\n    )\n  }\n  onConfirm = () => {\n    const { targetStockItem, inputQuantity } = this.state\n    if (targetStockItem && inputQuantity !== 0) {\n      this.props.onDeposit(targetStockItem, inputQuantity)\n    }\n    this.setState(\n      { targetStockItem: null, searchValue: '', inputQuantity: 0 },\n      () => {\n        this.quantityInputRef.current!.value = ''\n        this.filterInputRef.current!.focus()\n      },\n    )\n  }\n  render() {\n    const {\n      searchValue,\n      filteredStockItems,\n      targetStockItem,\n      inputQuantity,\n    } = this.state\n    const hasSearchValue = searchValue.trim() !== ''\n    const isNoneFind = filteredStockItems.length === 0\n    const isMultiFind = filteredStockItems.length > 1\n    return (\n      <>\n        <FormContainer>\n          <FormColumn>\n            <StockDepositFilterInput\n              onFilter={this.onFilter}\n              onConfirm={this.onConfirmFilter}\n              value={searchValue}\n              ref={this.filterInputRef}\n            />\n          </FormColumn>\n          <FormColumn>\n            <StockDepositQuantityInput\n              enabled={targetStockItem !== null}\n              onChange={this.onQuantity}\n              onConfirm={this.onConfirm}\n              ref={this.quantityInputRef}\n            />\n          </FormColumn>\n          <FormColumn>\n            <StockDepositConfirmButton\n              cardName={targetStockItem ? targetStockItem.nameLabel : ''}\n              quantity={inputQuantity}\n              wareUnit={targetStockItem ? targetStockItem.wareUnit : null}\n              onConfirm={this.onConfirm}\n            />\n          </FormColumn>\n        </FormContainer>\n        <Headline>\n          {hasSearchValue && isMultiFind && (\n            <Trans>\n              Continue typing to find single stock card or select one from the\n              list\n            </Trans>\n          )}\n          {hasSearchValue && isNoneFind && (\n            <Trans>No stock card found from entered search value</Trans>\n          )}\n          {hasSearchValue && targetStockItem && (\n            <Trans>\n              Stock card <b>{targetStockItem.nameLabel}</b> is selected\n            </Trans>\n          )}\n        </Headline>\n        {hasSearchValue && (\n          <StockDepositResultTable\n            searchValue={searchValue}\n            stockItems={filteredStockItems}\n            onSelect={this.onSelectStockItem}\n          />\n        )}\n      </>\n    )\n  }\n}\n","import { observer } from 'mobx-react-lite'\n\nimport { useRoot } from '../../../atoms/RootProvider'\nimport {\n  QMenuStockDepositStockItems,\n  useMMenuStockQuantity,\n  useQMenuStockDeposit,\n} from '../../../graph/generated'\n\nexport type TStockItem = QMenuStockDepositStockItems\n\nexport type TDepositFn = (stockItem: TStockItem, quantity: number) => void\n\ninterface IProps {\n  children(stockItems: RoA<TStockItem>, onDeposit: TDepositFn): ReactNode\n}\n\nexport const StockDepositLoader = observer<IProps>(({ children }) => {\n  const { settings } = useRoot()\n  const { data, loading } = useQMenuStockDeposit({\n    branchId: settings.branchId,\n  })\n  const [changeQuantity] = useMMenuStockQuantity()\n  const onDeposit: TDepositFn = (stockItem, quantity) => {\n    changeQuantity({\n      stockItem: stockItem.id,\n      quantityChange: quantity,\n    })\n  }\n  return children(loading ? [] : data.stockItems, onDeposit)\n})\n","import React from 'react'\n\nimport { Card } from '../../../atoms/Card'\nimport { i18n } from '../../../i18n'\nimport { FullPageLayout } from '../../../molecules/FullPageLayout'\nimport { SettingsCompanyBranchPicker } from '../../settings/organisms/SettingsCompanyBranchPicker'\nimport { StockDepositControl } from '../organisms/StockDepositControl'\nimport { StockDepositLoader } from '../organisms/StockDepositLoader'\n\ninterface IProps {}\n\nexport const StockDepositPage: React.FC<IProps> = props => (\n  <FullPageLayout pageTitle={i18n.t`Stock deposit`} useBackButton={true}>\n    <Card>\n      <SettingsCompanyBranchPicker />\n      <StockDepositLoader>\n        {(stockItems, onDeposit) => (\n          <StockDepositControl stockItems={stockItems} onDeposit={onDeposit} />\n        )}\n      </StockDepositLoader>\n    </Card>\n  </FullPageLayout>\n)\n","import React from 'react'\nimport { Index } from 'react-virtualized'\nimport styled from 'styled-components/macro'\n\nimport { DataList } from '../../../atoms/DataList'\nimport { QStockStatsWareUnit } from '../../../graph/generated'\nimport { Colors } from '../../../styling'\n\ninterface IProps {\n  items: RoA<IStockStatsItem>\n}\n\nexport interface IStockStatsItem {\n  code: string\n  wareUnit: QStockStatsWareUnit\n  quantity: number\n  nameLabel: string\n  branches: Array<IStockStatsBranchItem>\n  showNamePerBranch: boolean\n}\n\ninterface IStockStatsBranchItem {\n  stockItemId: ID\n  branchName: string\n  quantity: number\n  itemNameAtBranch: string\n}\n\nconst itemLineHeight = 20\nconst branchItemLineHeight = 20\nconst lineSpacing = 15\n\nconst StyledStockStatisticsTable = styled.div`\n  margin: 1rem;\n\n  & .stock-item {\n    display: grid;\n    grid-gap: 0 4px;\n    grid-template-columns: 5rem 1fr;\n    grid-template-rows: ${itemLineHeight}px auto;\n  }\n  & .code {\n    grid-column: 1;\n    grid-row: 1;\n  }\n  & .header {\n    grid-column: 2;\n    grid-row: 1;\n    white-space: nowrap;\n    border-bottom: 1px solid ${Colors.greyMiddle};\n    & .quantity {\n      font-weight: bold;\n    }\n  }\n  & .branches {\n    grid-column: 2;\n    grid-row: 2;\n    margin-top: 0.2rem;\n  }\n  & .header,\n  & .branchItem {\n    display: flex;\n    flex-direction: row;\n  }\n  & .header .name,\n  & .branches .branchName {\n    flex: 1 1 auto;\n    max-width: 20rem;\n  }\n  & .header .quantity,\n  & .branches .quantity {\n    flex: 0 0 5rem;\n    margin-right: 1rem;\n    text-align: right;\n  }\n  & .branchItem,\n  & .header .quantity {\n    font-size: 0.9rem;\n  }\n  & .branchItem {\n    height: ${branchItemLineHeight}px;\n    overflow: hidden;\n  }\n  & .branchName {\n    color: ${Colors.greyMiddle};\n  }\n  & .nameAtBranch {\n    flex: 2 1 auto;\n    color: ${Colors.greyMiddle};\n  }\n`\n\nexport const StockStatisticsTable: React.FC<IProps> = ({ items }) => {\n  function getRowHeight({ index }: Index) {\n    return (\n      itemLineHeight +\n      lineSpacing +\n      items[index].branches!.length * branchItemLineHeight\n    )\n  }\n\n  return (\n    <DataList\n      items={items}\n      rowHeight={getRowHeight}\n      heightStretch={true}\n      renderItem={item => (\n        <StyledStockStatisticsTable>\n          <div className=\"stock-item\">\n            <div className=\"code\">{item.code}</div>\n            <div className=\"header\">\n              <div className=\"name\">{item.nameLabel}</div>\n              <div className=\"quantity\">\n                {item.quantity} {item.wareUnit.code}\n              </div>\n              <div className=\"nameAtBranch\">&nbsp;</div>\n            </div>\n            <div className=\"branches\">\n              {item.branches.map(branchItem => (\n                <div className=\"branchItem\" key={branchItem.branchName}>\n                  <div className=\"branchName\">{branchItem.branchName}</div>\n                  <div className=\"quantity\">\n                    {branchItem.quantity} {item.wareUnit.code}\n                  </div>\n                  {item.showNamePerBranch && (\n                    <div className=\"nameAtBranch\">\n                      {branchItem.itemNameAtBranch}\n                    </div>\n                  )}\n                </div>\n              ))}\n            </div>\n          </div>\n        </StyledStockStatisticsTable>\n      )}\n    />\n  )\n}\n","import { RM } from '@speedlo/tools'\nimport { observer } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { Loading } from '../../../atoms/Loading'\nimport { useRoot } from '../../../atoms/RootProvider'\nimport { QStockStatsStockItems, useQStockStats } from '../../../graph/generated'\nimport { isPartialMatch } from '../../../helpers/filter'\nimport {\n  IStockStatsItem,\n  StockStatisticsTable,\n} from '../molecules/StockStatisticsTable'\n\nexport const StockStatisticsContent = observer(() => {\n  const { statistics } = useRoot()\n\n  const { data, loading } = useQStockStats(\n    {\n      brandId: statistics.stockBrandId!,\n    },\n    { skip: !statistics.stockBrandId },\n  )\n\n  if (!statistics.stockBrandId) return null\n\n  if (loading) return <Loading />\n\n  const searchValue = statistics.stockSearchInput\n  const partialMatch = isPartialMatch(searchValue)\n  const filterItems = RM.cond([\n    [RM.propEq('plu', searchValue), RM.T],\n    [RM.propSatisfies(partialMatch, 'code'), RM.T],\n    [RM.propSatisfies(partialMatch, 'nameLabel'), RM.T],\n  ])\n\n  const sortItems = RM.sortWith<QStockStatsStockItems>([\n    RM.ascend(RM.prop('code')),\n  ])\n\n  const items = sortItems(data.stockItems.filter(filterItems)).reduce(\n    (accItems, stock) => {\n      const existingItem = accItems.find(\n        ({ code, wareUnit }) =>\n          code === stock.code && wareUnit.id === stock.wareUnit.id,\n      )\n      const branchItem = {\n        stockItemId: stock.id,\n        quantity: stock.quantity,\n        branchName: stock.companyBranch.name,\n        itemNameAtBranch: stock.nameLabel,\n      }\n\n      if (!existingItem) {\n        accItems.push({\n          code: stock.code,\n          wareUnit: stock.wareUnit,\n          nameLabel: stock.nameLabel,\n          showNamePerBranch: false,\n          branches: [branchItem],\n          quantity: stock.quantity,\n        })\n      } else {\n        existingItem.branches.push(branchItem)\n        if (existingItem.nameLabel !== stock.nameLabel) {\n          existingItem.showNamePerBranch = true\n        }\n      }\n      return accItems\n    },\n    [] as IStockStatsItem[],\n  )\n\n  return <StockStatisticsTable items={items} />\n})\n","import { i18n } from '@lingui/core'\nimport { Search, Store } from '@material-ui/icons'\nimport { idPropEq } from '@speedlo/tools'\nimport { useObserver } from 'mobx-react-lite'\nimport React from 'react'\nimport styled from 'styled-components/macro'\n\nimport { FlexColumn } from '../../../atoms/FlexColumn'\nimport { FlexRowSingle } from '../../../atoms/FlexRowSingle'\nimport { FormInputStyled } from '../../../atoms/FormInputStyled'\nimport { IconLine } from '../../../atoms/IconLine'\nimport { MarginBox } from '../../../atoms/MarginBox'\nimport { useRoot } from '../../../atoms/RootProvider'\nimport { Sizer } from '../../../atoms/Sizer'\nimport { CompanyBrandDropdown } from '../../../molecules/CompanyBrandDropdown'\n\nconst StyledFlexRowSingle = styled(FlexRowSingle)`\n  flex-wrap: wrap;\n`\n\nexport const StockStatisticsFilter = () => {\n  const { user, statistics } = useRoot()\n\n  return useObserver(() => (\n    <StyledFlexRowSingle justify=\"flex-start\">\n      <FlexColumn>\n        <MarginBox margin=\"0 1rem 0 0\">\n          <IconLine icon={Store}>\n            <Sizer width={16}>\n              <CompanyBrandDropdown\n                selectedBrand={\n                  user.brands.find(idPropEq(statistics.stockBrandId)) || null\n                }\n                onSelection={brand => {\n                  statistics.setStockBrand(brand ? brand.id : null)\n                }}\n              />\n            </Sizer>\n          </IconLine>\n        </MarginBox>\n      </FlexColumn>\n      <FlexColumn>\n        <IconLine icon={Search}>\n          <Sizer width={14}>\n            <FormInputStyled\n              defaultValue={statistics.stockSearchInput}\n              inputFullWidth={true}\n              onChange={ev => statistics.setStockFilter(ev.target.value)}\n              placeholder={i18n.t`Filter by name or code`}\n            />\n          </Sizer>\n        </IconLine>\n      </FlexColumn>\n    </StyledFlexRowSingle>\n  ))\n}\n","import React from 'react'\n\nimport { Card } from '../../../atoms/Card'\nimport { i18n } from '../../../i18n'\nimport { FullPageLayout } from '../../../molecules/FullPageLayout'\nimport { PageLayoutFullHeightItem } from '../../../molecules/PageLayoutFullHeightItem'\nimport { StyledFilterWithTableContainer } from '../../menu/pages/MenuRecipeListPage'\nimport { StockStatisticsContent } from '../organisms/StockStatisticsContent'\nimport { StockStatisticsFilter } from '../molecules/StockStatisticsFilter'\n\nexport const StockStatisticsPage: React.FC = () => (\n  <FullPageLayout pageTitle={i18n.t`Stock statistics`} useBackButton={true}>\n    <PageLayoutFullHeightItem forcePercentHeightInMobile={100}>\n      <Card stretchToParent={true}>\n        <StyledFilterWithTableContainer>\n          <div className=\"filter\">\n            <StockStatisticsFilter />\n          </div>\n          <div className=\"table\">\n            <StockStatisticsContent />\n          </div>\n        </StyledFilterWithTableContainer>\n      </Card>\n    </PageLayoutFullHeightItem>\n  </FullPageLayout>\n)\n","import { useRoot } from '../../../atoms/RootProvider'\n\nexport function useTransferModel() {\n  const {\n    stock: { transfer },\n  } = useRoot()\n  return transfer\n}\n","import { Trans } from '@lingui/macro'\nimport { observer } from 'mobx-react-lite'\nimport React from 'react'\nimport styled from 'styled-components'\n\nimport { mediaDesktop, mediaMobile } from '../../../app/Responsive'\nimport { useMCreateTransfers } from '../../../graph/generated'\nimport { useCanMutate } from '../../../hooks/useAccessGuard'\nimport { useSnackBar } from '../../../hooks/useSnackBar'\nimport { i18n } from '../../../i18n'\nimport { TouchButton } from '../../../molecules/TouchButton'\nimport { Colors, Spacing } from '../../../styling'\nimport { useTransferModel } from '../hooks/useTransferModel'\nimport { MIN_TRANSFER_QUANTITY } from '../models/StockTransferItem'\nimport { TStockTransferModel } from '../models/StockTransferModel'\n\nconst StyledConfirmTransferButton = styled.div`\n  flex: 0 0 auto;\n  ${mediaDesktop`\n    margin-left: 3rem;\n    width: 16rem;\n  `};\n  @media (max-width: 760px) {\n    width: unset;\n    margin-left: ${Spacing.Middle};\n  }\n  ${mediaMobile`\n    margin-left: ${Spacing.Middle};\n  `};\n`\n\nexport const ConfirmTransferButton = observer(() => {\n  const transfer = useTransferModel()\n  const { enqueueSuccess } = useSnackBar()\n  const [createTransfers] = useMCreateTransfers()\n  const canTransferStockItems = useCanMutate('createStockItemTransfers')\n\n  const onConfirm = React.useCallback(async () => {\n    const targetBranch = transfer.targetId\n    const transfers = transfer.itemsForTransfer.map(item => ({\n      stockItemId: item.id,\n      quantity: item.quantity || MIN_TRANSFER_QUANTITY,\n    }))\n\n    if (transfers.length > 0 && targetBranch) {\n      const transferVariables = {\n        targetBranch,\n        transfers,\n      }\n\n      const result = await createTransfers(transferVariables)\n\n      if (result) {\n        enqueueSuccess(i18n.t`Transfer was successfully completed!`)\n        transfer.clearTransferState()\n      }\n    }\n  }, [createTransfers, enqueueSuccess, transfer])\n\n  if (!canTransferStockItems) {\n    return null\n  }\n\n  const validTransfer = isValidTransfer(transfer)\n  return (\n    <StyledConfirmTransferButton>\n      <TouchButton\n        color={Colors.green}\n        onClick={onConfirm}\n        disabled={!validTransfer}\n      >\n        {transfer.isImportMode ? (\n          <Trans>Confirm import</Trans>\n        ) : (\n          <Trans>Confirm transfer</Trans>\n        )}\n      </TouchButton>\n    </StyledConfirmTransferButton>\n  )\n})\n\nfunction isValidTransfer(transfer: TStockTransferModel) {\n  if (!transfer.hasTarget) {\n    return false\n  }\n\n  const transfers = transfer.itemsForTransfer\n  if (transfers.length === 0) {\n    return false\n  }\n\n  const hasInvalidItem = transfers.some(item => item.isQuantityValid === false)\n  if (hasInvalidItem) {\n    return false\n  }\n\n  return true\n}\n","import React from 'react'\n\nimport { MarginBox } from '../../../atoms/MarginBox'\nimport { StyledCheckbox } from '../../../atoms/StyledCheckbox'\n\ninterface IProps {\n  checked: boolean\n  onChange: () => void\n  disabled?: boolean\n  sideText?: string | ReactNode\n}\n\nexport const ImportCheckbox: React.FC<IProps> = ({ sideText, ...props }) => (\n  <>\n    <MarginBox margin=\"0 10px 0 0\">\n      <StyledCheckbox>\n        <input type=\"checkbox\" {...props} />\n      </StyledCheckbox>\n    </MarginBox>\n    {sideText}\n  </>\n)\n","import { Trans } from '@lingui/macro'\nimport { observer } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { Sizer } from '../../../atoms/Sizer'\nimport { ImportCheckbox } from '../atoms/ImportCheckbox'\nimport { useTransferModel } from '../hooks/useTransferModel'\n\nexport const ImportModeToggle = observer(() => {\n  const transfer = useTransferModel()\n\n  return (\n    <>\n      <ImportCheckbox\n        checked={transfer.isImportMode}\n        onChange={transfer.toggleImportMode}\n      />\n      <Sizer width={10}>\n        <Trans>Enable import mode</Trans>\n      </Sizer>\n    </>\n  )\n})\n","import { observer } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { FormInputStyled } from '../../../atoms/FormInputStyled'\nimport { i18n } from '../../../i18n'\nimport { numberRx } from '../../../locale/numeral'\nimport { useTransferModel } from '../hooks/useTransferModel'\n\ninterface IProps {\n  stockItemId: ID\n}\n\nexport const StockTransferAmountInput = observer<IProps>(({ stockItemId }) => {\n  const transfer = useTransferModel()\n\n  const inputRef = React.useRef<HTMLInputElement | null>(null)\n\n  const onChange = React.useCallback(\n    (ev: React.ChangeEvent<HTMLInputElement>) => {\n      const { value } = ev.target\n      transfer.setQuantity(stockItemId, value)\n    },\n    [stockItemId, transfer],\n  )\n\n  const onFocus = React.useCallback(() => {\n    if (inputRef.current) {\n      inputRef.current.select()\n    }\n  }, [])\n\n  return (\n    <FormInputStyled\n      type=\"text\"\n      inputFullWidth={true}\n      value={transfer.getItemRawQuantity(stockItemId)}\n      disabled={!transfer.hasTarget}\n      onChange={onChange}\n      onFocus={onFocus}\n      placeholder={i18n.t`to transfer`}\n      pattern={numberRx.source}\n      invalid={!transfer.isItemQuantityValid(stockItemId)}\n    />\n  )\n})\n","import { Trans } from '@lingui/macro'\nimport { cn } from '@speedlo/ui'\nimport { Observer, observer } from 'mobx-react-lite'\nimport React from 'react'\nimport { TableCellProps } from 'react-virtualized'\nimport styled from 'styled-components'\n\nimport { Column, DataTable } from '../../../atoms/DataTable'\nimport { Loading } from '../../../atoms/Loading'\nimport { Sizer } from '../../../atoms/Sizer'\nimport { i18n } from '../../../i18n'\nimport { ImportCheckbox } from '../../stock/atoms/ImportCheckbox'\nimport { useTransferModel } from '../../stock/hooks/useTransferModel'\nimport { StockTransferAmountInput } from '../../stock/molecules/StockTransferAmountInput'\nimport { useStockTransferLoader } from '../hooks/useStockTransferLoader'\n\nconst ANIMATION_DURATION = '0.3s'\nconst ANIMATED_COLUMN_WIDTH = 140\n\nconst StyledDataTable = styled(DataTable)`\n  [aria-label='grid']:focus {\n    outline: none;\n  }\n\n  [role='columnheader'] {\n    display: flex;\n    align-items: center;\n    overflow: hidden;\n  }\n\n  .flex-animation,\n  [role='columnheader'] {\n    transition: flex ${ANIMATION_DURATION};\n  }\n`\n\nconst VerticallyCenteredFlexContainer = styled.div`\n  display: flex;\n  align-items: center;\n`\n\nexport const StockTransferTable: React.FC = observer(() => {\n  const transfer = useTransferModel()\n\n  const renderImportItemCheckbox = React.useCallback(\n    ({ cellData: itemId }: TableCellProps) => (\n      <Observer>\n        {() => (\n          <ImportCheckbox\n            checked={transfer.isImportingItem(itemId)}\n            disabled={!transfer.hasTarget}\n            onChange={() => transfer.toggleImportItem(itemId)}\n            data-testid=\"import-checkbox\"\n          />\n        )}\n      </Observer>\n    ),\n    [transfer],\n  )\n\n  const renderImportAllHeader = React.useCallback(\n    () => (\n      <Observer>\n        {() => (\n          <ImportCheckbox\n            checked={transfer.isImportingAll}\n            disabled={!transfer.hasTarget}\n            onChange={transfer.toggleImportAll}\n            sideText={<Trans>Import</Trans>}\n            data-testid=\"import-all-checkbox\"\n          />\n        )}\n      </Observer>\n    ),\n    [transfer],\n  )\n\n  const renderAmountInput = React.useCallback(\n    ({ cellData }: TableCellProps) => {\n      const itemId = cellData as ID\n      return (\n        <Observer>\n          {() => (\n            <VerticallyCenteredFlexContainer>\n              <Sizer width={6} margin=\"0 0.5rem 0 0\">\n                <StockTransferAmountInput stockItemId={itemId} />\n              </Sizer>\n            </VerticallyCenteredFlexContainer>\n          )}\n        </Observer>\n      )\n    },\n    [],\n  )\n\n  const { filteredItems, isLoading } = useStockTransferLoader()\n\n  return (\n    <StyledDataTable\n      items={filteredItems}\n      heightStretch={true}\n      noRowsRenderer={() =>\n        isLoading ? (\n          <Loading />\n        ) : (\n          <h3>\n            <Trans>Selected branch has no stock cards</Trans>\n          </h3>\n        )\n      }\n    >\n      <Column\n        dataKey=\"id\"\n        width={transfer.isTransferMode ? ANIMATED_COLUMN_WIDTH : 0}\n        label={i18n.t`Amount`}\n        cellRenderer={renderAmountInput}\n        className=\"flex-animation\"\n        headerClassName={cn({ 'data-testid-amount': transfer.isTransferMode })}\n      />\n      <Column\n        dataKey=\"id\"\n        width={transfer.isImportMode ? ANIMATED_COLUMN_WIDTH : 0}\n        label={i18n.t`Import`}\n        headerRenderer={renderImportAllHeader}\n        cellRenderer={renderImportItemCheckbox}\n        className=\"flex-animation\"\n        headerClassName={cn({ 'data-testid-import': transfer.isImportMode })}\n      />\n      <Column\n        dataKey=\"quantity\"\n        width={100}\n        label={i18n.t`Card stock`}\n        cellRenderer={stockWithUnit}\n      />\n      <Column dataKey=\"code\" width={100} label={i18n.t`Card code`} />\n      <Column\n        dataKey=\"nameLabel\"\n        width={300}\n        minWidth={30}\n        flexGrow={2}\n        label={i18n.t`Card name`}\n      />\n      <Column\n        dataKey=\"allowNegativeValue\"\n        width={300}\n        label={i18n.t`Negative stock`}\n        cellRenderer={stockAllowNegative}\n      />\n    </StyledDataTable>\n  )\n})\n\nfunction stockWithUnit({ cellData, rowData }: TableCellProps) {\n  return `${cellData} ${rowData.wareUnit.code}`\n}\n\nfunction stockAllowNegative({ cellData }: TableCellProps) {\n  return cellData === true ? <Trans>Permitted</Trans> : <Trans>Forbidden</Trans>\n}\n","import React from 'react'\n\nimport {\n  QStockForTransferStockItems,\n  useQStockForTransfer,\n} from '../../../graph/generated'\nimport { useTransferModel } from './useTransferModel'\n\nexport type TStockTransferItem = QStockForTransferStockItems\n\nexport function useStockTransferLoader() {\n  const transfer = useTransferModel()\n\n  const { data, loading } = useQStockForTransfer({\n    branchId: transfer.sourceId,\n  })\n\n  React.useEffect(() => {\n    if (loading) {\n      return\n    }\n\n    const itemsToInit = data.stockItems.map(item => {\n      const max =\n        item.allowNegativeValue === true\n          ? Number.MAX_SAFE_INTEGER\n          : Math.max(item.quantity, 0)\n\n      return { id: item.id, max }\n    })\n\n    transfer.initItems(itemsToInit)\n  }, [data.stockItems, loading, transfer])\n\n  const filterItems = transfer.filter.getPredicate<TStockTransferItem>({\n    exactMatch: ['plu'],\n    partialMatch: ['code', 'nameLabel'],\n  })\n\n  return {\n    isLoading: loading,\n    filteredItems: loading ? [] : data.stockItems.filter(filterItems),\n  }\n}\n","import React from 'react'\n\nimport { SettingsCompanyBranchPicker } from '../../settings/organisms/SettingsCompanyBranchPicker'\n\nexport const TransferSourceBranchPicker: React.FC = () => {\n  return <SettingsCompanyBranchPicker width={20} />\n}\n","import React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(\"path\", {\n  d: \"M16.01 11H4v2h12.01v3L20 12l-3.99-4z\"\n}), 'ArrowRightAlt');","import { ArrowRightAlt } from '@material-ui/icons'\nimport { idPropEq, RM } from '@speedlo/tools'\nimport { observer } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { IconLine } from '../../../atoms/IconLine'\nimport { useRoot } from '../../../atoms/RootProvider'\nimport { CompanyBranchPicker } from '../../../organisms/CompanyBranchPicker'\nimport { useTransferModel } from '../hooks/useTransferModel'\n\nexport const TransferTargetBranchPicker = observer(() => {\n  const { user } = useRoot()\n  const transfer = useTransferModel()\n\n  const branchesWithoutSourceBranch = RM.reject(\n    idPropEq(transfer.sourceId),\n    user.branches,\n  )\n\n  return (\n    <IconLine icon={ArrowRightAlt}>\n      <CompanyBranchPicker\n        selectedBranches={transfer.targetId ? [transfer.targetId] : []}\n        onSelectionChange={([branch]) => transfer.setTargetId(branch)}\n        onSelectionClear={() => transfer.setTargetId(null)}\n        isMulti={false}\n        isClearable={false}\n        getDropdownProps={() => ({ width: 20 })}\n        hideWhenSingleBranch={true}\n        branches={branchesWithoutSourceBranch}\n      />\n    </IconLine>\n  )\n})\n","import { Trans } from '@lingui/macro'\nimport React from 'react'\nimport styled from 'styled-components'\n\nimport { Card } from '../../../atoms/Card'\nimport { FlexColumn } from '../../../atoms/FlexColumn'\nimport { FlexRowSingle } from '../../../atoms/FlexRowSingle'\nimport { Headline } from '../../../atoms/Headline'\nimport { useRoot } from '../../../atoms/RootProvider'\nimport { FilterInput } from '../../../components/FilterInput/FilterInput'\nimport { useCanMutate } from '../../../hooks/useAccessGuard'\nimport { i18n } from '../../../i18n'\nimport { FullPageLayout } from '../../../molecules/FullPageLayout'\nimport { PageLayoutFullHeightItem } from '../../../molecules/PageLayoutFullHeightItem'\nimport { StyledFilterWithTableContainer } from '../../menu/pages/MenuRecipeListPage'\nimport { useTransferModel } from '../hooks/useTransferModel'\nimport { ConfirmTransferButton } from '../molecules/ConfirmTransferButton'\nimport { ImportModeToggle } from '../molecules/ImportModeToggle'\nimport { StockTransferTable } from '../molecules/StockTransferTable'\nimport { TransferSourceBranchPicker } from '../molecules/TransferSourceBranchPicker'\nimport { TransferTargetBranchPicker } from '../molecules/TransferTargetBranchPicker'\n\nconst StyledTopContainer = styled.div`\n  display: flex;\n`\n\nconst VerticallyCenteredRow = styled(FlexRowSingle)`\n  &,\n  & > * {\n    display: flex;\n    align-items: center;\n  }\n`\n\nexport const StockTransferPage: React.FC = props => {\n  const { user } = useRoot()\n  const canTransferItems = useCanMutate('createStockItemTransfers')\n  const canAccessPage = canTransferItems && !user.hasSingleBranch\n\n  const { filter } = useTransferModel()\n\n  return (\n    <FullPageLayout\n      pageTitle={i18n.t`Stock transfer`}\n      useBackButton={true}\n      topContent={\n        <StyledTopContainer>\n          <ConfirmTransferButton />\n        </StyledTopContainer>\n      }\n    >\n      <PageLayoutFullHeightItem forcePercentHeightInMobile={100}>\n        <Card stretchToParent={true}>\n          {canAccessPage ? (\n            <StyledFilterWithTableContainer>\n              <div className=\"filter\">\n                <VerticallyCenteredRow justify=\"start\" flexWrap=\"wrap\">\n                  <FlexColumn>\n                    <TransferSourceBranchPicker />\n                  </FlexColumn>\n                  <FlexColumn>\n                    <TransferTargetBranchPicker />\n                  </FlexColumn>\n                  <FlexColumn>\n                    <FilterInput\n                      model={filter}\n                      placeholder={`${i18n.t`Code`.toLocaleLowerCase()} / ${i18n.t`PLU`} / ${i18n.t`Title`.toLocaleLowerCase()}`}\n                      debounceIntervalMs={200}\n                    />\n                  </FlexColumn>\n                  <FlexColumn>\n                    <ImportModeToggle />\n                  </FlexColumn>\n                </VerticallyCenteredRow>\n              </div>\n              <div className=\"table\">\n                <StockTransferTable />\n              </div>\n            </StyledFilterWithTableContainer>\n          ) : (\n            <Headline>\n              <Trans>Can't access page</Trans>\n            </Headline>\n          )}\n        </Card>\n      </PageLayoutFullHeightItem>\n    </FullPageLayout>\n  )\n}\n","import React from 'react'\nimport { Redirect, Route, Switch } from 'react-router-dom'\n\nimport { NotFoundPage } from '../../../pages/NotFoundPage'\nimport { SecureRoute } from '../../../routes/SecureRoute'\nimport { ROUTE_MENU_STOCK } from '../../menu/menu.routes'\nimport { StockDashboardPage } from '../../dashboard/pages/StockDashboardPage'\nimport { StockDepositPage } from '../pages/StockDepositPage'\nimport { StockStatisticsPage } from '../pages/StockStatisticsPage'\nimport { StockTransferPage } from '../pages/StockTransferPage'\nimport {\n  ROUTE_STOCK,\n  ROUTE_STOCK_DEPOSIT,\n  ROUTE_STOCK_OVERVIEW,\n  ROUTE_STOCK_STATS,\n  ROUTE_STOCK_TRANSFER,\n} from '../stock.routes'\n\nexport const StockRouting: React.FC = () => (\n  <Switch>\n    <SecureRoute path={ROUTE_STOCK} exact component={StockDashboardPage} />\n    <SecureRoute path={ROUTE_STOCK_STATS} component={StockStatisticsPage} />\n    <SecureRoute path={ROUTE_STOCK_TRANSFER} component={StockTransferPage} />\n    <SecureRoute path={ROUTE_STOCK_DEPOSIT} component={StockDepositPage} />\n    <Redirect to={ROUTE_MENU_STOCK} from={ROUTE_STOCK_OVERVIEW} />\n    <Route component={NotFoundPage} />\n  </Switch>\n)\n\nexport default StockRouting\n"],"sourceRoot":""}