(this.webpackJsonpspeedlo=this.webpackJsonpspeedlo||[]).push([[379],{1371:function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"e",(function(){return u})),n.d(t,"a",(function(){return d}));var r=n(1370),a=n(36),i=n(259);function o(e){return!e.errors||0===Object.keys(e.errors).length}function c(e){return a.b._("Field {fieldDescription} cannot be empty",{fieldDescription:e})}function l(e){return a.b._("Field {fieldDescription} must be a positive number",{fieldDescription:e})}var u=function(e){return r.j.number().default(0).transform((function(e,t){return Object(i.b)(t)})).test("number-field",function(e){return a.b._("Field {fieldDescription} must be a number",{fieldDescription:e})}(e),(function(e){return!isNaN(e)}))},d=[]},1372:function(e,t,n){"use strict";var r=n(4),a=n(0),i=n.n(a),o=n(39),c=Object(o.a)(i.a.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"}),"Error"),l=n(1375),u=n(18),d=n(45),s=n(42),m=n(14),f=n(1410),p=n(240);function b(){var e=Object(r.a)(["\n  grid-column: content;\n  margin-left: 0.5rem;\n"]);return b=function(){return e},e}function v(){var e=Object(r.a)(["\n  grid-column: content;\n  justify-self: start;\n  margin: ",";\n  "]);return v=function(){return e},e}function h(){var e=Object(r.a)(["\n  grid-column: desc;\n  margin: ",";\n\n  div.label {\n    padding-top: 0.2rem;\n    display: inline-block;\n    &.smallCaps {\n      font-variant-caps: all-petite-caps;\n    }\n  }\n\n  ",";\n"]);return h=function(){return e},e}function g(){var e=Object(r.a)(["\n  display: flex;\n\n  div.description {\n    margin: ",";\n    min-width: ",";\n    flex: 0 0 auto;\n    text-align: right;\n  }\n\n  div.contents {\n    margin-left: 0.5rem;\n    align-self: stretch;\n    flex: 1 1 auto;\n  }\n\n  div.label {\n    padding-top: 0.2rem;\n    display: inline-block;\n    &.smallCaps {\n      font-variant-caps: all-petite-caps;\n    }\n  }\n"]);return g=function(){return e},e}n.d(t,"a",(function(){return C}));var E=u.c.div(g(),(function(e){return e.labelMargin}),(function(e){var t=e.labelWidth,n=e.labelWidthUnits;return"".concat(t).concat(n)})),O=u.c.div(h(),(function(e){return e.labelMargin}),Object(d.d)(v(),(function(e){return e.labelMargin.replace("auto","0.7rem")}))),y=u.c.div(b()),C=function(e){var t=e.icon,n=e.label,r=e.labelWidth,a=void 0===r?0:r,o=e.labelWidthUnits,u=void 0===o?m.d.DefaultSizeUnit:o,d=e.labelMargin,b=void 0===d?"0.5rem 0.2rem 0 auto":d,v=e.labelSmallCaps,h=void 0===v||v,g=e.children,C=t;"string"===typeof t&&(Object(s.b)('IconLine: Do not use icon prop as string! Replace "'.concat(t,'" with the one imported from @material-ui/icons.')),C=c);var j=Object(f.b)(),w=i.a.createElement(i.a.Fragment,null,i.a.createElement(p.a,{icon:C,color:m.a.greyDark}),n?i.a.createElement("div",{className:Object(l.b)("label",{smallCaps:h})},n):null);return j?i.a.createElement(i.a.Fragment,null,i.a.createElement(O,{labelMargin:b},w),i.a.createElement(y,null,g)):i.a.createElement(E,{labelWidth:a,labelWidthUnits:u,labelMargin:b},i.a.createElement("div",{className:"description"},w),i.a.createElement("div",{className:"contents"},g))}},1373:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return o}));var r=n(40);function a(e,t){var n=Object(r.b)().user;return e.every(n.canQuery)&&t.every(n.canMutate)}function i(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return a(t,[])}function o(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return a([],t)}},1374:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(65),a=n(89),i=n(0),o=n.n(i),c=n(1462),l=n(36),u=n(14),d=n(1405);function s(e){var t=e.width,n=e.minWidth,r=!0===e.invalid?{border:"1px solid ".concat(u.a.red),backgroundColor:u.a.errorBackground}:{border:"1px solid ".concat(u.a.greyMiddle)};return Object(a.a)({},r,{margin:u.d.MarginAroundFormComponents,width:void 0!==t?"".concat(t,"rem"):"100%",minWidth:void 0!==n?"".concat(n,"rem"):"8rem"})}var m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(a.a)({},e,{control:function(t,n){var r=Object(a.a)({},t,{},s(n.selectProps));return e.control?e.control(r,n):r},menu:function(t,n){var r=n.selectProps.width,i=Object(a.a)({},t,{zIndex:20,color:u.a.black,width:void 0!==r?"".concat(r,"rem"):"100%"});return e.menu?e.menu(i,n):i},valueContainer:function(t,n){var r=n.selectProps.maxHeight,i=Object(a.a)({},t,{maxHeight:void 0!==r?"".concat(r,"rem"):"100%",overflowY:void 0!==r?"scroll":"hidden"});return e.valueContainer?e.valueContainer(i,n):i},clearIndicator:function(e){return Object(a.a)({},e,{cursor:"pointer"})}})};function f(e){var t=e.hideOnSingleOption,n=void 0!==t&&t,i=e.clearLabel,l=Object(r.a)(e,["hideOnSingleOption","clearLabel"]);return n&&l.options&&l.options.length<=1?null:o.a.createElement(d.a,{toPrint:function(){if(!l.value)return null;var e=l.getOptionLabel||l.formatOptionLabel;if(!e)return null;var t=Array.isArray(l.value)?l.value.map(e):e(l.value);return 0===t.length?null:o.a.createElement("div",null,"".concat(l.placeholder,": ").concat(t))}()},o.a.createElement(c.a,Object.assign({},l,{components:Object(a.a)({ClearIndicator:p(i)},l.components),styles:m(l.styles)})))}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.b._("All");return function(t){var n=t.getStyles,a=t.innerProps,i=a.ref,c=Object(r.a)(a,["ref"]);return o.a.createElement("div",Object.assign({},c,{ref:i,style:n("clearIndicator",t)}),o.a.createElement("div",{style:{padding:"0px 5px"}},e))}}},1383:function(e,t,n){"use strict";n.d(t,"c",(function(){return b})),n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return h}));var r=n(89),a=n(46),i=n(47),o=n(0),c=n.n(o),l=n(1374),u=n(177),d=n(1397),s=n(1451),m=n(1390),f=n(36),p=n(20),b=Object(i.d)("branches",[]),v=c.a.memo((function(){var e=Object(m.a)(),t=b(),n=Object(a.a)(t,2),i=n[0],o=n[1],v={options:e.branches,placeholder:f.b._("Filter branches..."),formatOptionLabel:u.b,getOptionValue:p.b,hideOnSingleOption:!0},h=Object(s.a)(Object(r.a)({},v,{onSelectionChange:o,selected:i})),g=Object(d.a)({getOptionFilter:u.b});return c.a.createElement(l.a,Object.assign({},h,g,v))}));function h(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=Object(m.a)(),n=b(),r=Object(a.a)(n,2),i=r[0],o=r[1],l=i.join("|"),u=c.a.useMemo((function(){return p.a.intersection(t.branchesId,i)}),[l,t.branchesId]),d=i.length>0,s=i.length===u.length;c.a.useEffect((function(){d&&!s&&o(u)}),[s,d,u,o]);var f=0===u.length;(1===t.branchesId.length||f&&e)&&(u=t.branchesId);var v=u.join("|");return c.a.useMemo((function(){return u}),[v])}},1388:function(e,t,n){"use strict";var r=n(4),a=n(18),i=n(0),o=n.n(i),c=n(45);function l(){var e=Object(r.a)(["\n  overflow-y: auto;\n  -webkit-overflow-scrolling: touch;\n  height: 100%;\n"]);return l=function(){return e},e}var u=a.c.div(l()),d=n(158),s=n(14);function m(){var e=Object(r.a)(["\n    margin: 0;\n    grid-row: "," ;\n    grid-column: span 16;\n    height: "," ;\n    position: relative;\n  "]);return m=function(){return e},e}function f(){var e=Object(r.a)(["\n  position: fixed;\n  bottom: 0.5rem;\n  width: ",";\n  left: ",";\n  top: ",";"]);return f=function(){return e},e}n.d(t,"a",(function(){return b}));var p=a.c.div.withConfig({displayName:"StyledPageLayoutFullHeightItem",componentId:"sc-1mean6j-0"})([""," ",""],Object(c.c)(f(),(function(e){return void 0!==e.widthInColumns?"calc(("+e.widthInColumns+" * 6.22vw) - "+s.d.LayoutGridCellMargin+")":"calc(100vh - (2 * "+s.d.LayoutGridCellMargin+"))"}),(function(e){return void 0!==e.column?"calc(("+e.column+" * 6.22vw) + "+s.d.LayoutGridCellMargin+")":s.d.LayoutGridCellMargin}),(function(e){return void 0!==e.row?"calc(("+e.row+" * 3.9375rem) + "+s.d.LayoutGridCellMargin+")":"calc(3.9375rem + "+s.d.LayoutGridCellMargin+")"})),Object(c.d)(m(),(function(e){return e.rowInMobile}),(function(e){var t=e.forcePercentHeightInMobile;return t?"calc(".concat(t,"vh - ").concat(s.d.PageHeaderHeight+.25+s.d.DefaultSizeUnit,")"):"unset"}))),b=function(e){var t=e.children,n=e.row,r=void 0===n?1:n,a=e.rowInMobile,i=void 0===a?16:a,l=e.column,s=void 0===l?0:l,m=e.widthInColumns,f=void 0===m?16:m,b=e.withScrollArea,v=void 0!==b&&b,h=e.scrollAreaId,g=e.forcePercentHeightInMobile,E=Object(c.f)().isMobile;return o.a.createElement(p,{column:s,row:r,rowInMobile:i,widthInColumns:f,withScrollArea:v,forcePercentHeightInMobile:g},v&&!E?o.a.createElement(u,{id:h},t):o.a.createElement(d.a,{height:100,heightUnit:"%"},t))}},1390:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(40);function a(){return Object(r.b)().user}},1397:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(0),a=n.n(r);function i(e){var t=e.getOptionFilter,n="function"===typeof t;return{filterOption:a.a.useCallback((function(e,n){return!t||0===n.length||t(e.data).toLocaleLowerCase().includes(n.toLocaleLowerCase())}),[t]),isSearchable:n}}},1400:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(4),a=n(0),i=n.n(a),o=n(18),c=n(14);function l(){var e=Object(r.a)(["\n  border-top: 1px solid ",";\n  margin: 0.25rem 0rem;\n"]);return l=function(){return e},e}var u=o.c.div(l(),c.a.greyLight),d=function(e){var t=e.visible;return void 0===t||t?i.a.createElement(u,null):null}},1404:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4);function a(){var e=Object(r.a)(["\n  height: ",";\n"]);return a=function(){return e},e}var i=n(18).c.div(a(),(function(e){var t=e.size,n=void 0===t?1:t,r=e.sizeUnit,a=void 0===r?"rem":r;return"".concat(n).concat(a)}));i.displayName="VerticalGap"},1405:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(18),a=n(0),i=n.n(a),o=r.c.div.withConfig({displayName:"StyledPrinter",componentId:"sc-1fceaer-0"})(["& .toPrint{display:none;}@media print{& .toPrint{display:inline-block;}& .noPrint{display:none;}}"]),c=function(e){return i.a.createElement(o,null,i.a.createElement("div",{className:"toPrint"},e.toPrint),i.a.createElement("div",{className:"noPrint"},e.children))}},1410:function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return f}));var r=n(4),a=n(18),i=n(0),o=n.n(i),c=n(45);function l(){var e=Object(r.a)(["\n    grid-template-columns: 1fr;\n    grid-template-areas:\n      'content';\n  "]);return l=function(){return e},e}var u=a.c.div.withConfig({displayName:"StyledFormGrid",componentId:"gzj657-0"})(["display:grid;grid-template-columns:0.1fr [desc] auto [content] 1fr;grid-template-areas:'. desc content';grid-auto-flow:row dense;",";"],Object(c.d)(l())),d=0,s=o.a.createContext(d),m=function(e){return o.a.createElement(u,null,o.a.createElement(s.Provider,{value:++d},e.children))};function f(){return o.a.useContext(s)>0}},1413:function(e,t,n){var r={"./af.svg":1414,"./cs.svg":1415,"./de.svg":1416,"./en.svg":1417,"./es.svg":1418,"./fr.svg":1419,"./nl.svg":1420,"./pl.svg":1421,"./ru.svg":1422,"./sk.svg":1423,"./zu.svg":1424};function a(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=i,e.exports=a,a.id=1413},1425:function(e,t,n){var r={"./logo-doveze.svg":1426,"./logo-gopay.svg":1427,"./logo-mastercard.svg":1428,"./logo-visa.svg":1429};function a(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=i,e.exports=a,a.id=1425},1441:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(61),a=n(387);function i(e){Object(r.d)((function(){return Object(a.b)(e)}))}},1451:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(0),a=n.n(r),i=n(1371);function o(e){var t=e.options,n=e.selected,r=e.onSelectionChange,o=e.getOptionValue;return{value:a.a.useMemo((function(){return Array.isArray(n)?null===t?i.a:t.filter((function(e){return n.includes(o(e))})):null}),[n,t,o]),onChange:function(e){r(e?e.map(o):i.a)},isMulti:!0}}},1452:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(89),a=n(65),i=n(1370),o=n(61),c=n(0),l=n.n(c),u=n(1374),d=n(1397),s=n(1451),m=n(20),f=function(e){var t=e.fieldName,n=e.getOptionValue,c=void 0===n?m.b:n,f=e.getOptionFilter,p=Object(a.a)(e,["fieldName","getOptionValue","getOptionFilter"]),b=Object(i.i)(),v=Object(i.d)(t);return Object(o.g)((function(){var e=Object(d.a)({getOptionFilter:f}),t=Object(s.a)(Object(r.a)({},p,{onSelectionChange:v.setValue,selected:v.value,getOptionValue:c}));return l.a.createElement(u.a,Object.assign({},t,e,p,{onFocus:function(){return v.setTouched()},invalid:v.touched&&v.hasError,isDisabled:b.isSubmitting,getOptionValue:c}))}))}},1460:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=n(18).c.div.withConfig({displayName:"CardDock",componentId:"sc-1fyaqia-0"})(["position:absolute;",";",";"],(function(e){var t=e.position;return"BottomRight"===t||"BottomLeft"===t?"bottom: 0":"top: 0"}),(function(e){var t=e.position;return"BottomLeft"===t||"TopLeft"===t?"left: 0":"right: 0"}))},1481:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return O}));var r,a,i=n(4),o=n(256),c=n(18),l=n(261),u=n(0),d=n.n(u),s=n(14);function m(){var e=Object(i.a)(["\n  cursor: pointer;\n"]);return m=function(){return e},e}function f(){var e=Object(i.a)(["\n  font-size: 1.7rem;\n  line-height: 1.6rem;\n  font-weight: bold;\n"]);return f=function(){return e},e}function p(){var e=Object(i.a)(["\n  font-size: 0.8rem;\n"]);return p=function(){return e},e}!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.CRITICAL=1]="CRITICAL",e[e.WARNING=2]="WARNING",e[e.NORMAL=3]="NORMAL"}(a||(a={}));var b=c.c.div.withConfig({displayName:"StyledTimeBadge",componentId:"zuoyiw-0"})(["height:2rem;line-height:2rem;width:2rem;border-radius:50%;overflow:hidden;border:1px solid ",";color:",";background:",";text-align:center;font-family:'Open Sans',sans-serif;"],s.a.white,s.a.white,s.a.greyMiddle),v=(r={},Object(o.a)(r,a.UNKNOWN,Object(c.c)(b).withConfig({displayName:"UNKNOWN",componentId:"zuoyiw-1"})([""])),Object(o.a)(r,a.CRITICAL,Object(c.c)(b).withConfig({displayName:"CRITICAL",componentId:"zuoyiw-2"})(["background:",";"],s.a.red)),Object(o.a)(r,a.WARNING,Object(c.c)(b).withConfig({displayName:"WARNING",componentId:"zuoyiw-3"})(["background:",";color:",";font-weight:bold;"],s.a.orange,s.a.black)),Object(o.a)(r,a.NORMAL,Object(c.c)(b).withConfig({displayName:"NORMAL",componentId:"zuoyiw-4"})(["background:",";"],s.a.green)),r),h=Object(l.a)(p()),g=Object(l.a)(f()),E=Object(l.a)(m()),O=d.a.forwardRef((function(e,t){var n=e.minutes,r=e.className,i=e.children,o=e.variant,c=e.onClick,u=v[o],s=i,m=["animated"];return void 0!==n&&((n>99||n<-9)&&m.push(h),n<-99?(s="\u2012",m.push(g)):s=n.toString()),c&&m.push(E),d.a.createElement(u,{ref:t,key:n,onClick:c,className:l.b.apply(void 0,[r,{heartBeat:o===a.CRITICAL&&n>0,pulse:o===a.WARNING}].concat(m))},s)}))},1482:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4);function a(){var e=Object(r.a)(["\n  color: inherit;\n  text-decoration-color: rgba(0, 0, 0, 0.08);\n  &:hover {\n    text-decoration-color: rgba(0, 0, 0, 0.5);\n  }\n  &:visited {\n    text-decoration-color: rgba(0, 0, 0, 0.08);\n  }\n"]);return a=function(){return e},e}var i=n(18).c.a(a())},1496:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(18),a=n(14),i=r.c.h2.withConfig({displayName:"CardListTitle",componentId:"dr5aqq-0"})(["color:",";font-weight:lighter;font-size:1.2rem;margin:0.8rem 0 0.8rem 0.3rem;@media print{color:",";}"],a.a.greyLight,a.a.black)},1500:function(e,t,n){"use strict";var r=n(4),a=n(18),i=n(0),o=n.n(i),c=n(39),l=Object(c.a)(o.a.createElement(o.a.Fragment,null,o.a.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z",opacity:".87"}),o.a.createElement("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3.59-13L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41z"})),"CancelOutlined"),u=n(47),d=n(301),s=n(261),m=n(1481),f=n(14);function p(){var e=Object(r.a)(["\n  padding: 0.2rem 0.3rem 0.1rem 0.3rem;\n"]);return p=function(){return e},e}n.d(t,"a",(function(){return h}));var b=Object(s.a)(p()),v=a.c.div.withConfig({displayName:"StyledDelayedTimeMark",componentId:"g9mune-0"})(["background:",";border:2px solid ",";width:0.6rem;height:0.6rem;border-radius:0.7rem;position:absolute;"],f.a.white,f.a.greyMiddle),h=function(e){var t=e.deliverAt,n=e.deliveredAt,r=e.isCancelled,a=void 0!==r&&r,i=e.isDelayed,c=void 0!==i&&i,s=e.onClick,f=!(n||a),p=Object(u.o)({interval:u.b,enabled:f}),h=m.a.UNKNOWN;if(a)return o.a.createElement(m.b,{variant:h,className:b},o.a.createElement(l,null));if(!t)return o.a.createElement(m.b,{variant:h},o.a.createElement("span",{role:"img","aria-label":"Unknown"},"\u2754"));var g=Object(d.a)(t,n||p);return h=g>20?m.a.NORMAL:g>0?m.a.WARNING:m.a.CRITICAL,o.a.createElement(o.a.Fragment,null,c&&o.a.createElement(v,null),o.a.createElement(m.b,{minutes:g,variant:h,onClick:s}))}},1518:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(0),a=n.n(r),i=function(e){var t=e.customer;return t?a.a.createElement("span",null,"".concat(t.lastName?"".concat(t.firstName," ").concat(t.lastName):t.defaultPhone?t.defaultPhone.phone:"")):a.a.createElement("i",null,"unknown")}},1519:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n(18),a=n(1681),i=n(0),o=n.n(i),c=n(1400),l=n(1372),u=n(36),d=n(14),s=r.c.span.withConfig({displayName:"StyledCurrentNote",componentId:"fzcqzs-0"})(["color:",";"],d.a.orange),m=function(e){var t=e.note;return t?o.a.createElement(o.a.Fragment,null,o.a.createElement(c.a,null),o.a.createElement(l.a,{icon:a.a,labelMargin:"0"},o.a.createElement(s,null,t||u.b._("Without note").toLocaleLowerCase()))):null}},1521:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n(89),a=n(256),i=n(160),o=(n(1522),n(1370)),c=n(0),l=n.n(c),u=n(1586),d=n.n(u),s=n(78),m=n(1371),f=n(1390),p=n(36),b=n(20),v=n(1383),h=l.a.memo((function(e){var t=e.texts,n=e.data,r=e.onChange;return l.a.createElement(d.a,{texts:t,data:n,onChange:r})})),g=l.a.memo((function(e){var t=e.markAsAvailable,n=Object(f.a)(),r=Object(v.b)(),a=1===r.length,c=(0,Object(s.Db)({branches:r}).getStash)((function(e){return e.sectors})),u=null!==c&&c.length>0,d=l.a.useMemo((function(){return null===c?null:a?function(e){return O({flatData:e,mapper:function(e){return{label:e.name,value:e.id}},getParentKey:function(e){return e.parent?e.parent.id:null},getKey:function(e){return e.id}})}(c):function(e,t){var n=b.a.groupBy((function(e){return e.companyBranch.id}),e);return O({flatData:[].concat(Object(i.a)(e),Object(i.a)(t.filter((function(e){return n[e.id]&&n[e.id].length>0})))),mapper:function(e){return{label:e.name,id:y(e)?e.id:E(e.id),value:y(e)?e.id:E(e.id)}},getParentKey:function(e){return y(e)?e.parent?e.parent.id:E(e.companyBranch.id):null},getKey:function(e){return y(e)?e.id:E(e.id)}})}(c,n.branches.filter((function(e){return r.includes(e.id)})))}),[r,a,c,n]),m=Object(o.d)("sectors");l.a.useEffect((function(){t&&t(u)}),[u,t]);var g=l.a.useCallback((function(e,t){var n=t.reduce((function(e,t){if(function(e){return e.value.startsWith("branch")}(t)){var n=d.find(Object(b.c)(t.value));n&&n.children&&e.push.apply(e,Object(i.a)(n.children.map(b.b)))}else e.push(t.value);return e}),[]);m.setValue(n)}),[m,d]),C=l.a.useMemo((function(){return{placeholder:p.b._("Filter by sectors"),noMatches:p.b._("No sectors")}}),[]);return u?l.a.createElement(h,{texts:C,data:d,onChange:g}):null}));var E=function(e){return"branch-".concat(e)};function O(e){var t=e.flatData,n=e.mapper,i=e.getKey,o=e.getParentKey;if(!t)return[];var c=Object(a.a)({},"@@",[]);if(t.forEach((function(e){var t=o(e)||"@@";t in c?c[t].push(e):c[t]=[e]})),!("@@"in c))return[];return c["@@"].map((function(e){return function e(t){var a=i(t);return a in c?Object(r.a)({},t,{},n(t),{children:c[a].map((function(t){return e(t)}))}):Object(r.a)({},t,{},n(t),{children:m.a})}(e)}))}function y(e){return Reflect.has(e,"parent")}},1522:function(e,t,n){},1579:function(e,t,n){"use strict";var r=n(8),a=n(17),i=n(0),o=n.n(i),c=(n(19),n(44)),l=n.n(c),u=n(447),d=n(21),s=n(101),m=n(449),f=n(186),p=n(29),b=n(1366),v=n(1352),h=n(979);function g(e,t){var n=0;return"number"===typeof t?n=t:"center"===t?n=e.height/2:"bottom"===t&&(n=e.height),n}function E(e,t){var n=0;return"number"===typeof t?n=t:"center"===t?n=e.width/2:"right"===t&&(n=e.width),n}function O(e){return[e.horizontal,e.vertical].map((function(e){return"number"===typeof e?"".concat(e,"px"):e})).join(" ")}function y(e){return"function"===typeof e?e():e}var C=o.a.forwardRef((function(e,t){var n=e.action,i=e.anchorEl,c=e.anchorOrigin,p=void 0===c?{vertical:"top",horizontal:"left"}:c,C=e.anchorPosition,j=e.anchorReference,w=void 0===j?"anchorEl":j,k=e.children,N=e.classes,I=e.className,x=e.container,M=e.elevation,S=void 0===M?8:M,A=e.getContentAnchorEl,L=e.marginThreshold,R=void 0===L?16:L,P=e.onEnter,H=e.onEntered,z=e.onEntering,T=e.onExit,D=e.onExited,F=e.onExiting,_=e.open,B=e.PaperProps,W=void 0===B?{}:B,V=e.transformOrigin,K=void 0===V?{vertical:"top",horizontal:"left"}:V,U=e.TransitionComponent,G=void 0===U?v.a:U,q=e.transitionDuration,Q=void 0===q?"auto":q,J=e.TransitionProps,Y=void 0===J?{}:J,Z=Object(a.a)(e,["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","classes","className","container","elevation","getContentAnchorEl","marginThreshold","onEnter","onEntered","onEntering","onExit","onExited","onExiting","open","PaperProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"]),X=o.a.useRef(),$=o.a.useCallback((function(e){if("anchorPosition"===w)return C;var t=y(i),n=(t instanceof Object(m.a)(t).Element?t:Object(s.a)(X.current).body).getBoundingClientRect(),r=0===e?p.vertical:"center";return{top:n.top+g(n,r),left:n.left+E(n,p.horizontal)}}),[i,p.horizontal,p.vertical,C,w]),ee=o.a.useCallback((function(e){var t=0;if(A&&"anchorEl"===w){var n=A(e);if(n&&e.contains(n)){var r=function(e,t){for(var n=t,r=0;n&&n!==e;)r+=(n=n.parentElement).scrollTop;return r}(e,n);t=n.offsetTop+n.clientHeight/2-r||0}0}return t}),[p.vertical,w,A]),te=o.a.useCallback((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{vertical:g(e,K.vertical)+t,horizontal:E(e,K.horizontal)}}),[K.horizontal,K.vertical]),ne=o.a.useCallback((function(e){var t=ee(e),n={width:e.offsetWidth,height:e.offsetHeight},r=te(n,t);if("none"===w)return{top:null,left:null,transformOrigin:O(r)};var a=$(t),o=a.top-r.vertical,c=a.left-r.horizontal,l=o+n.height,u=c+n.width,d=Object(m.a)(y(i)),s=d.innerHeight-R,f=d.innerWidth-R;if(o<R){var p=o-R;o-=p,r.vertical+=p}else if(l>s){var b=l-s;o-=b,r.vertical+=b}if(c<R){var v=c-R;c-=v,r.horizontal+=v}else if(u>f){var h=u-f;c-=h,r.horizontal+=h}return{top:"".concat(o,"px"),left:"".concat(c,"px"),transformOrigin:O(r)}}),[i,w,$,ee,te,R]),re=o.a.useCallback((function(e){var t=ne(e);null!==t.top&&(e.style.top=t.top),null!==t.left&&(e.style.left=t.left),e.style.transformOrigin=t.transformOrigin}),[ne]),ae=o.a.useCallback((function(e){X.current=l.a.findDOMNode(e)}),[]),ie=o.a.useMemo((function(){if(_)return Object(u.a)((function(){re(X.current)}))}),[_,re]);o.a.useImperativeHandle(n,(function(){return _?{updatePosition:ie}:null}),[_,ie]),o.a.useEffect((function(){if(ie)return window.addEventListener("resize",ie),function(){window.removeEventListener("resize",ie),ie.clear()}}),[ie]);var oe=Q;"auto"!==Q||G.muiSupportAuto||(oe=void 0);var ce=x||(i?Object(s.a)(y(i)).body:void 0);return o.a.createElement(b.a,Object(r.a)({container:ce,open:_,ref:t,BackdropProps:{invisible:!0},className:Object(d.a)(N.root,I)},Z),o.a.createElement(G,Object(r.a)({appear:!0,in:_,onEnter:P,onEntered:H,onExit:T,onExited:D,onExiting:F,timeout:oe},Y,{onEntering:Object(f.a)((function(e,t){z&&z(e,t),re(e)}),Y.onEntering)}),o.a.createElement(h.a,Object(r.a)({elevation:S,ref:ae},W,{className:Object(d.a)(N.paper,W.className)}),k)))}));t.a=Object(p.a)({root:{},paper:{position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}},{name:"MuiPopover"})(C)},1584:function(e,t,n){e.exports=n.p+"static/media/orderNotification.0aa2ebe9.mp3"},1585:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(0),a=n.n(r),i=n(78),o=n(1371),c=n(36),l=n(20),u=n(1452),d=n(1383),s=a.a.memo((function(e){var t=e.markAsAvailable,n=Object(d.b)(),r=Object(i.Bb)({branches:n}),s=r.getStash,m=r.loading,f=s((function(e){return e.occasions})),p=null!==f&&f.length>0;return a.a.useEffect((function(){t&&t(p)}),[p,t]),a.a.createElement(u.a,{fieldName:"occasions",placeholder:c.b._("Filter by occasions"),options:f||o.a,noOptionsMessage:function(){return c.b._("No occasions")},isLoading:m,getOptionLabel:l.a.prop("title"),getOptionFilter:l.a.prop("title")})}))},1680:function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(39);t.a=Object(i.a)(a.a.createElement(a.a.Fragment,null,a.a.createElement("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),a.a.createElement("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})),"AccessTime")},1681:function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(39);t.a=Object(i.a)(a.a.createElement("path",{d:"M22 10l-6-6H4c-1.1 0-2 .9-2 2v12.01c0 1.1.9 1.99 2 1.99l16-.01c1.1 0 2-.89 2-1.99v-8zm-7-4.5l5.5 5.5H15V5.5z"}),"Note")},1688:function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(39);t.a=Object(i.a)(a.a.createElement(a.a.Fragment,null,a.a.createElement("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),a.a.createElement("path",{fill:"none",d:"M0 0h24v24H0z"})),"Star")},2769:function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(39);t.a=Object(i.a)(a.a.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")},2825:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(59),o=n(260),c=n(114),l=n(466),u=n(79),d=n(45),s=n(444),m=n(1383),f=n(78),p=n(36),b=n(1388),v=n(445),h=n(18),g=n(1579),E=n(2769),O=n(1370),y=n(61),C=n(254),j=n(240),w=n(158),k=n(439),N=n(1404),I=n(1585),x=n(1521),M=n(372);function S(e,t){return a.a.memo(a.a.forwardRef((function(n,r){return a.a.createElement(M.a,Object.assign({"data-mui-test":"".concat(t,"Icon"),ref:r},n),e)})))}var A=S(a.a.createElement("path",{d:"M14.76,20.83L17.6,18L14.76,15.17L16.17,13.76L19,16.57L21.83,13.76L23.24,15.17L20.43,18L23.24,20.83L21.83,22.24L19,19.4L16.17,22.24L14.76,20.83M12,12V19.88C12.04,20.18 11.94,20.5 11.71,20.71C11.32,21.1 10.69,21.1 10.3,20.71L8.29,18.7C8.06,18.47 7.96,18.16 8,17.87V12H7.97L2.21,4.62C1.87,4.19 1.95,3.56 2.38,3.22C2.57,3.08 2.78,3 3,3V3H17V3C17.22,3 17.43,3.08 17.62,3.22C18.05,3.56 18.13,4.19 17.79,4.62L12.03,12H12Z"}),"FilterDisable"),L=S(a.a.createElement("path",{d:"M14,12V19.88C14.04,20.18 13.94,20.5 13.71,20.71C13.32,21.1 12.69,21.1 12.3,20.71L10.29,18.7C10.06,18.47 9.96,18.16 10,17.87V12H9.97L4.21,4.62C3.87,4.19 3.95,3.56 4.38,3.22C4.57,3.08 4.78,3 5,3V3H19V3C19.22,3 19.43,3.08 19.62,3.22C20.05,3.56 20.13,4.19 19.79,4.62L14.03,12H14Z"}),"FilterEnable"),R=n(131),P=n(14),H=Object(h.c)(g.a).withConfig({displayName:"StyledPopup",componentId:"nzv42l-0"})([".MuiPopover-paper{width:30rem;overflow-x:initial;overflow-y:initial;}.close-button{margin:-0.9rem -0.7rem 0rem auto;padding:0.7rem;display:block;width:3rem;text-align:right;}"]),z=a.a.memo((function(){var e=Object(O.h)(),t=a.a.useRef(null),n=Object(y.e)((function(){return{isOpen:!1,setOpen:function(){this.isOpen=!0},setClosed:function(){this.isOpen=!1},sectorsAvailable:!1,markSectorsAvailable:function(e){this.sectorsAvailable=e},occassionsAvailable:!1,markOccasionsAvailable:function(e){this.occassionsAvailable=e},get isEnabled(){return this.sectorsAvailable||this.occassionsAvailable},get isActive(){var t=e.state,n=t.values;return t.wasSubmitted&&(n.occasions.length>0||n.sectors.length)}}}));return Object(y.g)((function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(k.a,null,a.a.createElement(R.a,{color:n.isActive?P.a.green:P.a.greyMiddle,icon:n.isActive?A:L,ref:t,iconSize:2,onClick:n.setOpen,disabled:!n.isEnabled})),a.a.createElement(H,{open:n.isOpen,keepMounted:!0,onClose:function(t,r){"backdropClick"===r&&e.api.submitForm(),n.setClosed()},anchorEl:t.current,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},a.a.createElement(C.a,{padding:1},a.a.createElement(j.a,{icon:E.a,color:P.a.greyMiddle,fontSize:1,className:"close-button",onClick:function(){e.api.submitForm(),n.setClosed()}}),a.a.createElement(x.a,{markAsAvailable:n.markSectorsAvailable}),a.a.createElement(N.a,null),a.a.createElement(I.a,{markAsAvailable:n.markOccasionsAvailable}),a.a.createElement(N.a,null),a.a.createElement(w.a,{width:9,height:P.d.ButtonHeight},a.a.createElement(R.a,{text:p.b._("Filter"),color:P.a.green,onClick:function(){e.api.submitForm(),n.setClosed()}})))))}))})),T=n(46),D=n(89),F=n(1441),_=n(20),B=[f.f.NewOrders,f.f.Preparing,f.f.ReadyToDeliver],W=_.a.sortWith([_.a.descend(_.a.prop("isPriority")),_.a.ascend(_.a.prop("orderNumber")),_.a.ascend(_.a.either(_.a.prop("deliverAt"),_.a.prop("createdAt")))]);function V(e){var t=e.branches,n=e.sectors,r=e.occasions,a=0===t.length,i={branches:t,occasions:r,sectors:n},o=Object(f.Fb)(Object(D.a)({},i,{categories:B}),{skip:a}),c=o.getStash,l=o.updateQuery,u=o.refetch;return Object(F.a)(u),Object(f.Ac)(Object(D.a)({},i,{categories:B.concat(f.f.Finished)}),{skip:a,onSubscriptionData:function(e){var t=e.subscriptionData.data;t&&l((function(e){return function(e,t){var n=e.updatedOrder.order;if(!n||!t.orders)return t;if(!B.includes(n.orderStateCategory))return{orders:t.orders.filter((function(e){return e.id!==n.id}))};var r=!1,a=t.orders.map((function(e){return e.id===n.id?(r=!0,n):e}));r||a.unshift(n);return{orders:a}}(t,e)}))}}),c((function(e){return W(e.orders)}))}var K=n(15);function U(){var e=Object(m.b)(!1),t=a.a.useState({occasions:[],sectors:[]}),n=Object(T.a)(t,2),r=n[0],i=n[1],o=a.a.useCallback((function(e){i(Object(K.toJS)(e))}),[]);return[a.a.useMemo((function(){return Object(D.a)({},r,{branches:e})}),[e,r]),o]}var G=a.a.createContext(null),q=Object(y.b)((function(e){var t=U(),n=Object(T.a)(t,2),r=n[0],i=n[1],o=V(r);return a.a.createElement(O.a,{initialValues:r,onSubmit:i},a.a.createElement(G.Provider,{value:o},e.children))}));var Q=n(1496),J=n(1584),Y=n.n(J),Z=n(40),X=n(469),$=a.a.memo((function(e){var t=e.shouldPlay,n=e.playNow,r=void 0!==n&&n,a=Object(Z.b)().config;return Object(X.a)({soundUrl:Y.a,intervalSec:a.orderListSoundIntervalSec,forcePlayNow:r,shouldPlay:t})})),ee=n(4);function te(){var e=Object(ee.a)(["\n  margin: 0 0.5rem;\n"]);return te=function(){return e},e}var ne,re,ae=h.c.div(te()),ie=n(256),oe=(ne={},Object(ie.a)(ne,f.e.Fresh,"todo"),Object(ie.a)(ne,f.e.Preparing,"progress"),Object(ie.a)(ne,f.e.Ready,"progress"),Object(ie.a)(ne,f.e.Cooked,"done"),ne),ce=(re={},Object(ie.a)(re,f.f.NewOrders,"todo"),Object(ie.a)(re,f.f.Preparing,"progress"),Object(ie.a)(re,f.f.ReadyToDeliver,"done"),re);var le=Object.keys(ce);function ue(e){var t=e.branches,n=e.occasions,r=e.sectors,a=0===t.length,i={branches:t,occasions:n,sectors:r},o=Object(f.Gb)(Object(D.a)({},i,{categories:le}),{skip:a}),c=o.getStash,l=o.updateQuery,u=o.refetch;return Object(F.a)(u),Object(f.Bc)(Object(D.a)({},i,{categories:le.concat(f.f.Finished)}),{skip:a,onSubscriptionData:function(e){var t=e.subscriptionData.data;t&&l((function(e){return function(e,t){var n=e.updatedOrder.order;if(!n||!t.orders)return t;if(!le.includes(n.orderStateCategory))return{orders:t.orders.filter((function(e){return e.id!==n.id}))};var r=!1,a=t.orders.map((function(e){return e.id===n.id?(r=!0,n):e}));r||a.unshift(n);return{orders:a}}(t,e)}))}}),c((function(e){return function(e){var t=e.map(de);return _.a.groupBy((function(e){return e.state}),t)}(e.orders)}))}function de(e){return Object(D.a)({},e,{type:"order",state:ce[e.orderStateCategory],time:e.deliverAt||e.createdAt,items:e.items.map(se)})}function se(e){return{id:e.id,code:e.recipe.code,name:e.recipe.name,state:oe[e.state.enum],isReady:"done"===oe[e.state.enum],sideDishes:e.sidedishes.map(_.a.prop("recipe"))}}var me=n(1460),fe=n(39),pe=Object(fe.a)(a.a.createElement("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}),"KeyboardArrowRight"),be=function(e){return a.a.createElement(R.a,Object.assign({icon:pe,width:P.d.ButtonHeight+P.d.DefaultSizeUnit,color:P.a.green},e))},ve=n(54),he=n.n(ve),ge=n(1373);function Ee(){var e=Object(ge.b)("addOrderState"),t=Object(ge.b)("updateOrderRecipeState"),n=Object(ge.b)("updateSectorRecipes"),r=Object(ge.b)("updateSectorRecipe"),i=Object(f.M)(),o=Object(T.a)(i,1)[0],c=Object(f.N)(),l=Object(T.a)(c,1)[0],u=Object(f.O)(),d=Object(T.a)(u,1)[0],s=Object(f.P)(),m=Object(T.a)(s,1)[0];return{canHandleCard:function(t){if("todo"===t.state){if("order"===t.type||"completion"===t.type)return e;if("sector"===t.type)return n}return"sector"===t.type&&"done"===t.state?n:"completion"===t.type&&"done"===t.state&&e},canHandleCardItem:function(e){if("todo"!==e.state){if("order"===e.type||"completion"===e.type)return t;if("sector"===e.type)return r}return!1},handleCard:a.a.useCallback((function(e){return he.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if("order"!==e.type){t.next=3;break}return t.next=3,he.a.awrap(o({orderId:e.id,state:f.g.InProduce}));case 3:if("sector"!==e.type){t.next=10;break}if("todo"!==e.state){t.next=7;break}return t.next=7,he.a.awrap(d({sectorId:e.id,state:f.e.Preparing}));case 7:if("done"!==e.state){t.next=10;break}return t.next=10,he.a.awrap(d({sectorId:e.id,state:f.e.Finished}));case 10:if("completion"!==e.type){t.next=17;break}if("todo"!==e.state){t.next=14;break}return t.next=14,he.a.awrap(o({orderId:e.id,state:f.g.Accepted}));case 14:if("done"!==e.state){t.next=17;break}return t.next=17,he.a.awrap(o({orderId:e.id,state:f.g.Finished}));case 17:case"end":return t.stop()}}))}),[o,d]),handleCardItem:a.a.useCallback((function(e,t){var n;return he.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=Oe(e,t),"order"!==e.type&&"completion"!==e.type){r.next=4;break}return r.next=4,he.a.awrap(l({orderRecipeId:t.id,state:n}));case 4:if("sector"!==e.type){r.next=11;break}return r.next=7,he.a.awrap(m({sectorRecipeId:t.id,state:n}));case 7:if(t.isReady=n===f.e.Ready,!e.items.every(_.a.propEq("isReady",!0))){r.next=11;break}return r.next=11,he.a.awrap(d({sectorId:e.id,state:f.e.Cooked}));case 11:case"end":return r.stop()}}))}),[l,d,m])}}function Oe(e,t){switch(t.state){case"todo":case"progress":return"sector"===e.type?t.isReady?f.e.Preparing:f.e.Ready:f.e.Cooked;case"done":return f.e.Preparing}}function ye(){var e=Object(ee.a)(["\n  background: ",";\n  border-radius: 50%;\n  margin: 0;\n  width: 70%;\n  height: 70%;\n  overflow: auto;\n  margin: auto;\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n"]);return ye=function(){return e},e}function Ce(){var e=Object(ee.a)(["\n  background: ",";\n  border: 2px solid ",";\n  width: 2.1rem;\n  height: 2.1rem;\n  position: relative;\n  border-radius: 50%;\n  margin-bottom: ",";\n"]);return Ce=function(){return e},e}var je=h.c.div(Ce(),P.a.white,P.a.green,P.d.Small),we=h.c.div(ye(),P.a.green),ke=function(e){var t=e.isChecked,n=e.onClick;return a.a.createElement(je,{onClick:n},t&&a.a.createElement(we,null))};function Ne(){var e=Object(ee.a)(["\n  margin-top: -0.8rem;\n"]);return Ne=function(){return e},e}var Ie=Object(h.b)(Ne()),xe=h.c.div.withConfig({displayName:"StyledKitchenCardItem",componentId:"sc-683lfw-0"})(["display:flex;justify-content:space-between;",";& .done-container{flex:0 0 2.4rem;}& .item-code{flex:0 0 4.1rem;font-size:",";color:",";margin-top:0.35rem;}& .item-name{flex:1 0;color:",";margin:0.4rem 0 0 0.5rem;}"],(function(e){return e.isFirstSidedish&&Ie}),P.b.CompactCardBig,P.a.black,P.a.greyMiddle),Me=function(e){var t=e.item,n=e.isChecked,r=void 0!==n&&n,i=e.canHandle,o=void 0!==i&&i,c=e.onHandle,l=e.isFirstSidedish,u=void 0!==l&&l;return a.a.createElement(xe,{isFirstSidedish:u},a.a.createElement("div",{className:"done-container"},o&&c&&a.a.createElement(ke,{isChecked:r,onClick:c})),a.a.createElement("div",{className:"item-code"},t.code),a.a.createElement("div",{className:"item-name"},t.name))},Se=function(e){var t=e.items,n=e.canHandle,i=e.onHandle;return a.a.createElement("div",null,t.map((function(e){return a.a.createElement(r.Fragment,{key:e.id},a.a.createElement(Me,{item:e,isChecked:e.isReady,canHandle:n,onHandle:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return i(e)}))}),a.a.createElement(a.a.Fragment,null,e.sideDishes.map((function(t,r){return a.a.createElement(Me,{key:"".concat(e.id,"-").concat(t.id),item:t,isFirstSidedish:0===r&&n})}))))})))},Ae=n(1688);function Le(){var e=Object(ee.a)(["\n  display: inline-block;\n  position: absolute;\n  right: 0.2rem;\n  top: 0.2rem;\n  z-index: 5;\n"]);return Le=function(){return e},e}var Re=h.c.div(Le()),Pe=function(){return a.a.createElement(Re,{"data-testid":"KitchenOrderStarIndicator"},a.a.createElement(j.a,{color:P.a.orange,icon:Ae.a}))},He=h.c.div.withConfig({displayName:"StyledKitchenCardCompletion",componentId:"sc-131hbj7-0"})(["font-size:",";background-color:",";color:",";border-radius:",";margin-bottom:",";padding-bottom:",";position:relative;& .header{display:flex;flex-wrap:nowrap;}.order-branch{padding:0.5rem 1.2rem 0 0.5rem;margin:0 -0.3rem 0 0;border-top-left-radius:",";background-color:",";color:",";}& .order__number{width:4.5rem;background:",";color:",";font-size:2rem;border-top-left-radius:",";text-align:center;}& .order__source{display:inline-block;background:",";color:",";font-size:0.9rem;padding:0.1rem 0.8rem;border-radius:0.9rem;margin:0.5rem;}& .order__sector{display:inline-block;color:",";margin:0.5rem;}& .order__content{margin:",";}"],P.b.CompactCard,P.a.white,P.a.greyDarkest,P.c.Card,P.d.Middle,P.d.Middle,P.c.Card,P.a.green,P.a.white,P.a.orange,P.a.white,P.c.Card,P.a.greyMiddle,P.a.white,P.a.black,P.d.Middle),ze=function(e){var t=e.card,n=e.showBranch,r=Ee();return a.a.createElement(He,{"data-testid":"order-box"},a.a.createElement("div",{className:"header"},n&&a.a.createElement("div",{className:"order-branch"},t.companyBranch.name),a.a.createElement("div",{className:"order__number"},t.orderNumber),a.a.createElement("div",{className:"order__source"},"".concat(t.orderOrigin.code," ").concat(null!==t.cashBox?t.cashBox.id:"")),t.sector&&a.a.createElement("div",{className:"order__sector"},t.sector.name),t.isPriority&&a.a.createElement(Pe,null)),a.a.createElement("div",{className:"order__content"},a.a.createElement(Se,{items:t.items,canHandle:r.canHandleCardItem(t),onHandle:function(e){return r.handleCardItem(t,e)}}),t.note&&a.a.createElement("div",{className:"order__note"},t.note)),r.canHandleCard(t)&&a.a.createElement(me.a,{position:"BottomRight"},a.a.createElement(be,{color:"todo"===t.state?P.a.green:P.a.red,onClick:function(){return r.handleCard(t)}})))},Te=Object(y.b)((function(e){var t=e.category,n=e.noOrdersMessage,r=e.mobileHeadline,i=Object(m.b)(!1),o=a.a.useContext(G);if(0===i.length)return a.a.createElement(ae,null,a.a.createElement(u.Trans,{id:"Select a branch"}));if(null===o)return a.a.createElement(ae,null,a.a.createElement(u.Trans,{id:"Loading"}));var c=o.filter(_.a.propEq("orderStateCategory",t)).map(De);if(0===c.length)return a.a.createElement(ae,null,n);var l=t===f.f.NewOrders;return a.a.createElement(a.a.Fragment,null,r&&a.a.createElement(d.b,null,a.a.createElement(Q.a,null,r)),a.a.createElement("div",{"data-testid":"order-list-".concat(t)},c.map((function(e){return a.a.createElement(ze,{key:e.id,card:e,showBranch:i.length>1})}))),a.a.createElement($,{shouldPlay:l,playNow:!0}))}));function De(e){return Object(D.a)({},e,{type:"completion",state:ce[e.orderStateCategory],time:e.deliverAt||e.createdAt,items:e.items.map(se)})}var Fe=Object.keys(oe);function _e(e){var t=e.branches,n=e.sectors,r=0===t.length,a={branches:t,sectors:n},i=Object(f.Hb)(Object(D.a)({},a,{states:Fe}),{skip:r}),o=i.getStash,c=i.updateQuery,l=i.refetch;return Object(F.a)(l),Object(f.Cc)(Object(D.a)({},a,{states:Fe.concat(f.e.Finished,f.e.Canceled)}),{skip:r,onSubscriptionData:function(e){var t=e.subscriptionData.data;t&&c((function(e){return function(e,t){var n=e.updatedSectorRecipe.sectorRecipe;if(!n||!t.sectorRecipes)return t;if(!Fe.includes(n.state.enum))return Object(D.a)({},t,{sectorRecipes:t.sectorRecipes.filter((function(e){return e.id!==n.id}))});var r=!1,a=t.sectorRecipes.map((function(e){return e.id===n.id?(r=!0,n):e}));r||a.unshift(n);return Object(D.a)({},t,{sectorRecipes:a})}(t,e)}))}}),o((function(e){return function(e,t){var n=function(e,t){return"".concat(e,"-").concat(t)},r=_.a.mapObjIndexed((function(){return[]}),_.a.invertObj(oe)),a=_.a.groupBy((function(e){var t=e.sector,r=e.state;return n(t.id,oe[r.enum])}),e),i=_.a.sortBy(_.a.prop("createdAt"));return t.reduce((function(e,t){return _.a.mapObjIndexed((function(e,r){var o=n(t.id,r),c=a[o];if(c){var l=i(c),u=l.map((function(e){return{id:e.id,code:e.recipe.code,name:e.recipe.name,state:oe[e.state.enum],isReady:[f.e.Ready,f.e.Cooked].includes(e.state.enum),sideDishes:e.sideDishes.map(_.a.prop("recipe"))}}));return e.concat({id:t.id,type:"sector",name:t.name,time:l[0].createdAt,state:r,isPriority:!1,items:u})}return e}),e)}),r)}(e.sectorRecipes,e.sectors)}))}var Be=_.a.sortWith([_.a.descend(_.a.prop("isPriority")),_.a.ascend(_.a.prop("time"))]),We=a.a.createContext(null),Ve=Object(y.b)((function(e){var t=e.children,n=U(),r=Object(T.a)(n,2),i=r[0],o=r[1],c=ue(i),l=_e(i),u=c&&l&&_.a.mergeDeepWith(_.a.concat,c,l),d=u&&_.a.mapObjIndexed(Be,u);return a.a.createElement(O.a,{initialValues:i,onSubmit:o},a.a.createElement(We.Provider,{value:d},t))}));var Ke=n(1400),Ue=n(1482),Ge=n(177),qe=n(1518),Qe=n(1500),Je=n(1519),Ye=n(1680),Ze=n(1372);function Xe(){var e=Object(ee.a)(["\n  color: ",";\n  font-weight: bold;\n  display: inline-block;\n  margin-left: 0.3rem;\n"]);return Xe=function(){return e},e}function $e(){var e=Object(ee.a)(["\n  color: ",";\n"]);return $e=function(){return e},e}var et=h.c.span($e(),P.a.greyDark),tt=h.c.div(Xe(),P.a.black),nt=function(e){switch(e.deliverType){case"DELIVER_UNTIL":return a.a.createElement(et,null,a.a.createElement(u.Trans,{id:"Deliver until"}));case"DELIVER_AT_SPECIFIC_TIME":return a.a.createElement(et,null,a.a.createElement(u.Trans,{id:"Deliver at"}));case"PERSONAL":return a.a.createElement(et,null,a.a.createElement(u.Trans,{id:"Personal pickup at"}));default:return null}},rt=function(e){var t=e.deliverTime,n=e.deliverType;return a.a.createElement(Ze.a,{icon:Ye.a,labelMargin:"0"},a.a.createElement(nt,{deliverType:n}),t&&a.a.createElement(tt,null,Object(Ge.i)(t)))},at=h.c.div.withConfig({displayName:"StyledKitchenCardOrder",componentId:"sc-1ddfdmp-0"})(["font-size:",";background-color:",";color:",";border-radius:",";margin-bottom:",";position:relative;.order-branch{padding:0.3rem 0.6rem;margin:-0.2rem 0.3rem 0 -0.2rem;align-self:flex-start;border-top-left-radius:",";background-color:",";color:",";}.order-ticker{display:flex;flex-wrap:nowrap;justify-content:space-between;padding:0.2rem;color:",";}.details{padding:0 0.2rem 0.1rem 0.2rem;position:relative;}.delivery-time-badge-container{flex:0 0 1.8rem;}.address-container{flex:1 0;padding:0 0 0 0.5rem;}.customer-identity-container{flex:1 0;padding:0 0 0 0.5rem;}.pickup-label{font-style:italic;}"],P.b.CompactCard,P.a.white,P.a.greyDarkest,P.c.Card,P.d.Middle,P.c.Card,P.a.green,P.a.white,P.a.greyMiddle),it=function(e){var t=e.card,n=e.showBranch,r=e.onHandle,i=e.onHandleRecipe,o=e.canHandle,c=e.canHandleRecipe;return a.a.createElement(at,null,a.a.createElement("div",{className:"order-ticker"},n&&a.a.createElement("div",{className:"order-branch"},t.companyBranch.name),a.a.createElement("div",{className:"delivery-time-badge-container"},a.a.createElement(Qe.a,{deliverAt:t.deliverAt?new Date(t.deliverAt):null,deliveredAt:t.deliveredAt?new Date(t.deliveredAt):null,isCancelled:!1,isDelayed:null!==t.delayedDeliveryTime})),a.a.createElement("div",{className:"address-container"},null!==t.sector?t.sector.name:t.deliveryType&&t.deliveryType.enum===f.a.Pickup?a.a.createElement("div",{className:"pickup-label"},a.a.createElement(u.Trans,{id:"To pickup"})):Object(Ge.a)(t.address)),a.a.createElement("div",{className:"customer-identity-container"},a.a.createElement(qe.a,{customer:t.customer}),a.a.createElement("br",null),t.customer&&t.customer.defaultPhone?a.a.createElement(Ue.a,{href:"tel:".concat(t.customer.defaultPhone.phone.toString().replace("/ /g",""))},t.customer.defaultPhone.phone):null)),a.a.createElement("div",{className:"details"},a.a.createElement(Ke.a,null),t.isPriority&&a.a.createElement(Pe,null),a.a.createElement(Se,{items:t.items,canHandle:c,onHandle:function(e){return i(t,e)}}),a.a.createElement(Ke.a,null),a.a.createElement(rt,{deliverTime:t.deliverAt,deliverType:t.deliveryType&&t.deliveryType.enum===f.a.Pickup?"PERSONAL":"DELIVER_UNTIL"}),a.a.createElement(Je.a,{note:t.note}),o&&a.a.createElement(me.a,{position:"BottomRight"},a.a.createElement(be,{onClick:function(){return r(t)}}))))},ot=h.c.div.withConfig({displayName:"StyledKitchenCardSector",componentId:"so8yz6-0"})(["font-size:",";background-color:",";color:",";border-radius:",";margin-bottom:",";position:relative;.details{padding:0 0.2rem 0.1rem 0.2rem;position:relative;}.sector-name{padding:0.3rem 0 0.3rem 2.5rem;font-size:1.1rem;}"],P.b.CompactCard,P.a.white,P.a.greyDarkest,P.c.Card,P.d.Middle),ct=function(e){var t=e.card,n=e.canHandle,r=e.canHandleRecipe,i=e.onHandle,o=e.onHandleRecipe;return a.a.createElement(ot,null,a.a.createElement("div",{className:"sector-name"},t.name),a.a.createElement("div",{className:"details"},a.a.createElement(Ke.a,null),a.a.createElement(Se,{items:t.items,canHandle:r,onHandle:function(e){return o(t,e)}}),n&&a.a.createElement(a.a.Fragment,null,a.a.createElement(Ke.a,null),a.a.createElement(me.a,{position:"BottomRight"},a.a.createElement(be,{color:"todo"===t.state?P.a.green:P.a.pink,onClick:function(){return i(t)}})))))},lt=Object(y.b)((function(e){var t=e.state,n=e.noCardsMessage,r=e.mobileHeadline,i=function(e){var t=a.a.useContext(We);return t&&t[e]}(t),o=Object(m.b)(!1),c=Ee();if(0===o.length)return a.a.createElement(ae,null,a.a.createElement(u.Trans,{id:"Select a branch"}));if(null===i)return a.a.createElement(ae,null,a.a.createElement(u.Trans,{id:"Loading"}));if(0===i.length)return a.a.createElement(ae,null,n);var l="todo"===t;return a.a.createElement(a.a.Fragment,null,r&&a.a.createElement(d.b,null,a.a.createElement(Q.a,null,r)),a.a.createElement($,{shouldPlay:l,playNow:!0}),i.map((function(e){var t={key:"".concat(e.type,"-").concat(e.id),canHandle:c.canHandleCard(e),canHandleRecipe:c.canHandleCardItem(e),onHandle:c.handleCard,onHandleRecipe:c.handleCardItem};return"order"===e.type?a.a.createElement(it,Object.assign({card:e,showBranch:o.length>1},t)):"sector"===e.type?a.a.createElement(ct,Object.assign({card:e},t)):null})))})),ut=h.c.div.withConfig({displayName:"StyledKitchenFilterContainer",componentId:"wn9e7b-0"})(["position:absolute;left:16rem;top:0.4rem;width:calc(100vw - 36rem);z-index:120;"]),dt=h.c.div.withConfig({displayName:"KitchenCategorySeparator",componentId:"wn9e7b-1"})(["border:1px solid ",";width:1px;height:100%;position:absolute;left:-5px;top:0rem;"],P.a.white),st=function(){return a.a.createElement(Ve,null,a.a.createElement(v.a,{pageTitle:p.b._("Kitchen"),useBackButton:!0,showSoundControl:!0,topContent:a.a.createElement(z,null)},a.a.createElement(d.a,null,a.a.createElement(ut,null,a.a.createElement(m.a,null))),a.a.createElement(d.b,null,a.a.createElement(s.a,{gridRowInMobile:1},a.a.createElement(m.a,null))),a.a.createElement(b.a,{withScrollArea:!0,row:1,rowInMobile:2,widthInColumns:5},a.a.createElement(lt,{state:"todo",noCardsMessage:a.a.createElement(u.Trans,{id:"No new orders"}),mobileHeadline:a.a.createElement(u.Trans,{id:"New orders"})})),a.a.createElement(b.a,{withScrollArea:!0,row:1,rowInMobile:3,column:5,widthInColumns:6},a.a.createElement(lt,{state:"progress",noCardsMessage:a.a.createElement(u.Trans,{id:"No orders to prepare"}),mobileHeadline:a.a.createElement(u.Trans,{id:"Orders to prepare"})}),a.a.createElement(d.a,null,a.a.createElement(dt,null))),a.a.createElement(b.a,{withScrollArea:!0,row:1,rowInMobile:4,column:11,widthInColumns:5},a.a.createElement(lt,{state:"done",noCardsMessage:a.a.createElement(u.Trans,{id:"No orders to deliver"}),mobileHeadline:a.a.createElement(u.Trans,{id:"Orders to deliver"})}),a.a.createElement(d.a,null,a.a.createElement(dt,null)))))},mt=function(){return a.a.createElement(q,null,a.a.createElement(v.a,{pageTitle:p.b._("Completion"),useBackButton:!0,showSoundControl:!0,topContent:a.a.createElement(z,null)},a.a.createElement(d.a,null,a.a.createElement(ut,null,a.a.createElement(m.a,null))),a.a.createElement(d.b,null,a.a.createElement(s.a,{gridRowInMobile:1},a.a.createElement(m.a,null))),a.a.createElement(b.a,{withScrollArea:!0,row:1,rowInMobile:2,widthInColumns:5},a.a.createElement(Te,{category:f.f.NewOrders,noOrdersMessage:a.a.createElement(u.Trans,{id:"No new orders"}),mobileHeadline:a.a.createElement(u.Trans,{id:"New orders"})})),a.a.createElement(b.a,{withScrollArea:!0,row:1,rowInMobile:3,column:5,widthInColumns:6},a.a.createElement(Te,{category:f.f.Preparing,noOrdersMessage:a.a.createElement(u.Trans,{id:"No orders to complete"}),mobileHeadline:a.a.createElement(u.Trans,{id:"Orders to complete"})}),a.a.createElement(d.a,null,a.a.createElement(dt,null))),a.a.createElement(b.a,{withScrollArea:!0,row:1,rowInMobile:4,column:11,widthInColumns:5},a.a.createElement(Te,{category:f.f.ReadyToDeliver,noOrdersMessage:a.a.createElement(u.Trans,{id:"No orders to hand over"}),mobileHeadline:a.a.createElement(u.Trans,{id:"Orders to hand over"})}),a.a.createElement(d.a,null,a.a.createElement(dt,null)))))};n.d(t,"KitchenRouting",(function(){return ft}));var ft=function(){return a.a.createElement(i.e,null,a.a.createElement(c.a,{exact:!0,path:l.a,component:st}),a.a.createElement(c.a,{path:l.b,component:mt}),a.a.createElement(i.c,{component:o.a}))};t.default=ft}}]);
//# sourceMappingURL=379.11c092e7.chunk.js.map