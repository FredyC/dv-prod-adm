(window.webpackJsonp=window.webpackJsonp||[]).push([[177],{7676:function(e,n,t){"use strict";t.d(n,"a",function(){return d});var a=t(0),r=t.n(a),o=t(22),i=t(7685),l=t(18),c=o.b.div.withConfig({displayName:"PageLayoutFullHeightItem__FullHeightDiv",componentId:"sc-1mean6j-0"})(["position:fixed;bottom:0.5rem;width:",";left:",";top:",";"],function(e){return void 0!==e.widthInColumns?"calc(("+e.widthInColumns+" * 6.22vw) - "+l.d.LayoutGridCellMargin+")":"calc(100vh - (2 * "+l.d.LayoutGridCellMargin+"))"},function(e){return void 0!==e.column?"calc(("+e.column+" * 6.22vw) + "+l.d.LayoutGridCellMargin+")":l.d.LayoutGridCellMargin},function(e){return void 0!==e.row?"calc(("+e.row+" * 3.9375rem) + "+l.d.LayoutGridCellMargin+")":"calc(3.9375rem + "+l.d.LayoutGridCellMargin+")"}),u=o.b.div.withConfig({displayName:"PageLayoutFullHeightItem__FullHeightDivStyled",componentId:"sc-1mean6j-1"})(["height:100%;"]),d=function(e){var n=e.children,t=e.row,a=void 0===t?1:t,o=e.column,l=void 0===o?0:o,d=e.widthInColumns,m=void 0===d?16:d,s=e.withScrollArea,f=void 0!==s&&s,p=e.scrollAreaId;return r.a.createElement(c,{column:l,row:a,widthInColumns:m,withScrollArea:f},f?r.a.createElement(i.a,{id:p},n):r.a.createElement(u,null,n))}},7677:function(e,n,t){"use strict";t.d(n,"a",function(){return a});var a=t(22).b.div.withConfig({displayName:"FlexRowSingle",componentId:"sc-1opww0j-0"})(["display:flex;flex-direction:row;justify-content:",";"],function(e){var n=e.justify;return void 0===n?"space-between":n})},7680:function(e,n,t){"use strict";t.d(n,"a",function(){return a});var a=t(22).b.div.withConfig({displayName:"VerticalGap",componentId:"z6ukut-0"})(["height:",";"],function(e){var n=e.size,t=void 0===n?1:n,a=e.sizeUnit,r=void 0===a?"rem":a;return"".concat(t).concat(r)});a.displayName="VerticalGap"},7685:function(e,n,t){"use strict";t.d(n,"a",function(){return a});var a=t(22).b.div.withConfig({displayName:"ScrollArea",componentId:"v30w13-0"})(["overflow-y:auto;-webkit-overflow-scrolling:touch;height:100%;"])},7739:function(e,n,t){"use strict";t.d(n,"a",function(){return w}),t.d(n,"b",function(){return O});var a=t(159),r=t(112),o=t(113),i=t(115),l=t(114),c=t(116),u=t(315),d=t(10),m=t(0),s=t.n(m),f=t(7704),p=t(7662),h=t(22),b=t(18),g=h.b.div.withConfig({displayName:"BaseMap__MapContainerStyled",componentId:"sc-1juok8u-0"})(["border-radius:",";overflow:hidden;height:100%;"],b.c.Card),v=Object(f.withGoogleMap)(function(e){var n=e.children;return s.a.createElement(s.a.Fragment,null,n)}),E=s.a.createContext(null),y=s.a.createContext(null),C=function(e){function n(e,t){var a;return Object(r.a)(this,n),(a=Object(i.a)(this,Object(l.a)(n).call(this,e))).map=void 0,a.map=t[p.MAP],a}return Object(c.a)(n,e),Object(o.a)(n,[{key:"render",value:function(){return s.a.createElement(y.Provider,{value:this.map},this.props.children)}}]),n}(s.a.PureComponent);C.contextTypes=Object(a.a)({},p.MAP,d.object);var w=function(e){var n=e.model,t=e.children,a={streetViewControl:!1,mapTypeControl:!1,fullscreenControl:!1};return s.a.createElement(E.Provider,{value:n},s.a.createElement(v,{containerElement:s.a.createElement(g,null),mapElement:s.a.createElement("div",{style:{height:"100%"}})},s.a.createElement(C,null,s.a.createElement(u.a,null,function(){return s.a.createElement(f.GoogleMap,{ref:n.setMapRef,zoom:n.zoom,center:n.center,onCenterChanged:n.updatePosition,onZoomChanged:n.updateZoom,options:a},t)}))))};function O(){var e=Object(m.useContext)(y);if(!e)throw new Error("Trying to useGoogleMap, but BaseMap is missing in the tree");return e}},7786:function(e,n,t){"use strict";t.d(n,"a",function(){return o});var a=t(22),r=t(18),o=a.b.h2.withConfig({displayName:"CardListTitle",componentId:"dr5aqq-0"})(["color:",";font-weight:lighter;font-size:1.2rem;margin:0.8rem 0 0.8rem 0.3rem;"],r.a.greyLight)},7789:function(e,n,t){"use strict";t.d(n,"a",function(){return u});var a=t(0),r=t.n(a),o=t(7732),i=t(22),l=t(98),c=i.b.div.withConfig({displayName:"DragHandle__DragHandleContainerStyled",componentId:"xbsz8c-0"})(["padding:1rem 0.4rem;cursor:grab;"]),u=Object(o.SortableHandle)(function(){return r.a.createElement(c,null,r.a.createElement(l.a,{iconName:"reorder"}))})},7796:function(e,n,t){"use strict";t.d(n,"a",function(){return r});var a=t(0),r=function(e){return Object(a.useEffect)(function(){e.isShow&&(window.confirm(e.confirmText)?e.onConfirm():e.onCancel())},[e.isShow]),null}},7950:function(e,n,t){"use strict";t.d(n,"a",function(){return b});var a=t(34),r=t(39),o=t(112),i=t(113),l=t(115),c=t(114),u=t(116),d=t(0),m=t.n(d),s=t(7661),f=t(25),p=t(33),h=t(7668),b=function(e){function n(){var e,t;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=Object(l.a)(this,(e=Object(c.a)(n)).call.apply(e,[this].concat(r)))).validate=function(e){return t.props.isRequired&&!e?p.b._("{0} must be selected",{0:t.props.validatioName}):null},t}return Object(u.a)(n,e),Object(i.a)(n,[{key:"getControlProps",value:function(e){var n=this.props,t=n.isMulti,a=n.options,r=n.getOptionValue,o=n.defaultValue,i=e.value||o;if(t){var l=Array.isArray(i)?function(e){return i.includes(r(e))}:f.a.F;return{value:Array.isArray(a)?a.filter(l):[],onChange:function(n){e.setValue(n.map(r))}}}return{value:i&&a.find(function(e){return r(e)===i}),onChange:function(n){e.setValue(r(n))}}}},{key:"render",value:function(){var e=this,n=this.props,t=n.field,o=n.fieldIsPure,i=void 0!==o&&o,l=(n.isRequired,n.defaultValue,Object(r.a)(n,["field","fieldIsPure","isRequired","defaultValue"]));return m.a.createElement(s.Field,{field:t,validate:this.validate,pure:i},function(n){return m.a.createElement(h.a,Object.assign({},e.getControlProps(n),{onFocus:function(){return n.setTouched(!0)},styles:{control:function(e){return Boolean(n.error)?Object(a.a)({},e,{borderColor:"red"}):e}}},l))})}}]),n}(m.a.Component);b.defaultProps={validatioName:"Value",getItemId:f.a.prop("id")}},8145:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(54),i=t(162),l=t(33),c=t(298),u=t(7676),d=t(17),m=t.n(d),s=t(24),f=t(74),p=t(14),h=t(60),b=t(7661),g=t(321),v=t(22),E=t(7665),y=t(157),C=t(7796),w=t(301),O=t(59),j=t(28),_=t(30),I=t(25),x=t(163),P=t(7725),Z=t(18),z=t(68);function F(){return Object(z.useRouterContext)().match.params.zoneId}function S(){var e=Object(O.c)(),n=e.user,t=e.zone,a=Object(z.useRouterContext)().history,r=function(e){return"".concat("/settings/zones","/").concat(e)};return{getRouteToZone:r,routeToZoneEdit:function(e){t.map.panToZone(e),n.canQuery("zone")&&a.push(r(e))},routeToZoneList:function(){a.push("/settings/zones")}}}var k=t(73),N=t(7787),B=t(7669),M=t(7671),L=t(7663),D=t(7708),R=v.b.div.withConfig({displayName:"ZonePriceInput__LabelStyled",componentId:"sc-1fnhiox-0"})(["min-width:2rem;display:inline-block;"]),A=Object(v.b)(B.a).withConfig({displayName:"ZonePriceInput__FormInputTextBoxStyled",componentId:"sc-1fnhiox-1"})(["width:3rem;position:relative;z-index:4;"]),T=Object(v.b)(A).withConfig({displayName:"ZonePriceInput__FormInputTextBoxDeliveryStyled",componentId:"sc-1fnhiox-2"})(["color:",";"],Z.a.blue),V=v.b.div.withConfig({displayName:"ZonePriceInput__DeliveryContainer",componentId:"sc-1fnhiox-3"})(["position:relative;left:8rem;top:0rem;"]),G=v.b.div.withConfig({displayName:"ZonePriceInput__PriceRangeContainer",componentId:"sc-1fnhiox-4"})(["position:relative;left:4rem;top:-0.3rem;width:3rem;"]),q=v.b.div.withConfig({displayName:"ZonePriceInput__VerticalLine",componentId:"sc-1fnhiox-5"})(["border-left:3px solid #707070;width:3px;position:relative;left:-2rem;height:4rem;float:left;margin:-0.5rem 0 0 0;"]),H=function(e){if("number"===typeof e)return null;var n=e.trim();return n.length&&Number.isNaN(Number.parseFloat(n))?l.b._("Must be number"):null},U=r.a.forwardRef(function(e,n){var t=e.field,a=e.label,o=e.isDeliveryPrice,i=e.autoFocus,l=void 0!==i&&i;return o?r.a.createElement(V,null,r.a.createElement(q,null),r.a.createElement(R,null,a),r.a.createElement(T,{field:t,validate:H,ref:n})):r.a.createElement(G,null,r.a.createElement(A,{field:t,validate:H,autoFocus:l}))}),W=t(297),J=t(34),$=t(7950),K=t(160),Q=t(456),Y=v.b.div.withConfig({displayName:"ZoneColorSelector__ColorOption",componentId:"ugvber-0"})(["background-color:",";color:",";width:6rem;padding:0.4rem 1rem;margin:0;height:100%;"],function(e){return e.color},Z.a.white),X=Object(K.a)(Q.a),ee=function(e){var n=e.field,t=void 0===n?"zoneColor.id":n;return r.a.createElement(X,{render:function(e){var n=e.zoneColors;return r.a.createElement($.a,{field:t,fieldIsPure:!0,options:Object(W.a)(n),width:8,styles:{option:function(e){return Object(J.a)({},e,{padding:0,margin:0})},menu:function(e){return Object(J.a)({},e,{width:"8rem",maxWidth:"8rem"})}},defaultValue:I.a.head(n),getOptionValue:I.a.prop("id"),formatOptionLabel:function(e){return r.a.createElement(Y,{color:e.color},e.code)}})}})},ne=t(110),te=t(7670),ae=v.b.div.withConfig({displayName:"ZonePlaceholderInput__LabelStyled",componentId:"ao7y4l-0"})(["width:3rem;display:inline-block;"]),re=Object(v.b)(te.a).withConfig({displayName:"ZonePlaceholderInput__FormInputForPlaceholderStyled",componentId:"ao7y4l-1"})(["width:3rem;position:relative;z-index:4;"]),oe=v.b.div.withConfig({displayName:"ZonePlaceholderInput__Container",componentId:"ao7y4l-2"})(["margin:0 0 0 1rem;"]),ie=function(e){var n=e.label,t=e.display;return r.a.createElement(oe,null,r.a.createElement(ae,null,n),r.a.createElement(re,{disabled:!0,placeholder:t}))},le=v.b.div.withConfig({displayName:"ZoneFormPriceRange__AddButtonContainer",componentId:"d73mkp-0"})(["position:relative;top:-6rem;"]),ce=v.b.div.withConfig({displayName:"ZoneFormPriceRange__RemoveButtonContainer",componentId:"d73mkp-1"})(["position:relative;top:-7rem;left:16rem;height:0;"]),ue=function(e){var n=e.fieldApi;return r.a.createElement(r.a.Fragment,null,n.values.map(function(e,t,o){return r.a.createElement(a.Fragment,{key:t},r.a.createElement(U,{label:"za",isDeliveryPrice:!0,field:[t,"price","value"]}),t===o.length-1?r.a.createElement(ie,{display:"\u221e",label:"do"}):r.a.createElement(U,{field:[t,"toPrice","value"],autoFocus:!0}),o.length>1&&r.a.createElement(ce,null,r.a.createElement(P.a,{onDelete:function(){return n.removeValue("",t)}})))}),r.a.createElement(b.FormApi,{render:function(e){return r.a.createElement(le,null,r.a.createElement(ne.a,{disabled:e.submitting,width:Z.d.ButtonHeight+Z.d.DefaultSizeUnit,iconName:"add_circle",onClick:function(){return n.addValue("",{price:{value:0},toPrice:{value:0}})}}))}}))},de=v.b.div.withConfig({displayName:"ZoneFormContent__ZoneFormContentStyled",componentId:"sc-1ktmglh-0"})(["margin:",";color:",";"],Z.d.Middle,Z.a.black),me=v.b.div.withConfig({displayName:"ZoneFormContent__DescriptionUnderHeadline",componentId:"sc-1ktmglh-1"})(["color:",";padding-bottom:0.2rem;"],Z.a.greyDark),se=function(e){return r.a.createElement(de,null,r.a.createElement(L.a,{icon:"label"},r.a.createElement(B.a,{field:"name",validate:Object(D.b)(l.b._("Zone name"))})),r.a.createElement(L.a,{icon:"color_lens"},r.a.createElement(ee,null)),r.a.createElement(N.a,{field:"enabled",name:"enabled",label:l.b._("Is active").toLocaleLowerCase()}),r.a.createElement(k.Trans,{id:"<0>Delivery cost</0><1>according order total cost</1>",components:[r.a.createElement(M.a,{margin:"0.5rem 0 0 0"}),r.a.createElement(me,null)]}),r.a.createElement(U,{field:"minimalOrderPrice.value"}),r.a.createElement(b.NestedField,{field:"priceRangeRules",component:ue}))},fe=t(7683),pe=t(7677),he=function(e){var n=e.isSubmitting,t=e.isModified,a=e.onGoBack,o=e.onSave;return r.a.createElement(pe.a,null,r.a.createElement(fe.a,{widthGrowIndex:.4,padding:"0"},r.a.createElement(ne.a,{color:Z.a.greyMiddle,onClick:a,text:l.b._("Back"),disabled:n})),r.a.createElement(fe.a,{widthGrowIndex:.4,padding:"0"},r.a.createElement(E.a,{mutationName:"updateZone"},r.a.createElement(ne.a,{color:Z.a.green,text:l.b._("Save zone"),onClick:o,disabled:n||!t}))))},be=t(3),ge=t(4);function ve(){var e=Object(be.a)(["\n  query GZones($branchesId: [ID!]!) {\n    zones(companyBranches: $branchesId) {\n      ...FZone\n    }\n  }\n  ","\n"]);return ve=function(){return e},e}var Ee=t.n(ge)()(ve(),j.o),ye=Object(K.a)(Ee),Ce=r.a.createContext(null),we=Object(h.observer)(function(e){var n=e.children,t=Object(O.c)().zone,a=t.branches.filter(t.branchFilterPredicate);return 0===a.length?r.a.createElement(Ce.Provider,{value:[]},n):r.a.createElement(ye,{fetchPolicy:"cache-and-network",variables:{branchesId:a.map(I.a.prop("id"))},renderLoading:!1,render:function(e,t){var a=e.zones,o=t.loading;return r.a.createElement(Ce.Provider,{value:o?null:a},n)}})}),Oe=function(){return Object(a.useContext)(Ce)},je=v.b.div.withConfig({displayName:"ZoneFormPanel__DeleteButtonContainer",componentId:"sc-1drc2tm-0"})(["width:",";margin-top:",";"],Z.d.ButtonHeight+Z.d.DefaultSizeUnit,Z.d.Middle),_e=function(){var e=F(),n=Oe(),t=Object(O.c)().zone,o=S().routeToZoneList,i=Object(a.useState)(!1),c=Object(f.a)(i,2),u=c[0],d=c[1],v=Object(a.useRef)(null),Z=Object(x.a)(),z=Z.enqueueError,k=Z.enqueueSuccess,N=Object(j.W)(),B=Object(f.a)(N,1)[0],M=Object(a.useCallback)(function(){var n=Object(s.a)(m.a.mark(function n(a){return m.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=5;break}return n.next=3,B(t.getZoneVariables(e,a));case 3:n.sent&&(d(!1),o(),k(l.b._("Zone has been updated")));case 5:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}(),[e]),L=Object(a.useCallback)(Object(s.a)(m.a.mark(function n(){return m.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=3;break}return n.next=3,t.destroyZone(e);case 3:o();case 4:case"end":return n.stop()}},n,this)})),[e]);Object(h.useDisposable)(function(){return Object(p.reaction)(function(){return null!==t.map.currentZonePoints},d)}),r.a.useEffect(function(){n&&0===n.length&&(z(l.b._("Requested zone wasn't found")),o())},[n]);var D=e&&n&&n.find(I.a.propEq("id",e))||null;return r.a.useEffect(function(){t.map.clearZonePoints()},[D]),D?r.a.createElement(b.Form,{defaultValues:D,onChange:function(e){Object(_.b)("zone form change",e.values),d(!0)},onSubmit:M,render:function(e){return v.current=e,r.a.createElement(y.a,{padding:0},r.a.createElement(he,{isSubmitting:e.submitting,isModified:u,onSave:e.submitForm,onGoBack:o}),r.a.createElement(se,null),r.a.createElement(E.a,{mutationName:"destroyZone"},r.a.createElement(je,null,r.a.createElement(P.a,{disabled:e.submitting,confirmText:l.b._("Remove zone {0}?",{0:D.name}),onDelete:L}))),r.a.createElement(g.b,{when:u},function(e){var n=e.isShow,t=e.handleOk,a=e.handleCancel;return r.a.createElement(C.a,{isShow:n,confirmText:l.b._("Do you want to cancel changes for the zone?"),onConfirm:t,onCancel:a})}))}}):r.a.createElement(w.a,{text:l.b._("Loading form...")})},Ie=t(7739),xe=t(7704),Pe=t(70),Ze=v.b.div.withConfig({displayName:"MapCompanyBranchMarker__BranchNameStyled",componentId:"sc-1g1sfy5-0"})([""," font-size:1.3rem;white-space:nowrap;padding:0.2rem 0.5rem;"],function(e){var n=e.isActive;return Object(v.a)(["background-color:",";color:",";"],n?Z.a.green:Z.a.greyLight,n?Z.a.white:Z.a.greyDark)}),ze=function(e){var n=e.branch,t=e.isActive,a=void 0===t||t;return r.a.createElement(xe.OverlayView,{getPixelPositionOffset:function(e,n){return{x:-e/2,y:-n/2}},mapPaneName:xe.OverlayView.MARKER_LAYER,position:Object(Pe.b)(n.gps)},r.a.createElement(Ze,{isActive:a},n.name))};var Fe=function(e){var n=Object(a.useCallback)(function(n){e.onFocus&&(n.stop(),e.onFocus())},[e.onFocus]),t=e.points,o=e.color,i=e.priority;return r.a.createElement(xe.Polygon,{defaultPath:t.map(Pe.b),options:{fillColor:o,fillOpacity:.3,strokeWeight:0,zIndex:5e3-i},editable:!1,draggable:!1,onDblClick:n})},Se=function(e){var n=Object(a.useRef)(null),t=Object(a.useCallback)(function(){if(n.current){var t=n.current.getPath();e.onChange(t.getArray().map(Pe.c))}},[e.onChange]);Object(a.useEffect)(function(){var a;if(n.current&&e.onChange){var r=n.current.getPath();a=[r.addListener("set_at",t),r.addListener("insert_at",t),r.addListener("remove_at",t)]}return function(){e.onClear(),a&&a.forEach(function(e){return e.remove()})}},[]);var o=e.points,i=e.color;return r.a.createElement(xe.Polygon,{defaultPath:o.map(Pe.b),options:{fillColor:i,fillOpacity:.6,strokeWeight:2,zIndex:1e4},editable:!0,draggable:!0,ref:n,onDragEnd:t})};function ke(){return Object(O.c)().zone}var Ne=function(){var e=ke(),n=F(),t=Oe(),o=S().routeToZoneEdit,i=e.branches.filter(e.branchFilterPredicate),l=function(n){return!e.hasBranchFilter||n===e.branchFilterId},c=Object(a.useCallback)(function(e){return r.a.createElement(ze,{key:"branch".concat(e.id),branch:e,isActive:l(e.id)})},[]);return r.a.createElement(Ie.a,{model:e.map},t&&t.map(function(t){var a={key:"zone".concat(t.id),points:t.geoPolygon,priority:t.priority,color:l(t.companyBranch.id)&&t.enabled?t.zoneColor.color:Z.a.greyMiddle};return t.id===n?r.a.createElement(Se,Object.assign({},a,{onChange:e.map.updateZonePoints,onClear:e.map.clearZonePoints})):r.a.createElement(Fe,Object.assign({},a,{onFocus:function(){l(t.companyBranch.id)&&o(t.id)}}))}),i&&i.map(c))},Be=t(7685),Me=Object(h.observer)(function(){var e=ke(),n=S().routeToZoneEdit;return r.a.createElement(ne.a,{text:e.hasBranchFilter?l.b._("Create zone for branch"):l.b._("Select branch to create zone"),onClick:function(){return e.createZone(n)},disabled:!e.hasBranchFilter,color:Z.a.turquoise,textNextToIcon:!0,height:Z.d.ButtonHeight+Z.d.DefaultSizeUnit,iconName:"add_circle"})}),Le=t(7985),De=t(7786),Re=t(55),Ae=t(7732),Te=t(7789),Ve=t(295),Ge=v.b.div.withConfig({displayName:"ZoneListCard__ZoneNameStyled",componentId:"q1zjne-0"})(["font-size:1.125rem;margin-top:0.2rem;"]),qe=v.b.div.withConfig({displayName:"ZoneListCard__ZoneDescriptionStyled",componentId:"q1zjne-1"})(["font-size:0.875rem;"]),He=Object(v.b)(pe.a).withConfig({displayName:"ZoneListCard__ZoneFlexRowStyled",componentId:"q1zjne-2"})(["height:",";"],Z.d.ButtonHeight+Z.d.DefaultSizeUnit),Ue=Object(Ae.SortableElement)(function(e){var n=e.zone,t=e.branch,a=e.onEdit;return r.a.createElement(y.a,{key:n.id,padding:0,color:n.enabled?n.zoneColor.color:Z.a.greyMiddle,onClick:a},r.a.createElement(He,null,r.a.createElement(fe.a,{fixedWidth:!0,padding:"0 0.5rem 0 0"},r.a.createElement(Ve.a,null,r.a.createElement(ne.a,{iconName:"mode_edit"}))),r.a.createElement(fe.a,{widthGrowIndex:1},r.a.createElement(Ge,null,n.name," [P".concat(n.priority,"]")),r.a.createElement(qe,null,t.name)),r.a.createElement(fe.a,{padding:"0"},r.a.createElement(Te.a,null))))}),We=Object(Ae.SortableContainer)(v.b.div.withConfig({displayName:"ZoneList__ZoneListContainerStyled",componentId:"sc-1bn0od9-0"})(["margin-top:0.5rem;cursor:arrow;"])),Je=Re.sortWith([Re.ascend(Re.path(["companyBranch","name"])),Re.descend(Re.prop("priority"))]),$e=Re.groupBy(function(e){return e.companyBranch.id}),Ke=function(e){var n,t,o=e.branches,i=e.zones,l=e.zoneModel,c=e.onZoneEdit,u=function(e,n){return r.a.createElement(Ue,{key:e.id,zone:e,branch:o.find(Re.propEq("id",e.companyBranch.id)),index:n,collection:e.companyBranch.id,onEdit:function(){return c(e.id)}})};if(1===o.length){var d=Je(i);n=d.map(u),t=function(e){var n=e.oldIndex,t=e.newIndex,a=d[n];l.changeZonePriority(a,n,t)}}else{var m=Re.mapObjIndexed(Je,$e(i));n=o.map(function(e){var n=m[e.id];return n?function(e,n){return r.a.createElement(a.Fragment,{key:e.id},r.a.createElement(De.a,null,e.name),n.map(u))}(e,n):null}),t=function(e){var n=e.oldIndex,t=e.newIndex,a=e.collection,r=m[a][n];l.changeZonePriority(r,n,t)}}return r.a.createElement(We,{useDragHandle:!0,lockAxis:"y",onSortEnd:t},n)},Qe=function(){var e=Oe(),n=ke(),t=S().routeToZoneEdit;return null===e?r.a.createElement(Le.a,{primaryOpacity:.2,secondaryOpacity:.2}):null===n.brand?r.a.createElement(De.a,null,r.a.createElement(k.Trans,{id:"Select brand to see its zones"})):r.a.createElement(Ke,{zoneModel:n,zones:e.filter(n.zoneFilterPredicate),branches:n.root.user.filterBranches(n.branchFilterPredicate),onZoneEdit:t})},Ye=t(7680),Xe=t(7705),en=function(e){var n=e.branches,t=e.selectedBranch,a=e.onSelection,o=e.autoFocus;return r.a.createElement(Xe.a,{placeholder:l.b._("Select branch"),branches:n,selectedBranch:t,onSingleSelection:a,formatOptionLabel:I.a.prop("name"),isClearable:!0,autoFocus:o})},nn=t(7668),tn=function(e){var n=e.brands,t=e.selectedBrand,a=e.onSelection;return r.a.createElement(nn.a,{placeholder:l.b._("Select brand"),options:n,value:t,formatOptionLabel:I.a.prop("name"),getOptionValue:I.a.prop("id"),getOptionLabel:I.a.prop("name"),isClearable:!0,isSearchable:!0,onChange:function(e){return a(e)},autoFocus:!0})},an=Object(h.observer)(function(){var e=Object(O.c)(),n=e.user,t=e.zone,o=n.branches,i=Object(a.useCallback)(function(e){return null===e?[]:n.branches.filter(I.a.pathEq(["brand","id"],e.id))},[]);if(Object(h.useDisposable)(function(){return Object(p.autorun)(function(){1===o.length&&t.setBranchFilter(I.a.head(o))})}),o.length<=1)return null;var l=1===n.brands.length?I.a.head(n.brands):null;return l&&t.setBrandFilter(l,i(t.brand)),r.a.createElement(r.a.Fragment,null,!l&&r.a.createElement(tn,{brands:n.brands,selectedBrand:t.brand,onSelection:function(e){null===e?t.clearBrandFilter():t.setBrandFilter(e,i(e))}}),!l&&r.a.createElement(Ye.a,null),r.a.createElement(en,{branches:i(t.brand),selectedBranch:t.branch,autoFocus:Boolean(l),onSelection:function(e){e?t.setBranchFilter(e):t.clearBranchFilter()}}))}),rn=v.b.div.withConfig({displayName:"ZoneMenuPanel__ZoneMenuContainer",componentId:"a6twg1-0"})(["display:flex;flex-direction:column;height:100%;"]),on=v.b.div.withConfig({displayName:"ZoneMenuPanel__FixedHeaderContainer",componentId:"a6twg1-1"})(["flex:0 0 auto;"]),ln=v.b.div.withConfig({displayName:"ZoneMenuPanel__ScrollAreaContainer",componentId:"a6twg1-2"})(["flex:1 1 0;min-height:0;"]),cn=function(){return r.a.createElement(rn,null,r.a.createElement(on,null,r.a.createElement(y.a,null,r.a.createElement(an,null)),r.a.createElement(E.a,{mutationName:"createZone"},r.a.createElement(Me,null))),r.a.createElement(ln,null,r.a.createElement(Be.a,null,r.a.createElement(Qe,null))))},un=function(e){var n=e.match,t=Boolean(n.params.zoneId);return r.a.createElement(we,null,r.a.createElement(c.a,{pageTitle:l.b._("Delivery zones"),useBackButton:!0,backRoute:"/settings"}),r.a.createElement(u.a,{widthInColumns:6,column:10,withScrollArea:t},t?r.a.createElement(_e,null):r.a.createElement(cn,null)),r.a.createElement(u.a,{widthInColumns:10},r.a.createElement(Ne,null)))};t.d(n,"ZoneMenuRoutes",function(){return dn});var dn=function(){var e=S().getRouteToZone;return r.a.createElement(o.Switch,null,r.a.createElement(o.Route,{path:e(":zoneId?"),component:un}),r.a.createElement(o.Route,{component:i.a}))};n.default=dn}}]);
//# sourceMappingURL=177.d08f0704.chunk.js.map