(window.webpackJsonpspeedlo=window.webpackJsonpspeedlo||[]).push([[185],{1456:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n(64),r=n(0),c=n.n(r),i=n(1454),u=n(1462),o=Object(a.b)(function(e){var t=e.mutationName,n=e.children;return Object(i.b)(t)?c.a.createElement(c.a.Fragment,null,n):c.a.createElement(u.a,null,"No access to mutation ".concat(t))})},1468:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var a=n(4);function r(){var e=Object(a.a)(["\n  flex: ",";\n  padding: ",";\n  margin: ",";\n"]);return r=function(){return e},e}var c=n(24).c.div(r(),function(e){var t=e.fixedWidth,n=void 0!==t&&t,a=e.width,r=e.widthGrowIndex,c=void 0===r?0:r;return n?a?"0 0 ".concat(a):"0 0":"".concat(c," 0")},function(e){var t=e.padding;return void 0===t?"0.25rem":t},function(e){var t=e.margin;return void 0===t?"":t})},1509:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n(64),r=n(0),c=n.n(r),i=n(1454),u=n(1462),o=Object(a.b)(function(e){var t=e.queryName,n=e.children;return Object(i.c)(t)?c.a.createElement(c.a.Fragment,null,n):c.a.createElement(u.a,null,"No access to query ".concat(t))})},1521:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var a=n(88),r=n(21),c=n(1453),i=n(64),u=n(0),o=n.n(u),l=n(1458),s=o.a.forwardRef(function(e,t){var n=e.fieldName,u=e.fullWidth,s=e.addHiddenLabelWithPlaceholderText,m=void 0===s||s,d=Object(r.a)(e,["fieldName","fullWidth","addHiddenLabelWithPlaceholderText"]),f=Object(c.e)(n),b=Object(a.a)(f,2),h=b[0],p=b[1];return Object(i.g)(function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(l.b,Object.assign({},p(),{invalid:h.touched&&Boolean(h.error),inputFullWidth:u,ref:t},d)),m&&d.placeholder&&o.a.createElement("label",{hidden:!0,htmlFor:h.name},d.placeholder))})})},1523:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var a=n(21),r=n(1826),c=n(0),i=n.n(c),u=n(332),o=n(20),l=n(139),s=function(e){var t=e.onDelete,n=e.confirmText,c=Object(a.a)(e,["onDelete","confirmText"]);return i.a.createElement(u.a,null,i.a.createElement(l.a,Object.assign({icon:r.a,color:o.a.greyMiddle,onClick:function(e){e.preventDefault(),n&&!window.confirm(n)||t()}},c)))}},1535:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var a=n(1652),r=n(2798),c=n(0),i=n.n(c),u=function(e){var t=e.children;return i.a.createElement(r.b,{utils:a.a},t)}},1621:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var a=n(21),r=n(1842),c=n(1453),i=n(64),u=n(0),o=n.n(u),l=n(139),s=n(20),m=function(e){var t=e.children,n=e.id,u=void 0===n?"form-submit":n,m=Object(a.a)(e,["children","id"]),d=Object(c.h)();return Object(i.g)(function(){return o.a.createElement(l.a,Object.assign({type:"submit",color:s.a.green,disabled:d.isSubmitting&&d.isDirty,id:u,icon:d.isValid?void 0:r.a,iconSize:1.1,iconColor:s.a.red},m),o.a.createElement(o.a.Fragment,null,t))})}},1622:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a=n(24).c.div.withConfig({displayName:"FlexDiv",componentId:"dwel3j-0"})(["display:flex;"])},1650:function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(48);t.a=Object(c.a)(r.a.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"}),"AddCircle")},1793:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n(4),r=n(24),c=n(20),i=n(1622);function u(){var e=Object(a.a)(["\n  flex-direction: row;\n  justify-content: space-between;\n  border-bottom: 1px solid ",";\n  padding: 0.1rem 0 0.1rem 0;\n"]);return u=function(){return e},e}var o=Object(r.c)(i.a)(u(),c.a.greyMiddle)},1794:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n(60);function r(){return Object(a.b)().settings}},1801:function(e,t,n){"use strict";var a=n(88),r=n(21),c=n(1453),i=n(64),u=n(0),o=n.n(u),l=n(246),s=n(8),m=n(1463),d=n(34),f=n(1577),b=n(1626),h=n(511),p=n(1576),v=Object(h.a)({toolbar:{flexDirection:"column",alignItems:"flex-start"},toolbarLandscape:{padding:16},dateLandscape:{marginRight:16}},{name:"MuiPickersDatePickerRoot"}),E=function(e){var t=e.date,n=e.views,a=e.setOpenView,r=e.isLandscape,c=e.openView,i=Object(m.a)(),o=v(),l=u.useMemo(function(){return Object(p.d)(n)},[n]),s=u.useMemo(function(){return Object(p.c)(n)},[n]);return u.createElement(b.a,{isLandscape:r,className:Object(d.a)(!l&&o.toolbar,r&&o.toolbarLandscape)},u.createElement(f.a,{variant:l?"h3":"subtitle1",onClick:function(){return a("year")},selected:"year"===c,label:i.getYearText(t)}),!l&&!s&&u.createElement(f.a,{variant:"h4",selected:"date"===c,onClick:function(){return a("date")},align:r?"left":"center",label:i.getDatePickerHeaderText(t),className:Object(d.a)(r&&o.dateLandscape)}),s&&u.createElement(f.a,{variant:"h4",onClick:function(){return a("month")},selected:"month"===c,label:i.getMonthText(t)}))},O=n(1561),g=n(1625),j=n(1624),w=Object(s.a)({},O.a,{openTo:"date",views:["year","date"]});function D(e){var t=Object(m.a)();return{getDefaultFormat:function(){return Object(p.b)(e.views,t)}}}var y=Object(g.a)({useOptions:D,DefaultToolbarComponent:E}),T=Object(j.a)({useOptions:D,DefaultToolbarComponent:E});y.defaultProps=w,T.defaultProps=w;var k=n(1535),A=function(e){return o.a.createElement(k.a,null,o.a.createElement(y,Object.assign({variant:"inline",format:"ll",maxDateMessage:l.i18n._("Date is too much in the future"),minDateMessage:l.i18n._("Date is too much in the past")},e)))};n.d(t,"a",function(){return x});var x=function(e){var t=e.fieldName,n=Object(r.a)(e,["fieldName"]),u=Object(c.e)(t),l=Object(a.a)(u,2),s=l[0],m=l[1];return Object(i.g)(function(){return o.a.createElement(A,Object.assign({},m(),{onChange:s.setValue,onOpen:s.setTouched},n))})}},1826:function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(48);t.a=Object(c.a)(r.a.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete")},1842:function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(48);t.a=Object(c.a)(r.a.createElement(r.a.Fragment,null,r.a.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"}),r.a.createElement("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),"ErrorOutline")},2870:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(68),i=n(201),u=n(116),o=n(333),l=n(102),s=n(1456),m=n(1509),d=n(198),f=n(1464),b=n(335),h=n(46),p=n(199),v=n(1524),E=n(36),O=n.n(E),g=n(93),j=n(81),w=n(88),D=n(47),y=n(19),T=n(64),k=n(339),A=n(60),x=n(140),C=n(72),M=n(176),N=n(200),H=n(139),F=n(20),I=n(4),P=n(1826),S=n(1650),L=n(24),W=n(332),z=n(8),R=n(1655),V=n(1463),_=n(1561),B=n(1562),q=n(1625),Y=n(1624),G=Object(z.a)({},_.c,{openTo:"hours",views:["hours","minutes"]});function J(e){var t=Object(V.a)();return{getDefaultFormat:function(){return Object(B.d)(e.format,e.ampm,{"12h":t.time12hFormat,"24h":t.time24hFormat})}}}var U=Object(q.a)({useOptions:J,DefaultToolbarComponent:R.a}),K=Object(Y.a)({useOptions:J,DefaultToolbarComponent:R.a,getCustomProps:function(e){return{refuse:e.ampm?/[^\dap]+/gi:/[^\d]+/gi}}});U.defaultProps=G,K.defaultProps=G;var Q=n(1535),X=function(e){return r.a.createElement(Q.a,null,r.a.createElement(U,Object.assign({format:"LT",variant:"inline"},e)))};function Z(){var e=Object(I.a)(["\n  & input {\n    width: 5rem;\n  }\n"]);return Z=function(){return e},e}var $=L.c.div(Z()),ee=r.a.memo(function(e){var t=e.hour;return Object(T.g)(function(){return r.a.createElement($,null,r.a.createElement(X,{value:t.openAt,onChange:function(e){return t.openAt=e},label:r.a.createElement(l.Trans,{id:"input.timespan.from"}),fullWidth:!1}),r.a.createElement(X,{value:t.closeAt,onChange:function(e){return t.closeAt=e},label:r.a.createElement(l.Trans,{id:"input.timespan.to"}),fullWidth:!1}))})});function te(){var e=Object(I.a)(["\n  display: flex;\n  align-items: baseline;\n  margin: 0 0 0.3rem 0;\n  h5 {\n    width: 5rem;\n  }\n  & .range {\n    display: flex;\n    margin: 0 2rem 0 0;\n    padding-right: 1rem;\n    background: ",";\n    border-radius: ",";\n  }\n  .remove-btn {\n    margin-right: 1rem;\n  }\n"]);return te=function(){return e},e}var ne=L.c.article(te(),F.a.white,F.c.Button),ae=r.a.memo(function(e){var t=e.weekday,n=e.hours,a=e.onAdd,c=e.onRemove,i=function(e){return r.a.createElement("div",{key:e.id,"data-testid":"bh-range",className:"range"},r.a.createElement(W.a,{className:"remove-btn"},r.a.createElement(H.a,{title:h.b._("Remove business hour"),role:"button",onClick:function(){return c(e.id)}},r.a.createElement(P.a,null))),r.a.createElement(ee,{hour:e}))};return Object(T.g)(function(){return r.a.createElement(ne,null,r.a.createElement("h5",null,t.code),0===n.length?r.a.createElement("em",null,r.a.createElement(l.Trans,{id:"Closed"})):n.map(i),r.a.createElement(W.a,null,r.a.createElement(H.a,{title:h.b._("Add business hour"),role:"button",onClick:a},r.a.createElement(S.a,null))))})}),re=D.DFP.parse(new Date,"H:mm"),ce=Object(T.b)(function(){var e=Object(A.b)().settings,t=Object(C.Pb)({branchId:e.branchId}),n=t.data,a=t.loading,c=r.a.useState(function(){return Object(y.observable)(new Map)}),i=Object(w.a)(c,1)[0],u=Object(C.B)(),o=Object(w.a)(u,1)[0];r.a.useEffect(function(){if(!a)return 0===i.size&&n.weekDays.forEach(function(e){i.set(e.enum,y.observable.array([]))}),n.businessHours.forEach(function(e){var t=e.id,n=e.openAt,a=e.closeAt,r=e.weekDay;r&&i.get(r.enum).push({id:t,openAt:re(n),closeAt:re(a),weekDay:r.enum})}),function(){i.forEach(function(e){e.clear()})}},[n.businessHours,n.weekDays,a,e.branchId]);var l=r.a.useRef(0),s=function(e){return function(t){var n=i.get(e),a=n.findIndex(D.RM.propEq("id",t));a>=0&&n.splice(a,1)}},m=Object(N.a)().enqueueSuccess,d=r.a.useCallback(Object(j.a)(O.a.mark(function t(){var n;return O.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=[],i.forEach(function(e,t){n.push.apply(n,Object(g.a)(e.map(function(e){return{openAt:Object(M.f)(e.openAt),closeAt:Object(M.f)(e.closeAt),weekDay:t}})))}),t.next=4,o({branchId:e.branchId,hours:n});case 4:t.sent&&m(h.b._("Regular business hours has been updated"));case 6:case"end":return t.stop()}},t)})),[i,m,e.branchId,o]);return a||0===i.size?r.a.createElement(k.a,null):r.a.createElement("div",null,n.weekDays.map(function(e){return r.a.createElement(ae,{key:e.enum,weekday:e,hours:i.get(e.enum),onAdd:(t=e.enum,function(){i.get(t).push({weekDay:t,id:"L".concat(l.current++),openAt:D.DFP.startOfDay(new Date),closeAt:D.DFP.endOfDay(new Date)})}),onRemove:s(e.enum)});var t}),r.a.createElement(x.a,{width:20},r.a.createElement(b.a,{margin:"1rem"},r.a.createElement(H.a,{text:h.b._("Save regular hours"),color:F.a.green,onClick:d}))))}),ie=n(1453),ue=n(94),oe=n(1521),le=n(1801),se=n(21),me=r.a.memo(function(e){var t=e.fieldName,n=Object(se.a)(e,["fieldName"]),a=Object(ie.e)(t),c=Object(w.a)(a,2),i=c[0],u=c[1];return Object(T.g)(function(){return r.a.createElement(X,Object.assign({},u(),{onChange:i.setValue,onOpen:i.setTouched},n))})});function de(){var e=Object(I.a)(["\n  width: 5rem;\n  display: inline-block;\n"]);return de=function(){return e},e}var fe,be=L.c.div(de()),he=function(e){var t=e.fieldFrom,n=e.fieldTo;return r.a.createElement(r.a.Fragment,null,r.a.createElement(be,null,r.a.createElement(me,{fieldName:t,label:r.a.createElement(l.Trans,{id:"input.timespan.from"}),fullWidth:!1})),r.a.createElement(be,null,r.a.createElement(me,{fieldName:n,label:r.a.createElement(l.Trans,{id:"input.timespan.to"}),fullWidth:!1})))},pe=n(1621),ve=n(362),Ee=n(31),Oe=n(246),ge=n(1469),je=n(1794),we=(fe={},Object(Ee.a)(fe,ve.b.TIMESPAN,Object(Oe.i18nMark)("Open between")),Object(Ee.a)(fe,ve.b.FULLDAY,Object(Oe.i18nMark)("Closed")),fe),De=r.a.memo(function(){var e=Object(je.a)().businessHours;return Object(T.g)(function(){return r.a.createElement(ge.a,{items:[ve.b.TIMESPAN,ve.b.FULLDAY],selectedItem:e.specificMode,formatItem:function(e){return h.b._(we[e])},onSingleSelection:function(t){return e.changeSpecificMode(t)}})})});function ye(){var e=Object(I.a)(["\n  display: inline-block;\n  width: 16rem;\n  min-height: 6rem;\n  margin: 0rem 0 0 1rem;\n  vertical-align: top;\n"]);return ye=function(){return e},e}function Te(){var e=Object(I.a)(["\n  display: inline-block;\n  width: 13rem;\n  margin-left: 1rem;\n  margin-top: 2rem;\n"]);return Te=function(){return e},e}var ke=L.c.div(Te()),Ae=L.c.div(ye()),xe=function(e){var t=Object(A.b)().settings.businessHours;return r.a.createElement(ie.a,{onSubmit:t.submitSpecificHour,initialValues:Ce()},r.a.createElement(ke,null,r.a.createElement(le.a,{fieldName:"date",format:M.h,minDate:new Date,fullWidth:!0,label:r.a.createElement(l.Trans,{id:"Date"})})),r.a.createElement(Ae,null,r.a.createElement(De,null),r.a.createElement(T.a,null,function(){return t.specificMode===ve.b.TIMESPAN?r.a.createElement(he,{fieldFrom:"openAt",fieldTo:"closeAt"}):r.a.createElement(x.a,{width:13},r.a.createElement(oe.a,{fieldName:"note",fullWidth:!0,placeholder:h.b._("Closing reason")}))})),r.a.createElement(pe.a,{width:"9rem"},r.a.createElement(l.Trans,{id:"Add"})))};function Ce(){var e=new Date;return{date:e,openAt:Object(ue.setHours)(Object(ue.setMinutes)(e,0),9),closeAt:Object(ue.setHours)(Object(ue.setMinutes)(e,0),20)}}var Me=n(42),Ne=n(1468),He=n(1793),Fe=n(1523),Ie=function(e){var t=e.bsHour,n=e.onDelete;return r.a.createElement(He.a,null,r.a.createElement(Ne.a,{fixedWidth:!0},r.a.createElement(s.a,{mutationName:"destroyBusinessHour"},r.a.createElement(Fe.a,{onDelete:n,confirmText:"".concat(h.b._("Really remove specific business hour {0}?",{0:t.specificDateLocalized}))}))),r.a.createElement(Ne.a,{fixedWidth:!0,width:"14rem"},t.specificDateLocalized),r.a.createElement(Ne.a,{fixedWidth:!0,width:"10rem"},function(e){return"".concat(e.openAt," - ").concat(e.closeAt)}(t)),r.a.createElement(Ne.a,{fixedWidth:!0,width:"10rem"},t.closed?r.a.createElement(l.Trans,{id:"Closed"}):r.a.createElement(l.Trans,{id:"Open"})),r.a.createElement(Ne.a,{widthGrowIndex:1},t.closedNote))};var Pe=n(508),Se=Me.a.sort(Me.a.ascend(Me.a.or(Me.a.prop("specificDate"),Me.a.not))),Le=function(){var e=Object(A.b)().settings;return Object(T.g)(function(){return r.a.createElement(Pe.a,{variables:{branchId:e.branchId},fetchPolicy:"cache-and-network",renderFragment:function(t){var n=t.businessHours;return Se(n).map(function(t){return r.a.createElement(Ie,{key:t.id,bsHour:t,onDelete:function(){return e.businessHours.deleteSpecificHour(t.id)}})})}})})},We=function(){return r.a.createElement(p.a,{pageTitle:h.b._("Business hours"),useBackButton:!0},r.a.createElement(d.a,null,r.a.createElement(v.a,null),r.a.createElement(m.a,{queryName:"businessHours"},r.a.createElement(f.a,null,r.a.createElement(b.a,{margin:"1rem 0"},r.a.createElement(l.Trans,{id:"Regular business hours"}))),r.a.createElement(ce,null)),r.a.createElement(f.a,null,r.a.createElement(b.a,{margin:"1rem 0"},r.a.createElement(l.Trans,{id:"Specific business hours"}))),r.a.createElement(Le,null),r.a.createElement(s.a,{mutationName:"addSpecialBusinessHour"},r.a.createElement(f.a,null,r.a.createElement(b.a,{margin:"1rem 0"},r.a.createElement(l.Trans,{id:"Add specific business hour"}))),r.a.createElement(xe,null))))};n.d(t,"BusinessHoursRouting",function(){return ze});var ze=function(){return r.a.createElement(c.e,null,r.a.createElement(u.a,{exact:!0,path:o.b,component:We}),r.a.createElement(c.c,{component:i.a}))};t.default=ze}}]);
//# sourceMappingURL=185.f2399869.chunk.js.map