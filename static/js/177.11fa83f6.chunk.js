(window.webpackJsonp=window.webpackJsonp||[]).push([[177],{7671:function(e,n,t){"use strict";t.d(n,"a",function(){return d});var a=t(0),r=t.n(a),o=t(18),i=t(7681),l=t(12),c=o.b.div.withConfig({displayName:"PageLayoutFullHeightItem__FullHeightDiv",componentId:"sc-1mean6j-0"})(["position:fixed;bottom:0.5rem;width:",";left:",";top:",";"],function(e){return void 0!==e.widthInColumns?"calc(("+e.widthInColumns+" * 6.22vw) - "+l.d.LayoutGridCellMargin+")":"calc(100vh - (2 * "+l.d.LayoutGridCellMargin+"))"},function(e){return void 0!==e.column?"calc(("+e.column+" * 6.22vw) + "+l.d.LayoutGridCellMargin+")":l.d.LayoutGridCellMargin},function(e){return void 0!==e.row?"calc(("+e.row+" * 3.9375rem) + "+l.d.LayoutGridCellMargin+")":"calc(3.9375rem + "+l.d.LayoutGridCellMargin+")"}),u=o.b.div.withConfig({displayName:"PageLayoutFullHeightItem__FullHeightDivStyled",componentId:"sc-1mean6j-1"})(["height:100%;"]),d=function(e){var n=e.children,t=e.row,a=void 0===t?1:t,o=e.column,l=void 0===o?0:o,d=e.widthInColumns,m=void 0===d?16:d,s=e.withScrollArea,f=void 0!==s&&s,p=e.scrollAreaId;return r.a.createElement(c,{column:l,row:a,widthInColumns:m,withScrollArea:f},f?r.a.createElement(i.a,{id:p},n):r.a.createElement(u,null,n))}},7672:function(e,n,t){"use strict";t.d(n,"a",function(){return a});var a=t(18).b.div.withConfig({displayName:"FlexRowSingle",componentId:"sc-1opww0j-0"})(["display:flex;flex-direction:row;justify-content:",";"],function(e){var n=e.justify;return void 0===n?"space-between":n})},7676:function(e,n,t){"use strict";t.d(n,"a",function(){return a});var a=t(18).b.div.withConfig({displayName:"VerticalGap",componentId:"z6ukut-0"})(["height:",";"],function(e){var n=e.size,t=void 0===n?1:n,a=e.sizeUnit,r=void 0===a?"rem":a;return"".concat(t).concat(r)});a.displayName="VerticalGap"},7681:function(e,n,t){"use strict";t.d(n,"a",function(){return a});var a=t(18).b.div.withConfig({displayName:"ScrollArea",componentId:"v30w13-0"})(["overflow-y:auto;-webkit-overflow-scrolling:touch;height:100%;"])},7728:function(e,n,t){"use strict";t.d(n,"a",function(){return o});var a=t(18),r=t(12),o=a.b.h2.withConfig({displayName:"CardListTitle",componentId:"dr5aqq-0"})(["color:",";font-weight:lighter;font-size:1.2rem;margin:0.8rem 0 0.8rem 0.3rem;"],r.a.greyLight)},7736:function(e,n,t){"use strict";t.d(n,"a",function(){return w}),t.d(n,"b",function(){return O});var a=t(151),r=t(99),o=t(100),i=t(102),l=t(101),c=t(103),u=t(310),d=t(10),m=t(0),s=t.n(m),f=t(7700),p=t(7657),h=t(18),b=t(12),g=h.b.div.withConfig({displayName:"BaseMap__MapContainerStyled",componentId:"sc-1juok8u-0"})(["border-radius:",";overflow:hidden;height:100%;"],b.c.Card),v=Object(f.withGoogleMap)(function(e){var n=e.children;return s.a.createElement(s.a.Fragment,null,n)}),E=s.a.createContext(null),y=s.a.createContext(null),C=function(e){function n(e,t){var a;return Object(r.a)(this,n),(a=Object(i.a)(this,Object(l.a)(n).call(this,e))).map=void 0,a.map=t[p.MAP],a}return Object(c.a)(n,e),Object(o.a)(n,[{key:"render",value:function(){return s.a.createElement(y.Provider,{value:this.map},this.props.children)}}]),n}(s.a.PureComponent);C.contextTypes=Object(a.a)({},p.MAP,d.object);var w=function(e){var n=e.model,t=e.children,a={streetViewControl:!1,mapTypeControl:!1,fullscreenControl:!1};return s.a.createElement(E.Provider,{value:n},s.a.createElement(v,{containerElement:s.a.createElement(g,null),mapElement:s.a.createElement("div",{style:{height:"100%"}})},s.a.createElement(C,null,s.a.createElement(u.a,null,function(){return s.a.createElement(f.GoogleMap,{ref:n.setMapRef,zoom:n.zoom,center:n.center,onCenterChanged:n.updatePosition,onZoomChanged:n.updateZoom,options:a},t)}))))};function O(){var e=Object(m.useContext)(y);if(!e)throw new Error("Trying to useGoogleMap, but BaseMap is missing in the tree");return e}},7785:function(e,n,t){"use strict";t.d(n,"a",function(){return u});var a=t(0),r=t.n(a),o=t(7777),i=t(18),l=t(88),c=i.b.div.withConfig({displayName:"DragHandle__DragHandleContainerStyled",componentId:"xbsz8c-0"})(["padding:1rem 0.4rem;cursor:grab;"]),u=Object(o.SortableHandle)(function(){return r.a.createElement(c,null,r.a.createElement(l.a,{iconName:"reorder"}))})},7792:function(e,n,t){"use strict";t.d(n,"a",function(){return r});var a=t(0),r=function(e){return Object(a.useEffect)(function(){e.isShow&&(window.confirm(e.confirmText)?e.onConfirm():e.onCancel())},[e.isShow]),null}},7946:function(e,n,t){"use strict";t.d(n,"a",function(){return b});var a=t(22),r=t(40),o=t(99),i=t(100),l=t(102),c=t(101),u=t(103),d=t(0),m=t.n(d),s=t(7656),f=t(21),p=t(38),h=t(7663),b=function(e){function n(){var e,t;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=Object(l.a)(this,(e=Object(c.a)(n)).call.apply(e,[this].concat(r)))).validate=function(e){return t.props.isRequired&&!e?p.d._("{0} must be selected",{0:t.props.validatioName}):null},t}return Object(u.a)(n,e),Object(i.a)(n,[{key:"getControlProps",value:function(e){var n=this.props,t=n.isMulti,a=n.options,r=n.getOptionValue,o=n.defaultValue,i=e.value||o;if(t){var l=Array.isArray(i)?function(e){return i.includes(r(e))}:f.a.F;return{value:Array.isArray(a)?a.filter(l):[],onChange:function(n){e.setValue(n.map(r))}}}return{value:i&&a.find(function(e){return r(e)===i}),onChange:function(n){e.setValue(r(n))}}}},{key:"render",value:function(){var e=this,n=this.props,t=n.field,o=n.fieldIsPure,i=void 0!==o&&o,l=(n.isRequired,n.defaultValue,Object(r.a)(n,["field","fieldIsPure","isRequired","defaultValue"]));return m.a.createElement(s.Field,{field:t,validate:this.validate,pure:i},function(n){return m.a.createElement(h.a,Object.assign({},e.getControlProps(n),{onFocus:function(){return n.setTouched(!0)},styles:{control:function(e){return Boolean(n.error)?Object(a.a)({},e,{borderColor:"red"}):e}}},l))})}}]),n}(m.a.Component);b.defaultProps={validatioName:"Value",getItemId:f.a.prop("id")}},8137:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(42),i=t(153),l=t(38),c=t(303),u=t(7671),d=t(8),m=t.n(d),s=t(11),f=t(124),p=t(6),h=t(47),b=t(7656),g=t(328),v=t(18),E=t(7661),y=t(298),C=t(7792),w=t(307),O=t(53),I=t(15),_=t(21),j=t(302),x=t(7722),P=t(12),Z=t(64);function F(){return Object(Z.useRouterContext)().match.params.zoneId}function z(){var e=Object(O.c)(),n=e.user,t=e.zone,a=Object(Z.useRouterContext)().history,r=function(e){return"".concat("/settings/zones","/").concat(e)};return{getRouteToZone:r,routeToZoneEdit:function(e){t.map.panToZone(e),n.canQuery("zone")&&a.push(r(e))},routeToZoneList:function(){a.push("/settings/zones")}}}var k=t(66),N=t(7783),S=t(7664),B=t(7665),M=t(7658),L=t(7704),R=v.b.div.withConfig({displayName:"ZonePriceInput__LabelStyled",componentId:"sc-1fnhiox-0"})(["min-width:2rem;display:inline-block;"]),A=Object(v.b)(S.a).withConfig({displayName:"ZonePriceInput__FormInputTextBoxStyled",componentId:"sc-1fnhiox-1"})(["width:3rem;position:relative;z-index:4;"]),T=Object(v.b)(A).withConfig({displayName:"ZonePriceInput__FormInputTextBoxDeliveryStyled",componentId:"sc-1fnhiox-2"})(["color:",";"],P.a.blue),D=v.b.div.withConfig({displayName:"ZonePriceInput__DeliveryContainer",componentId:"sc-1fnhiox-3"})(["position:relative;left:8rem;top:0rem;"]),V=v.b.div.withConfig({displayName:"ZonePriceInput__PriceRangeContainer",componentId:"sc-1fnhiox-4"})(["position:relative;left:4rem;top:-0.3rem;width:3rem;"]),G=v.b.div.withConfig({displayName:"ZonePriceInput__VerticalLine",componentId:"sc-1fnhiox-5"})(["border-left:3px solid #707070;width:3px;position:relative;left:-2rem;height:4rem;float:left;margin:-0.5rem 0 0 0;"]),H=function(e){if("number"===typeof e)return null;var n=e.trim();return n.length&&Number.isNaN(Number.parseFloat(n))?l.d._("Must be number"):null},q=r.a.forwardRef(function(e,n){var t=e.field,a=e.label,o=e.isDeliveryPrice,i=e.autoFocus,l=void 0!==i&&i;return o?r.a.createElement(D,null,r.a.createElement(G,null),r.a.createElement(R,null,a),r.a.createElement(T,{field:t,validate:H,ref:n})):r.a.createElement(V,null,r.a.createElement(A,{field:t,validate:H,autoFocus:l}))}),W=t(301),J=t(22),U=t(7946),$=t(71),K=t(148),Q=v.b.div.withConfig({displayName:"ZoneColorSelector__ColorOption",componentId:"ugvber-0"})(["background-color:",";color:",";width:6rem;padding:0.4rem 1rem;margin:0;height:100%;"],function(e){return e.color},P.a.white),Y=Object($.a)(K.a),X=function(e){var n=e.field,t=void 0===n?"zoneColor.id":n;return r.a.createElement(Y,{render:function(e){var n=e.zoneColors;return r.a.createElement(U.a,{field:t,fieldIsPure:!0,options:Object(W.a)(n),width:8,styles:{option:function(e){return Object(J.a)({},e,{padding:0,margin:0})},menu:function(e){return Object(J.a)({},e,{width:"8rem",maxWidth:"8rem"})}},defaultValue:_.a.head(n),getOptionValue:_.a.prop("id"),formatOptionLabel:function(e){return r.a.createElement(Q,{color:e.color},e.code)}})}})},ee=t(295),ne=t(7667),te=v.b.div.withConfig({displayName:"ZonePlaceholderInput__LabelStyled",componentId:"ao7y4l-0"})(["width:3rem;display:inline-block;"]),ae=Object(v.b)(ne.a).withConfig({displayName:"ZonePlaceholderInput__FormInputForPlaceholderStyled",componentId:"ao7y4l-1"})(["width:3rem;position:relative;z-index:4;"]),re=v.b.div.withConfig({displayName:"ZonePlaceholderInput__Container",componentId:"ao7y4l-2"})(["margin:0 0 0 1rem;"]),oe=function(e){var n=e.label,t=e.display;return r.a.createElement(re,null,r.a.createElement(te,null,n),r.a.createElement(ae,{disabled:!0,placeholder:t}))},ie=v.b.div.withConfig({displayName:"ZoneFormPriceRange__AddButtonContainer",componentId:"d73mkp-0"})(["position:relative;top:-6rem;"]),le=v.b.div.withConfig({displayName:"ZoneFormPriceRange__RemoveButtonContainer",componentId:"d73mkp-1"})(["position:relative;top:-7rem;left:16rem;"]),ce=function(e){var n=e.fieldApi;return r.a.createElement(r.a.Fragment,null,n.values.map(function(e,t,o){return r.a.createElement(a.Fragment,{key:t},r.a.createElement(q,{label:"za",isDeliveryPrice:!0,field:[t,"price","value"]}),t===o.length-1?r.a.createElement(oe,{display:"\u221e",label:"do"}):r.a.createElement(q,{field:[t,"toPrice","value"],autoFocus:!0}),o.length>1&&r.a.createElement(le,null,r.a.createElement(x.a,{onDelete:function(){return n.removeValue("",t)}})))}),r.a.createElement(b.FormApi,{render:function(e){return r.a.createElement(ie,null,r.a.createElement(ee.a,{disabled:e.submitting,width:P.d.ButtonHeight,iconName:"add_circle",onClick:function(){return n.addValue("",{price:{value:0},toPrice:{value:0}})}}))}}))},ue=v.b.div.withConfig({displayName:"ZoneFormContent__ZoneFormContentStyled",componentId:"sc-1ktmglh-0"})(["margin:",";color:",";"],P.d.Middle,P.a.black),de=v.b.div.withConfig({displayName:"ZoneFormContent__DescriptionUnderHeadline",componentId:"sc-1ktmglh-1"})(["color:",";padding-bottom:0.2rem;"],P.a.greyDark),me=function(e){return r.a.createElement(ue,null,r.a.createElement(M.a,{icon:"label"},r.a.createElement(S.a,{field:"name",validate:Object(L.b)(l.d._("Zone name"))})),r.a.createElement(M.a,{icon:"color_lens"},r.a.createElement(X,null)),r.a.createElement(N.a,{field:"enabled",name:"enabled",label:l.d._("Is active").toLocaleLowerCase()}),r.a.createElement(k.Trans,{id:"<0>Delivery cost</0><1>according order total cost</1>",components:[r.a.createElement(B.a,{margin:"0.5rem 0 0 0"}),r.a.createElement(de,null)]}),r.a.createElement(q,{field:"minimalOrderPrice.value"}),r.a.createElement(b.NestedField,{field:"priceRangeRules",component:ce}))},se=t(7678),fe=t(7672),pe=function(e){var n=e.isSubmitting,t=e.isModified,a=e.onGoBack,o=e.onSave;return r.a.createElement(fe.a,null,r.a.createElement(se.a,{widthGrowIndex:.4,padding:"0"},r.a.createElement(ee.a,{color:P.a.greyMiddle,onClick:a,text:l.d._("Back"),disabled:n})),r.a.createElement(se.a,{widthGrowIndex:.4,padding:"0"},r.a.createElement(E.a,{mutationName:"updateZone"},r.a.createElement(ee.a,{color:P.a.green,text:l.d._("Save zone"),onClick:o,disabled:n||!t}))))},he=t(2),be=t(3);function ge(){var e=Object(he.a)(["\n  query GZones($branchesId: [ID!]!) {\n    zones(companyBranches: $branchesId) {\n      ...GZone\n    }\n  }\n  ","\n"]);return ge=function(){return e},e}var ve=t.n(be)()(ge(),K.b),Ee=Object($.a)(ve),ye=r.a.createContext(null),Ce=Object(h.b)(function(e){var n=e.children,t=Object(O.c)().zone,a=t.branches.filter(t.branchFilterPredicate);return 0===a.length?r.a.createElement(ye.Provider,{value:[]},n):r.a.createElement(Ee,{variables:{branchesId:a.map(_.a.prop("id"))},renderLoading:!1,render:function(e,t){var a=e.zones,o=t.loading;return r.a.createElement(ye.Provider,{value:o?null:a},n)}})}),we=function(){return Object(a.useContext)(ye)},Oe=v.b.div.withConfig({displayName:"ZoneFormPanel__DeleteButtonContainer",componentId:"sc-1drc2tm-0"})(["width:",";margin-top:",";"],P.d.ButtonHeight,P.d.Middle),Ie=function(){var e=F(),n=we(),t=Object(O.c)().zone,o=z().routeToZoneList,i=Object(a.useState)(!1),c=Object(f.a)(i,2),u=c[0],d=c[1],v=Object(a.useRef)(null),P=Object(j.a)().enqueueError,Z=Object(a.useCallback)(Object(s.a)(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!v.current){e.next=5;break}return e.next=3,v.current.submitForm();case 3:d(!1),o();case 5:case"end":return e.stop()}},e,this)})),[]),k=Object(a.useCallback)(Object(s.a)(m.a.mark(function n(){return m.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=3;break}return n.next=3,t.destroyZone(e);case 3:o();case 4:case"end":return n.stop()}},n,this)})),[e]);Object(h.d)(function(){return Object(p.reaction)(function(){return null!==t.map.currentZonePoints},d)}),r.a.useEffect(function(){n&&0===n.length&&(P(l.d._("Requested zone wasn't found")),o())},[n]);var N=e&&n&&n.find(_.a.propEq("id",e))||null;return N?r.a.createElement(b.Form,{defaultValues:N,onChange:function(e){Object(I.c)("zone form change",e.values),d(!0)},onSubmit:function(n){return t.saveZone(e,n)},render:function(e){return v.current=e,r.a.createElement(y.a,{padding:0},r.a.createElement(pe,{isSubmitting:e.submitting,isModified:u,onSave:Z,onGoBack:o}),r.a.createElement(me,null),r.a.createElement(E.a,{mutationName:"destroyZone"},r.a.createElement(Oe,null,r.a.createElement(x.a,{disabled:e.submitting,confirmText:l.d._("Remove zone {0}?",{0:N.name}),onDelete:k}))),r.a.createElement(g.b,{when:u},function(e){var n=e.isShow,t=e.handleOk,a=e.handleCancel;return r.a.createElement(C.a,{isShow:n,confirmText:l.d._("Do you want to cancel changes for the zone?"),onConfirm:t,onCancel:a})}))}}):r.a.createElement(w.a,{text:l.d._("Loading form...")})},_e=t(7736),je=t(7700),xe=t(58),Pe=v.b.div.withConfig({displayName:"MapCompanyBranchMarker__BranchNameStyled",componentId:"sc-1g1sfy5-0"})([""," font-size:1.3rem;white-space:nowrap;padding:0.2rem 0.5rem;"],function(e){var n=e.isActive;return Object(v.a)(["background-color:",";color:",";"],n?P.a.green:P.a.greyLight,n?P.a.white:P.a.greyDark)}),Ze=function(e){var n=e.branch,t=e.isActive,a=void 0===t||t;return r.a.createElement(je.OverlayView,{getPixelPositionOffset:function(e,n){return{x:-e/2,y:-n/2}},mapPaneName:je.OverlayView.MARKER_LAYER,position:Object(xe.b)(n.gps)},r.a.createElement(Pe,{isActive:a},n.name))};var Fe=function(e){var n=Object(a.useCallback)(function(n){e.onFocus&&(n.stop(),e.onFocus())},[e.onFocus]),t=e.points,o=e.color,i=e.priority;return r.a.createElement(je.Polygon,{defaultPath:t.map(xe.b),options:{fillColor:o,fillOpacity:.3,strokeWeight:0,zIndex:5e3-i},editable:!1,draggable:!1,onDblClick:n})},ze=function(e){var n=Object(a.useRef)(null),t=Object(a.useCallback)(function(){if(n.current){var t=n.current.getPath();e.onChange(t.getArray().map(xe.c))}},[e.onChange]);Object(a.useEffect)(function(){var a;if(n.current&&e.onChange){var r=n.current.getPath();a=[r.addListener("set_at",t),r.addListener("insert_at",t),r.addListener("remove_at",t)]}return function(){e.onClear(),a&&a.forEach(function(e){return e.remove()})}},[]);var o=e.points,i=e.color;return r.a.createElement(je.Polygon,{defaultPath:o.map(xe.b),options:{fillColor:i,fillOpacity:.6,strokeWeight:2,zIndex:1e4},editable:!0,draggable:!0,ref:n,onDragEnd:t})};function ke(){return Object(O.c)().zone}var Ne=function(){var e=ke(),n=F(),t=we(),o=z().routeToZoneEdit,i=e.branches.filter(e.branchFilterPredicate),l=function(n){return!e.hasBranchFilter||n===e.branchFilterId},c=Object(a.useCallback)(function(e){return r.a.createElement(Ze,{key:"branch".concat(e.id),branch:e,isActive:l(e.id)})},[]);return r.a.createElement(_e.a,{model:e.map},t&&t.map(function(t){var a={key:"zone".concat(t.id),points:t.geoPolygon,priority:t.priority,color:l(t.companyBranch.id)&&t.enabled?t.zoneColor.color:P.a.greyMiddle};return t.id===n?r.a.createElement(ze,Object.assign({},a,{onChange:e.map.updateZonePoints,onClear:e.map.clearZonePoints})):r.a.createElement(Fe,Object.assign({},a,{onFocus:function(){l(t.companyBranch.id)&&o(t.id)}}))}),i&&i.map(c))},Se=t(7681),Be=Object(h.b)(function(){var e=ke(),n=z().routeToZoneEdit;return r.a.createElement(ee.a,{text:e.hasBranchFilter?l.d._("Create zone for branch"):l.d._("Select branch to create zone"),onClick:function(){return e.createZone(n)},disabled:!e.hasBranchFilter,color:P.a.turquoise,textNextToIcon:!0,height:P.d.ButtonHeight,iconName:"add_circle"})}),Me=t(7978),Le=t(7728),Re=t(37),Ae=t(7777),Te=t(7785),De=v.b.div.withConfig({displayName:"ZoneListCard__ZoneNameStyled",componentId:"q1zjne-0"})(["font-size:1.125rem;margin-top:0.2rem;"]),Ve=v.b.div.withConfig({displayName:"ZoneListCard__ZoneDescriptionStyled",componentId:"q1zjne-1"})(["font-size:0.875rem;"]),Ge=Object(v.b)(fe.a).withConfig({displayName:"ZoneListCard__ZoneFlexRowStyled",componentId:"q1zjne-2"})(["height:",";"],P.d.ButtonHeight),He=Object(Ae.SortableElement)(function(e){var n=e.zone,t=e.branch,a=e.onEdit;return r.a.createElement(y.a,{key:n.id,padding:0,color:n.enabled?n.zoneColor.color:P.a.greyMiddle,onClick:a},r.a.createElement(Ge,null,r.a.createElement(se.a,{fixedWidth:!0,padding:"0 0.5rem 0 0"},r.a.createElement(ee.a,{width:P.d.ButtonHeight,height:P.d.ButtonHeight,iconName:"mode_edit"})),r.a.createElement(se.a,{widthGrowIndex:1},r.a.createElement(De,null,n.name," [P".concat(n.priority,"]")),r.a.createElement(Ve,null,t.name)),r.a.createElement(se.a,{padding:"0"},r.a.createElement(Te.a,null))))}),qe=Object(Ae.SortableContainer)(v.b.div.withConfig({displayName:"ZoneList__ZoneListContainerStyled",componentId:"sc-1bn0od9-0"})(["margin-top:0.5rem;cursor:arrow;"])),We=Re.sortWith([Re.ascend(Re.path(["companyBranch","name"])),Re.descend(Re.prop("priority"))]),Je=Re.groupBy(function(e){return e.companyBranch.id}),Ue=function(e){var n,t,o=e.branches,i=e.zones,l=e.zoneModel,c=e.onZoneEdit,u=function(e,n){return r.a.createElement(He,{key:e.id,zone:e,branch:o.find(Re.propEq("id",e.companyBranch.id)),index:n,collection:e.companyBranch.id,onEdit:function(){return c(e.id)}})};if(1===o.length){var d=We(i);n=d.map(u),t=function(e){var n=e.oldIndex,t=e.newIndex,a=d[n];l.changeZonePriority(a,n,t)}}else{var m=Re.mapObjIndexed(We,Je(i));n=o.map(function(e){var n=m[e.id];return n?function(e,n){return r.a.createElement(a.Fragment,{key:e.id},r.a.createElement(Le.a,null,e.name),n.map(u))}(e,n):null}),t=function(e){var n=e.oldIndex,t=e.newIndex,a=e.collection,r=m[a][n];l.changeZonePriority(r,n,t)}}return r.a.createElement(qe,{useDragHandle:!0,lockAxis:"y",onSortEnd:t},n)},$e=function(){var e=we();if(null===e)return r.a.createElement(Me.a,{primaryOpacity:.2,secondaryOpacity:.2});var n=ke(),t=z().routeToZoneEdit;return null===n.brand?r.a.createElement(Le.a,null,r.a.createElement(k.Trans,{id:"Select brand to see its zones"})):r.a.createElement(Ue,{zoneModel:n,zones:e.filter(n.zoneFilterPredicate),branches:n.root.user.filterBranches(n.branchFilterPredicate),onZoneEdit:t})},Ke=t(7676),Qe=t(7701),Ye=function(e){var n=e.branches,t=e.selectedBranch,a=e.onSelection,o=e.autoFocus;return r.a.createElement(Qe.a,{placeholder:l.d._("Select branch"),branches:n,selectedBranch:t,onSingleSelection:a,formatOptionLabel:_.a.prop("name"),isClearable:!0,autoFocus:o})},Xe=t(7663),en=function(e){var n=e.brands,t=e.selectedBrand,a=e.onSelection;return r.a.createElement(Xe.a,{placeholder:l.d._("Select brand"),options:n,value:t,formatOptionLabel:_.a.prop("name"),getOptionValue:_.a.prop("id"),getOptionLabel:_.a.prop("name"),isClearable:!0,isSearchable:!0,onChange:function(e){return a(e)},autoFocus:!0})},nn=Object(h.b)(function(){var e=Object(O.c)(),n=e.user,t=e.zone,o=n.branches,i=Object(a.useCallback)(function(e){return null===e?[]:n.branches.filter(_.a.pathEq(["brand","id"],e.id))},[]);if(Object(h.d)(function(){return Object(p.autorun)(function(){1===o.length&&t.setBranchFilter(_.a.head(o))})}),o.length<=1)return null;var l=1===n.brands.length?_.a.head(n.brands):null;return l&&t.setBrandFilter(l,i(t.brand)),r.a.createElement(r.a.Fragment,null,!l&&r.a.createElement(en,{brands:n.brands,selectedBrand:t.brand,onSelection:function(e){null===e?t.clearBrandFilter():t.setBrandFilter(e,i(e))}}),!l&&r.a.createElement(Ke.a,null),r.a.createElement(Ye,{branches:i(t.brand),selectedBranch:t.branch,autoFocus:Boolean(l),onSelection:function(e){e?t.setBranchFilter(e):t.clearBranchFilter()}}))}),tn=v.b.div.withConfig({displayName:"ZoneMenuPanel__ZoneMenuContainer",componentId:"a6twg1-0"})(["display:flex;flex-direction:column;height:100%;"]),an=v.b.div.withConfig({displayName:"ZoneMenuPanel__FixedHeaderContainer",componentId:"a6twg1-1"})(["flex:0 0 auto;"]),rn=v.b.div.withConfig({displayName:"ZoneMenuPanel__ScrollAreaContainer",componentId:"a6twg1-2"})(["flex:1 1 0;min-height:0;"]),on=function(){return r.a.createElement(tn,null,r.a.createElement(an,null,r.a.createElement(y.a,null,r.a.createElement(nn,null)),r.a.createElement(E.a,{mutationName:"createZone"},r.a.createElement(Be,null))),r.a.createElement(rn,null,r.a.createElement(Se.a,null,r.a.createElement($e,null))))},ln=function(e){var n=e.match,t=Boolean(n.params.zoneId);return r.a.createElement(Ce,null,r.a.createElement(c.a,{pageTitle:l.d._("Delivery zones"),useBackButton:!0,backRoute:"/settings"}),r.a.createElement(u.a,{widthInColumns:6,column:10,withScrollArea:t},t?r.a.createElement(Ie,null):r.a.createElement(on,null)),r.a.createElement(u.a,{widthInColumns:10},r.a.createElement(Ne,null)))};t.d(n,"ZoneMenuRoutes",function(){return cn});var cn=function(){var e=z().getRouteToZone;return r.a.createElement(o.Switch,null,r.a.createElement(o.Route,{path:e(":zoneId?"),component:ln}),r.a.createElement(o.Route,{component:i.a}))};n.default=cn}}]);
//# sourceMappingURL=177.11fa83f6.chunk.js.map