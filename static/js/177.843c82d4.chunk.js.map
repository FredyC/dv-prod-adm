{"version":3,"sources":["../node_modules/babel-runtime/helpers/defineProperty.js","atoms/FlexRowSingle.tsx","molecules/PageLayoutFullHeightItem.tsx","atoms/VerticalGap.tsx","hooks/useSnackBar.ts","hooks/useRouterContext.ts","atoms/ScrollArea.tsx","atoms/CardListTitle.tsx","atoms/BaseMap.tsx","segments/zones/hooks/useZoneRouteControl.tsx","segments/zones/organisms/ZoneListLoader.tsx","atoms/DragHandle.tsx","atoms/FormInputSelect.tsx","segments/zones/hooks/useZoneModel.ts","segments/zones/hooks/useZoneId.ts","segments/zones/atoms/ZonePriceInput.tsx","segments/zones/routes/ZoneMenuRoutes.tsx","segments/zones/pages/ZonePageLayout.tsx","segments/zones/organisms/ZoneFormPanel.tsx","atoms/ConfirmDialog.tsx","segments/zones/molecules/ZoneFormContent.tsx","segments/zones/molecules/ZoneColorSelector.tsx","segments/zones/molecules/ZoneFormPriceRange.tsx","segments/zones/atoms/ZonePlaceholderInput.tsx","segments/zones/molecules/ZoneFormControls.tsx","segments/zones/organisms/ZoneListLoader.graphql.ts","segments/zones/organisms/ZoneMapControl.tsx","molecules/MapCompanyBranchMarker.tsx","segments/zones/atoms/ZoneMapArea.tsx","segments/zones/atoms/ZoneMapEditableArea.tsx","segments/zones/organisms/ZoneMenuPanel.tsx","segments/zones/molecules/CreateZoneButton.tsx","segments/zones/organisms/ZoneListControl.tsx","segments/zones/molecules/ZoneList.tsx","segments/zones/atoms/ZoneListCard.tsx","segments/zones/organisms/ZoneFilter.tsx","segments/zones/molecules/ZoneFIlterBranch.tsx","segments/zones/molecules/ZoneFilterBrand.tsx"],"names":["exports","__esModule","obj","_defineProperty","__webpack_require__","_defineProperty2","default","key","value","enumerable","configurable","writable","FlexRowSingle","div","withConfig","displayName","justify","_react","_interopRequireDefault","_styledComponents","_ScrollArea","_styling","FullHeightDiv","props","undefined","widthInColumns","Spacing","LayoutGridCellMargin","widthComputed","column","leftPos","row","topPos","FullHeightDivStyled","children","withScrollArea","scrollAreaId","createElement","ScrollArea","id","VerticalGap","size","sizeUnit","enqueueSnackbar","useContext","_SnackbarContext","SnackbarContextNext","enqueueSuccess","useCallback","errorMessage","successVariant","enqueueError","errorVariant","enqueueWarning","warningVariant","enqueueInfo","infoVariant","EVariant","variant","success","error","warning","info","Router","__RouterContext","_interopRequireWildcard","CardListTitle","h2","Colors","greyLight","model","mapModelContext","Error","map","mapContext","_mobxReact","_propTypes","_reactGoogleMaps","_constants","MapContainerStyled","Radiuses","Card","BaseMapContainer","withGoogleMap","Fragment","createContext","options","streetViewControl","mapTypeControl","fullscreenControl","Provider","containerElement","mapElement","style","height","GoogleMapProvider","Observer","GoogleMap","ref","setMapRef","zoom","center","onCenterChanged","updatePosition","onZoomChanged","updateZoom","PureComponent","[object Object]","context","super","this","MAP","contextTypes","object","user","zone","zoneModel","_RootProvider","useRoot","history","_useRouterContext","getRouteToZone","zoneId","editZoneId","panToZone","canQuery","push","_mobxReactLite","_ramda","_ZoneListLoader","ZoneListContext","ZoneListLoader","observer","branches","filter","branchFilterPredicate","length","QueryZones","variables","branchesId","RM","prop","renderLoading","render","zones","loading","_reactSortableHoc","_Icon","DragHandleContainerStyled","DragHandle","SortableHandle","Icon","iconName","_reactForm","_i18n","_SelectControl","FormInputSelect","Component","validate","isRequired","i18n","_","0","validatioName","fieldApi","isMulti","getOptionValue","defaultValue","selection","isSelected","Array","isArray","item","includes","F","onChange","selectedOptions","setValue","find","option","_a","field","fieldIsPure","__rest","Field","pure","SelectControl","_extends","getControlProps","onFocus","setTouched","styles","control","base","Boolean","Object","assign","borderColor","defaultProps","getItemId","match","params","_FormInputTextBox","LabelStyled","FormInputTextBoxStyled","FormInputTextBox","FormInputTextBoxDeliveryStyled","blue","DeliveryContainer","PriceRangeContainer","VerticalLine","validatePrice","trim","Number","isNaN","parseFloat","ZonePriceInput","forwardRef","label","isDeliveryPrice","autoFocus","_reactRouter","_NotFoundPage","_ZonePageLayout","_useZoneRouteControl","ZoneMenuRoutes","useZoneRouteControl","Switch","Route","path","component","ZonePageLayout","NotFoundPage","_PageLayout","_PageLayoutFullHeightItem","_ZoneFormPanel","_ZoneMapControl","_ZoneMenuPanel","isEditing","PageLayout","pageTitle","useBackButton","backRoute","PageLayoutFullHeightItem","ZoneFormPanel","ZoneMenuPanel","ZoneMapControl","_mobx","_reactGoodbye","_CanMutate","_Card","_ConfirmDialog","_Loading","_logger","_useEffectOnce","_useSnackBar","_TouchButtonDelete","_useZoneId","_ZoneFormContent","_ZoneFormControls","DeleteButtonContainer","ButtonHeight","Middle","useZoneId","zoneList","useZoneList","routeToZoneList","isModified","setModified","useState","formApiRef","useRef","useSnackBar","onSave","__awaiter","current","submitForm","onDelete","destroyZone","useDisposable","reaction","currentZonePoints","useEffectOnce","propEq","Form","defaultValues","formState","logDebug","values","onSubmit","saveZone","formApi","padding","ZoneFormControls","isSubmitting","submitting","onGoBack","ZoneFormContent","CanMutate","mutationName","TouchButtonDelete","disabled","confirmText","name","when","isShow","handleOk","handleCancel","ConfirmDialog","onConfirm","onCancel","Loading","text","useEffect","window","confirm","_react2","_FormInputCheckbox","_Headline","_IconLine","_form","_ZonePriceInput","_ZoneColorSelector","_ZoneFormPriceRange","ZoneFormContentStyled","black","DescriptionUnderHeadline","greyDark","IconLine","icon","validateIsRequired","ZoneColorSelector","FormInputCheckbox","toLocaleLowerCase","Trans","components","Headline","margin","NestedField","ZoneFormPriceRange","_FormInputSelect","_buildQuery","_Zones","ColorOption","color","white","QueryZoneColors","buildQuery","ZoneColorsQuery","zoneColors","width","menu","maxWidth","makeStyles","head","formatOptionLabel","zoneColor","code","_TouchButton","_ZonePlaceholderInput","AddButtonContainer","RemoveButtonContainer","idx","ZonePlaceholderInput","display","removeValue","FormApi","TouchButton","onClick","addValue","price","toPrice","_FormInputStyled","FormInputForPlaceholderStyled","FormInputStyled","Container","placeholder","_FlexColumn","_FlexRowSingle","FlexColumn","widthGrowIndex","greyMiddle","green","_graphqlTag","ZonesQuery","ZoneFragment","_BaseMap","_MapCompanyBranchMarker","_ZoneMapArea","_ZoneMapEditableArea","_useZoneModel","useZoneModel","routeToZoneEdit","isActive","companyBranchId","hasBranchFilter","branchFilterId","renderBranchLabel","branch","MapCompanyBranchMarker","BaseMap","areaProps","points","geoPolygon","priority","companyBranch","enabled","ZoneMapEditableArea","updateZonePoints","onClear","clearZonePoints","ZoneMapArea","_gps","BranchNameStyled","css","OverlayView","getPixelPositionOffset","x","y","mapPaneName","MARKER_LAYER","position","gpsToLatLng","gps","onAreaFocus","e","stop","Polygon","defaultPath","fillColor","fillOpacity","strokeWeight","zIndex","editable","draggable","onDblClick","polygonRef","onAreaChange","getPath","getArray","latLngToGps","listeners","addListener","forEach","lis","remove","onDragEnd","_CreateZoneButton","_ZoneListControl","_ZoneFilter","ZoneMenuContainer","FixedHeaderContainer","ScrollAreaContainer","ZoneFilter","CreateZoneButton","ZoneListControl","createZone","turquoise","textNextToIcon","_reactContentLoader","_CardListTitle","_ZoneList","BulletList","primaryOpacity","secondaryOpacity","brand","ZoneList","zoneFilterPredicate","root","filterBranches","onZoneEdit","R","_ZoneListCard","ZoneListContainerStyled","SortableContainer","sortZones","sortWith","ascend","descend","groupByBranch","groupBy","renderZone","ZoneListCard","index","collection","onEdit","output","onSortEnd","sorted","oldIndex","newIndex","changeZonePriority","grouped","mapObjIndexed","branchZones","renderBranch","useDragHandle","lockAxis","_DragHandle","ZoneNameStyled","ZoneDescriptionStyled","ZoneFlexRowStyled","SortableElement","fixedWidth","_VerticalGap","_ZoneFIlterBranch","_ZoneFilterBrand","getBrandBranches","pathEq","autorun","setBranchFilter","singleBrand","brands","setBrandFilter","ZoneFilterBrand","selectedBrand","onSelection","clearBrandFilter","ZoneFilterBranch","selectedBranch","clearBranchFilter","_CompanyBranchDropdown","CompanyBranchDropdown","onSingleSelection","isClearable","getOptionLabel","isSearchable"],"mappings":"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","file":"static/js/177.843c82d4.chunk.js","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\n\nvar _defineProperty = require(\"../core-js/object/define-property\");\n\nvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nexports.default = function (obj, key, value) {\n  if (key in obj) {\n    (0, _defineProperty2.default)(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n};","import styled from 'styled-components'\n\nexport const FlexRowSingle = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: ${({ justify = 'space-between' }: { justify?: string }) =>\n    justify};\n`\n","import React from 'react'\nimport styled from 'styled-components'\n\nimport { ScrollArea } from '../atoms/ScrollArea'\nimport { Spacing } from '../styling'\n\ninterface IPageLayoutFullHeightItemProps {\n  row?: number\n  column?: number\n  widthInColumns?: number\n  withScrollArea?: boolean\n  scrollAreaId?: string\n}\n\nconst gridColumnWidth: string = '6.22vw'\nconst gridColumnHeigth: string = '3.9375rem'\n\nconst leftPos = () => (props: IPageLayoutFullHeightItemProps) => {\n  if (props.column !== undefined) {\n    return (\n      'calc((' +\n      props.column +\n      ' * ' +\n      gridColumnWidth +\n      ') + ' +\n      Spacing.LayoutGridCellMargin +\n      ')'\n    )\n  } else {\n    return Spacing.LayoutGridCellMargin\n  }\n}\nconst widthComputed = () => (props: IPageLayoutFullHeightItemProps) => {\n  if (props.widthInColumns !== undefined) {\n    return (\n      'calc((' +\n      props.widthInColumns +\n      ' * ' +\n      gridColumnWidth +\n      ') - ' +\n      Spacing.LayoutGridCellMargin +\n      ')'\n    )\n  } else {\n    return 'calc(100vh - (2 * ' + Spacing.LayoutGridCellMargin + '))'\n  }\n}\nconst topPos = () => (props: IPageLayoutFullHeightItemProps) => {\n  if (props.row !== undefined) {\n    return (\n      'calc((' +\n      props.row +\n      ' * ' +\n      gridColumnHeigth +\n      ') + ' +\n      Spacing.LayoutGridCellMargin +\n      ')'\n    )\n  } else {\n    return (\n      'calc(' + gridColumnHeigth + ' + ' + Spacing.LayoutGridCellMargin + ')'\n    )\n  }\n}\n\nconst FullHeightDiv = styled.div`\n  position: fixed;\n  bottom: 0.5rem;\n  width: ${widthComputed()};\n  left: ${leftPos()};\n  top: ${topPos()};\n`\n\nconst FullHeightDivStyled = styled.div`\n  height: 100%;\n`\n\nexport const PageLayoutFullHeightItem: React.SFC<\n  IPageLayoutFullHeightItemProps\n> = ({\n  children,\n  row = 1,\n  column = 0,\n  widthInColumns = 16,\n  withScrollArea = false,\n  scrollAreaId,\n}) => (\n  <FullHeightDiv\n    column={column}\n    row={row}\n    widthInColumns={widthInColumns}\n    withScrollArea={withScrollArea}\n  >\n    {withScrollArea ? (\n      <ScrollArea id={scrollAreaId}>{children}</ScrollArea>\n    ) : (\n      <FullHeightDivStyled>{children}</FullHeightDivStyled>\n    )}\n  </FullHeightDiv>\n)\n","import styled from 'styled-components'\n\ninterface IVerticalGapProps {\n  size?: number\n  sizeUnit?: string\n}\n\nexport const VerticalGap = styled.div`\n  height: ${({ size = 1, sizeUnit = 'rem' }: IVerticalGapProps) =>\n    `${size}${sizeUnit}`};\n`\n\nVerticalGap.displayName = 'VerticalGap'\n","import { SnackbarContextNext } from 'notistack/build/SnackbarContext'\nimport { useCallback, useContext } from 'react'\n\nenum EVariant {\n  default = 'default',\n  error = 'error',\n  success = 'success',\n  warning = 'warning',\n  info = 'info',\n}\n\ninterface IEnqueueOptions {\n  /** Type of the snackbar */\n  variant: EVariant\n  /** Event fired when user clicks on action button (if any) */\n  onClickAction(): void\n  /**\n   * You can pass material-ui Snackbar props here, and they will be applied to this individual snackbar.\n   * for example, this particular snackbar will be dismissed after 1sec.\n   */\n  autoHideDuration: number\n  action: ReactNode[]\n}\n\ninterface IEnqueueSnackbar {\n  (message: string, options?: Partial<IEnqueueOptions>)\n}\n\nconst successVariant = { variant: EVariant.success }\nconst errorVariant = { variant: EVariant.error }\nconst warningVariant = { variant: EVariant.warning }\nconst infoVariant = { variant: EVariant.info }\n\nexport function useSnackBar() {\n  const enqueueSnackbar: IEnqueueSnackbar = useContext(SnackbarContextNext)\n  const enqueueSuccess = useCallback(\n    (errorMessage: string) => enqueueSnackbar(errorMessage, successVariant),\n    [],\n  )\n  const enqueueError = useCallback(\n    (errorMessage: string) => enqueueSnackbar(errorMessage, errorVariant),\n    [],\n  )\n  const enqueueWarning = useCallback(\n    (errorMessage: string) => enqueueSnackbar(errorMessage, warningVariant),\n    [],\n  )\n  const enqueueInfo = useCallback(\n    (errorMessage: string) => enqueueSnackbar(errorMessage, infoVariant),\n    [],\n  )\n  return {\n    enqueueSnackbar,\n    enqueueSuccess,\n    enqueueError,\n    enqueueWarning,\n    enqueueInfo,\n  }\n}\n","import { useContext } from 'react'\nimport * as Router from 'react-router'\n\nexport default function useRouterContext<\n  Params extends { [K in keyof Params]?: string } = {}\n>(): Router.RouteComponentProps<Params> {\n  // @ts-ignore\n  return useContext(Router.__RouterContext)\n}\n\n// export default function useRouter<\n// Params extends { [K in keyof Params]?: string } = {}\n// >(): Router.RouteComponentProps<Params> {\n//   // @ts-ignore\n//   let context = useContext(Router.__RouterContext);\n//   let location = options.location || context.location;\n//   let match = options.path\n//     ? matchPath(location.pathname, options)\n//     : context.match;\n\n//   return { ...context, location, match };\n\n// }\n\n// export default function useRouter(options = {}) {\n//   invariant(\n//     typeof useContext === \"function\",\n//     \"The useRouter hook requires React 16.7 or greater\"\n//   );\n\n//   let context = useContext(RouterContext);\n//   let location = options.location || context.location;\n//   let match = options.path\n//     ? matchPath(location.pathname, options)\n//     : context.match;\n\n//   return { ...context, location, match };\n// }\n","import styled from 'styled-components'\n\nexport const ScrollArea = styled.div`\n  overflow-y: scroll;\n  -webkit-overflow-scrolling: touch;\n  height: 100%;\n`\n","import styled from 'styled-components'\n\nimport { Colors } from '../styling'\n\nexport const CardListTitle = styled.h2`\n  color: ${Colors.greyLight};\n  font-weight: lighter;\n  font-size: 1.2rem;\n  margin: 0.8rem 0 0.8rem 0.3rem;\n`\n","import { Observer } from 'mobx-react'\nimport { object } from 'prop-types'\nimport React, { useContext } from 'react'\nimport { GoogleMap, GoogleMapProps, withGoogleMap } from 'react-google-maps'\nimport { MAP } from 'react-google-maps/lib/constants'\nimport styled from 'styled-components'\n\nimport { TMapModel } from '../models/MapModel'\nimport { Radiuses } from '../styling'\n\ninterface IBaseMapProps extends GoogleMapProps {\n  model: TMapModel\n}\n\nconst MapContainerStyled = styled.div`\n  border-radius: ${Radiuses.Card};\n  overflow: hidden;\n  height: 100%;\n`\n\nconst BaseMapContainer = withGoogleMap(({ children }) => <>{children}</>)\n\nconst mapModelContext = React.createContext<TMapModel | null>(null)\nconst mapContext = React.createContext<google.maps.Map | null>(null)\n\nexport const BaseMap: React.FC<IBaseMapProps> = ({ model, children }) => {\n  const options: google.maps.MapOptions = {\n    streetViewControl: false,\n    mapTypeControl: false,\n    fullscreenControl: false,\n  }\n  return (\n    <mapModelContext.Provider value={model}>\n      <BaseMapContainer\n        containerElement={<MapContainerStyled />}\n        mapElement={<div style={{ height: `100%` }} />}\n      >\n        <GoogleMapProvider>\n          <Observer>\n            {() => (\n              <GoogleMap\n                ref={model.setMapRef}\n                zoom={model.zoom}\n                center={model.center}\n                onCenterChanged={model.updatePosition}\n                onZoomChanged={model.updateZoom}\n                options={options}\n              >\n                {children}\n              </GoogleMap>\n            )}\n          </Observer>\n        </GoogleMapProvider>\n      </BaseMapContainer>\n    </mapModelContext.Provider>\n  )\n}\n\nclass GoogleMapProvider extends React.PureComponent {\n  static contextTypes = { [MAP]: object }\n  private map: google.maps.Map\n  constructor(props, context) {\n    super(props)\n    this.map = context[MAP]\n  }\n  render() {\n    return (\n      <mapContext.Provider value={this.map}>\n        {this.props.children}\n      </mapContext.Provider>\n    )\n  }\n}\n\nexport function useMapModel() {\n  const model = useContext(mapModelContext)\n  if (!model) {\n    throw new Error('Trying to useMapModel, but BaseMap is missing in the tree')\n  }\n  return model\n}\n\nexport function useGoogleMap() {\n  const map = useContext(mapContext)\n  if (!map) {\n    throw new Error(\n      'Trying to useGoogleMap, but BaseMap is missing in the tree',\n    )\n  }\n  return map\n}\n","import { useRoot } from '../../../atoms/RootProvider'\nimport useRouterContext from '../../../hooks/useRouterContext'\n\nexport function useZoneRouteControl() {\n  const { user, zone: zoneModel } = useRoot()\n  const { history } = useRouterContext()\n  const baseRoute = '/settings/zones'\n  const getRouteToZone = (zoneId: ID) => {\n    return `${baseRoute}/${zoneId}`\n  }\n  return {\n    getRouteToZone,\n    routeToZoneEdit(editZoneId: ID) {\n      zoneModel.map.panToZone(editZoneId)\n      if (user.canQuery('zone')) {\n        history.push(getRouteToZone(editZoneId))\n      }\n    },\n    routeToZoneList() {\n      history.push(baseRoute)\n    },\n  }\n}\n","import { observer } from 'mobx-react-lite'\nimport React, { useContext } from 'react'\n\nimport { useRoot } from '../../../atoms/RootProvider'\nimport { GZone } from '../../../graph/types'\nimport { RM } from '../../../helpers/ramda'\nimport { QueryZones } from './ZoneListLoader.graphql'\n\ninterface IProps {}\n\nexport type TZone = GZone.Fragment\n\nconst ZoneListContext = React.createContext<Maybe<ReadonlyArray<TZone>>>(null)\n\nexport const ZoneListLoader: React.SFC<IProps> = observer(({ children }) => {\n  const { zone } = useRoot()\n  const branches = zone.branches.filter(zone.branchFilterPredicate)\n  if (branches.length === 0) {\n    return (\n      <ZoneListContext.Provider value={[]}>{children}</ZoneListContext.Provider>\n    )\n  }\n  return (\n    <QueryZones\n      variables={{ branchesId: branches.map(RM.prop('id')) }}\n      renderLoading={false}\n      render={({ zones }, { loading }) => (\n        <ZoneListContext.Provider value={loading ? null : zones}>\n          {children}\n        </ZoneListContext.Provider>\n      )}\n    />\n  )\n})\n\nexport const useZoneList = () => {\n  return useContext(ZoneListContext)\n}\n","import React from 'react'\nimport { SortableHandle } from 'react-sortable-hoc'\nimport styled from 'styled-components'\n\nimport { Icon } from './Icon'\n\ninterface IDragHandleProps {}\n\nconst DragHandleContainerStyled = styled.div`\n  padding: 1rem 0.4rem;\n  cursor: grab;\n`\nexport const DragHandle = SortableHandle<IDragHandleProps>(() => (\n  <DragHandleContainerStyled>\n    <Icon iconName=\"reorder\" />\n  </DragHandleContainerStyled>\n))\n","import React from 'react'\nimport { Field, FieldType, IFieldApi } from 'react-form'\n\nimport { RM } from '../helpers/ramda'\nimport { i18n } from '../i18n'\nimport { ISelectControlProps, SelectControl } from './SelectControl'\n\nexport interface IFormInputSelectProps<OptionType>\n  extends ISelectControlProps<OptionType> {\n  field: FieldType\n  fieldIsPure?: boolean\n  defaultValue?: OptionType\n  isRequired?: boolean\n  validatioName?: string\n}\n\nexport class FormInputSelect<OptionType> extends React.Component<\n  IFormInputSelectProps<OptionType>\n> {\n  static defaultProps = {\n    validatioName: 'Value',\n    getItemId: RM.prop('id'),\n  }\n\n  validate = (value: OptionType | undefined) => {\n    if (this.props.isRequired && !value) {\n      return i18n.t`${this.props.validatioName} must be selected`\n    }\n    return null\n  }\n\n  getControlProps(fieldApi: IFieldApi) {\n    const { isMulti, options, getOptionValue, defaultValue } = this.props\n    const selection = fieldApi.value || defaultValue\n\n    if (isMulti) {\n      const isSelected = Array.isArray(selection)\n        ? (item: OptionType) => selection.includes(getOptionValue!(item))\n        : RM.F\n      return {\n        value: Array.isArray(options)\n          ? (options as OptionType[]).filter(isSelected)\n          : [],\n        onChange: selectedOptions => {\n          fieldApi.setValue(selectedOptions.map(getOptionValue))\n        },\n      }\n    }\n\n    return {\n      value:\n        selection &&\n        (options as OptionType[]).find(\n          item => getOptionValue!(item) === selection,\n        ),\n      onChange: option => {\n        fieldApi.setValue(getOptionValue!(option))\n      },\n    }\n  }\n\n  render() {\n    const {\n      field,\n      fieldIsPure = false,\n      defaultValue = undefined,\n      isRequired = false,\n      ...props\n    } = this.props\n    return (\n      <Field field={field} validate={this.validate} pure={fieldIsPure}>\n        {fieldApi => (\n          <SelectControl\n            {...this.getControlProps(fieldApi)}\n            onFocus={() => fieldApi.setTouched(true)}\n            styles={{\n              control: base => {\n                if (Boolean(fieldApi.error)) {\n                  return {\n                    ...base,\n                    borderColor: 'red',\n                  }\n                }\n                return base\n              },\n            }}\n            {...props}\n          />\n        )}\n      </Field>\n    )\n  }\n}\n","import { useRoot } from '../../../atoms/RootProvider'\n\nexport function useZoneModel() {\n  const { zone: zoneModel } = useRoot()\n  return zoneModel\n}\n","import useRouterContext from '../../../hooks/useRouterContext'\n\ninterface IZoneRouteParams {\n  zoneId?: ID\n}\n\nexport function useZoneId() {\n  const { match } = useRouterContext<IZoneRouteParams>()\n  const { zoneId } = match.params\n  return zoneId\n}\n","import React from 'react'\nimport { FieldType } from 'react-form'\nimport styled from 'styled-components'\n\nimport { FormInputTextBox } from '../../../atoms/FormInputTextBox'\nimport { i18n } from '../../../i18n'\nimport { Colors } from '../../../styling'\n\ninterface IZoneInputProps {\n  field: FieldType\n  label?: string\n  autoFocus?: boolean\n  isDeliveryPrice?: boolean\n}\n\nconst LabelStyled = styled.div`\n  min-width: 2rem;\n  display: inline-block;\n`\n\nconst FormInputTextBoxStyled = styled(FormInputTextBox)`\n  width: 3rem;\n  position: relative;\n  z-index: 4;\n`\nconst FormInputTextBoxDeliveryStyled = styled(FormInputTextBoxStyled)`\n  color: ${Colors.blue};\n`\n\nconst DeliveryContainer = styled.div`\n  position: relative;\n  left: 8rem;\n  top: 0rem;\n`\n\nconst PriceRangeContainer = styled.div`\n  position: relative;\n  left: 4rem;\n  top: -0.3rem;\n  width: 3rem;\n`\n\nconst VerticalLine = styled.div`\n  border-left: 3px solid #707070;\n  width: 3px;\n  position: relative;\n  left: -2rem;\n  height: 4rem;\n  float: left;\n  margin: -0.5rem 0 0 0;\n`\n\nconst validatePrice = (value: string) => {\n  if (typeof value === 'number') {\n    return null\n  }\n  const trim = value.trim()\n  return trim.length && Number.isNaN(Number.parseFloat(trim))\n    ? i18n.t`Must be number`\n    : null\n}\n\nexport const ZonePriceInput = React.forwardRef<\n  HTMLInputElement,\n  IZoneInputProps\n>(\n  ({ field, label, isDeliveryPrice, autoFocus = false }, ref) =>\n    isDeliveryPrice ? (\n      <DeliveryContainer>\n        <VerticalLine />\n        <LabelStyled>{label}</LabelStyled>\n        <FormInputTextBoxDeliveryStyled\n          field={field}\n          validate={validatePrice}\n          // @ts-ignore\n          ref={ref}\n        />\n      </DeliveryContainer>\n    ) : (\n      <PriceRangeContainer>\n        <FormInputTextBoxStyled\n          field={field}\n          validate={validatePrice}\n          autoFocus={autoFocus}\n        />\n      </PriceRangeContainer>\n    ),\n)\n","import React from 'react'\nimport { Route, RouteComponentProps, Switch } from 'react-router'\n\nimport { NotFoundPage } from '../../../pages/NotFoundPage'\nimport { ZonePageLayout } from '../../../segments/zones/pages/ZonePageLayout'\nimport { useZoneRouteControl } from '../hooks/useZoneRouteControl'\n\ninterface IZoneMenuRoutesProps extends RouteComponentProps<{}> {}\n\nexport const ZoneMenuRoutes: React.SFC<IZoneMenuRoutesProps> = () => {\n  const { getRouteToZone } = useZoneRouteControl()\n  return (\n    <Switch>\n      <Route path={getRouteToZone(':zoneId?')} component={ZonePageLayout} />\n      <Route component={NotFoundPage} />\n    </Switch>\n  )\n}\n\nexport default ZoneMenuRoutes\n","import React from 'react'\nimport { RouteComponentProps } from 'react-router'\n\nimport { i18n } from '../../../i18n'\nimport { PageLayout } from '../../../molecules/PageLayout'\nimport { PageLayoutFullHeightItem } from '../../../molecules/PageLayoutFullHeightItem'\nimport { ZoneFormPanel } from '../organisms/ZoneFormPanel'\nimport { ZoneListLoader } from '../organisms/ZoneListLoader'\nimport { ZoneMapControl } from '../organisms/ZoneMapControl'\nimport { ZoneMenuPanel } from '../organisms/ZoneMenuPanel'\n\ninterface IProps extends RouteComponentProps<{ zoneId?: ID }> {}\n\nexport const ZonePageLayout: React.SFC<IProps> = ({ match }) => {\n  const isEditing = Boolean(match.params.zoneId)\n  return (\n    <ZoneListLoader>\n      <PageLayout\n        pageTitle={i18n.t`Delivery zones`}\n        useBackButton={true}\n        backRoute=\"/settings\"\n      />\n      <PageLayoutFullHeightItem\n        widthInColumns={6}\n        column={10}\n        withScrollArea={isEditing}\n      >\n        {isEditing ? <ZoneFormPanel /> : <ZoneMenuPanel />}\n      </PageLayoutFullHeightItem>\n      <PageLayoutFullHeightItem widthInColumns={10}>\n        <ZoneMapControl />\n      </PageLayoutFullHeightItem>\n    </ZoneListLoader>\n  )\n}\n","import { reaction } from 'mobx'\nimport { useDisposable } from 'mobx-react-lite'\nimport React, { useCallback, useRef, useState } from 'react'\nimport { Form, IFormApi } from 'react-form'\nimport Goodbye from 'react-goodbye'\nimport styled from 'styled-components'\n\nimport { CanMutate } from '../../../atoms/CanMutate'\nimport { Card } from '../../../atoms/Card'\nimport { ConfirmDialog } from '../../../atoms/ConfirmDialog'\nimport { Loading } from '../../../atoms/Loading'\nimport { useRoot } from '../../../atoms/RootProvider'\nimport { logDebug } from '../../../helpers/logger'\nimport { RM } from '../../../helpers/ramda'\nimport { useEffectOnce } from '../../../hooks/useEffectOnce'\nimport { useSnackBar } from '../../../hooks/useSnackBar'\nimport { i18n } from '../../../i18n'\nimport { TouchButtonDelete } from '../../../molecules/TouchButtonDelete'\nimport { Spacing } from '../../../styling'\nimport { useZoneId } from '../hooks/useZoneId'\nimport { useZoneRouteControl } from '../hooks/useZoneRouteControl'\nimport { ZoneFormContent } from '../molecules/ZoneFormContent'\nimport { ZoneFormControls } from '../molecules/ZoneFormControls'\nimport { useZoneList } from './ZoneListLoader'\n\nconst DeleteButtonContainer = styled.div`\n  width: ${Spacing.ButtonHeight};\n  margin-top: ${Spacing.Middle};\n`\n\nexport const ZoneFormPanel: React.SFC = () => {\n  const zoneId = useZoneId()\n  const zoneList = useZoneList()\n  const { zone: zoneModel } = useRoot()\n  const { routeToZoneList } = useZoneRouteControl()\n  const [isModified, setModified] = useState(false)\n  const formApiRef = useRef<IFormApi | null>(null)\n  const { enqueueError } = useSnackBar()\n\n  const onSave = useCallback(async () => {\n    if (formApiRef.current) {\n      await formApiRef.current.submitForm()\n      setModified(false)\n      routeToZoneList()\n    }\n  }, [])\n\n  const onDelete = useCallback(\n    async () => {\n      if (zoneId) {\n        await zoneModel.destroyZone(zoneId)\n      }\n      routeToZoneList()\n    },\n    [zoneId],\n  )\n\n  useDisposable(() =>\n    reaction(() => zoneModel.map.currentZonePoints !== null, setModified),\n  )\n\n  useEffectOnce(() => {\n    if (zoneList && zoneList.length === 0) {\n      enqueueError(i18n.t`Requested zone wasn't found`)\n      routeToZoneList()\n    }\n  })\n\n  const zone =\n    zoneId && zoneList ? zoneList.find(RM.propEq('id', zoneId)) || null : null\n\n  if (!zone) {\n    return <Loading text={i18n.t`Loading form...`} />\n  }\n\n  return (\n    <Form\n      defaultValues={zone}\n      onChange={formState => {\n        logDebug('zone form change', formState.values)\n        setModified(true)\n      }}\n      onSubmit={values => zoneModel.saveZone(zoneId!, values)}\n      render={formApi => {\n        formApiRef.current = formApi\n        return (\n          <Card padding={0}>\n            <ZoneFormControls\n              isSubmitting={formApi.submitting}\n              isModified={isModified}\n              onSave={onSave}\n              onGoBack={routeToZoneList}\n            />\n            <ZoneFormContent />\n\n            <CanMutate mutationName=\"destroyZone\">\n              <DeleteButtonContainer>\n                <TouchButtonDelete\n                  disabled={formApi.submitting}\n                  confirmText={i18n.t`Remove zone ${zone.name}?`}\n                  onDelete={onDelete}\n                />\n              </DeleteButtonContainer>\n            </CanMutate>\n\n            <Goodbye when={isModified}>\n              {({ isShow, handleOk, handleCancel }) => (\n                <ConfirmDialog\n                  isShow={isShow}\n                  confirmText={i18n.t`Do you want to cancel changes for the zone?`}\n                  onConfirm={handleOk}\n                  onCancel={handleCancel}\n                />\n              )}\n            </Goodbye>\n          </Card>\n        )\n      }}\n    />\n  )\n}\n","import React, { useEffect } from 'react'\n\ninterface IProps {\n  isShow: boolean\n  confirmText: string\n  onConfirm(): void\n  onCancel(): void\n}\n\nexport const ConfirmDialog: React.SFC<IProps> = props => {\n  useEffect(\n    () => {\n      if (props.isShow) {\n        if (window.confirm(props.confirmText)) {\n          props.onConfirm()\n        } else {\n          props.onCancel()\n        }\n      }\n    },\n    [props.isShow],\n  )\n  return null\n}\n","import { Trans } from '@lingui/react'\nimport React from 'react'\nimport { NestedField } from 'react-form'\nimport styled from 'styled-components'\n\nimport { FormInputCheckbox } from '../../../atoms/FormInputCheckbox'\nimport { FormInputTextBox } from '../../../atoms/FormInputTextBox'\nimport { Headline } from '../../../atoms/Headline'\nimport { IconLine } from '../../../atoms/IconLine'\nimport { validateIsRequired } from '../../../helpers/form'\nimport { i18n } from '../../../i18n'\nimport { Colors, Spacing } from '../../../styling'\nimport { ZonePriceInput } from '../atoms/ZonePriceInput'\nimport { ZoneColorSelector } from '../molecules/ZoneColorSelector'\nimport { ZoneFormPriceRange } from '../molecules/ZoneFormPriceRange'\n\ninterface IZoneFormContentProps {}\n\nconst ZoneFormContentStyled = styled.div`\n  margin: ${Spacing.Middle};\n  color: ${Colors.black};\n`\n\nconst DescriptionUnderHeadline = styled.div`\n  color: ${Colors.greyDark};\n  padding-bottom: 0.2rem;\n`\n\nexport const ZoneFormContent: React.SFC<IZoneFormContentProps> = props => (\n  <ZoneFormContentStyled>\n    <IconLine icon=\"label\">\n      <FormInputTextBox\n        field=\"name\"\n        validate={validateIsRequired(i18n.t`Zone name`)}\n      />\n    </IconLine>\n\n    <IconLine icon=\"color_lens\">\n      <ZoneColorSelector />\n    </IconLine>\n\n    <FormInputCheckbox\n      field=\"enabled\"\n      name=\"enabled\"\n      label={i18n.t`Is active`.toLocaleLowerCase()}\n    />\n\n    <Trans>\n      <Headline margin=\"0.5rem 0 0 0\">Delivery cost</Headline>\n      <DescriptionUnderHeadline>\n        according order total cost\n      </DescriptionUnderHeadline>\n    </Trans>\n    <ZonePriceInput field=\"minimalOrderPrice.value\" />\n    <NestedField field=\"priceRangeRules\" component={ZoneFormPriceRange} />\n  </ZoneFormContentStyled>\n)\n","import React from 'react'\nimport { FieldType } from 'react-form'\nimport styled from 'styled-components'\n\nimport { FormInputSelect } from '../../../atoms/FormInputSelect'\nimport { buildQuery } from '../../../graph/buildQuery'\nimport { GZoneColors } from '../../../graph/types'\nimport { RM } from '../../../helpers/ramda'\nimport { Colors } from '../../../styling'\nimport { ZoneColorsQuery } from '../Zones.graphql'\n\ninterface IZoneColorSelectorProps {\n  field?: FieldType\n}\n\nconst ColorOption = styled.div`\n  background-color: ${({ color }: { color: string }) => color};\n  color: ${Colors.white};\n  width: 6rem;\n  padding: 0.4rem 1rem;\n  margin: 0;\n  height: 100%;\n`\n\nconst QueryZoneColors = buildQuery<GZoneColors.Query, GZoneColors.Variables>(\n  ZoneColorsQuery,\n)\n\nconst makeStyles = () => ({\n  option: base => ({\n    ...base,\n    padding: 0,\n    margin: 0,\n  }),\n  menu: base => ({\n    ...base,\n    width: '8rem',\n    maxWidth: '8rem',\n  }),\n})\n\nexport const ZoneColorSelector: React.SFC<IZoneColorSelectorProps> = ({\n  field = 'zoneColor.id',\n}) => (\n  <QueryZoneColors\n    render={({ zoneColors }) => (\n      <FormInputSelect<GZoneColors.ZoneColors>\n        field={field}\n        fieldIsPure={true}\n        options={[...zoneColors]}\n        width={8}\n        styles={makeStyles()}\n        defaultValue={RM.head(zoneColors)}\n        getOptionValue={RM.prop('id')}\n        formatOptionLabel={zoneColor => (\n          <ColorOption color={zoneColor.color}>{zoneColor.code}</ColorOption>\n        )}\n      />\n    )}\n  />\n)\n","import React, { Fragment } from 'react'\nimport { FormApi, NestedFieldComponentProps } from 'react-form'\nimport styled from 'styled-components'\n\nimport { GZonePriceRange } from '../../../graph/types'\nimport { TouchButton } from '../../../molecules/TouchButton'\nimport { TouchButtonDelete } from '../../../molecules/TouchButtonDelete'\nimport { Spacing } from '../../../styling'\nimport { ZonePlaceholderInput } from '../atoms/ZonePlaceholderInput'\nimport { ZonePriceInput } from '../atoms/ZonePriceInput'\n\ninterface IProps\n  extends NestedFieldComponentProps<GZonePriceRange.Fragment[]> {}\n\nconst AddButtonContainer = styled.div`\n  position: relative;\n  top: -6rem;\n`\n\nconst RemoveButtonContainer = styled.div`\n  position: relative;\n  top: -7rem;\n  left: 16rem;\n`\n\nexport const ZoneFormPriceRange: React.SFC<IProps> = ({ fieldApi }) => {\n  return (\n    <>\n      {fieldApi.values.map((value, idx, values) => (\n        <Fragment key={idx}>\n          <ZonePriceInput\n            label=\"za\"\n            isDeliveryPrice={true}\n            field={[idx, 'price', 'value']}\n          />\n\n          {idx === values.length - 1 ? (\n            <ZonePlaceholderInput display=\"&infin;\" label=\"do\" />\n          ) : (\n            <ZonePriceInput\n              field={[idx, 'toPrice', 'value']}\n              autoFocus={true}\n            />\n          )}\n\n          {values.length > 1 && (\n            <RemoveButtonContainer>\n              <TouchButtonDelete\n                onDelete={() => fieldApi.removeValue('', idx)}\n              />\n            </RemoveButtonContainer>\n          )}\n        </Fragment>\n      ))}\n      <FormApi\n        render={formApi => (\n          <AddButtonContainer>\n            <TouchButton\n              disabled={formApi.submitting}\n              width={Spacing.ButtonHeight}\n              iconName=\"add_circle\"\n              onClick={() =>\n                fieldApi.addValue('', {\n                  price: { value: 0 },\n                  toPrice: { value: 0 },\n                })\n              }\n            />\n          </AddButtonContainer>\n        )}\n      />\n    </>\n  )\n}\n","import React from 'react'\nimport styled from 'styled-components'\n\nimport { FormInputStyled } from '../../../atoms/FormInputStyled'\n\ninterface IZonePlaceholderInputProps {\n  label: string\n  display: string\n}\n\nconst LabelStyled = styled.div`\n  width: 3rem;\n  display: inline-block;\n`\n\nconst FormInputForPlaceholderStyled = styled(FormInputStyled)`\n  width: 3rem;\n  position: relative;\n  z-index: 4;\n`\n\nconst Container = styled.div`\n  margin: 0 0 0 1rem;\n`\n\nexport const ZonePlaceholderInput: React.SFC<IZonePlaceholderInputProps> = ({\n  label,\n  display,\n}) => (\n  <Container>\n    <LabelStyled>{label}</LabelStyled>\n    <FormInputForPlaceholderStyled disabled={true} placeholder={display} />\n  </Container>\n)\n","import React, { MouseEvent } from 'react'\n\nimport { CanMutate } from '../../../atoms/CanMutate'\nimport { FlexColumn } from '../../../atoms/FlexColumn'\nimport { FlexRowSingle } from '../../../atoms/FlexRowSingle'\nimport { i18n } from '../../../i18n'\nimport { TouchButton } from '../../../molecules/TouchButton'\nimport { Colors } from '../../../styling'\n\ninterface IProps {\n  isSubmitting: boolean\n  isModified: boolean\n  onSave(e: MouseEvent<HTMLButtonElement>): void\n  onGoBack(): void\n}\n\nexport const ZoneFormControls: React.SFC<IProps> = ({\n  isSubmitting,\n  isModified,\n  onGoBack,\n  onSave,\n}) => (\n  <FlexRowSingle>\n    <FlexColumn widthGrowIndex={0.4} padding=\"0\">\n      <TouchButton\n        color={Colors.greyMiddle}\n        onClick={onGoBack}\n        text={i18n.t`Back`}\n        disabled={isSubmitting}\n      />\n    </FlexColumn>\n    <FlexColumn widthGrowIndex={0.4} padding=\"0\">\n      <CanMutate mutationName=\"updateZone\">\n        <TouchButton\n          color={Colors.green}\n          text={i18n.t`Save zone`}\n          onClick={onSave}\n          disabled={isSubmitting || !isModified}\n        />\n      </CanMutate>\n    </FlexColumn>\n  </FlexRowSingle>\n)\n","import gql from 'graphql-tag'\n\nimport { buildQuery } from '../../../graph/buildQuery'\nimport { GZones } from '../../../graph/types'\nimport { ZoneFragment } from '../Zones.graphql'\n\nexport const ZonesQuery = gql`\n  query GZones($branchesId: [ID!]!) {\n    zones(companyBranches: $branchesId) {\n      ...GZone\n    }\n  }\n  ${ZoneFragment}\n`\n\nexport const QueryZones = buildQuery<GZones.Query, GZones.Variables>(ZonesQuery)\n","import React, { useCallback } from 'react'\n\nimport { BaseMap } from '../../../atoms/BaseMap'\nimport { GCompanyBranch } from '../../../graph/types'\nimport { MapCompanyBranchMarker } from '../../../molecules/MapCompanyBranchMarker'\nimport { Colors } from '../../../styling'\nimport { ZoneMapArea } from '../atoms/ZoneMapArea'\nimport { ZoneMapEditableArea } from '../atoms/ZoneMapEditableArea'\nimport { useZoneId } from '../hooks/useZoneId'\nimport { useZoneModel } from '../hooks/useZoneModel'\nimport { useZoneRouteControl } from '../hooks/useZoneRouteControl'\nimport { TZone, useZoneList } from '../organisms/ZoneListLoader'\n\nexport const ZoneMapControl: React.FC = () => {\n  const zoneModel = useZoneModel()\n  const editZoneId = useZoneId()\n  const zoneList = useZoneList()\n  const { routeToZoneEdit } = useZoneRouteControl()\n\n  const branches = zoneModel.branches.filter(zoneModel.branchFilterPredicate)\n\n  const isActive = (companyBranchId: ID) =>\n    !zoneModel.hasBranchFilter || companyBranchId === zoneModel.branchFilterId\n\n  const renderZoneArea = (zone: TZone) => {\n    const areaProps = {\n      key: `zone${zone.id}`,\n      points: zone.geoPolygon,\n      priority: zone.priority,\n      color:\n        isActive(zone.companyBranch.id) && zone.enabled\n          ? zone.zoneColor.color\n          : Colors.greyMiddle,\n    }\n\n    if (zone.id === editZoneId) {\n      return (\n        <ZoneMapEditableArea\n          {...areaProps}\n          onChange={zoneModel.map.updateZonePoints}\n          onClear={zoneModel.map.clearZonePoints}\n        />\n      )\n    }\n\n    return (\n      <ZoneMapArea\n        {...areaProps}\n        onFocus={() => {\n          if (isActive(zone.companyBranch.id)) {\n            routeToZoneEdit(zone.id)\n          }\n        }}\n      />\n    )\n  }\n\n  const renderBranchLabel = useCallback(\n    (branch: GCompanyBranch.Fragment) => (\n      <MapCompanyBranchMarker\n        key={`branch${branch.id}`}\n        branch={branch}\n        isActive={isActive(branch.id)}\n      />\n    ),\n    [],\n  )\n\n  return (\n    <BaseMap model={zoneModel.map}>\n      {zoneList && zoneList.map(renderZoneArea)}\n      {branches && branches.map(renderBranchLabel)}\n    </BaseMap>\n  )\n}\n","import React from 'react'\nimport { OverlayView } from 'react-google-maps'\nimport styled, { css } from 'styled-components'\n\nimport { GCompanyBranch } from '../graph/types'\nimport { gpsToLatLng } from '../helpers/gps'\nimport { Colors } from '../styling'\n\ninterface IProps {\n  branch: GCompanyBranch.Fragment\n  isActive?: boolean\n}\n\nconst BranchNameStyled = styled.div`\n  ${getColors} font-size: 1.3rem;\n  white-space: nowrap;\n  padding: 0.2rem 0.5rem;\n`\n\nexport const MapCompanyBranchMarker: React.SFC<IProps> = ({\n  branch,\n  isActive = true,\n}) => (\n  <OverlayView\n    getPixelPositionOffset={(width, height) => ({\n      x: -(width / 2),\n      y: -(height / 2),\n    })}\n    mapPaneName={OverlayView.MARKER_LAYER}\n    position={gpsToLatLng(branch.gps)}\n  >\n    <BranchNameStyled isActive={isActive}>{branch.name}</BranchNameStyled>\n  </OverlayView>\n)\n\nfunction getColors({ isActive }: { isActive: boolean }) {\n  return css`\n    background-color: ${isActive ? Colors.green : Colors.greyLight};\n    color: ${isActive ? Colors.white : Colors.greyDark};\n  `\n}\n","import React, { useCallback } from 'react'\nimport { Polygon } from 'react-google-maps'\n\nimport { gpsToLatLng } from '../../../helpers/gps'\n\ninterface IZoneMapAreaProps {\n  points: ReadonlyArray<GeoPoint>\n  color: string\n  priority: number\n  onFocus?(): void\n}\n\nexport const ZoneMapArea: React.FC<IZoneMapAreaProps> = props => {\n  const onAreaFocus = useCallback(\n    (e: google.maps.PolyMouseEvent) => {\n      if (props.onFocus) {\n        e.stop()\n        props.onFocus()\n      }\n    },\n    [props.onFocus],\n  )\n\n  const { points, color, priority } = props\n  return (\n    <Polygon\n      defaultPath={points.map(gpsToLatLng)}\n      options={{\n        fillColor: color,\n        fillOpacity: 0.3,\n        strokeWeight: 0,\n        zIndex: 5000 - priority,\n      }}\n      editable={false}\n      draggable={false}\n      onDblClick={onAreaFocus}\n    />\n  )\n}\n","import React, { useCallback, useEffect, useRef } from 'react'\nimport { Polygon } from 'react-google-maps'\n\nimport { gpsToLatLng, latLngToGps } from '../../../helpers/gps'\n\ninterface IZoneMapAreaProps {\n  points: ReadonlyArray<GeoPoint>\n  color: string\n  priority: number\n  onChange(points: GeoPoint[]): void\n  onClear(): void\n}\n\nexport const ZoneMapEditableArea: React.FC<IZoneMapAreaProps> = props => {\n  const polygonRef = useRef<Polygon | null>(null)\n\n  const onAreaChange = useCallback(\n    () => {\n      if (polygonRef.current) {\n        const path = polygonRef.current.getPath()\n        props.onChange(path.getArray().map(latLngToGps))\n      }\n    },\n    [props.onChange],\n  )\n\n  useEffect(() => {\n    let listeners\n    if (polygonRef.current && props.onChange) {\n      const path = polygonRef.current.getPath()\n      listeners = [\n        path.addListener('set_at', onAreaChange),\n        path.addListener('insert_at', onAreaChange),\n        path.addListener('remove_at', onAreaChange),\n      ]\n    }\n    return () => {\n      props.onClear()\n      if (listeners) {\n        listeners.forEach(lis => lis.remove())\n      }\n    }\n  }, [])\n\n  const { points, color } = props\n  return (\n    <Polygon\n      defaultPath={points.map(gpsToLatLng)}\n      options={{\n        fillColor: color,\n        fillOpacity: 0.6,\n        strokeWeight: 2,\n        zIndex: 10000,\n      }}\n      editable={true}\n      draggable={true}\n      ref={polygonRef}\n      onDragEnd={onAreaChange}\n    />\n  )\n}\n","import React from 'react'\nimport styled from 'styled-components'\n\nimport { CanMutate } from '../../../atoms/CanMutate'\nimport { Card } from '../../../atoms/Card'\nimport { ScrollArea } from '../../../atoms/ScrollArea'\nimport { CreateZoneButton } from '../molecules/CreateZoneButton'\nimport { ZoneListControl } from '../organisms/ZoneListControl'\nimport { ZoneFilter } from './ZoneFilter'\n\nconst ZoneMenuContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n`\n\nconst FixedHeaderContainer = styled.div`\n  flex: 0 0 auto;\n`\nconst ScrollAreaContainer = styled.div`\n  flex: 1 1 0;\n  min-height: 0;\n`\nexport const ZoneMenuPanel: React.SFC = () => (\n  <ZoneMenuContainer>\n    <FixedHeaderContainer>\n      <Card>\n        <ZoneFilter />\n      </Card>\n      <CanMutate mutationName=\"createZone\">\n        <CreateZoneButton />\n      </CanMutate>\n    </FixedHeaderContainer>\n\n    <ScrollAreaContainer>\n      <ScrollArea>\n        <ZoneListControl />\n      </ScrollArea>\n    </ScrollAreaContainer>\n  </ZoneMenuContainer>\n)\n","import { observer } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { i18n } from '../../../i18n'\nimport { TouchButton } from '../../../molecules/TouchButton'\nimport { Colors, Spacing } from '../../../styling'\nimport { useZoneModel } from '../hooks/useZoneModel'\nimport { useZoneRouteControl } from '../hooks/useZoneRouteControl'\n\nexport const CreateZoneButton: React.SFC = observer(() => {\n  const zoneModel = useZoneModel()\n  const { routeToZoneEdit } = useZoneRouteControl()\n  return (\n    <TouchButton\n      text={\n        zoneModel.hasBranchFilter\n          ? i18n.t`Create zone for branch`\n          : i18n.t`Select branch to create zone`\n      }\n      onClick={() => zoneModel.createZone(routeToZoneEdit)}\n      disabled={!zoneModel.hasBranchFilter}\n      color={Colors.turquoise}\n      textNextToIcon={true}\n      height={Spacing.ButtonHeight}\n      iconName=\"add_circle\"\n    />\n  )\n})\n","import { Trans } from '@lingui/react'\nimport React from 'react'\nimport { BulletList } from 'react-content-loader'\n\nimport { CardListTitle } from '../../../atoms/CardListTitle'\nimport { useZoneModel } from '../hooks/useZoneModel'\nimport { useZoneRouteControl } from '../hooks/useZoneRouteControl'\nimport { ZoneList } from '../molecules/ZoneList'\nimport { useZoneList } from './ZoneListLoader'\n\nexport const ZoneListControl: React.SFC = () => {\n  const zoneList = useZoneList()\n  if (zoneList === null) {\n    return <BulletList primaryOpacity={0.2} secondaryOpacity={0.2} />\n  }\n  const zoneModel = useZoneModel()\n  const { routeToZoneEdit } = useZoneRouteControl()\n  if (zoneModel.brand === null) {\n    return (\n      <CardListTitle>\n        <Trans>Select brand to see its zones</Trans>\n      </CardListTitle>\n    )\n  }\n  return (\n    <ZoneList\n      zoneModel={zoneModel}\n      zones={zoneList.filter(zoneModel.zoneFilterPredicate)}\n      branches={zoneModel.root.user.filterBranches(\n        zoneModel.branchFilterPredicate,\n      )}\n      onZoneEdit={routeToZoneEdit}\n    />\n  )\n}\n","import * as R from 'ramda'\nimport React, { Fragment } from 'react'\nimport { SortableContainer, SortEndHandler } from 'react-sortable-hoc'\nimport styled from 'styled-components'\n\nimport { CardListTitle } from '../../../atoms/CardListTitle'\nimport { GCompanyBranch, GZone } from '../../../graph/types'\nimport { TZoneModel } from '../../../segments/zones/models/ZoneModel'\nimport { ZoneListCard } from '../atoms/ZoneListCard'\n\ninterface IZoneListProps {\n  branches: GCompanyBranch.Fragment[]\n  zones: GZone.Fragment[]\n  zoneModel: TZoneModel\n  onZoneEdit(zoneID: ID): void\n}\n\nconst ZoneListContainerStyled = SortableContainer(styled.div`\n  margin-top: 0.5rem;\n  cursor: arrow;\n`)\n\nconst sortZones = R.sortWith<GZone.Fragment>([\n  R.ascend(R.path(['companyBranch', 'name'])),\n  R.descend(R.prop('priority')),\n])\n\nconst groupByBranch = R.groupBy((zone: GZone.Fragment) => zone.companyBranch.id)\n\nexport const ZoneList: React.SFC<IZoneListProps> = ({\n  branches,\n  zones,\n  zoneModel,\n  onZoneEdit,\n}) => {\n  const renderZone = (zone: GZone.Fragment, idx: number) => (\n    <ZoneListCard\n      key={zone.id}\n      zone={zone}\n      branch={branches.find(R.propEq('id', zone.companyBranch.id))!}\n      index={idx}\n      collection={zone.companyBranch.id}\n      onEdit={() => onZoneEdit(zone.id)}\n    />\n  )\n  const renderBranch = (\n    branch: GCompanyBranch.Fragment,\n    branchZones: GZone.Fragment[],\n  ) => (\n    <Fragment key={branch.id}>\n      <CardListTitle>{branch.name}</CardListTitle>\n      {branchZones.map(renderZone)}\n    </Fragment>\n  )\n\n  let output\n  let onSortEnd: SortEndHandler\n\n  if (branches.length === 1) {\n    const sorted = sortZones(zones)\n    output = sorted.map(renderZone)\n    onSortEnd = ({ oldIndex, newIndex }) => {\n      const zone = sorted[oldIndex]\n      zoneModel.changeZonePriority(zone, oldIndex, newIndex)\n    }\n  } else {\n    const grouped = R.mapObjIndexed(sortZones, groupByBranch(zones))\n    output = branches.map(branch => {\n      const branchZones = grouped[branch.id]\n      return branchZones ? renderBranch(branch, branchZones) : null\n    })\n    onSortEnd = ({ oldIndex, newIndex, collection }) => {\n      const group = grouped[collection]\n      const zone = group[oldIndex]\n      zoneModel.changeZonePriority(zone, oldIndex, newIndex)\n    }\n  }\n\n  return (\n    <ZoneListContainerStyled\n      useDragHandle={true}\n      lockAxis=\"y\"\n      onSortEnd={onSortEnd}\n    >\n      {output}\n    </ZoneListContainerStyled>\n  )\n}\n","import React from 'react'\nimport { SortableElement } from 'react-sortable-hoc'\nimport styled from 'styled-components'\n\nimport { Card } from '../../../atoms/Card'\nimport { DragHandle } from '../../../atoms/DragHandle'\nimport { FlexColumn } from '../../../atoms/FlexColumn'\nimport { FlexRowSingle } from '../../../atoms/FlexRowSingle'\nimport { GCompanyBranch, GZone } from '../../../graph/types'\nimport { TouchButton } from '../../../molecules/TouchButton'\nimport { Colors, Spacing } from '../../../styling'\n\ninterface IZoneListCardProps {\n  zone: GZone.Fragment\n  branch: GCompanyBranch.Fragment\n  onEdit(): void\n}\n\nconst ZoneNameStyled = styled.div`\n  font-size: 1.125rem;\n  margin-top: 0.2rem;\n`\n\nconst ZoneDescriptionStyled = styled.div`\n  font-size: 0.875rem;\n`\nconst ZoneFlexRowStyled = styled(FlexRowSingle)`\n  height: ${Spacing.ButtonHeight};\n`\n\nexport const ZoneListCard = SortableElement<IZoneListCardProps>(\n  ({ zone, branch, onEdit }) => (\n    <Card\n      key={zone.id}\n      padding={0}\n      color={zone.enabled ? zone.zoneColor.color : Colors.greyMiddle}\n      onClick={onEdit}\n    >\n      <ZoneFlexRowStyled>\n        <FlexColumn fixedWidth={true} padding=\"0 0.5rem 0 0\">\n          <TouchButton\n            width={Spacing.ButtonHeight}\n            height={Spacing.ButtonHeight}\n            iconName=\"mode_edit\"\n          />\n        </FlexColumn>\n        <FlexColumn widthGrowIndex={1}>\n          <ZoneNameStyled>\n            {zone.name}\n            {` [P${zone.priority}]`}\n          </ZoneNameStyled>\n          <ZoneDescriptionStyled>{branch.name}</ZoneDescriptionStyled>\n        </FlexColumn>\n        <FlexColumn padding=\"0\">\n          <DragHandle />\n        </FlexColumn>\n      </ZoneFlexRowStyled>\n    </Card>\n  ),\n)\n","import { autorun } from 'mobx'\nimport { observer, useDisposable } from 'mobx-react-lite'\nimport React, { useCallback } from 'react'\n\nimport { useRoot } from '../../../atoms/RootProvider'\nimport { VerticalGap } from '../../../atoms/VerticalGap'\nimport { GCompanyBranch } from '../../../graph/types'\nimport { RM } from '../../../helpers/ramda'\nimport { ZoneFilterBranch } from '../molecules/ZoneFIlterBranch'\nimport { ZoneFilterBrand } from '../molecules/ZoneFilterBrand'\n\nexport const ZoneFilter: React.FC = observer(() => {\n  const { user, zone } = useRoot()\n  const branches = user.branches\n\n  const getBrandBranches = useCallback(\n    (brand: Maybe<GCompanyBranch.Brand>) =>\n      brand === null\n        ? []\n        : user.branches.filter(RM.pathEq(['brand', 'id'], brand.id)),\n    [],\n  )\n\n  useDisposable(() =>\n    autorun(() => {\n      if (branches.length === 1) {\n        zone.setBranchFilter(RM.head(branches)!)\n      }\n    }),\n  )\n\n  // no filter is shown for less than 1 branch available\n  if (branches.length <= 1) {\n    return null\n  }\n\n  const singleBrand = user.brands.length === 1 ? RM.head(user.brands)! : null\n  if (singleBrand) {\n    zone.setBrandFilter(singleBrand, getBrandBranches(zone.brand))\n  }\n\n  return (\n    <>\n      {!singleBrand && (\n        <ZoneFilterBrand\n          brands={user.brands}\n          selectedBrand={zone.brand}\n          onSelection={brand => {\n            if (brand === null) {\n              zone.clearBrandFilter()\n            } else {\n              zone.setBrandFilter(brand, getBrandBranches(brand))\n            }\n          }}\n        />\n      )}\n      {!singleBrand && <VerticalGap />}\n      <ZoneFilterBranch\n        branches={getBrandBranches(zone.brand)}\n        selectedBranch={zone.branch}\n        autoFocus={Boolean(singleBrand)}\n        onSelection={branch => {\n          if (!branch) {\n            zone.clearBranchFilter()\n          } else {\n            zone.setBranchFilter(branch)\n          }\n        }}\n      />\n    </>\n  )\n})\n","import React from 'react'\n\nimport { GCompanyBranch } from '../../../graph/types'\nimport { RM } from '../../../helpers/ramda'\nimport { i18n } from '../../../i18n'\nimport { CompanyBranchDropdown } from '../../../molecules/CompanyBranchDropdown'\n\ntype TBranch = GCompanyBranch.Fragment\n\ninterface IProps {\n  branches: TBranch[]\n  selectedBranch: Maybe<TBranch>\n  onSelection(branch: Maybe<TBranch>): void\n  autoFocus: boolean\n}\n\nexport const ZoneFilterBranch: React.SFC<IProps> = ({\n  branches,\n  selectedBranch,\n  onSelection,\n  autoFocus,\n}) => (\n  <CompanyBranchDropdown\n    placeholder={i18n.t`Select branch`}\n    branches={branches}\n    selectedBranch={selectedBranch}\n    onSingleSelection={onSelection}\n    formatOptionLabel={RM.prop('name')}\n    isClearable={true}\n    autoFocus={autoFocus}\n  />\n)\n","import React from 'react'\n\nimport { SelectControl } from '../../../atoms/SelectControl'\nimport { GCompanyBranch } from '../../../graph/types'\nimport { RM } from '../../../helpers/ramda'\nimport { i18n } from '../../../i18n'\n\ntype TBrand = GCompanyBranch.Brand\n\ninterface IProps {\n  brands: ReadonlyArray<TBrand>\n  selectedBrand: Maybe<TBrand>\n  onSelection(brand: Maybe<TBrand>): void\n}\n\nexport const ZoneFilterBrand: React.SFC<IProps> = ({\n  brands,\n  selectedBrand,\n  onSelection,\n}) => (\n  <SelectControl<TBrand>\n    placeholder={i18n.t`Select brand`}\n    options={brands as TBrand[]}\n    value={selectedBrand}\n    formatOptionLabel={RM.prop('name')}\n    getOptionValue={RM.prop('id')}\n    getOptionLabel={RM.prop('name')}\n    isClearable={true}\n    isSearchable={true}\n    onChange={value => onSelection(value as Maybe<TBrand>)}\n    autoFocus={true}\n  />\n)\n"],"sourceRoot":""}