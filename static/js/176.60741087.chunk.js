(window.webpackJsonp=window.webpackJsonp||[]).push([[176],{7676:function(e,t,a){"use strict";a.d(t,"a",function(){return d});var n=a(0),r=a.n(n),i=a(22),o=a(7685),c=a(18),l=i.b.div.withConfig({displayName:"PageLayoutFullHeightItem__FullHeightDiv",componentId:"sc-1mean6j-0"})(["position:fixed;bottom:0.5rem;width:",";left:",";top:",";"],function(e){return void 0!==e.widthInColumns?"calc(("+e.widthInColumns+" * 6.22vw) - "+c.d.LayoutGridCellMargin+")":"calc(100vh - (2 * "+c.d.LayoutGridCellMargin+"))"},function(e){return void 0!==e.column?"calc(("+e.column+" * 6.22vw) + "+c.d.LayoutGridCellMargin+")":c.d.LayoutGridCellMargin},function(e){return void 0!==e.row?"calc(("+e.row+" * 3.9375rem) + "+c.d.LayoutGridCellMargin+")":"calc(3.9375rem + "+c.d.LayoutGridCellMargin+")"}),u=i.b.div.withConfig({displayName:"PageLayoutFullHeightItem__FullHeightDivStyled",componentId:"sc-1mean6j-1"})(["height:100%;"]),d=function(e){var t=e.children,a=e.row,n=void 0===a?1:a,i=e.column,c=void 0===i?0:i,d=e.widthInColumns,s=void 0===d?16:d,m=e.withScrollArea,f=void 0!==m&&m,p=e.scrollAreaId;return r.a.createElement(l,{column:c,row:n,widthInColumns:s,withScrollArea:f},f?r.a.createElement(o.a,{id:p},t):r.a.createElement(u,null,t))}},7677:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n=a(22).b.div.withConfig({displayName:"FlexRowSingle",componentId:"sc-1opww0j-0"})(["display:flex;flex-direction:row;justify-content:",";"],function(e){var t=e.justify;return void 0===t?"space-between":t})},7680:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n=a(22).b.div.withConfig({displayName:"VerticalGap",componentId:"z6ukut-0"})(["height:",";"],function(e){var t=e.size,a=void 0===t?1:t,n=e.sizeUnit,r=void 0===n?"rem":n;return"".concat(a).concat(r)});n.displayName="VerticalGap"},7685:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n=a(22).b.div.withConfig({displayName:"ScrollArea",componentId:"v30w13-0"})(["overflow-y:auto;-webkit-overflow-scrolling:touch;height:100%;"])},7700:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=a(22),r=Object(n.b)("div").withConfig({displayName:"CardDock",componentId:"sc-1fyaqia-0"})(["position:absolute;",";",";"],function(e){var t=e.position,a=void 0===t?"BottomRight":t;return"BottomLeft"===a||"TopLeft"===a?"left: 0":"right: 0"},function(e){var t=e.position,a=void 0===t?"BottomRight":t;return"BottomRight"===a||"BottomLeft"===a?"bottom: 0":"top: 0"})},7738:function(e,t,a){"use strict";function n(e){var t=e.toLocaleLowerCase();return function(e){return e.toLocaleLowerCase().includes(t)}}a.d(t,"a",function(){return n})},7784:function(e,t,a){"use strict";a.d(t,"a",function(){return b});var n=a(39),r=a(112),i=a(113),o=a(115),c=a(114),l=a(116),u=a(0),d=a.n(u),s=a(7661),m=a(25),f=a(33),p=a(7682),b=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(o.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(i)))).validate=function(e){var t=a.props,n=t.isRequired,r=t.isMulti,i=t.validationName;if(n){if(r&&(!Array.isArray(e)||0===e.length))return f.b._("{validationName} must have at least option selected",{validationName:i});if(!r&&(null===e||void 0===e))return f.b._("{validationName} must have a selection",{validationName:i})}return null},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"getControlProps",value:function(e){var t=this.props,a=t.isMulti,n=t.items,r=t.defaultSelection,i=t.getItemId,o=e.value||r;if(a){return{selectedItems:Array.isArray(o)?n.filter(function(e){return o.includes(i(e))}):[],onMultiSelection:function(t){e.setValue(t.map(i)),e.setTouched(!0)}}}return{selectedItem:o&&n.find(function(e){return i(e)===o}),onSingleSelection:function(t){e.setValue(t?i(t):null),e.setTouched(!0)}}}},{key:"render",value:function(){var e=this,t=this.props,a=t.field,r=t.fieldIsPure,i=void 0!==r&&r,o=t.isRequired,c=void 0!==o&&o,l=t.isClearable,u=void 0!==l&&l,m=Object(n.a)(t,["field","fieldIsPure","isRequired","isClearable"]);return d.a.createElement(s.Field,{field:a,pure:i,validate:this.validate},function(t){return d.a.createElement(p.a,Object.assign({},e.getControlProps(t),{isInvalid:Boolean(t.error),isClearable:u&&!c},m))})}}]),t}(d.a.Component);b.defaultProps={validationName:f.b._("Value"),getItemId:m.a.prop("id")}},7788:function(e,t,a){"use strict";a.d(t,"a",function(){return d});var n=a(34),r=a(39),i=a(0),o=a.n(i),c=a(54),l=a(61),u=a(170),d=function(e){var t=e.to,a=e.from,n=Object(r.a)(e,["to","from"]);return o.a.createElement(c.Route,{children:function(e){var r=e.location;return o.a.createElement(l.b,Object.assign({to:s(t,a||"".concat(r.pathname,"/"))},n))}})};function s(e,t){if("string"===typeof e)return Object(u.a)(e,t);var a=Object(u.a)(e.pathname||"",t);return Object(n.a)({},e,{pathname:a})}},7789:function(e,t,a){"use strict";a.d(t,"a",function(){return u});var n=a(0),r=a.n(n),i=a(7732),o=a(22),c=a(98),l=o.b.div.withConfig({displayName:"DragHandle__DragHandleContainerStyled",componentId:"xbsz8c-0"})(["padding:1rem 0.4rem;cursor:grab;"]),u=Object(i.SortableHandle)(function(){return r.a.createElement(l,null,r.a.createElement(c.a,{iconName:"reorder"}))})},7801:function(e,t,a){"use strict";function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}a.d(t,"a",function(){return n})},7950:function(e,t,a){"use strict";a.d(t,"a",function(){return h});var n=a(34),r=a(39),i=a(112),o=a(113),c=a(115),l=a(114),u=a(116),d=a(0),s=a.n(d),m=a(7661),f=a(25),p=a(33),b=a(7668),h=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).validate=function(e){return a.props.isRequired&&!e?p.b._("{0} must be selected",{0:a.props.validatioName}):null},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"getControlProps",value:function(e){var t=this.props,a=t.isMulti,n=t.options,r=t.getOptionValue,i=t.defaultValue,o=e.value||i;if(a){var c=Array.isArray(o)?function(e){return o.includes(r(e))}:f.a.F;return{value:Array.isArray(n)?n.filter(c):[],onChange:function(t){e.setValue(t.map(r))}}}return{value:o&&n.find(function(e){return r(e)===o}),onChange:function(t){e.setValue(r(t))}}}},{key:"render",value:function(){var e=this,t=this.props,a=t.field,i=t.fieldIsPure,o=void 0!==i&&i,c=(t.isRequired,t.defaultValue,Object(r.a)(t,["field","fieldIsPure","isRequired","defaultValue"]));return s.a.createElement(m.Field,{field:a,validate:this.validate,pure:o},function(t){return s.a.createElement(b.a,Object.assign({},e.getControlProps(t),{onFocus:function(){return t.setTouched(!0)},styles:{control:function(e){return Boolean(t.error)?Object(n.a)({},e,{borderColor:"red"}):e}}},c))})}}]),t}(s.a.Component);h.defaultProps={validatioName:"Value",getItemId:f.a.prop("id")}},7986:function(e,t,a){},8137:function(e,t,a){t.pictograms=a(8138)},8138:function(e,t){e.exports=["pizza","beans","cheese","hot-pepper","smoking-barbecue","meat-pie","sausage","hot-dog","fruit","fruit-1","fruit-2","strawberry","soup","noodles","ramen","rice","spaghetti","food","piece-of-cake","beer","marshmallow","cake","banana-split","ice-cream","cookie","doughnut","cupcake","kebab","steak","fish","fondue","shrimp","berry","food","food-1","food-2","food-3","food-4","food-5","food-6","food-7","food-8","food-9","food-10","food-11","food-12","food-13","food-14","food-15","food-16","food-17","food-18","food-19","food-20","food-21","food-22","food-23","food-24","food-25","food-26","food-27","food-28","food-29","food-30","drink","drink-1","drink-2","drink-3","drink-4","drink-5","cup","cup-1","cup-2","whisky"]},8139:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(5);t.isApolloError=function(e){return e.hasOwnProperty("graphQLErrors")};var r=function(e){var t="";return Array.isArray(e.graphQLErrors)&&0!==e.graphQLErrors.length&&e.graphQLErrors.forEach(function(e){var a=e?e.message:"Error message not found.";t+="GraphQL error: "+a+"\n"}),e.networkError&&(t+="Network error: "+e.networkError.message+"\n"),t=t.replace(/\n$/,"")},i=function(e){function t(a){var n=a.graphQLErrors,i=a.networkError,o=a.errorMessage,c=a.extraInfo,l=e.call(this,o)||this;return l.graphQLErrors=n||[],l.networkError=i||null,l.message=o||r(l),l.extraInfo=c,l.__proto__=t.prototype,l}return n.__extends(t,e),t}(Error);t.ApolloError=i},8142:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(54),o=a(162),c=a(81),l=a(22),u=a(157),d=a(7683),s=a(7677),m=a(7680),f=a(28),p=a(33),b=a(158),h=a(7676),g=a(7731),v=a(17),E=a.n(v),y=a(24),w=a(74),C=a(60),k=a(7671),I=a(59),O=a(324),j=a(34),_=a(39),x=(a(7986),a(7780)),T=a(7788),R=a(295),S=a(110),L=function(e){var t=e.target,a=e.Link,n=void 0===a?T.a:a,i=Object(_.a)(e,["target","Link"]);return r.a.createElement(n,{to:t},r.a.createElement(R.a,null,r.a.createElement(S.a,Object.assign({iconName:"mode_edit"},i))))},N=a(7801),D=function(e){var t=Object(N.a)({},e);return r.a.createElement(R.a,null,r.a.createElement(S.a,Object.assign({iconName:"remove_circle_outline"},t)))},F=a(18),A=function(e){var t=e.isVisible,a=Object(_.a)(e,["isVisible"]);return r.a.createElement(R.a,null,r.a.createElement(S.a,Object.assign({iconName:"remove_red_eye",iconColor:t?F.a.white:F.a.greyMiddle,color:F.a.greyMiddle},a)))},B=a(7665),P=a(7675),W=l.b.div.withConfig({displayName:"NoteText",componentId:"xj601d-0"})(["color:",";"],F.a.greyMiddle),M=a(89),V=function(e){var t=e.items,a=e.heightStretch,n=void 0!==a&&a,i=e.fullHeight,o=void 0!==i&&i,c=e.rowHeight,l=void 0===c?60:c,u=e.isLoading,d=void 0!==u&&u,s=e.children,m=Object(_.a)(e,["items","heightStretch","fullHeight","rowHeight","isLoading","children"]),f=r.a.useCallback(function(e){var a=e.index;return t[a]},[t]),p=r.a.useCallback(function(){return d?r.a.createElement(M.a,null):null},[d]),b=function(e,a){return r.a.createElement(x.h,Object.assign({autoHeight:!n&&!o,width:e,height:a,headerHeight:50,rowCount:t?t.length:0,rowHeight:l,rowGetter:f,noRowsRenderer:p,style:{outline:"none"}},m),s)};return o?r.a.createElement(x.a,{disableHeight:!0},function(e){var a=e.width;return b(a,t.length*l)}):n?r.a.createElement(x.a,null,function(e){var t=e.width,a=e.height;return b(t,a)}):r.a.createElement(x.i,{scrollElement:window},function(e){var t=e.height;return r.a.createElement(x.a,{disableHeight:!0},function(e){var a=e.width;return b(a,t)})})};function q(e,t){var a=e.canQuery,n=e.canMutate;return function(e){var i=t(e);return a&&(i=r.a.createElement(P.a,{queryName:a},i)),n&&(i=r.a.createElement(B.a,{mutationName:n},i)),i}}function K(e){var t=e.cellData;return r.a.createElement(L,{target:t})}function H(e){var t=e.cellData,a=e.columnData;return r.a.createElement(D,{onClick:function(){return a.onRemove&&a.onRemove(t)}})}function U(e){var t=e.cellData,a=e.columnData,n=e.rowData;return r.a.createElement(A,{isVisible:t,onClick:function(){return a.onToggle(n.id,!t)}})}function z(e){var t=e.cellData,a=e.rowData,n=e.columnData;return r.a.createElement(r.a.Fragment,null,t,r.a.createElement(W,null,a[n.noteKey]))}var G=Object(l.b)(function(e){var t=e.text,a=void 0===t?p.b._("Table is empty"):t,n=Object(_.a)(e,["text"]);return r.a.createElement("div",n,a)}).withConfig({displayName:"DataTable__DataTableEmptyText",componentId:"sc-1d9kay5-0"})(["padding:1rem;color:",";font-style:'italic';"],F.a.greyMiddle),Q=a(7789),$=a(297),J=a(112),X=a(113),Y=a(115),Z=a(114),ee=a(116),te=a(7732),ae=Object(te.SortableElement)(function(e){var t=e.columns,a=e.style,n=e.className;return r.a.createElement("div",{style:a,className:n},t)}),ne=Object(te.SortableContainer)(V),re=function(e){function t(){var e,a;Object(J.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(Y.a)(this,(e=Object(Z.a)(t)).call.apply(e,[this].concat(i)))).state={sortedItems:a.props.items},a.rowRenderer=function(e){return r.a.createElement(ae,e)},a.onHandleSorting=function(){var e=Object(y.a)(E.a.mark(function e(t){var n,r,i,o,c;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.newIndex,r=t.oldIndex,n!==r){e.next=3;break}return e.abrupt("return");case 3:if(i=Object($.a)(a.state.sortedItems),o=Object(te.arrayMove)(a.state.sortedItems,r,n),a.setState({sortedItems:o}),!a.props.onSort){e.next=15;break}if(c=a.props.onSort({item:i[r],items:o,offset:n-r,newIndex:n,oldIndex:r}),e.t0=c,!e.t0){e.next=13;break}return e.next=12,c;case 12:e.t0=!e.sent;case 13:if(!e.t0){e.next=15;break}a.setState({sortedItems:i});case 15:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(ee.a)(t,e),Object(X.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.items,Object(_.a)(e,["items"]));return r.a.createElement(ne,Object.assign({lockAxis:"y",useDragHandle:!0,onSortEnd:this.onHandleSorting,rowRenderer:this.rowRenderer},t,{items:this.state.sortedItems}))}}]),t}(r.a.PureComponent);re.getDerivedStateFromProps=function(e){return{sortedItems:e.items}};var ie,oe,ce=function(e){var t=e.categories,a=e.onToggle,n=e.onRemove,i=e.onSort,o=e.showEditColumn,c=void 0===o||o,l=e.showRemoveColumn,u=void 0!==l&&l,d=e.showVisibilityColumn,s=void 0!==d&&d,m=e.showHeader,f=void 0===m||m,b=e.isSortable,h=void 0!==b&&b,g=e.isLoading,v=void 0!==g&&g,E=e.heightStretch,y=void 0!==E&&E,w=e.fullHeight,C=void 0!==w&&w,k=e.noRowsDisplay,I=void 0===k?r.a.createElement(G,{text:p.b._("No recipes in category")}):k,_={isLoading:v,items:t,disableHeader:!f,heightStretch:y,fullHeight:C,noRowsRenderer:function(){return I}},T=[c&&r.a.createElement(x.d,{dataKey:"id",width:F.d.ButtonColumnWidthPx,minWidth:F.d.ButtonColumnWidthPx,cellRenderer:q({canQuery:"wareCategory"},K),cellDataGetter:function(e){var t=e.rowData;return Object(O.b)(t.id,t.categoryType.enum)}}),u&&r.a.createElement(x.d,{dataKey:"id",width:F.d.ButtonColumnWidthPx,minWidth:F.d.ButtonColumnWidthPx,cellRenderer:H,columnData:{onRemove:n}}),s&&r.a.createElement(x.d,{dataKey:"visible",width:F.d.ButtonColumnWidthPx,minWidth:F.d.ButtonColumnWidthPx,cellRenderer:q({canMutate:"updateWareCategory"},U),columnData:{onToggle:a}}),r.a.createElement(x.d,{dataKey:"nameLabel",width:300,label:p.b._("Name"),cellRenderer:z,columnData:{noteKey:"internalNoteLabel"}}),r.a.createElement(x.d,{dataKey:"countRecipes",label:p.b._("Recipe count"),width:100,cellRenderer:function(e){var t=e.cellData;return"".concat(t," ").concat(p.b._("Recipes").toLocaleLowerCase())}}),h&&r.a.createElement(x.d,{dataKey:"id",width:50,cellRenderer:function(){return r.a.createElement(Q.a,null)}})];return h?r.a.createElement.apply(r.a,[re,Object(j.a)({onSort:i},_)].concat(T)):r.a.createElement.apply(r.a,[V,_].concat(T))},le=l.b.div.withConfig({displayName:"CreateButton__CreateButtonContainer",componentId:"sc-837yoh-0"})(["position:absolute;right:0;z-index:5;"]),ue=function(e){var t=e.routeTo,a=void 0===t?"create":t,n=e.onClick;return r.a.createElement(le,null,r.a.createElement(T.a,{to:a,onClick:n},r.a.createElement(R.a,null,r.a.createElement(S.a,{iconName:"add_circle",color:F.a.green}))))},de=Object(C.observer)(function(e){var t=e.headline,a=e.subHeadline,n=void 0!==a&&a,i=e.categoryType,o=Object(I.c)().settings,c=Object(f.eb)({branchId:o.branchId,categoryType:i}),l=c.data,u=c.loading,m=c.updateQuery,p=c.refetch,b=Object(f.N)(),h=Object(w.a)(b,1)[0],g=l&&l.categories||[];return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,null,r.a.createElement(d.a,{widthGrowIndex:1},r.a.createElement(k.a,null,t),n&&r.a.createElement(k.a,{size:"smaller"},n)),r.a.createElement(d.a,{fixedWidth:!0},r.a.createElement(ue,{routeTo:Object(O.b)("create",i)}))),r.a.createElement(ce,{isLoading:u,categories:g,onToggle:function(e,t){h({categoryId:e,visible:t},{optimisticResponse:{updateWareCategory:{__typename:"WareCategory",id:e,visible:t}}})},isSortable:!0,showHeader:!1,fullHeight:!0,showVisibilityColumn:!0,onSort:function(){var e=Object(y.a)(E.a.mark(function e(t){var a,n,r,i;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.item,n=t.items,r=t.offset,m(function(){return{categories:n}}),e.next=4,o.menu.category.sortCategory(a.id,r);case 4:if(!(i=e.sent)){e.next=8;break}return e.next=8,p();case 8:return e.abrupt("return",i);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}))}),se=a(73),me=Object(l.b)(S.a).withConfig({displayName:"MenuGuideDownload__MenuGuideDownloadButton",componentId:"sc-1kyx0kn-0"})(["white-space:nowrap;margin-left:2rem;& a{text-decoration:none;color:",";padding:1rem;}"],F.a.black),fe=Object(C.observer)(function(){var e=Object(I.c)().settings,t=Object(f.fb)({branchId:e.branchId}),a=t.loading,n=t.data;return a||!(n&&n.companyBranch&&n.companyBranch.foodMenuUrl)?null:r.a.createElement(me,{color:F.a.greyMiddle},r.a.createElement("a",{href:n.companyBranch.foodMenuUrl,target:"_blank"},r.a.createElement(se.Trans,{id:"Menu codes manual"})))}),pe=l.b.div.withConfig({displayName:"MenuCategoryListPage__PartialDataTableContainer",componentId:"sc-1y45l0l-0"})(["height:calc(100% - 3.5rem);padding-top:1rem;overflow-y:scroll;overflow-x:hidden;-webkit-overflow-scrolling:touch;"]),be=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{pageTitle:p.b._("Category overview"),useBackButton:!0}),r.a.createElement(h.a,null,r.a.createElement(u.a,{stretchToParent:!0},r.a.createElement(s.a,{justify:"start"},r.a.createElement(d.a,null,r.a.createElement(g.a,{width:20})),r.a.createElement(d.a,null,r.a.createElement(fe,null))),r.a.createElement(pe,null,r.a.createElement(de,{categoryType:f.A.Main,headline:p.b._("Category of recipes")}),r.a.createElement(m.a,{size:1.5}),r.a.createElement(de,{categoryType:f.A.SideDish,headline:p.b._("Category of sidedish")}),r.a.createElement(m.a,{size:1.5}),r.a.createElement(de,{categoryType:f.A.Cover,headline:p.b._("Category of covers")})))))},he=a(7661),ge=l.b.div.withConfig({displayName:"TopRightButtonContainer",componentId:"sc-1n6vrhf-0"})(["position:fixed;z-index:500;right:0;top:0rem;width:10rem;opacity:0.96;background:",";border-radius:",";"],F.a.black,F.c.Button),ve=function(e){var t=e.type,a=e.isMain,n=e.isSideDish,i=e.isCover,o=e.children;return!0===a&&t===f.A.Main||!0===n&&t===f.A.SideDish||!0===i&&t===f.A.Cover?r.a.createElement(r.a.Fragment,null,o):null},Ee=a(159),ye=a(208),we=(ie={},Object(Ee.a)(ie,f.A.Main,Object(ye.i18nMark)("Ware categories")),Object(Ee.a)(ie,f.A.SideDish,Object(ye.i18nMark)("Sidedish categories")),Object(Ee.a)(ie,f.A.Cover,Object(ye.i18nMark)("Cover categories")),ie),Ce=(oe={},Object(Ee.a)(oe,f.A.Main,Object(ye.i18nMark)("Ware recipe")),Object(Ee.a)(oe,f.A.SideDish,Object(ye.i18nMark)("Sidedish recipe")),Object(Ee.a)(oe,f.A.Cover,Object(ye.i18nMark)("Cover recipe")),oe);function ke(e){return p.b._(we[e])}function Ie(e){return p.b._(Ce[e])}var Oe=a(7708),je=a(7707),_e=function(e){var t=e.isCreate,a=void 0!==t&&t;return r.a.createElement(he.FormApi,{render:function(e){return r.a.createElement(je.a,{id:"form-submit"},function(e,t){if(!Object(Oe.a)(e))return p.b._("Fix form errors");return t?p.b._("Create"):p.b._("Save")}(e,a))}})};var xe=a(7700),Te=l.b.form.withConfig({displayName:"FormContainer",componentId:"sc-38ce8s-0"})(["margin:0.6rem;display:flex;"]),Re=l.b.div.withConfig({displayName:"FormContainer__FormColumn",componentId:"sc-38ce8s-1"})(["flex:none;margin-right:1rem;"]),Se=a(7787),Le=a(111),Ne=a(7779),De=a(8137),Fe=l.b.div.withConfig({displayName:"PictogramDisplay__PictogramDisplayStyled",componentId:"sc-6st3s9-0"})(["&:before{font-size:"," !important;margin-left:0.5rem !important;}"],function(e){var t=e.fontSize,a=void 0===t?2:t,n=e.fontSizeUnit,r=void 0===n?"rem":n;return"".concat(a).concat(r)}),Ae=function(e){var t=e.pictogramId,a=e.fontSize,n=void 0===a?2:a,i=e.fontSizeUnit,o=void 0===i?"rem":i;return r.a.createElement(Fe,{className:Be(t),fontSize:n,fontSizeUnit:o})};function Be(e){return"flaticon-".concat(e)}var Pe=a(7668),We=a(25),Me=function(e){var t=e.field;return r.a.createElement(he.Field,{field:t,pure:!0},function(e){return r.a.createElement(Pe.a,{value:e.value?{pictogram:e.value}:null,onChange:function(t){t&&!Array.isArray(t)&&e.setValue(t.pictogram)},options:De.pictograms.map(function(e){return{pictogram:e}}),getOptionValue:We.a.prop("pictogram"),formatOptionLabel:function(e){var t=e.pictogram;return r.a.createElement(Ae,{pictogramId:t,fontSize:2})},components:{SingleValue:function(e){var t=e.data;return r.a.createElement(Ae,{pictogramId:t.pictogram,fontSize:4})}},styles:{container:function(e){return Object(j.a)({},e,{width:"8rem"})},menuList:function(e){return Object(j.a)({},e,{maxHeight:"35rem"})}},isClearable:!1,isSearchable:!1,minWidth:8})})},Ve=a(7725),qe=function(e){var t=e.confirmText,a=e.onDelete;return r.a.createElement(he.Field,{field:"id"},function(e){return"NEW"!==e.value&&r.a.createElement(i.Route,null,function(n){var i=n.history;return r.a.createElement(Ve.a,{confirmText:t,onDelete:Object(y.a)(E.a.mark(function t(){return E.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a(e.value);case 2:i.goBack();case 3:case"end":return t.stop()}},t,this)}))})})})},Ke=a(7669),He=a(7663),Ue=function(e){var t=e.field,a=void 0===t?"internalNote":t,n=(e.icon,e.label),i=void 0===n?p.b._("Internal note").toLocaleLowerCase():n,o=Object(_.a)(e,["field","icon","label"]);return r.a.createElement(He.a,{label:i,labelWidth:7},r.a.createElement(Ke.a,Object.assign({field:a,inputFullWidth:!0},o)))},ze=function(e){var t=e.field,a=void 0===t?"nameLabel":t,n=e.icon,i=void 0===n?"label":n,o=Object(_.a)(e,["field","icon"]);return r.a.createElement(He.a,{icon:i,labelWidth:7},r.a.createElement(Ke.a,Object.assign({field:a,inputFullWidth:!0,isRequired:!0,validatioName:p.b._("Name")},o)))},Ge=function(e){var t=e.categoryType;return r.a.createElement(Te,null,r.a.createElement(Re,null,r.a.createElement(Le.a,{width:22},r.a.createElement(ze,{placeholder:p.b._("Category name"),inputFullWidth:!0})),r.a.createElement(Le.a,{width:22},r.a.createElement(Ue,{placeholder:p.b._("Category internal note")})),r.a.createElement(Se.a,{field:"visible",label:p.b._("To show this category")})),t===f.A.Main?r.a.createElement(Re,null,r.a.createElement(Me,{field:"pictogram"})):null,r.a.createElement(xe.a,{position:"BottomRight"},r.a.createElement(Ne.a,{render:function(e){var a=e.menu;return r.a.createElement(qe,{confirmText:p.b._("Remove this category?"),onDelete:function(e){return a.category.deleteCategory(e,t)}})}})))},Qe=a(95),$e=a(8139);function Je(e){var t=e.shouldLoad,a=e.loader,i=Object(_.a)(e,["shouldLoad","loader"]),o=Object(n.useState)(null),c=Object(w.a)(o,2),l=c[0],u=c[1];return Object(n.useEffect)(function(){t&&a().then(u)},[t]),r.a.createElement(he.Form,Object.assign({values:l},i))}var Xe=function(e){var t=e.render;return r.a.createElement(i.Route,null,function(e){var a=e.history;return t?t(function(){return a.goBack()}):(a.goBack(),null)})},Ye=a(30),Ze=l.b.div.withConfig({displayName:"MenuBaseFormLoader__ErrorPop",componentId:"sc-18epk2-0"})(["color:red;padding:1rem;max-width:30rem;overflow-wrap:break-word;"]),et=function(e){function t(){var e,a;Object(J.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(Y.a)(this,(e=Object(Z.a)(t)).call.apply(e,[this].concat(r)))).state={submitError:null,validationErrors:null},a}return Object(ee.a)(t,e),Object(X.a)(t,[{key:"renderErrors",value:function(){var e=this.state,t=e.submitError,a=e.validationErrors;return t?this.renderSubmitError(t):a?this.renderValidationErrors(a):null}},{key:"renderSubmitError",value:function(e){var t=[p.b._("Unexpected error while sending form. Out team was notified about the issue.")];if(Object($e.isApolloError)(e)){var a=We.a.propEq("showToUser",!0),n=e.graphQLErrors.filter(a).map(We.a.prop("message"));n.length&&(t=n)}return this.renderPopover(t)}},{key:"renderValidationErrors",value:function(e){return null}},{key:"renderPopover",value:function(e){var t=this;return r.a.createElement(Qe.g,{open:!0,anchorEl:function(){return document.getElementById("submit-button")},onClose:function(){return t.setState({submitError:null,validationErrors:null})},anchorOrigin:{vertical:"bottom",horizontal:"center"}},e.map(function(e,t){return r.a.createElement(Ze,{key:t},e)}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.isCreate,n=t.onCreate,i=t.onUpdate,o=t.getDefaultValues,c=t.loadValues,l=t.loadDefaults,u=t.children;return r.a.createElement(Xe,{render:function(t){return r.a.createElement(Je,{shouldLoad:!0,defaultValues:o(),loader:Object(y.a)(E.a.mark(function e(){var t,n,r;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o(),!l){e.next=6;break}return e.next=4,l();case 4:n=e.sent,Object.assign(t,n);case 6:if(!a){e.next=8;break}return e.abrupt("return",t);case 8:return e.next=10,c();case 10:return r=e.sent,e.abrupt("return",Object.assign({},t,r));case 12:case"end":return e.stop()}},e,this)})),onChange:function(e){return Object(Ye.d)("new values",e.values)},onSubmit:function(){var e=Object(y.a)(E.a.mark(function e(r){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=5;break}return e.next=3,n(r);case 3:e.next=7;break;case 5:return e.next=7,i(r);case 7:t();case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),onSubmitFailure:function(t,a){e.setState({validationErrors:t,submitError:a}),Object.keys(t).length&&Object(Ye.c)("validation errors",t),a&&Object(Ye.c)("submit error",a)}},u,e.renderErrors())}})}}]),t}(r.a.Component);function tt(){return Object(I.c)().settings.menu}var at=function(e){var t=e.categoryId,a=e.categoryType,n=e.children,i=tt();return r.a.createElement(et,{isCreate:null===t,onCreate:function(e){return i.category.createCategory(e,a)},onUpdate:function(e){return i.category.updateCategory(e,a)},getDefaultValues:function(){return function(e){return{id:"NEW",visible:!0,internalNoteLabel:"",pictogram:"",nameLabel:"",minCount:0,maxCount:0,categoryType:{enum:e},recipes:[]}}(a)},loadValues:Object(y.a)(E.a.mark(function e(){var a,n;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.client.query({query:f.x,variables:{categoryId:t},fetchPolicy:"no-cache"});case 2:return a=e.sent,n=a.data,e.abrupt("return",n.category);case 5:case"end":return e.stop()}},e,this)}))},n)};function nt(e){var t=e.items,a=e.renderItem,n=(e.isLoading,e.heightStretch),i=void 0!==n&&n,o=e.rowHeight,c=void 0===o?60:o,l=Object(_.a)(e,["items","renderItem","isLoading","heightStretch","rowHeight"]),u=r.a.useCallback(function(e){var n=e.key,i=e.style,o=e.index;return r.a.createElement("div",{key:n,style:i},a(t[o],o))},[a,t]),d=function(e,a){return r.a.createElement(x.g,Object.assign({width:e,height:a,headerHeight:50,rowHeight:c,rowCount:t?t.length:0,rowRenderer:u,style:{outline:"none"}},l))};return i?r.a.createElement(x.a,null,function(e){var t=e.width,a=e.height;return d(t,a)}):r.a.createElement(x.i,{scrollElement:window},function(e){var t=e.height;return r.a.createElement(x.a,{disableHeight:!0},function(e){var a=e.width;return d(a,t)})})}var rt=a(7702),it=a.n(rt),ot=a(450),ct=function(e){return void 0===e||Object(rt.isEmpty)(e+"")||!Object(ot.b)(e+"")?p.b._("Price must be a number"):null},lt=function(e){var t=e.field,a=void 0===t?"price.value":t,n=e.icon,i=void 0===n?"toll":n,o=Object(_.a)(e,["field","icon"]);return r.a.createElement(He.a,{icon:i},r.a.createElement(Le.a,{width:5},r.a.createElement(Ke.a,Object.assign({field:a,inputFullWidth:!0,validate:ct},o))))},ut=a(161),dt=a(7784),st=a(3),mt=a(4),ft=a.n(mt),pt=a(160);function bt(){var e=Object(st.a)(["\n  query GVats($branchId: ID!) {\n    vats(companyBranch: $branchId) {\n      id\n      vat\n    }\n  }\n"]);return bt=function(){return e},e}var ht=ft()(bt()),gt=Object(pt.a)(ht),vt=Object(ut.a)(["margin-left:5rem;"]),Et=function(e){var t=e.field,a=void 0===t?"price.vat":t,n=Object(I.c)().settings;return Object(C.useObserver)(function(){return r.a.createElement(gt,{variables:{branchId:n.branchId},fetchPolicy:"cache-and-network",renderLoading:!1,render:function(e){var t=e.vats;return r.a.createElement(He.a,{className:vt,label:"".concat(p.b._("VAT"),":")},t&&r.a.createElement(dt.a,{field:a,items:t,formatItem:function(e){var t=e.vat;return"".concat(t,"%")},isRequired:!0,validationName:p.b._("VAT")}))}})})},yt=Object(l.b)(function(e){var t=e.field,a=e.className;return r.a.createElement(he.Field,{field:t},function(e){return r.a.createElement("span",{className:a},e.value)})}).withConfig({displayName:"FormPricingField__FormPricingCurrencyCode",componentId:"hoj9dy-0"})(["padding:0.5rem;"]),wt=function(e){var t=e.priceType,a=e.label;return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,null,a),r.a.createElement(he.NestedField,{field:["prices",t]},r.a.createElement(s.a,{justify:"flex-start"},r.a.createElement(lt,{field:"value"}),r.a.createElement(yt,{field:"currencyCode"}),r.a.createElement(Et,{field:"vatId"}))))},Ct=a(68);function kt(e){var t=e.onAdd,a=e.addLabel,i=void 0===a?p.b._("Add"):a,o=e.addButtonText,c=void 0===o?p.b._("Add"):o,l=Object(_.a)(e,["onAdd","addLabel","addButtonText"]),u=Object(Ct.useStateRef)(null),m=Object(w.a)(u,2),f=m[0],b=m[1],h=Object(n.useCallback)(function(){var e=f();null!==e&&(t(e),b(null))},[t]),g=Object(n.useCallback)(function(e){"Enter"===e.key&&h()},[]),v=Object(n.useCallback)(function(e){b(e||null)},[]);return r.a.createElement(s.a,{justify:"flex-start"},r.a.createElement(d.a,{fixedWidth:!0,width:"4rem",margin:"auto 0"},i),r.a.createElement(d.a,{fixedWidth:!0,width:"20rem",margin:"auto 0"},r.a.createElement(Pe.a,Object.assign({value:f(),onChange:v,onKeyDown:g,isMulti:!1,isClearable:!1,getOptionValue:We.a.prop("id"),getOptionLabel:We.a.prop("nameLabel")},l))),r.a.createElement(d.a,{fixedWidth:!0,width:"10rem",margin:"auto 0"},r.a.createElement(S.a,{text:c,disabled:null===f(),onClick:h})))}var It=function(e){var t=e.recipes,a=e.onRemove;return r.a.createElement(V,{items:t,disableHeader:!0},r.a.createElement(x.d,{dataKey:"associatedRecipe",width:F.d.ButtonColumnWidthPx,minWidth:F.d.ButtonColumnWidthPx,cellRenderer:function(e){var t=e.cellData;return r.a.createElement(D,{onClick:function(){return a(t)}})}}),r.a.createElement(x.d,{dataKey:"nameLabel",width:300,label:p.b._("Name"),cellRenderer:z,columnData:{noteKey:"internalNote"}}),r.a.createElement(x.d,{dataKey:"formattedPrice",width:100,label:p.b._("Price")}))},Ot=a(316),jt=function(e){var t=e.priceType,a=e.recipeId;return r.a.createElement(he.Field,{field:"associatedRecipes"},function(e){var n=We.a.filter(We.a.propEq("warePriceType",t),e.value),i=We.a.reject(function(e){return e.id===a||(t=e.id,n.some(We.a.propEq("associatedRecipe",t)));var t}),o=function(a){e.setValue(e.value.concat({warePriceType:t,associatedRecipe:a.id,nameLabel:a.nameLabel,formattedPrice:"?"}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(It,{recipes:n,onRemove:function(a){e.setValue(We.a.reject(function(e){var n=e.associatedRecipe,r=e.warePriceType;return n===a&&r===t},e.value))}}),r.a.createElement(Ne.a,{render:function(e){return r.a.createElement(Ot.c,{variables:{branchId:e.branchId},fetchPolicy:"cache-and-network",render:function(e){var t=e.recipes;return r.a.createElement(kt,{options:i(t),onAdd:o})}})}}),r.a.createElement(m.a,null))})},_t=[{priceType:f.B.Delivery,label:Object(ye.i18nMark)("Delivery sale")},{priceType:f.B.Inhouse,label:Object(ye.i18nMark)("Local sale")}],xt=function(e){var t=e.recipeType,a=e.recipeId;return r.a.createElement(r.a.Fragment,null,_t.map(function(e){var i=e.priceType,o=e.label;return r.a.createElement(n.Fragment,{key:i},r.a.createElement(wt,{priceType:i,label:p.b._(o)}),r.a.createElement(m.a,null),t===f.A.Main&&r.a.createElement(jt,{priceType:i,recipeId:a}))}))},Tt=Object(C.observer)(function(e){var t=e.categoryType,a=e.filterRecipes,n=e.onAdd,i=Object(I.c)().settings,o=Object(f.gb)({branchId:i.branchId,categoryType:t}),c=o.data,l=o.loading;return r.a.createElement(kt,{isLoading:l,options:l?[]:a(c.recipes),onAdd:n})}),Rt=l.b.div.withConfig({displayName:"CategoryRecipesView__Container",componentId:"sc-1g4q35k-0"})(["display:flex;flex-direction:column;height:calc(100% - 2rem);width:100%;"]),St=l.b.div.withConfig({displayName:"CategoryRecipesView__FormFixedRow",componentId:"sc-1g4q35k-1"})(["flex:0 0 auto;"]),Lt=l.b.div.withConfig({displayName:"CategoryRecipesView__FormStretchedRow",componentId:"sc-1g4q35k-2"})(["flex:1 1 0;margin:1rem 0 0 1rem;"]),Nt=Object(te.SortableContainer)(Lt),Dt=l.b.div.withConfig({displayName:"CategoryRecipesView__RecipeRow",componentId:"sc-1g4q35k-3"})(["display:grid;grid-gap:1rem;grid-template-columns:","px 100px 3fr 1fr 1fr 50px;"],F.d.ButtonColumnWidthPx),Ft=l.b.div.withConfig({displayName:"CategoryRecipesView__MoveCell",componentId:"sc-1g4q35k-4"})(["cursor:move;"]),At=Object(te.SortableElement)(function(e){var t=e.recipe,a=e.onRemove,n=_t.map(function(e){var a=e.priceType,n=e.label,i=t.prices.find(We.a.pathEq(["priceType","enum"],a));return r.a.createElement(Ft,{key:a},r.a.createElement(W,null,p.b._(n)),i?i.price.formattedValue:r.a.createElement("i",null,p.b._("Not set").toLocaleLowerCase()))});return r.a.createElement(Dt,null,r.a.createElement("div",null,r.a.createElement(D,{onClick:a})),r.a.createElement(Ft,null,t.code),r.a.createElement(Ft,null,t.nameLabel,r.a.createElement(W,null,t.internalNote)),n,r.a.createElement(Q.a,null))}),Bt=function(e){var t=e.categoryType;return r.a.createElement(he.Field,{field:"recipes"},function(e){var a=e.value,n=function(){var t=Object(y.a)(E.a.mark(function t(n){var r,i,o;return E.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.newIndex,i=n.oldIndex,r!==i){t.next=3;break}return t.abrupt("return");case 3:o=Object(te.arrayMove)(a,i,r),e.setValue(o);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(Rt,null,r.a.createElement(St,null,r.a.createElement(Tt,{categoryType:t,filterRecipes:We.a.without(e.value),onAdd:function(t){return e.setValue(e.value.concat(t))}})),r.a.createElement(Nt,{lockAxis:"y",lockToContainerEdges:!0,onSortEnd:n},r.a.createElement(nt,{items:e.value,heightStretch:!0,rowHeight:60,renderItem:function(t,a){return r.a.createElement(At,{recipe:t,onRemove:function(){e.setValue(We.a.reject(We.a.propEq("id",t.id),e.value))},index:a})},rowCount:e.value.length})))})},Pt=a(154),Wt=a.n(Pt),Mt=a(7682),Vt=a(7670),qt=a(7984),Kt=l.b.div.withConfig({displayName:"CategoryRequirementControl__StyledCategoryRequirementControl",componentId:"sc-9aaa3b-0"})(["display:flex;align-items:center;& > label{min-width:5rem;}& > *{margin:0.2rem 0.5rem;}input.count{font-size:1.5rem;line-height:1.5rem;text-align:center;}"]),Ht=function(e){var t=e.count,a=e.label,n=e.enabled,i=e.onChange,o=e.id,c=r.a.useRef(t);return r.a.createElement(Kt,null,r.a.createElement("label",{htmlFor:o},a),r.a.createElement(Le.a,{width:3},r.a.createElement(Vt.a,{id:o,value:0===t?"":t,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){e.target.validity.valid&&i(e.target.valueAsNumber)}),disabled:0===t||!n,inputFullWidth:!0,type:"tel",pattern:"^[1-9]\\d*$",className:"count"})),r.a.createElement(Le.a,{width:4},r.a.createElement(S.a,{disabled:!n||t<=0,onClick:function(){return i(t-1)}},"\u2796")),r.a.createElement(Le.a,{width:4},r.a.createElement(S.a,{disabled:!n,onClick:function(){return i(t+1)}},"\u2795")),r.a.createElement("div",null,r.a.createElement(qt.a,null,r.a.createElement("input",{type:"checkbox",id:"".concat(o,"-nolimit"),checked:0===t,disabled:!n,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){0===t?i(c.current||1):(c.current=t,i(0))})}),r.a.createElement("label",{htmlFor:"".concat(o,"-nolimit")},r.a.createElement(se.Trans,{id:"Unlimited"})))))},Ut=function(){return{noLimit:{label:p.b._("No limitation"),min:0,max:0},optional:{label:p.b._("One at most"),min:0,max:1},required:{label:p.b._("One at least"),min:1,max:0},onlyOne:{label:p.b._("Exactly one"),min:1,max:1},custom:{label:p.b._("Custom range")}}},zt=function(e){var t=e.formApi,a=r.a.useMemo(Ut,[]),n=r.a.useState("noLimit"),i=Object(w.a)(n,2),o=i[0],c=i[1],l=t.getValue("minCount"),u=t.getValue("maxCount");r.a.useEffect(function(){if("custom"!==o){var e=Wt.a.findKey(a,function(e){var t=e.min,a=e.max;return t===l&&a===u});e&&c(e)}},[o,l,u]);var d=function(e){return t.setValue("minCount",e)},s=function(e){return t.setValue("maxCount",e)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Mt.a,{items:Object.keys(a),formatItem:function(e){return a[e].label},onSingleSelection:function(e){if(e){c(e);var t=a[e];d(t.min||0),s(t.max||0)}},selectedItem:o}),r.a.createElement(Ht,{id:"minCount",count:l,label:r.a.createElement(se.Trans,{id:"Minimum"}),enabled:"custom"===o,onChange:d}),r.a.createElement(Ht,{id:"maxCount",count:u,label:r.a.createElement(se.Trans,{id:"Maximum"}),enabled:"custom"===o,onChange:s}))},Gt=l.b.div.withConfig({displayName:"MenuCategoryPage__FormContainer",componentId:"sc-154ix5u-0"})(["display:flex;flex-direction:column;height:100%;width:100%;"]),Qt=l.b.div.withConfig({displayName:"MenuCategoryPage__FormFixedRow",componentId:"sc-154ix5u-1"})(["flex:0 0 8rem;"]),$t=l.b.div.withConfig({displayName:"MenuCategoryPage__FormStretchedRow",componentId:"sc-154ix5u-2"})(["flex:1 1 0;min-height:0;position:relative;"]),Jt=function(e){var t=e.categoryId,a=e.categoryType;return r.a.createElement(at,{categoryId:t,categoryType:a},r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{pageTitle:ke(a),hideLogoutWidget:!0,useBackButton:!0}),r.a.createElement(h.a,null,r.a.createElement(Gt,null,r.a.createElement(Qt,null,r.a.createElement(u.a,null,r.a.createElement(Ge,{categoryType:a}))),r.a.createElement(ve,{isSideDish:!0,type:a},r.a.createElement(Qt,null,r.a.createElement(u.a,null,r.a.createElement(k.a,null,r.a.createElement(se.Trans,{id:"Required amounts of recipes to be picked"})),r.a.createElement(he.FormApi,{component:zt})))),r.a.createElement($t,null,r.a.createElement(u.a,{stretchToParent:!0},r.a.createElement(k.a,null,r.a.createElement(se.Trans,{id:"Recipes assigned to this category"})),r.a.createElement(Bt,{categoryType:a}))))),r.a.createElement(ge,null,r.a.createElement(B.a,{mutationName:null===t?"createWareCategory":"updateWareCategory"},r.a.createElement(_e,{isCreate:null===t})))))},Xt=l.b.div.withConfig({displayName:"DataTableContainer",componentId:"sc-1ammizr-0"})(["height:calc(100% - 4.5rem);padding-top:2rem;"]),Yt=Object(C.observer)(function(){var e=Object(I.c)().settings.menu.recipe,t=Object(f.db)({branchId:e.branchId}),a=t.data,n=t.loading;return r.a.createElement(Le.a,{width:17},r.a.createElement(Pe.a,{key:e.branchId,onChange:function(t){e.setCategoryFilter(t?t.id:null)},options:function(){if(!a||!a.categories)return[];var e=We.a.groupBy(function(e){return e.categoryType.enum.toString()},a.categories);return Object.keys(e).map(function(t){return{label:ke(t),options:e[t]}})}(),isMulti:!1,isClearable:!0,isSearchable:!0,isLoading:n,placeholder:p.b._("Filter by category"),getOptionValue:We.a.prop("id"),getOptionLabel:We.a.prop("nameLabel")}))}),Zt=a(94),ea=function(e){var t=e.modelType,a=Object(I.c)().settings.menu[t],n=Object(Ct.useDebounceCallback)(a.setFilterInput);return r.a.createElement(He.a,{icon:Zt.k},r.a.createElement(Le.a,{width:17},r.a.createElement(Vt.a,{defaultValue:a.filterInput,inputFullWidth:!0,onChange:function(e){return n(e.target.value)},placeholder:p.b._("Filter by name or code")})))},ta=a(170),aa=a(322),na=function(){var e=r.a.useState(!1),t=Object(w.a)(e,2),a=t[0],n=t[1],i=Object(Ct.useRouterContext)().history,o=function(e){return function(){var t=Object(aa.b)(Object(ta.a)("create","".concat(location.pathname,"/")),e);i.push(t)}};return r.a.createElement(r.a.Fragment,null,r.a.createElement(ue,{onClick:function(e){e.preventDefault(),n(!0)}}),r.a.createElement(Qe.c,{open:a,onClose:function(){return n(!1)}},r.a.createElement(Qe.f,null,"Select item type"),r.a.createElement(S.a,{onClick:o(f.A.Main)},r.a.createElement(se.Trans,{id:"Ware"})),r.a.createElement(S.a,{onClick:o(f.A.SideDish)},r.a.createElement(se.Trans,{id:"Sidedish"})),r.a.createElement(S.a,{onClick:o(f.A.Cover)},r.a.createElement(se.Trans,{id:"Cover"}))))},ra=a(7738),ia=a(7985),oa=function(e){var t=e.recipes,a=e.onToggle,n=e.onRemove,i=e.showEditColumn,o=void 0===i||i,c=e.showRemoveColumn,l=void 0!==c&&c,u=e.showVisibilityColumn,d=void 0===u||u,s=e.showTypeColumn,m=void 0!==s&&s,b=e.isLoading,h=void 0!==b&&b,g=e.heightStretch,v={isLoading:h,items:t,heightStretch:void 0!==g&&g,noRowsRenderer:function(){return h?r.a.createElement(ia.a,null):r.a.createElement(k.a,null,p.b._("No recipes has been found"))}};return r.a.createElement(V,v,o&&r.a.createElement(x.d,{dataKey:"id",width:F.d.ButtonColumnWidthPx,minWidth:F.d.ButtonColumnWidthPx,cellRenderer:q({canQuery:"recipe"},K),cellDataGetter:function(e){var t=e.rowData;return Object(aa.b)(t.id,t.recipeType.enum)}}),l&&r.a.createElement(x.d,{dataKey:"id",width:F.d.ButtonColumnWidthPx,minWidth:F.d.ButtonColumnWidthPx,cellRenderer:H,columnData:{onRemove:n}}),d&&r.a.createElement(x.d,{dataKey:"visible",width:F.d.ButtonColumnWidthPx,minWidth:F.d.ButtonColumnWidthPx,cellRenderer:q({canMutate:"updateRecipe"},U),columnData:{onToggle:a}}),m&&r.a.createElement(x.d,{dataKey:"recipeType",width:100,label:p.b._("Type"),cellRenderer:la}),r.a.createElement(x.d,{dataKey:"code",width:100,label:p.b._("Code")}),r.a.createElement(x.d,{dataKey:"nameLabel",width:600,flexGrow:2,label:p.b._("Name"),cellRenderer:z,columnData:{noteKey:"internalNote"}}),r.a.createElement(x.d,{dataKey:"prices",width:150,label:p.b._("Delivery sale"),cellRenderer:ca,columnData:{priceType:f.B.Delivery}}),r.a.createElement(x.d,{dataKey:"prices",width:150,label:p.b._("Local sale"),cellRenderer:ca,columnData:{priceType:f.B.Inhouse}}),r.a.createElement(x.d,{dataKey:"availableAmount",label:p.b._("recipe.list.availableAmount",{},{defaults:"Stock"}),width:100}),r.a.createElement(x.d,{dataKey:"internalNote",label:p.b._("Internal note"),width:200}))};function ca(e){var t=e.cellData,a=e.columnData.priceType,n=t.find(We.a.pathEq(["priceType","enum"],a));return n?n.price.formattedValue:r.a.createElement("i",null,p.b._("Not set").toLocaleLowerCase())}function la(e){var t=e.rowData.recipeType.enum;return t===f.A.SideDish?p.b._("Sidedish").toLocaleLowerCase():t===f.A.Cover?p.b._("Cover").toLocaleLowerCase():p.b._("Ware").toLocaleLowerCase()}var ua=Object(C.observer)(function(){var e=Object(I.c)().settings,t=Object(f.gb)({branchId:e.branchId,categoryId:e.menu.recipe.categoryFilterId}),a=t.data,n=t.loading,i=Object(C.useComputed)(function(){if(!a||!a.recipes||0===a.recipes.length)return[];var t=Object(ra.a)(e.menu.recipe.filterInput);return a.recipes.filter(We.a.cond([[We.a.propSatisfies(t,"code"),We.a.T],[We.a.propSatisfies(t,"nameLabel"),We.a.T]]))},[a&&a.recipes]);return r.a.createElement(oa,{recipes:i,onToggle:e.menu.recipe.changeVisibility,isLoading:n,heightStretch:!0,showTypeColumn:!0})}),da=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{pageTitle:p.b._("Recipe overview"),useBackButton:!0}),r.a.createElement(h.a,null,r.a.createElement(u.a,{stretchToParent:!0},r.a.createElement(s.a,{justify:"start"},r.a.createElement(d.a,null,r.a.createElement(g.a,{width:20})),r.a.createElement(d.a,null,r.a.createElement(ea,{modelType:"recipe"})),r.a.createElement(d.a,null,r.a.createElement(Yt,null))),r.a.createElement(B.a,{mutationName:"createRecipe"},r.a.createElement(na,null)),r.a.createElement(Xt,null,r.a.createElement(ua,null)))))},sa=Object(C.observer)(function(e){var t=e.categoryType,a=e.currentCategories,n=e.addButtonText,i=e.onAdd,o=Object(I.c)().settings,c=Object(f.eb)({branchId:o.branchId,categoryType:t}),l=c.data,u=c.loading,d=l&&l.categories||[];return r.a.createElement(kt,{isLoading:u,options:We.a.without(a,d),addButtonText:n,onAdd:i})}),ma=function(e){var t=e.categoryType,a=e.addButtonText,n=e.noRowsText,i=e.field;return r.a.createElement(he.Field,{field:i},function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ce,{categories:e.value,showRemoveColumn:!0,showEditColumn:!1,showHeader:!1,onRemove:function(t){return e.setValue(We.a.reject(We.a.propEq("id",t),e.value))},noRowsDisplay:r.a.createElement(G,{text:n})}),r.a.createElement(sa,{addButtonText:a,categoryType:t,currentCategories:e.value,onAdd:function(t){return e.setValue(e.value.concat(t))}}))})},fa=function(e){var t=e.field,a=void 0===t?"code":t,n=(e.icon,e.isRequired,Object(_.a)(e,["field","icon","isRequired"]));return r.a.createElement(He.a,{label:p.b._("Code").toLocaleLowerCase(),labelWidth:7},r.a.createElement(Le.a,{width:9},r.a.createElement(Ke.a,Object.assign({field:a,inputFullWidth:!0,isRequired:!0,validatioName:p.b._("Code")},n))))},pa=function(e){var t=e.field,a=void 0===t?"descriptionLabel":t,n=(e.icon,Object(_.a)(e,["field","icon"]));return r.a.createElement(He.a,{label:p.b._("Public note").toLocaleLowerCase(),labelWidth:7},r.a.createElement(Ke.a,Object.assign({field:a,inputFullWidth:!0},n)))};function ba(){var e=Object(st.a)(["\n  query GAllergens {\n    allergens {\n      ...FMenuAllergen\n    }\n  }\n  ","\n"]);return ba=function(){return e},e}var ha=ft()(ba(),f.f),ga=Object(pt.a)(ha),va=l.b.div.withConfig({displayName:"AllergenIndicator__AllergenBox",componentId:"sc-135ffpv-0"})(["float:left;width:2.3rem;height:2.3rem;border:1px solid ",";margin:0.3rem 0.6rem 0.3rem ",";font-size:1.5rem;text-align:center;vertical-align:middle;cursor:default;",";"],F.a.greyMiddle,F.d.MarginAroundFormComponents,function(e){var t=e.active;return Object(l.a)(["color:",";background-color:",";"],t?F.a.black:F.a.greyMiddle,t?F.a.yellow:F.a.white)}),Ea=function(e){var t=e.selected,a=e.onToggle;return r.a.createElement(ga,{render:function(e){var n=e.allergens;return r.a.createElement(r.a.Fragment,null,n.map(function(e){var n={active:t.includes(e.enum),onClick:a&&function(){return a(e.enum)}};return r.a.createElement(va,Object.assign({key:e.enum,title:e.code},n),e.category)}))}})},ya=We.a.pipe(We.a.map(We.a.prop("allergens")),We.a.flatten,We.a.uniq),wa=function(){return r.a.createElement(he.Field,{field:"ingredients"},function(e){var t=e.value,a=ya(t);return r.a.createElement(Ea,{selected:a})})},Ca=function(e){var t=e.recipeType,a=t===f.A.Main;return r.a.createElement(Te,null,r.a.createElement(Re,null,r.a.createElement(ze,{placeholder:p.b._("Recipe name")}),r.a.createElement(fa,{placeholder:p.b._("Recipe code")}),r.a.createElement(Ue,{placeholder:p.b._("Recipe internal note")}),a&&r.a.createElement(pa,{placeholder:p.b._("Public note for customers, allergens")}),r.a.createElement(ve,{type:t,isMain:!0},r.a.createElement(He.a,{labelWidth:7,icon:"error_outline"},p.b._("Allergens based on stock cards"),r.a.createElement("br",null),r.a.createElement(wa,null))),r.a.createElement(He.a,{labelWidth:7},r.a.createElement(Se.a,{field:"visible",label:p.b._("To show this recipe")}))),r.a.createElement(xe.a,{position:"BottomRight"},r.a.createElement(Ne.a,{render:function(e){var t=e.menu;return r.a.createElement(qe,{confirmText:p.b._("Remove this recipe?"),onDelete:function(e){return t.recipe.deleteRecipe(e)}})}})))},ka=function(e){var t=e.recipeId,a=e.recipeType,n=e.children,i=tt();return r.a.createElement(et,{isCreate:null===t,onCreate:function(e){return i.recipe.createRecipe(e,a)},onUpdate:function(e){return i.recipe.updateRecipe(e)},getDefaultValues:function(){return Oa(a)},loadDefaults:Object(y.a)(E.a.mark(function e(){var t,n,r,o;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.recipe.queryDefaults();case 2:return t=e.sent,n=t.vats,r=t.currencyCode,(o=Object(j.a)({},Oa(a))).prices=Ia(function(e){return{value:0,vatId:n[e],currencyCode:r}}),e.abrupt("return",o);case 8:case"end":return e.stop()}},e,this)})),loadValues:Object(y.a)(E.a.mark(function e(){var a,n;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.client.query({query:Ot.b,variables:{recipeId:t},fetchPolicy:"no-cache"});case 2:return a=e.sent,n=a.data,e.abrupt("return",ja(n.recipe));case 5:case"end":return e.stop()}},e,this)}))},n)};function Ia(e){return[f.B.Delivery,f.B.Inhouse].reduce(function(t,a){return t[a]=e(a),t},{})}function Oa(e){return{id:"NEW",code:"",nameLabel:"",internalNote:"",descriptionLabel:"",image:"",visible:!0,recipeType:{enum:e},sourcePrices:[],prices:Ia(function(){return{value:0,vatId:null,currencyCode:""}}),sourceAssociatedRecipes:[],associatedRecipes:[],sourceIngredients:[],ingredients:[],sideDishes:[],categories:[]}}function ja(e){return Object(j.a)({},e,{associatedRecipes:e.sourceAssociatedRecipes.map(function(e){var t=e.priceType,a=e.recipe;return{warePriceType:t.enum,nameLabel:a.nameLabel,associatedRecipe:a.id,formattedPrice:"?"}}),ingredients:e.sourceIngredients.map(function(e){var t=e.quantity,a=e.stockItem,n=a.id,r=a.label,i=a.allergens;return{stockItem:n,label:r,quantity:t,unitLabel:a.wareUnit.code,allergens:i.map(We.a.prop("enum"))}}),prices:Ia(function(t){var a=e.sourcePrices.find(We.a.pathEq(["priceType","enum"],t));return a?{value:a.price.value,vatId:a.vat.id,currencyCode:a.price.currency.code}:{value:0,vatId:null,currencyCode:""}})})}var _a=function(e){var t=e.ingredients,a=e.onRemove,n=e.isLoading,i=void 0!==n&&n;return r.a.createElement(V,{isLoading:i,items:t,disableHeader:!0,noRowsRenderer:function(){return r.a.createElement(G,{text:p.b._("Recipe has no ingredients")})}},r.a.createElement(x.d,{dataKey:"stockItem",width:F.d.ButtonColumnWidthPx,minWidth:F.d.ButtonColumnWidthPx,cellRenderer:H,columnData:{onRemove:a}}),r.a.createElement(x.d,{dataKey:"label",width:300,label:p.b._("Name")}),r.a.createElement(x.d,{dataKey:"quantity",width:60,label:p.b._("Quantity"),cellRenderer:function(e){var t=e.rowIndex;return r.a.createElement(Le.a,{width:2.5},r.a.createElement(Ke.a,{field:["ingredients",t,"quantity"],validate:xa,inputFullWidth:!0}))}}),r.a.createElement(x.d,{dataKey:"unitLabel",width:100,label:p.b._("Ware unit")}))};function xa(e){var t=p.b._("Quantity");return it.a.isEmpty(e+"")?p.b._("{fieldName} must be entered",{fieldName:t}):it.a.isFloat(e+"",{min:0})?null:p.b._("{fieldName} must be a positive number",{fieldName:t})}var Ta=We.a.differenceWith(function(e,t){return e.id===t.stockItem}),Ra=Object(C.observer)(function(e){var t=e.ingredients,a=e.onAdd,n=e.onRemove,i=Object(I.c)().settings,o=Object(f.ib)({branchId:i.branchId}),c=o.data,l=o.loading;return r.a.createElement(r.a.Fragment,null,r.a.createElement(_a,{ingredients:t,onRemove:n}),r.a.createElement(kt,{isLoading:l,addButtonText:p.b._("Add ingredient"),options:l?[]:Ta(c.stockItems,t),onAdd:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){a({stockItem:e.id,label:e.nameLabel,quantity:1,unitLabel:e.wareUnit.code,allergens:e.allergens.map(We.a.prop("enum"))})})}))}),Sa=function(){return r.a.createElement(he.Field,{field:"ingredients"},function(e){return r.a.createElement(Ra,{ingredients:e.value,onAdd:function(t){e.setValue(Object($.a)(e.value).concat([t]))},onRemove:function(t){e.setValue(We.a.reject(We.a.propEq("stockItem",t),e.value))}})})},La=Object(l.b)("div").withConfig({displayName:"MenuRecipePage__FormContainer",componentId:"yp6ac3-0"})(["margin:0 1.25rem 0 0;"]),Na=function(e){var t=e.recipeId,a=e.recipeType;return r.a.createElement(ka,{recipeId:t,recipeType:a},r.a.createElement(La,null,r.a.createElement(b.a,{width:16,pageTitle:Ie(a),hideLogoutWidget:!0,useBackButton:!0},r.a.createElement(u.a,null,r.a.createElement(Ca,{recipeType:a})),r.a.createElement(u.a,null,r.a.createElement(xt,{recipeType:a,recipeId:t})),r.a.createElement(u.a,null,r.a.createElement(k.a,null,r.a.createElement(se.Trans,{id:"Recipe ingredients"})),r.a.createElement(m.a,null),r.a.createElement(Sa,null)),r.a.createElement(ve,{type:a,isMain:!0},r.a.createElement(u.a,null,r.a.createElement(k.a,null,r.a.createElement(se.Trans,{id:"Sidedish categories"})),r.a.createElement(W,null,r.a.createElement(se.Trans,{id:"These sidedish are presented with recipe"})),r.a.createElement(ma,{categoryType:f.A.SideDish,field:"sideDishes",addButtonText:p.b._("Attach sidedish category"),noRowsText:p.b._("Recipe has no sidedish category attached")})),r.a.createElement(u.a,null,r.a.createElement(k.a,null,r.a.createElement(se.Trans,{id:"Category assignments"})),r.a.createElement(W,null,r.a.createElement(se.Trans,{id:"Recipe is in these categories"})),r.a.createElement(ma,{categoryType:f.A.Main,field:"categories",addButtonText:p.b._("Add to category"),noRowsText:p.b._("Recipe is not in any category")})))),r.a.createElement(ge,null,r.a.createElement(B.a,{mutationName:null===t?"createRecipe":"updateRecipe"},r.a.createElement(_e,{isCreate:null===t})))))},Da=a(93),Fa=a.n(Da),Aa=a(134),Ba=function(e){var t=e.wareUnit,a=e.quantity,n=e.onConfirm;return r.a.createElement(S.a,{disabled:null===t,onClick:n},t?r.a.createElement(se.Trans,{id:"Add {0} {1}",values:{0:Fa()(a).format(Aa.i),1:t.code}}):r.a.createElement(se.Trans,{id:"No stock card selected"}))},Pa=r.a.forwardRef(function(e,t){var a=e.value,n=e.onFilter,i=e.onConfirm;return r.a.createElement(He.a,{label:p.b._("Stock card"),labelWidth:7},r.a.createElement(Vt.a,{ref:t,autoFocus:!0,placeholder:"".concat(p.b._("Code").toLocaleLowerCase()," / ").concat(p.b._("PLU")," / ").concat(p.b._("Title").toLocaleLowerCase()),value:a,onChange:function(e){n(e.target.value)},onKeyPressCapture:function(e){"Enter"===e.key&&(e.preventDefault(),i())}}))}),Wa=r.a.forwardRef(function(e,t){var a=e.enabled,n=e.onChange,i=e.onConfirm;return r.a.createElement(Vt.a,{ref:t,disabled:!a,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){var t=Fa()(e.target.value).value();n(t)}),onKeyPressCapture:function(e){"Enter"===e.key&&(e.preventDefault(),i())}})}),Ma=function(e){var t=e.stockItems,a=e.searchValue,n=e.onSelect;return r.a.createElement(Xt,null,r.a.createElement(V,{items:t,heightStretch:!1},r.a.createElement(x.d,{dataKey:"id",width:F.d.ButtonColumnWidthPx,minWidth:F.d.ButtonColumnWidthPx,cellRenderer:Va,columnData:{onSelect:n}}),r.a.createElement(x.d,{dataKey:"quantity",width:100,label:p.b._("Card stock"),cellRenderer:Ha}),r.a.createElement(x.d,{dataKey:"code",width:100,label:p.b._("Card code"),cellRenderer:Ka(a)}),r.a.createElement(x.d,{dataKey:"nameLabel",width:300,label:p.b._("Card name"),cellRenderer:Ka(a)}),r.a.createElement(x.d,{dataKey:"note",width:300,label:p.b._("Card note")})))};function Va(e){var t=e.rowData,a=e.columnData.onSelect;return r.a.createElement(R.a,null,r.a.createElement(S.a,{iconName:"done",onClick:function(){return a(t)}}))}var qa=l.b.span.withConfig({displayName:"StockDepositResultTable__HighlightedValue",componentId:"sc-3qukvh-0"})(["background-color:",";"],F.a.yellow);function Ka(e){return function(t){var a=t.cellData,n=a.toLocaleLowerCase().indexOf(e.toLocaleLowerCase());if(-1===n)return a;var i=a.substring(0,n),o=a.substring(n,n+e.length),c=a.substring(n+e.length);return r.a.createElement(r.a.Fragment,null,i,r.a.createElement(qa,null,o),c)}}function Ha(e){var t=e.cellData,a=e.rowData;return"".concat(t," ").concat(a.wareUnit.code)}var Ua=function(e){function t(){var e,a;Object(J.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(Y.a)(this,(e=Object(Z.a)(t)).call.apply(e,[this].concat(i)))).state={targetStockItem:null,filteredStockItems:[],searchValue:"",inputQuantity:0},a.filterInputRef=r.a.createRef(),a.quantityInputRef=r.a.createRef(),a.onFilter=function(e){if(""!==e.trim()){var t=Object(ra.a)(e),n=a.props.stockItems.filter(We.a.cond([[We.a.propEq("plu",e),We.a.T],[We.a.propSatisfies(t,"code"),We.a.T],[We.a.propSatisfies(t,"nameLabel"),We.a.T]])),r=null;1===n.length&&(r=We.a.head(n)),a.setState({filteredStockItems:n,searchValue:e,targetStockItem:r})}else a.setState({filteredStockItems:[],searchValue:"",targetStockItem:null})},a.onConfirmFilter=function(){1===a.state.filteredStockItems.length&&a.quantityInputRef.current.focus()},a.onQuantity=function(e){a.setState({inputQuantity:e})},a.onSelectStockItem=function(e){a.setState({targetStockItem:e,filteredStockItems:[e]},function(){a.quantityInputRef.current.focus()})},a.onConfirm=function(){var e=a.state,t=e.targetStockItem,n=e.inputQuantity;t&&0!==n&&a.props.onDeposit(t,n),a.setState({targetStockItem:null,searchValue:"",inputQuantity:0},function(){a.quantityInputRef.current.value="",a.filterInputRef.current.focus()})},a}return Object(ee.a)(t,e),Object(X.a)(t,[{key:"componentDidUpdate",value:function(e){e.stockItems!==this.props.stockItems&&this.onFilter(this.state.searchValue)}},{key:"render",value:function(){var e=this.state,t=e.searchValue,a=e.filteredStockItems,n=e.targetStockItem,i=e.inputQuantity,o=""!==t.trim(),c=0===a.length,l=a.length>1;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Te,null,r.a.createElement(Re,null,r.a.createElement(Pa,{onFilter:this.onFilter,onConfirm:this.onConfirmFilter,value:t,ref:this.filterInputRef})),r.a.createElement(Re,null,r.a.createElement(Wa,{enabled:null!==n,onChange:this.onQuantity,onConfirm:this.onConfirm,ref:this.quantityInputRef})),r.a.createElement(Re,null,r.a.createElement(Ba,{cardName:n?n.nameLabel:"",quantity:i,wareUnit:n?n.wareUnit:null,onConfirm:this.onConfirm}))),r.a.createElement(k.a,null,o&&l&&r.a.createElement(se.Trans,{id:"Continue typing to find single stock card or select one from the list"}),o&&c&&r.a.createElement(se.Trans,{id:"No stock card found from entered search value"}),o&&n&&r.a.createElement(se.Trans,{id:"Stock card <0>{0}</0> is selected",values:{0:n.nameLabel},components:[r.a.createElement("b",null)]})),o&&r.a.createElement(Ma,{searchValue:t,stockItems:a,onSelect:this.onSelectStockItem}))}}]),t}(r.a.Component),za=Object(C.observer)(function(e){var t=e.children,a=Object(I.c)().settings,n=Object(f.hb)({branchId:a.branchId}),r=n.data,i=n.loading,o=Object(f.O)(),c=Object(w.a)(o,1)[0];return t(i?[]:r.stockItems,function(e,t){c({stockItem:e.id,quantityChange:t})})}),Ga=function(e){return r.a.createElement(b.a,{width:16,pageTitle:p.b._("Stock deposit"),useBackButton:!0},r.a.createElement(u.a,null,r.a.createElement(g.a,null),r.a.createElement(za,null,function(e,t){return r.a.createElement(Ua,{stockItems:e,onDeposit:t})})))},Qa=a(301),$a=function(e){var t=e.stockItems,a=e.isLoading;return r.a.createElement(V,{items:t,heightStretch:!0,noRowsRenderer:function(){return a?r.a.createElement(Qa.a,null):r.a.createElement("h3",null,r.a.createElement(se.Trans,{id:"Selected branch has no stock cards"}))}},r.a.createElement(x.d,{dataKey:"id",width:F.d.ButtonColumnWidthPx,minWidth:F.d.ButtonColumnWidthPx,cellRenderer:q({canQuery:"stockItem"},K)}),r.a.createElement(x.d,{dataKey:"code",width:100,label:p.b._("Card code")}),r.a.createElement(x.d,{dataKey:"nameLabel",width:300,minWidth:30,flexGrow:2,label:p.b._("Card name")}),r.a.createElement(x.d,{dataKey:"quantity",width:100,label:p.b._("Card stock"),cellRenderer:Ja}),r.a.createElement(x.d,{dataKey:"allowNegative",width:300,label:p.b._("Negative stock"),cellRenderer:Xa}),r.a.createElement(x.d,{dataKey:"note",width:300,label:p.b._("Card note")}))};function Ja(e){var t=e.cellData,a=e.rowData;return"".concat(t," ").concat(a.wareUnit.code)}function Xa(e){return!0===e.cellData?r.a.createElement(se.Trans,{id:"Permitted"}):r.a.createElement(se.Trans,{id:"Forbidden"})}var Ya=Object(C.observer)(function(){var e=Object(I.c)().settings,t=Object(f.ib)({branchId:e.branchId}),a=t.data,n=t.loading,i=Object(C.useComputed)(function(){if(!a||!a.stockItems||0===a.stockItems.length)return[];var t=e.menu.stock.filterInput,n=Object(ra.a)(t);return a.stockItems.filter(We.a.cond([[We.a.propEq("plu",t),We.a.T],[We.a.propSatisfies(n,"code"),We.a.T],[We.a.propSatisfies(n,"nameLabel"),We.a.T]]))},[a&&a.stockItems]);return r.a.createElement($a,{stockItems:i,isLoading:n})}),Za=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{pageTitle:p.b._("Stock overview"),useBackButton:!0}),r.a.createElement(h.a,null,r.a.createElement(u.a,{stretchToParent:!0},r.a.createElement(s.a,{justify:"start"},r.a.createElement(d.a,null,r.a.createElement(g.a,{width:20})),r.a.createElement(d.a,null,r.a.createElement(ea,{modelType:"stock"}))),r.a.createElement(B.a,{mutationName:"createStockItem"},r.a.createElement(ue,{routeTo:"create"})),r.a.createElement(Xt,null,r.a.createElement(Ya,null)))))};function en(){var e=Object(st.a)(["\n  query GMenuStockDefaults($branchId: ID!) {\n    companyBranch(id: $branchId) {\n      id\n      allowNegative: stockItemsCanBeNegative\n    }\n  }\n"]);return en=function(){return e},e}function tn(){var e=Object(st.a)(["\n  query GMenuStockForm($stockId: ID!) {\n    stockItem(id: $stockId) {\n      id\n      code\n      plu\n      note\n      nameLabel: label\n      allowNegative\n      wareUnit {\n        ...FMenuWareUnit\n      }\n      allergens {\n        ...FMenuAllergen\n      }\n      companyBranch {\n        id\n        allowNegative: stockItemsCanBeNegative\n      }\n    }\n  }\n  ","\n  ","\n"]);return tn=function(){return e},e}var an=ft()(tn(),f.f,f.i),nn=ft()(en()),rn=(Object(pt.a)(an),function(e){var t=e.stockId,a=e.children,n=tt();return r.a.createElement(et,{isCreate:null===t,onCreate:function(e){return n.stock.createItem(e)},onUpdate:function(e){return n.stock.updateItem(e)},getDefaultValues:on,loadDefaults:Object(y.a)(E.a.mark(function e(){var t,a;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.client.query({query:nn,variables:{branchId:n.stock.branchId},fetchPolicy:"no-cache"});case 2:return t=e.sent,a=t.data,e.abrupt("return",{allowNegativeDefault:cn(a.companyBranch.allowNegative)});case 5:case"end":return e.stop()}},e,this)})),loadValues:Object(y.a)(E.a.mark(function e(){var a,r;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.client.query({query:an,variables:{stockId:t},fetchPolicy:"no-cache"});case 2:return a=e.sent,r=a.data,e.abrupt("return",{id:(i=r.stockItem).id,internalNote:"TBD",nameLabel:i.nameLabel,code:i.code,note:i.note,plu:i.plu||"",wareUnit:i.wareUnit.enum,allergens:i.allergens.map(We.a.prop("enum")),allowNegative:i.allowNegative,allowNegativeDefault:cn(i.companyBranch.allowNegative)});case 5:case"end":return e.stop()}var i},e,this)}))},a)});function on(){return{id:"NEW",internalNote:"",nameLabel:"",code:"",plu:"",note:"",wareUnit:null,allergens:[],allowNegative:f.p.Default,allowNegativeDefault:f.p.Default}}function cn(e){return e?f.p.Default:f.p.Disabled}var ln=function(e){var t=e.field,a=void 0===t?"allergens":t,n=e.icon,i=void 0===n?"error_outline":n;return r.a.createElement(he.Field,{field:a},function(e){return r.a.createElement(He.a,{icon:i,labelWidth:7},r.a.createElement(Ea,{selected:e.value,onToggle:function(t){var a=e.value;a.includes(t)?e.setValue(We.a.without([t],a)):e.setValue(Object($.a)(a).concat([t]))}}))})};var un=[{type:f.p.Enabled,label:Object(ye.i18nMark)("Permit")},{type:f.p.Disabled,label:Object(ye.i18nMark)("Forbid")}],dn=function(e){!function(e){if(null==e)throw new TypeError("Cannot destructure undefined")}(e);var t=Object(n.useMemo)(function(){return" (".concat(p.b._("Is default setting").toLocaleLowerCase(),")")},[]);return r.a.createElement(he.FormApi,null,function(e){var a=e.values.allowNegativeDefault;return r.a.createElement(He.a,{label:p.b._("Negative stock"),labelWidth:7},r.a.createElement(dt.a,{field:"allowNegative",items:un,formatItem:function(e){return e.type===a?r.a.createElement("span",null,p.b._(e.label),r.a.createElement("i",null,t)):p.b._(e.label)},getItemId:function(e){return e.type}}))})},sn=function(e){var t=e.field,a=void 0===t?"plu":t,n=e.icon,i=void 0===n?"fingerprint":n,o=Object(_.a)(e,["field","icon"]);return r.a.createElement(He.a,{icon:i,labelWidth:7},r.a.createElement(Le.a,{width:9},r.a.createElement(Ke.a,Object.assign({field:a,inputFullWidth:!0},o))))},mn=a(7950);function fn(){var e=Object(st.a)(["\n  query GWareUnits {\n    wareUnits {\n      id\n      code\n      enum\n    }\n  }\n"]);return fn=function(){return e},e}var pn=ft()(fn()),bn=Object(pt.a)(pn),hn=function(e){var t=e.field,a=void 0===t?"wareUnit":t,n=e.icon,i=void 0===n?"select_all":n,o=Object(_.a)(e,["field","icon"]);return r.a.createElement(bn,{renderLoading:!1,render:function(e,t){var n=e.wareUnits,c=t.loading;return r.a.createElement(He.a,{icon:i,labelWidth:7},r.a.createElement(mn.a,Object.assign({field:a,options:n||[],isLoading:c,isRequired:!0,validatioName:p.b._("Ware unit"),getOptionLabel:We.a.prop("code"),getOptionValue:We.a.prop("enum"),width:12},o)))}})},gn=function(e){return r.a.createElement(Te,null,r.a.createElement(Re,null,r.a.createElement(ze,{placeholder:p.b._("Card name")}),r.a.createElement(fa,{placeholder:p.b._("Card code")}),r.a.createElement(hn,{placeholder:p.b._("Choose unit")}),r.a.createElement(sn,{placeholder:p.b._("PLU")}),r.a.createElement(Ue,{placeholder:p.b._("Card note"),field:"note",label:p.b._("Card note")}),r.a.createElement(ln,null),r.a.createElement(dn,null)),r.a.createElement(xe.a,{position:"BottomRight"},r.a.createElement(B.a,{mutationName:"destroyStockItem"},r.a.createElement(Ne.a,{render:function(e){var t=e.menu;return r.a.createElement(qe,{confirmText:p.b._("Remove this card?"),onDelete:function(e){return t.stock.deleteItem(e)}})}}))))},vn=function(e){var t=e.stockId,a=Object(f.sb)({stockId:t}),n=a.data;if(a.loading)return r.a.createElement(M.a,null);var i=n.stockItem.ingredients;return 0===i.length?r.a.createElement(k.a,null,r.a.createElement(se.Trans,{id:"No recipes are using stock card"})):r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,null,r.a.createElement(se.Trans,{id:"Recipes using this card"})),r.a.createElement(V,{items:Object($.a)(i),disableHeader:!0,fullHeight:!0},r.a.createElement(x.d,{dataKey:"",cellDataGetter:function(e){var t=e.rowData;return{pathname:"/settings/menu/recipe/".concat(t.recipe.id),state:{recipeType:t.recipe.recipeType.enum}}},cellRenderer:K,width:100}),r.a.createElement(x.d,{dataKey:"recipe",width:300,label:p.b._("Name"),cellRenderer:function(e){var t=e.rowData;return r.a.createElement(r.a.Fragment,null,t.recipe.nameLabel,r.a.createElement(W,null,t.recipe.descriptionLabel))}})))},En=function(e){var t=e.stockId;return r.a.createElement(b.a,{width:16,pageTitle:p.b._("Stock card"),hideLogoutWidget:!0,useBackButton:!0},r.a.createElement(rn,{stockId:t},r.a.createElement(r.a.Fragment,null,r.a.createElement(ge,null,r.a.createElement(B.a,{mutationName:null===t?"createStockItem":"updateStockItem"},r.a.createElement(_e,{isCreate:null===t}))),r.a.createElement(u.a,null,r.a.createElement(gn,null),t&&r.a.createElement(P.a,{queryName:"recipes"},r.a.createElement(vn,{stockId:t}))))))};a.d(t,"MenuRoutes",function(){return yn});var yn=function(e){var t=e.match;return r.a.createElement(i.Switch,null,r.a.createElement(c.a,{exact:!0,path:t.path,render:function(){return r.a.createElement(i.Redirect,{to:"".concat(t.path,"/category")})}}),r.a.createElement(c.a,{exact:!0,path:"".concat(t.path,"/category"),component:be}),r.a.createElement(c.a,{path:"".concat(t.path,"/category/:categoryId"),render:function(e){var t=e.match.params,a=e.location.state;return r.a.createElement(Jt,{categoryId:"create"===t.categoryId?null:t.categoryId,categoryType:a.categoryType})}}),r.a.createElement(c.a,{exact:!0,path:"".concat(t.path,"/recipe"),component:da}),r.a.createElement(c.a,{path:"".concat(t.path,"/recipe/:recipeId"),render:function(e){var t=e.match.params,a=e.location.state;return r.a.createElement(Na,{recipeId:"create"===t.recipeId?null:t.recipeId,recipeType:a.recipeType})}}),r.a.createElement(c.a,{exact:!0,path:"".concat(t.path,"/stock"),component:Za}),r.a.createElement(c.a,{path:"".concat(t.path,"/stock/deposit"),component:Ga}),r.a.createElement(c.a,{path:"".concat(t.path,"/stock/:stockId"),render:function(e){var t=e.match.params;return r.a.createElement(En,{stockId:"create"===t.stockId?null:t.stockId})}}),r.a.createElement(i.Route,{component:o.a}))};t.default=yn}}]);
//# sourceMappingURL=176.60741087.chunk.js.map