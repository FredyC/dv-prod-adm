(window.webpackJsonp=window.webpackJsonp||[]).push([[177],{7688:function(e,n,t){"use strict";t.d(n,"a",function(){return m});var r=t(4),a=t(0),o=t.n(a),i=t(22),c=t(7697),u=t(18);function l(){var e=Object(r.a)(["\n  height: 100%;\n"]);return l=function(){return e},e}function d(){var e=Object(r.a)(["\n  position: fixed;\n  bottom: 0.5rem;\n  width: ",";\n  left: ",";\n  top: ",";\n"]);return d=function(){return e},e}var s=i.b.div(d(),function(e){return void 0!==e.widthInColumns?"calc(("+e.widthInColumns+" * 6.22vw) - "+u.d.LayoutGridCellMargin+")":"calc(100vh - (2 * "+u.d.LayoutGridCellMargin+"))"},function(e){return void 0!==e.column?"calc(("+e.column+" * 6.22vw) + "+u.d.LayoutGridCellMargin+")":u.d.LayoutGridCellMargin},function(e){return void 0!==e.row?"calc(("+e.row+" * 3.9375rem) + "+u.d.LayoutGridCellMargin+")":"calc(3.9375rem + "+u.d.LayoutGridCellMargin+")"}),f=i.b.div(l()),m=function(e){var n=e.children,t=e.row,r=void 0===t?1:t,a=e.column,i=void 0===a?0:a,u=e.widthInColumns,l=void 0===u?16:u,d=e.withScrollArea,m=void 0!==d&&d,b=e.scrollAreaId;return o.a.createElement(s,{column:i,row:r,widthInColumns:l,withScrollArea:m},m?o.a.createElement(c.a,{id:b},n):o.a.createElement(f,null,n))}},7689:function(e,n,t){"use strict";t.d(n,"a",function(){return o});var r=t(4);function a(){var e=Object(r.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: ",";\n"]);return a=function(){return e},e}var o=t(22).b.div(a(),function(e){var n=e.justify;return void 0===n?"space-between":n})},7692:function(e,n,t){"use strict";t.d(n,"a",function(){return o});var r=t(4);function a(){var e=Object(r.a)(["\n  height: ",";\n"]);return a=function(){return e},e}var o=t(22).b.div(a(),function(e){var n=e.size,t=void 0===n?1:n,r=e.sizeUnit,a=void 0===r?"rem":r;return"".concat(t).concat(a)});o.displayName="VerticalGap"},7697:function(e,n,t){"use strict";t.d(n,"a",function(){return o});var r=t(4);function a(){var e=Object(r.a)(["\n  overflow-y: auto;\n  -webkit-overflow-scrolling: touch;\n  height: 100%;\n"]);return a=function(){return e},e}var o=t(22).b.div(a())},7751:function(e,n,t){"use strict";t.d(n,"a",function(){return C}),t.d(n,"b",function(){return z});var r=t(166),a=t(120),o=t(121),i=t(123),c=t(122),u=t(124),l=t(4),d=t(323),s=t(10),f=t(0),m=t.n(f),b=t(7716),v=t(7674),h=t(22),p=t(18);function E(){var e=Object(l.a)(["\n  border-radius: ",";\n  overflow: hidden;\n  height: 100%;\n"]);return E=function(){return e},e}var g=h.b.div(E(),p.c.Card),O=Object(b.withGoogleMap)(function(e){var n=e.children;return m.a.createElement(m.a.Fragment,null,n)}),j=m.a.createContext(null),y=m.a.createContext(null),w=function(e){function n(e,t){var r;return Object(a.a)(this,n),(r=Object(i.a)(this,Object(c.a)(n).call(this,e))).map=void 0,r.map=t[v.MAP],r}return Object(u.a)(n,e),Object(o.a)(n,[{key:"render",value:function(){return m.a.createElement(y.Provider,{value:this.map},this.props.children)}}]),n}(m.a.PureComponent);w.contextTypes=Object(r.a)({},v.MAP,s.object);var C=function(e){var n=e.model,t=e.children,r={streetViewControl:!1,mapTypeControl:!1,fullscreenControl:!1};return m.a.createElement(j.Provider,{value:n},m.a.createElement(O,{containerElement:m.a.createElement(g,null),mapElement:m.a.createElement("div",{style:{height:"100%"}})},m.a.createElement(w,null,m.a.createElement(d.a,null,function(){return m.a.createElement(b.GoogleMap,{ref:n.setMapRef,zoom:n.zoom,center:n.center,onCenterChanged:n.updatePosition,onZoomChanged:n.updateZoom,options:r},t)}))))};function z(){var e=Object(f.useContext)(y);if(!e)throw new Error("Trying to useGoogleMap, but BaseMap is missing in the tree");return e}},7798:function(e,n,t){"use strict";t.d(n,"a",function(){return c});var r=t(4),a=t(22),o=t(18);function i(){var e=Object(r.a)(["\n  color: ",";\n  font-weight: lighter;\n  font-size: 1.2rem;\n  margin: 0.8rem 0 0.8rem 0.3rem;\n"]);return i=function(){return e},e}var c=a.b.h2(i(),o.a.greyLight)},7801:function(e,n,t){"use strict";t.d(n,"a",function(){return s});var r=t(4),a=t(0),o=t.n(a),i=t(7744),c=t(22),u=t(103);function l(){var e=Object(r.a)(["\n  padding: 1rem 0.4rem;\n  cursor: grab;\n"]);return l=function(){return e},e}var d=c.b.div(l()),s=Object(i.SortableHandle)(function(){return o.a.createElement(d,null,o.a.createElement(u.a,{iconName:"reorder"}))})},7808:function(e,n,t){"use strict";t.d(n,"a",function(){return a});var r=t(0),a=function(e){return Object(r.useEffect)(function(){e.isShow&&(window.confirm(e.confirmText)?e.onConfirm():e.onCancel())},[e.isShow]),null}},7962:function(e,n,t){"use strict";t.d(n,"a",function(){return h});var r=t(34),a=t(38),o=t(120),i=t(121),c=t(123),u=t(122),l=t(124),d=t(0),s=t.n(d),f=t(7673),m=t(25),b=t(33),v=t(7680),h=function(e){function n(){var e,t;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(t=Object(c.a)(this,(e=Object(u.a)(n)).call.apply(e,[this].concat(a)))).validate=function(e){return t.props.isRequired&&!e?b.b._("{0} must be selected",{0:t.props.validatioName}):null},t}return Object(l.a)(n,e),Object(i.a)(n,[{key:"getControlProps",value:function(e){var n=this.props,t=n.isMulti,r=n.options,a=n.getOptionValue,o=n.defaultValue,i=e.value||o;if(t){var c=Array.isArray(i)?function(e){return i.includes(a(e))}:m.a.F;return{value:Array.isArray(r)?r.filter(c):[],onChange:function(n){e.setValue(n.map(a))}}}return{value:i&&r.find(function(e){return a(e)===i}),onChange:function(n){e.setValue(a(n))}}}},{key:"render",value:function(){var e=this,n=this.props,t=n.field,o=n.fieldIsPure,i=void 0!==o&&o,c=(n.isRequired,n.defaultValue,Object(a.a)(n,["field","fieldIsPure","isRequired","defaultValue"]));return s.a.createElement(f.Field,{field:t,validate:this.validate,pure:i},function(n){return s.a.createElement(v.a,Object.assign({},e.getControlProps(n),{onFocus:function(){return n.setTouched(!0)},styles:{control:function(e){return Boolean(n.error)?Object(r.a)({},e,{borderColor:"red"}):e}}},c))})}}]),n}(s.a.Component);h.defaultProps={validatioName:"Value",getItemId:m.a.prop("id")}},8157:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),o=t(57),i=t(169),c=t(33),u=t(306),l=t(7688),d=t(17),s=t.n(d),f=t(24),m=t(77),b=t(4),v=t(14),h=t(63),p=t(7673),E=t(329),g=t(22),O=t(7677),j=t(164),y=t(7808),w=t(309),C=t(62),z=t(29),x=t(31),k=t(25),P=t(170),F=t(7737),B=t(18),S=t(71);function I(){return Object(S.useRouterContext)().match.params.zoneId}function Z(){var e=Object(C.c)(),n=e.user,t=e.zone,r=Object(S.useRouterContext)().history,a=function(e){return"".concat("/settings/zones","/").concat(e)};return{getRouteToZone:a,routeToZoneEdit:function(e){t.map.panToZone(e),n.canQuery("zone")&&r.push(a(e))},routeToZoneList:function(){r.push("/settings/zones")}}}var M=t(76),_=t(7799),L=t(7681),R=t(7683),A=t(7675),T=t(7720);function D(){var e=Object(b.a)(["\n  border-left: 3px solid #707070;\n  width: 3px;\n  position: relative;\n  left: -2rem;\n  height: 4rem;\n  float: left;\n  margin: -0.5rem 0 0 0;\n"]);return D=function(){return e},e}function V(){var e=Object(b.a)(["\n  position: relative;\n  left: 4rem;\n  top: -0.3rem;\n  width: 3rem;\n"]);return V=function(){return e},e}function N(){var e=Object(b.a)(["\n  position: relative;\n  left: 8rem;\n  top: 0rem;\n"]);return N=function(){return e},e}function G(){var e=Object(b.a)(["\n  color: ",";\n"]);return G=function(){return e},e}function q(){var e=Object(b.a)(["\n  width: 3rem;\n  position: relative;\n  z-index: 4;\n"]);return q=function(){return e},e}function H(){var e=Object(b.a)(["\n  min-width: 2rem;\n  display: inline-block;\n"]);return H=function(){return e},e}var W=g.b.div(H()),U=Object(g.b)(L.a)(q()),J=Object(g.b)(U)(G(),B.a.blue),$=g.b.div(N()),K=g.b.div(V()),Q=g.b.div(D()),Y=function(e){if("number"===typeof e)return null;var n=e.trim();return n.length&&Number.isNaN(Number.parseFloat(n))?c.b._("Must be number"):null},X=a.a.forwardRef(function(e,n){var t=e.field,r=e.label,o=e.isDeliveryPrice,i=e.autoFocus,c=void 0!==i&&i;return o?a.a.createElement($,null,a.a.createElement(Q,null),a.a.createElement(W,null,r),a.a.createElement(J,{field:t,validate:Y,ref:n})):a.a.createElement(K,null,a.a.createElement(U,{field:t,validate:Y,autoFocus:c}))}),ee=t(305),ne=t(34),te=t(7962),re=t(167),ae=t(465);function oe(){var e=Object(b.a)(["\n  background-color: ",";\n  color: ",";\n  width: 6rem;\n  padding: 0.4rem 1rem;\n  margin: 0;\n  height: 100%;\n"]);return oe=function(){return e},e}var ie=g.b.div(oe(),function(e){return e.color},B.a.white),ce=Object(re.a)(ae.a),ue=function(e){var n=e.field,t=void 0===n?"zoneColor.id":n;return a.a.createElement(ce,{render:function(e){var n=e.zoneColors;return a.a.createElement(te.a,{field:t,fieldIsPure:!0,options:Object(ee.a)(n),width:8,styles:{option:function(e){return Object(ne.a)({},e,{padding:0,margin:0})},menu:function(e){return Object(ne.a)({},e,{width:"8rem",maxWidth:"8rem"})}},defaultValue:k.a.head(n),getOptionValue:k.a.prop("id"),formatOptionLabel:function(e){return a.a.createElement(ie,{color:e.color},e.code)}})}})},le=t(118),de=t(7682);function se(){var e=Object(b.a)(["\n  margin: 0 0 0 1rem;\n"]);return se=function(){return e},e}function fe(){var e=Object(b.a)(["\n  width: 3rem;\n  position: relative;\n  z-index: 4;\n"]);return fe=function(){return e},e}function me(){var e=Object(b.a)(["\n  width: 3rem;\n  display: inline-block;\n"]);return me=function(){return e},e}var be=g.b.div(me()),ve=Object(g.b)(de.a)(fe()),he=g.b.div(se()),pe=function(e){var n=e.label,t=e.display;return a.a.createElement(he,null,a.a.createElement(be,null,n),a.a.createElement(ve,{disabled:!0,placeholder:t}))};function Ee(){var e=Object(b.a)(["\n  position: relative;\n  top: -7rem;\n  left: 16rem;\n  height: 0;\n"]);return Ee=function(){return e},e}function ge(){var e=Object(b.a)(["\n  position: relative;\n  top: -6rem;\n"]);return ge=function(){return e},e}var Oe=g.b.div(ge()),je=g.b.div(Ee()),ye=function(e){var n=e.fieldApi;return a.a.createElement(a.a.Fragment,null,n.values.map(function(e,t,o){return a.a.createElement(r.Fragment,{key:t},a.a.createElement(X,{label:"za",isDeliveryPrice:!0,field:[t,"price","value"]}),t===o.length-1?a.a.createElement(pe,{display:"\u221e",label:"do"}):a.a.createElement(X,{field:[t,"toPrice","value"],autoFocus:!0}),o.length>1&&a.a.createElement(je,null,a.a.createElement(F.a,{onDelete:function(){return n.removeValue("",t)}})))}),a.a.createElement(p.FormApi,{render:function(e){return a.a.createElement(Oe,null,a.a.createElement(le.a,{disabled:e.submitting,width:B.d.ButtonHeight+B.d.DefaultSizeUnit,iconName:"add_circle",onClick:function(){return n.addValue("",{price:{value:0},toPrice:{value:0}})}}))}}))};function we(){var e=Object(b.a)(["\n  color: ",";\n  padding-bottom: 0.2rem;\n"]);return we=function(){return e},e}function Ce(){var e=Object(b.a)(["\n  margin: ",";\n  color: ",";\n"]);return Ce=function(){return e},e}var ze=g.b.div(Ce(),B.d.Middle,B.a.black),xe=g.b.div(we(),B.a.greyDark),ke=function(e){return a.a.createElement(ze,null,a.a.createElement(A.a,{icon:"label"},a.a.createElement(L.a,{field:"name",validate:Object(T.b)(c.b._("Zone name"))})),a.a.createElement(A.a,{icon:"color_lens"},a.a.createElement(ue,null)),a.a.createElement(_.a,{field:"enabled",name:"enabled",label:c.b._("Is active").toLocaleLowerCase()}),a.a.createElement(M.Trans,{id:"<0>Delivery cost</0><1>according order total cost</1>",components:[a.a.createElement(R.a,{margin:"0.5rem 0 0 0"}),a.a.createElement(xe,null)]}),a.a.createElement(X,{field:"minimalOrderPrice.value"}),a.a.createElement(p.NestedField,{field:"priceRangeRules",component:ye}))},Pe=t(7695),Fe=t(7689),Be=function(e){var n=e.isSubmitting,t=e.isModified,r=e.onGoBack,o=e.onSave;return a.a.createElement(Fe.a,null,a.a.createElement(Pe.a,{widthGrowIndex:.4,padding:"0"},a.a.createElement(le.a,{color:B.a.greyMiddle,onClick:r,text:c.b._("Back"),disabled:n})),a.a.createElement(Pe.a,{widthGrowIndex:.4,padding:"0"},a.a.createElement(O.a,{mutationName:"updateZone"},a.a.createElement(le.a,{color:B.a.green,text:c.b._("Save zone"),onClick:o,disabled:n||!t}))))},Se=t(5);function Ie(){var e=Object(b.a)(["\n  query GZones($branchesId: [ID!]!) {\n    zones(companyBranches: $branchesId) {\n      ...FZone\n    }\n  }\n  ","\n"]);return Ie=function(){return e},e}var Ze=t.n(Se)()(Ie(),z.o),Me=Object(re.a)(Ze),_e=a.a.createContext(null),Le=Object(h.observer)(function(e){var n=e.children,t=Object(C.c)().zone,r=t.branches.filter(t.branchFilterPredicate);return 0===r.length?a.a.createElement(_e.Provider,{value:[]},n):a.a.createElement(Me,{fetchPolicy:"cache-and-network",variables:{branchesId:r.map(k.a.prop("id"))},renderLoading:!1,render:function(e,t){var r=e.zones,o=t.loading;return a.a.createElement(_e.Provider,{value:o?null:r},n)}})}),Re=function(){return Object(r.useContext)(_e)};function Ae(){var e=Object(b.a)(["\n  width: ",";\n  margin-top: ",";\n"]);return Ae=function(){return e},e}var Te=g.b.div(Ae(),B.d.ButtonHeight+B.d.DefaultSizeUnit,B.d.Middle),De=function(){var e=I(),n=Re(),t=Object(C.c)().zone,o=Z().routeToZoneList,i=Object(r.useState)(!1),u=Object(m.a)(i,2),l=u[0],d=u[1],b=Object(r.useRef)(null),g=Object(P.a)(),B=g.enqueueError,S=g.enqueueSuccess,M=Object(z.W)(),_=Object(m.a)(M,1)[0],L=Object(r.useCallback)(function(){var n=Object(f.a)(s.a.mark(function n(r){return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=5;break}return n.next=3,_(t.getZoneVariables(e,r));case 3:n.sent&&(d(!1),o(),S(c.b._("Zone has been updated")));case 5:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}(),[e]),R=Object(r.useCallback)(Object(f.a)(s.a.mark(function n(){return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=3;break}return n.next=3,t.destroyZone(e);case 3:o();case 4:case"end":return n.stop()}},n,this)})),[e]);Object(h.useDisposable)(function(){return Object(v.reaction)(function(){return null!==t.map.currentZonePoints},d)}),a.a.useEffect(function(){n&&0===n.length&&(B(c.b._("Requested zone wasn't found")),o())},[n]);var A=e&&n&&n.find(k.a.propEq("id",e))||null;return a.a.useEffect(function(){t.map.clearZonePoints()},[A]),A?a.a.createElement(p.Form,{defaultValues:A,onChange:function(e){Object(x.b)("zone form change",e.values),d(!0)},onSubmit:L,render:function(e){return b.current=e,a.a.createElement(j.a,{padding:0},a.a.createElement(Be,{isSubmitting:e.submitting,isModified:l,onSave:e.submitForm,onGoBack:o}),a.a.createElement(ke,null),a.a.createElement(O.a,{mutationName:"destroyZone"},a.a.createElement(Te,null,a.a.createElement(F.a,{disabled:e.submitting,confirmText:c.b._("Remove zone {0}?",{0:A.name}),onDelete:R}))),a.a.createElement(E.b,{when:l},function(e){var n=e.isShow,t=e.handleOk,r=e.handleCancel;return a.a.createElement(y.a,{isShow:n,confirmText:c.b._("Do you want to cancel changes for the zone?"),onConfirm:t,onCancel:r})}))}}):a.a.createElement(w.a,{text:c.b._("Loading form...")})},Ve=t(7751),Ne=t(7716),Ge=t(73);function qe(){var e=Object(b.a)(["\n    background-color: ",";\n    color: ",";\n  "]);return qe=function(){return e},e}function He(){var e=Object(b.a)(["\n  "," font-size: 1.3rem;\n  white-space: nowrap;\n  padding: 0.2rem 0.5rem;\n"]);return He=function(){return e},e}var We=g.b.div(He(),function(e){var n=e.isActive;return Object(g.a)(qe(),n?B.a.green:B.a.greyLight,n?B.a.white:B.a.greyDark)}),Ue=function(e){var n=e.branch,t=e.isActive,r=void 0===t||t;return a.a.createElement(Ne.OverlayView,{getPixelPositionOffset:function(e,n){return{x:-e/2,y:-n/2}},mapPaneName:Ne.OverlayView.MARKER_LAYER,position:Object(Ge.b)(n.gps)},a.a.createElement(We,{isActive:r},n.name))};var Je=function(e){var n=Object(r.useCallback)(function(n){e.onFocus&&(n.stop(),e.onFocus())},[e.onFocus]),t=e.points,o=e.color,i=e.priority;return a.a.createElement(Ne.Polygon,{defaultPath:t.map(Ge.b),options:{fillColor:o,fillOpacity:.3,strokeWeight:0,zIndex:5e3-i},editable:!1,draggable:!1,onDblClick:n})},$e=function(e){var n=Object(r.useRef)(null),t=Object(r.useCallback)(function(){if(n.current){var t=n.current.getPath();e.onChange(t.getArray().map(Ge.c))}},[e.onChange]);Object(r.useEffect)(function(){var r;if(n.current&&e.onChange){var a=n.current.getPath();r=[a.addListener("set_at",t),a.addListener("insert_at",t),a.addListener("remove_at",t)]}return function(){e.onClear(),r&&r.forEach(function(e){return e.remove()})}},[]);var o=e.points,i=e.color;return a.a.createElement(Ne.Polygon,{defaultPath:o.map(Ge.b),options:{fillColor:i,fillOpacity:.6,strokeWeight:2,zIndex:1e4},editable:!0,draggable:!0,ref:n,onDragEnd:t})};function Ke(){return Object(C.c)().zone}var Qe=function(){var e=Ke(),n=I(),t=Re(),o=Z().routeToZoneEdit,i=e.branches.filter(e.branchFilterPredicate),c=function(n){return!e.hasBranchFilter||n===e.branchFilterId},u=Object(r.useCallback)(function(e){return a.a.createElement(Ue,{key:"branch".concat(e.id),branch:e,isActive:c(e.id)})},[]);return a.a.createElement(Ve.a,{model:e.map},t&&t.map(function(t){var r={key:"zone".concat(t.id),points:t.geoPolygon,priority:t.priority,color:c(t.companyBranch.id)&&t.enabled?t.zoneColor.color:B.a.greyMiddle};return t.id===n?a.a.createElement($e,Object.assign({},r,{onChange:e.map.updateZonePoints,onClear:e.map.clearZonePoints})):a.a.createElement(Je,Object.assign({},r,{onFocus:function(){c(t.companyBranch.id)&&o(t.id)}}))}),i&&i.map(u))},Ye=t(7697),Xe=Object(h.observer)(function(){var e=Ke(),n=Z().routeToZoneEdit;return a.a.createElement(le.a,{text:e.hasBranchFilter?c.b._("Create zone for branch"):c.b._("Select branch to create zone"),onClick:function(){return e.createZone(n)},disabled:!e.hasBranchFilter,color:B.a.turquoise,textNextToIcon:!0,height:B.d.ButtonHeight+B.d.DefaultSizeUnit,iconName:"add_circle"})}),en=t(7997),nn=t(7798),tn=t(58),rn=t(7744),an=t(7801),on=t(303);function cn(){var e=Object(b.a)(["\n  height: ",";\n"]);return cn=function(){return e},e}function un(){var e=Object(b.a)(["\n  font-size: 0.875rem;\n"]);return un=function(){return e},e}function ln(){var e=Object(b.a)(["\n  font-size: 1.125rem;\n  margin-top: 0.2rem;\n"]);return ln=function(){return e},e}var dn=g.b.div(ln()),sn=g.b.div(un()),fn=Object(g.b)(Fe.a)(cn(),B.d.ButtonHeight+B.d.DefaultSizeUnit),mn=Object(rn.SortableElement)(function(e){var n=e.zone,t=e.branch,r=e.onEdit;return a.a.createElement(j.a,{key:n.id,padding:0,color:n.enabled?n.zoneColor.color:B.a.greyMiddle,onClick:r},a.a.createElement(fn,null,a.a.createElement(Pe.a,{fixedWidth:!0,padding:"0 0.5rem 0 0"},a.a.createElement(on.a,null,a.a.createElement(le.a,{iconName:"mode_edit"}))),a.a.createElement(Pe.a,{widthGrowIndex:1},a.a.createElement(dn,null,n.name," [P".concat(n.priority,"]")),a.a.createElement(sn,null,t.name)),a.a.createElement(Pe.a,{padding:"0"},a.a.createElement(an.a,null))))});function bn(){var e=Object(b.a)(["\n  margin-top: 0.5rem;\n  cursor: arrow;\n"]);return bn=function(){return e},e}var vn=Object(rn.SortableContainer)(g.b.div(bn())),hn=tn.sortWith([tn.ascend(tn.path(["companyBranch","name"])),tn.descend(tn.prop("priority"))]),pn=tn.groupBy(function(e){return e.companyBranch.id}),En=function(e){var n,t,o=e.branches,i=e.zones,c=e.zoneModel,u=e.onZoneEdit,l=function(e,n){return a.a.createElement(mn,{key:e.id,zone:e,branch:o.find(tn.propEq("id",e.companyBranch.id)),index:n,collection:e.companyBranch.id,onEdit:function(){return u(e.id)}})};if(1===o.length){var d=hn(i);n=d.map(l),t=function(e){var n=e.oldIndex,t=e.newIndex,r=d[n];c.changeZonePriority(r,n,t)}}else{var s=tn.mapObjIndexed(hn,pn(i));n=o.map(function(e){var n=s[e.id];return n?function(e,n){return a.a.createElement(r.Fragment,{key:e.id},a.a.createElement(nn.a,null,e.name),n.map(l))}(e,n):null}),t=function(e){var n=e.oldIndex,t=e.newIndex,r=e.collection,a=s[r][n];c.changeZonePriority(a,n,t)}}return a.a.createElement(vn,{useDragHandle:!0,lockAxis:"y",onSortEnd:t},n)},gn=function(){var e=Re(),n=Ke(),t=Z().routeToZoneEdit;return null===e?a.a.createElement(en.a,{primaryOpacity:.2,secondaryOpacity:.2}):null===n.brand?a.a.createElement(nn.a,null,a.a.createElement(M.Trans,{id:"Select brand to see its zones"})):a.a.createElement(En,{zoneModel:n,zones:e.filter(n.zoneFilterPredicate),branches:n.root.user.filterBranches(n.branchFilterPredicate),onZoneEdit:t})},On=t(7692),jn=t(7717),yn=function(e){var n=e.branches,t=e.selectedBranch,r=e.onSelection,o=e.autoFocus;return a.a.createElement(jn.a,{placeholder:c.b._("Select branch"),branches:n,selectedBranch:t,onSingleSelection:r,formatOptionLabel:k.a.prop("name"),isClearable:!0,autoFocus:o})},wn=t(7680),Cn=function(e){var n=e.brands,t=e.selectedBrand,r=e.onSelection;return a.a.createElement(wn.a,{placeholder:c.b._("Select brand"),options:n,value:t,formatOptionLabel:k.a.prop("name"),getOptionValue:k.a.prop("id"),getOptionLabel:k.a.prop("name"),isClearable:!0,isSearchable:!0,onChange:function(e){return r(e)},autoFocus:!0})},zn=Object(h.observer)(function(){var e=Object(C.c)(),n=e.user,t=e.zone,o=n.branches,i=Object(r.useCallback)(function(e){return null===e?[]:n.branches.filter(k.a.pathEq(["brand","id"],e.id))},[]);if(Object(h.useDisposable)(function(){return Object(v.autorun)(function(){1===o.length&&t.setBranchFilter(k.a.head(o))})}),o.length<=1)return null;var c=1===n.brands.length?k.a.head(n.brands):null;return c&&t.setBrandFilter(c,i(t.brand)),a.a.createElement(a.a.Fragment,null,!c&&a.a.createElement(Cn,{brands:n.brands,selectedBrand:t.brand,onSelection:function(e){null===e?t.clearBrandFilter():t.setBrandFilter(e,i(e))}}),!c&&a.a.createElement(On.a,null),a.a.createElement(yn,{branches:i(t.brand),selectedBranch:t.branch,autoFocus:Boolean(c),onSelection:function(e){e?t.setBranchFilter(e):t.clearBranchFilter()}}))});function xn(){var e=Object(b.a)(["\n  flex: 1 1 0;\n  min-height: 0;\n"]);return xn=function(){return e},e}function kn(){var e=Object(b.a)(["\n  flex: 0 0 auto;\n"]);return kn=function(){return e},e}function Pn(){var e=Object(b.a)(["\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n"]);return Pn=function(){return e},e}var Fn=g.b.div(Pn()),Bn=g.b.div(kn()),Sn=g.b.div(xn()),In=function(){return a.a.createElement(Fn,null,a.a.createElement(Bn,null,a.a.createElement(j.a,null,a.a.createElement(zn,null)),a.a.createElement(O.a,{mutationName:"createZone"},a.a.createElement(Xe,null))),a.a.createElement(Sn,null,a.a.createElement(Ye.a,null,a.a.createElement(gn,null))))},Zn=function(e){var n=e.match,t=Boolean(n.params.zoneId);return a.a.createElement(Le,null,a.a.createElement(u.a,{pageTitle:c.b._("Delivery zones"),useBackButton:!0,backRoute:"/settings"}),a.a.createElement(l.a,{widthInColumns:6,column:10,withScrollArea:t},t?a.a.createElement(De,null):a.a.createElement(In,null)),a.a.createElement(l.a,{widthInColumns:10},a.a.createElement(Qe,null)))};t.d(n,"ZoneMenuRoutes",function(){return Mn});var Mn=function(){var e=Z().getRouteToZone;return a.a.createElement(o.Switch,null,a.a.createElement(o.Route,{path:e(":zoneId?"),component:Zn}),a.a.createElement(o.Route,{component:i.a}))};n.default=Mn}}]);
//# sourceMappingURL=177.002a78a0.chunk.js.map