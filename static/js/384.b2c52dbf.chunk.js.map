{"version":3,"sources":["atoms/CanMutate.tsx","atoms/FlexColumn.tsx","components/forms/FormInput.tsx","atoms/Loading.tsx","components/forms/FormSubmitButton.tsx","molecules/TouchButtonDelete.tsx","atoms/CanQuery.tsx","atoms/DateTimeFormatProvider.tsx","atoms/FlexDiv.tsx","atoms/FlexRow.tsx","hooks/useSettings.ts","atoms/InputDate.tsx","components/forms/FormInputDate.tsx","atoms/InputTime.tsx","segments/businesshours/atoms/BusinessHoursTimeRange.tsx","segments/businesshours/molecules/BusinessHoursWeekday.tsx","segments/businesshours/organisms/BusinessHoursForm.tsx","components/forms/FormInputTime.tsx","components/forms/FormInputTimeSpan.tsx","segments/businesshours/molecules/SpecificModeSelector.tsx","segments/businesshours/organisms/SpecificBusinessHourForm.tsx","segments/businesshours/molecules/SpecificBusinessHourLine.tsx","segments/businesshours/organisms/SpecificBusinessHours.tsx","segments/businesshours/pages/BusinessHoursPage.tsx","segments/businesshours/routes/BusinessHoursRouting.tsx"],"names":["CanMutate","observer","mutationName","children","useCanMutate","FlexColumn","styled","div","fixedWidth","width","widthGrowIndex","padding","margin","FormInput","React","forwardRef","inputRef","fieldName","fullWidth","validate","addHiddenLabelWithPlaceholderText","withLabel","props","getInputProps","useFormInputProps","useObserver","inputFullWidth","ref","placeholder","hidden","htmlFor","id","state","useXFormState","useXFieldForInput","field","disabled","isSubmitting","invalid","touched","Boolean","error","Loading","text","FormSubmitButton","type","color","Colors","green","icon","isValid","undefined","ErrorOutline","iconSize","iconColor","red","className","cn","heartBeat","TouchButtonDelete","onDelete","confirmText","Delete","greyMiddle","onClick","ev","preventDefault","window","confirm","CanQuery","queryName","useCanQuery","DateTimeFormatProvider","utils","DateFnsUtils","locale","DFLocale","FlexDiv","FlexRow","useSettings","useRoot","settings","InputDate","DatePicker","variant","format","maxDateMessage","minDateMessage","FormInputDate","memo","pickerProps","useXField","formState","value","onChange","setValue","onOpen","setTouched","InputTime","TimePicker","ampm","StyledBussinessHoursTimeRange","BusinessHoursTimeRange","hour","openAt","label","closeAt","StyledBusinessHoursWeekday","article","white","Radiuses","Button","BusinessHoursWeekday","weekday","hours","onAdd","onRemove","renderHour","key","data-testid","SizerButton","TouchButton","title","i18n","role","code","length","map","AddCircle","getTodayTime","DFP","parse","Date","BusinessHoursForm","useQRegularBusinessHours","branchId","data","loading","useState","observable","Map","businessHours","useMBusinessHoursSubmit","submitBusinessHours","useEffect","size","weekDays","forEach","set","enum","array","weekDay","get","push","weekDayHours","clear","hourIdCounter","useRef","hourId","idx","findIndex","RM","propEq","splice","enqueueSuccess","useSnackBar","onSubmit","useCallback","a","async","formatSystemTime","ARRAY_EMPTY","current","startOfDay","endOfDay","Sizer","MarginBox","FormInputTime","InlineWrap","FormInputTimeSpan","fieldFrom","fieldTo","labels","ESpecificHourMode","TIMESPAN","i18nMark","FULLDAY","SpecificModeSelector","SelectControlFlat","items","selectedItem","specificMode","formatItem","mode","_","onSingleSelection","changeSpecificMode","DateContainer","FormContainer","SpecificBusinessHourForm","now","getNow","useNow","useMSpecificBusinessHourCreate","createBsHour","values","isTimespanMode","date","input","companyBranch","specificDate","closed","closedNote","note","refetchQueries","query","QSpecificBusinessHoursDocument","variables","initialValues","setHours","setMinutes","fullDateFormat","minDate","SpecificBusinessHourLine","bsHour","canDelete","formatFullDate","sortByDate","sort","ascend","or","prop","not","rejectOld","isBefore","SpecificBusinessHours","useQSpecificBusinessHours","getStash","updateQuery","useMSpecificBusinessHourDelete","deleteBsHour","bsHours","reject","updateOnDelete","produce","draft","idPropEq","BusinessHoursPage","FullPageLayout","pageTitle","useBackButton","Card","SettingsCompanyBranchPicker","Headline","BusinessHoursRouting","SecureRoute","exact","path","ROUTE_SETTINGS_HOURS","component","NotFoundPage"],"mappings":"uGAAA,kFAUaA,EAAYC,aAAiB,YAAiC,IAA9BC,EAA6B,EAA7BA,aAAcC,EAAe,EAAfA,SAEzD,OADkBC,YAAaF,GAE7B,oCAAGC,GAEH,kBAAC,IAAD,qCAAoCD,Q,qMCLjC,IAAMG,E,MAAaC,EAAOC,IAAV,KAMvB,YAIsB,IAAD,IAHnBC,kBAGmB,SAFnBC,EAEmB,EAFnBA,MAEmB,IADnBC,sBACmB,MADF,EACE,EACnB,OAAOF,EAAcC,EAAK,cAAUA,GAAU,MAA7B,UAAyCC,EAAzC,SAGnB,YAAgE,IAAD,IAAzCC,QACpB,YAD6D,MAA/B,UAA+B,KAI/D,YAAuD,IAAD,IAAjCC,OACnB,YADoD,MAAxB,GAAwB,M,8KCPzCC,EAAYC,IAAMC,YAC7B,WAQEC,GACI,IAPFC,EAOC,EAPDA,UACAC,EAMC,EANDA,UACAC,EAKC,EALDA,SAKC,IAJDC,kCAAmCC,OAIlC,SAHEC,EAGF,wFACGC,EAAgBC,EAAkB,CAAEP,YAAWE,aACrD,OAAOM,aAAY,kBACjB,oCACE,kBAAC,IAAD,iBACMF,IADN,CAEEG,eAAgBR,EAChBS,IAAKX,GACDM,IAELD,GAAaC,EAAMM,aAClB,2BAAOC,QAAQ,EAAMC,QAASP,IAAgBQ,IAC3CT,EAAMM,oBAaZ,SAASJ,EAAT,GAAmE,IAAtCP,EAAqC,EAArCA,UAAWE,EAA0B,EAA1BA,SACvCa,EAAQC,cADyD,EAExCC,YAA0BjB,EAAW,CAClEE,aAHqE,mBAEhEgB,EAFgE,KAEzDZ,EAFyD,KAKvE,OAAO,iCACFA,IADE,CAELa,SAAUJ,EAAMK,aAChBC,QAASH,EAAMI,SAAWC,QAAQL,EAAMM,Y,kCChE5C,sDAMaC,EAAmC,SAAC,GAAD,QAAGC,YAAH,MAAU,MAAV,SAC9C,4BAAKA,K,uJCMMC,EAAqC,SAAC,GAI5C,IAHLzC,EAGI,EAHJA,SAGI,IAFJ4B,UAEI,MAFC,cAED,EADDT,EACC,iCACEU,EAAQC,cACd,OAAOR,aAAY,kBACjB,kBAAC,IAAD,eACEM,GAAIA,EACJc,KAAK,SACLC,MAAOC,IAAOC,MACdZ,SAAUJ,EAAMK,aAChBY,KAAOjB,EAAMkB,aAAyBC,EAAfC,IACvBC,SAAU,IACVC,UAAWP,IAAOQ,KACdjC,EARN,CASEkC,UAAWC,YAAGnC,EAAMkC,UAAW,WAAY,WAAY,CACrDE,UAAW1B,EAAMK,iBAGnB,oCAAGlC,S,oICrBIwD,EAAuD,SAAC,GAI9D,IAHLC,EAGI,EAHJA,SACAC,EAEI,EAFJA,YACGvC,EACC,0CACJ,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,eACEkC,UAAU,gBACVP,KAAMa,IACNhB,MAAOC,IAAOgB,WACdC,QAAS,SAAAC,GACPA,EAAGC,iBACEL,IAAeM,OAAOC,QAAQP,IACjCD,MAGAtC,O,kCC7BZ,kFAUa+C,EAAWpE,aAAiB,YAA8B,IAA3BqE,EAA0B,EAA1BA,UAAWnE,EAAe,EAAfA,SAErD,OADiBoE,YAAYD,GAE3B,oCAAGnE,GAEH,kBAAC,IAAD,kCAAiCmE,Q,kCCfrC,mFAMaE,EAA2D,SAAC,GAElE,IADLrE,EACI,EADJA,SAEA,OACE,kBAAC,IAAD,CAAyBsE,MAAOC,IAAcC,OAAQC,KACnDzE,K,wECTM0E,E,MAAUvE,EAAOC,IAAV,0DAAGD,CAAH,oB,2SCGb,IAAMwE,EAAUxE,YAAOuE,IAAPvE,CAAH,IAGSyC,IAAOgB,a,kCCRpC,8CAEO,SAASgB,IAEd,OADqBC,cAAbC,W,6GCGGC,EAAoD,SAAA5D,GAC/D,OACE,kBAACkD,EAAA,EAAD,KACE,kBAACW,EAAA,EAAD,eACEC,QAAQ,SACRC,OAAO,MACPC,eAAgB,OAAK,EAAD,kCACpBC,eAAgB,OAAK,EAAD,iCAChBjE,M,kCCFL,IAAMkE,EAAgB1E,IAAM2E,MACjC,YAAoC,IAAjCxE,EAAgC,EAAhCA,UAAcyE,EAAkB,6BAC3BvD,EAAQwD,YAAuB1E,GAC/B2E,EAAY3D,cAClB,OAAOR,aAAY,kBACjB,kBAAC,EAAD,eACEoE,MAAO1D,EAAM0D,MACbC,SAAU3D,EAAM4D,SAChBC,OAAQ7D,EAAM8D,WACd7D,SAAUwD,EAAUvD,cAChBqD,W,sYCjBCQ,EAAoD,SAAA5E,GAC/D,OACE,kBAACkD,EAAA,EAAD,KACE,kBAAC2B,EAAA,EAAD,eAAYd,OAAO,IAAID,QAAQ,SAASgB,MAAM,GAAW9E,M,2GCI/D,IAAM+E,EAAgC/F,IAAOC,IAAV,KAMtB+F,EAAyBxF,IAAM2E,MAAa,YAAe,IAAZc,EAAW,EAAXA,KAC1D,OAAO9E,aAAY,kBACjB,kBAAC4E,EAAD,KACE,kBAAC,EAAD,CACER,MAAOU,EAAKC,OACZV,SAAU,SAAAD,GAAK,OAAKU,EAAKC,OAASX,GAClCY,MAAO,kBAAC,QAAD,CAAO1E,GAAG,wBACjBb,WAAW,IAEb,kBAAC,EAAD,CACE2E,MAAOU,EAAKG,QACZZ,SAAU,SAAAD,GAAK,OAAKU,EAAKG,QAAUb,GACnCY,MAAO,kBAAC,QAAD,CAAO1E,GAAG,sBACjBb,WAAW,W,mWCVnB,IAAMyF,EAA6BrG,IAAOsG,QAAV,IAWd7D,IAAO8D,MACJC,IAASC,QAOjBC,EAAyC,SAAC,GAKhD,IAJLC,EAII,EAJJA,QACAC,EAGI,EAHJA,MACAC,EAEI,EAFJA,MACAC,EACI,EADJA,SAEMC,EAAa,SAACd,GAClB,OACE,yBAAKe,IAAKf,EAAKxE,GAAIwF,cAAY,WAAW/D,UAAU,SAClD,kBAACgE,EAAA,EAAD,CAAahE,UAAU,cACrB,kBAACiE,EAAA,EAAD,CACEC,MAAOC,EAAA,EAAK,EAAD,wBACXC,KAAK,SACL5D,QAAS,kBAAMoD,EAASb,EAAKxE,MAE7B,kBAAC+B,EAAA,EAAD,QAGJ,kBAACwC,EAAD,CAAwBC,KAAMA,MAgBpC,OAAO9E,aAAY,kBACjB,kBAACkF,EAAD,KACE,4BAAKM,EAAQY,MAZM,IAAjBX,EAAMY,OAEN,4BACE,kBAAC,QAAD,gBAICZ,EAAMa,IAAIV,GAOf,kBAACG,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,CACEC,MAAOC,EAAA,EAAK,EAAD,qBACXC,KAAK,SACL5D,QAASmD,GAET,kBAACa,EAAA,EAAD,aC3DJC,EAAeC,IAAIC,MAAM,IAAIC,KAAQ,QAE9BC,EAAoBpI,aAAS,WAAO,IACvCgF,EAAaD,cAAbC,SADsC,EAEpBqD,aAAyB,CACjDC,SAAUtD,EAASsD,WADbC,EAFsC,EAEtCA,KAAMC,EAFgC,EAEhCA,QAFgC,EAMtB3H,IAAM4H,UAAS,kBACrCC,qBAAW,IAAIC,QADVC,EANuC,sBAUhBC,cAAvBC,EAVuC,oBAY9CjI,IAAMkI,WAAU,WACd,QAAa7F,IAATqF,EAkBJ,OAf2B,IAAvBK,EAAcI,MAChBT,EAAKU,SAASC,SAAQ,SAAAlC,GACpB4B,EAAcO,IAAInC,EAAQoC,KAAMV,aAAWW,MAAM,QAGrDd,EAAKK,cAAcM,SAAQ,YAAuC,IAApCpH,EAAmC,EAAnCA,GAAIyE,EAA+B,EAA/BA,OAAQE,EAAuB,EAAvBA,QAAS6C,EAAc,EAAdA,QAC7CA,GACFV,EAAcW,IAAID,EAAQF,MAAOI,KAAK,CACpC1H,KACAyE,OAAQyB,EAAazB,GACrBE,QAASuB,EAAavB,GACtB6C,QAASA,EAAQF,UAIhB,WACLR,EAAcM,SAAQ,SAAAO,GACpBA,EAAaC,cAGhB,CAACd,EAAeL,EAAMvD,EAASsD,WAElC,IAAMqB,EAAgB9I,IAAM+I,OAAO,GAW7BzC,EAAW,SAACmC,GAAD,OAA0B,SAACO,GAC1C,IAAM5C,EAAQ2B,EAAcW,IAAID,GAC1BQ,EAAM7C,EAAM8C,UAAUC,IAAGC,OAAO,KAAMJ,IACxCC,GAAO,GACT7C,EAAMiD,OAAOJ,EAAK,KAIdK,EAAmBC,cAAnBD,eAEFE,EAAWxJ,IAAMyJ,aAAY,0BAAAC,EAAAC,OAAA,uDAC3BvD,EAAmC,GACzC2B,EAAcM,SAAQ,SAACO,EAAcH,GACnCrC,EAAMuC,KAAN,MAAAvC,EAAK,YACAwC,EAAa3B,KAAI,SAAAxB,GAAI,MAAK,CAC3BC,OAAQkE,YAAiBnE,EAAKC,QAC9BE,QAASgE,YAAiBnE,EAAKG,SAC/B6C,mBAP2B,WAAAiB,EAAA,MAWZzB,EAAoB,CACvCR,SAAUtD,EAASsD,SACnBrB,WAb+B,eAgB/BkD,EAAezC,EAAA,EAAK,EAAD,4CAhBY,uCAkBhC,CAACkB,EAAeuB,EAAgBnF,EAASsD,SAAUQ,IAEtD,OAAIN,EACK,kBAAC/F,EAAA,EAAD,MAIP,6BACG8F,GACCA,EAAKU,SAASnB,KAAI,SAAAd,GAAO,OACvB,kBAAC,EAAD,CACEK,IAAKL,EAAQoC,KACbpC,QAASA,EACTC,MAAO2B,EAAcW,IAAIvC,EAAQoC,OAASsB,IAC1CxD,OAnDKoC,EAmDQtC,EAAQoC,KAnDS,WACtCR,EAAcW,IAAID,GAAUE,KAAK,CAC/BF,UACAxH,GAAG,IAAD,OAAM6H,EAAcgB,WACtBpE,OAAQ0B,IAAI2C,WAAW,IAAIzC,MAC3B1B,QAASwB,IAAI4C,SAAS,IAAI1C,UA+CpBhB,SAAUA,EAASH,EAAQoC,QApDvB,IAACE,KAuDX,kBAACwB,EAAA,EAAD,CAAOtK,MAAO,IACZ,kBAACuK,EAAA,EAAD,CAAWpK,OAAO,QAChB,kBAAC6G,EAAA,EAAD,CACE9E,KAAMgF,EAAA,EAAK,EAAD,sBACV7E,MAAOC,IAAOC,MACdgB,QAASsG,U,uFCnHRW,GAAgBnK,IAAM2E,MACjC,YAAoC,IAAjCxE,EAAgC,EAAhCA,UAAcyE,EAAkB,8BAC3BvD,EAAQwD,YAAuB1E,GAC/B2E,EAAY3D,cAClB,OAAOR,aAAY,kBACjB,kBAAC,EAAD,eACEoE,MAAO1D,EAAM0D,MACbC,SAAU3D,EAAM4D,SAChBC,OAAQ7D,EAAM8D,WACd7D,SAAUwD,EAAUvD,cAChBqD,U,mHCVZ,I,GAAMwF,GAAa5K,IAAOC,IAAV,MAKH4K,GAAuD,SAAC,GAAD,IAClEC,EADkE,EAClEA,UACAC,EAFkE,EAElEA,QAFkE,OAIlE,oCACE,kBAACH,GAAD,KACE,kBAACD,GAAD,CACEhK,UAAWmK,EACX3E,MAAO,kBAAC,QAAD,CAAO1E,GAAG,wBACjBb,WAAW,KAGf,kBAACgK,GAAD,KACE,kBAACD,GAAD,CACEhK,UAAWoK,EACX5E,MAAO,kBAAC,QAAD,CAAO1E,GAAG,sBACjBb,WAAW,O,+DCxBboK,IAAM,sBACTC,KAAkBC,SAAWC,oBAAS,iBAD7B,gBAETF,KAAkBG,QAAUD,oBAAS,WAF5B,IAKCE,GAAuB7K,IAAM2E,MAAK,WAAO,IAC5CoD,EAAkB9D,eAAlB8D,cACR,OAAOpH,aAAY,kBACjB,kBAACmK,GAAA,EAAD,CACEC,MAAO,CAACN,KAAkBC,SAAUD,KAAkBG,SACtDI,aAAcjD,EAAckD,aAC5BC,WAAY,SAAAC,GAAI,OAAItE,IAAKuE,EAAEZ,GAAOW,KAClCE,kBAAmB,SAACF,GAAD,OACjBpD,EAAcuD,mBAAmBH,Y,0VCCzC,IAAMI,GAAgB/L,IAAOC,IAAV,MAOb+L,GAAgBhM,IAAOC,IAAV,MAUNgM,GAAqC,WAChD,IA6EwBC,EA7ElBC,EAASC,cACPzH,EAAaD,cAAbC,SAF8C,EAI/B0H,eAAhBC,EAJ+C,oBAMhDtC,EAAWxJ,IAAMyJ,aACrB,SAACsC,GACC,IAAMrG,EACJvB,EAAS4D,cAAciE,gBAAkBD,EAAOrG,OAC5CqG,EAAOrG,OACPqE,YAAWgC,EAAOE,MAClBrG,EACJzB,EAAS4D,cAAciE,gBAAkBD,EAAOnG,QAC5CmG,EAAOnG,QACPoE,aAAS+B,EAAOE,MACtBH,EACE,CACEI,MAAO,CACLC,cAAehI,EAASsD,SACxB2E,aAAcL,EAAOE,KACrBI,QAASlI,EAAS4D,cAAciE,eAChCM,WAAYP,EAAOQ,KACnB7G,OAAQkE,YAAiBlE,GACzBE,QAASgE,YAAiBhE,KAG9B,CACE4G,eAAgB,CACd,CACEC,MAAOC,IACPC,UAAW,CAAElF,SAAUtD,EAASsD,gBAM1C,CAACqE,EAAc3H,IAGjB,OACE,kBAAC,IAAD,CAAOqF,SAAUA,EAAUoD,eAqCLlB,EArCqCC,IAsCtD,CACLM,KAAMP,EACNhG,OAAQmH,aAASC,aAAWpB,EAAK,GAAI,GACrC9F,QAASiH,aAASC,aAAWpB,EAAK,GAAI,IACtCa,KAAM,MAzCJ,kBAAChB,GAAD,KACE,kBAAC7G,GAAA,EAAD,CACEvE,UAAU,OACVoE,OAAQwI,IACRC,QAAS,IAAI1F,KACblH,WAAW,EACXuF,MAAO,kBAAC,QAAD,gBAIX,kBAAC6F,GAAD,KACE,kBAACX,GAAD,MACA,kBAAC,IAAD,MACG,kBACC1G,EAAS4D,cAAciE,eACrB,kBAAC,GAAD,CAAmB1B,UAAU,SAASC,QAAQ,YAE9C,kBAACN,EAAA,EAAD,CAAOtK,MAAO,IACZ,kBAACI,GAAA,EAAD,CACEI,UAAU,OACVC,WAAW,EACXU,YAAa+F,EAAA,EAAK,EAAD,yBAQ7B,kBAAC/E,GAAA,EAAD,CAAkBnC,MAAM,QACtB,kBAAC,QAAD,e,qEChGKsN,GAET,SAAC,GAAD,IAAGC,EAAH,EAAGA,OAAQC,EAAX,EAAWA,UAAWrK,EAAtB,EAAsBA,SAAtB,OACF,kBAACkB,GAAA,EAAD,KACE,kBAACzE,GAAA,EAAD,CAAYG,YAAU,GACnByN,GACC,kBAACtK,GAAA,EAAD,CACEC,SAAUA,EACVC,YAAW,UAAK8D,EAAA,EAAK,EAAD,+CAA0CuG,YAC5DF,EAAOd,oBAKf,kBAAC7M,GAAA,EAAD,CAAYG,YAAU,EAACC,MAAM,SAC1ByN,YAAeF,EAAOd,eAEzB,kBAAC7M,GAAA,EAAD,CAAYG,YAAU,EAACC,MAAM,SAA7B,UACMuN,EAAOxH,OADb,cACyBwH,EAAOtH,UAEhC,kBAACrG,GAAA,EAAD,CAAYG,YAAU,EAACC,MAAM,SAC1BuN,EAAOb,OAAS,kBAAC,QAAD,eAAwB,kBAAC,QAAD,cAE3C,kBAAC9M,GAAA,EAAD,CAAYK,eAAgB,GAAIsN,EAAOZ,cClBrCe,GAAalE,IAAGmE,KACpBnE,IAAGoE,OAAOpE,IAAGqE,GAAGrE,IAAGsE,KAAK,gBAAiBtE,IAAGuE,OAGxCC,GAAY,SAAC,GAAD,IAAGvB,EAAH,EAAGA,aAAH,OACC,OAAjBA,GAAyBwB,aAASxB,EAAcrC,YAAW,IAAIzC,QAEpDuG,GAAwB1O,aAAS,WAAO,IAC3CgF,EAAaD,cAAbC,SAD0C,EAGhB2J,aAA0B,CAC1DrG,SAAUtD,EAASsD,WADbsG,EAH0C,EAG1CA,SAAUC,EAHgC,EAGhCA,YAIZb,EAAY7N,aAAa,uBAPmB,EAQ3B2O,eAAhBC,EAR2C,oBAU5CC,EAAUJ,GAAS,SAAArG,GAAI,OAC3B2F,GAAWlE,IAAGiF,OAAOT,GAAWjG,EAAKK,mBAGvC,OAAgB,OAAZoG,EACK,KAGc,IAAnBA,EAAQnH,OAER,kBAACkD,EAAA,EAAD,CAAWpK,OAAQ,GACjB,kBAAC,QAAD,4CAMJ,oCACGqO,EAAQlH,KAAI,SAAAiG,GAAM,OACjB,kBAAC,GAAD,CACE1G,IAAK0G,EAAOjM,GACZiM,OAAQA,EACRC,UAAWA,EACXrK,SAAU,oBAAA4G,EAAAC,OAAA,kEAAAD,EAAA,MACFwE,EAAa,CAAEjN,GAAIiM,EAAOjM,MADxB,OAER+M,EAAYK,GAAenB,EAAOjM,KAF1B,+CAUpB,SAASoN,GAAenB,GACtB,OAAOoB,cAAQ,SAACC,GACXA,EAAMxG,cAA6DsB,OACpEkF,EAAMxG,cAAcmB,UAAUsF,YAAStB,IACvC,MC5DC,IAAMuB,GAA8B,kBACzC,kBAACC,EAAA,EAAD,CAAgBC,UAAW9H,EAAA,EAAK,EAAD,kBAAoB+H,eAAe,GAChE,kBAACC,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,MACA,kBAACvL,EAAA,EAAD,CAAUC,UAAU,iBAClB,kBAACuL,EAAA,EAAD,KACE,kBAAC7E,EAAA,EAAD,CAAWpK,OAAO,UAChB,kBAAC,QAAD,iCAGJ,kBAACyH,EAAD,OAGF,kBAACwH,EAAA,EAAD,KACE,kBAAC7E,EAAA,EAAD,CAAWpK,OAAO,UAChB,kBAAC,QAAD,kCAGJ,kBAAC+N,GAAD,MAEA,kBAAC3O,EAAA,EAAD,CAAWE,aAAa,0BACtB,kBAAC2P,EAAA,EAAD,KACE,kBAAC7E,EAAA,EAAD,CAAWpK,OAAO,UAChB,kBAAC,QAAD,qCAGJ,kBAAC,GAAD,UCzCR,sDAUO,IAAMkP,GAAyC,kBACpD,kBAAC,IAAD,KACE,kBAACC,EAAA,EAAD,CACEC,OAAK,EACLC,KAAMC,IACNC,UAAWZ,KAEb,kBAAC,IAAD,CAAOY,UAAWC,QAIPN","file":"static/js/384.b2c52dbf.chunk.js","sourcesContent":["import { observer } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { useCanMutate } from '../hooks/useAccessGuard'\nimport { NoAccess } from './NoAccess'\n\ninterface IProps {\n  mutationName: string\n}\n\nexport const CanMutate = observer<IProps>(({ mutationName, children }) => {\n  const canMutate = useCanMutate(mutationName)\n  return canMutate ? (\n    <>{children}</>\n  ) : (\n    <NoAccess>{`No access to mutation ${mutationName}`}</NoAccess>\n  )\n})\n","import styled from 'styled-components'\n\ninterface IFlexColumnProps {\n  fixedWidth?: boolean\n  width?: string\n  widthGrowIndex?: number\n  padding?: string\n  margin?: string\n}\n\nexport const FlexColumn = styled.div`\n  flex: ${getFlexValue};\n  padding: ${getPadding};\n  margin: ${getMargin};\n`\n\nfunction getFlexValue({\n  fixedWidth = false,\n  width,\n  widthGrowIndex = 0,\n}: IFlexColumnProps) {\n  return fixedWidth ? (width ? `0 0 ${width}` : '0 0') : `${widthGrowIndex} 0`\n}\n\nfunction getPadding({ padding = '0.25rem' }: IFlexColumnProps) {\n  return padding\n}\n\nfunction getMargin({ margin = '' }: IFlexColumnProps) {\n  return margin\n}\n","import {\n  useXFieldForInput,\n  useXFormState,\n  XFieldName,\n  XFieldValidator,\n} from '@speedlo/xform'\nimport { useObserver } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { StyledFormInput } from '../../atoms/FormInputStyled'\n\ntype TProps = NoChildren &\n  Omit<React.InputHTMLAttributes<never>, 'name'> & {\n    fieldName: XFieldName\n    validate?: XFieldValidator<string>\n    fullWidth?: boolean\n    addHiddenLabelWithPlaceholderText?: boolean\n  }\n\nexport type FormInputProps = TProps\n\nexport const FormInput = React.forwardRef<HTMLInputElement, TProps>(\n  (\n    {\n      fieldName,\n      fullWidth,\n      validate,\n      addHiddenLabelWithPlaceholderText: withLabel = true,\n      ...props\n    },\n    inputRef,\n  ) => {\n    const getInputProps = useFormInputProps({ fieldName, validate })\n    return useObserver(() => (\n      <>\n        <StyledFormInput\n          {...getInputProps()}\n          inputFullWidth={fullWidth}\n          ref={inputRef}\n          {...props}\n        />\n        {withLabel && props.placeholder && (\n          <label hidden={true} htmlFor={getInputProps().id}>\n            {props.placeholder}\n          </label>\n        )}\n      </>\n    ))\n  },\n)\n\ninterface IHookOptions {\n  fieldName: XFieldName\n  validate?: XFieldValidator<string>\n}\n\nexport function useFormInputProps({ fieldName, validate }: IHookOptions) {\n  const state = useXFormState()\n  const [field, getInputProps] = useXFieldForInput<string>(fieldName, {\n    validate,\n  })\n  return () => ({\n    ...getInputProps(),\n    disabled: state.isSubmitting,\n    invalid: field.touched && Boolean(field.error),\n  })\n}\n","import React from 'react'\n\ninterface ILoadingProps {\n  text?: string\n}\n\nexport const Loading: React.FC<ILoadingProps> = ({ text = '...' }) => (\n  <h1>{text}</h1>\n)\n","import { ErrorOutline } from '@material-ui/icons'\nimport { cn } from '@speedlo/ui'\nimport { useXFormState } from '@speedlo/xform'\nimport { useObserver } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { ITouchButtonProps, TouchButton } from '../../molecules/TouchButton'\nimport { Colors } from '../../styling'\n\ninterface IProps extends ITouchButtonProps {\n  children: ReactNode | ReactNode[] | string\n}\n\nexport const FormSubmitButton: React.FC<IProps> = ({\n  children,\n  id = 'form-submit',\n  ...props\n}) => {\n  const state = useXFormState()\n  return useObserver(() => (\n    <TouchButton\n      id={id}\n      type=\"submit\"\n      color={Colors.green}\n      disabled={state.isSubmitting}\n      icon={!state.isValid ? ErrorOutline : undefined}\n      iconSize={1.1}\n      iconColor={Colors.red}\n      {...props}\n      className={cn(props.className, 'animated', 'infinite', {\n        heartBeat: state.isSubmitting,\n      })}\n    >\n      <>{children}</>\n    </TouchButton>\n  ))\n}\n","import { Delete } from '@material-ui/icons'\nimport React from 'react'\n\nimport { SizerButton } from '../atoms/SizerButton'\nimport { Colors } from '../styling'\nimport { ITouchButtonProps, TouchButton } from './TouchButton'\n\ninterface ITouchButtonDeleteProps extends Omit<ITouchButtonProps, 'onClick'> {\n  confirmText?: string\n  onDelete(): void\n}\n\nexport const TouchButtonDelete: React.FC<ITouchButtonDeleteProps> = ({\n  onDelete,\n  confirmText,\n  ...props\n}) => {\n  return (\n    <SizerButton>\n      <TouchButton\n        className=\"delete-button\"\n        icon={Delete}\n        color={Colors.greyMiddle}\n        onClick={ev => {\n          ev.preventDefault()\n          if (!confirmText || window.confirm(confirmText)) {\n            onDelete()\n          }\n        }}\n        {...props}\n      />\n    </SizerButton>\n  )\n}\n","import { observer } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { useCanQuery } from '../hooks/useAccessGuard'\nimport { NoAccess } from './NoAccess'\n\ninterface IProps {\n  queryName: string\n}\n\nexport const CanQuery = observer<IProps>(({ queryName, children }) => {\n  const canQuery = useCanQuery(queryName)\n  return canQuery ? (\n    <>{children}</>\n  ) : (\n    <NoAccess>{`No access to query ${queryName}`}</NoAccess>\n  )\n})\n","import DateFnsUtils from '@date-io/date-fns'\nimport { MuiPickersUtilsProvider } from '@material-ui/pickers'\nimport React from 'react'\n\nimport { DFLocale } from '../tools/datefns'\n\nexport const DateTimeFormatProvider: React.FC<Required<SomeChildren>> = ({\n  children,\n}) => {\n  return (\n    <MuiPickersUtilsProvider utils={DateFnsUtils} locale={DFLocale}>\n      {children}\n    </MuiPickersUtilsProvider>\n  )\n}\n","import styled from 'styled-components/macro'\n\nexport const FlexDiv = styled.div`\n  display: flex;\n`\n","import styled from 'styled-components'\n\nimport { Colors } from '../styling'\nimport { FlexDiv } from './FlexDiv'\n\nexport const FlexRow = styled(FlexDiv)`\n  flex-direction: row;\n  justify-content: space-between;\n  border-bottom: 1px solid ${Colors.greyMiddle};\n  padding: 0.1rem 0 0.1rem 0;\n`\n","import { useRoot } from '../atoms/RootProvider'\n\nexport function useSettings() {\n  const { settings } = useRoot()\n  return settings\n}\n","import { i18n } from '@lingui/core'\nimport { DatePicker, DatePickerProps } from '@material-ui/pickers'\nimport React from 'react'\n\nimport { DateTimeFormatProvider } from './DateTimeFormatProvider'\n\nexport const InputDate: React.FC<DatePickerProps & NoChildren> = props => {\n  return (\n    <DateTimeFormatProvider>\n      <DatePicker\n        variant=\"inline\"\n        format=\"PPP\"\n        maxDateMessage={i18n.t`Date is too much in the future`}\n        minDateMessage={i18n.t`Date is too much in the past`}\n        {...props}\n      />\n    </DateTimeFormatProvider>\n  )\n}\n","import { DatePickerProps } from '@material-ui/pickers'\nimport { useXField, useXFormState, XFieldName } from '@speedlo/xform'\nimport { useObserver } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { InputDate } from '../../atoms/InputDate'\n\ntype TProps = NoChildren &\n  Omit<DatePickerProps, 'value' | 'onChange'> & {\n    fieldName: XFieldName\n  }\n\nexport const FormInputDate = React.memo<TProps>(\n  ({ fieldName, ...pickerProps }) => {\n    const field = useXField<Maybe<Date>>(fieldName)\n    const formState = useXFormState()\n    return useObserver(() => (\n      <InputDate\n        value={field.value}\n        onChange={field.setValue}\n        onOpen={field.setTouched}\n        disabled={formState.isSubmitting}\n        {...pickerProps}\n      />\n    ))\n  },\n)\n","import { TimePicker, TimePickerProps } from '@material-ui/pickers'\nimport React from 'react'\n\nimport { DateTimeFormatProvider } from './DateTimeFormatProvider'\n\nexport const InputTime: React.FC<TimePickerProps & NoChildren> = props => {\n  return (\n    <DateTimeFormatProvider>\n      <TimePicker format=\"p\" variant=\"inline\" ampm={false} {...props} />\n    </DateTimeFormatProvider>\n  )\n}\n","import { Trans } from '@lingui/macro'\nimport { useObserver } from 'mobx-react-lite'\nimport React from 'react'\nimport styled from 'styled-components'\n\nimport { InputTime } from '../../../atoms/InputTime'\nimport { TBusinessHour } from '../businesshours.types'\n\ntype TProps = NoChildren & {\n  hour: TBusinessHour\n}\n\nconst StyledBussinessHoursTimeRange = styled.div`\n  & input {\n    width: 5rem;\n  }\n`\n\nexport const BusinessHoursTimeRange = React.memo<TProps>(({ hour }) => {\n  return useObserver(() => (\n    <StyledBussinessHoursTimeRange>\n      <InputTime\n        value={hour.openAt}\n        onChange={value => (hour.openAt = value!)}\n        label={<Trans id=\"input.timespan.from\">from</Trans>}\n        fullWidth={false}\n      />\n      <InputTime\n        value={hour.closeAt}\n        onChange={value => (hour.closeAt = value!)}\n        label={<Trans id=\"input.timespan.to\">to</Trans>}\n        fullWidth={false}\n      />\n    </StyledBussinessHoursTimeRange>\n  ))\n})\n","import { Trans } from '@lingui/macro'\nimport { AddCircle, Delete } from '@material-ui/icons'\nimport { useObserver } from 'mobx-react-lite'\nimport React from 'react'\nimport styled from 'styled-components'\n\nimport { SizerButton } from '../../../atoms/SizerButton'\nimport { FWeekdayFragment } from '../../../graph/generated'\nimport { i18n } from '../../../i18n'\nimport { TouchButton } from '../../../molecules/TouchButton'\nimport { Colors, Radiuses } from '../../../styling'\nimport { BusinessHoursTimeRange } from '../atoms/BusinessHoursTimeRange'\nimport { TBusinessHour } from '../businesshours.types'\n\ntype TProps = NoChildren & {\n  weekday: FWeekdayFragment\n  hours: RoA<TBusinessHour>\n  onAdd(): void\n  onRemove(hourId: ID): void\n}\n\nconst StyledBusinessHoursWeekday = styled.article`\n  display: flex;\n  align-items: baseline;\n  margin: 0 0 0.3rem 0;\n  h5 {\n    width: 5rem;\n  }\n  & .range {\n    display: flex;\n    margin: 0 2rem 0 0;\n    padding-right: 1rem;\n    background: ${Colors.white};\n    border-radius: ${Radiuses.Button};\n  }\n  .remove-btn {\n    margin-right: 1rem;\n  }\n`\n\nexport const BusinessHoursWeekday: React.FC<TProps> = ({\n  weekday,\n  hours,\n  onAdd,\n  onRemove,\n}) => {\n  const renderHour = (hour: TBusinessHour) => {\n    return (\n      <div key={hour.id} data-testid=\"bh-range\" className=\"range\">\n        <SizerButton className=\"remove-btn\">\n          <TouchButton\n            title={i18n.t`Remove business hour`}\n            role=\"button\"\n            onClick={() => onRemove(hour.id)}\n          >\n            <Delete />\n          </TouchButton>\n        </SizerButton>\n        <BusinessHoursTimeRange hour={hour} />\n      </div>\n    )\n  }\n\n  const renderHours = () => {\n    if (hours.length === 0) {\n      return (\n        <em>\n          <Trans>Closed</Trans>\n        </em>\n      )\n    }\n    return hours.map(renderHour)\n  }\n\n  return useObserver(() => (\n    <StyledBusinessHoursWeekday>\n      <h5>{weekday.code}</h5>\n      {renderHours()}\n      <SizerButton>\n        <TouchButton\n          title={i18n.t`Add business hour`}\n          role=\"button\"\n          onClick={onAdd}\n        >\n          <AddCircle />\n        </TouchButton>\n      </SizerButton>\n    </StyledBusinessHoursWeekday>\n  ))\n}\n","import { IObservableArray, observable } from 'mobx'\nimport { observer } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { Loading } from '../../../atoms/Loading'\nimport { MarginBox } from '../../../atoms/MarginBox'\nimport { useRoot } from '../../../atoms/RootProvider'\nimport { Sizer } from '../../../atoms/Sizer'\nimport {\n  InputBusinessHourCreate,\n  useMBusinessHoursSubmit,\n  useQRegularBusinessHours,\n  WeekDayEnum,\n} from '../../../graph/generated'\nimport { ARRAY_EMPTY } from '../../../helpers/form'\nimport { formatSystemTime } from '../../../helpers/formats'\nimport { useSnackBar } from '../../../hooks/useSnackBar'\nimport { i18n } from '../../../i18n'\nimport { TouchButton } from '../../../molecules/TouchButton'\nimport { Colors } from '../../../styling'\nimport { DFP } from '../../../tools/datefns'\nimport { RM } from '../../../tools/ramda'\nimport { TBusinessHour } from '../businesshours.types'\nimport { BusinessHoursWeekday } from '../molecules/BusinessHoursWeekday'\n\nconst getTodayTime = DFP.parse(new Date(), 'H:mm')\n\nexport const BusinessHoursForm = observer(() => {\n  const { settings } = useRoot()\n  const { data, loading } = useQRegularBusinessHours({\n    branchId: settings.branchId,\n  })\n\n  const [businessHours] = React.useState(() =>\n    observable(new Map<WeekDayEnum, IObservableArray<TBusinessHour>>()),\n  )\n\n  const [submitBusinessHours] = useMBusinessHoursSubmit()\n\n  React.useEffect(() => {\n    if (data === undefined) {\n      return\n    }\n    if (businessHours.size === 0) {\n      data.weekDays.forEach(weekday => {\n        businessHours.set(weekday.enum, observable.array([]))\n      })\n    }\n    data.businessHours.forEach(({ id, openAt, closeAt, weekDay }) => {\n      if (weekDay) {\n        businessHours.get(weekDay.enum)!.push({\n          id,\n          openAt: getTodayTime(openAt),\n          closeAt: getTodayTime(closeAt),\n          weekDay: weekDay.enum,\n        })\n      }\n    })\n    return () => {\n      businessHours.forEach(weekDayHours => {\n        weekDayHours.clear()\n      })\n    }\n  }, [businessHours, data, settings.branchId])\n\n  const hourIdCounter = React.useRef(0)\n\n  const onAdd = (weekDay: WeekDayEnum) => () => {\n    businessHours.get(weekDay)!.push({\n      weekDay,\n      id: `L${hourIdCounter.current++}`,\n      openAt: DFP.startOfDay(new Date()),\n      closeAt: DFP.endOfDay(new Date()),\n    })\n  }\n\n  const onRemove = (weekDay: WeekDayEnum) => (hourId: ID) => {\n    const hours = businessHours.get(weekDay)!\n    const idx = hours.findIndex(RM.propEq('id', hourId))\n    if (idx >= 0) {\n      hours.splice(idx, 1)\n    }\n  }\n\n  const { enqueueSuccess } = useSnackBar()\n\n  const onSubmit = React.useCallback(async () => {\n    const hours: InputBusinessHourCreate[] = []\n    businessHours.forEach((weekDayHours, weekDay) => {\n      hours.push(\n        ...weekDayHours.map(hour => ({\n          openAt: formatSystemTime(hour.openAt),\n          closeAt: formatSystemTime(hour.closeAt),\n          weekDay,\n        })),\n      )\n    })\n    const result = await submitBusinessHours({\n      branchId: settings.branchId,\n      hours,\n    })\n    if (result) {\n      enqueueSuccess(i18n.t`Regular business hours has been updated`)\n    }\n  }, [businessHours, enqueueSuccess, settings.branchId, submitBusinessHours])\n\n  if (loading) {\n    return <Loading />\n  }\n\n  return (\n    <div>\n      {data &&\n        data.weekDays.map(weekday => (\n          <BusinessHoursWeekday\n            key={weekday.enum}\n            weekday={weekday}\n            hours={businessHours.get(weekday.enum) || ARRAY_EMPTY}\n            onAdd={onAdd(weekday.enum)}\n            onRemove={onRemove(weekday.enum)}\n          />\n        ))}\n      <Sizer width={20}>\n        <MarginBox margin=\"1rem\">\n          <TouchButton\n            text={i18n.t`Save regular hours`}\n            color={Colors.green}\n            onClick={onSubmit}\n          />\n        </MarginBox>\n      </Sizer>\n    </div>\n  )\n})\n","import { TimePickerProps } from '@material-ui/pickers'\nimport { useXField, useXFormState, XFieldName } from '@speedlo/xform'\nimport { useObserver } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { InputTime } from '../../atoms/InputTime'\n\ntype TProps = NoChildren &\n  Omit<TimePickerProps, 'value' | 'onChange'> & {\n    fieldName: XFieldName\n  }\n\nexport const FormInputTime = React.memo<TProps>(\n  ({ fieldName, ...pickerProps }) => {\n    const field = useXField<Maybe<Date>>(fieldName)\n    const formState = useXFormState()\n    return useObserver(() => (\n      <InputTime\n        value={field.value}\n        onChange={field.setValue}\n        onOpen={field.setTouched}\n        disabled={formState.isSubmitting}\n        {...pickerProps}\n      />\n    ))\n  },\n)\n","import { Trans } from '@lingui/macro'\nimport { XFieldName } from '@speedlo/xform'\nimport React from 'react'\nimport styled from 'styled-components'\n\nimport { FormInputTime } from './FormInputTime'\n\ninterface IFormInputTimeSpanProps {\n  fieldFrom: XFieldName\n  fieldTo: XFieldName\n}\n\nconst InlineWrap = styled.div`\n  width: 5rem;\n  display: inline-block;\n`\n\nexport const FormInputTimeSpan: React.FC<IFormInputTimeSpanProps> = ({\n  fieldFrom,\n  fieldTo,\n}) => (\n  <>\n    <InlineWrap>\n      <FormInputTime\n        fieldName={fieldFrom}\n        label={<Trans id=\"input.timespan.from\">from</Trans>}\n        fullWidth={false}\n      />\n    </InlineWrap>\n    <InlineWrap>\n      <FormInputTime\n        fieldName={fieldTo}\n        label={<Trans id=\"input.timespan.to\">to</Trans>}\n        fullWidth={false}\n      />\n    </InlineWrap>\n  </>\n)\n","import { i18nMark } from '@lingui/core'\nimport { useObserver } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { SelectControlFlat } from '../../../atoms/SelectControlFlat'\nimport { useSettings } from '../../../hooks/useSettings'\nimport { i18n } from '../../../i18n'\nimport { ESpecificHourMode } from '../businesshours.types'\n\nconst labels = {\n  [ESpecificHourMode.TIMESPAN]: i18nMark('Open between'),\n  [ESpecificHourMode.FULLDAY]: i18nMark('Closed'),\n}\n\nexport const SpecificModeSelector = React.memo(() => {\n  const { businessHours } = useSettings()\n  return useObserver(() => (\n    <SelectControlFlat<ESpecificHourMode>\n      items={[ESpecificHourMode.TIMESPAN, ESpecificHourMode.FULLDAY]}\n      selectedItem={businessHours.specificMode as ESpecificHourMode}\n      formatItem={mode => i18n._(labels[mode])}\n      onSingleSelection={(mode: ESpecificHourMode) =>\n        businessHours.changeSpecificMode(mode)\n      }\n    />\n  ))\n})\n","import { Trans } from '@lingui/macro'\nimport { useNow } from '@speedlo/hooks'\nimport { XForm } from '@speedlo/xform'\nimport { endOfDay, setHours, setMinutes, startOfDay } from 'date-fns'\nimport { Observer } from 'mobx-react-lite'\nimport React from 'react'\nimport styled from 'styled-components'\n\nimport { useRoot } from '../../../atoms/RootProvider'\nimport { Sizer } from '../../../atoms/Sizer'\nimport { FormInput } from '../../../components/forms/FormInput'\nimport { FormInputDate } from '../../../components/forms/FormInputDate'\nimport { FormInputTimeSpan } from '../../../components/forms/FormInputTimeSpan'\nimport { FormSubmitButton } from '../../../components/forms/FormSubmitButton'\nimport {\n  QSpecificBusinessHoursDocument,\n  useMSpecificBusinessHourCreate,\n} from '../../../graph/generated'\nimport { formatSystemTime, fullDateFormat } from '../../../helpers/formats'\nimport { i18n } from '../../../i18n'\nimport { TSpecificBusinessHoursFormValues } from '../businesshours.types'\nimport { SpecificModeSelector } from '../molecules/SpecificModeSelector'\n\nconst DateContainer = styled.div`\n  display: inline-block;\n  width: 13rem;\n  margin-left: 1rem;\n  margin-top: 2rem;\n`\n\nconst FormContainer = styled.div`\n  display: inline-block;\n  width: 16rem;\n  min-height: 6rem;\n  margin: 0rem 0 0 1rem;\n  vertical-align: top;\n`\n\ntype TFormValues = TSpecificBusinessHoursFormValues\n\nexport const SpecificBusinessHourForm: React.FC = () => {\n  const getNow = useNow()\n  const { settings } = useRoot()\n\n  const [createBsHour] = useMSpecificBusinessHourCreate()\n\n  const onSubmit = React.useCallback(\n    (values: TFormValues) => {\n      const openAt =\n        settings.businessHours.isTimespanMode && values.openAt\n          ? values.openAt\n          : startOfDay(values.date)\n      const closeAt =\n        settings.businessHours.isTimespanMode && values.closeAt\n          ? values.closeAt\n          : endOfDay(values.date)\n      createBsHour(\n        {\n          input: {\n            companyBranch: settings.branchId,\n            specificDate: values.date,\n            closed: !settings.businessHours.isTimespanMode,\n            closedNote: values.note,\n            openAt: formatSystemTime(openAt),\n            closeAt: formatSystemTime(closeAt),\n          },\n        },\n        {\n          refetchQueries: [\n            {\n              query: QSpecificBusinessHoursDocument,\n              variables: { branchId: settings.branchId },\n            },\n          ],\n        },\n      )\n    },\n    [createBsHour, settings],\n  )\n\n  return (\n    <XForm onSubmit={onSubmit} initialValues={getInitialValues(getNow())}>\n      <DateContainer>\n        <FormInputDate\n          fieldName=\"date\"\n          format={fullDateFormat}\n          minDate={new Date()}\n          fullWidth={true}\n          label={<Trans>Date</Trans>}\n        />\n      </DateContainer>\n\n      <FormContainer>\n        <SpecificModeSelector />\n        <Observer>\n          {() =>\n            settings.businessHours.isTimespanMode ? (\n              <FormInputTimeSpan fieldFrom=\"openAt\" fieldTo=\"closeAt\" />\n            ) : (\n              <Sizer width={13}>\n                <FormInput\n                  fieldName=\"note\"\n                  fullWidth={true}\n                  placeholder={i18n.t`Closing reason`}\n                />\n              </Sizer>\n            )\n          }\n        </Observer>\n      </FormContainer>\n\n      <FormSubmitButton width=\"9rem\">\n        <Trans>Add</Trans>\n      </FormSubmitButton>\n    </XForm>\n  )\n}\n\nfunction getInitialValues(now: Date): TFormValues {\n  return {\n    date: now,\n    openAt: setHours(setMinutes(now, 0), 9),\n    closeAt: setHours(setMinutes(now, 0), 20),\n    note: '',\n  }\n}\n","import { Trans } from '@lingui/macro'\nimport React from 'react'\n\nimport { FlexColumn } from '../../../atoms/FlexColumn'\nimport { FlexRow } from '../../../atoms/FlexRow'\nimport { FSpecificBusinessHourFragment } from '../../../graph/generated'\nimport { formatFullDate } from '../../../helpers/formats'\nimport { i18n } from '../../../i18n'\nimport { TouchButtonDelete } from '../../../molecules/TouchButtonDelete'\n\ninterface ISpecificBusinessHourLineProps {\n  bsHour: FSpecificBusinessHourFragment\n  canDelete: boolean\n  onDelete(): void\n}\n\nexport const SpecificBusinessHourLine: React.FC<\n  ISpecificBusinessHourLineProps\n> = ({ bsHour, canDelete, onDelete }) => (\n  <FlexRow>\n    <FlexColumn fixedWidth>\n      {canDelete && (\n        <TouchButtonDelete\n          onDelete={onDelete}\n          confirmText={`${i18n.t`Really remove specific business hour ${formatFullDate(\n            bsHour.specificDate!,\n          )}?`}`}\n        />\n      )}\n    </FlexColumn>\n    <FlexColumn fixedWidth width=\"14rem\">\n      {formatFullDate(bsHour.specificDate!)}\n    </FlexColumn>\n    <FlexColumn fixedWidth width=\"10rem\">\n      {`${bsHour.openAt} - ${bsHour.closeAt}`}\n    </FlexColumn>\n    <FlexColumn fixedWidth width=\"10rem\">\n      {bsHour.closed ? <Trans>Closed</Trans> : <Trans>Open</Trans>}\n    </FlexColumn>\n    <FlexColumn widthGrowIndex={1}>{bsHour.closedNote}</FlexColumn>\n  </FlexRow>\n)\n","import { Trans } from '@lingui/macro'\nimport { isBefore, startOfDay } from 'date-fns'\nimport produce from 'immer'\nimport { observer } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { MarginBox } from '../../../atoms/MarginBox'\nimport { useRoot } from '../../../atoms/RootProvider'\nimport {\n  FRegularBusinessHourFragment,\n  FSpecificBusinessHourFragment,\n  QSpecificBusinessHoursQuery,\n  useMSpecificBusinessHourDelete,\n  useQSpecificBusinessHours,\n} from '../../../graph/generated'\nimport { useCanMutate } from '../../../hooks/useAccessGuard'\nimport { idPropEq, RM } from '../../../tools/ramda'\nimport { SpecificBusinessHourLine } from '../molecules/SpecificBusinessHourLine'\n\ntype BsHour = FSpecificBusinessHourFragment\n\nconst sortByDate = RM.sort<BsHour>(\n  RM.ascend(RM.or(RM.prop('specificDate'), RM.not)),\n)\n\nconst rejectOld = ({ specificDate }: BsHour) =>\n  specificDate === null || isBefore(specificDate, startOfDay(new Date()))\n\nexport const SpecificBusinessHours = observer(() => {\n  const { settings } = useRoot()\n\n  const { getStash, updateQuery } = useQSpecificBusinessHours({\n    branchId: settings.branchId,\n  })\n\n  const canDelete = useCanMutate('destroyBusinessHour')\n  const [deleteBsHour] = useMSpecificBusinessHourDelete()\n\n  const bsHours = getStash(data =>\n    sortByDate(RM.reject(rejectOld, data.businessHours)),\n  )\n\n  if (bsHours === null) {\n    return null\n  }\n\n  if (bsHours.length === 0) {\n    return (\n      <MarginBox margin={1}>\n        <Trans>No specific business hours defined</Trans>\n      </MarginBox>\n    )\n  }\n\n  return (\n    <>\n      {bsHours.map(bsHour => (\n        <SpecificBusinessHourLine\n          key={bsHour.id}\n          bsHour={bsHour}\n          canDelete={canDelete}\n          onDelete={async () => {\n            await deleteBsHour({ id: bsHour.id })\n            updateQuery(updateOnDelete(bsHour.id))\n          }}\n        />\n      ))}\n    </>\n  )\n})\n\nfunction updateOnDelete(bsHour: ID) {\n  return produce((draft: QSpecificBusinessHoursQuery) => {\n    ;((draft.businessHours as unknown) as FRegularBusinessHourFragment[]).splice(\n      draft.businessHours.findIndex(idPropEq(bsHour)),\n      1,\n    )\n  })\n}\n","import { Trans } from '@lingui/macro'\nimport React from 'react'\n\nimport { CanMutate } from '../../../atoms/CanMutate'\nimport { CanQuery } from '../../../atoms/CanQuery'\nimport { Card } from '../../../atoms/Card'\nimport { Headline } from '../../../atoms/Headline'\nimport { MarginBox } from '../../../atoms/MarginBox'\nimport { i18n } from '../../../i18n'\nimport { FullPageLayout } from '../../../molecules/FullPageLayout'\nimport { SettingsCompanyBranchPicker } from '../../../segments/settings/organisms/SettingsCompanyBranchPicker'\nimport { BusinessHoursForm } from '../organisms/BusinessHoursForm'\nimport { SpecificBusinessHourForm } from '../organisms/SpecificBusinessHourForm'\nimport { SpecificBusinessHours } from '../organisms/SpecificBusinessHours'\n\nexport const BusinessHoursPage: React.FC = () => (\n  <FullPageLayout pageTitle={i18n.t`Business hours`} useBackButton={true}>\n    <Card>\n      <SettingsCompanyBranchPicker />\n      <CanQuery queryName=\"businessHours\">\n        <Headline>\n          <MarginBox margin=\"1rem 0\">\n            <Trans>Regular business hours</Trans>\n          </MarginBox>\n        </Headline>\n        <BusinessHoursForm />\n      </CanQuery>\n\n      <Headline>\n        <MarginBox margin=\"1rem 0\">\n          <Trans>Specific business hours</Trans>\n        </MarginBox>\n      </Headline>\n      <SpecificBusinessHours />\n\n      <CanMutate mutationName=\"addSpecialBusinessHour\">\n        <Headline>\n          <MarginBox margin=\"1rem 0\">\n            <Trans>Add specific business hour</Trans>\n          </MarginBox>\n        </Headline>\n        <SpecificBusinessHourForm />\n      </CanMutate>\n    </Card>\n  </FullPageLayout>\n)\n","import React from 'react'\nimport { Route, Switch } from 'react-router-dom'\n\nimport { NotFoundPage } from '../../../pages/NotFoundPage'\nimport { SecureRoute } from '../../../routes/SecureRoute'\nimport { ROUTE_SETTINGS_HOURS } from '../../settings/settings.routes'\nimport { BusinessHoursPage } from '../pages/BusinessHoursPage'\n\ninterface IProps {}\n\nexport const BusinessHoursRouting: React.FC<IProps> = () => (\n  <Switch>\n    <SecureRoute\n      exact\n      path={ROUTE_SETTINGS_HOURS}\n      component={BusinessHoursPage}\n    />\n    <Route component={NotFoundPage} />\n  </Switch>\n)\n\nexport default BusinessHoursRouting\n"],"sourceRoot":""}