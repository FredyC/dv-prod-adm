(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{7717:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PageLayoutFullHeightItem=void 0;var n=i(r(0)),a=i(r(45)),l=r(7730),o=r(46);function i(e){return e&&e.__esModule?e:{default:e}}const u=a.default.div.withConfig({displayName:"FullHeightDiv"})`
  position: fixed;
  bottom: 0.5rem;
  width: ${(()=>e=>void 0!==e.widthInColumns?"calc(("+e.widthInColumns+" * 6.22vw) - "+o.Spacing.LayoutGridCellMargin+")":"calc(100vh - (2 * "+o.Spacing.LayoutGridCellMargin+"))")()};
  left: ${(()=>e=>void 0!==e.column?"calc(("+e.column+" * 6.22vw) + "+o.Spacing.LayoutGridCellMargin+")":o.Spacing.LayoutGridCellMargin)()};
  top: ${(()=>e=>void 0!==e.row?"calc(("+e.row+" * 3.9375rem) + "+o.Spacing.LayoutGridCellMargin+")":"calc(3.9375rem + "+o.Spacing.LayoutGridCellMargin+")")()};
`,c=a.default.div.withConfig({displayName:"FullHeightDivStyled"})`
  height: 100%;
`;t.PageLayoutFullHeightItem=(({children:e,row:t=1,column:r=0,widthInColumns:a=16,withScrollArea:o=!1,scrollAreaId:i})=>n.default.createElement(u,{column:r,row:t,widthInColumns:a,withScrollArea:o},o?n.default.createElement(l.ScrollArea,{id:i},e):n.default.createElement(c,null,e)))},7718:function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.FlexRowSingle=void 0;const a=((n=r(45))&&n.__esModule?n:{default:n}).default.div.withConfig({displayName:"FlexRowSingle"})`
  display: flex;
  flex-direction: row;
  justify-content: ${({justify:e="space-between"})=>e};
`;t.FlexRowSingle=a},7722:function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.VerticalGap=void 0;const a=((n=r(45))&&n.__esModule?n:{default:n}).default.div.withConfig({displayName:"VerticalGap"})`
  height: ${({size:e=1,sizeUnit:t="rem"})=>`${e}${t}`};
`;t.VerticalGap=a,a.displayName="VerticalGap"},7725:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkColumnAccess=function({canQuery:e,canMutate:t},r){return a=>{let l=r(a);return e&&(l=n.default.createElement(f.CanQuery,{queryName:e},l)),t&&(l=n.default.createElement(s.CanMutate,{mutationName:t},l)),l}},t.ColumnRendererEdit=function({cellData:e}){return n.default.createElement(i.TouchButtonEdit,{target:e})},t.ColumnRendererRemove=function({cellData:e,columnData:t}){return n.default.createElement(u.TouchButtonRemove,{onClick:()=>t.onRemove&&t.onRemove(e)})},t.ColumnRendererVisibility=function({cellData:e,columnData:t,rowData:r}){return n.default.createElement(c.TouchButtonVisibility,{isVisible:e,onClick:()=>t.onToggle(r.id,!e)})},t.ColumnRendererWithNote=function({cellData:e,rowData:t,columnData:r}){return n.default.createElement(n.default.Fragment,null,e,n.default.createElement(v,null,t[r.noteKey]))},Object.defineProperty(t,"Column",{enumerable:!0,get:function(){return a.Column}}),t.DataTableEmptyText=t.NoteText=t.DataTable=void 0,r(8314);var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(r(0)),a=r(7940),l=p(r(45)),o=r(71),i=r(8316),u=r(7932),c=r(8317),d=r(46),s=r(7711),f=r(7720),m=p(r(98));function p(e){return e&&e.__esModule?e:{default:e}}function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var g=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&(r[n[a]]=e[n[a]])}return r};class h extends n.Component{renderTable(e,t){const r=this.props,{items:l,children:o,isLoading:i,heightStretch:u}=r,c=g(r,["items","children","isLoading","heightStretch"]);return n.default.createElement(a.Table,y({autoHeight:!u,width:e,height:t,headerHeight:50,rowHeight:60,rowCount:l?l.length:0,rowGetter:({index:e})=>l[e],noRowsRenderer:()=>i?n.default.createElement(m.default,null):null},c),o)}render(){return this.props.heightStretch?n.default.createElement(a.AutoSizer,null,({width:e,height:t})=>this.renderTable(e,t)):n.default.createElement(a.WindowScroller,{scrollElement:window},({height:e})=>n.default.createElement(a.AutoSizer,{disableHeight:!0},({width:t})=>this.renderTable(t,e)))}}t.DataTable=h,h.defaultProps={heightStretch:!1};const v=l.default.div.withConfig({displayName:"NoteText"})`
  color: ${d.Colors.greyMiddle};
`;t.NoteText=v;const b=(0,l.default)(e=>{var{text:t=o.i18n._("Table is empty")}=e,r=g(e,["text"]);return n.default.createElement("div",r,t)}).withConfig({displayName:"DataTableEmptyText"})`
  padding: 1rem;
  color: ${d.Colors.greyMiddle};
  font-style: 'italic';
`;t.DataTableEmptyText=b},7730:function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ScrollArea=void 0;const a=((n=r(45))&&n.__esModule?n:{default:n}).default.div.withConfig({displayName:"ScrollArea"})`
  overflow-y: scroll;
  -webkit-overflow-scrolling: touch;
  height: 100%;
`;t.ScrollArea=a},7755:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isPartialMatch=function(e){const t=e.toLocaleLowerCase();return e=>e.toLocaleLowerCase().includes(t)}},7760:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolveLocation=c,t.RelativeLink=void 0;var n=o(r(0)),a=r(149),l=o(r(300));function o(e){return e&&e.__esModule?e:{default:e}}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var u=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&(r[n[a]]=e[n[a]])}return r};function c(e,t){if("string"===typeof e)return(0,l.default)(e,t);const r=(0,l.default)(e.pathname||"",t);return Object.assign({},e,{pathname:r})}t.RelativeLink=(e=>{var{to:t,from:r}=e,l=u(e,["to","from"]);return n.default.createElement(a.Route,{children:({location:e})=>n.default.createElement(a.Link,i({to:c(t,r||`${e.pathname}/`)},l))})})},7765:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormInputFlatSelect=void 0;var n,a=(n=r(0))&&n.__esModule?n:{default:n},l=r(7708),o=r(47),i=r(71),u=r(7732);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var d=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&(r[n[a]]=e[n[a]])}return r};class s extends a.default.Component{constructor(){super(...arguments),this.validate=(e=>{const{isRequired:t,isMulti:r,validationName:n}=this.props;if(t){if(r&&(!Array.isArray(e)||0===e.length))return i.i18n._("{validationName} must have at least option selected",{validationName:n});if(!r&&null==e)return i.i18n._("{validationName} must have a selection",{validationName:n})}return null})}getControlProps(e){const{isMulti:t,items:r,defaultSelection:n,getItemId:a}=this.props,l=e.value||n;if(t){const t=e=>l.includes(a(e));return{selectedItems:Array.isArray(l)?r.filter(t):[],onMultiSelection:t=>{e.setValue(t.map(a)),e.setTouched(!0)}}}return{selectedItem:l&&r.find(e=>a(e)===l),onSingleSelection:t=>{e.setValue(t?a(t):null),e.setTouched(!0)}}}render(){const e=this.props,{field:t,fieldIsPure:r=!1,isRequired:n=!1,isClearable:o=!1}=e,i=d(e,["field","fieldIsPure","isRequired","isClearable"]);return a.default.createElement(l.Field,{field:t,pure:r,validate:this.validate},e=>a.default.createElement(u.SelectControlFlat,c({},this.getControlProps(e),{isInvalid:Boolean(e.error),isClearable:o&&!n},i)))}}t.FormInputFlatSelect=s,s.defaultProps={validationName:i.i18n._("Value"),getItemId:o.RM.prop("id")}},7789:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DragHandle=void 0;var n=i(r(0)),a=r(7762),l=i(r(45)),o=r(150);function i(e){return e&&e.__esModule?e:{default:e}}const u=l.default.div.withConfig({displayName:"DragHandleContainerStyled"})`
  padding: 1rem 0.4rem;
  cursor: grab;
`,c=(0,a.SortableHandle)(()=>n.default.createElement(u,null,n.default.createElement(o.Icon,{iconName:"reorder"})));t.DragHandle=c},7790:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormColumn=t.FormContainer=void 0;var n,a=(n=r(45))&&n.__esModule?n:{default:n};const l=a.default.form.withConfig({displayName:"FormContainer"})`
  margin: 0.6rem;
  display: flex;
`;t.FormContainer=l;const o=a.default.div.withConfig({displayName:"FormColumn"})`
  flex: none;
  margin-right: 1rem;
`;t.FormColumn=o},7791:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MenuSuggestionPanel=function(e){const{onAdd:t,addLabel:r=c.i18n._("Add"),addButtonText:m=c.i18n._("Add")}=e,p=f(e,["onAdd","addLabel","addButtonText"]),[y,g]=(0,u.useStateRef)(null),h=(0,n.useCallback)(()=>{const e=y();null!==e&&(t(e),g(null))},[t]),v=(0,n.useCallback)(e=>{"Enter"===e.key&&h()},[]),b=(0,n.useCallback)(e=>{g(e||null)},[]);return n.default.createElement(l.FlexRowSingle,{justify:"flex-start"},n.default.createElement(a.FlexColumn,{fixedWidth:!0,width:"4rem",margin:"auto 0"},r),n.default.createElement(a.FlexColumn,{fixedWidth:!0,width:"20rem",margin:"auto 0"},n.default.createElement(o.SelectControl,s({value:y(),onChange:b,onKeyDown:v,isMulti:!1,isClearable:!1,getOptionValue:i.RM.prop("id"),getOptionLabel:i.RM.prop("nameLabel")},p))),n.default.createElement(a.FlexColumn,{fixedWidth:!0,width:"10rem",margin:"auto 0"},n.default.createElement(d.TouchButton,{text:m,disabled:null===y(),onClick:h})))};var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(r(0)),a=r(7724),l=r(7718),o=r(7716),i=r(47),u=r(5834),c=r(71),d=r(5777);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var f=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&(r[n[a]]=e[n[a]])}return r}},7804:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useDebounceCallback=function(e,t=300){const r=(0,l.useCallback)(e,[]),n=(0,l.useRef)((0,a.default)(r,t));return(0,l.useEffect)(()=>n.current.clear),n.current};var n,a=(n=r(64))&&n.__esModule?n:{default:n},l=r(0)},7846:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormInputSelect=void 0;var n,a=(n=r(0))&&n.__esModule?n:{default:n},l=r(7708),o=r(47),i=r(71),u=r(7716);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var d=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&(r[n[a]]=e[n[a]])}return r};class s extends a.default.Component{constructor(){super(...arguments),this.validate=(e=>this.props.isRequired&&!e?i.i18n._("{0} must be selected",{0:this.props.validatioName}):null)}getControlProps(e){const{isMulti:t,options:r,getOptionValue:n,defaultValue:a}=this.props,l=e.value||a;if(t){const t=Array.isArray(l)?e=>l.includes(n(e)):o.RM.F;return{value:Array.isArray(r)?r.filter(t):[],onChange:t=>{e.setValue(t.map(n))}}}return{value:l&&r.find(e=>n(e)===l),onChange:t=>{e.setValue(n(t))}}}render(){const e=this.props,{field:t,fieldIsPure:r=!1,defaultValue:n,isRequired:o=!1}=e,i=d(e,["field","fieldIsPure","defaultValue","isRequired"]);return a.default.createElement(l.Field,{field:t,validate:this.validate,pure:r},e=>a.default.createElement(u.SelectControl,c({},this.getControlProps(e),{onFocus:()=>e.setTouched(!0),styles:{control:t=>Boolean(e.error)?Object.assign({},t,{borderColor:"red"}):t}},i)))}}t.FormInputSelect=s,s.defaultProps={validatioName:"Value",getItemId:o.RM.prop("id")}},7848:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CreateButton=void 0;var n=u(r(0)),a=u(r(45)),l=r(7760),o=r(5777),i=r(46);function u(e){return e&&e.__esModule?e:{default:e}}const c=a.default.div.withConfig({displayName:"CreateButtonContainer"})`
  position: absolute;
  right: 0;
  z-index: 5;
`;t.CreateButton=(({routeTo:e="create",onClick:t})=>n.default.createElement(c,null,n.default.createElement(l.RelativeLink,{to:e,onClick:t},n.default.createElement(o.TouchButton,{iconName:"add_circle",color:i.Colors.green,width:i.Spacing.ButtonHeight,height:i.Spacing.ButtonHeight}))))},7849:function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.TopRightButtonContainer=void 0;const a=((n=r(45))&&n.__esModule?n:{default:n}).default.div.withConfig({displayName:"TopRightButtonContainer"})`
  position: fixed;
  right: 0;
  top: -4rem;
  width: 10rem;
`;t.TopRightButtonContainer=a,a.displayName="TopRightButtonContainer"},7850:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SubmitButton=void 0;var n,a=(n=r(0))&&n.__esModule?n:{default:n},l=r(7708),o=r(7735),i=r(71),u=r(7734);t.SubmitButton=(({isCreate:e=!1})=>a.default.createElement(l.FormApi,{render:t=>a.default.createElement(u.FormSubmit,{id:"form-submit"},function(e,t){return(0,o.isFormValid)(e)?t?i.i18n._("Create"):i.i18n._("Save"):i.i18n._("Fix form errors")}(t,e))}))},7851:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormDeleteButton=void 0;var n,a=(n=r(0))&&n.__esModule?n:{default:n},l=r(7708),o=r(24),i=r(7742);var u=function(e,t,r,n){return new(r||(r=Promise))(function(a,l){function o(e){try{u(n.next(e))}catch(t){l(t)}}function i(e){try{u(n.throw(e))}catch(t){l(t)}}function u(e){e.done?a(e.value):new r(function(t){t(e.value)}).then(o,i)}u((n=n.apply(e,t||[])).next())})};t.FormDeleteButton=(({confirmText:e,onDelete:t})=>a.default.createElement(l.Field,{field:"id"},r=>"NEW"!==r.value&&a.default.createElement(o.Route,null,({history:n})=>a.default.createElement(i.TouchButtonDelete,{confirmText:e,onDelete:()=>u(void 0,void 0,void 0,function*(){yield t(r.value),n.goBack()})}))))},7852:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormInputInternalNote=void 0;var n,a=(n=r(0))&&n.__esModule?n:{default:n},l=r(7710),o=r(7709),i=r(71);function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var c=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&(r[n[a]]=e[n[a]])}return r};t.FormInputInternalNote=(e=>{var{field:t="internalNote",icon:r="label_outline",label:n=i.i18n._("Internal note").toLocaleLowerCase()}=e,d=c(e,["field","icon","label"]);return a.default.createElement(o.IconLine,{label:n,labelWidth:7},a.default.createElement(l.FormInputTextBox,u({field:t,inputWidth:22},d)))})},7853:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormInputName=void 0;var n,a=(n=r(0))&&n.__esModule?n:{default:n},l=r(7710),o=r(7709),i=r(71);function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var c=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&(r[n[a]]=e[n[a]])}return r};t.FormInputName=(e=>{var{field:t="nameLabel",icon:r="label"}=e,n=c(e,["field","icon"]);return a.default.createElement(o.IconLine,{icon:r,labelWidth:7},a.default.createElement(l.FormInputTextBox,u({field:t,inputWidth:22,isRequired:!0,validatioName:i.i18n._("Name")},n)))})},7854:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MenuBaseFormLoader=void 0;var n=r(123),a=r(32),l=f(r(0)),o=f(r(45)),i=r(8325),u=r(8326),c=r(49),d=r(47),s=r(71);function f(e){return e&&e.__esModule?e:{default:e}}var m=function(e,t,r,n){return new(r||(r=Promise))(function(a,l){function o(e){try{u(n.next(e))}catch(t){l(t)}}function i(e){try{u(n.throw(e))}catch(t){l(t)}}function u(e){e.done?a(e.value):new r(function(t){t(e.value)}).then(o,i)}u((n=n.apply(e,t||[])).next())})};const p=o.default.div.withConfig({displayName:"ErrorPop"})`
  color: red;
  padding: 1rem;
  max-width: 30rem;
  overflow-wrap: break-word;
`;t.MenuBaseFormLoader=class extends l.default.Component{constructor(){super(...arguments),this.state={submitError:null,validationErrors:null}}renderErrors(){const{submitError:e,validationErrors:t}=this.state;return e?this.renderSubmitError(e):t?this.renderValidationErrors(t):null}renderSubmitError(e){let t=[s.i18n._("Unexpected error while sending form. Out team was notified about the issue.")];if((0,a.isApolloError)(e)){const r=d.RM.propEq("showToUser",!0),n=e.graphQLErrors.filter(r).map(d.RM.prop("message"));n.length&&(t=n)}return this.renderPopover(t)}renderValidationErrors(e){return null}renderPopover(e){return l.default.createElement(n.Popover,{open:!0,anchorEl:()=>document.getElementById("submit-button"),onClose:()=>this.setState({submitError:null,validationErrors:null}),anchorOrigin:{vertical:"bottom",horizontal:"center"}},e.map((e,t)=>l.default.createElement(p,{key:t},e)))}render(){const{isCreate:e,onCreate:t,onUpdate:r,getDefaultValues:n,loadValues:a,loadDefaults:o,children:d}=this.props;return l.default.createElement(u.NavigateBack,{render:u=>l.default.createElement(i.FormLoader,{shouldLoad:!0,defaultValues:n(),loader:()=>m(this,void 0,void 0,function*(){let t=n();if(o){const e=yield o();Object.assign(t,e)}if(e)return t;const r=yield a();return Object.assign({},t,r)}),onChange:e=>(0,c.logForm)("new values",e.values),onSubmit:n=>m(this,void 0,void 0,function*(){e?yield t(n):yield r(n),u()}),onSubmitFailure:(e,t)=>{this.setState({validationErrors:e,submitError:t}),Object.keys(e).length&&(0,c.logError)("validation errors",e),t&&(0,c.logError)("submit error",t)}},d,this.renderErrors())})}}},7855:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useMenu=function(){const{settings:{menu:e}}=(0,n.useRoot)();return e};var n=r(93)},7856:function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.DataTableContainer=void 0;const a=((n=r(45))&&n.__esModule?n:{default:n}).default.div.withConfig({displayName:"DataTableContainer"})`
  height: calc(100% - 4.5rem);
  padding-top: 2rem;
`;t.DataTableContainer=a},7931:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CategoryListTable=void 0;var n,a=(n=r(0))&&n.__esModule?n:{default:n},l=r(7725),o=r(7789),i=r(71),u=r(7933),c=r(5801);function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}t.CategoryListTable=(({categories:e,onToggle:t,onRemove:r,onSort:n,showEditColumn:s=!0,showRemoveColumn:f=!1,showVisibilityColumn:m=!1,showHeader:p=!0,isSortable:y=!1,isLoading:g=!1,heightStretch:h=!1,noRowsDisplay:v=(()=>a.default.createElement(l.DataTableEmptyText,{text:i.i18n._("No recipes in category")}))})=>{const b={isLoading:g,items:e,disableHeader:!p,noRowsRenderer:()=>v};return a.default.createElement(({children:e})=>y?a.default.createElement(u.SortableDataTable,d({heightStretch:h,onSort:n},b),e):a.default.createElement(l.DataTable,d({heightStretch:h},b),e),null,s&&a.default.createElement(l.Column,{dataKey:"id",width:60,cellRenderer:(0,l.checkColumnAccess)({canQuery:"wareCategory"},l.ColumnRendererEdit),cellDataGetter:({rowData:e})=>(0,c.getCategoryRoute)(e.id,e.categoryType.enum)}),f&&a.default.createElement(l.Column,{dataKey:"id",width:60,cellRenderer:l.ColumnRendererRemove,columnData:{onRemove:r}}),m&&a.default.createElement(l.Column,{dataKey:"visible",width:60,cellRenderer:(0,l.checkColumnAccess)({canMutate:"updateWareCategory"},l.ColumnRendererVisibility),columnData:{onToggle:t}}),a.default.createElement(l.Column,{dataKey:"nameLabel",width:300,label:i.i18n._("Name"),cellRenderer:l.ColumnRendererWithNote,columnData:{noteKey:"internalNoteLabel"}}),a.default.createElement(l.Column,{dataKey:"countRecipes",label:i.i18n._("Recipe count"),width:100,cellRenderer:({cellData:e})=>`${e} ${i.i18n._("Recipes").toLocaleLowerCase()}`}),y&&a.default.createElement(l.Column,{dataKey:"id",width:50,cellRenderer:()=>a.default.createElement(o.DragHandle,null)}))})},7932:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TouchButtonRemove=void 0;var n,a=(n=r(0))&&n.__esModule?n:{default:n},l=r(46),o=r(5777);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var u=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&(r[n[a]]=e[n[a]])}return r};t.TouchButtonRemove=(e=>{var t=u(e,[]);return a.default.createElement(o.TouchButton,i({iconName:"remove_circle_outline",width:l.Spacing.ButtonHeight,height:l.Spacing.ButtonHeight},t))})},7933:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SortableDataTable=void 0;var n,a=(n=r(0))&&n.__esModule?n:{default:n},l=r(7762),o=r(7725);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var u=function(e,t,r,n){return new(r||(r=Promise))(function(a,l){function o(e){try{u(n.next(e))}catch(t){l(t)}}function i(e){try{u(n.throw(e))}catch(t){l(t)}}function u(e){e.done?a(e.value):new r(function(t){t(e.value)}).then(o,i)}u((n=n.apply(e,t||[])).next())})},c=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&(r[n[a]]=e[n[a]])}return r};const d=(0,l.SortableElement)(({columns:e,style:t,className:r})=>a.default.createElement("div",{style:t,className:r},e)),s=(0,l.SortableContainer)(o.DataTable);class f extends a.default.Component{constructor(){super(...arguments),this.state={sortedItems:this.props.items},this.onHandleSorting=(({newIndex:e,oldIndex:t})=>u(this,void 0,void 0,function*(){const r=[...this.state.sortedItems],n=(0,l.arrayMove)(this.state.sortedItems,t,e);if(this.setState({sortedItems:n}),this.props.onSort){const a=this.props.onSort({item:r[t],items:n,offset:e-t,newIndex:e,oldIndex:t});a&&!(yield a)&&this.setState({sortedItems:r})}}))}render(){const e=this.props,{items:t,isLoading:r}=e,n=c(e,["items","isLoading"]);return a.default.createElement(s,i({useDragHandle:!0,lockAxis:"y",lockToContainerEdges:!0,onSortEnd:this.onHandleSorting,rowRenderer:e=>a.default.createElement(d,e),isLoading:r},n,{items:this.state.sortedItems}))}}t.SortableDataTable=f,f.getDerivedStateFromProps=(e=>({sortedItems:e.items}))},7934:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecipeListTable=void 0;var n,a=(n=r(0))&&n.__esModule?n:{default:n},l=r(7786),o=r(7725),i=r(7789),u=r(7715),c=r(148),d=r(47),s=r(71),f=r(7933),m=r(7935),p=r(5802);function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function g({cellData:e,columnData:{priceType:t}}){const r=e.find(d.RM.pathEq(["priceType","enum"],t));return r?r.price.formattedValue:a.default.createElement("i",null,s.i18n._("Not set").toLocaleLowerCase())}function h({rowData:e}){const t=e.recipeType.enum;return t===c.WareCategoryTypeEnum.SideDish?s.i18n._("Sidedish").toLocaleLowerCase():t===c.WareCategoryTypeEnum.Cover?s.i18n._("Cover").toLocaleLowerCase():s.i18n._("Ware").toLocaleLowerCase()}t.RecipeListTable=(({recipes:e,onToggle:t,onRemove:r,onSortRecipe:n,showEditColumn:c=!0,showRemoveColumn:d=!1,showVisibilityColumn:v=!0,showTypeColumn:b=!1,isSortable:E=!1,isLoading:_=!1,heightStretch:C=!1})=>{const O={isLoading:_,items:e,heightStretch:C,noRowsRenderer:()=>_?a.default.createElement(l.BulletList,null):a.default.createElement(u.Headline,null,s.i18n._("No recipes has been found"))};return a.default.createElement(({children:e})=>E?a.default.createElement(f.SortableDataTable,y({onSort:n},O),e):a.default.createElement(o.DataTable,O,e),null,c&&a.default.createElement(o.Column,{dataKey:"id",width:60,cellRenderer:(0,o.checkColumnAccess)({canQuery:"recipe"},o.ColumnRendererEdit),cellDataGetter:({rowData:e})=>(0,p.getRecipeRoute)(e.id,e.recipeType.enum)}),d&&a.default.createElement(o.Column,{dataKey:"id",width:60,cellRenderer:o.ColumnRendererRemove,columnData:{onRemove:r}}),v&&a.default.createElement(o.Column,{dataKey:"visible",width:60,cellRenderer:(0,o.checkColumnAccess)({canMutate:"updateRecipe"},o.ColumnRendererVisibility),columnData:{onToggle:t}}),b&&a.default.createElement(o.Column,{dataKey:"recipeType",width:100,label:s.i18n._("Type"),cellRenderer:h}),a.default.createElement(o.Column,{dataKey:"code",width:100,label:s.i18n._("Code")}),a.default.createElement(o.Column,{dataKey:"nameLabel",width:300,label:s.i18n._("Name"),cellRenderer:o.ColumnRendererWithNote,columnData:{noteKey:"internalNote"}}),a.default.createElement(o.Column,{dataKey:"prices",width:150,label:s.i18n._("Delivery sale"),cellRenderer:g,columnData:{priceType:m.TPriceType.Delivery}}),a.default.createElement(o.Column,{dataKey:"prices",width:150,label:s.i18n._("Local sale"),cellRenderer:g,columnData:{priceType:m.TPriceType.Inhouse}}),a.default.createElement(o.Column,{dataKey:"availableAmount",label:s.i18n._("recipe.list.availableAmount",{},{defaults:"Stock"}),width:100}),a.default.createElement(o.Column,{dataKey:"internalNote",label:s.i18n._("Internal note"),width:200}),E&&a.default.createElement(o.Column,{dataKey:"id",width:50,cellRenderer:()=>a.default.createElement(i.DragHandle,null)}))})},7935:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"TRecipeType",{enumerable:!0,get:function(){return n.WareCategoryTypeEnum}}),Object.defineProperty(t,"TPriceType",{enumerable:!0,get:function(){return n.WarePriceTypeEnum}});var n=r(148)},7936:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MenuFilterInput=void 0;var n,a=r(273),l=(n=r(0))&&n.__esModule?n:{default:n},o=r(7710),i=r(7709),u=r(93),c=r(7804),d=r(71);t.MenuFilterInput=(({modelType:e})=>{const{settings:{menu:t}}=(0,u.useRoot)(),r=t[e],n=(0,c.useDebounceCallback)(r.setFilterInput);return l.default.createElement(i.IconLine,{icon:a.Search},l.default.createElement(o.FormInputStyled,{onChange:e=>n(e.target.value),placeholder:d.i18n._("Filter by name or code")}))})},7937:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IsCategoryType=void 0;var n,a=(n=r(0))&&n.__esModule?n:{default:n},l=r(148);t.IsCategoryType=(({type:e,isMain:t,isSideDish:r,isCover:n,children:o})=>!0===t&&e===l.WareCategoryTypeEnum.Main||!0===r&&e===l.WareCategoryTypeEnum.SideDish||!0===n&&e===l.WareCategoryTypeEnum.Cover?a.default.createElement(a.default.Fragment,null,o):null)},7938:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormInputCode=void 0;var n,a=(n=r(0))&&n.__esModule?n:{default:n},l=r(7710),o=r(7709),i=r(71);function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var c=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&(r[n[a]]=e[n[a]])}return r};t.FormInputCode=(e=>{var{field:t="code",icon:r="label_outline",isRequired:n=!0}=e,d=c(e,["field","icon","isRequired"]);return a.default.createElement(o.IconLine,{label:i.i18n._("Code").toLocaleLowerCase(),labelWidth:7},a.default.createElement(l.FormInputTextBox,u({field:t,width:9,isRequired:!0,validatioName:i.i18n._("Code")},d)))})},7939:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MenuAllergenIndicator=void 0;var n,a=(n=r(0))&&n.__esModule?n:{default:n},l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(r(45)),o=r(46),i=r(8339);function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}const c=l.default.div.withConfig({displayName:"AllergenBox"})`
  float: left;
  width: 2rem;
  height: 2rem;
  border: 1px solid ${o.Colors.greyMiddle};
  margin: 0.3rem 0.6rem 0.3rem 0;
  font-size: 1.5rem;
  text-align: center;
  vertical-align: center;
  cursor: default;
  ${({active:e})=>l.css`
    color: ${e?o.Colors.black:o.Colors.greyMiddle};
    background-color: ${e?o.Colors.yellow:o.Colors.white};
  `};
`;t.MenuAllergenIndicator=(({selected:e,onToggle:t})=>a.default.createElement(i.QueryAllergens,{render:({allergens:r})=>a.default.createElement(a.default.Fragment,null,r.map(r=>{const n={active:e.includes(r.enum),onClick:t&&(()=>t(r.enum))};return a.default.createElement(c,u({key:r.enum,title:r.code},n),r.category)}))}))},8311:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MenuRoutes=void 0;var n,a=(n=r(0))&&n.__esModule?n:{default:n},l=r(24),o=r(275),i=r(276),u=r(8312),c=r(8318),d=r(8329),s=r(8333),f=r(8350),m=r(8359),p=r(8362);const y=({match:e})=>a.default.createElement(l.Switch,null,a.default.createElement(i.SecureRoute,{exact:!0,path:e.path,render:()=>a.default.createElement(l.Redirect,{to:`${e.path}/category`})}),a.default.createElement(i.SecureRoute,{exact:!0,path:`${e.path}/category`,component:u.MenuCategoryListPage}),a.default.createElement(i.SecureRoute,{path:`${e.path}/category/:categoryId`,render:({match:{params:e},location:{state:t}})=>a.default.createElement(c.MenuCategoryPage,{categoryId:"create"===e.categoryId?null:e.categoryId,categoryType:t.categoryType})}),a.default.createElement(i.SecureRoute,{exact:!0,path:`${e.path}/recipe`,component:d.MenuRecipeListPage}),a.default.createElement(i.SecureRoute,{path:`${e.path}/recipe/:recipeId`,render:({match:{params:e},location:{state:t}})=>a.default.createElement(s.MenuRecipePage,{recipeId:"create"===e.recipeId?null:e.recipeId,recipeType:t.recipeType})}),a.default.createElement(i.SecureRoute,{exact:!0,path:`${e.path}/stock`,component:m.MenuStockListPage}),a.default.createElement(i.SecureRoute,{path:`${e.path}/stock/deposit`,component:f.MenuStockDepositPage}),a.default.createElement(i.SecureRoute,{path:`${e.path}/stock/:stockId`,render:({match:{params:e}})=>a.default.createElement(p.MenuStockPage,{stockId:"create"===e.stockId?null:e.stockId})}),a.default.createElement(l.Route,{component:o.NotFoundPage}));t.MenuRoutes=y;var g=y;t.default=g},8312:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MenuCategoryListPage=t.PartialDataTableContainer=void 0;var n=m(r(0)),a=m(r(45)),l=r(5781),o=r(7722),i=r(148),u=r(71),c=r(5783),d=r(7717),s=r(7748),f=r(8313);function m(e){return e&&e.__esModule?e:{default:e}}const p=a.default.div.withConfig({displayName:"PartialDataTableContainer"})`
  height: calc(100% - 3.5rem);
  padding-top: 1rem;
  overflow-y: scroll;
  overflow-x: hidden;
  -webkit-overflow-scrolling: touch;
`;t.PartialDataTableContainer=p;t.MenuCategoryListPage=(e=>n.default.createElement(n.default.Fragment,null,n.default.createElement(c.FullPageLayout,{pageTitle:u.i18n._("Category overview"),useBackButton:!0}),n.default.createElement(d.PageLayoutFullHeightItem,null,n.default.createElement(l.Card,{stretchToParent:!0},n.default.createElement(s.SettingsCompanyBranchPicker,{width:20}),n.default.createElement(p,null,n.default.createElement(f.CategoryList,{categoryType:i.WareCategoryTypeEnum.Main,headline:u.i18n._("Category of recipes"),heightStretch:!1}),n.default.createElement(o.VerticalGap,{size:1.5}),n.default.createElement(f.CategoryList,{categoryType:i.WareCategoryTypeEnum.SideDish,headline:u.i18n._("Category of sidedish"),heightStretch:!1}),n.default.createElement(o.VerticalGap,{size:1.5}),n.default.createElement(f.CategoryList,{categoryType:i.WareCategoryTypeEnum.Cover,headline:u.i18n._("Category of covers"),heightStretch:!1}))))))},8313:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CategoryList=void 0;var n,a=(n=r(0))&&n.__esModule?n:{default:n},l=r(7724),o=r(7718),i=r(7715),u=r(95),c=r(5801),d=r(7931),s=r(7848),f=r(288);function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}t.CategoryList=(({headline:e,subHeadline:t=!1,categoryType:r,heightStretch:n=!1})=>a.default.createElement(a.default.Fragment,null,a.default.createElement(o.FlexRowSingle,null,a.default.createElement(l.FlexColumn,{widthGrowIndex:1},a.default.createElement(i.Headline,null,e),t&&a.default.createElement(i.Headline,{size:"smaller"},t)),a.default.createElement(l.FlexColumn,{fixedWidth:!0},a.default.createElement(s.CreateButton,{routeTo:(0,c.getCategoryRoute)("create",r)}))),a.default.createElement(u.WithRoot,{render:({settings:e})=>a.default.createElement(f.QueryCategoryList,m({},e.getQueryProps({categoryType:r}),{renderLoading:!0,render:({wareCategories:t})=>a.default.createElement(d.CategoryListTable,{categories:t,onToggle:e.menu.category.changeVisibility,isSortable:!0,showHeader:!1,heightStretch:n,showVisibilityColumn:!0,onSort:({item:t,offset:r})=>{e.menu.category.sortCategory(t.id,r)}})}))})))},8314:function(e,t,r){},8316:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TouchButtonEdit=void 0;var n,a=(n=r(0))&&n.__esModule?n:{default:n},l=r(7760),o=r(46),i=r(5777);function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var c=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&(r[n[a]]=e[n[a]])}return r};t.TouchButtonEdit=(e=>{var{target:t,Link:r=l.RelativeLink}=e,n=c(e,["target","Link"]);return a.default.createElement(r,{to:t},a.default.createElement(i.TouchButton,u({iconName:"mode_edit",width:o.Spacing.ButtonHeight,height:o.Spacing.ButtonHeight},n)))})},8317:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TouchButtonVisibility=void 0;var n,a=(n=r(0))&&n.__esModule?n:{default:n},l=r(5777),o=r(46);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var u=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&(r[n[a]]=e[n[a]])}return r};t.TouchButtonVisibility=(e=>{var{isVisible:t}=e,r=u(e,["isVisible"]);return a.default.createElement(l.TouchButton,i({iconName:"remove_red_eye",width:o.Spacing.ButtonHeight,height:o.Spacing.ButtonHeight,iconColor:t?o.Colors.white:o.Colors.greyMiddle,color:o.Colors.greyMiddle},r))})},8318:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MenuCategoryPage=t.FormStretchedRow=t.FormFixedRow=t.FormContainer=void 0;var n=r(122),a=v(r(0)),l=v(r(45)),o=r(7711),i=r(5781),u=r(7715),c=r(148),d=r(71),s=r(5783),f=r(7717),m=r(7849),p=r(7850),y=r(8319),g=r(8324),h=r(8327);function v(e){return e&&e.__esModule?e:{default:e}}const b={[c.WareCategoryTypeEnum.Main]:(0,n.i18nMark)("Ware categories"),[c.WareCategoryTypeEnum.SideDish]:(0,n.i18nMark)("Sidedish categories"),[c.WareCategoryTypeEnum.Cover]:(0,n.i18nMark)("Cover categories")},E=l.default.div.withConfig({displayName:"FormContainer"})`
  display: flex;
  flex-direction: column;
  height: 100%;
  width: 100%;
`;t.FormContainer=E;const _=l.default.div.withConfig({displayName:"FormFixedRow"})`
  flex: 0 0 8rem;
`;t.FormFixedRow=_;const C=l.default.div.withConfig({displayName:"FormStretchedRow"})`
  flex: 1 1 0;
  min-height: 0;
  position: relative;
`;t.FormStretchedRow=C;t.MenuCategoryPage=(({categoryId:e,categoryType:t})=>a.default.createElement(g.CategoryFormLoader,{categoryId:e,categoryType:t},a.default.createElement(a.default.Fragment,null,a.default.createElement(s.FullPageLayout,{pageTitle:d.i18n._(b[t]),hideLogoutWidget:!0,useBackButton:!0},a.default.createElement(m.TopRightButtonContainer,null,a.default.createElement(o.CanMutate,{mutationName:null===e?"createWareCategory":"updateWareCategory"},a.default.createElement(p.SubmitButton,{isCreate:null===e})))),a.default.createElement(f.PageLayoutFullHeightItem,null,a.default.createElement(E,null,a.default.createElement(_,null,a.default.createElement(i.Card,null,a.default.createElement(y.CategoryBasicForm,{categoryType:t}))),a.default.createElement(C,null,a.default.createElement(i.Card,{stretchToParent:!0},a.default.createElement(u.Headline,null,a.default.createElement(n.Trans,{id:"Recipes assigned to this category"})),a.default.createElement(h.CategoryRecipesView,{categoryType:t}))))))))},8319:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CategoryBasicForm=void 0;var n,a=(n=r(0))&&n.__esModule?n:{default:n},l=r(7790),o=r(7783),i=r(148),u=r(71),c=r(7728),d=r(8320),s=r(7851),f=r(7852),m=r(7853);t.CategoryBasicForm=(({categoryType:e})=>a.default.createElement(l.FormContainer,null,a.default.createElement(l.FormColumn,null,a.default.createElement(m.FormInputName,{placeholder:u.i18n._("Category name"),inputWidth:22}),a.default.createElement(f.FormInputInternalNote,{placeholder:u.i18n._("Category internal note"),inputWidth:22}),a.default.createElement(o.FormInputCheckbox,{field:"visible",label:u.i18n._("To show this category")})),e===i.WareCategoryTypeEnum.Main?a.default.createElement(l.FormColumn,null,a.default.createElement(d.MenuCategoryPictogramSelect,{field:"pictogram"})):null,a.default.createElement(l.FormColumn,null,a.default.createElement(c.WithSettings,{render:({menu:t})=>a.default.createElement(s.FormDeleteButton,{confirmText:u.i18n._("Remove this category?"),onDelete:r=>t.category.deleteCategory(r,e)})}))))},8320:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MenuCategoryPictogramSelect=void 0;var n,a=r(8321),l=(n=r(0))&&n.__esModule?n:{default:n},o=r(7708),i=r(8323),u=r(7716),c=r(47);t.MenuCategoryPictogramSelect=(({field:e})=>l.default.createElement(o.Field,{field:e,pure:!0},e=>l.default.createElement(u.SelectControl,{value:e.value?{pictogram:e.value}:null,onChange:t=>{t&&!Array.isArray(t)&&e.setValue(t.pictogram)},options:a.pictograms.map(e=>({pictogram:e})),getOptionValue:c.RM.prop("pictogram"),formatOptionLabel:({pictogram:e})=>l.default.createElement(i.PictogramDisplay,{pictogramId:e,fontSize:2}),components:{SingleValue:({data:e})=>l.default.createElement(i.PictogramDisplay,{pictogramId:e.pictogram,fontSize:4})},styles:{container:e=>Object.assign({},e,{width:"8rem"}),menuList:e=>Object.assign({},e,{maxHeight:"35rem"})},isClearable:!1,isSearchable:!1,minWidth:8})))},8321:function(e,t,r){t.pictograms=r(8322)},8322:function(e,t){e.exports=["pizza","beans","cheese","hot-pepper","smoking-barbecue","meat-pie","sausage","hot-dog","fruit","fruit-1","fruit-2","strawberry","soup","noodles","ramen","rice","spaghetti","food","piece-of-cake","beer","marshmallow","cake","banana-split","ice-cream","cookie","doughnut","cupcake","kebab","steak","fish","fondue","shrimp","berry","food","food-1","food-2","food-3","food-4","food-5","food-6","food-7","food-8","food-9","food-10","food-11","food-12","food-13","food-14","food-15","food-16","food-17","food-18","food-19","food-20","food-21","food-22","food-23","food-24","food-25","food-26","food-27","food-28","food-29","food-30","drink","drink-1","drink-2","drink-3","drink-4","drink-5","cup","cup-1","cup-2","whisky"]},8323:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PictogramDisplay=void 0;var n=a(r(0));function a(e){return e&&e.__esModule?e:{default:e}}const l=a(r(45)).default.div.withConfig({displayName:"PictogramDisplayStyled"})`
  &:before {
    font-size: ${function({fontSize:e=2,fontSizeUnit:t="rem"}){return`${e}${t}`}} !important;
    margin-left: 0.5rem !important;
  }
`;t.PictogramDisplay=(({pictogramId:e,fontSize:t=2,fontSizeUnit:r="rem"})=>n.default.createElement(l,{className:function(e){return`flaticon-${e}`}(e),fontSize:t,fontSizeUnit:r}))},8324:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CategoryFormLoader=void 0;var n,a=(n=r(0))&&n.__esModule?n:{default:n},l=r(7854),o=r(7855),i=r(5831);var u=function(e,t,r,n){return new(r||(r=Promise))(function(a,l){function o(e){try{u(n.next(e))}catch(t){l(t)}}function i(e){try{u(n.throw(e))}catch(t){l(t)}}function u(e){e.done?a(e.value):new r(function(t){t(e.value)}).then(o,i)}u((n=n.apply(e,t||[])).next())})};t.CategoryFormLoader=(({categoryId:e,categoryType:t,children:r})=>{const n=(0,o.useMenu)();return a.default.createElement(l.MenuBaseFormLoader,{isCreate:null===e,onCreate:e=>n.category.createCategory(e,t),onUpdate:e=>n.category.updateCategory(e,t),getDefaultValues:()=>(function(e){return{id:"NEW",visible:!0,internalNoteLabel:"",pictogram:"",nameLabel:"",categoryType:{enum:e},recipes:[]}})(t),loadValues:()=>u(void 0,void 0,void 0,function*(){const{data:t}=yield n.client.query({query:i.MenuCategoryFormQuery,variables:{categoryId:e},fetchPolicy:"no-cache"});return t.wareCategory})},r)})},8325:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormLoader=function(e){var{shouldLoad:t,loader:r}=e,i=o(e,["shouldLoad","loader"]);const[u,c]=(0,n.useState)(null);return(0,n.useEffect)(()=>{t&&r().then(c)},[t]),n.default.createElement(a.Form,l({values:u},i))};var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(r(0)),a=r(7708);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var o=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&(r[n[a]]=e[n[a]])}return r}},8326:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NavigateBack=void 0;var n,a=(n=r(0))&&n.__esModule?n:{default:n},l=r(24);t.NavigateBack=(({render:e})=>a.default.createElement(l.Route,null,({history:t})=>e?e(()=>t.goBack()):(t.goBack(),null)))},8327:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CategoryRecipesView=t.FormStretchedRow=t.FormFixedRow=t.FormContainer=void 0;var n=c(r(0)),a=r(7708),l=c(r(45)),o=r(47),i=r(7934),u=r(8328);function c(e){return e&&e.__esModule?e:{default:e}}const d=l.default.div.withConfig({displayName:"FormContainer"})`
  display: flex;
  flex-direction: column;
  height: 96%;
  width: 100%;
`;t.FormContainer=d;const s=l.default.div.withConfig({displayName:"FormFixedRow"})`
  flex: 0 0 auto;
`;t.FormFixedRow=s;const f=l.default.div.withConfig({displayName:"FormStretchedRow"})`
  flex: 1 1 0;
  min-height: 0;
  position: relative;
`;t.FormStretchedRow=f;t.CategoryRecipesView=(({categoryType:e})=>n.default.createElement(a.Field,{field:"recipes"},t=>n.default.createElement(d,null,n.default.createElement(s,null,n.default.createElement(u.RecipeSuggestionPanel,{categoryType:e,filterRecipes:o.RM.without(t.value),onAdd:e=>t.setValue(t.value.concat(e))})),n.default.createElement(f,null,n.default.createElement(i.RecipeListTable,{recipes:t.value,isSortable:!0,showRemoveColumn:!0,showEditColumn:!1,showVisibilityColumn:!1,heightStretch:!0,onRemove:e=>t.setValue(o.RM.reject(o.RM.propEq("id",e),t.value)),onSortRecipe:({items:e})=>{t.setValue(e)}})))))},8328:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecipeSuggestionPanel=void 0;var n,a=(n=r(0))&&n.__esModule?n:{default:n},l=r(7728),o=r(7791),i=r(5804);function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}t.RecipeSuggestionPanel=(({categoryType:e,filterRecipes:t,onAdd:r})=>a.default.createElement(l.WithSettings,{observe:!0,render:n=>a.default.createElement(i.QueryRecipeList,u({},n.getQueryProps({categoryType:e}),{fetchPolicy:"cache-and-network",render:({recipes:e})=>a.default.createElement(o.MenuSuggestionPanel,{options:t(e),onAdd:r})}))}))},8329:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MenuRecipeListPage=void 0;var n,a=(n=r(0))&&n.__esModule?n:{default:n},l=r(7711),o=r(5781),i=r(7856),u=r(7724),c=r(7718),d=r(71),s=r(5783),f=r(7717),m=r(7748),p=r(7936),y=r(8330),g=r(8332);t.MenuRecipeListPage=(e=>a.default.createElement(a.default.Fragment,null,a.default.createElement(s.FullPageLayout,{pageTitle:d.i18n._("Recipe overview"),useBackButton:!0}),a.default.createElement(f.PageLayoutFullHeightItem,null,a.default.createElement(o.Card,{stretchToParent:!0},a.default.createElement(c.FlexRowSingle,{justify:"start"},a.default.createElement(u.FlexColumn,null,a.default.createElement(m.SettingsCompanyBranchPicker,{width:20})),a.default.createElement(u.FlexColumn,null,a.default.createElement(p.MenuFilterInput,{modelType:"recipe"}))),a.default.createElement(l.CanMutate,{mutationName:"createRecipe"},a.default.createElement(y.RecipeTypeSelection,null)),a.default.createElement(i.DataTableContainer,null,a.default.createElement(g.RecipeListLoader,null))))))},8330:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecipeTypeSelection=void 0;var n=r(122),a=r(123),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(r(0)),o=r(8331),i=r(148),u=r(5777),c=r(5802),d=r(7848);t.RecipeTypeSelection=class extends l.Component{constructor(){super(...arguments),this.state={isOpen:!1,recipeType:null},this.onClose=(()=>{this.setState({isOpen:!1})}),this.onOpen=(()=>{this.setState({isOpen:!0})}),this.onSelect=(e=>()=>{this.setState({isOpen:!0,recipeType:e})})}render(){const{isOpen:e,recipeType:t}=this.state;return l.default.createElement(l.default.Fragment,null,null!==t&&l.default.createElement(o.RelativeRedirect,{to:(0,c.getRecipeRoute)("create",t),push:!0}),l.default.createElement(d.CreateButton,{onClick:e=>{e.preventDefault(),this.onOpen()}}),l.default.createElement(a.Dialog,{open:e,onClose:this.onClose},l.default.createElement(a.DialogTitle,null,"Select item type"),l.default.createElement(u.TouchButton,{onClick:this.onSelect(i.WareCategoryTypeEnum.Main)},l.default.createElement(n.Trans,{id:"Ware"})),l.default.createElement(u.TouchButton,{onClick:this.onSelect(i.WareCategoryTypeEnum.SideDish)},l.default.createElement(n.Trans,{id:"Sidedish"})),l.default.createElement(u.TouchButton,{onClick:this.onSelect(i.WareCategoryTypeEnum.Cover)},l.default.createElement(n.Trans,{id:"Cover"}))))}}},8331:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RelativeRedirect=void 0;var n,a=(n=r(0))&&n.__esModule?n:{default:n},l=r(149),o=r(7760);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var u=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&(r[n[a]]=e[n[a]])}return r};t.RelativeRedirect=(e=>{var{to:t,from:r}=e,n=u(e,["to","from"]);return a.default.createElement(l.Redirect,i({to:(0,o.resolveLocation)(t,r||`${location.pathname}/`),from:r},n))})},8332:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecipeListLoader=void 0;var n,a=r(94),l=(n=r(0))&&n.__esModule?n:{default:n},o=r(279),i=r(93),u=r(7755),c=r(47),d=r(7934),s=r(5804);const f=(0,a.observer)(()=>{const{settings:e}=(0,i.useRoot)(),{data:t,loading:r}=(0,o.useQuery)(s.MenuRecipeListQuery,Object.assign({},e.queryProps,{suspend:!1})),n=(0,a.useComputed)(()=>{if(!t.recipes||0===t.recipes.length)return[];const r=(0,u.isPartialMatch)(e.menu.recipe.filterInput);return t.recipes.filter(c.RM.cond([[c.RM.propSatisfies(r,"code"),c.RM.T],[c.RM.propSatisfies(r,"nameLabel"),c.RM.T]]))},[t&&t.recipes]);return l.default.createElement(d.RecipeListTable,{recipes:n,onToggle:e.menu.recipe.changeVisibility,isLoading:r,heightStretch:!0,showTypeColumn:!0})});t.RecipeListLoader=f},8333:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MenuRecipePage=void 0;var n,a=r(122),l=(n=r(0))&&n.__esModule?n:{default:n},o=r(7711),i=r(5781),u=r(7725),c=r(7715),d=r(7722),s=r(148),f=r(71),m=r(5783),p=r(7849),y=r(7937),g=r(7850),h=r(8334),v=r(8336),b=r(8340),E=r(8341),_=r(8348);const C={[s.WareCategoryTypeEnum.Main]:(0,a.i18nMark)("Ware recipe"),[s.WareCategoryTypeEnum.SideDish]:(0,a.i18nMark)("Sidedish recipe"),[s.WareCategoryTypeEnum.Cover]:(0,a.i18nMark)("Cover recipe")};t.MenuRecipePage=(({recipeId:e,recipeType:t})=>l.default.createElement(m.FullPageLayout,{width:15,pageTitle:f.i18n._(C[t]),hideLogoutWidget:!0,useBackButton:!0},l.default.createElement(b.RecipeFormLoader,{recipeId:e,recipeType:t},l.default.createElement(p.TopRightButtonContainer,null,l.default.createElement(o.CanMutate,{mutationName:null===e?"createRecipe":"updateRecipe"},l.default.createElement(g.SubmitButton,{isCreate:null===e}))),l.default.createElement(i.Card,null,l.default.createElement(v.RecipeFormBasic,{recipeType:t})),l.default.createElement(i.Card,null,l.default.createElement(E.RecipeFormPricing,{recipeType:t,recipeId:e})),l.default.createElement(y.IsCategoryType,{type:t,isMain:!0},l.default.createElement(i.Card,null,l.default.createElement(c.Headline,null,l.default.createElement(a.Trans,{id:"Recipe ingredients"})),l.default.createElement(d.VerticalGap,null),l.default.createElement(_.RecipeIngredientsView,null)),l.default.createElement(i.Card,null,l.default.createElement(c.Headline,null,l.default.createElement(a.Trans,{id:"Sidedish categories"})),l.default.createElement(u.NoteText,null,l.default.createElement(a.Trans,{id:"These sidedish are presented with recipe"})),l.default.createElement(h.RecipeCategoryView,{categoryType:s.WareCategoryTypeEnum.SideDish,field:"sideDishes",addButtonText:f.i18n._("Attach sidedish category"),noRowsText:f.i18n._("Recipe has no sidedish category attached")})),l.default.createElement(i.Card,null,l.default.createElement(c.Headline,null,l.default.createElement(a.Trans,{id:"Category assignments"})),l.default.createElement(u.NoteText,null,l.default.createElement(a.Trans,{id:"Recipe is in these categories"})),l.default.createElement(h.RecipeCategoryView,{categoryType:s.WareCategoryTypeEnum.Main,field:"categories",addButtonText:f.i18n._("Add to category"),noRowsText:f.i18n._("Recipe is not in any category")}))))))},8334:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecipeCategoryView=void 0;var n,a=(n=r(0))&&n.__esModule?n:{default:n},l=r(7708),o=r(7725),i=r(47),u=r(7931),c=r(8335);t.RecipeCategoryView=(({categoryType:e,addButtonText:t,noRowsText:r,field:n})=>a.default.createElement(l.Field,{field:n},n=>a.default.createElement(a.default.Fragment,null,a.default.createElement(u.CategoryListTable,{categories:n.value,showRemoveColumn:!0,showEditColumn:!1,showHeader:!1,onRemove:e=>n.setValue(i.RM.reject(i.RM.propEq("id",e),n.value)),noRowsDisplay:a.default.createElement(o.DataTableEmptyText,{text:r})}),a.default.createElement(c.CategorySuggestionPanel,{addButtonText:t,categoryType:e,currentCategories:n.value,onAdd:e=>n.setValue(n.value.concat(e))}))))},8335:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CategorySuggestionPanel=void 0;var n,a=(n=r(0))&&n.__esModule?n:{default:n},l=r(47),o=r(7728),i=r(7791),u=r(288);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}t.CategorySuggestionPanel=(({categoryType:e,currentCategories:t,addButtonText:r,onAdd:n})=>a.default.createElement(o.WithSettings,{observe:!0,render:o=>a.default.createElement(u.QueryCategoryList,c({},o.getQueryProps({categoryType:e}),{fetchPolicy:"cache-and-network",render:({wareCategories:e})=>a.default.createElement(i.MenuSuggestionPanel,{onAdd:n,options:l.RM.without(t,e),addButtonText:r})}))}))},8336:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecipeFormBasic=void 0;var n,a=(n=r(0))&&n.__esModule?n:{default:n},l=r(7790),o=r(7783),i=r(7709),u=r(148),c=r(71),d=r(7728),s=r(7937),f=r(7851),m=r(7938),p=r(8337),y=r(7852),g=r(7853),h=r(8338);t.RecipeFormBasic=(({recipeType:e})=>{const t=e===u.WareCategoryTypeEnum.Main;return a.default.createElement(l.FormContainer,null,a.default.createElement(l.FormColumn,null,a.default.createElement(g.FormInputName,{placeholder:c.i18n._("Recipe name")}),a.default.createElement(m.FormInputCode,{placeholder:c.i18n._("Recipe code")}),a.default.createElement(y.FormInputInternalNote,{placeholder:c.i18n._("Recipe internal note")}),t&&a.default.createElement(p.FormInputDescription,{placeholder:c.i18n._("Public note for customers, allergens")}),a.default.createElement(s.IsCategoryType,{type:e,isMain:!0},a.default.createElement(i.IconLine,{labelWidth:7,icon:"error_outline"},c.i18n._("Allergens based on stock cards"),a.default.createElement("br",null),a.default.createElement(h.RecipeAllergenDisplay,null))),a.default.createElement(i.IconLine,{labelWidth:7},a.default.createElement(o.FormInputCheckbox,{field:"visible",label:c.i18n._("To show this recipe")}))),a.default.createElement(l.FormColumn,null,a.default.createElement(d.WithSettings,{render:({menu:e})=>a.default.createElement(f.FormDeleteButton,{confirmText:c.i18n._("Remove this recipe?"),onDelete:t=>e.recipe.deleteRecipe(t)})})))})},8337:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormInputDescription=void 0;var n,a=(n=r(0))&&n.__esModule?n:{default:n},l=r(7710),o=r(7709),i=r(71);function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var c=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&(r[n[a]]=e[n[a]])}return r};t.FormInputDescription=(e=>{var{field:t="descriptionLabel",icon:r="label_outline"}=e,n=c(e,["field","icon"]);return a.default.createElement(o.IconLine,{label:i.i18n._("Public note").toLocaleLowerCase(),labelWidth:7},a.default.createElement(l.FormInputTextBox,u({field:t,inputWidth:22},n)))})},8338:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecipeAllergenDisplay=void 0;var n,a=(n=r(0))&&n.__esModule?n:{default:n},l=r(7708),o=r(47),i=r(7939);const u=o.RM.pipe(o.RM.map(o.RM.prop("allergens")),o.RM.flatten,o.RM.uniq);t.RecipeAllergenDisplay=(()=>a.default.createElement(l.Field,{field:"ingredients"},({value:e})=>{const t=u(e);return a.default.createElement(i.MenuAllergenIndicator,{selected:t})}))},8339:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QueryAllergens=t.AllergensQuery=void 0;var n,a=(n=r(21))&&n.__esModule?n:{default:n},l=r(61),o=r(5806);const i=a.default`
  query GAllergens {
    allergens {
      ...GAllergen
    }
  }
  ${o.AllergenFragment}
`;t.AllergensQuery=i;const u=(0,l.buildQuery)(i);t.QueryAllergens=u},8340:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecipeFormLoader=void 0;var n,a=(n=r(0))&&n.__esModule?n:{default:n},l=r(148),o=r(47),i=r(7854),u=r(7855),c=r(5803);var d=function(e,t,r,n){return new(r||(r=Promise))(function(a,l){function o(e){try{u(n.next(e))}catch(t){l(t)}}function i(e){try{u(n.throw(e))}catch(t){l(t)}}function u(e){e.done?a(e.value):new r(function(t){t(e.value)}).then(o,i)}u((n=n.apply(e,t||[])).next())})};function s(e){return[l.WarePriceTypeEnum.Delivery,l.WarePriceTypeEnum.Inhouse].reduce((t,r)=>(t[r]=e(r),t),{})}function f(e){return{id:"NEW",code:"",nameLabel:"",internalNote:"",descriptionLabel:"",image:"",visible:!0,recipeType:{enum:e},sourcePrices:[],prices:s(()=>({value:0,vatId:null})),sourceAssociatedRecipes:[],associatedRecipes:[],sourceIngredients:[],ingredients:[],sideDishes:[],categories:[]}}t.RecipeFormLoader=(({recipeId:e,recipeType:t,children:r})=>{const n=(0,u.useMenu)();return a.default.createElement(i.MenuBaseFormLoader,{isCreate:null===e,onCreate:e=>n.recipe.createRecipe(e,t),onUpdate:e=>n.recipe.updateRecipe(e),getDefaultValues:()=>f(t),loadDefaults:()=>d(void 0,void 0,void 0,function*(){const e=yield n.recipe.getDefaultVat(),r=Object.assign({},f(t));return r.prices=s(t=>({value:0,vatId:e[t]})),r}),loadValues:()=>d(void 0,void 0,void 0,function*(){const{data:t}=yield n.client.query({query:c.MenuRecipeFormQuery,variables:{recipeId:e},fetchPolicy:"no-cache"});return r=t.recipe,Object.assign({},r,{associatedRecipes:r.sourceAssociatedRecipes.map(({priceType:e,recipe:t})=>({warePriceType:e.enum,nameLabel:t.nameLabel,associatedRecipe:t.id,formattedPrice:"?"})),ingredients:r.sourceIngredients.map(({quantity:e,stockItem:{id:t,label:r,allergens:n,wareUnit:a}})=>({stockItem:t,label:r,quantity:e,unitLabel:a.code,allergens:n.map(o.RM.prop("enum"))})),prices:s(e=>{const t=r.sourcePrices.find(o.RM.pathEq(["priceType","enum"],e));return t?{value:t.price.value,vatId:t.vat.id}:{value:0,vatId:null}})});var r})},r)})},8341:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecipeFormPricing=t.priceTypes=void 0;var n=r(122),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(r(0)),l=r(7722),o=r(148),i=r(71),u=r(7935),c=r(8342),d=r(8346);const s=[{priceType:o.WarePriceTypeEnum.Delivery,label:(0,n.i18nMark)("Delivery sale")},{priceType:o.WarePriceTypeEnum.Inhouse,label:(0,n.i18nMark)("Local sale")}];t.priceTypes=s;t.RecipeFormPricing=(({recipeType:e,recipeId:t})=>a.default.createElement(a.default.Fragment,null,s.map(({priceType:r,label:n})=>a.default.createElement(a.Fragment,{key:r},a.default.createElement(c.FormPricingField,{priceType:r,label:i.i18n._(n)}),a.default.createElement(l.VerticalGap,null),e===u.TRecipeType.Main&&a.default.createElement(d.RecipeAssociatedView,{priceType:r,recipeId:t})))))},8342:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormPricingField=void 0;var n,a=(n=r(0))&&n.__esModule?n:{default:n},l=r(7708),o=r(7718),i=r(7715),u=r(8343),c=r(8344);t.FormPricingField=(({priceType:e,label:t})=>a.default.createElement(a.default.Fragment,null,a.default.createElement(i.Headline,null,t),a.default.createElement(l.NestedField,{field:["prices",e]},a.default.createElement(o.FlexRowSingle,{justify:"flex-start"},a.default.createElement(u.FormInputPrice,{field:"value"}),a.default.createElement(c.FormInputVatSelect,{field:"vatId"})))))},8343:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormInputPrice=void 0;var n,a=(n=r(0))&&n.__esModule?n:{default:n},l=r(7726),o=r(7710),i=r(7709),u=r(71);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var d=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&(r[n[a]]=e[n[a]])}return r};const s=e=>void 0===e||(0,l.isEmpty)(e+"")||!(0,l.isDecimal)(e+"")?u.i18n._("Price must be a number"):null;t.FormInputPrice=(e=>{var{field:t="price.value",icon:r="toll"}=e,n=d(e,["field","icon"]);return a.default.createElement(i.IconLine,{icon:r},a.default.createElement(o.FormInputTextBox,c({field:t,inputWidth:5,validate:s},n)),"K\u010d")})},8344:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormInputVatSelect=void 0;var n,a=r(5785),l=(n=r(0))&&n.__esModule?n:{default:n},o=r(7765),i=r(7709),u=r(95),c=r(71),d=r(8345);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}const f=a.css`
  margin-left: 5rem;
`;t.FormInputVatSelect=(({field:e="price.vat"})=>l.default.createElement(u.WithRoot,{render:({settings:t})=>l.default.createElement(d.QueryVat,s({},t.queryProps,{renderLoading:!1,render:({vats:t})=>l.default.createElement(i.IconLine,{className:f,label:`${c.i18n._("VAT")}:`},t&&l.default.createElement(o.FormInputFlatSelect,{field:e,items:t,formatItem:({vat:e})=>`${e}%`,isRequired:!0,validationName:c.i18n._("VAT")}))}))}))},8345:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QueryVat=t.VatsQuery=void 0;var n,a=(n=r(21))&&n.__esModule?n:{default:n},l=r(61);const o=a.default`
  query GVats($branchId: ID!) {
    vats(companyBranch: $branchId) {
      id
      vat
    }
  }
`;t.VatsQuery=o;const i=(0,l.buildQuery)(o);t.QueryVat=i},8346:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecipeAssociatedView=void 0;var n,a=(n=r(0))&&n.__esModule?n:{default:n},l=r(7708),o=r(7722),i=r(47),u=r(7728),c=r(7791),d=r(8347),s=r(5803);function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}t.RecipeAssociatedView=(({priceType:e,recipeId:t})=>a.default.createElement(l.Field,{field:"associatedRecipes"},r=>{const n=i.RM.filter(i.RM.propEq("warePriceType",e),r.value),l=i.RM.reject(e=>e.id===t||(e=>n.some(i.RM.propEq("associatedRecipe",e)))(e.id)),m=t=>{r.setValue(r.value.concat({warePriceType:e,associatedRecipe:t.id,nameLabel:t.nameLabel,formattedPrice:"?"}))};return a.default.createElement(a.default.Fragment,null,a.default.createElement(d.RecipeAssocListTable,{recipes:n,onRemove:t=>{r.setValue(i.RM.reject(({associatedRecipe:r,warePriceType:n})=>r===t&&n===e,r.value))}}),a.default.createElement(u.WithSettings,{render:e=>a.default.createElement(s.QueryMenuRecipeFormAssoc,f({},e.queryProps,{render:({recipes:e})=>a.default.createElement(c.MenuSuggestionPanel,{options:l(e),onAdd:m})}))}),a.default.createElement(o.VerticalGap,null))}))},8347:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecipeAssocListTable=void 0;var n,a=(n=r(0))&&n.__esModule?n:{default:n},l=r(7725),o=r(71),i=r(7932);t.RecipeAssocListTable=(({recipes:e,onRemove:t})=>a.default.createElement(l.DataTable,{items:e,disableHeader:!0},a.default.createElement(l.Column,{dataKey:"associatedRecipe",width:60,cellRenderer:({cellData:e})=>a.default.createElement(i.TouchButtonRemove,{onClick:()=>t(e)})}),a.default.createElement(l.Column,{dataKey:"nameLabel",width:300,label:o.i18n._("Name"),cellRenderer:l.ColumnRendererWithNote,columnData:{noteKey:"internalNote"}}),a.default.createElement(l.Column,{dataKey:"formattedPrice",width:100,label:o.i18n._("Price")})))},8348:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecipeIngredientsView=void 0;var n,a=(n=r(0))&&n.__esModule?n:{default:n},l=r(7708),o=r(47),i=r(71),u=r(7728),c=r(7791),d=r(8349),s=r(5805);function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}const m=o.RM.differenceWith(({id:e},{stockItem:t})=>e===t);t.RecipeIngredientsView=(()=>a.default.createElement(u.WithSettings,{observe:!1,render:e=>a.default.createElement(l.Field,{field:"ingredients"},t=>a.default.createElement(a.default.Fragment,null,a.default.createElement(d.RecipeIngredientsTable,{ingredients:t.value,onRemove:e=>{t.setValue(o.RM.reject(o.RM.propEq("stockItem",e),t.value))}}),a.default.createElement(s.QueryMenuStockList,f({},e.queryProps,{render:({stockItems:e})=>a.default.createElement(c.MenuSuggestionPanel,{addButtonText:i.i18n._("Add ingredient"),options:m(e,t.value),onAdd:e=>{t.setValue([...t.value,{stockItem:e.id,label:e.nameLabel,quantity:1,unitLabel:e.wareUnit.code,allergens:e.allergens.map(o.RM.prop("enum"))}])}})}))))}))},8349:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecipeIngredientsTable=void 0;var n=u(r(0)),a=u(r(7726)),l=r(7725),o=r(7710),i=r(71);function u(e){return e&&e.__esModule?e:{default:e}}function c(e){const t=i.i18n._("Quantity");return a.default.isEmpty(e+"")?i.i18n._("{fieldName} must be entered",{fieldName:t}):a.default.isFloat(e+"",{min:0})?null:i.i18n._("{fieldName} must be a positive number",{fieldName:t})}t.RecipeIngredientsTable=(({ingredients:e,onRemove:t,isLoading:r=!1})=>n.default.createElement(l.DataTable,{isLoading:r,items:e,disableHeader:!0,noRowsRenderer:()=>n.default.createElement(l.DataTableEmptyText,{text:i.i18n._("Recipe has no ingredients")})},n.default.createElement(l.Column,{dataKey:"stockItem",width:60,cellRenderer:l.ColumnRendererRemove,columnData:{onRemove:t}}),n.default.createElement(l.Column,{dataKey:"label",width:300,label:i.i18n._("Name")}),n.default.createElement(l.Column,{dataKey:"quantity",width:60,label:i.i18n._("Quantity"),cellRenderer:({rowIndex:e})=>n.default.createElement(o.FormInputTextBox,{field:["ingredients",e,"quantity"],validate:c,width:"40px"})}),n.default.createElement(l.Column,{dataKey:"unitLabel",width:100,label:i.i18n._("Ware unit")})))},8350:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MenuStockDepositPage=void 0;var n,a=(n=r(0))&&n.__esModule?n:{default:n},l=r(5781),o=r(71),i=r(5783),u=r(7748),c=r(8351),d=r(8356);t.MenuStockDepositPage=(e=>a.default.createElement(i.FullPageLayout,{width:16,pageTitle:o.i18n._("Stock deposit"),useBackButton:!0},a.default.createElement(l.Card,null,a.default.createElement(u.SettingsCompanyBranchPicker,null),a.default.createElement(d.StockDepositLoader,null,(e,t)=>a.default.createElement(c.StockDepositControl,{stockItems:e,onDeposit:t})))))},8351:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StockDepositControl=void 0;var n,a=r(122),l=(n=r(0))&&n.__esModule?n:{default:n},o=r(7790),i=r(7715),u=r(7755),c=r(47),d=r(8352),s=r(8353),f=r(8354),m=r(8355);t.StockDepositControl=class extends l.default.Component{constructor(){super(...arguments),this.state={targetStockItem:null,filteredStockItems:[],searchValue:"",inputQuantity:0},this.filterInputRef=l.default.createRef(),this.quantityInputRef=l.default.createRef(),this.onFilter=(e=>{if(""===e.trim())return void this.setState({filteredStockItems:[],searchValue:"",targetStockItem:null});const t=(0,u.isPartialMatch)(e),r=this.props.stockItems.filter(c.RM.cond([[c.RM.propEq("plu",e),c.RM.T],[c.RM.propSatisfies(t,"code"),c.RM.T],[c.RM.propSatisfies(t,"nameLabel"),c.RM.T]]));let n=null;1===r.length&&(n=c.RM.head(r)),this.setState({filteredStockItems:r,searchValue:e,targetStockItem:n})}),this.onConfirmFilter=(()=>{1===this.state.filteredStockItems.length&&this.quantityInputRef.current.focus()}),this.onQuantity=(e=>{this.setState({inputQuantity:e})}),this.onSelectStockItem=(e=>{this.setState({targetStockItem:e,filteredStockItems:[e]},()=>{this.quantityInputRef.current.focus()})}),this.onConfirm=(()=>{const{targetStockItem:e,inputQuantity:t}=this.state;e&&0!==t&&this.props.onDeposit(e,t),this.setState({targetStockItem:null,searchValue:"",inputQuantity:0},()=>{this.quantityInputRef.current.value="",this.filterInputRef.current.focus()})})}render(){const{searchValue:e,filteredStockItems:t,targetStockItem:r,inputQuantity:n}=this.state,u=""!==e.trim(),c=0===t.length,p=t.length>1;return l.default.createElement(l.default.Fragment,null,l.default.createElement(o.FormContainer,null,l.default.createElement(o.FormColumn,null,l.default.createElement(s.StockDepositFilterInput,{onFilter:this.onFilter,onConfirm:this.onConfirmFilter,value:e,ref:this.filterInputRef})),l.default.createElement(o.FormColumn,null,l.default.createElement(f.StockDepositQuantityInput,{enabled:null!==r,onChange:this.onQuantity,onConfirm:this.onConfirm,ref:this.quantityInputRef})),l.default.createElement(o.FormColumn,null,l.default.createElement(d.StockDepositConfirmButton,{cardName:r?r.nameLabel:"",quantity:n,wareUnit:r?r.wareUnit:null,onConfirm:this.onConfirm}))),l.default.createElement(i.Headline,null,u&&p&&l.default.createElement(a.Trans,{id:"Continue typing to find single stock card or select one from the list"}),u&&c&&l.default.createElement(a.Trans,{id:"No stock card found from entered search value"}),u&&r&&l.default.createElement(a.Trans,{id:"Stock card <0>{0}</0> is selected",values:{0:r.nameLabel},components:[l.default.createElement("b",null)]})),u&&l.default.createElement(m.StockDepositResultTable,{searchValue:e,stockItems:t,onSelect:this.onSelectStockItem}))}}},8352:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StockDepositConfirmButton=void 0;var n=r(122),a=i(r(147)),l=i(r(0)),o=r(5777);function i(e){return e&&e.__esModule?e:{default:e}}t.StockDepositConfirmButton=(({wareUnit:e,quantity:t,onConfirm:r})=>l.default.createElement(o.TouchButton,{disabled:null===e,onClick:r},e?l.default.createElement(n.Trans,{id:"Add {0} {1}",values:{0:(0,a.default)(t).format("0,0.[00]"),1:e.code}}):l.default.createElement(n.Trans,{id:"No stock card selected"})))},8353:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StockDepositFilterInput=void 0;var n,a=(n=r(0))&&n.__esModule?n:{default:n},l=r(7710),o=r(7709),i=r(71);const u=a.default.forwardRef(({value:e,onFilter:t,onConfirm:r},n)=>a.default.createElement(o.IconLine,{label:i.i18n._("Stock card"),labelWidth:7},a.default.createElement(l.FormInputStyled,{ref:n,autoFocus:!0,placeholder:`${i.i18n._("Code").toLocaleLowerCase()} / ${i.i18n._("PLU")} / ${i.i18n._("Title").toLocaleLowerCase()}`,value:e,onChange:e=>{t(e.target.value)},onKeyPressCapture:e=>{"Enter"===e.key&&(e.preventDefault(),r())}})));t.StockDepositFilterInput=u},8354:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StockDepositQuantityInput=void 0;var n=o(r(147)),a=o(r(0)),l=r(7710);function o(e){return e&&e.__esModule?e:{default:e}}const i=a.default.forwardRef(({enabled:e,onChange:t,onConfirm:r},o)=>a.default.createElement(l.FormInputStyled,{ref:o,disabled:!e,onChange:e=>{const r=(0,n.default)(e.target.value).value();t(r)},onKeyPressCapture:e=>{"Enter"===e.key&&(e.preventDefault(),r())}}));t.StockDepositQuantityInput=i},8355:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StockDepositResultTable=void 0;var n=d(r(0)),a=d(r(45)),l=r(7725),o=r(7856),i=r(71),u=r(5777),c=r(46);function d(e){return e&&e.__esModule?e:{default:e}}function s({rowData:e,columnData:{onSelect:t}}){return n.default.createElement(u.TouchButton,{iconName:"done",width:c.Spacing.ButtonHeight,height:c.Spacing.ButtonHeight,onClick:()=>t(e)})}t.StockDepositResultTable=(({stockItems:e,searchValue:t,onSelect:r})=>n.default.createElement(o.DataTableContainer,null,n.default.createElement(l.DataTable,{items:e,heightStretch:!1},n.default.createElement(l.Column,{dataKey:"id",width:60,cellRenderer:s,columnData:{onSelect:r}}),n.default.createElement(l.Column,{dataKey:"quantity",width:100,label:i.i18n._("Card stock"),cellRenderer:p}),n.default.createElement(l.Column,{dataKey:"code",width:100,label:i.i18n._("Card code"),cellRenderer:m(t)}),n.default.createElement(l.Column,{dataKey:"nameLabel",width:300,label:i.i18n._("Card name"),cellRenderer:m(t)}),n.default.createElement(l.Column,{dataKey:"note",width:300,label:i.i18n._("Card note")}))));const f=a.default.span.withConfig({displayName:"HighlightedValue"})`
  background-color: ${c.Colors.yellow};
`;function m(e){return({cellData:t})=>{const r=t.toLocaleLowerCase().indexOf(e.toLocaleLowerCase());if(-1===r)return t;const a=t.substring(0,r),l=t.substring(r,r+e.length),o=t.substring(r+e.length);return n.default.createElement(n.default.Fragment,null,a,n.default.createElement(f,null,l),o)}}function p({cellData:e,rowData:t}){return`${e} ${t.wareUnit.code}`}},8356:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StockDepositLoader=void 0;var n,a=(n=r(0))&&n.__esModule?n:{default:n},l=r(7728),o=r(8357);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}t.StockDepositLoader=(({children:e})=>a.default.createElement(o.ChangeMenuStockQuantity,{render:t=>{const r=(e,r)=>{t({variables:{stockItem:e.id,quantityChange:r}})};return a.default.createElement(l.WithSettings,{render:t=>a.default.createElement(o.QueryMenuStockDeposit,i({},t.queryProps,{render:({stockItems:t})=>e(t,r)}))})}}))},8357:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QueryMenuStockDeposit=t.ChangeMenuStockQuantity=void 0;var n,a=(n=r(21))&&n.__esModule?n:{default:n},l=r(8358),o=r(61),i=r(5807);const u=a.default`
  query GMenuStockDeposit($branchId: ID!) {
    stockItems(companyBranch: $branchId) {
      id
      code
      plu
      nameLabel: label
      note
      quantity
      wareUnit {
        ...GWareUnit
      }
    }
  }
  ${i.WareUnitFragment}
`,c=a.default`
  mutation GChangeMenuStockQuantity($stockItem: ID!, $quantityChange: Float!) {
    changeAmountStockItem(id: $stockItem, amountOffset: $quantityChange) {
      id
      quantity
    }
  }
`,d=(0,l.buildMutation)(c);t.ChangeMenuStockQuantity=d;const s=(0,o.buildQuery)(u);t.QueryMenuStockDeposit=s},8358:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildMutation=function(e){return t=>{var{render:r,children:n}=t,u=i(t,["render","children"]);return a.default.createElement(l.Mutation,o({mutation:e},u),r)}};var n,a=(n=r(0))&&n.__esModule?n:{default:n},l=r(281);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var i=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&(r[n[a]]=e[n[a]])}return r}},8359:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MenuStockListPage=void 0;var n,a=(n=r(0))&&n.__esModule?n:{default:n},l=r(7711),o=r(5781),i=r(7856),u=r(7724),c=r(7718),d=r(71),s=r(5783),f=r(7717),m=r(7748),p=r(7848),y=r(7936),g=r(8360);t.MenuStockListPage=(e=>a.default.createElement(a.default.Fragment,null,a.default.createElement(s.FullPageLayout,{pageTitle:d.i18n._("Stock overview"),useBackButton:!0}),a.default.createElement(f.PageLayoutFullHeightItem,null,a.default.createElement(o.Card,{stretchToParent:!0},a.default.createElement(c.FlexRowSingle,{justify:"start"},a.default.createElement(u.FlexColumn,null,a.default.createElement(m.SettingsCompanyBranchPicker,{width:20})),a.default.createElement(u.FlexColumn,null,a.default.createElement(y.MenuFilterInput,{modelType:"stock"}))),a.default.createElement(l.CanMutate,{mutationName:"createStockItem"},a.default.createElement(p.CreateButton,{routeTo:"create"})),a.default.createElement(i.DataTableContainer,null,a.default.createElement(g.StockListLoader,null))))))},8360:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StockListLoader=void 0;var n,a=r(94),l=(n=r(0))&&n.__esModule?n:{default:n},o=r(279),i=r(93),u=r(7755),c=r(47),d=r(5805),s=r(8361);const f=(0,a.observer)(()=>{const{settings:e}=(0,i.useRoot)(),{data:t,loading:r}=(0,o.useQuery)(d.MenuStockListQuery,Object.assign({},e.queryProps,{suspend:!1})),n=(0,a.useComputed)(()=>{if(!t.stockItems||0===t.stockItems.length)return[];const r=e.menu.stock.filterInput,n=(0,u.isPartialMatch)(r);return t.stockItems.filter(c.RM.cond([[c.RM.propEq("plu",r),c.RM.T],[c.RM.propSatisfies(n,"code"),c.RM.T],[c.RM.propSatisfies(n,"nameLabel"),c.RM.T]]))},[t&&t.stockItems]);return l.default.createElement(s.StockListTable,{stockItems:n,isLoading:r})});t.StockListLoader=f},8361:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StockListTable=void 0;var n,a=r(122),l=(n=r(0))&&n.__esModule?n:{default:n},o=r(7725),i=r(5790),u=r(71);function c({cellData:e,rowData:t}){return`${e} ${t.wareUnit.code}`}function d({cellData:e}){return!0===e?l.default.createElement(a.Trans,{id:"Permitted"}):l.default.createElement(a.Trans,{id:"Forbidden"})}t.StockListTable=(({stockItems:e,isLoading:t})=>l.default.createElement(o.DataTable,{items:e,heightStretch:!0,noRowsRenderer:()=>t?l.default.createElement(i.Loading,null):l.default.createElement("h3",null,l.default.createElement(a.Trans,{id:"Selected branch has no stock cards"}))},l.default.createElement(o.Column,{dataKey:"id",width:60,cellRenderer:(0,o.checkColumnAccess)({canQuery:"stockItem"},o.ColumnRendererEdit)}),l.default.createElement(o.Column,{dataKey:"code",width:100,label:u.i18n._("Card code")}),l.default.createElement(o.Column,{dataKey:"nameLabel",width:300,label:u.i18n._("Card name")}),l.default.createElement(o.Column,{dataKey:"quantity",width:100,label:u.i18n._("Card stock"),cellRenderer:c}),l.default.createElement(o.Column,{dataKey:"allowNegative",width:300,label:u.i18n._("Negative stock"),cellRenderer:d}),l.default.createElement(o.Column,{dataKey:"note",width:300,label:u.i18n._("Card note")})))},8362:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MenuStockPage=void 0;var n,a=(n=r(0))&&n.__esModule?n:{default:n},l=r(7711),o=r(7720),i=r(5781),u=r(71),c=r(5783),d=r(7849),s=r(7850),f=r(8363),m=r(8365),p=r(8371);t.MenuStockPage=(({stockId:e})=>a.default.createElement(c.FullPageLayout,{width:16,pageTitle:u.i18n._("Stock card"),hideLogoutWidget:!0,useBackButton:!0},a.default.createElement(f.StockFormLoader,{stockId:e},a.default.createElement(a.default.Fragment,null,a.default.createElement(d.TopRightButtonContainer,null,a.default.createElement(l.CanMutate,{mutationName:null===e?"createStockItem":"updateStockItem"},a.default.createElement(s.SubmitButton,{isCreate:null===e}))),a.default.createElement(i.Card,null,a.default.createElement(m.StockFormMain,null),a.default.createElement(o.CanQuery,{queryName:"recipes"},a.default.createElement(p.StockRecipesView,{stockId:e})))))))},8363:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StockFormLoader=void 0;var n,a=(n=r(0))&&n.__esModule?n:{default:n},l=r(148),o=r(47),i=r(7854),u=r(7855),c=r(8364);var d=function(e,t,r,n){return new(r||(r=Promise))(function(a,l){function o(e){try{u(n.next(e))}catch(t){l(t)}}function i(e){try{u(n.throw(e))}catch(t){l(t)}}function u(e){e.done?a(e.value):new r(function(t){t(e.value)}).then(o,i)}u((n=n.apply(e,t||[])).next())})};function s(){return{id:"NEW",internalNote:"",nameLabel:"",code:"",plu:"",note:"",wareUnit:null,allergens:[],allowNegative:l.FieldStateEnum.Default,allowNegativeDefault:l.FieldStateEnum.Default}}function f(e){return e?l.FieldStateEnum.Default:l.FieldStateEnum.Disabled}t.StockFormLoader=(({stockId:e,children:t})=>{const r=(0,u.useMenu)();return a.default.createElement(i.MenuBaseFormLoader,{isCreate:null===e,onCreate:e=>r.stock.createItem(e),onUpdate:e=>r.stock.updateItem(e),getDefaultValues:s,loadDefaults:()=>d(void 0,void 0,void 0,function*(){const{data:e}=yield r.client.query({query:c.MenuStockDefaultsQuery,variables:{branchId:r.stock.branchId},fetchPolicy:"no-cache"});return{allowNegativeDefault:f(e.companyBranch.allowNegative)}}),loadValues:()=>d(void 0,void 0,void 0,function*(){const{data:t}=yield r.client.query({query:c.MenuStockFormQuery,variables:{stockId:e},fetchPolicy:"no-cache"});return{id:(n=t.stockItem).id,internalNote:"TBD",nameLabel:n.nameLabel,code:n.code,note:n.note,plu:n.plu||"",wareUnit:n.wareUnit.enum,allergens:n.allergens.map(o.RM.prop("enum")),allowNegative:n.allowNegative,allowNegativeDefault:f(n.companyBranch.allowNegative)};var n})},t)})},8364:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QueryMenuStock=t.MenuStockDefaultsQuery=t.MenuStockFormQuery=void 0;var n,a=(n=r(21))&&n.__esModule?n:{default:n},l=r(61),o=r(5806),i=r(5807);const u=a.default`
  query GMenuStockForm($stockId: ID!) {
    stockItem(id: $stockId) {
      id
      code
      plu
      note
      nameLabel: label
      allowNegative
      wareUnit {
        ...GWareUnit
      }
      allergens {
        ...GAllergen
      }
      companyBranch {
        id
        allowNegative: stockItemsCanBeNegative
      }
    }
  }
  ${o.AllergenFragment}
  ${i.WareUnitFragment}
`;t.MenuStockFormQuery=u;const c=a.default`
  query GMenuStockDefaults($branchId: ID!) {
    companyBranch(id: $branchId) {
      id
      allowNegative: stockItemsCanBeNegative
    }
  }
`;t.MenuStockDefaultsQuery=c;const d=(0,l.buildQuery)(u);t.QueryMenuStock=d},8365:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StockFormMain=void 0;var n,a=(n=r(0))&&n.__esModule?n:{default:n},l=r(7711),o=r(7790),i=r(71),u=r(7728),c=r(7851),d=r(8366),s=r(8367),f=r(7938),m=r(7852),p=r(7853),y=r(8368),g=r(8369);t.StockFormMain=(e=>a.default.createElement(o.FormContainer,null,a.default.createElement(o.FormColumn,null,a.default.createElement(p.FormInputName,{placeholder:i.i18n._("Card name")}),a.default.createElement(f.FormInputCode,{placeholder:i.i18n._("Card code")}),a.default.createElement(g.FormInputWareUnit,{placeholder:i.i18n._("Choose unit")}),a.default.createElement(y.FormInputPlu,{placeholder:i.i18n._("PLU")}),a.default.createElement(m.FormInputInternalNote,{placeholder:i.i18n._("Card note"),field:"note",label:i.i18n._("Card note")}),a.default.createElement(d.FormInputAllergens,null),a.default.createElement(s.FormInputAllowNegative,null)),a.default.createElement(o.FormColumn,null,a.default.createElement(l.CanMutate,{mutationName:"destroyStockItem"},a.default.createElement(u.WithSettings,{render:({menu:e})=>a.default.createElement(c.FormDeleteButton,{confirmText:i.i18n._("Remove this card?"),onDelete:t=>e.stock.deleteItem(t)})})))))},8366:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormInputAllergens=void 0;var n,a=(n=r(0))&&n.__esModule?n:{default:n},l=r(7708),o=r(7709),i=r(47),u=r(7939);t.FormInputAllergens=(({field:e="allergens",icon:t="error_outline"})=>a.default.createElement(l.Field,{field:e},e=>a.default.createElement(o.IconLine,{icon:t,labelWidth:7},a.default.createElement(u.MenuAllergenIndicator,{selected:e.value,onToggle:t=>{const r=e.value;r.includes(t)?e.setValue(i.RM.without([t],r)):e.setValue([...r,t])}}))))},8367:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormInputAllowNegative=void 0;var n=r(122),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(r(0)),l=r(7708),o=r(7765),i=r(7709),u=r(148),c=r(71);const d=[{type:u.FieldStateEnum.Enabled,label:(0,n.i18nMark)("Permit")},{type:u.FieldStateEnum.Disabled,label:(0,n.i18nMark)("Forbid")}];t.FormInputAllowNegative=(({})=>{const e=(0,a.useMemo)(()=>` (${c.i18n._("Is default setting").toLocaleLowerCase()})`,[]);return a.default.createElement(l.FormApi,null,({values:{allowNegativeDefault:t}})=>a.default.createElement(i.IconLine,{label:c.i18n._("Negative stock"),labelWidth:7},a.default.createElement(o.FormInputFlatSelect,{field:"allowNegative",items:d,formatItem:r=>r.type===t?a.default.createElement("span",null,c.i18n._(r.label),a.default.createElement("i",null,e)):c.i18n._(r.label),getItemId:e=>e.type})))})},8368:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormInputPlu=void 0;var n,a=(n=r(0))&&n.__esModule?n:{default:n},l=r(7710),o=r(7709);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var u=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&(r[n[a]]=e[n[a]])}return r};t.FormInputPlu=(e=>{var{field:t="plu",icon:r="fingerprint"}=e,n=u(e,["field","icon"]);return a.default.createElement(o.IconLine,{icon:r,labelWidth:7},a.default.createElement(l.FormInputTextBox,i({field:t,width:9},n)))})},8369:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormInputWareUnit=void 0;var n,a=(n=r(0))&&n.__esModule?n:{default:n},l=r(7846),o=r(7709),i=r(47),u=r(71),c=r(8370);function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var s=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&(r[n[a]]=e[n[a]])}return r};t.FormInputWareUnit=(e=>{var{field:t="wareUnit",icon:r="select_all"}=e,n=s(e,["field","icon"]);return a.default.createElement(c.QueryWareUnits,{renderLoading:!1,render:({wareUnits:e},{loading:c})=>a.default.createElement(o.IconLine,{icon:r,labelWidth:7},a.default.createElement(l.FormInputSelect,d({field:t,options:e||[],isLoading:c,isRequired:!0,validatioName:u.i18n._("Ware unit"),getOptionLabel:i.RM.prop("code"),getOptionValue:i.RM.prop("enum"),width:12},n)))})})},8370:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QueryWareUnits=t.WareUnitsQuery=void 0;var n,a=(n=r(21))&&n.__esModule?n:{default:n},l=r(61);const o=a.default`
  query GWareUnits {
    wareUnits {
      id
      code
      enum
    }
  }
`;t.WareUnitsQuery=o;const i=(0,l.buildQuery)(o);t.QueryWareUnits=i},8371:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StockRecipesView=void 0;var n,a=r(122),l=(n=r(0))&&n.__esModule?n:{default:n},o=r(7725),i=r(7715),u=r(71),c=r(8372);t.StockRecipesView=(({stockId:e})=>null===e?null:l.default.createElement(c.QueryStockRecipes,{variables:{stockId:e},render:({stockItem:{ingredients:e}})=>e.length>0?l.default.createElement(l.default.Fragment,null,l.default.createElement(i.Headline,null,l.default.createElement(a.Trans,{id:"Recipes using this card"})),l.default.createElement(o.DataTable,{items:[...e]},l.default.createElement(o.Column,{dataKey:"",cellDataGetter:({rowData:e})=>`../../recipe/${e.recipe.id}`,cellRenderer:o.ColumnRendererEdit,width:100}),l.default.createElement(o.Column,{dataKey:"recipe",width:300,label:u.i18n._("Name"),cellRenderer:({rowData:e})=>l.default.createElement(l.default.Fragment,null,e.recipe.nameLabel,l.default.createElement(o.NoteText,null,e.recipe.descriptionLabel))}))):null}))},8372:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QueryStockRecipes=t.StockRecipesQuery=void 0;var n,a=(n=r(21))&&n.__esModule?n:{default:n},l=r(61);const o=a.default`
  query GStockRecipes($stockId: ID!) {
    stockItem(id: $stockId) {
      id
      ingredients {
        id
        recipe {
          id
          nameLabel
          descriptionLabel
        }
      }
    }
  }
`;t.StockRecipesQuery=o;const i=(0,l.buildQuery)(o);t.QueryStockRecipes=i}}]);
//# sourceMappingURL=55.587b6fc4.chunk.js.map